var LA=Object.defineProperty;var TA=(e,t,r)=>t in e?LA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Bi=(e,t,r)=>(TA(e,typeof t!="symbol"?t+"":t,r),r);import{_ as rd}from"./preload-helper.41c905a7.js";import{S as Pn,i as Mn,s as Cn,k as ct,a as pr,l as ft,m as wt,c as dr,h as de,b as It,G as Qe,H as Xn,o as jf,n as ye,J as ys,q as Nn,r as Rn,u as No,K as d0,w as Ft,L as yl,M as gs,N as Qr,e as Xi,O as $h,P as Gh,Q as ni,g as Ze,v as Ui,d as at,f as qi,y as Bt,z as Yt,A as jt,R as uh,T as y0,B as Ut,U as oa,p as zo,V as R0,W as Jt,X as er,Y as np,Z as Fh,_ as PA,I as vl,C as Bu,D as ju,E as Uu,F as qu,$ as MA,a0 as gp,a1 as N_,a2 as DA,a3 as Ul,a4 as zA,x as rs,a5 as Py,a6 as ip,a7 as ch,a8 as My,a9 as NA,aa as RA,ab as M1,ac as Hw,ad as R_,ae as OA}from"./index.e3feca37.js";import{w as df,d as FA}from"./index.244686b5.js";var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var u=Function.bind.apply(t,o);return new u}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Ic={},UA={get exports(){return Ic},set exports(e){Ic=e}};(function(e,t){(function(r,n){e.exports=n()})(Hc,function(){var r,n,o;function u(s,f){if(!r)r=f;else if(!n)n=f;else{var v="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",w={};r(w),o=f(w),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}u(["exports"],function(s){var f=v;function v(y,p,_,S){this.cx=3*y,this.bx=3*(_-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(S-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=p,this.p2x=_,this.p2y=S}function w(y,p,_,S){const z=new f(y,p,_,S);return function(O){return z.solve(O)}}v.prototype={sampleCurveX:function(y){return((this.ax*y+this.bx)*y+this.cx)*y},sampleCurveY:function(y){return((this.ay*y+this.by)*y+this.cy)*y},sampleCurveDerivativeX:function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},solveCurveX:function(y,p){if(p===void 0&&(p=1e-6),y<0)return 0;if(y>1)return 1;for(var _=y,S=0;S<8;S++){var z=this.sampleCurveX(_)-y;if(Math.abs(z)<p)return _;var O=this.sampleCurveDerivativeX(_);if(Math.abs(O)<1e-6)break;_-=z/O}var V=0,Q=1;for(_=y,S=0;S<20&&(z=this.sampleCurveX(_),!(Math.abs(z-y)<p));S++)y>z?V=_:Q=_,_=.5*(Q-V)+V;return _},solve:function(y,p){return this.sampleCurveY(this.solveCurveX(y,p))}};const E=w(.25,.1,.25,1);function L(y,p,_){return Math.min(_,Math.max(p,y))}function C(y,p,_){const S=_-p,z=((y-p)%S+S)%S+p;return z===p?_:z}function F(y,...p){for(const _ of p)for(const S in _)y[S]=_[S];return y}let B=1;function G(y,p){y.forEach(_=>{p[_]&&(p[_]=p[_].bind(p))})}function H(y,p,_){const S={};for(const z in y)S[z]=p.call(_||this,y[z],z,y);return S}function Z(y,p,_){const S={};for(const z in y)p.call(_||this,y[z],z,y)&&(S[z]=y[z]);return S}function ee(y){return Array.isArray(y)?y.map(ee):typeof y=="object"&&y?H(y,ee):y}const Y={};function le(y){Y[y]||(typeof console<"u"&&console.warn(y),Y[y]=!0)}function ce(y,p,_){return(_.y-y.y)*(p.x-y.x)>(p.y-y.y)*(_.x-y.x)}function ve(y){let p=0;for(let _,S,z=0,O=y.length,V=O-1;z<O;V=z++)_=y[z],S=y[V],p+=(S.x-_.x)*(_.y+S.y);return p}function pe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ne(y){const p={};if(y.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,S,z,O)=>{const V=z||O;return p[S]=!V||V.toLowerCase(),""}),p["max-age"]){const _=parseInt(p["max-age"],10);isNaN(_)?delete p["max-age"]:p["max-age"]=_}return p}let Ve,be,Ce=null;function Oe(y){if(Ce==null){const p=y.navigator?y.navigator.userAgent:null;Ce=!!y.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return Ce}function nt(y){return typeof ImageBitmap<"u"&&y instanceof ImageBitmap}const mt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y){const p=requestAnimationFrame(y);return{cancel:()=>cancelAnimationFrame(p)}},getImageData(y,p=0){const _=window.document.createElement("canvas"),S=_.getContext("2d");if(!S)throw new Error("failed to create canvas 2d context");return _.width=y.width,_.height=y.height,S.drawImage(y,0,0,y.width,y.height),S.getImageData(-p,-p,y.width+2*p,y.height+2*p)},resolveURL:y=>(Ve||(Ve=document.createElement("a")),Ve.href=y,Ve.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(be==null&&(be=matchMedia("(prefers-reduced-motion: reduce)")),be.matches)}};var ht=He;function He(y,p){this.x=y,this.y=p}He.prototype={clone:function(){return new He(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,p){return this.clone()._rotateAround(y,p)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var p=y.x-this.x,_=y.y-this.y;return p*p+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,p){return Math.atan2(this.x*p-this.y*y,this.x*y+this.y*p)},_matMult:function(y){var p=y[2]*this.x+y[3]*this.y;return this.x=y[0]*this.x+y[1]*this.y,this.y=p,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var p=Math.cos(y),_=Math.sin(y),S=_*this.x+p*this.y;return this.x=p*this.x-_*this.y,this.y=S,this},_rotateAround:function(y,p){var _=Math.cos(y),S=Math.sin(y),z=p.y+S*(this.x-p.x)+_*(this.y-p.y);return this.x=p.x+_*(this.x-p.x)-S*(this.y-p.y),this.y=z,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},He.convert=function(y){return y instanceof He?y:Array.isArray(y)?new He(y[0],y[1]):y};const ut={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},bt="mapbox-tiles";let Xe,We,ke=500,Re=50;function Pe(){typeof caches>"u"||Xe||(Xe=caches.open(bt))}let dt=1/0;const Et={supported:!1,testSupport:function(y){!$t&&Kt&&(br?Gt(y):Pt=y)}};let Pt,Kt,$t=!1,br=!1;function Gt(y){const p=y.createTexture();y.bindTexture(y.TEXTURE_2D,p);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Kt),y.isContextLost())return;Et.supported=!0}catch{}y.deleteTexture(p),$t=!0}typeof document<"u"&&(Kt=document.createElement("img"),Kt.onload=function(){Pt&&Gt(Pt),Pt=null,br=!0},Kt.onerror=function(){$t=!0,Pt=null},Kt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Rr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Rr);class Mr extends Error{constructor(p,_,S,z){super(`AJAXError: ${_} (${p}): ${S}`),this.status=p,this.statusText=_,this.url=S,this.body=z}}const Kr=pe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Ct(y,p){const _=new AbortController,S=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:Kr(),signal:_.signal});let z=!1,O=!1;return y.type==="json"&&S.headers.set("Accept","application/json"),((V,Q,ie)=>{if(O)return;const he=Date.now();fetch(S).then(Ee=>Ee.ok?((Me,Ge,et)=>{(y.type==="arrayBuffer"?Me.arrayBuffer():y.type==="json"?Me.json():Me.text()).then(rt=>{O||(Ge&&et&&function(Vt,Ot,xr){if(Pe(),!Xe)return;const jr={status:Ot.status,statusText:Ot.statusText,headers:new Headers};Ot.headers.forEach((Tr,an)=>jr.headers.set(an,Tr));const gr=Ne(Ot.headers.get("Cache-Control")||"");gr["no-store"]||(gr["max-age"]&&jr.headers.set("Expires",new Date(xr+1e3*gr["max-age"]).toUTCString()),new Date(jr.headers.get("Expires")).getTime()-xr<42e4||function(Tr,an){if(We===void 0)try{new Response(new ReadableStream),We=!0}catch{We=!1}We?an(Tr.body):Tr.blob().then(an)}(Ot,Tr=>{const an=new Response(Tr,jr);Pe(),Xe&&Xe.then(rn=>rn.put(function(ri){const fi=ri.indexOf("?");return fi<0?ri:ri.slice(0,fi)}(Vt.url),an)).catch(rn=>le(rn.message))}))}(S,Ge,et),z=!0,p(null,rt,Me.headers.get("Cache-Control"),Me.headers.get("Expires")))}).catch(rt=>{O||p(new Error(rt.message))})})(Ee,null,he):Ee.blob().then(Me=>p(new Mr(Ee.status,Ee.statusText,y.url,Me)))).catch(Ee=>{Ee.code!==20&&p(new Error(Ee.message))})})(),{cancel:()=>{O=!0,z||_.abort()}}}const pt=function(y,p){if(/:\/\//.test(y.url)&&!/^https?:|^file:/.test(y.url)){if(pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,p);if(!pe()){const S=y.url.substring(0,y.url.indexOf("://"));return(ut.REGISTERED_PROTOCOLS[S]||Ct)(y,p)}}if(!(/^file:/.test(_=y.url)||/^file:/.test(Kr())&&!/^\w+:/.test(_))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ct(y,p);if(pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,p,void 0,!0)}var _;return function(S,z){const O=new XMLHttpRequest;O.open(S.method||"GET",S.url,!0),S.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(const V in S.headers)O.setRequestHeader(V,S.headers[V]);return S.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=S.credentials==="include",O.onerror=()=>{z(new Error(O.statusText))},O.onload=()=>{if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let V=O.response;if(S.type==="json")try{V=JSON.parse(O.response)}catch(Q){return z(Q)}z(null,V,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else{const V=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});z(new Mr(O.status,O.statusText,S.url,V))}},O.send(S.body),{cancel:()=>O.abort()}}(y,p)},Dr=function(y,p){return pt(F(y,{type:"arrayBuffer"}),p)};function ln(y){const p=window.document.createElement("a");return p.href=y,p.protocol===window.document.location.protocol&&p.host===window.document.location.host}const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ur,dn;Ur=[],dn=0;const tn=function(y,p){if(Et.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),dn>=ut.MAX_PARALLEL_IMAGE_REQUESTS){const O={requestParameters:y,callback:p,cancelled:!1,cancel(){this.cancelled=!0}};return Ur.push(O),O}dn++;let _=!1;const S=()=>{if(!_)for(_=!0,dn--;Ur.length&&dn<ut.MAX_PARALLEL_IMAGE_REQUESTS;){const O=Ur.shift(),{requestParameters:V,callback:Q,cancelled:ie}=O;ie||(O.cancel=tn(V,Q).cancel)}},z=Dr(y,(O,V,Q,ie)=>{S(),O?p(O):V&&function(he,Ee){typeof createImageBitmap=="function"?function(Me,Ge){const et=new Blob([new Uint8Array(Me)],{type:"image/png"});createImageBitmap(et).then(rt=>{Ge(null,rt)}).catch(rt=>{Ge(new Error(`Could not load image because of ${rt.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(he,Ee):function(Me,Ge){const et=new Image;et.onload=()=>{Ge(null,et),URL.revokeObjectURL(et.src),et.onload=null,window.requestAnimationFrame(()=>{et.src=Wt})},et.onerror=()=>Ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const rt=new Blob([new Uint8Array(Me)],{type:"image/png"});et.src=Me.byteLength?URL.createObjectURL(rt):Wt}(he,Ee)}(V,(he,Ee)=>{he!=null?p(he):Ee!=null&&p(null,Ee,{cacheControl:Q,expires:ie})})});return{cancel:()=>{z.cancel(),S()}}};function Bn(y,p,_){_[y]&&_[y].indexOf(p)!==-1||(_[y]=_[y]||[],_[y].push(p))}function Jn(y,p,_){if(_&&_[y]){const S=_[y].indexOf(p);S!==-1&&_[y].splice(S,1)}}class ai{constructor(p,_={}){F(this,_),this.type=p}}class _i extends ai{constructor(p,_={}){super("error",F({error:p},_))}}class hi{on(p,_){return this._listeners=this._listeners||{},Bn(p,_,this._listeners),this}off(p,_){return Jn(p,_,this._listeners),Jn(p,_,this._oneTimeListeners),this}once(p,_){return this._oneTimeListeners=this._oneTimeListeners||{},Bn(p,_,this._oneTimeListeners),this}fire(p,_){typeof p=="string"&&(p=new ai(p,_||{}));const S=p.type;if(this.listens(S)){p.target=this;const z=this._listeners&&this._listeners[S]?this._listeners[S].slice():[];for(const Q of z)Q.call(this,p);const O=this._oneTimeListeners&&this._oneTimeListeners[S]?this._oneTimeListeners[S].slice():[];for(const Q of O)Jn(S,Q,this._oneTimeListeners),Q.call(this,p);const V=this._eventedParent;V&&(F(p,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(p))}else p instanceof _i&&console.error(p.error);return this}listens(p){return this._listeners&&this._listeners[p]&&this._listeners[p].length>0||this._oneTimeListeners&&this._oneTimeListeners[p]&&this._oneTimeListeners[p].length>0||this._eventedParent&&this._eventedParent.listens(p)}setEventedParent(p,_){return this._eventedParent=p,this._eventedParentData=_,this}}var yr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Vr{constructor(p,_,S,z){this.message=(p?`${p}: `:"")+S,z&&(this.identifier=z),_!=null&&_.__line__&&(this.line=_.__line__)}}function wi(y){const p=y.value;return p?[new Vr(y.key,p,"constants have been deprecated as of v8")]:[]}function xn(y,...p){for(const _ of p)for(const S in _)y[S]=_[S];return y}function si(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function fr(y){if(Array.isArray(y))return y.map(fr);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){const p={};for(const _ in y)p[_]=fr(y[_]);return p}return si(y)}class or extends Error{constructor(p,_){super(_),this.message=_,this.key=p}}class Yr{constructor(p,_=[]){this.parent=p,this.bindings={};for(const[S,z]of _)this.bindings[S]=z}concat(p){return new Yr(this,p)}get(p){if(this.bindings[p])return this.bindings[p];if(this.parent)return this.parent.get(p);throw new Error(`${p} not found in scope.`)}has(p){return!!this.bindings[p]||!!this.parent&&this.parent.has(p)}}const un={kind:"null"},Or={kind:"number"},pn={kind:"string"},Qn={kind:"boolean"},ci={kind:"color"},Ro={kind:"object"},gi={kind:"value"},co={kind:"collator"},li={kind:"formatted"},no={kind:"padding"},yo={kind:"resolvedImage"};function pi(y,p){return{kind:"array",itemType:y,N:p}}function Li(y){if(y.kind==="array"){const p=Li(y.itemType);return typeof y.N=="number"?`array<${p}, ${y.N}>`:y.itemType.kind==="value"?"array":`array<${p}>`}return y.kind}const Yo=[un,Or,pn,Qn,ci,li,Ro,pi(gi),no,yo];function vn(y,p){if(p.kind==="error")return null;if(y.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!vn(y.itemType,p.itemType))&&(typeof y.N!="number"||y.N===p.N))return null}else{if(y.kind===p.kind)return null;if(y.kind==="value"){for(const _ of Yo)if(!vn(_,p))return null}}return`Expected ${Li(y)} but found ${Li(p)} instead.`}function ze(y,p){return p.some(_=>_.kind===y.kind)}function Ea(y,p){return p.some(_=>_==="null"?y===null:_==="array"?Array.isArray(y):_==="object"?y&&!Array.isArray(y)&&typeof y=="object":_===typeof y)}var ha,ra={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function we(y){return(y=Math.round(y))<0?0:y>255?255:y}function _e(y){return we(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function De(y){return(p=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:p>1?1:p;var p}function ot(y,p,_){return _<0?_+=1:_>1&&(_-=1),6*_<1?y+(p-y)*_*6:2*_<1?p:3*_<2?y+(p-y)*(2/3-_)*6:y}try{ha={}.parseCSSColor=function(y){var p,_=y.replace(/ /g,"").toLowerCase();if(_ in ra)return ra[_].slice();if(_[0]==="#")return _.length===4?(p=parseInt(_.substr(1),16))>=0&&p<=4095?[(3840&p)>>4|(3840&p)>>8,240&p|(240&p)>>4,15&p|(15&p)<<4,1]:null:_.length===7&&(p=parseInt(_.substr(1),16))>=0&&p<=16777215?[(16711680&p)>>16,(65280&p)>>8,255&p,1]:null;var S=_.indexOf("("),z=_.indexOf(")");if(S!==-1&&z+1===_.length){var O=_.substr(0,S),V=_.substr(S+1,z-(S+1)).split(","),Q=1;switch(O){case"rgba":if(V.length!==4)return null;Q=De(V.pop());case"rgb":return V.length!==3?null:[_e(V[0]),_e(V[1]),_e(V[2]),Q];case"hsla":if(V.length!==4)return null;Q=De(V.pop());case"hsl":if(V.length!==3)return null;var ie=(parseFloat(V[0])%360+360)%360/360,he=De(V[1]),Ee=De(V[2]),Me=Ee<=.5?Ee*(he+1):Ee+he-Ee*he,Ge=2*Ee-Me;return[we(255*ot(Ge,Me,ie+1/3)),we(255*ot(Ge,Me,ie)),we(255*ot(Ge,Me,ie-1/3)),Q];default:return null}}return null}}catch{}class lt{constructor(p,_,S,z=1){this.r=p,this.g=_,this.b=S,this.a=z}static parse(p){if(!p)return;if(p instanceof lt)return p;if(typeof p!="string")return;const _=ha(p);return _?new lt(_[0]/255*_[3],_[1]/255*_[3],_[2]/255*_[3],_[3]):void 0}toString(){const[p,_,S,z]=this.toArray();return`rgba(${Math.round(p)},${Math.round(_)},${Math.round(S)},${z})`}toArray(){const{r:p,g:_,b:S,a:z}=this;return z===0?[0,0,0,0]:[255*p/z,255*_/z,255*S/z,z]}}lt.black=new lt(0,0,0,1),lt.white=new lt(1,1,1,1),lt.transparent=new lt(0,0,0,0),lt.red=new lt(1,0,0,1);class Rt{constructor(p,_,S){this.sensitivity=p?_?"variant":"case":_?"accent":"base",this.locale=S,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(p,_){return this.collator.compare(p,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fe{constructor(p,_,S,z,O){this.text=p,this.image=_,this.scale=S,this.fontStack=z,this.textColor=O}}class Ht{constructor(p){this.sections=p}static fromString(p){return new Ht([new Fe(p,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(p=>p.text.length!==0||p.image&&p.image.name.length!==0)}static factory(p){return p instanceof Ht?p:Ht.fromString(p)}toString(){return this.sections.length===0?"":this.sections.map(p=>p.text).join("")}}class Nt{constructor(p){this.values=p.slice()}static parse(p){if(p instanceof Nt)return p;if(typeof p=="number")return new Nt([p,p,p,p]);if(Array.isArray(p)&&!(p.length<1||p.length>4)){for(const _ of p)if(typeof _!="number")return;switch(p.length){case 1:p=[p[0],p[0],p[0],p[0]];break;case 2:p=[p[0],p[1],p[0],p[1]];break;case 3:p=[p[0],p[1],p[2],p[1]]}return new Nt(p)}}toString(){return JSON.stringify(this.values)}}class ir{constructor(p){this.name=p.name,this.available=p.available}toString(){return this.name}static fromString(p){return p?new ir({name:p,available:!1}):null}}function Br(y,p,_,S){return typeof y=="number"&&y>=0&&y<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof _=="number"&&_>=0&&_<=255?S===void 0||typeof S=="number"&&S>=0&&S<=1?null:`Invalid rgba value [${[y,p,_,S].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof S=="number"?[y,p,_,S]:[y,p,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nn(y){if(y===null||typeof y=="string"||typeof y=="boolean"||typeof y=="number"||y instanceof lt||y instanceof Rt||y instanceof Ht||y instanceof Nt||y instanceof ir)return!0;if(Array.isArray(y)){for(const p of y)if(!nn(p))return!1;return!0}if(typeof y=="object"){for(const p in y)if(!nn(y[p]))return!1;return!0}return!1}function Fr(y){if(y===null)return un;if(typeof y=="string")return pn;if(typeof y=="boolean")return Qn;if(typeof y=="number")return Or;if(y instanceof lt)return ci;if(y instanceof Rt)return co;if(y instanceof Ht)return li;if(y instanceof Nt)return no;if(y instanceof ir)return yo;if(Array.isArray(y)){const p=y.length;let _;for(const S of y){const z=Fr(S);if(_){if(_===z)continue;_=gi;break}_=z}return pi(_||gi,p)}return Ro}function Hn(y){const p=typeof y;return y===null?"":p==="string"||p==="number"||p==="boolean"?String(y):y instanceof lt||y instanceof Ht||y instanceof Nt||y instanceof ir?y.toString():JSON.stringify(y)}class Yn{constructor(p,_){this.type=p,this.value=_}static parse(p,_){if(p.length!==2)return _.error(`'literal' expression requires exactly one argument, but found ${p.length-1} instead.`);if(!nn(p[1]))return _.error("invalid value");const S=p[1];let z=Fr(S);const O=_.expectedType;return z.kind!=="array"||z.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(z=O),new Yn(z,S)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class sn{constructor(p){this.name="ExpressionEvaluationError",this.message=p}toJSON(){return this.message}}const yi={string:pn,number:Or,boolean:Qn,object:Ro};class Ai{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");let S,z=1;const O=p[0];if(O==="array"){let Q,ie;if(p.length>2){const he=p[1];if(typeof he!="string"||!(he in yi)||he==="object")return _.error('The item type argument of "array" must be one of string, number, boolean',1);Q=yi[he],z++}else Q=gi;if(p.length>3){if(p[2]!==null&&(typeof p[2]!="number"||p[2]<0||p[2]!==Math.floor(p[2])))return _.error('The length argument to "array" must be a positive integer literal',2);ie=p[2],z++}S=pi(Q,ie)}else{if(!yi[O])throw new Error(`Types doesn't contain name = ${O}`);S=yi[O]}const V=[];for(;z<p.length;z++){const Q=_.parse(p[z],z,gi);if(!Q)return null;V.push(Q)}return new Ai(S,V)}evaluate(p){for(let _=0;_<this.args.length;_++){const S=this.args[_].evaluate(p);if(!vn(this.type,Fr(S)))return S;if(_===this.args.length-1)throw new sn(`Expected value to be of type ${Li(this.type)}, but found ${Li(Fr(S))} instead.`)}throw new Error}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}const Yi={"to-boolean":Qn,"to-color":ci,"to-number":Or,"to-string":pn};class Ii{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");const S=p[0];if(!Yi[S])throw new Error(`Can't parse ${S} as it is not part of the known types`);if((S==="to-boolean"||S==="to-string")&&p.length!==2)return _.error("Expected one argument.");const z=Yi[S],O=[];for(let V=1;V<p.length;V++){const Q=_.parse(p[V],V,gi);if(!Q)return null;O.push(Q)}return new Ii(z,O)}evaluate(p){if(this.type.kind==="boolean")return!!this.args[0].evaluate(p);if(this.type.kind==="color"){let _,S;for(const z of this.args){if(_=z.evaluate(p),S=null,_ instanceof lt)return _;if(typeof _=="string"){const O=p.parseColor(_);if(O)return O}else if(Array.isArray(_)&&(S=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:Br(_[0],_[1],_[2],_[3]),!S))return new lt(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new sn(S||`Could not parse color from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}if(this.type.kind==="padding"){let _;for(const S of this.args){_=S.evaluate(p);const z=Nt.parse(_);if(z)return z}throw new sn(`Could not parse padding from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}if(this.type.kind==="number"){let _=null;for(const S of this.args){if(_=S.evaluate(p),_===null)return 0;const z=Number(_);if(!isNaN(z))return z}throw new sn(`Could not convert ${JSON.stringify(_)} to number.`)}return this.type.kind==="formatted"?Ht.fromString(Hn(this.args[0].evaluate(p))):this.type.kind==="resolvedImage"?ir.fromString(Hn(this.args[0].evaluate(p))):Hn(this.args[0].evaluate(p))}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}const Vi=["Unknown","Point","LineString","Polygon"];class io{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(p){let _=this._parseColorCache[p];return _||(_=this._parseColorCache[p]=lt.parse(p)),_}}class ko{constructor(p,_,S,z){this.name=p,this.type=_,this._evaluate=S,this.args=z}evaluate(p){return this._evaluate(p,this.args)}eachChild(p){this.args.forEach(p)}outputDefined(){return!1}static parse(p,_){const S=p[0],z=ko.definitions[S];if(!z)return _.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(z)?z[0]:z.type,V=Array.isArray(z)?[[z[1],z[2]]]:z.overloads,Q=V.filter(([he])=>!Array.isArray(he)||he.length===p.length-1);let ie=null;for(const[he,Ee]of Q){ie=new kl(_.registry,_.path,null,_.scope);const Me=[];let Ge=!1;for(let et=1;et<p.length;et++){const rt=p[et],Vt=Array.isArray(he)?he[et-1]:he.type,Ot=ie.parse(rt,1+Me.length,Vt);if(!Ot){Ge=!0;break}Me.push(Ot)}if(!Ge)if(Array.isArray(he)&&he.length!==Me.length)ie.error(`Expected ${he.length} arguments, but found ${Me.length} instead.`);else{for(let et=0;et<Me.length;et++){const rt=Array.isArray(he)?he[et]:he.type,Vt=Me[et];ie.concat(et+1).checkSubtype(rt,Vt.type)}if(ie.errors.length===0)return new ko(S,O,Ee,Me)}}if(Q.length===1)_.errors.push(...ie.errors);else{const he=(Q.length?Q:V).map(([Me])=>{return Ge=Me,Array.isArray(Ge)?`(${Ge.map(Li).join(", ")})`:`(${Li(Ge.type)}...)`;var Ge}).join(" | "),Ee=[];for(let Me=1;Me<p.length;Me++){const Ge=_.parse(p[Me],1+Ee.length);if(!Ge)return null;Ee.push(Li(Ge.type))}_.error(`Expected arguments of type ${he}, but found (${Ee.join(", ")}) instead.`)}return null}static register(p,_){ko.definitions=_;for(const S in _)p[S]=ko}}class Jo{constructor(p,_,S){this.type=co,this.locale=S,this.caseSensitive=p,this.diacriticSensitive=_}static parse(p,_){if(p.length!==2)return _.error("Expected one argument.");const S=p[1];if(typeof S!="object"||Array.isArray(S))return _.error("Collator options argument must be an object.");const z=_.parse(S["case-sensitive"]!==void 0&&S["case-sensitive"],1,Qn);if(!z)return null;const O=_.parse(S["diacritic-sensitive"]!==void 0&&S["diacritic-sensitive"],1,Qn);if(!O)return null;let V=null;return S.locale&&(V=_.parse(S.locale,1,pn),!V)?null:new Jo(z,O,V)}evaluate(p){return new Rt(this.caseSensitive.evaluate(p),this.diacriticSensitive.evaluate(p),this.locale?this.locale.evaluate(p):null)}eachChild(p){p(this.caseSensitive),p(this.diacriticSensitive),this.locale&&p(this.locale)}outputDefined(){return!1}}const So=8192;function Ko(y,p){y[0]=Math.min(y[0],p[0]),y[1]=Math.min(y[1],p[1]),y[2]=Math.max(y[2],p[0]),y[3]=Math.max(y[3],p[1])}function Gl(y,p){return!(y[0]<=p[0]||y[2]>=p[2]||y[1]<=p[1]||y[3]>=p[3])}function na(y,p){const _=(180+y[0])/360,S=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y[1]*Math.PI/360)))/360,z=Math.pow(2,p.z);return[Math.round(_*z*So),Math.round(S*z*So)]}function Ao(y,p,_){const S=y[0]-p[0],z=y[1]-p[1],O=y[0]-_[0],V=y[1]-_[1];return S*V-O*z==0&&S*O<=0&&z*V<=0}function _l(y,p){let _=!1;for(let V=0,Q=p.length;V<Q;V++){const ie=p[V];for(let he=0,Ee=ie.length;he<Ee-1;he++){if(Ao(y,ie[he],ie[he+1]))return!1;(z=ie[he])[1]>(S=y)[1]!=(O=ie[he+1])[1]>S[1]&&S[0]<(O[0]-z[0])*(S[1]-z[1])/(O[1]-z[1])+z[0]&&(_=!_)}}var S,z,O;return _}function bl(y,p){for(let _=0;_<p.length;_++)if(_l(y,p[_]))return!0;return!1}function vs(y,p,_,S){const z=S[0]-_[0],O=S[1]-_[1],V=(y[0]-_[0])*O-z*(y[1]-_[1]),Q=(p[0]-_[0])*O-z*(p[1]-_[1]);return V>0&&Q<0||V<0&&Q>0}function Hl(y,p,_){for(const he of _)for(let Ee=0;Ee<he.length-1;++Ee)if((Q=[(V=he[Ee+1])[0]-(O=he[Ee])[0],V[1]-O[1]])[0]*(ie=[(z=p)[0]-(S=y)[0],z[1]-S[1]])[1]-Q[1]*ie[0]!=0&&vs(S,z,O,V)&&vs(O,V,S,z))return!0;var S,z,O,V,Q,ie;return!1}function _s(y,p){for(let _=0;_<y.length;++_)if(!_l(y[_],p))return!1;for(let _=0;_<y.length-1;++_)if(Hl(y[_],y[_+1],p))return!1;return!0}function Vu(y,p){for(let _=0;_<p.length;_++)if(_s(y,p[_]))return!0;return!1}function $a(y,p,_){const S=[];for(let z=0;z<y.length;z++){const O=[];for(let V=0;V<y[z].length;V++){const Q=na(y[z][V],_);Ko(p,Q),O.push(Q)}S.push(O)}return S}function wl(y,p,_){const S=[];for(let z=0;z<y.length;z++){const O=$a(y[z],p,_);S.push(O)}return S}function Wl(y,p,_,S){if(y[0]<_[0]||y[0]>_[2]){const z=.5*S;let O=y[0]-_[0]>z?-S:_[0]-y[0]>z?S:0;O===0&&(O=y[0]-_[2]>z?-S:_[2]-y[0]>z?S:0),y[0]+=O}Ko(p,y)}function $u(y,p,_,S){const z=Math.pow(2,S.z)*So,O=[S.x*So,S.y*So],V=[];for(const Q of y)for(const ie of Q){const he=[ie.x+O[0],ie.y+O[1]];Wl(he,p,_,z),V.push(he)}return V}function Gu(y,p,_,S){const z=Math.pow(2,S.z)*So,O=[S.x*So,S.y*So],V=[];for(const ie of y){const he=[];for(const Ee of ie){const Me=[Ee.x+O[0],Ee.y+O[1]];Ko(p,Me),he.push(Me)}V.push(he)}if(p[2]-p[0]<=z/2){(Q=p)[0]=Q[1]=1/0,Q[2]=Q[3]=-1/0;for(const ie of V)for(const he of ie)Wl(he,p,_,z)}var Q;return V}class nl{constructor(p,_){this.type=Qn,this.geojson=p,this.geometries=_}static parse(p,_){if(p.length!==2)return _.error(`'within' expression requires exactly one argument, but found ${p.length-1} instead.`);if(nn(p[1])){const S=p[1];if(S.type==="FeatureCollection")for(let z=0;z<S.features.length;++z){const O=S.features[z].geometry.type;if(O==="Polygon"||O==="MultiPolygon")return new nl(S,S.features[z].geometry)}else if(S.type==="Feature"){const z=S.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new nl(S,S.geometry)}else if(S.type==="Polygon"||S.type==="MultiPolygon")return new nl(S,S)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(p){if(p.geometry()!=null&&p.canonicalID()!=null){if(p.geometryType()==="Point")return function(_,S){const z=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=_.canonicalID();if(S.type==="Polygon"){const Q=$a(S.coordinates,O,V),ie=$u(_.geometry(),z,O,V);if(!Gl(z,O))return!1;for(const he of ie)if(!_l(he,Q))return!1}if(S.type==="MultiPolygon"){const Q=wl(S.coordinates,O,V),ie=$u(_.geometry(),z,O,V);if(!Gl(z,O))return!1;for(const he of ie)if(!bl(he,Q))return!1}return!0}(p,this.geometries);if(p.geometryType()==="LineString")return function(_,S){const z=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=_.canonicalID();if(S.type==="Polygon"){const Q=$a(S.coordinates,O,V),ie=Gu(_.geometry(),z,O,V);if(!Gl(z,O))return!1;for(const he of ie)if(!_s(he,Q))return!1}if(S.type==="MultiPolygon"){const Q=wl(S.coordinates,O,V),ie=Gu(_.geometry(),z,O,V);if(!Gl(z,O))return!1;for(const he of ie)if(!Vu(he,Q))return!1}return!0}(p,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function us(y){if(y instanceof ko&&(y.name==="get"&&y.args.length===1||y.name==="feature-state"||y.name==="has"&&y.args.length===1||y.name==="properties"||y.name==="geometry-type"||y.name==="id"||/^filter-/.test(y.name))||y instanceof nl)return!1;let p=!0;return y.eachChild(_=>{p&&!us(_)&&(p=!1)}),p}function Ds(y){if(y instanceof ko&&y.name==="feature-state")return!1;let p=!0;return y.eachChild(_=>{p&&!Ds(_)&&(p=!1)}),p}function xl(y,p){if(y instanceof ko&&p.indexOf(y.name)>=0)return!1;let _=!0;return y.eachChild(S=>{_&&!xl(S,p)&&(_=!1)}),_}class gu{constructor(p,_){this.type=_.type,this.name=p,this.boundExpression=_}static parse(p,_){if(p.length!==2||typeof p[1]!="string")return _.error("'var' expression requires exactly one string literal argument.");const S=p[1];return _.scope.has(S)?new gu(S,_.scope.get(S)):_.error(`Unknown variable "${S}". Make sure "${S}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(p){return this.boundExpression.evaluate(p)}eachChild(){}outputDefined(){return!1}}class kl{constructor(p,_=[],S,z=new Yr,O=[]){this.registry=p,this.path=_,this.key=_.map(V=>`[${V}]`).join(""),this.scope=z,this.errors=O,this.expectedType=S}parse(p,_,S,z,O={}){return _?this.concat(_,S,z)._parse(p,O):this._parse(p,O)}_parse(p,_){function S(z,O,V){return V==="assert"?new Ai(O,[z]):V==="coerce"?new Ii(O,[z]):z}if(p!==null&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"||(p=["literal",p]),Array.isArray(p)){if(p.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const z=p[0];if(typeof z!="string")return this.error(`Expression name must be a string, but found ${typeof z} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[z];if(O){let V=O.parse(p,this);if(!V)return null;if(this.expectedType){const Q=this.expectedType,ie=V.type;if(Q.kind!=="string"&&Q.kind!=="number"&&Q.kind!=="boolean"&&Q.kind!=="object"&&Q.kind!=="array"||ie.kind!=="value")if(Q.kind!=="color"&&Q.kind!=="formatted"&&Q.kind!=="resolvedImage"||ie.kind!=="value"&&ie.kind!=="string")if(Q.kind!=="padding"||ie.kind!=="value"&&ie.kind!=="number"&&ie.kind!=="array"){if(this.checkSubtype(Q,ie))return null}else V=S(V,Q,_.typeAnnotation||"coerce");else V=S(V,Q,_.typeAnnotation||"coerce");else V=S(V,Q,_.typeAnnotation||"assert")}if(!(V instanceof Yn)&&V.type.kind!=="resolvedImage"&&yu(V)){const Q=new io;try{V=new Yn(V.type,V.evaluate(Q))}catch(ie){return this.error(ie.message),null}}return V}return this.error(`Unknown expression "${z}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(p===void 0?"'undefined' value invalid. Use null instead.":typeof p=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof p} instead.`)}concat(p,_,S){const z=typeof p=="number"?this.path.concat(p):this.path,O=S?this.scope.concat(S):this.scope;return new kl(this.registry,z,_||null,O,this.errors)}error(p,..._){const S=`${this.key}${_.map(z=>`[${z}]`).join("")}`;this.errors.push(new or(S,p))}checkSubtype(p,_){const S=vn(p,_);return S&&this.error(S),S}}function yu(y){if(y instanceof gu)return yu(y.boundExpression);if(y instanceof ko&&y.name==="error"||y instanceof Jo||y instanceof nl)return!1;const p=y instanceof Ii||y instanceof Ai;let _=!0;return y.eachChild(S=>{_=p?_&&yu(S):_&&S instanceof Yn}),!!_&&us(y)&&xl(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bs(y,p){const _=y.length-1;let S,z,O=0,V=_,Q=0;for(;O<=V;)if(Q=Math.floor((O+V)/2),S=y[Q],z=y[Q+1],S<=p){if(Q===_||p<z)return Q;O=Q+1}else{if(!(S>p))throw new sn("Input is not a number.");V=Q-1}return 0}class ws{constructor(p,_,S){this.type=p,this.input=_,this.labels=[],this.outputs=[];for(const[z,O]of S)this.labels.push(z),this.outputs.push(O)}static parse(p,_){if(p.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if((p.length-1)%2!=0)return _.error("Expected an even number of arguments.");const S=_.parse(p[1],1,Or);if(!S)return null;const z=[];let O=null;_.expectedType&&_.expectedType.kind!=="value"&&(O=_.expectedType);for(let V=1;V<p.length;V+=2){const Q=V===1?-1/0:p[V],ie=p[V+1],he=V,Ee=V+1;if(typeof Q!="number")return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(z.length&&z[z.length-1][0]>=Q)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',he);const Me=_.parse(ie,Ee,O);if(!Me)return null;O=O||Me.type,z.push([Q,Me])}return new ws(O,S,z)}evaluate(p){const _=this.labels,S=this.outputs;if(_.length===1)return S[0].evaluate(p);const z=this.input.evaluate(p);if(z<=_[0])return S[0].evaluate(p);const O=_.length;return z>=_[O-1]?S[O-1].evaluate(p):S[bs(_,z)].evaluate(p)}eachChild(p){p(this.input);for(const _ of this.outputs)p(_)}outputDefined(){return this.outputs.every(p=>p.outputDefined())}}function Oo(y,p,_){return y*(1-_)+p*_}var il=Object.freeze({__proto__:null,number:Oo,color:function(y,p,_){return new lt(Oo(y.r,p.r,_),Oo(y.g,p.g,_),Oo(y.b,p.b,_),Oo(y.a,p.a,_))},array:function(y,p,_){return y.map((S,z)=>Oo(S,p[z],_))},padding:function(y,p,_){const S=y.values,z=p.values;return new Nt([Oo(S[0],z[0],_),Oo(S[1],z[1],_),Oo(S[2],z[2],_),Oo(S[3],z[3],_)])}});const R=.95047,W=1.08883,ae=4/29,Ae=6/29,Ye=3*Ae*Ae,yt=Math.PI/180,Mt=180/Math.PI;function Tt(y){return y>.008856451679035631?Math.pow(y,1/3):y/Ye+ae}function wr(y){return y>Ae?y*y*y:Ye*(y-ae)}function mr(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function vr(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function ar(y){const p=vr(y.r),_=vr(y.g),S=vr(y.b),z=Tt((.4124564*p+.3575761*_+.1804375*S)/R),O=Tt((.2126729*p+.7151522*_+.072175*S)/1);return{l:116*O-16,a:500*(z-O),b:200*(O-Tt((.0193339*p+.119192*_+.9503041*S)/W)),alpha:y.a}}function $r(y){let p=(y.l+16)/116,_=isNaN(y.a)?p:p+y.a/500,S=isNaN(y.b)?p:p-y.b/200;return p=1*wr(p),_=R*wr(_),S=W*wr(S),new lt(mr(3.2404542*_-1.5371385*p-.4985314*S),mr(-.969266*_+1.8760108*p+.041556*S),mr(.0556434*_-.2040259*p+1.0572252*S),y.alpha)}function cn(y,p,_){const S=p-y;return y+_*(S>180||S<-180?S-360*Math.round(S/360):S)}const Ln={forward:ar,reverse:$r,interpolate:function(y,p,_){return{l:Oo(y.l,p.l,_),a:Oo(y.a,p.a,_),b:Oo(y.b,p.b,_),alpha:Oo(y.alpha,p.alpha,_)}}},tt={forward:function(y){const{l:p,a:_,b:S}=ar(y),z=Math.atan2(S,_)*Mt;return{h:z<0?z+360:z,c:Math.sqrt(_*_+S*S),l:p,alpha:y.a}},reverse:function(y){const p=y.h*yt,_=y.c;return $r({l:y.l,a:Math.cos(p)*_,b:Math.sin(p)*_,alpha:y.alpha})},interpolate:function(y,p,_){return{h:cn(y.h,p.h,_),c:Oo(y.c,p.c,_),l:Oo(y.l,p.l,_),alpha:Oo(y.alpha,p.alpha,_)}}};var m=Object.freeze({__proto__:null,lab:Ln,hcl:tt});class Pr{constructor(p,_,S,z,O){this.type=p,this.operator=_,this.interpolation=S,this.input=z,this.labels=[],this.outputs=[];for(const[V,Q]of O)this.labels.push(V),this.outputs.push(Q)}static interpolationFactor(p,_,S,z){let O=0;if(p.name==="exponential")O=h(_,p.base,S,z);else if(p.name==="linear")O=h(_,1,S,z);else if(p.name==="cubic-bezier"){const V=p.controlPoints;O=new f(V[0],V[1],V[2],V[3]).solve(h(_,1,S,z))}return O}static parse(p,_){let[S,z,O,...V]=p;if(!Array.isArray(z)||z.length===0)return _.error("Expected an interpolation type expression.",1);if(z[0]==="linear")z={name:"linear"};else if(z[0]==="exponential"){const he=z[1];if(typeof he!="number")return _.error("Exponential interpolation requires a numeric base.",1,1);z={name:"exponential",base:he}}else{if(z[0]!=="cubic-bezier")return _.error(`Unknown interpolation type ${String(z[0])}`,1,0);{const he=z.slice(1);if(he.length!==4||he.some(Ee=>typeof Ee!="number"||Ee<0||Ee>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);z={name:"cubic-bezier",controlPoints:he}}}if(p.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if((p.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(O=_.parse(O,2,Or),!O)return null;const Q=[];let ie=null;S==="interpolate-hcl"||S==="interpolate-lab"?ie=ci:_.expectedType&&_.expectedType.kind!=="value"&&(ie=_.expectedType);for(let he=0;he<V.length;he+=2){const Ee=V[he],Me=V[he+1],Ge=he+3,et=he+4;if(typeof Ee!="number")return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ge);if(Q.length&&Q[Q.length-1][0]>=Ee)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ge);const rt=_.parse(Me,et,ie);if(!rt)return null;ie=ie||rt.type,Q.push([Ee,rt])}return ie.kind==="number"||ie.kind==="color"||ie.kind==="padding"||ie.kind==="array"&&ie.itemType.kind==="number"&&typeof ie.N=="number"?new Pr(ie,S,z,O,Q):_.error(`Type ${Li(ie)} is not interpolatable.`)}evaluate(p){const _=this.labels,S=this.outputs;if(_.length===1)return S[0].evaluate(p);const z=this.input.evaluate(p);if(z<=_[0])return S[0].evaluate(p);const O=_.length;if(z>=_[O-1])return S[O-1].evaluate(p);const V=bs(_,z),Q=Pr.interpolationFactor(this.interpolation,z,_[V],_[V+1]),ie=S[V].evaluate(p),he=S[V+1].evaluate(p);return this.operator==="interpolate"?il[this.type.kind.toLowerCase()](ie,he,Q):this.operator==="interpolate-hcl"?tt.reverse(tt.interpolate(tt.forward(ie),tt.forward(he),Q)):Ln.reverse(Ln.interpolate(Ln.forward(ie),Ln.forward(he),Q))}eachChild(p){p(this.input);for(const _ of this.outputs)p(_)}outputDefined(){return this.outputs.every(p=>p.outputDefined())}}function h(y,p,_,S){const z=S-_,O=y-_;return z===0?0:p===1?O/z:(Math.pow(p,O)-1)/(Math.pow(p,z)-1)}class T{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expectected at least one argument.");let S=null;const z=_.expectedType;z&&z.kind!=="value"&&(S=z);const O=[];for(const Q of p.slice(1)){const ie=_.parse(Q,1+O.length,S,void 0,{typeAnnotation:"omit"});if(!ie)return null;S=S||ie.type,O.push(ie)}if(!S)throw new Error("No output type");const V=z&&O.some(Q=>vn(z,Q.type));return new T(V?gi:S,O)}evaluate(p){let _,S=null,z=0;for(const O of this.args)if(z++,S=O.evaluate(p),S&&S instanceof ir&&!S.available&&(_||(_=S.name),S=null,z===this.args.length&&(S=_)),S!==null)break;return S}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}class kn{constructor(p,_){this.type=_.type,this.bindings=[].concat(p),this.result=_}evaluate(p){return this.result.evaluate(p)}eachChild(p){for(const _ of this.bindings)p(_[1]);p(this.result)}static parse(p,_){if(p.length<4)return _.error(`Expected at least 3 arguments, but found ${p.length-1} instead.`);const S=[];for(let O=1;O<p.length-1;O+=2){const V=p[O];if(typeof V!="string")return _.error(`Expected string, but found ${typeof V} instead.`,O);if(/[^a-zA-Z0-9_]/.test(V))return _.error("Variable names must contain only alphanumeric characters or '_'.",O);const Q=_.parse(p[O+1],O+1);if(!Q)return null;S.push([V,Q])}const z=_.parse(p[p.length-1],p.length-1,_.expectedType,S);return z?new kn(S,z):null}outputDefined(){return this.result.outputDefined()}}class ii{constructor(p,_,S){this.type=p,this.index=_,this.input=S}static parse(p,_){if(p.length!==3)return _.error(`Expected 2 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,Or),z=_.parse(p[2],2,pi(_.expectedType||gi));return S&&z?new ii(z.type.itemType,S,z):null}evaluate(p){const _=this.index.evaluate(p),S=this.input.evaluate(p);if(_<0)throw new sn(`Array index out of bounds: ${_} < 0.`);if(_>=S.length)throw new sn(`Array index out of bounds: ${_} > ${S.length-1}.`);if(_!==Math.floor(_))throw new sn(`Array index must be an integer, but found ${_} instead.`);return S[_]}eachChild(p){p(this.index),p(this.input)}outputDefined(){return!1}}class Lo{constructor(p,_){this.type=Qn,this.needle=p,this.haystack=_}static parse(p,_){if(p.length!==3)return _.error(`Expected 2 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,gi);return S&&z?ze(S.type,[Qn,pn,Or,un,gi])?new Lo(S,z):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${Li(S.type)} instead`):null}evaluate(p){const _=this.needle.evaluate(p),S=this.haystack.evaluate(p);if(!S)return!1;if(!Ea(_,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Li(Fr(_))} instead.`);if(!Ea(S,["string","array"]))throw new sn(`Expected second argument to be of type array or string, but found ${Li(Fr(S))} instead.`);return S.indexOf(_)>=0}eachChild(p){p(this.needle),p(this.haystack)}outputDefined(){return!0}}class K{constructor(p,_,S){this.type=Or,this.needle=p,this.haystack=_,this.fromIndex=S}static parse(p,_){if(p.length<=2||p.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,gi);if(!S||!z)return null;if(!ze(S.type,[Qn,pn,Or,un,gi]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${Li(S.type)} instead`);if(p.length===4){const O=_.parse(p[3],3,Or);return O?new K(S,z,O):null}return new K(S,z)}evaluate(p){const _=this.needle.evaluate(p),S=this.haystack.evaluate(p);if(!Ea(_,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Li(Fr(_))} instead.`);if(!Ea(S,["string","array"]))throw new sn(`Expected second argument to be of type array or string, but found ${Li(Fr(S))} instead.`);if(this.fromIndex){const z=this.fromIndex.evaluate(p);return S.indexOf(_,z)}return S.indexOf(_)}eachChild(p){p(this.needle),p(this.haystack),this.fromIndex&&p(this.fromIndex)}outputDefined(){return!1}}class Ri{constructor(p,_,S,z,O,V){this.inputType=p,this.type=_,this.input=S,this.cases=z,this.outputs=O,this.otherwise=V}static parse(p,_){if(p.length<5)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if(p.length%2!=1)return _.error("Expected an even number of arguments.");let S,z;_.expectedType&&_.expectedType.kind!=="value"&&(z=_.expectedType);const O={},V=[];for(let he=2;he<p.length-1;he+=2){let Ee=p[he];const Me=p[he+1];Array.isArray(Ee)||(Ee=[Ee]);const Ge=_.concat(he);if(Ee.length===0)return Ge.error("Expected at least one branch label.");for(const rt of Ee){if(typeof rt!="number"&&typeof rt!="string")return Ge.error("Branch labels must be numbers or strings.");if(typeof rt=="number"&&Math.abs(rt)>Number.MAX_SAFE_INTEGER)return Ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof rt=="number"&&Math.floor(rt)!==rt)return Ge.error("Numeric branch labels must be integer values.");if(S){if(Ge.checkSubtype(S,Fr(rt)))return null}else S=Fr(rt);if(O[String(rt)]!==void 0)return Ge.error("Branch labels must be unique.");O[String(rt)]=V.length}const et=_.parse(Me,he,z);if(!et)return null;z=z||et.type,V.push(et)}const Q=_.parse(p[1],1,gi);if(!Q)return null;const ie=_.parse(p[p.length-1],p.length-1,z);return ie?Q.type.kind!=="value"&&_.concat(1).checkSubtype(S,Q.type)?null:new Ri(S,z,Q,O,V,ie):null}evaluate(p){const _=this.input.evaluate(p);return(Fr(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(p)}eachChild(p){p(this.input),this.outputs.forEach(p),p(this.otherwise)}outputDefined(){return this.outputs.every(p=>p.outputDefined())&&this.otherwise.outputDefined()}}class xs{constructor(p,_,S){this.type=p,this.branches=_,this.otherwise=S}static parse(p,_){if(p.length<4)return _.error(`Expected at least 3 arguments, but found only ${p.length-1}.`);if(p.length%2!=0)return _.error("Expected an odd number of arguments.");let S;_.expectedType&&_.expectedType.kind!=="value"&&(S=_.expectedType);const z=[];for(let V=1;V<p.length-1;V+=2){const Q=_.parse(p[V],V,Qn);if(!Q)return null;const ie=_.parse(p[V+1],V+1,S);if(!ie)return null;z.push([Q,ie]),S=S||ie.type}const O=_.parse(p[p.length-1],p.length-1,S);if(!O)return null;if(!S)throw new Error("Can't infer output type");return new xs(S,z,O)}evaluate(p){for(const[_,S]of this.branches)if(_.evaluate(p))return S.evaluate(p);return this.otherwise.evaluate(p)}eachChild(p){for(const[_,S]of this.branches)p(_),p(S);p(this.otherwise)}outputDefined(){return this.branches.every(([p,_])=>_.outputDefined())&&this.otherwise.outputDefined()}}class Ws{constructor(p,_,S,z){this.type=p,this.input=_,this.beginIndex=S,this.endIndex=z}static parse(p,_){if(p.length<=2||p.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,Or);if(!S||!z)return null;if(!ze(S.type,[pi(gi),pn,gi]))return _.error(`Expected first argument to be of type array or string, but found ${Li(S.type)} instead`);if(p.length===4){const O=_.parse(p[3],3,Or);return O?new Ws(S.type,S,z,O):null}return new Ws(S.type,S,z)}evaluate(p){const _=this.input.evaluate(p),S=this.beginIndex.evaluate(p);if(!Ea(_,["string","array"]))throw new sn(`Expected first argument to be of type array or string, but found ${Li(Fr(_))} instead.`);if(this.endIndex){const z=this.endIndex.evaluate(p);return _.slice(S,z)}return _.slice(S)}eachChild(p){p(this.input),p(this.beginIndex),this.endIndex&&p(this.endIndex)}outputDefined(){return!1}}function Mc(y,p){return y==="=="||y==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function Al(y,p,_,S){return S.compare(p,_)===0}function Xa(y,p,_){const S=y!=="=="&&y!=="!=";return class Ww{constructor(O,V,Q){this.type=Qn,this.lhs=O,this.rhs=V,this.collator=Q,this.hasUntypedArgument=O.type.kind==="value"||V.type.kind==="value"}static parse(O,V){if(O.length!==3&&O.length!==4)return V.error("Expected two or three arguments.");const Q=O[0];let ie=V.parse(O[1],1,gi);if(!ie)return null;if(!Mc(Q,ie.type))return V.concat(1).error(`"${Q}" comparisons are not supported for type '${Li(ie.type)}'.`);let he=V.parse(O[2],2,gi);if(!he)return null;if(!Mc(Q,he.type))return V.concat(2).error(`"${Q}" comparisons are not supported for type '${Li(he.type)}'.`);if(ie.type.kind!==he.type.kind&&ie.type.kind!=="value"&&he.type.kind!=="value")return V.error(`Cannot compare types '${Li(ie.type)}' and '${Li(he.type)}'.`);S&&(ie.type.kind==="value"&&he.type.kind!=="value"?ie=new Ai(he.type,[ie]):ie.type.kind!=="value"&&he.type.kind==="value"&&(he=new Ai(ie.type,[he])));let Ee=null;if(O.length===4){if(ie.type.kind!=="string"&&he.type.kind!=="string"&&ie.type.kind!=="value"&&he.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(Ee=V.parse(O[3],3,co),!Ee)return null}return new Ww(ie,he,Ee)}evaluate(O){const V=this.lhs.evaluate(O),Q=this.rhs.evaluate(O);if(S&&this.hasUntypedArgument){const ie=Fr(V),he=Fr(Q);if(ie.kind!==he.kind||ie.kind!=="string"&&ie.kind!=="number")throw new sn(`Expected arguments for "${y}" to be (string, string) or (number, number), but found (${ie.kind}, ${he.kind}) instead.`)}if(this.collator&&!S&&this.hasUntypedArgument){const ie=Fr(V),he=Fr(Q);if(ie.kind!=="string"||he.kind!=="string")return p(O,V,Q)}return this.collator?_(O,V,Q,this.collator.evaluate(O)):p(O,V,Q)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const hc=Xa("==",function(y,p,_){return p===_},Al),vu=Xa("!=",function(y,p,_){return p!==_},function(y,p,_,S){return!Al(0,p,_,S)}),Dc=Xa("<",function(y,p,_){return p<_},function(y,p,_,S){return S.compare(p,_)<0}),_u=Xa(">",function(y,p,_){return p>_},function(y,p,_,S){return S.compare(p,_)>0}),Qc=Xa("<=",function(y,p,_){return p<=_},function(y,p,_,S){return S.compare(p,_)<=0}),Hu=Xa(">=",function(y,p,_){return p>=_},function(y,p,_,S){return S.compare(p,_)>=0});class bu{constructor(p,_,S,z,O){this.type=pn,this.number=p,this.locale=_,this.currency=S,this.minFractionDigits=z,this.maxFractionDigits=O}static parse(p,_){if(p.length!==3)return _.error("Expected two arguments.");const S=_.parse(p[1],1,Or);if(!S)return null;const z=p[2];if(typeof z!="object"||Array.isArray(z))return _.error("NumberFormat options argument must be an object.");let O=null;if(z.locale&&(O=_.parse(z.locale,1,pn),!O))return null;let V=null;if(z.currency&&(V=_.parse(z.currency,1,pn),!V))return null;let Q=null;if(z["min-fraction-digits"]&&(Q=_.parse(z["min-fraction-digits"],1,Or),!Q))return null;let ie=null;return z["max-fraction-digits"]&&(ie=_.parse(z["max-fraction-digits"],1,Or),!ie)?null:new bu(S,O,V,Q,ie)}evaluate(p){return new Intl.NumberFormat(this.locale?this.locale.evaluate(p):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(p):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(p):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(p):void 0}).format(this.number.evaluate(p))}eachChild(p){p(this.number),this.locale&&p(this.locale),this.currency&&p(this.currency),this.minFractionDigits&&p(this.minFractionDigits),this.maxFractionDigits&&p(this.maxFractionDigits)}outputDefined(){return!1}}class wu{constructor(p){this.type=li,this.sections=p}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");const S=p[1];if(!Array.isArray(S)&&typeof S=="object")return _.error("First argument must be an image or text section.");const z=[];let O=!1;for(let V=1;V<=p.length-1;++V){const Q=p[V];if(O&&typeof Q=="object"&&!Array.isArray(Q)){O=!1;let ie=null;if(Q["font-scale"]&&(ie=_.parse(Q["font-scale"],1,Or),!ie))return null;let he=null;if(Q["text-font"]&&(he=_.parse(Q["text-font"],1,pi(pn)),!he))return null;let Ee=null;if(Q["text-color"]&&(Ee=_.parse(Q["text-color"],1,ci),!Ee))return null;const Me=z[z.length-1];Me.scale=ie,Me.font=he,Me.textColor=Ee}else{const ie=_.parse(p[V],1,gi);if(!ie)return null;const he=ie.type.kind;if(he!=="string"&&he!=="value"&&he!=="null"&&he!=="resolvedImage")return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,z.push({content:ie,scale:null,font:null,textColor:null})}}return new wu(z)}evaluate(p){return new Ht(this.sections.map(_=>{const S=_.content.evaluate(p);return Fr(S)===yo?new Fe("",S,null,null,null):new Fe(Hn(S),null,_.scale?_.scale.evaluate(p):null,_.font?_.font.evaluate(p).join(","):null,_.textColor?_.textColor.evaluate(p):null)}))}eachChild(p){for(const _ of this.sections)p(_.content),_.scale&&p(_.scale),_.font&&p(_.font),_.textColor&&p(_.textColor)}outputDefined(){return!1}}class Zl{constructor(p){this.type=yo,this.input=p}static parse(p,_){if(p.length!==2)return _.error("Expected two arguments.");const S=_.parse(p[1],1,pn);return S?new Zl(S):_.error("No image name provided.")}evaluate(p){const _=this.input.evaluate(p),S=ir.fromString(_);return S&&p.availableImages&&(S.available=p.availableImages.indexOf(_)>-1),S}eachChild(p){p(this.input)}outputDefined(){return!1}}class xu{constructor(p){this.type=Or,this.input=p}static parse(p,_){if(p.length!==2)return _.error(`Expected 1 argument, but found ${p.length-1} instead.`);const S=_.parse(p[1],1);return S?S.type.kind!=="array"&&S.type.kind!=="string"&&S.type.kind!=="value"?_.error(`Expected argument of type string or array, but found ${Li(S.type)} instead.`):new xu(S):null}evaluate(p){const _=this.input.evaluate(p);if(typeof _=="string"||Array.isArray(_))return _.length;throw new sn(`Expected value to be of type string or array, but found ${Li(Fr(_))} instead.`)}eachChild(p){p(this.input)}outputDefined(){return!1}}const qn={"==":hc,"!=":vu,">":_u,"<":Dc,">=":Hu,"<=":Qc,array:Ai,at:ii,boolean:Ai,case:xs,coalesce:T,collator:Jo,format:wu,image:Zl,in:Lo,"index-of":K,interpolate:Pr,"interpolate-hcl":Pr,"interpolate-lab":Pr,length:xu,let:kn,literal:Yn,match:Ri,number:Ai,"number-format":bu,object:Ai,slice:Ws,step:ws,string:Ai,"to-boolean":Ii,"to-color":Ii,"to-number":Ii,"to-string":Ii,var:gu,within:nl};function jn(y,[p,_,S,z]){p=p.evaluate(y),_=_.evaluate(y),S=S.evaluate(y);const O=z?z.evaluate(y):1,V=Br(p,_,S,O);if(V)throw new sn(V);return new lt(p/255*O,_/255*O,S/255*O,O)}function Wu(y,p){return y in p}function zs(y,p){const _=p[y];return _===void 0?null:_}function ks(y){return{type:y}}function Xl(y){return{result:"success",value:y}}function As(y){return{result:"error",value:y}}function To(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function te(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function Te(y){return!!y.expression&&y.expression.interpolated}function gt(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function qt(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function ur(y){return y}function Xr(y,p){const _=p.type==="color",S=y.stops&&typeof y.stops[0][0]=="object",z=S||!(S||y.property!==void 0),O=y.type||(Te(p)?"exponential":"interval");if(_||p.type==="padding"){const he=_?lt.parse:Nt.parse;(y=xn({},y)).stops&&(y.stops=y.stops.map(Ee=>[Ee[0],he(Ee[1])])),y.default=he(y.default?y.default:p.default)}if(y.colorSpace&&y.colorSpace!=="rgb"&&!m[y.colorSpace])throw new Error(`Unknown color space: ${y.colorSpace}`);let V,Q,ie;if(O==="exponential")V=Oi;else if(O==="interval")V=xi;else if(O==="categorical"){V=Kn,Q=Object.create(null);for(const he of y.stops)Q[he[0]]=he[1];ie=typeof y.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);V=Ji}if(S){const he={},Ee=[];for(let et=0;et<y.stops.length;et++){const rt=y.stops[et],Vt=rt[0].zoom;he[Vt]===void 0&&(he[Vt]={zoom:Vt,type:y.type,property:y.property,default:y.default,stops:[]},Ee.push(Vt)),he[Vt].stops.push([rt[0].value,rt[1]])}const Me=[];for(const et of Ee)Me.push([he[et].zoom,Xr(he[et],p)]);const Ge={name:"linear"};return{kind:"composite",interpolationType:Ge,interpolationFactor:Pr.interpolationFactor.bind(void 0,Ge),zoomStops:Me.map(et=>et[0]),evaluate:({zoom:et},rt)=>Oi({stops:Me,base:y.base},p,et).evaluate(et,rt)}}if(z){const he=O==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:he,interpolationFactor:Pr.interpolationFactor.bind(void 0,he),zoomStops:y.stops.map(Ee=>Ee[0]),evaluate:({zoom:Ee})=>V(y,p,Ee,Q,ie)}}return{kind:"source",evaluate(he,Ee){const Me=Ee&&Ee.properties?Ee.properties[y.property]:void 0;return Me===void 0?gn(y.default,p.default):V(y,p,Me,Q,ie)}}}function gn(y,p,_){return y!==void 0?y:p!==void 0?p:_!==void 0?_:void 0}function Kn(y,p,_,S,z){return gn(typeof _===z?S[_]:void 0,y.default,p.default)}function xi(y,p,_){if(gt(_)!=="number")return gn(y.default,p.default);const S=y.stops.length;if(S===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[S-1][0])return y.stops[S-1][1];const z=bs(y.stops.map(O=>O[0]),_);return y.stops[z][1]}function Oi(y,p,_){const S=y.base!==void 0?y.base:1;if(gt(_)!=="number")return gn(y.default,p.default);const z=y.stops.length;if(z===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[z-1][0])return y.stops[z-1][1];const O=bs(y.stops.map(Ee=>Ee[0]),_),V=function(Ee,Me,Ge,et){const rt=et-Ge,Vt=Ee-Ge;return rt===0?0:Me===1?Vt/rt:(Math.pow(Me,Vt)-1)/(Math.pow(Me,rt)-1)}(_,S,y.stops[O][0],y.stops[O+1][0]),Q=y.stops[O][1],ie=y.stops[O+1][1];let he=il[p.type]||ur;if(y.colorSpace&&y.colorSpace!=="rgb"){const Ee=m[y.colorSpace];he=(Me,Ge)=>Ee.reverse(Ee.interpolate(Ee.forward(Me),Ee.forward(Ge),V))}return typeof Q.evaluate=="function"?{evaluate(...Ee){const Me=Q.evaluate.apply(void 0,Ee),Ge=ie.evaluate.apply(void 0,Ee);if(Me!==void 0&&Ge!==void 0)return he(Me,Ge,V)}}:he(Q,ie,V)}function Ji(y,p,_){switch(p.type){case"color":_=lt.parse(_);break;case"formatted":_=Ht.fromString(_.toString());break;case"resolvedImage":_=ir.fromString(_.toString());break;case"padding":_=Nt.parse(_);break;default:gt(_)===p.type||p.type==="enum"&&p.values[_]||(_=void 0)}return gn(_,y.default,p.default)}ko.register(qn,{error:[{kind:"error"},[pn],(y,[p])=>{throw new sn(p.evaluate(y))}],typeof:[pn,[gi],(y,[p])=>Li(Fr(p.evaluate(y)))],"to-rgba":[pi(Or,4),[ci],(y,[p])=>p.evaluate(y).toArray()],rgb:[ci,[Or,Or,Or],jn],rgba:[ci,[Or,Or,Or,Or],jn],has:{type:Qn,overloads:[[[pn],(y,[p])=>Wu(p.evaluate(y),y.properties())],[[pn,Ro],(y,[p,_])=>Wu(p.evaluate(y),_.evaluate(y))]]},get:{type:gi,overloads:[[[pn],(y,[p])=>zs(p.evaluate(y),y.properties())],[[pn,Ro],(y,[p,_])=>zs(p.evaluate(y),_.evaluate(y))]]},"feature-state":[gi,[pn],(y,[p])=>zs(p.evaluate(y),y.featureState||{})],properties:[Ro,[],y=>y.properties()],"geometry-type":[pn,[],y=>y.geometryType()],id:[gi,[],y=>y.id()],zoom:[Or,[],y=>y.globals.zoom],"heatmap-density":[Or,[],y=>y.globals.heatmapDensity||0],"line-progress":[Or,[],y=>y.globals.lineProgress||0],accumulated:[gi,[],y=>y.globals.accumulated===void 0?null:y.globals.accumulated],"+":[Or,ks(Or),(y,p)=>{let _=0;for(const S of p)_+=S.evaluate(y);return _}],"*":[Or,ks(Or),(y,p)=>{let _=1;for(const S of p)_*=S.evaluate(y);return _}],"-":{type:Or,overloads:[[[Or,Or],(y,[p,_])=>p.evaluate(y)-_.evaluate(y)],[[Or],(y,[p])=>-p.evaluate(y)]]},"/":[Or,[Or,Or],(y,[p,_])=>p.evaluate(y)/_.evaluate(y)],"%":[Or,[Or,Or],(y,[p,_])=>p.evaluate(y)%_.evaluate(y)],ln2:[Or,[],()=>Math.LN2],pi:[Or,[],()=>Math.PI],e:[Or,[],()=>Math.E],"^":[Or,[Or,Or],(y,[p,_])=>Math.pow(p.evaluate(y),_.evaluate(y))],sqrt:[Or,[Or],(y,[p])=>Math.sqrt(p.evaluate(y))],log10:[Or,[Or],(y,[p])=>Math.log(p.evaluate(y))/Math.LN10],ln:[Or,[Or],(y,[p])=>Math.log(p.evaluate(y))],log2:[Or,[Or],(y,[p])=>Math.log(p.evaluate(y))/Math.LN2],sin:[Or,[Or],(y,[p])=>Math.sin(p.evaluate(y))],cos:[Or,[Or],(y,[p])=>Math.cos(p.evaluate(y))],tan:[Or,[Or],(y,[p])=>Math.tan(p.evaluate(y))],asin:[Or,[Or],(y,[p])=>Math.asin(p.evaluate(y))],acos:[Or,[Or],(y,[p])=>Math.acos(p.evaluate(y))],atan:[Or,[Or],(y,[p])=>Math.atan(p.evaluate(y))],min:[Or,ks(Or),(y,p)=>Math.min(...p.map(_=>_.evaluate(y)))],max:[Or,ks(Or),(y,p)=>Math.max(...p.map(_=>_.evaluate(y)))],abs:[Or,[Or],(y,[p])=>Math.abs(p.evaluate(y))],round:[Or,[Or],(y,[p])=>{const _=p.evaluate(y);return _<0?-Math.round(-_):Math.round(_)}],floor:[Or,[Or],(y,[p])=>Math.floor(p.evaluate(y))],ceil:[Or,[Or],(y,[p])=>Math.ceil(p.evaluate(y))],"filter-==":[Qn,[pn,gi],(y,[p,_])=>y.properties()[p.value]===_.value],"filter-id-==":[Qn,[gi],(y,[p])=>y.id()===p.value],"filter-type-==":[Qn,[pn],(y,[p])=>y.geometryType()===p.value],"filter-<":[Qn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S<z}],"filter-id-<":[Qn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_<S}],"filter->":[Qn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S>z}],"filter-id->":[Qn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_>S}],"filter-<=":[Qn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S<=z}],"filter-id-<=":[Qn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_<=S}],"filter->=":[Qn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S>=z}],"filter-id->=":[Qn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_>=S}],"filter-has":[Qn,[gi],(y,[p])=>p.value in y.properties()],"filter-has-id":[Qn,[],y=>y.id()!==null&&y.id()!==void 0],"filter-type-in":[Qn,[pi(pn)],(y,[p])=>p.value.indexOf(y.geometryType())>=0],"filter-id-in":[Qn,[pi(gi)],(y,[p])=>p.value.indexOf(y.id())>=0],"filter-in-small":[Qn,[pn,pi(gi)],(y,[p,_])=>_.value.indexOf(y.properties()[p.value])>=0],"filter-in-large":[Qn,[pn,pi(gi)],(y,[p,_])=>function(S,z,O,V){for(;O<=V;){const Q=O+V>>1;if(z[Q]===S)return!0;z[Q]>S?V=Q-1:O=Q+1}return!1}(y.properties()[p.value],_.value,0,_.value.length-1)],all:{type:Qn,overloads:[[[Qn,Qn],(y,[p,_])=>p.evaluate(y)&&_.evaluate(y)],[ks(Qn),(y,p)=>{for(const _ of p)if(!_.evaluate(y))return!1;return!0}]]},any:{type:Qn,overloads:[[[Qn,Qn],(y,[p,_])=>p.evaluate(y)||_.evaluate(y)],[ks(Qn),(y,p)=>{for(const _ of p)if(_.evaluate(y))return!0;return!1}]]},"!":[Qn,[Qn],(y,[p])=>!p.evaluate(y)],"is-supported-script":[Qn,[pn],(y,[p])=>{const _=y.globals&&y.globals.isSupportedScript;return!_||_(p.evaluate(y))}],upcase:[pn,[pn],(y,[p])=>p.evaluate(y).toUpperCase()],downcase:[pn,[pn],(y,[p])=>p.evaluate(y).toLowerCase()],concat:[pn,ks(gi),(y,p)=>p.map(_=>Hn(_.evaluate(y))).join("")],"resolved-locale":[pn,[co],(y,[p])=>p.evaluate(y).resolvedLocale()]});class fo{constructor(p,_){this.expression=p,this._warningHistory={},this._evaluator=new io,this._defaultValue=_?function(S){return S.type==="color"&&qt(S.default)?new lt(0,0,0,0):S.type==="color"?lt.parse(S.default)||null:S.type==="padding"?Nt.parse(S.default)||null:S.default===void 0?null:S.default}(_):null,this._enumValues=_&&_.type==="enum"?_.values:null}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._evaluator.globals=p,this._evaluator.feature=_,this._evaluator.featureState=S,this._evaluator.canonical=z,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(p,_,S,z,O,V){this._evaluator.globals=p,this._evaluator.feature=_||null,this._evaluator.featureState=S||null,this._evaluator.canonical=z,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V||null;try{const Q=this.expression.evaluate(this._evaluator);if(Q==null||typeof Q=="number"&&Q!=Q)return this._defaultValue;if(this._enumValues&&!(Q in this._enumValues))throw new sn(`Expected value to be one of ${Object.keys(this._enumValues).map(ie=>JSON.stringify(ie)).join(", ")}, but found ${JSON.stringify(Q)} instead.`);return Q}catch(Q){return this._warningHistory[Q.message]||(this._warningHistory[Q.message]=!0,typeof console<"u"&&console.warn(Q.message)),this._defaultValue}}}function Vo(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in qn}function Qo(y,p){const _=new kl(qn,[],p?function(z){const O={color:ci,string:pn,number:Or,enum:pn,boolean:Qn,formatted:li,padding:no,resolvedImage:yo};return z.type==="array"?pi(O[z.value]||gi,z.length):O[z.type]}(p):void 0),S=_.parse(y,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return S?Xl(new fo(S,p)):As(_.errors)}class ea{constructor(p,_){this.kind=p,this._styleExpression=_,this.isStateDependent=p!=="constant"&&!Ds(_.expression)}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._styleExpression.evaluateWithoutErrorHandling(p,_,S,z,O,V)}evaluate(p,_,S,z,O,V){return this._styleExpression.evaluate(p,_,S,z,O,V)}}class Da{constructor(p,_,S,z){this.kind=p,this.zoomStops=S,this._styleExpression=_,this.isStateDependent=p!=="camera"&&!Ds(_.expression),this.interpolationType=z}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._styleExpression.evaluateWithoutErrorHandling(p,_,S,z,O,V)}evaluate(p,_,S,z,O,V){return this._styleExpression.evaluate(p,_,S,z,O,V)}interpolationFactor(p,_,S){return this.interpolationType?Pr.interpolationFactor(this.interpolationType,p,_,S):0}}function aa(y,p){const _=Qo(y,p);if(_.result==="error")return _;const S=_.value.expression,z=us(S);if(!z&&!To(p))return As([new or("","data expressions not supported")]);const O=xl(S,["zoom"]);if(!O&&!te(p))return As([new or("","zoom expressions not supported")]);const V=za(S);return V||O?V instanceof or?As([V]):V instanceof Pr&&!Te(p)?As([new or("",'"interpolate" expressions cannot be used with this property')]):Xl(V?new Da(z?"camera":"composite",_.value,V.labels,V instanceof Pr?V.interpolation:void 0):new ea(z?"constant":"source",_.value)):As([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $i{constructor(p,_){this._parameters=p,this._specification=_,xn(this,Xr(this._parameters,this._specification))}static deserialize(p){return new $i(p._parameters,p._specification)}static serialize(p){return{_parameters:p._parameters,_specification:p._specification}}}function za(y){let p=null;if(y instanceof kn)p=za(y.result);else if(y instanceof T){for(const _ of y.args)if(p=za(_),p)break}else(y instanceof ws||y instanceof Pr)&&y.input instanceof ko&&y.input.name==="zoom"&&(p=y);return p instanceof or||y.eachChild(_=>{const S=za(_);S instanceof or?p=S:!p&&S?p=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):p&&S&&p!==S&&(p=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),p}function Sa(y){const p=y.key,_=y.value,S=y.valueSpec||{},z=y.objectElementValidators||{},O=y.style,V=y.styleSpec;let Q=[];const ie=gt(_);if(ie!=="object")return[new Vr(p,_,`object expected, ${ie} found`)];for(const he in _){const Ee=he.split(".")[0],Me=S[Ee]||S["*"];let Ge;if(z[Ee])Ge=z[Ee];else if(S[Ee])Ge=la;else if(z["*"])Ge=z["*"];else{if(!S["*"]){Q.push(new Vr(p,_[he],`unknown property "${he}"`));continue}Ge=la}Q=Q.concat(Ge({key:(p&&`${p}.`)+he,value:_[he],valueSpec:Me,style:O,styleSpec:V,object:_,objectKey:he},_))}for(const he in S)z[he]||S[he].required&&S[he].default===void 0&&_[he]===void 0&&Q.push(new Vr(p,_,`missing required property "${he}"`));return Q}function Yl(y){const p=y.value,_=y.valueSpec,S=y.style,z=y.styleSpec,O=y.key,V=y.arrayElementValidator||la;if(gt(p)!=="array")return[new Vr(O,p,`array expected, ${gt(p)} found`)];if(_.length&&p.length!==_.length)return[new Vr(O,p,`array length ${_.length} expected, length ${p.length} found`)];if(_["min-length"]&&p.length<_["min-length"])return[new Vr(O,p,`array length at least ${_["min-length"]} expected, length ${p.length} found`)];let Q={type:_.value,values:_.values};z.$version<7&&(Q.function=_.function),gt(_.value)==="object"&&(Q=_.value);let ie=[];for(let he=0;he<p.length;he++)ie=ie.concat(V({array:p,arrayIndex:he,value:p[he],valueSpec:Q,style:S,styleSpec:z,key:`${O}[${he}]`}));return ie}function El(y){const p=y.key,_=y.value,S=y.valueSpec;let z=gt(_);return z==="number"&&_!=_&&(z="NaN"),z!=="number"?[new Vr(p,_,`number expected, ${z} found`)]:"minimum"in S&&_<S.minimum?[new Vr(p,_,`${_} is less than the minimum value ${S.minimum}`)]:"maximum"in S&&_>S.maximum?[new Vr(p,_,`${_} is greater than the maximum value ${S.maximum}`)]:[]}function Zu(y){const p=y.valueSpec,_=si(y.value.type);let S,z,O,V={};const Q=_!=="categorical"&&y.value.property===void 0,ie=!Q,he=gt(y.value.stops)==="array"&&gt(y.value.stops[0])==="array"&&gt(y.value.stops[0][0])==="object",Ee=Sa({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(et){if(_==="identity")return[new Vr(et.key,et.value,'identity function may not have a "stops" property')];let rt=[];const Vt=et.value;return rt=rt.concat(Yl({key:et.key,value:Vt,valueSpec:et.valueSpec,style:et.style,styleSpec:et.styleSpec,arrayElementValidator:Me})),gt(Vt)==="array"&&Vt.length===0&&rt.push(new Vr(et.key,Vt,"array must have at least one stop")),rt},default:function(et){return la({key:et.key,value:et.value,valueSpec:p,style:et.style,styleSpec:et.styleSpec})}}});return _==="identity"&&Q&&Ee.push(new Vr(y.key,y.value,'missing required property "property"')),_==="identity"||y.value.stops||Ee.push(new Vr(y.key,y.value,'missing required property "stops"')),_==="exponential"&&y.valueSpec.expression&&!Te(y.valueSpec)&&Ee.push(new Vr(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(ie&&!To(y.valueSpec)?Ee.push(new Vr(y.key,y.value,"property functions not supported")):Q&&!te(y.valueSpec)&&Ee.push(new Vr(y.key,y.value,"zoom functions not supported"))),_!=="categorical"&&!he||y.value.property!==void 0||Ee.push(new Vr(y.key,y.value,'"property" property is required')),Ee;function Me(et){let rt=[];const Vt=et.value,Ot=et.key;if(gt(Vt)!=="array")return[new Vr(Ot,Vt,`array expected, ${gt(Vt)} found`)];if(Vt.length!==2)return[new Vr(Ot,Vt,`array length 2 expected, length ${Vt.length} found`)];if(he){if(gt(Vt[0])!=="object")return[new Vr(Ot,Vt,`object expected, ${gt(Vt[0])} found`)];if(Vt[0].zoom===void 0)return[new Vr(Ot,Vt,"object stop key must have zoom")];if(Vt[0].value===void 0)return[new Vr(Ot,Vt,"object stop key must have value")];if(O&&O>si(Vt[0].zoom))return[new Vr(Ot,Vt[0].zoom,"stop zoom values must appear in ascending order")];si(Vt[0].zoom)!==O&&(O=si(Vt[0].zoom),z=void 0,V={}),rt=rt.concat(Sa({key:`${Ot}[0]`,value:Vt[0],valueSpec:{zoom:{}},style:et.style,styleSpec:et.styleSpec,objectElementValidators:{zoom:El,value:Ge}}))}else rt=rt.concat(Ge({key:`${Ot}[0]`,value:Vt[0],valueSpec:{},style:et.style,styleSpec:et.styleSpec},Vt));return Vo(fr(Vt[1]))?rt.concat([new Vr(`${Ot}[1]`,Vt[1],"expressions are not allowed in function stops.")]):rt.concat(la({key:`${Ot}[1]`,value:Vt[1],valueSpec:p,style:et.style,styleSpec:et.styleSpec}))}function Ge(et,rt){const Vt=gt(et.value),Ot=si(et.value),xr=et.value!==null?et.value:rt;if(S){if(Vt!==S)return[new Vr(et.key,xr,`${Vt} stop domain type must match previous stop domain type ${S}`)]}else S=Vt;if(Vt!=="number"&&Vt!=="string"&&Vt!=="boolean")return[new Vr(et.key,xr,"stop domain value must be a number, string, or boolean")];if(Vt!=="number"&&_!=="categorical"){let jr=`number expected, ${Vt} found`;return To(p)&&_===void 0&&(jr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vr(et.key,xr,jr)]}return _!=="categorical"||Vt!=="number"||isFinite(Ot)&&Math.floor(Ot)===Ot?_!=="categorical"&&Vt==="number"&&z!==void 0&&Ot<z?[new Vr(et.key,xr,"stop domain values must appear in ascending order")]:(z=Ot,_==="categorical"&&Ot in V?[new Vr(et.key,xr,"stop domain values must be unique")]:(V[Ot]=!0,[])):[new Vr(et.key,xr,`integer expected, found ${Ot}`)]}}function Ns(y){const p=(y.expressionContext==="property"?aa:Qo)(fr(y.value),y.valueSpec);if(p.result==="error")return p.value.map(S=>new Vr(`${y.key}${S.key}`,y.value,S.message));const _=p.value.expression||p.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!_.outputDefined())return[new Vr(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!Ds(_))return[new Vr(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!Ds(_))return[new Vr(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!xl(_,["zoom","feature-state"]))return[new Vr(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!us(_))return[new Vr(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sl(y){const p=y.key,_=y.value,S=y.valueSpec,z=[];return Array.isArray(S.values)?S.values.indexOf(si(_))===-1&&z.push(new Vr(p,_,`expected one of [${S.values.join(", ")}], ${JSON.stringify(_)} found`)):Object.keys(S.values).indexOf(si(_))===-1&&z.push(new Vr(p,_,`expected one of [${Object.keys(S.values).join(", ")}], ${JSON.stringify(_)} found`)),z}function ol(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(const p of y.slice(1))if(!ol(p)&&typeof p!="boolean")return!1;return!0;default:return!0}}const ku={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Na(y){if(y==null)return{filter:()=>!0,needGeometry:!1};ol(y)||(y=Zs(y));const p=Qo(y,ku);if(p.result==="error")throw new Error(p.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,S,z)=>p.value.evaluate(_,S,{},z),needGeometry:Jl(y)}}function Au(y,p){return y<p?-1:y>p?1:0}function Jl(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(let p=1;p<y.length;p++)if(Jl(y[p]))return!0;return!1}function Zs(y){if(!y)return!0;const p=y[0];return y.length<=1?p!=="any":p==="=="?Cl(y[1],y[2],"=="):p==="!="?Xs(Cl(y[1],y[2],"==")):p==="<"||p===">"||p==="<="||p===">="?Cl(y[1],y[2],p):p==="any"?(_=y.slice(1),["any"].concat(_.map(Zs))):p==="all"?["all"].concat(y.slice(1).map(Zs)):p==="none"?["all"].concat(y.slice(1).map(Zs).map(Xs)):p==="in"?Ra(y[1],y.slice(2)):p==="!in"?Xs(Ra(y[1],y.slice(2))):p==="has"?Kl(y[1]):p==="!has"?Xs(Kl(y[1])):p!=="within"||y;var _}function Cl(y,p,_){switch(y){case"$type":return[`filter-type-${_}`,p];case"$id":return[`filter-id-${_}`,p];default:return[`filter-${_}`,y,p]}}function Ra(y,p){if(p.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(_=>typeof _!=typeof p[0])?["filter-in-large",y,["literal",p.sort(Au)]]:["filter-in-small",y,["literal",p]]}}function Kl(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function Xs(y){return["!",y]}function Il(y){return ol(fr(y.value))?Ns(xn({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):is(y)}function is(y){const p=y.value,_=y.key;if(gt(p)!=="array")return[new Vr(_,p,`array expected, ${gt(p)} found`)];const S=y.styleSpec;let z,O=[];if(p.length<1)return[new Vr(_,p,"filter array must have at least 1 element")];switch(O=O.concat(Sl({key:`${_}[0]`,value:p[0],valueSpec:S.filter_operator,style:y.style,styleSpec:y.styleSpec})),si(p[0])){case"<":case"<=":case">":case">=":p.length>=2&&si(p[1])==="$type"&&O.push(new Vr(_,p,`"$type" cannot be use with operator "${p[0]}"`));case"==":case"!=":p.length!==3&&O.push(new Vr(_,p,`filter array for operator "${p[0]}" must have 3 elements`));case"in":case"!in":p.length>=2&&(z=gt(p[1]),z!=="string"&&O.push(new Vr(`${_}[1]`,p[1],`string expected, ${z} found`)));for(let V=2;V<p.length;V++)z=gt(p[V]),si(p[1])==="$type"?O=O.concat(Sl({key:`${_}[${V}]`,value:p[V],valueSpec:S.geometry_type,style:y.style,styleSpec:y.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&O.push(new Vr(`${_}[${V}]`,p[V],`string, number, or boolean expected, ${z} found`));break;case"any":case"all":case"none":for(let V=1;V<p.length;V++)O=O.concat(is({key:`${_}[${V}]`,value:p[V],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":z=gt(p[1]),p.length!==2?O.push(new Vr(_,p,`filter array for "${p[0]}" operator must have 2 elements`)):z!=="string"&&O.push(new Vr(`${_}[1]`,p[1],`string expected, ${z} found`));break;case"within":z=gt(p[1]),p.length!==2?O.push(new Vr(_,p,`filter array for "${p[0]}" operator must have 2 elements`)):z!=="object"&&O.push(new Vr(`${_}[1]`,p[1],`object expected, ${z} found`))}return O}function Ll(y,p){const _=y.key,S=y.style,z=y.styleSpec,O=y.value,V=y.objectKey,Q=z[`${p}_${y.layerType}`];if(!Q)return[];const ie=V.match(/^(.*)-transition$/);if(p==="paint"&&ie&&Q[ie[1]]&&Q[ie[1]].transition)return la({key:_,value:O,valueSpec:z.transition,style:S,styleSpec:z});const he=y.valueSpec||Q[V];if(!he)return[new Vr(_,O,`unknown property "${V}"`)];let Ee;if(gt(O)==="string"&&To(he)&&!he.tokens&&(Ee=/^{([^}]+)}$/.exec(O)))return[new Vr(_,O,`"${V}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ee[1])} }\`.`)];const Me=[];return y.layerType==="symbol"&&(V==="text-field"&&S&&!S.glyphs&&Me.push(new Vr(_,O,'use of "text-field" requires a style "glyphs" property')),V==="text-font"&&qt(fr(O))&&si(O.type)==="identity"&&Me.push(new Vr(_,O,'"text-font" does not support identity functions'))),Me.concat(la({key:y.key,value:O,valueSpec:he,style:S,styleSpec:z,expressionContext:"property",propertyType:p,propertyKey:V}))}function pc(y){return Ll(y,"paint")}function zc(y){return Ll(y,"layout")}function Tl(y){let p=[];const _=y.value,S=y.key,z=y.style,O=y.styleSpec;_.type||_.ref||p.push(new Vr(S,_,'either "type" or "ref" is required'));let V=si(_.type);const Q=si(_.ref);if(_.id){const ie=si(_.id);for(let he=0;he<y.arrayIndex;he++){const Ee=z.layers[he];si(Ee.id)===ie&&p.push(new Vr(S,_.id,`duplicate layer id "${_.id}", previously used at line ${Ee.id.__line__}`))}}if("ref"in _){let ie;["type","source","source-layer","filter","layout"].forEach(he=>{he in _&&p.push(new Vr(S,_[he],`"${he}" is prohibited for ref layers`))}),z.layers.forEach(he=>{si(he.id)===Q&&(ie=he)}),ie?ie.ref?p.push(new Vr(S,_.ref,"ref cannot reference another ref layer")):V=si(ie.type):p.push(new Vr(S,_.ref,`ref layer "${Q}" not found`))}else if(V!=="background")if(_.source){const ie=z.sources&&z.sources[_.source],he=ie&&si(ie.type);ie?he==="vector"&&V==="raster"?p.push(new Vr(S,_.source,`layer "${_.id}" requires a raster source`)):he==="raster"&&V!=="raster"?p.push(new Vr(S,_.source,`layer "${_.id}" requires a vector source`)):he!=="vector"||_["source-layer"]?he==="raster-dem"&&V!=="hillshade"?p.push(new Vr(S,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!_.paint||!_.paint["line-gradient"]||he==="geojson"&&ie.lineMetrics||p.push(new Vr(S,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):p.push(new Vr(S,_,`layer "${_.id}" must specify a "source-layer"`)):p.push(new Vr(S,_.source,`source "${_.source}" not found`))}else p.push(new Vr(S,_,'missing required property "source"'));return p=p.concat(Sa({key:S,value:_,valueSpec:O.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>la({key:`${S}.type`,value:_.type,valueSpec:O.layer.type,style:y.style,styleSpec:y.styleSpec,object:_,objectKey:"type"}),filter:Il,layout:ie=>Sa({layer:_,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":he=>zc(xn({layerType:V},he))}}),paint:ie=>Sa({layer:_,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":he=>pc(xn({layerType:V},he))}})}})),p}function Ga(y){const p=y.value,_=y.key,S=gt(p);return S!=="string"?[new Vr(_,p,`string expected, ${S} found`)]:[]}const Rs={promoteId:function({key:y,value:p}){if(gt(p)==="string")return Ga({key:y,value:p});{const _=[];for(const S in p)_.push(...Ga({key:`${y}.${S}`,value:p[S]}));return _}}};function Os(y){const p=y.value,_=y.key,S=y.styleSpec,z=y.style;if(!p.type)return[new Vr(_,p,'"type" is required')];const O=si(p.type);let V;switch(O){case"vector":case"raster":case"raster-dem":return V=Sa({key:_,value:p,valueSpec:S[`source_${O.replace("-","_")}`],style:y.style,styleSpec:S,objectElementValidators:Rs}),V;case"geojson":if(V=Sa({key:_,value:p,valueSpec:S.source_geojson,style:z,styleSpec:S,objectElementValidators:Rs}),p.cluster)for(const Q in p.clusterProperties){const[ie,he]=p.clusterProperties[Q],Ee=typeof ie=="string"?[ie,["accumulated"],["get",Q]]:ie;V.push(...Ns({key:`${_}.${Q}.map`,value:he,expressionContext:"cluster-map"})),V.push(...Ns({key:`${_}.${Q}.reduce`,value:Ee,expressionContext:"cluster-reduce"}))}return V;case"video":return Sa({key:_,value:p,valueSpec:S.source_video,style:z,styleSpec:S});case"image":return Sa({key:_,value:p,valueSpec:S.source_image,style:z,styleSpec:S});case"canvas":return[new Vr(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sl({key:`${_}.type`,value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:z,styleSpec:S})}}function Ya(y){const p=y.value,_=y.styleSpec,S=_.light,z=y.style;let O=[];const V=gt(p);if(p===void 0)return O;if(V!=="object")return O=O.concat([new Vr("light",p,`object expected, ${V} found`)]),O;for(const Q in p){const ie=Q.match(/^(.*)-transition$/);O=O.concat(ie&&S[ie[1]]&&S[ie[1]].transition?la({key:Q,value:p[Q],valueSpec:_.transition,style:z,styleSpec:_}):S[Q]?la({key:Q,value:p[Q],valueSpec:S[Q],style:z,styleSpec:_}):[new Vr(Q,p[Q],`unknown property "${Q}"`)])}return O}function sa(y){const p=y.value,_=y.styleSpec,S=_.terrain,z=y.style;let O=[];const V=gt(p);if(p===void 0)return O;if(V!=="object")return O=O.concat([new Vr("terrain",p,`object expected, ${V} found`)]),O;for(const Q in p)O=O.concat(S[Q]?la({key:Q,value:p[Q],valueSpec:S[Q],style:z,styleSpec:_}):[new Vr(Q,p[Q],`unknown property "${Q}"`)]);return O}const Fs={"*":()=>[],array:Yl,boolean:function(y){const p=y.value,_=y.key,S=gt(p);return S!=="boolean"?[new Vr(_,p,`boolean expected, ${S} found`)]:[]},number:El,color:function(y){const p=y.key,_=y.value,S=gt(_);return S!=="string"?[new Vr(p,_,`color expected, ${S} found`)]:ha(_)===null?[new Vr(p,_,`color expected, "${_}" found`)]:[]},constants:wi,enum:Sl,filter:Il,function:Zu,layer:Tl,object:Sa,source:Os,light:Ya,terrain:sa,string:Ga,formatted:function(y){return Ga(y).length===0?[]:Ns(y)},resolvedImage:function(y){return Ga(y).length===0?[]:Ns(y)},padding:function(y){const p=y.key,_=y.value;if(gt(_)==="array"){if(_.length<1||_.length>4)return[new Vr(p,_,`padding requires 1 to 4 values; ${_.length} values found`)];const S={type:"number"};let z=[];for(let O=0;O<_.length;O++)z=z.concat(la({key:`${p}[${O}]`,value:_[O],valueSpec:S}));return z}return El({key:p,value:_,valueSpec:{}})}};function la(y){const p=y.value,_=y.valueSpec,S=y.styleSpec;return _.expression&&qt(si(p))?Zu(y):_.expression&&Vo(fr(p))?Ns(y):_.type&&Fs[_.type]?Fs[_.type](y):Sa(xn({},y,{valueSpec:_.type?S[_.type]:_}))}function Xu(y){const p=y.value,_=y.key,S=Ga(y);return S.length||(p.indexOf("{fontstack}")===-1&&S.push(new Vr(_,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&S.push(new Vr(_,p,'"glyphs" url must include a "{range}" token'))),S}function cs(y,p=yr){let _=[];return _=_.concat(la({key:"",value:y,valueSpec:p.$root,styleSpec:p,style:y,objectElementValidators:{glyphs:Xu,"*":()=>[]}})),y.constants&&(_=_.concat(wi({key:"constants",value:y.constants,style:y,styleSpec:p}))),fs(_)}function fs(y){return[].concat(y).sort((p,_)=>p.line-_.line)}function oo(y){return function(...p){return fs(y.apply(this,p))}}cs.source=oo(Os),cs.light=oo(Ya),cs.terrain=oo(sa),cs.layer=oo(Tl),cs.filter=oo(Il),cs.paintProperty=oo(pc),cs.layoutProperty=oo(zc);const Es=cs,al=Es.light,Ql=Es.paintProperty,Eu=Es.layoutProperty;function Ca(y,p){let _=!1;if(p&&p.length)for(const S of p)y.fire(new _i(new Error(S.message))),_=!0;return _}class Pl{constructor(p,_,S){const z=this.cells=[];if(p instanceof ArrayBuffer){this.arrayBuffer=p;const V=new Int32Array(this.arrayBuffer);p=V[0],this.d=(_=V[1])+2*(S=V[2]);for(let ie=0;ie<this.d*this.d;ie++){const he=V[3+ie],Ee=V[3+ie+1];z.push(he===Ee?null:V.subarray(he,Ee))}const Q=V[3+z.length+1];this.keys=V.subarray(V[3+z.length],Q),this.bboxes=V.subarray(Q),this.insert=this._insertReadonly}else{this.d=_+2*S;for(let V=0;V<this.d*this.d;V++)z.push([]);this.keys=[],this.bboxes=[]}this.n=_,this.extent=p,this.padding=S,this.scale=_/p,this.uid=0;const O=S/_*p;this.min=-O,this.max=p+O}insert(p,_,S,z,O){this._forEachCell(_,S,z,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(p),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(z),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(p,_,S,z,O,V){this.cells[O].push(V)}query(p,_,S,z,O){const V=this.min,Q=this.max;if(p<=V&&_<=V&&Q<=S&&Q<=z&&!O)return Array.prototype.slice.call(this.keys);{const ie=[];return this._forEachCell(p,_,S,z,this._queryCell,ie,{},O),ie}}_queryCell(p,_,S,z,O,V,Q,ie){const he=this.cells[O];if(he!==null){const Ee=this.keys,Me=this.bboxes;for(let Ge=0;Ge<he.length;Ge++){const et=he[Ge];if(Q[et]===void 0){const rt=4*et;(ie?ie(Me[rt+0],Me[rt+1],Me[rt+2],Me[rt+3]):p<=Me[rt+2]&&_<=Me[rt+3]&&S>=Me[rt+0]&&z>=Me[rt+1])?(Q[et]=!0,V.push(Ee[et])):Q[et]=!1}}}}_forEachCell(p,_,S,z,O,V,Q,ie){const he=this._convertToCellCoord(p),Ee=this._convertToCellCoord(_),Me=this._convertToCellCoord(S),Ge=this._convertToCellCoord(z);for(let et=he;et<=Me;et++)for(let rt=Ee;rt<=Ge;rt++){const Vt=this.d*rt+et;if((!ie||ie(this._convertFromCellCoord(et),this._convertFromCellCoord(rt),this._convertFromCellCoord(et+1),this._convertFromCellCoord(rt+1)))&&O.call(this,p,_,S,z,Vt,V,Q,ie))return}}_convertFromCellCoord(p){return(p-this.padding)/this.scale}_convertToCellCoord(p){return Math.max(0,Math.min(this.d-1,Math.floor(p*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const p=this.cells,_=3+this.cells.length+1+1;let S=0;for(let V=0;V<this.cells.length;V++)S+=this.cells[V].length;const z=new Int32Array(_+S+this.keys.length+this.bboxes.length);z[0]=this.extent,z[1]=this.n,z[2]=this.padding;let O=_;for(let V=0;V<p.length;V++){const Q=p[V];z[3+V]=O,z.set(Q,O),O+=Q.length}return z[3+p.length]=O,z.set(this.keys,O),O+=this.keys.length,z[3+p.length+1]=O,z.set(this.bboxes,O),O+=this.bboxes.length,z.buffer}static serialize(p,_){const S=p.toArrayBuffer();return _&&_.push(S),{buffer:S}}static deserialize(p){return new Pl(p.buffer)}}const ba={};function Dn(y,p,_={}){if(ba[y])throw new Error(`${y} is already registered.`);Object.defineProperty(p,"_classRegistryKey",{value:y,writeable:!1}),ba[y]={klass:p,omit:_.omit||[],shallow:_.shallow||[]}}Dn("Object",Object),Dn("TransferableGridIndex",Pl),Dn("Color",lt),Dn("Error",Error),Dn("AJAXError",Mr),Dn("ResolvedImage",ir),Dn("StylePropertyFunction",$i),Dn("StyleExpression",fo,{omit:["_evaluator"]}),Dn("ZoomDependentExpression",Da),Dn("ZoomConstantExpression",ea),Dn("CompoundExpression",ko,{omit:["_evaluate"]});for(const y in qn)qn[y]._classRegistryKey||Dn(`Expression_${y}`,qn[y]);function Fo(y){return y&&typeof ArrayBuffer<"u"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function Ki(y,p){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob)return y;if(Fo(y)||nt(y))return p&&p.push(y),y;if(ArrayBuffer.isView(y)){const _=y;return p&&p.push(_.buffer),_}if(y instanceof ImageData)return p&&p.push(y.data.buffer),y;if(Array.isArray(y)){const _=[];for(const S of y)_.push(Ki(S,p));return _}if(typeof y=="object"){const _=y.constructor,S=_._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");if(!ba[S])throw new Error(`${S} is not registered.`);const z=_.serialize?_.serialize(y,p):{};if(_.serialize){if(p&&z===p[p.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in y){if(!y.hasOwnProperty(O)||ba[S].omit.indexOf(O)>=0)continue;const V=y[O];z[O]=ba[S].shallow.indexOf(O)>=0?V:Ki(V,p)}y instanceof Error&&(z.message=y.message)}if(z.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(z.$name=S),z}throw new Error("can't serialize object of type "+typeof y)}function Bo(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob||Fo(y)||nt(y)||ArrayBuffer.isView(y)||y instanceof ImageData)return y;if(Array.isArray(y))return y.map(Bo);if(typeof y=="object"){const p=y.$name||"Object";if(!ba[p])throw new Error(`can't deserialize unregistered class ${p}`);const{klass:_}=ba[p];if(!_)throw new Error(`can't deserialize unregistered class ${p}`);if(_.deserialize)return _.deserialize(y);const S=Object.create(_.prototype);for(const z of Object.keys(y)){if(z==="$name")continue;const O=y[z];S[z]=ba[p].shallow.indexOf(z)>=0?O:Bo(O)}return S}throw new Error("can't deserialize object of type "+typeof y)}class ga{constructor(){this.first=!0}update(p,_){const S=Math.floor(p);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=p,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=S+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=_),p!==this.lastZoom&&(this.lastZoom=p,this.lastFloorZoom=S,!0))}}const An={"Latin-1 Supplement":y=>y>=128&&y<=255,Arabic:y=>y>=1536&&y<=1791,"Arabic Supplement":y=>y>=1872&&y<=1919,"Arabic Extended-A":y=>y>=2208&&y<=2303,"Hangul Jamo":y=>y>=4352&&y<=4607,"Unified Canadian Aboriginal Syllabics":y=>y>=5120&&y<=5759,Khmer:y=>y>=6016&&y<=6143,"Unified Canadian Aboriginal Syllabics Extended":y=>y>=6320&&y<=6399,"General Punctuation":y=>y>=8192&&y<=8303,"Letterlike Symbols":y=>y>=8448&&y<=8527,"Number Forms":y=>y>=8528&&y<=8591,"Miscellaneous Technical":y=>y>=8960&&y<=9215,"Control Pictures":y=>y>=9216&&y<=9279,"Optical Character Recognition":y=>y>=9280&&y<=9311,"Enclosed Alphanumerics":y=>y>=9312&&y<=9471,"Geometric Shapes":y=>y>=9632&&y<=9727,"Miscellaneous Symbols":y=>y>=9728&&y<=9983,"Miscellaneous Symbols and Arrows":y=>y>=11008&&y<=11263,"CJK Radicals Supplement":y=>y>=11904&&y<=12031,"Kangxi Radicals":y=>y>=12032&&y<=12255,"Ideographic Description Characters":y=>y>=12272&&y<=12287,"CJK Symbols and Punctuation":y=>y>=12288&&y<=12351,Hiragana:y=>y>=12352&&y<=12447,Katakana:y=>y>=12448&&y<=12543,Bopomofo:y=>y>=12544&&y<=12591,"Hangul Compatibility Jamo":y=>y>=12592&&y<=12687,Kanbun:y=>y>=12688&&y<=12703,"Bopomofo Extended":y=>y>=12704&&y<=12735,"CJK Strokes":y=>y>=12736&&y<=12783,"Katakana Phonetic Extensions":y=>y>=12784&&y<=12799,"Enclosed CJK Letters and Months":y=>y>=12800&&y<=13055,"CJK Compatibility":y=>y>=13056&&y<=13311,"CJK Unified Ideographs Extension A":y=>y>=13312&&y<=19903,"Yijing Hexagram Symbols":y=>y>=19904&&y<=19967,"CJK Unified Ideographs":y=>y>=19968&&y<=40959,"Yi Syllables":y=>y>=40960&&y<=42127,"Yi Radicals":y=>y>=42128&&y<=42191,"Hangul Jamo Extended-A":y=>y>=43360&&y<=43391,"Hangul Syllables":y=>y>=44032&&y<=55215,"Hangul Jamo Extended-B":y=>y>=55216&&y<=55295,"Private Use Area":y=>y>=57344&&y<=63743,"CJK Compatibility Ideographs":y=>y>=63744&&y<=64255,"Arabic Presentation Forms-A":y=>y>=64336&&y<=65023,"Vertical Forms":y=>y>=65040&&y<=65055,"CJK Compatibility Forms":y=>y>=65072&&y<=65103,"Small Form Variants":y=>y>=65104&&y<=65135,"Arabic Presentation Forms-B":y=>y>=65136&&y<=65279,"Halfwidth and Fullwidth Forms":y=>y>=65280&&y<=65519};function Ss(y){for(const p of y)if(Nc(p.charCodeAt(0)))return!0;return!1}function Yu(y){for(const p of y)if(!Ju(p.charCodeAt(0)))return!1;return!0}function Ju(y){return!(An.Arabic(y)||An["Arabic Supplement"](y)||An["Arabic Extended-A"](y)||An["Arabic Presentation Forms-A"](y)||An["Arabic Presentation Forms-B"](y))}function Nc(y){return!(y!==746&&y!==747&&(y<4352||!(An["Bopomofo Extended"](y)||An.Bopomofo(y)||An["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||An["CJK Compatibility Ideographs"](y)||An["CJK Compatibility"](y)||An["CJK Radicals Supplement"](y)||An["CJK Strokes"](y)||!(!An["CJK Symbols and Punctuation"](y)||y>=12296&&y<=12305||y>=12308&&y<=12319||y===12336)||An["CJK Unified Ideographs Extension A"](y)||An["CJK Unified Ideographs"](y)||An["Enclosed CJK Letters and Months"](y)||An["Hangul Compatibility Jamo"](y)||An["Hangul Jamo Extended-A"](y)||An["Hangul Jamo Extended-B"](y)||An["Hangul Jamo"](y)||An["Hangul Syllables"](y)||An.Hiragana(y)||An["Ideographic Description Characters"](y)||An.Kanbun(y)||An["Kangxi Radicals"](y)||An["Katakana Phonetic Extensions"](y)||An.Katakana(y)&&y!==12540||!(!An["Halfwidth and Fullwidth Forms"](y)||y===65288||y===65289||y===65293||y>=65306&&y<=65310||y===65339||y===65341||y===65343||y>=65371&&y<=65503||y===65507||y>=65512&&y<=65519)||!(!An["Small Form Variants"](y)||y>=65112&&y<=65118||y>=65123&&y<=65126)||An["Unified Canadian Aboriginal Syllabics"](y)||An["Unified Canadian Aboriginal Syllabics Extended"](y)||An["Vertical Forms"](y)||An["Yijing Hexagram Symbols"](y)||An["Yi Syllables"](y)||An["Yi Radicals"](y))))}function e0(y){return!(Nc(y)||function(p){return!!(An["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||An["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||An["Letterlike Symbols"](p)||An["Number Forms"](p)||An["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||An["Control Pictures"](p)&&p!==9251||An["Optical Character Recognition"](p)||An["Enclosed Alphanumerics"](p)||An["Geometric Shapes"](p)||An["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||An["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||An["CJK Symbols and Punctuation"](p)||An.Katakana(p)||An["Private Use Area"](p)||An["CJK Compatibility Forms"](p)||An["Small Form Variants"](p)||An["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(y))}function t0(y){return y>=1424&&y<=2303||An["Arabic Presentation Forms-A"](y)||An["Arabic Presentation Forms-B"](y)}function w0(y,p){return!(!p&&t0(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||An.Khmer(y))}function Mi(y){for(const p of y)if(t0(p.charCodeAt(0)))return!0;return!1}const Rc="deferred",dc="loading",ua="loaded";let os=null,ia="unavailable",Ys=null;const mc=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(ia="error"),os&&os(y)};function eu(){tu.fire(new ai("pluginStateChange",{pluginStatus:ia,pluginURL:Ys}))}const tu=new hi,ru=function(){return ia},ho=function(){if(ia!==Rc||!Ys)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ia=dc,eu(),Ys&&Dr({url:Ys},y=>{y?mc(y):(ia=ua,eu())})},Cs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ia===ua||Cs.applyArabicShaping!=null,isLoading:()=>ia===dc,setState(y){if(!pe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ia=y.pluginStatus,Ys=y.pluginURL},isParsed(){if(!pe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Cs.applyArabicShaping!=null&&Cs.processBidirectionalText!=null&&Cs.processStyledBidirectionalText!=null},getPluginURL(){if(!pe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ys}};class Ho{constructor(p,_){this.zoom=p,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ga,this.transition={})}isSupportedScript(p){return function(_,S){for(const z of _)if(!w0(z.charCodeAt(0),S))return!1;return!0}(p,Cs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const p=this.zoom,_=p-Math.floor(p),S=this.crossFadingFactor();return p>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*_}}}class Is{constructor(p,_){this.property=p,this.value=_,this.expression=function(S,z){if(qt(S))return new $i(S,z);if(Vo(S)){const O=aa(S,z);if(O.result==="error")throw new Error(O.value.map(V=>`${V.key}: ${V.message}`).join(", "));return O.value}{let O=S;return z.type==="color"&&typeof S=="string"?O=lt.parse(S):z.type!=="padding"||typeof S!="number"&&!Array.isArray(S)||(O=Nt.parse(S)),{kind:"constant",evaluate:()=>O}}}(_===void 0?p.specification.default:_,p.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(p,_,S){return this.property.possiblyEvaluate(this,p,_,S)}}class Su{constructor(p){this.property=p,this.value=new Is(p,void 0)}transitioned(p,_){return new Cu(this.property,this.value,_,F({},p.transition,this.transition),p.now)}untransitioned(){return new Cu(this.property,this.value,null,{},0)}}class Oc{constructor(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)}getValue(p){return ee(this._values[p].value.value)}setValue(p,_){Object.prototype.hasOwnProperty.call(this._values,p)||(this._values[p]=new Su(this._values[p].property)),this._values[p].value=new Is(this._values[p].property,_===null?void 0:ee(_))}getTransition(p){return ee(this._values[p].transition)}setTransition(p,_){Object.prototype.hasOwnProperty.call(this._values,p)||(this._values[p]=new Su(this._values[p].property)),this._values[p].transition=ee(_)||void 0}serialize(){const p={};for(const _ of Object.keys(this._values)){const S=this.getValue(_);S!==void 0&&(p[_]=S);const z=this.getTransition(_);z!==void 0&&(p[`${_}-transition`]=z)}return p}transitioned(p,_){const S=new sl(this._properties);for(const z of Object.keys(this._values))S._values[z]=this._values[z].transitioned(p,_._values[z]);return S}untransitioned(){const p=new sl(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].untransitioned();return p}}class Cu{constructor(p,_,S,z,O){this.property=p,this.value=_,this.begin=O+z.delay||0,this.end=this.begin+z.duration||0,p.specification.transition&&(z.delay||z.duration)&&(this.prior=S)}possiblyEvaluate(p,_,S){const z=p.now||0,O=this.value.possiblyEvaluate(p,_,S),V=this.prior;if(V){if(z>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(z<this.begin)return V.possiblyEvaluate(p,_,S);{const Q=(z-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(p,_,S),O,function(ie){if(ie<=0)return 0;if(ie>=1)return 1;const he=ie*ie,Ee=he*ie;return 4*(ie<.5?Ee:3*(ie-he)+Ee-.75)}(Q))}}return O}}class sl{constructor(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)}possiblyEvaluate(p,_,S){const z=new gc(this._properties);for(const O of Object.keys(this._values))z._values[O]=this._values[O].possiblyEvaluate(p,_,S);return z}hasTransition(){for(const p of Object.keys(this._values))if(this._values[p].prior)return!0;return!1}}class x0{constructor(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)}getValue(p){return ee(this._values[p].value)}setValue(p,_){this._values[p]=new Is(this._values[p].property,_===null?void 0:ee(_))}serialize(){const p={};for(const _ of Object.keys(this._values)){const S=this.getValue(_);S!==void 0&&(p[_]=S)}return p}possiblyEvaluate(p,_,S){const z=new gc(this._properties);for(const O of Object.keys(this._values))z._values[O]=this._values[O].possiblyEvaluate(p,_,S);return z}}class ll{constructor(p,_,S){this.property=p,this.value=_,this.parameters=S}isConstant(){return this.value.kind==="constant"}constantOr(p){return this.value.kind==="constant"?this.value.value:p}evaluate(p,_,S,z){return this.property.evaluate(this.value,this.parameters,p,_,S,z)}}class gc{constructor(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)}get(p){return this._values[p]}}class oi{constructor(p){this.specification=p}possiblyEvaluate(p,_){if(p.isDataDriven())throw new Error("Value should not be data driven");return p.expression.evaluate(_)}interpolate(p,_,S){const z=il[this.specification.type];return z?z(p,_,S):p}}class vi{constructor(p,_){this.specification=p,this.overrides=_}possiblyEvaluate(p,_,S,z){return new ll(this,p.expression.kind==="constant"||p.expression.kind==="camera"?{kind:"constant",value:p.expression.evaluate(_,null,{},S,z)}:p.expression,_)}interpolate(p,_,S){if(p.value.kind!=="constant"||_.value.kind!=="constant")return p;if(p.value.value===void 0||_.value.value===void 0)return new ll(this,{kind:"constant",value:void 0},p.parameters);const z=il[this.specification.type];return z?new ll(this,{kind:"constant",value:z(p.value.value,_.value.value,S)},p.parameters):p}evaluate(p,_,S,z,O,V){return p.kind==="constant"?p.value:p.evaluate(_,S,z,O,V)}}class Oa extends vi{possiblyEvaluate(p,_,S,z){if(p.value===void 0)return new ll(this,{kind:"constant",value:void 0},_);if(p.expression.kind==="constant"){const O=p.expression.evaluate(_,null,{},S,z),V=p.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,Q=this._calculate(V,V,V,_);return new ll(this,{kind:"constant",value:Q},_)}if(p.expression.kind==="camera"){const O=this._calculate(p.expression.evaluate({zoom:_.zoom-1}),p.expression.evaluate({zoom:_.zoom}),p.expression.evaluate({zoom:_.zoom+1}),_);return new ll(this,{kind:"constant",value:O},_)}return new ll(this,p.expression,_)}evaluate(p,_,S,z,O,V){if(p.kind==="source"){const Q=p.evaluate(_,S,z,O,V);return this._calculate(Q,Q,Q,_)}return p.kind==="composite"?this._calculate(p.evaluate({zoom:Math.floor(_.zoom)-1},S,z),p.evaluate({zoom:Math.floor(_.zoom)},S,z),p.evaluate({zoom:Math.floor(_.zoom)+1},S,z),_):p.value}_calculate(p,_,S,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:p,to:_}:{from:S,to:_}}interpolate(p){return p}}class Ku{constructor(p){this.specification=p}possiblyEvaluate(p,_,S,z){if(p.value!==void 0){if(p.expression.kind==="constant"){const O=p.expression.evaluate(_,null,{},S,z);return this._calculate(O,O,O,_)}return this._calculate(p.expression.evaluate(new Ho(Math.floor(_.zoom-1),_)),p.expression.evaluate(new Ho(Math.floor(_.zoom),_)),p.expression.evaluate(new Ho(Math.floor(_.zoom+1),_)),_)}}_calculate(p,_,S,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:p,to:_}:{from:S,to:_}}interpolate(p){return p}}class wa{constructor(p){this.specification=p}possiblyEvaluate(p,_,S,z){return!!p.expression.evaluate(_,null,{},S,z)}interpolate(){return!1}}class jo{constructor(p){this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in p){const S=p[_];S.specification.overridable&&this.overridableProperties.push(_);const z=this.defaultPropertyValues[_]=new Is(S,void 0),O=this.defaultTransitionablePropertyValues[_]=new Su(S);this.defaultTransitioningPropertyValues[_]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=z.possiblyEvaluate({})}}}Dn("DataDrivenProperty",vi),Dn("DataConstantProperty",oi),Dn("CrossFadedDataDrivenProperty",Oa),Dn("CrossFadedProperty",Ku),Dn("ColorRampProperty",wa);const Ml="-transition";class Js extends hi{constructor(p,_){if(super(),this.id=p.id,this.type=p.type,this._featureFilter={filter:()=>!0,needGeometry:!1},p.type!=="custom"&&(this.metadata=p.metadata,this.minzoom=p.minzoom,this.maxzoom=p.maxzoom,p.type!=="background"&&(this.source=p.source,this.sourceLayer=p["source-layer"],this.filter=p.filter),_.layout&&(this._unevaluatedLayout=new x0(_.layout)),_.paint)){this._transitionablePaint=new Oc(_.paint);for(const S in p.paint)this.setPaintProperty(S,p.paint[S],{validate:!1});for(const S in p.layout)this.setLayoutProperty(S,p.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new gc(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(p){return p==="visibility"?this.visibility:this._unevaluatedLayout.getValue(p)}setLayoutProperty(p,_,S={}){_!=null&&this._validate(Eu,`layers.${this.id}.layout.${p}`,p,_,S)||(p!=="visibility"?this._unevaluatedLayout.setValue(p,_):this.visibility=_)}getPaintProperty(p){return p.endsWith(Ml)?this._transitionablePaint.getTransition(p.slice(0,-Ml.length)):this._transitionablePaint.getValue(p)}setPaintProperty(p,_,S={}){if(_!=null&&this._validate(Ql,`layers.${this.id}.paint.${p}`,p,_,S))return!1;if(p.endsWith(Ml))return this._transitionablePaint.setTransition(p.slice(0,-Ml.length),_||void 0),!1;{const z=this._transitionablePaint._values[p],O=z.property.specification["property-type"]==="cross-faded-data-driven",V=z.value.isDataDriven(),Q=z.value;this._transitionablePaint.setValue(p,_),this._handleSpecialPaintPropertyUpdate(p);const ie=this._transitionablePaint._values[p].value;return ie.isDataDriven()||V||O||this._handleOverridablePaintPropertyUpdate(p,Q,ie)}}_handleSpecialPaintPropertyUpdate(p){}_handleOverridablePaintPropertyUpdate(p,_,S){return!1}isHidden(p){return!!(this.minzoom&&p<this.minzoom)||!!(this.maxzoom&&p>=this.maxzoom)||this.visibility==="none"}updateTransitions(p){this._transitioningPaint=this._transitionablePaint.transitioned(p,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(p,_){p.getCrossfadeParameters&&(this._crossfadeParameters=p.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(p,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(p,void 0,_)}serialize(){const p={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(p.layout=p.layout||{},p.layout.visibility=this.visibility),Z(p,(_,S)=>!(_===void 0||S==="layout"&&!Object.keys(_).length||S==="paint"&&!Object.keys(_).length))}_validate(p,_,S,z,O={}){return(!O||O.validate!==!1)&&Ca(this,p.call(Es,{key:_,layerType:this.type,objectKey:S,value:z,styleSpec:yr,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const p in this.paint._values){const _=this.paint.get(p);if(_ instanceof ll&&To(_.property.specification)&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1}}const r0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Dl{constructor(p,_){this._structArray=p,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ca{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(p,_){return p._trim(),_&&(p.isTransferred=!0,_.push(p.arrayBuffer)),{length:p.length,arrayBuffer:p.arrayBuffer}}static deserialize(p){const _=Object.create(this.prototype);return _.arrayBuffer=p.arrayBuffer,_.length=p.length,_.capacity=p.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(p){this.reserve(p),this.length=p}reserve(p){if(p>this.capacity){this.capacity=Math.max(p,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xa(y,p=1){let _=0,S=0;return{members:y.map(z=>{const O=r0[z.type].BYTES_PER_ELEMENT,V=_=Fc(_,Math.max(p,O)),Q=z.components||1;return S=Math.max(S,O),_+=O*Q,{name:z.name,type:z.type,components:Q,offset:V}}),size:Fc(_,Math.max(S,p)),alignment:p}}function Fc(y,p){return Math.ceil(y/p)*p}class as extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.int16[z+0]=_,this.int16[z+1]=S,p}}as.prototype.bytesPerElement=4,Dn("StructArrayLayout2i4",as);class M extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=4*p;return this.int16[V+0]=_,this.int16[V+1]=S,this.int16[V+2]=z,this.int16[V+3]=O,p}}M.prototype.bytesPerElement=8,Dn("StructArrayLayout4i8",M);class d extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=6*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.int16[ie+2]=z,this.int16[ie+3]=O,this.int16[ie+4]=V,this.int16[ie+5]=Q,p}}d.prototype.bytesPerElement=12,Dn("StructArrayLayout2i4i12",d);class k extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=4*p,he=8*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.uint8[he+4]=z,this.uint8[he+5]=O,this.uint8[he+6]=V,this.uint8[he+7]=Q,p}}k.prototype.bytesPerElement=8,Dn("StructArrayLayout2i4ub8",k);class I extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.float32[z+0]=_,this.float32[z+1]=S,p}}I.prototype.bytesPerElement=8,Dn("StructArrayLayout2f8",I);class D extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee){const Me=this.length;return this.resize(Me+1),this.emplace(Me,p,_,S,z,O,V,Q,ie,he,Ee)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me){const Ge=10*p;return this.uint16[Ge+0]=_,this.uint16[Ge+1]=S,this.uint16[Ge+2]=z,this.uint16[Ge+3]=O,this.uint16[Ge+4]=V,this.uint16[Ge+5]=Q,this.uint16[Ge+6]=ie,this.uint16[Ge+7]=he,this.uint16[Ge+8]=Ee,this.uint16[Ge+9]=Me,p}}D.prototype.bytesPerElement=20,Dn("StructArrayLayout10ui20",D);class q extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge){const et=this.length;return this.resize(et+1),this.emplace(et,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et){const rt=12*p;return this.int16[rt+0]=_,this.int16[rt+1]=S,this.int16[rt+2]=z,this.int16[rt+3]=O,this.uint16[rt+4]=V,this.uint16[rt+5]=Q,this.uint16[rt+6]=ie,this.uint16[rt+7]=he,this.int16[rt+8]=Ee,this.int16[rt+9]=Me,this.int16[rt+10]=Ge,this.int16[rt+11]=et,p}}q.prototype.bytesPerElement=24,Dn("StructArrayLayout4i4ui4i24",q);class J extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.float32[O+0]=_,this.float32[O+1]=S,this.float32[O+2]=z,p}}J.prototype.bytesPerElement=12,Dn("StructArrayLayout3f12",J);class oe extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.uint32[1*p+0]=_,p}}oe.prototype.bytesPerElement=4,Dn("StructArrayLayout1ul4",oe);class se extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,p,_,S,z,O,V,Q,ie,he)}emplace(p,_,S,z,O,V,Q,ie,he,Ee){const Me=10*p,Ge=5*p;return this.int16[Me+0]=_,this.int16[Me+1]=S,this.int16[Me+2]=z,this.int16[Me+3]=O,this.int16[Me+4]=V,this.int16[Me+5]=Q,this.uint32[Ge+3]=ie,this.uint16[Me+8]=he,this.uint16[Me+9]=Ee,p}}se.prototype.bytesPerElement=20,Dn("StructArrayLayout6i1ul2ui20",se);class ge extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=6*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.int16[ie+2]=z,this.int16[ie+3]=O,this.int16[ie+4]=V,this.int16[ie+5]=Q,p}}ge.prototype.bytesPerElement=12,Dn("StructArrayLayout2i2i2i12",ge);class Se extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O){const V=this.length;return this.resize(V+1),this.emplace(V,p,_,S,z,O)}emplace(p,_,S,z,O,V){const Q=4*p,ie=8*p;return this.float32[Q+0]=_,this.float32[Q+1]=S,this.float32[Q+2]=z,this.int16[ie+6]=O,this.int16[ie+7]=V,p}}Se.prototype.bytesPerElement=16,Dn("StructArrayLayout2f1f2i16",Se);class Ue extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=12*p,Q=3*p;return this.uint8[V+0]=_,this.uint8[V+1]=S,this.float32[Q+1]=z,this.float32[Q+2]=O,p}}Ue.prototype.bytesPerElement=12,Dn("StructArrayLayout2ub2f12",Ue);class Je extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.uint16[O+0]=_,this.uint16[O+1]=S,this.uint16[O+2]=z,p}}Je.prototype.bytesPerElement=6,Dn("StructArrayLayout3ui6",Je);class St extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr){const jr=this.length;return this.resize(jr+1),this.emplace(jr,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr,jr){const gr=24*p,Tr=12*p,an=48*p;return this.int16[gr+0]=_,this.int16[gr+1]=S,this.uint16[gr+2]=z,this.uint16[gr+3]=O,this.uint32[Tr+2]=V,this.uint32[Tr+3]=Q,this.uint32[Tr+4]=ie,this.uint16[gr+10]=he,this.uint16[gr+11]=Ee,this.uint16[gr+12]=Me,this.float32[Tr+7]=Ge,this.float32[Tr+8]=et,this.uint8[an+36]=rt,this.uint8[an+37]=Vt,this.uint8[an+38]=Ot,this.uint32[Tr+10]=xr,this.int16[gr+22]=jr,p}}St.prototype.bytesPerElement=48,Dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",St);class vt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr,jr,gr,Tr,an,rn,ri,fi,Wn,Un,Tn,Zn){const $n=this.length;return this.resize($n+1),this.emplace($n,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr,jr,gr,Tr,an,rn,ri,fi,Wn,Un,Tn,Zn)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt,Ot,xr,jr,gr,Tr,an,rn,ri,fi,Wn,Un,Tn,Zn,$n){const wn=34*p,Si=17*p;return this.int16[wn+0]=_,this.int16[wn+1]=S,this.int16[wn+2]=z,this.int16[wn+3]=O,this.int16[wn+4]=V,this.int16[wn+5]=Q,this.int16[wn+6]=ie,this.int16[wn+7]=he,this.uint16[wn+8]=Ee,this.uint16[wn+9]=Me,this.uint16[wn+10]=Ge,this.uint16[wn+11]=et,this.uint16[wn+12]=rt,this.uint16[wn+13]=Vt,this.uint16[wn+14]=Ot,this.uint16[wn+15]=xr,this.uint16[wn+16]=jr,this.uint16[wn+17]=gr,this.uint16[wn+18]=Tr,this.uint16[wn+19]=an,this.uint16[wn+20]=rn,this.uint16[wn+21]=ri,this.uint16[wn+22]=fi,this.uint32[Si+12]=Wn,this.float32[Si+13]=Un,this.float32[Si+14]=Tn,this.float32[Si+15]=Zn,this.float32[Si+16]=$n,p}}vt.prototype.bytesPerElement=68,Dn("StructArrayLayout8i15ui1ul4f68",vt);class xt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.float32[1*p+0]=_,p}}xt.prototype.bytesPerElement=4,Dn("StructArrayLayout1f4",xt);class tr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.int16[O+0]=_,this.int16[O+1]=S,this.int16[O+2]=z,p}}tr.prototype.bytesPerElement=6,Dn("StructArrayLayout3i6",tr);class cr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=4*p;return this.uint32[2*p+0]=_,this.uint16[O+2]=S,this.uint16[O+3]=z,p}}cr.prototype.bytesPerElement=8,Dn("StructArrayLayout1ul2ui8",cr);class Ar extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.uint16[z+0]=_,this.uint16[z+1]=S,p}}Ar.prototype.bytesPerElement=4,Dn("StructArrayLayout2ui4",Ar);class Dt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.uint16[1*p+0]=_,p}}Dt.prototype.bytesPerElement=2,Dn("StructArrayLayout1ui2",Dt);class Lr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=4*p;return this.float32[V+0]=_,this.float32[V+1]=S,this.float32[V+2]=z,this.float32[V+3]=O,p}}Lr.prototype.bytesPerElement=16,Dn("StructArrayLayout4f16",Lr);class Ir extends Dl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ht(this.anchorPointX,this.anchorPointY)}}Ir.prototype.size=20;class Zr extends se{get(p){return new Ir(this,p)}}Dn("CollisionBoxArray",Zr);class Gr extends Dl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(p){this._structArray.uint8[this._pos1+37]=p}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(p){this._structArray.uint8[this._pos1+38]=p}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(p){this._structArray.uint32[this._pos4+10]=p}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Gr.prototype.size=48;class mn extends St{get(p){return new Gr(this,p)}}Dn("PlacedSymbolArray",mn);class qr extends Dl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(p){this._structArray.uint32[this._pos4+12]=p}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qr.prototype.size=68;class zn extends vt{get(p){return new qr(this,p)}}Dn("SymbolInstanceArray",zn);class En extends xt{getoffsetX(p){return this.float32[1*p+0]}}Dn("GlyphOffsetArray",En);class Vn extends tr{getx(p){return this.int16[3*p+0]}gety(p){return this.int16[3*p+1]}gettileUnitDistanceFromAnchor(p){return this.int16[3*p+2]}}Dn("SymbolLineVertexArray",Vn);class Ti extends Dl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ti.prototype.size=8;class Di extends cr{get(p){return new Ti(this,p)}}Dn("FeatureIndexArray",Di);class N extends as{}class $ extends as{}class re extends as{}class fe extends d{}class Le extends k{}class Be extends I{}class qe extends D{}class Ke extends q{}class it extends J{}class _t extends oe{}class rr extends ge{}class Er extends Ue{}class kr extends Je{}class hr extends Ar{}const fn=xa([{name:"a_pos",components:2,type:"Int16"}],4),{members:zr}=fn;class zt{constructor(p=[]){this.segments=p}prepareSegment(p,_,S,z){let O=this.segments[this.segments.length-1];return p>zt.MAX_VERTEX_ARRAY_LENGTH&&le(`Max vertices per segment is ${zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${p}`),(!O||O.vertexLength+p>zt.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==z)&&(O={vertexOffset:_.length,primitiveOffset:S.length,vertexLength:0,primitiveLength:0},z!==void 0&&(O.sortKey=z),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const p of this.segments)for(const _ in p.vaos)p.vaos[_].destroy()}static simpleSegment(p,_,S,z){return new zt([{vertexOffset:p,primitiveOffset:_,vertexLength:S,primitiveLength:z,vaos:{},sortKey:0}])}}function Xt(y,p){return 256*(y=L(Math.floor(y),0,255))+L(Math.floor(p),0,255)}zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dn("SegmentVector",zt);const Hr=xa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var en={exports:{}},Wr={exports:{}};Wr.exports=function(y,p){var _,S,z,O,V,Q,ie,he;for(S=y.length-(_=3&y.length),z=p,V=3432918353,Q=461845907,he=0;he<S;)ie=255&y.charCodeAt(he)|(255&y.charCodeAt(++he))<<8|(255&y.charCodeAt(++he))<<16|(255&y.charCodeAt(++he))<<24,++he,z=27492+(65535&(O=5*(65535&(z=(z^=ie=(65535&(ie=(ie=(65535&ie)*V+(((ie>>>16)*V&65535)<<16)&4294967295)<<15|ie>>>17))*Q+(((ie>>>16)*Q&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(ie=0,_){case 3:ie^=(255&y.charCodeAt(he+2))<<16;case 2:ie^=(255&y.charCodeAt(he+1))<<8;case 1:z^=ie=(65535&(ie=(ie=(65535&(ie^=255&y.charCodeAt(he)))*V+(((ie>>>16)*V&65535)<<16)&4294967295)<<15|ie>>>17))*Q+(((ie>>>16)*Q&65535)<<16)&4294967295}return z^=y.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0};var On={exports:{}};On.exports=function(y,p){for(var _,S=y.length,z=p^S,O=0;S>=4;)_=1540483477*(65535&(_=255&y.charCodeAt(O)|(255&y.charCodeAt(++O))<<8|(255&y.charCodeAt(++O))<<16|(255&y.charCodeAt(++O))<<24))+((1540483477*(_>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++O;switch(S){case 3:z^=(255&y.charCodeAt(O+2))<<16;case 2:z^=(255&y.charCodeAt(O+1))<<8;case 1:z=1540483477*(65535&(z^=255&y.charCodeAt(O)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0};var In=Wr.exports,Ci=On.exports;en.exports=In,en.exports.murmur3=In,en.exports.murmur2=Ci;class Fn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(p,_,S,z){this.ids.push(Co(p)),this.positions.push(_,S,z)}getPositions(p){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const _=Co(p);let S=0,z=this.ids.length-1;for(;S<z;){const V=S+z>>1;this.ids[V]>=_?z=V:S=V+1}const O=[];for(;this.ids[S]===_;)O.push({index:this.positions[3*S],start:this.positions[3*S+1],end:this.positions[3*S+2]}),S++;return O}static serialize(p,_){const S=new Float64Array(p.ids),z=new Uint32Array(p.positions);return Po(S,z,0,S.length-1),_&&_.push(S.buffer,z.buffer),{ids:S,positions:z}}static deserialize(p){const _=new Fn;return _.ids=p.ids,_.positions=p.positions,_.indexed=!0,_}}function Co(y){const p=+y;return!isNaN(p)&&p<=Number.MAX_SAFE_INTEGER?p:en.exports(String(y))}function Po(y,p,_,S){for(;_<S;){const z=y[_+S>>1];let O=_-1,V=S+1;for(;;){do O++;while(y[O]<z);do V--;while(y[V]>z);if(O>=V)break;ao(y,O,V),ao(p,3*O,3*V),ao(p,3*O+1,3*V+1),ao(p,3*O+2,3*V+2)}V-_<S-V?(Po(y,p,_,V),_=V+1):(Po(y,p,V+1,S),S=V)}}function ao(y,p,_){const S=y[p];y[p]=y[_],y[_]=S}Dn("FeaturePositionMap",Fn);class Gi{constructor(p,_){this.gl=p.gl,this.location=_}}class Eo extends Gi{constructor(p,_){super(p,_),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class Mo extends Gi{constructor(p,_){super(p,_),this.current=[0,0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3]))}}class Qi extends Gi{constructor(p,_){super(p,_),this.current=lt.transparent}set(p){p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a))}}const Fa=new Float32Array(16);function Fi(y){return[Xt(255*y.r,255*y.g),Xt(255*y.b,255*y.a)]}class pa{constructor(p,_,S){this.value=p,this.uniformNames=_.map(z=>`u_${z}`),this.type=S}setUniform(p,_,S){p.set(S.constantOr(this.value))}getBinding(p,_,S){return this.type==="color"?new Qi(p,_):new Eo(p,_)}}class Ha{constructor(p,_){this.uniformNames=_.map(S=>`u_${S}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(p,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=p.pixelRatio,this.patternFrom=_.tlbr,this.patternTo=p.tlbr}setUniform(p,_,S,z){const O=z==="u_pattern_to"?this.patternTo:z==="u_pattern_from"?this.patternFrom:z==="u_pixel_ratio_to"?this.pixelRatioTo:z==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&p.set(O)}getBinding(p,_,S){return S.substr(0,9)==="u_pattern"?new Mo(p,_):new Eo(p,_)}}class vo{constructor(p,_,S,z){this.expression=p,this.type=S,this.maxValue=0,this.paintVertexAttributes=_.map(O=>({name:`a_${O}`,type:"Float32",components:S==="color"?2:1,offset:0})),this.paintVertexArray=new z}populatePaintArray(p,_,S,z,O){const V=this.paintVertexArray.length,Q=this.expression.evaluate(new Ho(0),_,{},z,[],O);this.paintVertexArray.resize(p),this._setPaintValue(V,p,Q)}updatePaintArray(p,_,S,z){const O=this.expression.evaluate({zoom:0},S,z);this._setPaintValue(p,_,O)}_setPaintValue(p,_,S){if(this.type==="color"){const z=Fi(S);for(let O=p;O<_;O++)this.paintVertexArray.emplace(O,z[0],z[1])}else{for(let z=p;z<_;z++)this.paintVertexArray.emplace(z,S);this.maxValue=Math.max(this.maxValue,Math.abs(S))}}upload(p){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=p.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ya{constructor(p,_,S,z,O,V){this.expression=p,this.uniformNames=_.map(Q=>`u_${Q}_t`),this.type=S,this.useIntegerZoom=z,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=_.map(Q=>({name:`a_${Q}`,type:"Float32",components:S==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(p,_,S,z,O){const V=this.expression.evaluate(new Ho(this.zoom),_,{},z,[],O),Q=this.expression.evaluate(new Ho(this.zoom+1),_,{},z,[],O),ie=this.paintVertexArray.length;this.paintVertexArray.resize(p),this._setPaintValue(ie,p,V,Q)}updatePaintArray(p,_,S,z){const O=this.expression.evaluate({zoom:this.zoom},S,z),V=this.expression.evaluate({zoom:this.zoom+1},S,z);this._setPaintValue(p,_,O,V)}_setPaintValue(p,_,S,z){if(this.type==="color"){const O=Fi(S),V=Fi(z);for(let Q=p;Q<_;Q++)this.paintVertexArray.emplace(Q,O[0],O[1],V[0],V[1])}else{for(let O=p;O<_;O++)this.paintVertexArray.emplace(O,S,z);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(z))}}upload(p){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=p.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(p,_){const S=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,z=L(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);p.set(z)}getBinding(p,_,S){return new Eo(p,_)}}class Ba{constructor(p,_,S,z,O,V){this.expression=p,this.type=_,this.useIntegerZoom=S,this.zoom=z,this.layerId=V,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(p,_,S){const z=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(p),this.zoomOutPaintVertexArray.resize(p),this._setPaintValues(z,p,_.patterns&&_.patterns[this.layerId],S)}updatePaintArray(p,_,S,z,O){this._setPaintValues(p,_,S.patterns&&S.patterns[this.layerId],O)}_setPaintValues(p,_,S,z){if(!z||!S)return;const{min:O,mid:V,max:Q}=S,ie=z[O],he=z[V],Ee=z[Q];if(ie&&he&&Ee)for(let Me=p;Me<_;Me++)this.zoomInPaintVertexArray.emplace(Me,he.tl[0],he.tl[1],he.br[0],he.br[1],ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],he.pixelRatio,ie.pixelRatio),this.zoomOutPaintVertexArray.emplace(Me,he.tl[0],he.tl[1],he.br[0],he.br[1],Ee.tl[0],Ee.tl[1],Ee.br[0],Ee.br[1],he.pixelRatio,Ee.pixelRatio)}upload(p){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=p.createVertexBuffer(this.zoomInPaintVertexArray,Hr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=p.createVertexBuffer(this.zoomOutPaintVertexArray,Hr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Wa{constructor(p,_,S){this.binders={},this._buffers=[];const z=[];for(const O in p.paint._values){if(!S(O))continue;const V=p.paint.get(O);if(!(V instanceof ll&&To(V.property.specification)))continue;const Q=ss(O,p.type),ie=V.value,he=V.property.specification.type,Ee=V.property.useIntegerZoom,Me=V.property.specification["property-type"],Ge=Me==="cross-faded"||Me==="cross-faded-data-driven";if(ie.kind==="constant")this.binders[O]=Ge?new Ha(ie.value,Q):new pa(ie.value,Q,he),z.push(`/u_${O}`);else if(ie.kind==="source"||Ge){const et=Bs(O,he,"source");this.binders[O]=Ge?new Ba(ie,he,Ee,_,et,p.id):new vo(ie,Q,he,et),z.push(`/a_${O}`)}else{const et=Bs(O,he,"composite");this.binders[O]=new ya(ie,Q,he,Ee,_,et),z.push(`/z_${O}`)}}this.cacheKey=z.sort().join("")}getMaxValue(p){const _=this.binders[p];return _ instanceof vo||_ instanceof ya?_.maxValue:0}populatePaintArrays(p,_,S,z,O){for(const V in this.binders){const Q=this.binders[V];(Q instanceof vo||Q instanceof ya||Q instanceof Ba)&&Q.populatePaintArray(p,_,S,z,O)}}setConstantPatternPositions(p,_){for(const S in this.binders){const z=this.binders[S];z instanceof Ha&&z.setConstantPatternPositions(p,_)}}updatePaintArrays(p,_,S,z,O){let V=!1;for(const Q in p){const ie=_.getPositions(Q);for(const he of ie){const Ee=S.feature(he.index);for(const Me in this.binders){const Ge=this.binders[Me];if((Ge instanceof vo||Ge instanceof ya||Ge instanceof Ba)&&Ge.expression.isStateDependent===!0){const et=z.paint.get(Me);Ge.expression=et.value,Ge.updatePaintArray(he.start,he.end,Ee,p[Q],O),V=!0}}}}return V}defines(){const p=[];for(const _ in this.binders){const S=this.binders[_];(S instanceof pa||S instanceof Ha)&&p.push(...S.uniformNames.map(z=>`#define HAS_UNIFORM_${z}`))}return p}getBinderAttributes(){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof vo||S instanceof ya)for(let z=0;z<S.paintVertexAttributes.length;z++)p.push(S.paintVertexAttributes[z].name);else if(S instanceof Ba)for(let z=0;z<Hr.members.length;z++)p.push(Hr.members[z].name)}return p}getBinderUniforms(){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof pa||S instanceof Ha||S instanceof ya)for(const z of S.uniformNames)p.push(z)}return p}getPaintVertexBuffers(){return this._buffers}getUniforms(p,_){const S=[];for(const z in this.binders){const O=this.binders[z];if(O instanceof pa||O instanceof Ha||O instanceof ya){for(const V of O.uniformNames)if(_[V]){const Q=O.getBinding(p,_[V],V);S.push({name:V,property:z,binding:Q})}}}return S}setUniforms(p,_,S,z){for(const{name:O,property:V,binding:Q}of _)this.binders[V].setUniform(Q,z,S.get(V),O)}updatePaintBuffers(p){this._buffers=[];for(const _ in this.binders){const S=this.binders[_];if(p&&S instanceof Ba){const z=p.fromScale===2?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer;z&&this._buffers.push(z)}else(S instanceof vo||S instanceof ya)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}}upload(p){for(const _ in this.binders){const S=this.binders[_];(S instanceof vo||S instanceof ya||S instanceof Ba)&&S.upload(p)}this.updatePaintBuffers()}destroy(){for(const p in this.binders){const _=this.binders[p];(_ instanceof vo||_ instanceof ya||_ instanceof Ba)&&_.destroy()}}}class Wo{constructor(p,_,S=()=>!0){this.programConfigurations={};for(const z of p)this.programConfigurations[z.id]=new Wa(z,_,S);this.needsUpload=!1,this._featureMap=new Fn,this._bufferOffset=0}populatePaintArrays(p,_,S,z,O,V){for(const Q in this.programConfigurations)this.programConfigurations[Q].populatePaintArrays(p,_,z,O,V);_.id!==void 0&&this._featureMap.add(_.id,S,this._bufferOffset,p),this._bufferOffset=p,this.needsUpload=!0}updatePaintArrays(p,_,S,z){for(const O of S)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(p,this._featureMap,_,O,z)||this.needsUpload}get(p){return this.programConfigurations[p]}upload(p){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(p);this.needsUpload=!1}}destroy(){for(const p in this.programConfigurations)this.programConfigurations[p].destroy()}}function ss(y,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[y]||[y.replace(`${p}-`,"").replace(/-/g,"_")]}function Bs(y,p,_){const S={color:{source:I,composite:Lr},number:{source:xt,composite:I}},z=function(O){return{"line-pattern":{source:qe,composite:qe},"fill-pattern":{source:qe,composite:qe},"fill-extrusion-pattern":{source:qe,composite:qe}}[O]}(y);return z&&z[_]||S[p][_]}Dn("ConstantBinder",pa),Dn("CrossFadedConstantBinder",Ha),Dn("SourceExpressionBinder",vo),Dn("CrossFadedCompositeBinder",Ba),Dn("CompositeExpressionBinder",ya),Dn("ProgramConfiguration",Wa,{omit:["_buffers"]}),Dn("ProgramConfigurationSet",Wo);var $o=8192;const Ia=Math.pow(2,14)-1,nu=-Ia-1;function js(y){const p=$o/y.extent,_=y.loadGeometry();for(let S=0;S<_.length;S++){const z=_[S];for(let O=0;O<z.length;O++){const V=z[O],Q=Math.round(V.x*p),ie=Math.round(V.y*p);V.x=L(Q,nu,Ia),V.y=L(ie,nu,Ia),(Q<V.x||Q>V.x+1||ie<V.y||ie>V.y+1)&&le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function Ks(y,p){return{type:y.type,id:y.id,properties:y.properties,geometry:p?js(y):[]}}function Qs(y,p,_,S,z){y.emplaceBack(2*p+(S+1)/2,2*_+(z+1)/2)}class da{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new $,this.indexArray=new kr,this.segments=new zt,this.programConfigurations=new Wo(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){const z=this.layers[0],O=[];let V=null,Q=!1;z.type==="circle"&&(V=z.layout.get("circle-sort-key"),Q=!V.isConstant());for(const{feature:ie,id:he,index:Ee,sourceLayerIndex:Me}of p){const Ge=this.layers[0]._featureFilter.needGeometry,et=Ks(ie,Ge);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),et,S))continue;const rt=Q?V.evaluate(et,{},S):void 0,Vt={id:he,properties:ie.properties,type:ie.type,sourceLayerIndex:Me,index:Ee,geometry:Ge?et.geometry:js(ie),patterns:{},sortKey:rt};O.push(Vt)}Q&&O.sort((ie,he)=>ie.sortKey-he.sortKey);for(const ie of O){const{geometry:he,index:Ee,sourceLayerIndex:Me}=ie,Ge=p[Ee].feature;this.addFeature(ie,he,Ee,S),_.featureIndex.insert(Ge,he,Ee,Me,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,zr),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(p,_,S,z){for(const O of _)for(const V of O){const Q=V.x,ie=V.y;if(Q<0||Q>=$o||ie<0||ie>=$o)continue;const he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,p.sortKey),Ee=he.vertexLength;Qs(this.layoutVertexArray,Q,ie,-1,-1),Qs(this.layoutVertexArray,Q,ie,1,-1),Qs(this.layoutVertexArray,Q,ie,1,1),Qs(this.layoutVertexArray,Q,ie,-1,1),this.indexArray.emplaceBack(Ee,Ee+1,Ee+2),this.indexArray.emplaceBack(Ee,Ee+3,Ee+2),he.vertexLength+=4,he.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,{},z)}}function k0(y,p){for(let _=0;_<y.length;_++)if(Qu(p,y[_]))return!0;for(let _=0;_<p.length;_++)if(Qu(y,p[_]))return!0;return!!yc(y,p)}function H0(y,p,_){return!!Qu(y,p)||!!Us(p,y,_)}function zl(y,p){if(y.length===1)return iu(p,y[0]);for(let _=0;_<p.length;_++){const S=p[_];for(let z=0;z<S.length;z++)if(Qu(y,S[z]))return!0}for(let _=0;_<y.length;_++)if(iu(p,y[_]))return!0;for(let _=0;_<p.length;_++)if(yc(y,p[_]))return!0;return!1}function fa(y,p,_){if(y.length>1){if(yc(y,p))return!0;for(let S=0;S<p.length;S++)if(Us(p[S],y,_))return!0}for(let S=0;S<y.length;S++)if(Us(y[S],p,_))return!0;return!1}function yc(y,p){if(y.length===0||p.length===0)return!1;for(let _=0;_<y.length-1;_++){const S=y[_],z=y[_+1];for(let O=0;O<p.length-1;O++)if(A0(S,z,p[O],p[O+1]))return!0}return!1}function A0(y,p,_,S){return ce(y,_,S)!==ce(p,_,S)&&ce(y,p,_)!==ce(y,p,S)}function Us(y,p,_){const S=_*_;if(p.length===1)return y.distSqr(p[0])<S;for(let z=1;z<p.length;z++)if(qs(y,p[z-1],p[z])<S)return!0;return!1}function qs(y,p,_){const S=p.distSqr(_);if(S===0)return y.distSqr(p);const z=((y.x-p.x)*(_.x-p.x)+(y.y-p.y)*(_.y-p.y))/S;return y.distSqr(z<0?p:z>1?_:_.sub(p)._mult(z)._add(p))}function iu(y,p){let _,S,z,O=!1;for(let V=0;V<y.length;V++){_=y[V];for(let Q=0,ie=_.length-1;Q<_.length;ie=Q++)S=_[Q],z=_[ie],S.y>p.y!=z.y>p.y&&p.x<(z.x-S.x)*(p.y-S.y)/(z.y-S.y)+S.x&&(O=!O)}return O}function Qu(y,p){let _=!1;for(let S=0,z=y.length-1;S<y.length;z=S++){const O=y[S],V=y[z];O.y>p.y!=V.y>p.y&&p.x<(V.x-O.x)*(p.y-O.y)/(V.y-O.y)+O.x&&(_=!_)}return _}function E0(y,p,_){const S=_[0],z=_[2];if(y.x<S.x&&p.x<S.x||y.x>z.x&&p.x>z.x||y.y<S.y&&p.y<S.y||y.y>z.y&&p.y>z.y)return!1;const O=ce(y,p,_[0]);return O!==ce(y,p,_[1])||O!==ce(y,p,_[2])||O!==ce(y,p,_[3])}function vc(y,p,_){const S=p.paint.get(y).value;return S.kind==="constant"?S.value:_.programConfigurations.get(p.id).getMaxValue(y)}function _c(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function bc(y,p,_,S,z){if(!p[0]&&!p[1])return y;const O=ht.convert(p)._mult(z);_==="viewport"&&O._rotate(-S);const V=[];for(let Q=0;Q<y.length;Q++)V.push(y[Q].sub(O));return V}Dn("CircleBucket",da,{omit:["layers"]});const wc=new jo({"circle-sort-key":new vi(yr.layout_circle["circle-sort-key"])});var Bc={paint:new jo({"circle-radius":new vi(yr.paint_circle["circle-radius"]),"circle-color":new vi(yr.paint_circle["circle-color"]),"circle-blur":new vi(yr.paint_circle["circle-blur"]),"circle-opacity":new vi(yr.paint_circle["circle-opacity"]),"circle-translate":new oi(yr.paint_circle["circle-translate"]),"circle-translate-anchor":new oi(yr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oi(yr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oi(yr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vi(yr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vi(yr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vi(yr.paint_circle["circle-stroke-opacity"])}),layout:wc},hs=1e-6,Ja=typeof Float32Array<"u"?Float32Array:Array;function La(){var y=new Ja(9);return Ja!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function ou(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function n0(y,p,_){var S=p[0],z=p[1],O=p[2],V=p[3],Q=p[4],ie=p[5],he=p[6],Ee=p[7],Me=p[8],Ge=p[9],et=p[10],rt=p[11],Vt=p[12],Ot=p[13],xr=p[14],jr=p[15],gr=_[0],Tr=_[1],an=_[2],rn=_[3];return y[0]=gr*S+Tr*Q+an*Me+rn*Vt,y[1]=gr*z+Tr*ie+an*Ge+rn*Ot,y[2]=gr*O+Tr*he+an*et+rn*xr,y[3]=gr*V+Tr*Ee+an*rt+rn*jr,y[4]=(gr=_[4])*S+(Tr=_[5])*Q+(an=_[6])*Me+(rn=_[7])*Vt,y[5]=gr*z+Tr*ie+an*Ge+rn*Ot,y[6]=gr*O+Tr*he+an*et+rn*xr,y[7]=gr*V+Tr*Ee+an*rt+rn*jr,y[8]=(gr=_[8])*S+(Tr=_[9])*Q+(an=_[10])*Me+(rn=_[11])*Vt,y[9]=gr*z+Tr*ie+an*Ge+rn*Ot,y[10]=gr*O+Tr*he+an*et+rn*xr,y[11]=gr*V+Tr*Ee+an*rt+rn*jr,y[12]=(gr=_[12])*S+(Tr=_[13])*Q+(an=_[14])*Me+(rn=_[15])*Vt,y[13]=gr*z+Tr*ie+an*Ge+rn*Ot,y[14]=gr*O+Tr*he+an*et+rn*xr,y[15]=gr*V+Tr*Ee+an*rt+rn*jr,y}Math.hypot||(Math.hypot=function(){for(var y=0,p=arguments.length;p--;)y+=arguments[p]*arguments[p];return Math.sqrt(y)});var ul,W0=n0;function S0(){var y=new Ja(3);return Ja!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function i0(y,p,_){var S=new Ja(3);return S[0]=y,S[1]=p,S[2]=_,S}function va(y,p,_){var S=p[0],z=p[1],O=p[2],V=p[3];return y[0]=_[0]*S+_[4]*z+_[8]*O+_[12]*V,y[1]=_[1]*S+_[5]*z+_[9]*O+_[13]*V,y[2]=_[2]*S+_[6]*z+_[10]*O+_[14]*V,y[3]=_[3]*S+_[7]*z+_[11]*O+_[15]*V,y}function Z0(){var y=new Ja(4);return Ja!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y[3]=1,y}function ue(y,p){const _=va([],[y.x,y.y,0,1],p);return new ht(_[0]/_[3],_[1]/_[3])}S0(),ul=new Ja(4),Ja!=Float32Array&&(ul[0]=0,ul[1]=0,ul[2]=0,ul[3]=0),S0(),i0(1,0,0),i0(0,1,0),Z0(),Z0(),La(),function(){var y;y=new Ja(2),Ja!=Float32Array&&(y[0]=0,y[1]=0)}();class xe extends da{}Dn("HeatmapBucket",xe,{omit:["layers"]});var $e={paint:new jo({"heatmap-radius":new vi(yr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vi(yr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oi(yr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(yr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oi(yr.paint_heatmap["heatmap-opacity"])})};function kt(y,{width:p,height:_},S,z){if(z){if(z instanceof Uint8ClampedArray)z=new Uint8Array(z.buffer);else if(z.length!==p*_*S)throw new RangeError(`mismatched image size. expected: ${z.length} but got: ${p*_*S}`)}else z=new Uint8Array(p*_*S);return y.width=p,y.height=_,y.data=z,y}function nr(y,{width:p,height:_},S){if(p===y.width&&_===y.height)return;const z=kt({},{width:p,height:_},S);sr(y,z,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,p),height:Math.min(y.height,_)},S),y.width=p,y.height=_,y.data=z.data}function sr(y,p,_,S,z,O){if(z.width===0||z.height===0)return p;if(z.width>y.width||z.height>y.height||_.x>y.width-z.width||_.y>y.height-z.height)throw new RangeError("out of range source coordinates for image copy");if(z.width>p.width||z.height>p.height||S.x>p.width-z.width||S.y>p.height-z.height)throw new RangeError("out of range destination coordinates for image copy");const V=y.data,Q=p.data;if(V===Q)throw new Error("srcData equals dstData, so image is already copied");for(let ie=0;ie<z.height;ie++){const he=((_.y+ie)*y.width+_.x)*O,Ee=((S.y+ie)*p.width+S.x)*O;for(let Me=0;Me<z.width*O;Me++)Q[Ee+Me]=V[he+Me]}return p}class Zt{constructor(p,_){kt(this,p,1,_)}resize(p){nr(this,p,1)}clone(){return new Zt({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(p,_,S,z,O){sr(p,_,S,z,O,1)}}class _r{constructor(p,_){kt(this,p,4,_)}resize(p){nr(this,p,4)}replace(p,_){_?this.data.set(p):this.data=p instanceof Uint8ClampedArray?new Uint8Array(p.buffer):p}clone(){return new _r({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(p,_,S,z,O){sr(p,_,S,z,O,4)}}function Cr(y){const p={},_=y.resolution||256,S=y.clips?y.clips.length:1,z=y.image||new _r({width:_,height:S});if(Math.log(_)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${_}`);const O=(V,Q,ie)=>{p[y.evaluationKey]=ie;const he=y.expression.evaluate(p);z.data[V+Q+0]=Math.floor(255*he.r/he.a),z.data[V+Q+1]=Math.floor(255*he.g/he.a),z.data[V+Q+2]=Math.floor(255*he.b/he.a),z.data[V+Q+3]=Math.floor(255*he.a)};if(y.clips)for(let V=0,Q=0;V<S;++V,Q+=4*_)for(let ie=0,he=0;ie<_;ie++,he+=4){const Ee=ie/(_-1),{start:Me,end:Ge}=y.clips[V];O(Q,he,Me*(1-Ee)+Ge*Ee)}else for(let V=0,Q=0;V<_;V++,Q+=4)O(0,Q,V/(_-1));return z}Dn("AlphaImage",Zt),Dn("RGBAImage",_r);var on={paint:new jo({"hillshade-illumination-direction":new oi(yr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oi(yr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oi(yr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oi(yr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oi(yr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oi(yr.paint_hillshade["hillshade-accent-color"])})};const yn=xa([{name:"a_pos",components:2,type:"Int16"}],4),{members:ei}=yn;var _n={exports:{}};function ti(y,p,_){_=_||2;var S,z,O,V,Q,ie,he,Ee=p&&p.length,Me=Ee?p[0]*_:y.length,Ge=ui(y,0,Me,_,!0),et=[];if(!Ge||Ge.next===Ge.prev)return et;if(Ee&&(Ge=function(Vt,Ot,xr,jr){var gr,Tr,an,rn=[];for(gr=0,Tr=Ot.length;gr<Tr;gr++)(an=ui(Vt,Ot[gr]*jr,gr<Tr-1?Ot[gr+1]*jr:Vt.length,jr,!1))===an.next&&(an.steiner=!0),rn.push(lo(an));for(rn.sort(ta),gr=0;gr<rn.length;gr++)xr=eo(rn[gr],xr);return xr}(y,p,Ge,_)),y.length>80*_){S=O=y[0],z=V=y[1];for(var rt=_;rt<Me;rt+=_)(Q=y[rt])<S&&(S=Q),(ie=y[rt+1])<z&&(z=ie),Q>O&&(O=Q),ie>V&&(V=ie);he=(he=Math.max(O-S,V-z))!==0?32767/he:0}return so(Ge,et,_,S,z,he,0),et}function ui(y,p,_,S,z){var O,V;if(z===Nl(y,p,_,S)>0)for(O=p;O<_;O+=S)V=kc(O,y[O],y[O+1],V);else for(O=_-S;O>=p;O-=S)V=kc(O,y[O],y[O+1],V);return V&&uo(V,V.next)&&(ec(V),V=V.next),V}function Hi(y,p){if(!y)return y;p||(p=y);var _,S=y;do if(_=!1,S.steiner||!uo(S,S.next)&&Pi(S.prev,S,S.next)!==0)S=S.next;else{if(ec(S),(S=p=S.prev)===S.next)break;_=!0}while(_||S!==p);return p}function so(y,p,_,S,z,O,V){if(y){!V&&O&&function(Ee,Me,Ge,et){var rt=Ee;do rt.z===0&&(rt.z=bi(rt.x,rt.y,Me,Ge,et)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==Ee);rt.prevZ.nextZ=null,rt.prevZ=null,function(Vt){var Ot,xr,jr,gr,Tr,an,rn,ri,fi=1;do{for(xr=Vt,Vt=null,Tr=null,an=0;xr;){for(an++,jr=xr,rn=0,Ot=0;Ot<fi&&(rn++,jr=jr.nextZ);Ot++);for(ri=fi;rn>0||ri>0&&jr;)rn!==0&&(ri===0||!jr||xr.z<=jr.z)?(gr=xr,xr=xr.nextZ,rn--):(gr=jr,jr=jr.nextZ,ri--),Tr?Tr.nextZ=gr:Vt=gr,gr.prevZ=Tr,Tr=gr;xr=jr}Tr.nextZ=null,fi*=2}while(an>1)}(rt)}(y,S,z,O);for(var Q,ie,he=y;y.prev!==y.next;)if(Q=y.prev,ie=y.next,O?Uo(y,S,z,O):_o(y))p.push(Q.i/_|0),p.push(y.i/_|0),p.push(ie.i/_|0),ec(y),y=ie.next,he=ie.next;else if((y=ie)===he){V?V===1?so(y=Ta(Hi(y),p,_),p,_,S,z,O,2):V===2&&ja(y,p,_,S,z,O):so(Hi(y),p,_,S,z,O,1);break}}}function _o(y){var p=y.prev,_=y,S=y.next;if(Pi(p,_,S)>=0)return!1;for(var z=p.x,O=_.x,V=S.x,Q=p.y,ie=_.y,he=S.y,Ee=z<O?z<V?z:V:O<V?O:V,Me=Q<ie?Q<he?Q:he:ie<he?ie:he,Ge=z>O?z>V?z:V:O>V?O:V,et=Q>ie?Q>he?Q:he:ie>he?ie:he,rt=S.next;rt!==p;){if(rt.x>=Ee&&rt.x<=Ge&&rt.y>=Me&&rt.y<=et&&Wi(z,Q,O,ie,V,he,rt.x,rt.y)&&Pi(rt.prev,rt,rt.next)>=0)return!1;rt=rt.next}return!0}function Uo(y,p,_,S){var z=y.prev,O=y,V=y.next;if(Pi(z,O,V)>=0)return!1;for(var Q=z.x,ie=O.x,he=V.x,Ee=z.y,Me=O.y,Ge=V.y,et=Q<ie?Q<he?Q:he:ie<he?ie:he,rt=Ee<Me?Ee<Ge?Ee:Ge:Me<Ge?Me:Ge,Vt=Q>ie?Q>he?Q:he:ie>he?ie:he,Ot=Ee>Me?Ee>Ge?Ee:Ge:Me>Ge?Me:Ge,xr=bi(et,rt,p,_,S),jr=bi(Vt,Ot,p,_,S),gr=y.prevZ,Tr=y.nextZ;gr&&gr.z>=xr&&Tr&&Tr.z<=jr;){if(gr.x>=et&&gr.x<=Vt&&gr.y>=rt&&gr.y<=Ot&&gr!==z&&gr!==V&&Wi(Q,Ee,ie,Me,he,Ge,gr.x,gr.y)&&Pi(gr.prev,gr,gr.next)>=0||(gr=gr.prevZ,Tr.x>=et&&Tr.x<=Vt&&Tr.y>=rt&&Tr.y<=Ot&&Tr!==z&&Tr!==V&&Wi(Q,Ee,ie,Me,he,Ge,Tr.x,Tr.y)&&Pi(Tr.prev,Tr,Tr.next)>=0))return!1;Tr=Tr.nextZ}for(;gr&&gr.z>=xr;){if(gr.x>=et&&gr.x<=Vt&&gr.y>=rt&&gr.y<=Ot&&gr!==z&&gr!==V&&Wi(Q,Ee,ie,Me,he,Ge,gr.x,gr.y)&&Pi(gr.prev,gr,gr.next)>=0)return!1;gr=gr.prevZ}for(;Tr&&Tr.z<=jr;){if(Tr.x>=et&&Tr.x<=Vt&&Tr.y>=rt&&Tr.y<=Ot&&Tr!==z&&Tr!==V&&Wi(Q,Ee,ie,Me,he,Ge,Tr.x,Tr.y)&&Pi(Tr.prev,Tr,Tr.next)>=0)return!1;Tr=Tr.nextZ}return!0}function Ta(y,p,_){var S=y;do{var z=S.prev,O=S.next.next;!uo(z,O)&&Do(z,S,S.next,O)&&Vs(z,O)&&Vs(O,z)&&(p.push(z.i/_|0),p.push(S.i/_|0),p.push(O.i/_|0),ec(S),ec(S.next),S=y=O),S=S.next}while(S!==y);return Hi(S)}function ja(y,p,_,S,z,O){var V=y;do{for(var Q=V.next.next;Q!==V.prev;){if(V.i!==Q.i&&Ka(V,Q)){var ie=xc(V,Q);return V=Hi(V,V.next),ie=Hi(ie,ie.next),so(V,p,_,S,z,O,0),void so(ie,p,_,S,z,O,0)}Q=Q.next}V=V.next}while(V!==y)}function ta(y,p){return y.x-p.x}function eo(y,p){var _=function(z,O){var V,Q=O,ie=z.x,he=z.y,Ee=-1/0;do{if(he<=Q.y&&he>=Q.next.y&&Q.next.y!==Q.y){var Me=Q.x+(he-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(Me<=ie&&Me>Ee&&(Ee=Me,V=Q.x<Q.next.x?Q:Q.next,Me===ie))return V}Q=Q.next}while(Q!==O);if(!V)return null;var Ge,et=V,rt=V.x,Vt=V.y,Ot=1/0;Q=V;do ie>=Q.x&&Q.x>=rt&&ie!==Q.x&&Wi(he<Vt?ie:Ee,he,rt,Vt,he<Vt?Ee:ie,he,Q.x,Q.y)&&(Ge=Math.abs(he-Q.y)/(ie-Q.x),Vs(Q,z)&&(Ge<Ot||Ge===Ot&&(Q.x>V.x||Q.x===V.x&&bn(V,Q)))&&(V=Q,Ot=Ge)),Q=Q.next;while(Q!==et);return V}(y,p);if(!_)return p;var S=xc(_,y);return Hi(S,S.next),Hi(_,_.next)}function bn(y,p){return Pi(y.prev,y,p.prev)<0&&Pi(p.next,y,y.next)<0}function bi(y,p,_,S,z){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-_)*z|0)|y<<8))|y<<4))|y<<2))|y<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-S)*z|0)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function lo(y){var p=y,_=y;do(p.x<_.x||p.x===_.x&&p.y<_.y)&&(_=p),p=p.next;while(p!==y);return _}function Wi(y,p,_,S,z,O,V,Q){return(z-V)*(p-Q)>=(y-V)*(O-Q)&&(y-V)*(S-Q)>=(_-V)*(p-Q)&&(_-V)*(O-Q)>=(z-V)*(S-Q)}function Ka(y,p){return y.next.i!==p.i&&y.prev.i!==p.i&&!function(_,S){var z=_;do{if(z.i!==_.i&&z.next.i!==_.i&&z.i!==S.i&&z.next.i!==S.i&&Do(z,z.next,_,S))return!0;z=z.next}while(z!==_);return!1}(y,p)&&(Vs(y,p)&&Vs(p,y)&&function(_,S){var z=_,O=!1,V=(_.x+S.x)/2,Q=(_.y+S.y)/2;do z.y>Q!=z.next.y>Q&&z.next.y!==z.y&&V<(z.next.x-z.x)*(Q-z.y)/(z.next.y-z.y)+z.x&&(O=!O),z=z.next;while(z!==_);return O}(y,p)&&(Pi(y.prev,y,p.prev)||Pi(y,p.prev,p))||uo(y,p)&&Pi(y.prev,y,y.next)>0&&Pi(p.prev,p,p.next)>0)}function Pi(y,p,_){return(p.y-y.y)*(_.x-p.x)-(p.x-y.x)*(_.y-p.y)}function uo(y,p){return y.x===p.x&&y.y===p.y}function Do(y,p,_,S){var z=Go(Pi(y,p,_)),O=Go(Pi(y,p,S)),V=Go(Pi(_,S,y)),Q=Go(Pi(_,S,p));return z!==O&&V!==Q||!(z!==0||!qo(y,_,p))||!(O!==0||!qo(y,S,p))||!(V!==0||!qo(_,y,S))||!(Q!==0||!qo(_,p,S))}function qo(y,p,_){return p.x<=Math.max(y.x,_.x)&&p.x>=Math.min(y.x,_.x)&&p.y<=Math.max(y.y,_.y)&&p.y>=Math.min(y.y,_.y)}function Go(y){return y>0?1:y<0?-1:0}function Vs(y,p){return Pi(y.prev,y,y.next)<0?Pi(y,p,y.next)>=0&&Pi(y,y.prev,p)>=0:Pi(y,p,y.prev)<0||Pi(y,y.next,p)<0}function xc(y,p){var _=new jc(y.i,y.x,y.y),S=new jc(p.i,p.x,p.y),z=y.next,O=p.prev;return y.next=p,p.prev=y,_.next=z,z.prev=_,S.next=_,_.prev=S,O.next=S,S.prev=O,S}function kc(y,p,_,S){var z=new jc(y,p,_);return S?(z.next=S.next,z.prev=S,S.next.prev=z,S.next=z):(z.prev=z,z.next=z),z}function ec(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function jc(y,p,_){this.i=y,this.x=p,this.y=_,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nl(y,p,_,S){for(var z=0,O=p,V=_-S;O<_;O+=S)z+=(y[V]-y[O])*(y[O+1]+y[V+1]),V=O;return z}function o0(y,p,_,S,z){C0(y,p,_||0,S||y.length-1,z||gf)}function C0(y,p,_,S,z){for(;S>_;){if(S-_>600){var O=S-_+1,V=p-_+1,Q=Math.log(O),ie=.5*Math.exp(2*Q/3),he=.5*Math.sqrt(Q*ie*(O-ie)/O)*(V-O/2<0?-1:1);C0(y,p,Math.max(_,Math.floor(p-V*ie/O+he)),Math.min(S,Math.floor(p+(O-V)*ie/O+he)),z)}var Ee=y[p],Me=_,Ge=S;for(Iu(y,_,p),z(y[S],Ee)>0&&Iu(y,_,S);Me<Ge;){for(Iu(y,Me,Ge),Me++,Ge--;z(y[Me],Ee)<0;)Me++;for(;z(y[Ge],Ee)>0;)Ge--}z(y[_],Ee)===0?Iu(y,_,Ge):Iu(y,++Ge,S),Ge<=p&&(_=Ge+1),p<=Ge&&(S=Ge-1)}}function Iu(y,p,_){var S=y[p];y[p]=y[_],y[_]=S}function gf(y,p){return y<p?-1:y>p?1:0}function I0(y,p){const _=y.length;if(_<=1)return[y];const S=[];let z,O;for(let V=0;V<_;V++){const Q=ve(y[V]);Q!==0&&(y[V].area=Math.abs(Q),O===void 0&&(O=Q<0),O===Q<0?(z&&S.push(z),z=[y[V]]):z.push(y[V]))}if(z&&S.push(z),p>1)for(let V=0;V<S.length;V++)S[V].length<=p||(o0(S[V],p,1,S[V].length-1,ls),S[V]=S[V].slice(0,p));return S}function ls(y,p){return p.area-y.area}function Vf(y,p,_){const S=_.patternDependencies;let z=!1;for(const O of p){const V=O.paint.get(`${y}-pattern`);V.isConstant()||(z=!0);const Q=V.constantOr(null);Q&&(z=!0,S[Q.to]=!0,S[Q.from]=!0)}return z}function kp(y,p,_,S,z){const O=z.patternDependencies;for(const V of p){const Q=V.paint.get(`${y}-pattern`).value;if(Q.kind!=="constant"){let ie=Q.evaluate({zoom:S-1},_,{},z.availableImages),he=Q.evaluate({zoom:S},_,{},z.availableImages),Ee=Q.evaluate({zoom:S+1},_,{},z.availableImages);ie=ie&&ie.name?ie.name:ie,he=he&&he.name?he.name:he,Ee=Ee&&Ee.name?Ee.name:Ee,O[ie]=!0,O[he]=!0,O[Ee]=!0,_.patterns[V.id]={min:ie,mid:he,max:Ee}}}return _}_n.exports=ti,_n.exports.default=ti,ti.deviation=function(y,p,_,S){var z=p&&p.length,O=Math.abs(Nl(y,0,z?p[0]*_:y.length,_));if(z)for(var V=0,Q=p.length;V<Q;V++)O-=Math.abs(Nl(y,p[V]*_,V<Q-1?p[V+1]*_:y.length,_));var ie=0;for(V=0;V<S.length;V+=3){var he=S[V]*_,Ee=S[V+1]*_,Me=S[V+2]*_;ie+=Math.abs((y[he]-y[Me])*(y[Ee+1]-y[he+1])-(y[he]-y[Ee])*(y[Me+1]-y[he+1]))}return O===0&&ie===0?0:Math.abs((ie-O)/O)},ti.flatten=function(y){for(var p=y[0][0].length,_={vertices:[],holes:[],dimensions:p},S=0,z=0;z<y.length;z++){for(var O=0;O<y[z].length;O++)for(var V=0;V<p;V++)_.vertices.push(y[z][O][V]);z>0&&_.holes.push(S+=y[z-1].length)}return _};class Ap{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new re,this.indexArray=new kr,this.indexArray2=new hr,this.programConfigurations=new Wo(p.layers,p.zoom),this.segments=new zt,this.segments2=new zt,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.hasPattern=Vf("fill",this.layers,_);const z=this.layers[0].layout.get("fill-sort-key"),O=!z.isConstant(),V=[];for(const{feature:Q,id:ie,index:he,sourceLayerIndex:Ee}of p){const Me=this.layers[0]._featureFilter.needGeometry,Ge=Ks(Q,Me);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),Ge,S))continue;const et=O?z.evaluate(Ge,{},S,_.availableImages):void 0,rt={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:Ee,index:he,geometry:Me?Ge.geometry:js(Q),patterns:{},sortKey:et};V.push(rt)}O&&V.sort((Q,ie)=>Q.sortKey-ie.sortKey);for(const Q of V){const{geometry:ie,index:he,sourceLayerIndex:Ee}=Q;if(this.hasPattern){const Me=kp("fill",this.layers,Q,this.zoom,_);this.patternFeatures.push(Me)}else this.addFeature(Q,ie,he,S,{});_.featureIndex.insert(p[he].feature,ie,he,Ee,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}addFeatures(p,_,S){for(const z of this.patternFeatures)this.addFeature(z,z.geometry,z.index,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,ei),this.indexBuffer=p.createIndexBuffer(this.indexArray),this.indexBuffer2=p.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(p,_,S,z,O){for(const V of I0(_,500)){let Q=0;for(const et of V)Q+=et.length;const ie=this.segments.prepareSegment(Q,this.layoutVertexArray,this.indexArray),he=ie.vertexLength,Ee=[],Me=[];for(const et of V){if(et.length===0)continue;et!==V[0]&&Me.push(Ee.length/2);const rt=this.segments2.prepareSegment(et.length,this.layoutVertexArray,this.indexArray2),Vt=rt.vertexLength;this.layoutVertexArray.emplaceBack(et[0].x,et[0].y),this.indexArray2.emplaceBack(Vt+et.length-1,Vt),Ee.push(et[0].x),Ee.push(et[0].y);for(let Ot=1;Ot<et.length;Ot++)this.layoutVertexArray.emplaceBack(et[Ot].x,et[Ot].y),this.indexArray2.emplaceBack(Vt+Ot-1,Vt+Ot),Ee.push(et[Ot].x),Ee.push(et[Ot].y);rt.vertexLength+=et.length,rt.primitiveLength+=et.length}const Ge=_n.exports(Ee,Me);for(let et=0;et<Ge.length;et+=3)this.indexArray.emplaceBack(he+Ge[et],he+Ge[et+1],he+Ge[et+2]);ie.vertexLength+=Q,ie.primitiveLength+=Ge.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}}Dn("FillBucket",Ap,{omit:["layers","patternFeatures"]});const I2=new jo({"fill-sort-key":new vi(yr.layout_fill["fill-sort-key"])});var zd={paint:new jo({"fill-antialias":new oi(yr.paint_fill["fill-antialias"]),"fill-opacity":new vi(yr.paint_fill["fill-opacity"]),"fill-color":new vi(yr.paint_fill["fill-color"]),"fill-outline-color":new vi(yr.paint_fill["fill-outline-color"]),"fill-translate":new oi(yr.paint_fill["fill-translate"]),"fill-translate-anchor":new oi(yr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Oa(yr.paint_fill["fill-pattern"])}),layout:I2};const yf=xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),L2=xa([{name:"a_centroid",components:2,type:"Int16"}],4),{members:T2}=yf;var L0={},a0=ht,Ei=s0;function s0(y,p,_,S,z){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=S,this._values=z,y.readFields(P2,this,p)}function P2(y,p,_){y==1?p.id=_.readVarint():y==2?function(S,z){for(var O=S.readVarint()+S.pos;S.pos<O;){var V=z._keys[S.readVarint()],Q=z._values[S.readVarint()];z.properties[V]=Q}}(_,p):y==3?p.type=_.readVarint():y==4&&(p._geometry=_.pos)}function M2(y){for(var p,_,S=0,z=0,O=y.length,V=O-1;z<O;V=z++)S+=((_=y[V]).x-(p=y[z]).x)*(p.y+_.y);return S}s0.types=["Unknown","Point","LineString","Polygon"],s0.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var p,_=y.readVarint()+y.pos,S=1,z=0,O=0,V=0,Q=[];y.pos<_;){if(z<=0){var ie=y.readVarint();S=7&ie,z=ie>>3}if(z--,S===1||S===2)O+=y.readSVarint(),V+=y.readSVarint(),S===1&&(p&&Q.push(p),p=[]),p.push(new a0(O,V));else{if(S!==7)throw new Error("unknown command "+S);p&&p.push(p[0].clone())}}return p&&Q.push(p),Q},s0.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var p=y.readVarint()+y.pos,_=1,S=0,z=0,O=0,V=1/0,Q=-1/0,ie=1/0,he=-1/0;y.pos<p;){if(S<=0){var Ee=y.readVarint();_=7&Ee,S=Ee>>3}if(S--,_===1||_===2)(z+=y.readSVarint())<V&&(V=z),z>Q&&(Q=z),(O+=y.readSVarint())<ie&&(ie=O),O>he&&(he=O);else if(_!==7)throw new Error("unknown command "+_)}return[V,ie,Q,he]},s0.prototype.toGeoJSON=function(y,p,_){var S,z,O=this.extent*Math.pow(2,_),V=this.extent*y,Q=this.extent*p,ie=this.loadGeometry(),he=s0.types[this.type];function Ee(et){for(var rt=0;rt<et.length;rt++){var Vt=et[rt];et[rt]=[360*(Vt.x+V)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(Vt.y+Q)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var Me=[];for(S=0;S<ie.length;S++)Me[S]=ie[S][0];Ee(ie=Me);break;case 2:for(S=0;S<ie.length;S++)Ee(ie[S]);break;case 3:for(ie=function(et){var rt=et.length;if(rt<=1)return[et];for(var Vt,Ot,xr=[],jr=0;jr<rt;jr++){var gr=M2(et[jr]);gr!==0&&(Ot===void 0&&(Ot=gr<0),Ot===gr<0?(Vt&&xr.push(Vt),Vt=[et[jr]]):Vt.push(et[jr]))}return Vt&&xr.push(Vt),xr}(ie),S=0;S<ie.length;S++)for(z=0;z<ie[S].length;z++)Ee(ie[S][z])}ie.length===1?ie=ie[0]:he="Multi"+he;var Ge={type:"Feature",geometry:{type:he,coordinates:ie},properties:this.properties};return"id"in this&&(Ge.id=this.id),Ge};var D2=Ei,Nd=Rd;function Rd(y,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(z2,this,p),this.length=this._features.length}function z2(y,p,_){y===15?p.version=_.readVarint():y===1?p.name=_.readString():y===5?p.extent=_.readVarint():y===2?p._features.push(_.pos):y===3?p._keys.push(_.readString()):y===4&&p._values.push(function(S){for(var z=null,O=S.readVarint()+S.pos;S.pos<O;){var V=S.readVarint()>>3;z=V===1?S.readString():V===2?S.readFloat():V===3?S.readDouble():V===4?S.readVarint64():V===5?S.readVarint():V===6?S.readSVarint():V===7?S.readBoolean():null}return z}(_))}Rd.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var p=this._pbf.readVarint()+this._pbf.pos;return new D2(this._pbf,p,this.extent,this._keys,this._values)};var $f=Nd;function _h(y,p,_){if(y===3){var S=new $f(_,_.readVarint()+_.pos);S.length&&(p[S.name]=S)}}L0.VectorTile=function(y,p){this.layers=y.readFields(_h,{},p)},L0.VectorTileFeature=Ei,L0.VectorTileLayer=Nd;const Od=L0.VectorTileFeature.types,Ep=Math.pow(2,13);function vf(y,p,_,S,z,O,V,Q){y.emplaceBack(p,_,2*Math.floor(S*Ep)+V,z*Ep*2,O*Ep*2,Math.round(Q))}class Gf{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new fe,this.centroidVertexArray=new N,this.indexArray=new kr,this.programConfigurations=new Wo(p.layers,p.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.features=[],this.hasPattern=Vf("fill-extrusion",this.layers,_);for(const{feature:z,id:O,index:V,sourceLayerIndex:Q}of p){const ie=this.layers[0]._featureFilter.needGeometry,he=Ks(z,ie);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),he,S))continue;const Ee={id:O,sourceLayerIndex:Q,index:V,geometry:ie?he.geometry:js(z),properties:z.properties,type:z.type,patterns:{}};this.hasPattern?this.features.push(kp("fill-extrusion",this.layers,Ee,this.zoom,_)):this.addFeature(Ee,Ee.geometry,V,S,{}),_.featureIndex.insert(z,Ee.geometry,V,Q,this.index,!0)}}addFeatures(p,_,S){for(const z of this.features){const{geometry:O}=z;this.addFeature(z,O,z.index,_,S)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,T2),this.centroidVertexBuffer=p.createVertexBuffer(this.centroidVertexArray,L2.members,!0),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(p,_,S,z,O){const V={x:0,y:0,vertexCount:0};for(const Q of I0(_,500)){let ie=0;for(const rt of Q)ie+=rt.length;let he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const rt of Q){if(rt.length===0||N2(rt))continue;let Vt=0;for(let Ot=0;Ot<rt.length;Ot++){const xr=rt[Ot];if(Ot>=1){const jr=rt[Ot-1];if(!Fd(xr,jr)){he.vertexLength+4>zt.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const gr=xr.sub(jr)._perp()._unit(),Tr=jr.dist(xr);Vt+Tr>32768&&(Vt=0),vf(this.layoutVertexArray,xr.x,xr.y,gr.x,gr.y,0,0,Vt),vf(this.layoutVertexArray,xr.x,xr.y,gr.x,gr.y,0,1,Vt),V.x+=2*xr.x,V.y+=2*xr.y,V.vertexCount+=2,Vt+=Tr,vf(this.layoutVertexArray,jr.x,jr.y,gr.x,gr.y,0,0,Vt),vf(this.layoutVertexArray,jr.x,jr.y,gr.x,gr.y,0,1,Vt),V.x+=2*jr.x,V.y+=2*jr.y,V.vertexCount+=2;const an=he.vertexLength;this.indexArray.emplaceBack(an,an+2,an+1),this.indexArray.emplaceBack(an+1,an+2,an+3),he.vertexLength+=4,he.primitiveLength+=2}}}}if(he.vertexLength+ie>zt.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray)),Od[p.type]!=="Polygon")continue;const Ee=[],Me=[],Ge=he.vertexLength;for(const rt of Q)if(rt.length!==0){rt!==Q[0]&&Me.push(Ee.length/2);for(let Vt=0;Vt<rt.length;Vt++){const Ot=rt[Vt];vf(this.layoutVertexArray,Ot.x,Ot.y,0,0,1,1,0),V.x+=Ot.x,V.y+=Ot.y,V.vertexCount+=1,Ee.push(Ot.x),Ee.push(Ot.y)}}const et=_n.exports(Ee,Me);for(let rt=0;rt<et.length;rt+=3)this.indexArray.emplaceBack(Ge+et[rt],Ge+et[rt+2],Ge+et[rt+1]);he.primitiveLength+=et.length/3,he.vertexLength+=ie}for(let Q=0;Q<V.vertexCount;Q++)this.centroidVertexArray.emplaceBack(Math.floor(V.x/V.vertexCount),Math.floor(V.y/V.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}}function Fd(y,p){return y.x===p.x&&(y.x<0||y.x>$o)||y.y===p.y&&(y.y<0||y.y>$o)}function N2(y){return y.every(p=>p.x<0)||y.every(p=>p.x>$o)||y.every(p=>p.y<0)||y.every(p=>p.y>$o)}Dn("FillExtrusionBucket",Gf,{omit:["layers","features"]});var R2={paint:new jo({"fill-extrusion-opacity":new oi(yr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vi(yr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oi(yr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oi(yr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Oa(yr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vi(yr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vi(yr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oi(yr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Hf(y,p){return y.x*p.x+y.y*p.y}function Bd(y,p){if(y.length===1){let _=0;const S=p[_++];let z;for(;!z||S.equals(z);)if(z=p[_++],!z)return 1/0;for(;_<p.length;_++){const O=p[_],V=y[0],Q=z.sub(S),ie=O.sub(S),he=V.sub(S),Ee=Hf(Q,Q),Me=Hf(Q,ie),Ge=Hf(ie,ie),et=Hf(he,Q),rt=Hf(he,ie),Vt=Ee*Ge-Me*Me,Ot=(Ge*et-Me*rt)/Vt,xr=(Ee*rt-Me*et)/Vt,jr=S.z*(1-Ot-xr)+z.z*Ot+O.z*xr;if(isFinite(jr))return jr}return 1/0}{let _=1/0;for(const S of p)_=Math.min(_,S.z);return _}}const jd=xa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:O2}=jd,i=xa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:a}=i,l=L0.VectorTileFeature.types,g=Math.cos(Math.PI/180*37.5),b=Math.pow(2,14)/.5;class x{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Be,this.indexArray=new kr,this.programConfigurations=new Wo(p.layers,p.zoom),this.segments=new zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.hasPattern=Vf("line",this.layers,_);const z=this.layers[0].layout.get("line-sort-key"),O=!z.isConstant(),V=[];for(const{feature:Q,id:ie,index:he,sourceLayerIndex:Ee}of p){const Me=this.layers[0]._featureFilter.needGeometry,Ge=Ks(Q,Me);if(!this.layers[0]._featureFilter.filter(new Ho(this.zoom),Ge,S))continue;const et=O?z.evaluate(Ge,{},S):void 0,rt={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:Ee,index:he,geometry:Me?Ge.geometry:js(Q),patterns:{},sortKey:et};V.push(rt)}O&&V.sort((Q,ie)=>Q.sortKey-ie.sortKey);for(const Q of V){const{geometry:ie,index:he,sourceLayerIndex:Ee}=Q;if(this.hasPattern){const Me=kp("line",this.layers,Q,this.zoom,_);this.patternFeatures.push(Me)}else this.addFeature(Q,ie,he,S,{});_.featureIndex.insert(p[he].feature,ie,he,Ee,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}addFeatures(p,_,S){for(const z of this.patternFeatures)this.addFeature(z,z.geometry,z.index,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=p.createVertexBuffer(this.layoutVertexArray2,a)),this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,O2),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(p){if(p.properties&&Object.prototype.hasOwnProperty.call(p.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(p.properties,"mapbox_clip_end"))return{start:+p.properties.mapbox_clip_start,end:+p.properties.mapbox_clip_end}}addFeature(p,_,S,z,O){const V=this.layers[0].layout,Q=V.get("line-join").evaluate(p,{}),ie=V.get("line-cap"),he=V.get("line-miter-limit"),Ee=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(p);for(const Me of _)this.addLine(Me,p,Q,ie,he,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}addLine(p,_,S,z,O,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xr=0;xr<p.length-1;xr++)this.totalDistance+=p[xr].dist(p[xr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Q=l[_.type]==="Polygon";let ie=p.length;for(;ie>=2&&p[ie-1].equals(p[ie-2]);)ie--;let he=0;for(;he<ie-1&&p[he].equals(p[he+1]);)he++;if(ie<(Q?3:2))return;S==="bevel"&&(O=1.05);const Ee=this.overscaling<=16?122880/(512*this.overscaling):0,Me=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let Ge,et,rt,Vt,Ot;this.e1=this.e2=-1,Q&&(Ge=p[ie-2],Ot=p[he].sub(Ge)._unit()._perp());for(let xr=he;xr<ie;xr++){if(rt=xr===ie-1?Q?p[he+1]:void 0:p[xr+1],rt&&p[xr].equals(rt))continue;Ot&&(Vt=Ot),Ge&&(et=Ge),Ge=p[xr],Ot=rt?rt.sub(Ge)._unit()._perp():Vt,Vt=Vt||Ot;let jr=Vt.add(Ot);jr.x===0&&jr.y===0||jr._unit();const gr=Vt.x*Ot.x+Vt.y*Ot.y,Tr=jr.x*Ot.x+jr.y*Ot.y,an=Tr!==0?1/Tr:1/0,rn=2*Math.sqrt(2-2*Tr),ri=Tr<g&&et&&rt,fi=Vt.x*Ot.y-Vt.y*Ot.x>0;if(ri&&xr>he){const Tn=Ge.dist(et);if(Tn>2*Ee){const Zn=Ge.sub(Ge.sub(et)._mult(Ee/Tn)._round());this.updateDistance(et,Zn),this.addCurrentVertex(Zn,Vt,0,0,Me),et=Zn}}const Wn=et&&rt;let Un=Wn?S:Q?"butt":z;if(Wn&&Un==="round"&&(an<V?Un="miter":an<=2&&(Un="fakeround")),Un==="miter"&&an>O&&(Un="bevel"),Un==="bevel"&&(an>2&&(Un="flipbevel"),an<O&&(Un="miter")),et&&this.updateDistance(et,Ge),Un==="miter")jr._mult(an),this.addCurrentVertex(Ge,jr,0,0,Me);else if(Un==="flipbevel"){if(an>100)jr=Ot.mult(-1);else{const Tn=an*Vt.add(Ot).mag()/Vt.sub(Ot).mag();jr._perp()._mult(Tn*(fi?-1:1))}this.addCurrentVertex(Ge,jr,0,0,Me),this.addCurrentVertex(Ge,jr.mult(-1),0,0,Me)}else if(Un==="bevel"||Un==="fakeround"){const Tn=-Math.sqrt(an*an-1),Zn=fi?Tn:0,$n=fi?0:Tn;if(et&&this.addCurrentVertex(Ge,Vt,Zn,$n,Me),Un==="fakeround"){const wn=Math.round(180*rn/Math.PI/20);for(let Si=1;Si<wn;Si++){let mi=Si/wn;if(mi!==.5){const ka=mi-.5;mi+=mi*ka*(mi-1)*((1.0904+gr*(gr*(3.55645-1.43519*gr)-3.2452))*ka*ka+(.848013+gr*(.215638*gr-1.06021)))}const po=Ot.sub(Vt)._mult(mi)._add(Vt)._unit()._mult(fi?-1:1);this.addHalfVertex(Ge,po.x,po.y,!1,fi,0,Me)}}rt&&this.addCurrentVertex(Ge,Ot,-Zn,-$n,Me)}else if(Un==="butt")this.addCurrentVertex(Ge,jr,0,0,Me);else if(Un==="square"){const Tn=et?1:-1;this.addCurrentVertex(Ge,jr,Tn,Tn,Me)}else Un==="round"&&(et&&(this.addCurrentVertex(Ge,Vt,0,0,Me),this.addCurrentVertex(Ge,Vt,1,1,Me,!0)),rt&&(this.addCurrentVertex(Ge,Ot,-1,-1,Me,!0),this.addCurrentVertex(Ge,Ot,0,0,Me)));if(ri&&xr<ie-1){const Tn=Ge.dist(rt);if(Tn>2*Ee){const Zn=Ge.add(rt.sub(Ge)._mult(Ee/Tn)._round());this.updateDistance(Ge,Zn),this.addCurrentVertex(Zn,Ot,0,0,Me),Ge=Zn}}}}addCurrentVertex(p,_,S,z,O,V=!1){const Q=_.y*z-_.x,ie=-_.y-_.x*z;this.addHalfVertex(p,_.x+_.y*S,_.y-_.x*S,V,!1,S,O),this.addHalfVertex(p,Q,ie,V,!0,-z,O),this.distance>b/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(p,_,S,z,O,V))}addHalfVertex({x:p,y:_},S,z,O,V,Q,ie){const he=.5*(this.lineClips?this.scaledDistance*(b-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((p<<1)+(O?1:0),(_<<1)+(V?1:0),Math.round(63*S)+128,Math.round(63*z)+128,1+(Q===0?0:Q<0?-1:1)|(63&he)<<2,he>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ee=ie.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),ie.primitiveLength++),V?this.e2=Ee:this.e1=Ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(p,_){this.distance+=p.dist(_),this.updateScaledDistance()}}Dn("LineBucket",x,{omit:["layers","patternFeatures"]});const A=new jo({"line-cap":new oi(yr.layout_line["line-cap"]),"line-join":new vi(yr.layout_line["line-join"]),"line-miter-limit":new oi(yr.layout_line["line-miter-limit"]),"line-round-limit":new oi(yr.layout_line["line-round-limit"]),"line-sort-key":new vi(yr.layout_line["line-sort-key"])});var P={paint:new jo({"line-opacity":new vi(yr.paint_line["line-opacity"]),"line-color":new vi(yr.paint_line["line-color"]),"line-translate":new oi(yr.paint_line["line-translate"]),"line-translate-anchor":new oi(yr.paint_line["line-translate-anchor"]),"line-width":new vi(yr.paint_line["line-width"]),"line-gap-width":new vi(yr.paint_line["line-gap-width"]),"line-offset":new vi(yr.paint_line["line-offset"]),"line-blur":new vi(yr.paint_line["line-blur"]),"line-dasharray":new Ku(yr.paint_line["line-dasharray"]),"line-pattern":new Oa(yr.paint_line["line-pattern"]),"line-gradient":new wa(yr.paint_line["line-gradient"])}),layout:A};const U=new class extends vi{possiblyEvaluate(y,p){return p=new Ho(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(y,p)}evaluate(y,p,_,S){return p=F({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(y,p,_,S)}}(P.paint.properties["line-width"].specification);function j(y,p){return p>0?p+2*y:y}U.useIntegerZoom=!0;const X=xa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ne=xa([{name:"a_projected_pos",components:3,type:"Float32"}],4);xa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const me=xa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ie=xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),je=xa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function st(y,p,_){return y.sections.forEach(S=>{S.text=function(z,O,V){const Q=O.layout.get("text-transform").evaluate(V,{});return Q==="uppercase"?z=z.toLocaleUpperCase():Q==="lowercase"&&(z=z.toLocaleLowerCase()),Cs.applyArabicShaping&&(z=Cs.applyArabicShaping(z)),z}(S.text,p,_)}),y}xa([{name:"triangle",components:3,type:"Uint16"}]),xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xa([{type:"Float32",name:"offsetX"}]),xa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const At={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Lt=24,Qt=Sr,lr=function(y,p,_,S,z){var O,V,Q=8*z-S-1,ie=(1<<Q)-1,he=ie>>1,Ee=-7,Me=_?z-1:0,Ge=_?-1:1,et=y[p+Me];for(Me+=Ge,O=et&(1<<-Ee)-1,et>>=-Ee,Ee+=Q;Ee>0;O=256*O+y[p+Me],Me+=Ge,Ee-=8);for(V=O&(1<<-Ee)-1,O>>=-Ee,Ee+=S;Ee>0;V=256*V+y[p+Me],Me+=Ge,Ee-=8);if(O===0)O=1-he;else{if(O===ie)return V?NaN:1/0*(et?-1:1);V+=Math.pow(2,S),O-=he}return(et?-1:1)*V*Math.pow(2,O-S)},Nr=function(y,p,_,S,z,O){var V,Q,ie,he=8*O-z-1,Ee=(1<<he)-1,Me=Ee>>1,Ge=z===23?Math.pow(2,-24)-Math.pow(2,-77):0,et=S?0:O-1,rt=S?1:-1,Vt=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(Q=isNaN(p)?1:0,V=Ee):(V=Math.floor(Math.log(p)/Math.LN2),p*(ie=Math.pow(2,-V))<1&&(V--,ie*=2),(p+=V+Me>=1?Ge/ie:Ge*Math.pow(2,1-Me))*ie>=2&&(V++,ie/=2),V+Me>=Ee?(Q=0,V=Ee):V+Me>=1?(Q=(p*ie-1)*Math.pow(2,z),V+=Me):(Q=p*Math.pow(2,Me-1)*Math.pow(2,z),V=0));z>=8;y[_+et]=255&Q,et+=rt,Q/=256,z-=8);for(V=V<<z|Q,he+=z;he>0;y[_+et]=255&V,et+=rt,V/=256,he-=8);y[_+et-rt]|=128*Vt};function Sr(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var Jr,hn=4294967296,Sn=1/hn,di=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ni(y){return y.type===Sr.Bytes?y.readVarint()+y.pos:y.pos+1}function Ua(y,p,_){return _?4294967296*p+(y>>>0):4294967296*(p>>>0)+(y>>>0)}function el(y,p,_){var S=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));_.realloc(S);for(var z=_.pos-1;z>=y;z--)_.buf[z+S]=_.buf[z]}function au(y,p){for(var _=0;_<y.length;_++)p.writeVarint(y[_])}function Uc(y,p){for(var _=0;_<y.length;_++)p.writeSVarint(y[_])}function _f(y,p){for(var _=0;_<y.length;_++)p.writeFloat(y[_])}function Vk(y,p){for(var _=0;_<y.length;_++)p.writeDouble(y[_])}function $k(y,p){for(var _=0;_<y.length;_++)p.writeBoolean(y[_])}function Gk(y,p){for(var _=0;_<y.length;_++)p.writeFixed32(y[_])}function Hk(y,p){for(var _=0;_<y.length;_++)p.writeSFixed32(y[_])}function Wk(y,p){for(var _=0;_<y.length;_++)p.writeFixed64(y[_])}function Zk(y,p){for(var _=0;_<y.length;_++)p.writeSFixed64(y[_])}function Ud(y,p){return(y[p]|y[p+1]<<8|y[p+2]<<16)+16777216*y[p+3]}function bh(y,p,_){y[_]=p,y[_+1]=p>>>8,y[_+2]=p>>>16,y[_+3]=p>>>24}function Xv(y,p){return(y[p]|y[p+1]<<8|y[p+2]<<16)+(y[p+3]<<24)}function Xk(y,p,_){y===1&&_.readMessage(Yk,p)}function Yk(y,p,_){if(y===3){const{id:S,bitmap:z,width:O,height:V,left:Q,top:ie,advance:he}=_.readMessage(Jk,{});p.push({id:S,bitmap:new Zt({width:O+6,height:V+6},z),metrics:{width:O,height:V,left:Q,top:ie,advance:he}})}}function Jk(y,p,_){y===1?p.id=_.readVarint():y===2?p.bitmap=_.readBytes():y===3?p.width=_.readVarint():y===4?p.height=_.readVarint():y===5?p.left=_.readSVarint():y===6?p.top=_.readSVarint():y===7&&(p.advance=_.readVarint())}function Yv(y){let p=0,_=0;for(const V of y)p+=V.w*V.h,_=Math.max(_,V.w);y.sort((V,Q)=>Q.h-V.h);const S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),_),h:1/0}];let z=0,O=0;for(const V of y)for(let Q=S.length-1;Q>=0;Q--){const ie=S[Q];if(!(V.w>ie.w||V.h>ie.h)){if(V.x=ie.x,V.y=ie.y,O=Math.max(O,V.y+V.h),z=Math.max(z,V.x+V.w),V.w===ie.w&&V.h===ie.h){const he=S.pop();Q<S.length&&(S[Q]=he)}else V.h===ie.h?(ie.x+=V.w,ie.w-=V.w):V.w===ie.w?(ie.y+=V.h,ie.h-=V.h):(S.push({x:ie.x+V.w,y:ie.y,w:ie.w-V.w,h:V.h}),ie.y+=V.h,ie.h-=V.h);break}}return{w:z,h:O,fill:p/(z*O)||0}}Sr.prototype={destroy:function(){this.buf=null},readFields:function(y,p,_){for(_=_||this.length;this.pos<_;){var S=this.readVarint(),z=S>>3,O=this.pos;this.type=7&S,y(z,p,this),this.pos===O&&this.skip(S)}return p},readMessage:function(y,p){return this.readFields(y,p,this.readVarint()+this.pos)},readFixed32:function(){var y=Ud(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=Xv(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=Ud(this.buf,this.pos)+Ud(this.buf,this.pos+4)*hn;return this.pos+=8,y},readSFixed64:function(){var y=Ud(this.buf,this.pos)+Xv(this.buf,this.pos+4)*hn;return this.pos+=8,y},readFloat:function(){var y=lr(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=lr(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var p,_,S=this.buf;return p=127&(_=S[this.pos++]),_<128?p:(p|=(127&(_=S[this.pos++]))<<7,_<128?p:(p|=(127&(_=S[this.pos++]))<<14,_<128?p:(p|=(127&(_=S[this.pos++]))<<21,_<128?p:function(z,O,V){var Q,ie,he=V.buf;if(Q=(112&(ie=he[V.pos++]))>>4,ie<128||(Q|=(127&(ie=he[V.pos++]))<<3,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<10,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<17,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<24,ie<128)||(Q|=(1&(ie=he[V.pos++]))<<31,ie<128))return Ua(z,Q,O);throw new Error("Expected varint not more than 10 bytes")}(p|=(15&(_=S[this.pos]))<<28,y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2==1?(y+1)/-2:y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var y=this.readVarint()+this.pos,p=this.pos;return this.pos=y,y-p>=12&&di?function(_,S,z){return di.decode(_.subarray(S,z))}(this.buf,p,y):function(_,S,z){for(var O="",V=S;V<z;){var Q,ie,he,Ee=_[V],Me=null,Ge=Ee>239?4:Ee>223?3:Ee>191?2:1;if(V+Ge>z)break;Ge===1?Ee<128&&(Me=Ee):Ge===2?(192&(Q=_[V+1]))==128&&(Me=(31&Ee)<<6|63&Q)<=127&&(Me=null):Ge===3?(ie=_[V+2],(192&(Q=_[V+1]))==128&&(192&ie)==128&&((Me=(15&Ee)<<12|(63&Q)<<6|63&ie)<=2047||Me>=55296&&Me<=57343)&&(Me=null)):Ge===4&&(ie=_[V+2],he=_[V+3],(192&(Q=_[V+1]))==128&&(192&ie)==128&&(192&he)==128&&((Me=(15&Ee)<<18|(63&Q)<<12|(63&ie)<<6|63&he)<=65535||Me>=1114112)&&(Me=null)),Me===null?(Me=65533,Ge=1):Me>65535&&(Me-=65536,O+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|1023&Me),O+=String.fromCharCode(Me),V+=Ge}return O}(this.buf,p,y)},readBytes:function(){var y=this.readVarint()+this.pos,p=this.buf.subarray(this.pos,y);return this.pos=y,p},readPackedVarint:function(y,p){if(this.type!==Sr.Bytes)return y.push(this.readVarint(p));var _=Ni(this);for(y=y||[];this.pos<_;)y.push(this.readVarint(p));return y},readPackedSVarint:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSVarint());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==Sr.Bytes)return y.push(this.readBoolean());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFloat());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==Sr.Bytes)return y.push(this.readDouble());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFixed32());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSFixed32());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFixed64());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSFixed64());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSFixed64());return y},skip:function(y){var p=7&y;if(p===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(p===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(p===Sr.Fixed32)this.pos+=4;else{if(p!==Sr.Fixed64)throw new Error("Unimplemented type: "+p);this.pos+=8}},writeTag:function(y,p){this.writeVarint(y<<3|p)},realloc:function(y){for(var p=this.length||16;p<this.pos+y;)p*=2;if(p!==this.length){var _=new Uint8Array(p);_.set(this.buf),this.buf=_,this.length=p}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),bh(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),bh(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),bh(this.buf,-1&y,this.pos),bh(this.buf,Math.floor(y*Sn),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),bh(this.buf,-1&y,this.pos),bh(this.buf,Math.floor(y*Sn),this.pos+4),this.pos+=8},writeVarint:function(y){(y=+y||0)>268435455||y<0?function(p,_){var S,z;if(p>=0?(S=p%4294967296|0,z=p/4294967296|0):(z=~(-p/4294967296),4294967295^(S=~(-p%4294967296))?S=S+1|0:(S=0,z=z+1|0)),p>=18446744073709552e3||p<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(O,V,Q){Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,Q.buf[Q.pos]=127&(O>>>=7)}(S,0,_),function(O,V){var Q=(7&O)<<4;V.buf[V.pos++]|=Q|((O>>>=3)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O)))))}(z,_)}(y,this):(this.realloc(4),this.buf[this.pos++]=127&y|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=y>>>7&127))))},writeSVarint:function(y){this.writeVarint(y<0?2*-y-1:2*y)},writeBoolean:function(y){this.writeVarint(!!y)},writeString:function(y){y=String(y),this.realloc(4*y.length),this.pos++;var p=this.pos;this.pos=function(S,z,O){for(var V,Q,ie=0;ie<z.length;ie++){if((V=z.charCodeAt(ie))>55295&&V<57344){if(!Q){V>56319||ie+1===z.length?(S[O++]=239,S[O++]=191,S[O++]=189):Q=V;continue}if(V<56320){S[O++]=239,S[O++]=191,S[O++]=189,Q=V;continue}V=Q-55296<<10|V-56320|65536,Q=null}else Q&&(S[O++]=239,S[O++]=191,S[O++]=189,Q=null);V<128?S[O++]=V:(V<2048?S[O++]=V>>6|192:(V<65536?S[O++]=V>>12|224:(S[O++]=V>>18|240,S[O++]=V>>12&63|128),S[O++]=V>>6&63|128),S[O++]=63&V|128)}return O}(this.buf,y,this.pos);var _=this.pos-p;_>=128&&el(p,_,this),this.pos=p-1,this.writeVarint(_),this.pos+=_},writeFloat:function(y){this.realloc(4),Nr(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),Nr(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var p=y.length;this.writeVarint(p),this.realloc(p);for(var _=0;_<p;_++)this.buf[this.pos++]=y[_]},writeRawMessage:function(y,p){this.pos++;var _=this.pos;y(p,this);var S=this.pos-_;S>=128&&el(_,S,this),this.pos=_-1,this.writeVarint(S),this.pos+=S},writeMessage:function(y,p,_){this.writeTag(y,Sr.Bytes),this.writeRawMessage(p,_)},writePackedVarint:function(y,p){p.length&&this.writeMessage(y,au,p)},writePackedSVarint:function(y,p){p.length&&this.writeMessage(y,Uc,p)},writePackedBoolean:function(y,p){p.length&&this.writeMessage(y,$k,p)},writePackedFloat:function(y,p){p.length&&this.writeMessage(y,_f,p)},writePackedDouble:function(y,p){p.length&&this.writeMessage(y,Vk,p)},writePackedFixed32:function(y,p){p.length&&this.writeMessage(y,Gk,p)},writePackedSFixed32:function(y,p){p.length&&this.writeMessage(y,Hk,p)},writePackedFixed64:function(y,p){p.length&&this.writeMessage(y,Wk,p)},writePackedSFixed64:function(y,p){p.length&&this.writeMessage(y,Zk,p)},writeBytesField:function(y,p){this.writeTag(y,Sr.Bytes),this.writeBytes(p)},writeFixed32Field:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeFixed32(p)},writeSFixed32Field:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeSFixed32(p)},writeFixed64Field:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeFixed64(p)},writeSFixed64Field:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeSFixed64(p)},writeVarintField:function(y,p){this.writeTag(y,Sr.Varint),this.writeVarint(p)},writeSVarintField:function(y,p){this.writeTag(y,Sr.Varint),this.writeSVarint(p)},writeStringField:function(y,p){this.writeTag(y,Sr.Bytes),this.writeString(p)},writeFloatField:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeFloat(p)},writeDoubleField:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeDouble(p)},writeBooleanField:function(y,p){this.writeVarintField(y,!!p)}};class F2{constructor(p,{pixelRatio:_,version:S,stretchX:z,stretchY:O,content:V}){this.paddedRect=p,this.pixelRatio=_,this.stretchX=z,this.stretchY=O,this.content=V,this.version=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jv{constructor(p,_){const S={},z={};this.haveRenderCallbacks=[];const O=[];this.addImages(p,S,O),this.addImages(_,z,O);const{w:V,h:Q}=Yv(O),ie=new _r({width:V||1,height:Q||1});for(const he in p){const Ee=p[he],Me=S[he].paddedRect;_r.copy(Ee.data,ie,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Ee.data)}for(const he in _){const Ee=_[he],Me=z[he].paddedRect,Ge=Me.x+1,et=Me.y+1,rt=Ee.data.width,Vt=Ee.data.height;_r.copy(Ee.data,ie,{x:0,y:0},{x:Ge,y:et},Ee.data),_r.copy(Ee.data,ie,{x:0,y:Vt-1},{x:Ge,y:et-1},{width:rt,height:1}),_r.copy(Ee.data,ie,{x:0,y:0},{x:Ge,y:et+Vt},{width:rt,height:1}),_r.copy(Ee.data,ie,{x:rt-1,y:0},{x:Ge-1,y:et},{width:1,height:Vt}),_r.copy(Ee.data,ie,{x:0,y:0},{x:Ge+rt,y:et},{width:1,height:Vt})}this.image=ie,this.iconPositions=S,this.patternPositions=z}addImages(p,_,S){for(const z in p){const O=p[z],V={x:0,y:0,w:O.data.width+2,h:O.data.height+2};S.push(V),_[z]=new F2(V,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(z)}}patchUpdatedImages(p,_){p.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const S in p.updatedImages)this.patchUpdatedImage(this.iconPositions[S],p.getImage(S),_),this.patchUpdatedImage(this.patternPositions[S],p.getImage(S),_)}patchUpdatedImage(p,_,S){if(!p||!_||p.version===_.version)return;p.version=_.version;const[z,O]=p.tl;S.update(_.data,void 0,{x:z,y:O})}}Dn("ImagePosition",F2),Dn("ImageAtlas",Jv),s.WritingMode=void 0,(Jr=s.WritingMode||(s.WritingMode={}))[Jr.none=0]="none",Jr[Jr.horizontal=1]="horizontal",Jr[Jr.vertical=2]="vertical",Jr[Jr.horizontalOnly=3]="horizontalOnly";const qd=-17;class Sp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(p,_){const S=new Sp;return S.scale=p||1,S.fontStack=_,S}static forImage(p){const _=new Sp;return _.imageName=p,_}}class wh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(p,_){const S=new wh;for(let z=0;z<p.sections.length;z++){const O=p.sections[z];O.image?S.addImageSection(O):S.addTextSection(O,_)}return S}length(){return this.text.length}getSection(p){return this.sections[this.sectionIndex[p]]}getSectionIndex(p){return this.sectionIndex[p]}getCharCode(p){return this.text.charCodeAt(p)}verticalizePunctuation(){this.text=function(p){let _="";for(let S=0;S<p.length;S++){const z=p.charCodeAt(S+1)||null,O=p.charCodeAt(S-1)||null;_+=z&&e0(z)&&!At[p[S+1]]||O&&e0(O)&&!At[p[S-1]]||!At[p[S]]?p[S]:At[p[S]]}return _}(this.text)}trim(){let p=0;for(let S=0;S<this.text.length&&$d[this.text.charCodeAt(S)];S++)p++;let _=this.text.length;for(let S=this.text.length-1;S>=0&&S>=p&&$d[this.text.charCodeAt(S)];S--)_--;this.text=this.text.substring(p,_),this.sectionIndex=this.sectionIndex.slice(p,_)}substring(p,_){const S=new wh;return S.text=this.text.substring(p,_),S.sectionIndex=this.sectionIndex.slice(p,_),S.sections=this.sections,S}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((p,_)=>Math.max(p,this.sections[_].scale),0)}addTextSection(p,_){this.text+=p.text,this.sections.push(Sp.forText(p.scale,p.fontStack||_));const S=this.sections.length-1;for(let z=0;z<p.text.length;++z)this.sectionIndex.push(S)}addImageSection(p){const _=p.image?p.image.name:"";if(_.length===0)return void le("Can't add FormattedSection with an empty image.");const S=this.getNextImageSectionCharCode();S?(this.text+=String.fromCharCode(S),this.sections.push(Sp.forImage(_)),this.sectionIndex.push(this.sections.length-1)):le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vd(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt){const Ot=wh.fromFeature(y,z);let xr;Me===s.WritingMode.vertical&&Ot.verticalizePunctuation();const{processBidirectionalText:jr,processStyledBidirectionalText:gr}=Cs;if(jr&&Ot.sections.length===1){xr=[];const rn=jr(Ot.toString(),B2(Ot,he,O,p,S,et,rt));for(const ri of rn){const fi=new wh;fi.text=ri,fi.sections=Ot.sections;for(let Wn=0;Wn<ri.length;Wn++)fi.sectionIndex.push(0);xr.push(fi)}}else if(gr){xr=[];const rn=gr(Ot.text,Ot.sectionIndex,B2(Ot,he,O,p,S,et,rt));for(const ri of rn){const fi=new wh;fi.text=ri[0],fi.sectionIndex=ri[1],fi.sections=Ot.sections,xr.push(fi)}}else xr=function(rn,ri){const fi=[],Wn=rn.text;let Un=0;for(const Tn of ri)fi.push(rn.substring(Un,Tn)),Un=Tn;return Un<Wn.length&&fi.push(rn.substring(Un,Wn.length)),fi}(Ot,B2(Ot,he,O,p,S,et,rt));const Tr=[],an={positionedLines:Tr,text:Ot.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:Me,iconsInText:!1,verticalizable:!1};return function(rn,ri,fi,Wn,Un,Tn,Zn,$n,wn,Si,mi,po){let ka=0,Pa=qd,Ls=0,Ec=0;const cl=$n==="right"?1:$n==="left"?0:.5;let ps=0;for(const ds of Un){ds.trim();const hl=ds.getMaxScale(),Ol=(hl-1)*Lt,su={positionedGlyphs:[],lineOffset:0};rn.positionedLines[ps]=su;const Tu=su.positionedGlyphs;let Pu=0;if(!ds.length()){Pa+=Tn,++ps;continue}for(let Gs=0;Gs<ds.length();Gs++){const bo=ds.getSection(Gs),tc=ds.getSectionIndex(Gs),pl=ds.getCharCode(Gs);let Fl=0,qc=null,l0=null,u0=null,Y0=Lt;const Vc=!(wn===s.WritingMode.horizontal||!mi&&!Nc(pl)||mi&&($d[pl]||($s=pl,An.Arabic($s)||An["Arabic Supplement"]($s)||An["Arabic Extended-A"]($s)||An["Arabic Presentation Forms-A"]($s)||An["Arabic Presentation Forms-B"]($s))));if(bo.imageName){const Sc=Wn[bo.imageName];if(!Sc)continue;u0=bo.imageName,rn.iconsInText=rn.iconsInText||!0,l0=Sc.paddedRect;const Mu=Sc.displaySize;bo.scale=bo.scale*Lt/po,qc={width:Mu[0],height:Mu[1],left:1,top:-3,advance:Vc?Mu[1]:Mu[0]},Fl=Ol+(Lt-Mu[1]*bo.scale),Y0=qc.advance;const J0=Vc?Mu[0]*bo.scale-Lt*hl:Mu[1]*bo.scale-Lt*hl;J0>0&&J0>Pu&&(Pu=J0)}else{const Sc=fi[bo.fontStack],Mu=Sc&&Sc[pl];if(Mu&&Mu.rect)l0=Mu.rect,qc=Mu.metrics;else{const J0=ri[bo.fontStack],Lp=J0&&J0[pl];if(!Lp)continue;qc=Lp.metrics}Fl=(hl-bo.scale)*Lt}Vc?(rn.verticalizable=!0,Tu.push({glyph:pl,imageName:u0,x:ka,y:Pa+Fl,vertical:Vc,scale:bo.scale,fontStack:bo.fontStack,sectionIndex:tc,metrics:qc,rect:l0}),ka+=Y0*bo.scale+Si):(Tu.push({glyph:pl,imageName:u0,x:ka,y:Pa+Fl,vertical:Vc,scale:bo.scale,fontStack:bo.fontStack,sectionIndex:tc,metrics:qc,rect:l0}),ka+=qc.advance*bo.scale+Si)}Tu.length!==0&&(Ls=Math.max(ka-Si,Ls),eA(Tu,0,Tu.length-1,cl,Pu)),ka=0;const qa=Tn*hl+Pu;su.lineOffset=Math.max(Pu,Ol),Pa+=qa,Ec=Math.max(qa,Ec),++ps}var $s;const fl=Pa-qd,{horizontalAlign:Rl,verticalAlign:Lu}=j2(Zn);(function(ds,hl,Ol,su,Tu,Pu,qa,Gs,bo){const tc=(hl-Ol)*Tu;let pl=0;pl=Pu!==qa?-Gs*su-qd:(-su*bo+.5)*qa;for(const Fl of ds)for(const qc of Fl.positionedGlyphs)qc.x+=tc,qc.y+=pl})(rn.positionedLines,cl,Rl,Lu,Ls,Ec,Tn,fl,Un.length),rn.top+=-Lu*fl,rn.bottom=rn.top+fl,rn.left+=-Rl*Ls,rn.right=rn.left+Ls}(an,p,_,S,xr,V,Q,ie,Me,he,Ge,Vt),!function(rn){for(const ri of rn)if(ri.positionedGlyphs.length!==0)return!1;return!0}(Tr)&&an}const $d={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Kv(y,p,_,S,z,O){if(p.imageName){const V=S[p.imageName];return V?V.displaySize[0]*p.scale*Lt/O+z:0}{const V=_[p.fontStack],Q=V&&V[y];return Q?Q.metrics.advance*p.scale+z:0}}function Qv(y,p,_,S){const z=Math.pow(y-p,2);return S?y<p?z/2:2*z:z+Math.abs(_)*_}function Qk(y,p,_){let S=0;return y===10&&(S-=1e4),_&&(S+=150),y!==40&&y!==65288||(S+=50),p!==41&&p!==65289||(S+=50),S}function e_(y,p,_,S,z,O){let V=null,Q=Qv(p,_,z,O);for(const ie of S){const he=Qv(p-ie.x,_,z,O)+ie.badness;he<=Q&&(V=ie,Q=he)}return{index:y,x:p,priorBreak:V,badness:Q}}function t_(y){return y?t_(y.priorBreak).concat(y.index):[]}function B2(y,p,_,S,z,O,V){if(O!=="point")return[];if(!y)return[];const Q=[],ie=function(Ge,et,rt,Vt,Ot,xr){let jr=0;for(let gr=0;gr<Ge.length();gr++){const Tr=Ge.getSection(gr);jr+=Kv(Ge.getCharCode(gr),Tr,Vt,Ot,et,xr)}return jr/Math.max(1,Math.ceil(jr/rt))}(y,p,_,S,z,V),he=y.text.indexOf("")>=0;let Ee=0;for(let Ge=0;Ge<y.length();Ge++){const et=y.getSection(Ge),rt=y.getCharCode(Ge);if($d[rt]||(Ee+=Kv(rt,et,S,z,p,V)),Ge<y.length()-1){const Vt=!((Me=rt)<11904||!(An["Bopomofo Extended"](Me)||An.Bopomofo(Me)||An["CJK Compatibility Forms"](Me)||An["CJK Compatibility Ideographs"](Me)||An["CJK Compatibility"](Me)||An["CJK Radicals Supplement"](Me)||An["CJK Strokes"](Me)||An["CJK Symbols and Punctuation"](Me)||An["CJK Unified Ideographs Extension A"](Me)||An["CJK Unified Ideographs"](Me)||An["Enclosed CJK Letters and Months"](Me)||An["Halfwidth and Fullwidth Forms"](Me)||An.Hiragana(Me)||An["Ideographic Description Characters"](Me)||An["Kangxi Radicals"](Me)||An["Katakana Phonetic Extensions"](Me)||An.Katakana(Me)||An["Vertical Forms"](Me)||An["Yi Radicals"](Me)||An["Yi Syllables"](Me)));(Kk[rt]||Vt||et.imageName)&&Q.push(e_(Ge+1,Ee,ie,Q,Qk(rt,y.getCharCode(Ge+1),Vt&&he),!1))}}var Me;return t_(e_(y.length(),Ee,ie,Q,0,!0))}function j2(y){let p=.5,_=.5;switch(y){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(y){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:p,verticalAlign:_}}function eA(y,p,_,S,z){if(!S&&!z)return;const O=y[_],V=(y[_].x+O.metrics.advance*O.scale)*S;for(let Q=p;Q<=_;Q++)y[Q].x-=V,y[Q].y+=z}function tA(y,p,_){const{horizontalAlign:S,verticalAlign:z}=j2(_),O=p[0]-y.displaySize[0]*S,V=p[1]-y.displaySize[1]*z;return{image:y,top:V,bottom:V+y.displaySize[1],left:O,right:O+y.displaySize[0]}}function r_(y,p,_,S,z,O){const V=y.image;let Q;if(V.content){const Ot=V.content,xr=V.pixelRatio||1;Q=[Ot[0]/xr,Ot[1]/xr,V.displaySize[0]-Ot[2]/xr,V.displaySize[1]-Ot[3]/xr]}const ie=p.left*O,he=p.right*O;let Ee,Me,Ge,et;_==="width"||_==="both"?(et=z[0]+ie-S[3],Me=z[0]+he+S[1]):(et=z[0]+(ie+he-V.displaySize[0])/2,Me=et+V.displaySize[0]);const rt=p.top*O,Vt=p.bottom*O;return _==="height"||_==="both"?(Ee=z[1]+rt-S[0],Ge=z[1]+Vt+S[2]):(Ee=z[1]+(rt+Vt-V.displaySize[1])/2,Ge=Ee+V.displaySize[1]),{image:V,top:Ee,right:Me,bottom:Ge,left:et,collisionPadding:Q}}const X0=128;function n_(y,p){const{expression:_}=p;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new Ho(y+1))};if(_.kind==="source")return{kind:"source"};{const{zoomStops:S,interpolationType:z}=_;let O=0;for(;O<S.length&&S[O]<=y;)O++;O=Math.max(0,O-1);let V=O;for(;V<S.length&&S[V]<y+1;)V++;V=Math.min(S.length-1,V);const Q=S[O],ie=S[V];return _.kind==="composite"?{kind:"composite",minZoom:Q,maxZoom:ie,interpolationType:z}:{kind:"camera",minZoom:Q,maxZoom:ie,minSize:_.evaluate(new Ho(Q)),maxSize:_.evaluate(new Ho(ie)),interpolationType:z}}}class bf extends ht{constructor(p,_,S,z){super(p,_),this.angle=S,z!==void 0&&(this.segment=z)}clone(){return new bf(this.x,this.y,this.angle,this.segment)}}function i_(y,p,_,S,z){if(p.segment===void 0)return!0;let O=p,V=p.segment+1,Q=0;for(;Q>-_/2;){if(V--,V<0)return!1;Q-=y[V].dist(O),O=y[V]}Q+=y[V].dist(y[V+1]),V++;const ie=[];let he=0;for(;Q<_/2;){const Ee=y[V],Me=y[V+1];if(!Me)return!1;let Ge=y[V-1].angleTo(Ee)-Ee.angleTo(Me);for(Ge=Math.abs((Ge+3*Math.PI)%(2*Math.PI)-Math.PI),ie.push({distance:Q,angleDelta:Ge}),he+=Ge;Q-ie[0].distance>S;)he-=ie.shift().angleDelta;if(he>z)return!1;V++,Q+=Ee.dist(Me)}return!0}function o_(y){let p=0;for(let _=0;_<y.length-1;_++)p+=y[_].dist(y[_+1]);return p}function a_(y,p,_){return y?.6*p*_:0}function s_(y,p){return Math.max(y?y.right-y.left:0,p?p.right-p.left:0)}function rA(y,p,_,S,z,O){const V=a_(_,z,O),Q=s_(_,S)*O;let ie=0;const he=o_(y)/2;for(let Ee=0;Ee<y.length-1;Ee++){const Me=y[Ee],Ge=y[Ee+1],et=Me.dist(Ge);if(ie+et>he){const rt=(he-ie)/et,Vt=Oo(Me.x,Ge.x,rt),Ot=Oo(Me.y,Ge.y,rt),xr=new bf(Vt,Ot,Ge.angleTo(Me),Ee);return xr._round(),!V||i_(y,xr,Q,V,p)?xr:void 0}ie+=et}}function nA(y,p,_,S,z,O,V,Q,ie){const he=a_(S,O,V),Ee=s_(S,z),Me=Ee*V,Ge=y[0].x===0||y[0].x===ie||y[0].y===0||y[0].y===ie;return p-Me<p/4&&(p=Me+p/4),l_(y,Ge?p/2*Q%p:(Ee/2+2*O)*V*Q%p,p,he,_,Me,Ge,!1,ie)}function l_(y,p,_,S,z,O,V,Q,ie){const he=O/2,Ee=o_(y);let Me=0,Ge=p-_,et=[];for(let rt=0;rt<y.length-1;rt++){const Vt=y[rt],Ot=y[rt+1],xr=Vt.dist(Ot),jr=Ot.angleTo(Vt);for(;Ge+_<Me+xr;){Ge+=_;const gr=(Ge-Me)/xr,Tr=Oo(Vt.x,Ot.x,gr),an=Oo(Vt.y,Ot.y,gr);if(Tr>=0&&Tr<ie&&an>=0&&an<ie&&Ge-he>=0&&Ge+he<=Ee){const rn=new bf(Tr,an,jr,rt);rn._round(),S&&!i_(y,rn,O,S,z)||et.push(rn)}}Me+=xr}return Q||et.length||V||(et=l_(y,Me/2,_,S,z,O,V,!0,ie)),et}function u_(y,p,_,S,z){const O=[];for(let V=0;V<y.length;V++){const Q=y[V];let ie;for(let he=0;he<Q.length-1;he++){let Ee=Q[he],Me=Q[he+1];Ee.x<p&&Me.x<p||(Ee.x<p?Ee=new ht(p,Ee.y+(p-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round():Me.x<p&&(Me=new ht(p,Ee.y+(p-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round()),Ee.y<_&&Me.y<_||(Ee.y<_?Ee=new ht(Ee.x+(_-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),_)._round():Me.y<_&&(Me=new ht(Ee.x+(_-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),_)._round()),Ee.x>=S&&Me.x>=S||(Ee.x>=S?Ee=new ht(S,Ee.y+(S-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round():Me.x>=S&&(Me=new ht(S,Ee.y+(S-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round()),Ee.y>=z&&Me.y>=z||(Ee.y>=z?Ee=new ht(Ee.x+(z-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),z)._round():Me.y>=z&&(Me=new ht(Ee.x+(z-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),z)._round()),ie&&Ee.equals(ie[ie.length-1])||(ie=[Ee],O.push(ie)),ie.push(Me)))))}}return O}function c_(y,p,_,S){const z=[],O=y.image,V=O.pixelRatio,Q=O.paddedRect.w-2,ie=O.paddedRect.h-2,he=y.right-y.left,Ee=y.bottom-y.top,Me=O.stretchX||[[0,Q]],Ge=O.stretchY||[[0,ie]],et=(Tn,Zn)=>Tn+Zn[1]-Zn[0],rt=Me.reduce(et,0),Vt=Ge.reduce(et,0),Ot=Q-rt,xr=ie-Vt;let jr=0,gr=rt,Tr=0,an=Vt,rn=0,ri=Ot,fi=0,Wn=xr;if(O.content&&S){const Tn=O.content;jr=Gd(Me,0,Tn[0]),Tr=Gd(Ge,0,Tn[1]),gr=Gd(Me,Tn[0],Tn[2]),an=Gd(Ge,Tn[1],Tn[3]),rn=Tn[0]-jr,fi=Tn[1]-Tr,ri=Tn[2]-Tn[0]-gr,Wn=Tn[3]-Tn[1]-an}const Un=(Tn,Zn,$n,wn)=>{const Si=Hd(Tn.stretch-jr,gr,he,y.left),mi=Wd(Tn.fixed-rn,ri,Tn.stretch,rt),po=Hd(Zn.stretch-Tr,an,Ee,y.top),ka=Wd(Zn.fixed-fi,Wn,Zn.stretch,Vt),Pa=Hd($n.stretch-jr,gr,he,y.left),Ls=Wd($n.fixed-rn,ri,$n.stretch,rt),Ec=Hd(wn.stretch-Tr,an,Ee,y.top),cl=Wd(wn.fixed-fi,Wn,wn.stretch,Vt),ps=new ht(Si,po),$s=new ht(Pa,po),fl=new ht(Pa,Ec),Rl=new ht(Si,Ec),Lu=new ht(mi/V,ka/V),ds=new ht(Ls/V,cl/V),hl=p*Math.PI/180;if(hl){const Tu=Math.sin(hl),Pu=Math.cos(hl),qa=[Pu,-Tu,Tu,Pu];ps._matMult(qa),$s._matMult(qa),Rl._matMult(qa),fl._matMult(qa)}const Ol=Tn.stretch+Tn.fixed,su=Zn.stretch+Zn.fixed;return{tl:ps,tr:$s,bl:Rl,br:fl,tex:{x:O.paddedRect.x+1+Ol,y:O.paddedRect.y+1+su,w:$n.stretch+$n.fixed-Ol,h:wn.stretch+wn.fixed-su},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lu,pixelOffsetBR:ds,minFontScaleX:ri/V/he,minFontScaleY:Wn/V/Ee,isSDF:_}};if(S&&(O.stretchX||O.stretchY)){const Tn=f_(Me,Ot,rt),Zn=f_(Ge,xr,Vt);for(let $n=0;$n<Tn.length-1;$n++){const wn=Tn[$n],Si=Tn[$n+1];for(let mi=0;mi<Zn.length-1;mi++)z.push(Un(wn,Zn[mi],Si,Zn[mi+1]))}}else z.push(Un({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Q+1},{fixed:0,stretch:ie+1}));return z}function Gd(y,p,_){let S=0;for(const z of y)S+=Math.max(p,Math.min(_,z[1]))-Math.max(p,Math.min(_,z[0]));return S}function f_(y,p,_){const S=[{fixed:-1,stretch:0}];for(const[z,O]of y){const V=S[S.length-1];S.push({fixed:z-V.stretch,stretch:V.stretch}),S.push({fixed:z-V.stretch,stretch:V.stretch+(O-z)})}return S.push({fixed:p+1,stretch:_}),S}function Hd(y,p,_,S){return y/p*_+S}function Wd(y,p,_,S){return y-p*_/S}Dn("Anchor",bf);class Zd{constructor(p,_,S,z,O,V,Q,ie,he,Ee){if(this.boxStartIndex=p.length,he){let Me=V.top,Ge=V.bottom;const et=V.collisionPadding;et&&(Me-=et[1],Ge+=et[3]);let rt=Ge-Me;rt>0&&(rt=Math.max(10,rt),this.circleDiameter=rt)}else{let Me=V.top*Q-ie[0],Ge=V.bottom*Q+ie[2],et=V.left*Q-ie[3],rt=V.right*Q+ie[1];const Vt=V.collisionPadding;if(Vt&&(et-=Vt[0]*Q,Me-=Vt[1]*Q,rt+=Vt[2]*Q,Ge+=Vt[3]*Q),Ee){const Ot=new ht(et,Me),xr=new ht(rt,Me),jr=new ht(et,Ge),gr=new ht(rt,Ge),Tr=Ee*Math.PI/180;Ot._rotate(Tr),xr._rotate(Tr),jr._rotate(Tr),gr._rotate(Tr),et=Math.min(Ot.x,xr.x,jr.x,gr.x),rt=Math.max(Ot.x,xr.x,jr.x,gr.x),Me=Math.min(Ot.y,xr.y,jr.y,gr.y),Ge=Math.max(Ot.y,xr.y,jr.y,gr.y)}p.emplaceBack(_.x,_.y,et,Me,rt,Ge,S,z,O)}this.boxEndIndex=p.length}}class iA{constructor(p=[],_=oA){if(this.data=p,this.length=this.data.length,this.compare=_,this.length>0)for(let S=(this.length>>1)-1;S>=0;S--)this._down(S)}push(p){this.data.push(p),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const p=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),p}peek(){return this.data[0]}_up(p){const{data:_,compare:S}=this,z=_[p];for(;p>0;){const O=p-1>>1,V=_[O];if(S(z,V)>=0)break;_[p]=V,p=O}_[p]=z}_down(p){const{data:_,compare:S}=this,z=this.length>>1,O=_[p];for(;p<z;){let V=1+(p<<1),Q=_[V];const ie=V+1;if(ie<this.length&&S(_[ie],Q)<0&&(V=ie,Q=_[ie]),S(Q,O)>=0)break;_[p]=Q,p=V}_[p]=O}}function oA(y,p){return y<p?-1:y>p?1:0}function aA(y,p=1,_=!1){let S=1/0,z=1/0,O=-1/0,V=-1/0;const Q=y[0];for(let et=0;et<Q.length;et++){const rt=Q[et];(!et||rt.x<S)&&(S=rt.x),(!et||rt.y<z)&&(z=rt.y),(!et||rt.x>O)&&(O=rt.x),(!et||rt.y>V)&&(V=rt.y)}const ie=Math.min(O-S,V-z);let he=ie/2;const Ee=new iA([],sA);if(ie===0)return new ht(S,z);for(let et=S;et<O;et+=ie)for(let rt=z;rt<V;rt+=ie)Ee.push(new xh(et+he,rt+he,he,y));let Me=function(et){let rt=0,Vt=0,Ot=0;const xr=et[0];for(let jr=0,gr=xr.length,Tr=gr-1;jr<gr;Tr=jr++){const an=xr[jr],rn=xr[Tr],ri=an.x*rn.y-rn.x*an.y;Vt+=(an.x+rn.x)*ri,Ot+=(an.y+rn.y)*ri,rt+=3*ri}return new xh(Vt/rt,Ot/rt,0,et)}(y),Ge=Ee.length;for(;Ee.length;){const et=Ee.pop();(et.d>Me.d||!Me.d)&&(Me=et,_&&console.log("found best %d after %d probes",Math.round(1e4*et.d)/1e4,Ge)),et.max-Me.d<=p||(he=et.h/2,Ee.push(new xh(et.p.x-he,et.p.y-he,he,y)),Ee.push(new xh(et.p.x+he,et.p.y-he,he,y)),Ee.push(new xh(et.p.x-he,et.p.y+he,he,y)),Ee.push(new xh(et.p.x+he,et.p.y+he,he,y)),Ge+=4)}return _&&(console.log(`num probes: ${Ge}`),console.log(`best distance: ${Me.d}`)),Me.p}function sA(y,p){return p.max-y.max}function xh(y,p,_,S){this.p=new ht(y,p),this.h=_,this.d=function(z,O){let V=!1,Q=1/0;for(let ie=0;ie<O.length;ie++){const he=O[ie];for(let Ee=0,Me=he.length,Ge=Me-1;Ee<Me;Ge=Ee++){const et=he[Ee],rt=he[Ge];et.y>z.y!=rt.y>z.y&&z.x<(rt.x-et.x)*(z.y-et.y)/(rt.y-et.y)+et.x&&(V=!V),Q=Math.min(Q,qs(z,et,rt))}}return(V?1:-1)*Math.sqrt(Q)}(this.p,S),this.max=this.d+this.h*Math.SQRT2}const U2=Number.POSITIVE_INFINITY;function h_(y,p){return p[1]!==U2?function(_,S,z){let O=0,V=0;switch(S=Math.abs(S),z=Math.abs(z),_){case"top-right":case"top-left":case"top":V=z-7;break;case"bottom-right":case"bottom-left":case"bottom":V=7-z}switch(_){case"top-right":case"bottom-right":case"right":O=-S;break;case"top-left":case"bottom-left":case"left":O=S}return[O,V]}(y,p[0],p[1]):function(_,S){let z=0,O=0;S<0&&(S=0);const V=S/Math.sqrt(2);switch(_){case"top-right":case"top-left":O=V-7;break;case"bottom-right":case"bottom-left":O=7-V;break;case"bottom":O=7-S;break;case"top":O=S-7}switch(_){case"top-right":case"bottom-right":z=-V;break;case"top-left":case"bottom-left":z=V;break;case"left":z=S;break;case"right":z=-S}return[z,O]}(y,p[0])}function q2(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lA(y,p,_,S,z,O,V,Q,ie,he,Ee){let Me=O.textMaxSize.evaluate(p,{});Me===void 0&&(Me=V);const Ge=y.layers[0].layout,et=Ge.get("icon-offset").evaluate(p,{},Ee),rt=d_(_.horizontal),Vt=V/24,Ot=y.tilePixelRatio*Vt,xr=y.tilePixelRatio*Me/24,jr=y.tilePixelRatio*Q,gr=y.tilePixelRatio*Ge.get("symbol-spacing"),Tr=Ge.get("text-padding")*y.tilePixelRatio,an=function(wn,Si,mi,po=1){const ka=wn.get("icon-padding").evaluate(Si,{},mi),Pa=ka&&ka.values;return[Pa[0]*po,Pa[1]*po,Pa[2]*po,Pa[3]*po]}(Ge,p,Ee,y.tilePixelRatio),rn=Ge.get("text-max-angle")/180*Math.PI,ri=Ge.get("text-rotation-alignment")!=="viewport"&&Ge.get("symbol-placement")!=="point",fi=Ge.get("icon-rotation-alignment")==="map"&&Ge.get("symbol-placement")!=="point",Wn=Ge.get("symbol-placement"),Un=gr/2,Tn=Ge.get("icon-text-fit");let Zn;S&&Tn!=="none"&&(y.allowVerticalPlacement&&_.vertical&&(Zn=r_(S,_.vertical,Tn,Ge.get("icon-text-fit-padding"),et,Vt)),rt&&(S=r_(S,rt,Tn,Ge.get("icon-text-fit-padding"),et,Vt)));const $n=(wn,Si)=>{Si.x<0||Si.x>=$o||Si.y<0||Si.y>=$o||function(mi,po,ka,Pa,Ls,Ec,cl,ps,$s,fl,Rl,Lu,ds,hl,Ol,su,Tu,Pu,qa,Gs,bo,tc,pl,Fl,qc){const l0=mi.addToLineVertexArray(po,ka);let u0,Y0,Vc,Sc,Mu=0,J0=0,Lp=0,T_=0,K2=-1,Q2=-1;const K0={};let P_=en.exports(""),em=0,tm=0;if(ps._unevaluatedLayout.getValue("text-radial-offset")===void 0?[em,tm]=ps.layout.get("text-offset").evaluate(bo,{},Fl).map(Du=>Du*Lt):(em=ps.layout.get("text-radial-offset").evaluate(bo,{},Fl)*Lt,tm=U2),mi.allowVerticalPlacement&&Pa.vertical){const Du=ps.layout.get("text-rotate").evaluate(bo,{},Fl)+90;Vc=new Zd($s,po,fl,Rl,Lu,Pa.vertical,ds,hl,Ol,Du),cl&&(Sc=new Zd($s,po,fl,Rl,Lu,cl,Tu,Pu,Ol,Du))}if(Ls){const Du=ps.layout.get("icon-rotate").evaluate(bo,{}),T0=ps.layout.get("icon-text-fit")!=="none",Tp=c_(Ls,Du,pl,T0),Pp=cl?c_(cl,Du,pl,T0):void 0;Y0=new Zd($s,po,fl,Rl,Lu,Ls,Tu,Pu,!1,Du),Mu=4*Tp.length;const z_=mi.iconSizeData;let Zf=null;z_.kind==="source"?(Zf=[X0*ps.layout.get("icon-size").evaluate(bo,{})],Zf[0]>wf&&le(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):z_.kind==="composite"&&(Zf=[X0*tc.compositeIconSizes[0].evaluate(bo,{},Fl),X0*tc.compositeIconSizes[1].evaluate(bo,{},Fl)],(Zf[0]>wf||Zf[1]>wf)&&le(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mi.addSymbols(mi.icon,Tp,Zf,Gs,qa,bo,s.WritingMode.none,po,l0.lineStartIndex,l0.lineLength,-1,Fl),K2=mi.icon.placedSymbolArray.length-1,Pp&&(J0=4*Pp.length,mi.addSymbols(mi.icon,Pp,Zf,Gs,qa,bo,s.WritingMode.vertical,po,l0.lineStartIndex,l0.lineLength,-1,Fl),Q2=mi.icon.placedSymbolArray.length-1)}const M_=Object.keys(Pa.horizontal);for(const Du of M_){const T0=Pa.horizontal[Du];if(!u0){P_=en.exports(T0.text);const Pp=ps.layout.get("text-rotate").evaluate(bo,{},Fl);u0=new Zd($s,po,fl,Rl,Lu,T0,ds,hl,Ol,Pp)}const Tp=T0.positionedLines.length===1;if(Lp+=p_(mi,po,T0,Ec,ps,Ol,bo,su,l0,Pa.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,Tp?M_:[Du],K0,K2,tc,Fl),Tp)break}Pa.vertical&&(T_+=p_(mi,po,Pa.vertical,Ec,ps,Ol,bo,su,l0,s.WritingMode.vertical,["vertical"],K0,Q2,tc,Fl));const wA=u0?u0.boxStartIndex:mi.collisionBoxArray.length,xA=u0?u0.boxEndIndex:mi.collisionBoxArray.length,kA=Vc?Vc.boxStartIndex:mi.collisionBoxArray.length,AA=Vc?Vc.boxEndIndex:mi.collisionBoxArray.length,EA=Y0?Y0.boxStartIndex:mi.collisionBoxArray.length,SA=Y0?Y0.boxEndIndex:mi.collisionBoxArray.length,CA=Sc?Sc.boxStartIndex:mi.collisionBoxArray.length,IA=Sc?Sc.boxEndIndex:mi.collisionBoxArray.length;let c0=-1;const Qd=(Du,T0)=>Du&&Du.circleDiameter?Math.max(Du.circleDiameter,T0):T0;c0=Qd(u0,c0),c0=Qd(Vc,c0),c0=Qd(Y0,c0),c0=Qd(Sc,c0);const D_=c0>-1?1:0;D_&&(c0*=qc/Lt),mi.glyphOffsetArray.length>=kh.MAX_GLYPHS&&le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bo.sortKey!==void 0&&mi.addToSortKeyRanges(mi.symbolInstances.length,bo.sortKey),mi.symbolInstances.emplaceBack(po.x,po.y,K0.right>=0?K0.right:-1,K0.center>=0?K0.center:-1,K0.left>=0?K0.left:-1,K0.vertical||-1,K2,Q2,P_,wA,xA,kA,AA,EA,SA,CA,IA,fl,Lp,T_,Mu,J0,D_,0,ds,em,tm,c0)}(y,Si,wn,_,S,z,Zn,y.layers[0],y.collisionBoxArray,p.index,p.sourceLayerIndex,y.index,Ot,[Tr,Tr,Tr,Tr],ri,ie,jr,an,fi,et,p,O,he,Ee,V)};if(Wn==="line")for(const wn of u_(p.geometry,0,0,$o,$o)){const Si=nA(wn,gr,rn,_.vertical||rt,S,24,xr,y.overscaling,$o);for(const mi of Si){const po=rt;po&&uA(y,po.text,Un,mi)||$n(wn,mi)}}else if(Wn==="line-center"){for(const wn of p.geometry)if(wn.length>1){const Si=rA(wn,rn,_.vertical||rt,S,24,xr);Si&&$n(wn,Si)}}else if(p.type==="Polygon")for(const wn of I0(p.geometry,0)){const Si=aA(wn,16);$n(wn[0],new bf(Si.x,Si.y,0))}else if(p.type==="LineString")for(const wn of p.geometry)$n(wn,new bf(wn[0].x,wn[0].y,0));else if(p.type==="Point")for(const wn of p.geometry)for(const Si of wn)$n([Si],new bf(Si.x,Si.y,0))}const wf=32640;function p_(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt){const Vt=function(jr,gr,Tr,an,rn,ri,fi,Wn){const Un=an.layout.get("text-rotate").evaluate(ri,{})*Math.PI/180,Tn=[];for(const Zn of gr.positionedLines)for(const $n of Zn.positionedGlyphs){if(!$n.rect)continue;const wn=$n.rect||{};let Si=4,mi=!0,po=1,ka=0;const Pa=(rn||Wn)&&$n.vertical,Ls=$n.metrics.advance*$n.scale/2;if(Wn&&gr.verticalizable){const qa=($n.scale-1)*Lt,Gs=(Lt-$n.metrics.width*$n.scale)/2;ka=Zn.lineOffset/2-($n.imageName?-Gs:qa)}if($n.imageName){const qa=fi[$n.imageName];mi=qa.sdf,po=qa.pixelRatio,Si=1/po}const Ec=rn?[$n.x+Ls,$n.y]:[0,0];let cl=rn?[0,0]:[$n.x+Ls+Tr[0],$n.y+Tr[1]-ka],ps=[0,0];Pa&&(ps=cl,cl=[0,0]);const $s=($n.metrics.left-Si)*$n.scale-Ls+cl[0],fl=(-$n.metrics.top-Si)*$n.scale+cl[1],Rl=$s+wn.w*$n.scale/po,Lu=fl+wn.h*$n.scale/po,ds=new ht($s,fl),hl=new ht(Rl,fl),Ol=new ht($s,Lu),su=new ht(Rl,Lu);if(Pa){const qa=new ht(-Ls,Ls-qd),Gs=-Math.PI/2,bo=12-Ls,tc=new ht(22-bo,-($n.imageName?bo:0)),pl=new ht(...ps);ds._rotateAround(Gs,qa)._add(tc)._add(pl),hl._rotateAround(Gs,qa)._add(tc)._add(pl),Ol._rotateAround(Gs,qa)._add(tc)._add(pl),su._rotateAround(Gs,qa)._add(tc)._add(pl)}if(Un){const qa=Math.sin(Un),Gs=Math.cos(Un),bo=[Gs,-qa,qa,Gs];ds._matMult(bo),hl._matMult(bo),Ol._matMult(bo),su._matMult(bo)}const Tu=new ht(0,0),Pu=new ht(0,0);Tn.push({tl:ds,tr:hl,bl:Ol,br:su,tex:wn,writingMode:gr.writingMode,glyphOffset:Ec,sectionIndex:$n.sectionIndex,isSDF:mi,pixelOffsetTL:Tu,pixelOffsetBR:Pu,minFontScaleX:0,minFontScaleY:0})}return Tn}(0,_,Q,z,O,V,S,y.allowVerticalPlacement),Ot=y.textSizeData;let xr=null;Ot.kind==="source"?(xr=[X0*z.layout.get("text-size").evaluate(V,{})],xr[0]>wf&&le(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ot.kind==="composite"&&(xr=[X0*et.compositeTextSizes[0].evaluate(V,{},rt),X0*et.compositeTextSizes[1].evaluate(V,{},rt)],(xr[0]>wf||xr[1]>wf)&&le(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),y.addSymbols(y.text,Vt,xr,Q,O,V,he,p,ie.lineStartIndex,ie.lineLength,Ge,rt);for(const jr of Ee)Me[jr]=y.text.placedSymbolArray.length-1;return 4*Vt.length}function d_(y){for(const p in y)return y[p];return null}function uA(y,p,_,S){const z=y.compareText;if(p in z){const O=z[p];for(let V=O.length-1;V>=0;V--)if(S.dist(O[V])<_)return!0}else z[p]=[];return z[p].push(S),!1}const cA=L0.VectorTileFeature.types,fA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xd(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge){const et=Q?Math.min(wf,Math.round(Q[0])):0,rt=Q?Math.min(wf,Math.round(Q[1])):0;y.emplaceBack(p,_,Math.round(32*S),Math.round(32*z),O,V,(et<<1)+(ie?1:0),rt,16*he,16*Ee,256*Me,256*Ge)}function V2(y,p,_){y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_)}function hA(y){for(const p of y.sections)if(Mi(p.text))return!0;return!1}class $2{constructor(p){this.layoutVertexArray=new Ke,this.indexArray=new kr,this.programConfigurations=p,this.segments=new zt,this.dynamicLayoutVertexArray=new it,this.opacityVertexArray=new _t,this.placedSymbolArray=new mn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(p,_,S,z){this.isEmpty()||(S&&(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,X.members),this.indexBuffer=p.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=p.createVertexBuffer(this.dynamicLayoutVertexArray,ne.members,!0),this.opacityVertexBuffer=p.createVertexBuffer(this.opacityVertexArray,fA,!0),this.opacityVertexBuffer.itemSize=1),(S||z)&&this.programConfigurations.upload(p))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dn("SymbolBuffers",$2);class G2{constructor(p,_,S){this.layoutVertexArray=new p,this.layoutAttributes=_,this.indexArray=new S,this.segments=new zt,this.collisionVertexArray=new Er}upload(p){this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=p.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=p.createVertexBuffer(this.collisionVertexArray,me.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dn("CollisionBuffers",G2);class kh{constructor(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(V=>V.id),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ou([]),this.placementViewportMatrix=ou([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=n_(this.zoom,_["text-size"]),this.iconSizeData=n_(this.zoom,_["icon-size"]);const S=this.layers[0].layout,z=S.get("symbol-sort-key"),O=S.get("symbol-z-order");this.canOverlap=W2(S,"text-overlap","text-allow-overlap")!=="never"||W2(S,"icon-overlap","icon-allow-overlap")!=="never"||S.get("text-ignore-placement")||S.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!z.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,S.get("symbol-placement")==="point"&&(this.writingModes=S.get("text-writing-mode").map(V=>s.WritingMode[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=p.sourceID}createArrays(){this.text=new $2(new Wo(this.layers,this.zoom,p=>/^text/.test(p))),this.icon=new $2(new Wo(this.layers,this.zoom,p=>/^icon/.test(p))),this.glyphOffsetArray=new En,this.lineVertexArray=new Vn,this.symbolInstances=new zn}calculateGlyphDependencies(p,_,S,z,O){for(let V=0;V<p.length;V++)if(_[p.charCodeAt(V)]=!0,(S||z)&&O){const Q=At[p.charAt(V)];Q&&(_[Q.charCodeAt(0)]=!0)}}populate(p,_,S){const z=this.layers[0],O=z.layout,V=O.get("text-font"),Q=O.get("text-field"),ie=O.get("icon-image"),he=(Q.value.kind!=="constant"||Q.value.value instanceof Ht&&!Q.value.value.isEmpty()||Q.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),Ee=ie.value.kind!=="constant"||!!ie.value.value||Object.keys(ie.parameters).length>0,Me=O.get("symbol-sort-key");if(this.features=[],!he&&!Ee)return;const Ge=_.iconDependencies,et=_.glyphDependencies,rt=_.availableImages,Vt=new Ho(this.zoom);for(const{feature:Ot,id:xr,index:jr,sourceLayerIndex:gr}of p){const Tr=z._featureFilter.needGeometry,an=Ks(Ot,Tr);if(!z._featureFilter.filter(Vt,an,S))continue;let rn,ri;if(Tr||(an.geometry=js(Ot)),he){const Wn=z.getValueAndResolveTokens("text-field",an,S,rt),Un=Ht.factory(Wn);hA(Un)&&(this.hasRTLText=!0),(!this.hasRTLText||ru()==="unavailable"||this.hasRTLText&&Cs.isParsed())&&(rn=st(Un,z,an))}if(Ee){const Wn=z.getValueAndResolveTokens("icon-image",an,S,rt);ri=Wn instanceof ir?Wn:ir.fromString(Wn)}if(!rn&&!ri)continue;const fi=this.sortFeaturesByKey?Me.evaluate(an,{},S):void 0;if(this.features.push({id:xr,text:rn,icon:ri,index:jr,sourceLayerIndex:gr,geometry:an.geometry,properties:Ot.properties,type:cA[Ot.type],sortKey:fi}),ri&&(Ge[ri.name]=!0),rn){const Wn=V.evaluate(an,{},S).join(","),Un=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Tn of rn.sections)if(Tn.image)Ge[Tn.image.name]=!0;else{const Zn=Ss(rn.toString()),$n=Tn.fontStack||Wn,wn=et[$n]=et[$n]||{};this.calculateGlyphDependencies(Tn.text,wn,Un,this.allowVerticalPlacement,Zn)}}}O.get("symbol-placement")==="line"&&(this.features=function(Ot){const xr={},jr={},gr=[];let Tr=0;function an(Wn){gr.push(Ot[Wn]),Tr++}function rn(Wn,Un,Tn){const Zn=jr[Wn];return delete jr[Wn],jr[Un]=Zn,gr[Zn].geometry[0].pop(),gr[Zn].geometry[0]=gr[Zn].geometry[0].concat(Tn[0]),Zn}function ri(Wn,Un,Tn){const Zn=xr[Un];return delete xr[Un],xr[Wn]=Zn,gr[Zn].geometry[0].shift(),gr[Zn].geometry[0]=Tn[0].concat(gr[Zn].geometry[0]),Zn}function fi(Wn,Un,Tn){const Zn=Tn?Un[0][Un[0].length-1]:Un[0][0];return`${Wn}:${Zn.x}:${Zn.y}`}for(let Wn=0;Wn<Ot.length;Wn++){const Un=Ot[Wn],Tn=Un.geometry,Zn=Un.text?Un.text.toString():null;if(!Zn){an(Wn);continue}const $n=fi(Zn,Tn),wn=fi(Zn,Tn,!0);if($n in jr&&wn in xr&&jr[$n]!==xr[wn]){const Si=ri($n,wn,Tn),mi=rn($n,wn,gr[Si].geometry);delete xr[$n],delete jr[wn],jr[fi(Zn,gr[mi].geometry,!0)]=mi,gr[Si].geometry=null}else $n in jr?rn($n,wn,Tn):wn in xr?ri($n,wn,Tn):(an(Wn),xr[$n]=Tr-1,jr[wn]=Tr-1)}return gr.filter(Wn=>Wn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ot,xr)=>Ot.sortKey-xr.sortKey)}update(p,_,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(p,_,this.layers,S),this.icon.programConfigurations.updatePaintArrays(p,_,this.layers,S))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(p){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(p),this.iconCollisionBox.upload(p)),this.text.upload(p,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(p,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(p,_){const S=this.lineVertexArray.length;if(p.segment!==void 0){let z=p.dist(_[p.segment+1]),O=p.dist(_[p.segment]);const V={};for(let Q=p.segment+1;Q<_.length;Q++)V[Q]={x:_[Q].x,y:_[Q].y,tileUnitDistanceFromAnchor:z},Q<_.length-1&&(z+=_[Q+1].dist(_[Q]));for(let Q=p.segment||0;Q>=0;Q--)V[Q]={x:_[Q].x,y:_[Q].y,tileUnitDistanceFromAnchor:O},Q>0&&(O+=_[Q-1].dist(_[Q]));for(let Q=0;Q<_.length;Q++){const ie=V[Q];this.lineVertexArray.emplaceBack(ie.x,ie.y,ie.tileUnitDistanceFromAnchor)}}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}}addSymbols(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ge){const et=p.indexArray,rt=p.layoutVertexArray,Vt=p.segments.prepareSegment(4*_.length,rt,et,this.canOverlap?V.sortKey:void 0),Ot=this.glyphOffsetArray.length,xr=Vt.vertexLength,jr=this.allowVerticalPlacement&&Q===s.WritingMode.vertical?Math.PI/2:0,gr=V.text&&V.text.sections;for(let Tr=0;Tr<_.length;Tr++){const{tl:an,tr:rn,bl:ri,br:fi,tex:Wn,pixelOffsetTL:Un,pixelOffsetBR:Tn,minFontScaleX:Zn,minFontScaleY:$n,glyphOffset:wn,isSDF:Si,sectionIndex:mi}=_[Tr],po=Vt.vertexLength,ka=wn[1];Xd(rt,ie.x,ie.y,an.x,ka+an.y,Wn.x,Wn.y,S,Si,Un.x,Un.y,Zn,$n),Xd(rt,ie.x,ie.y,rn.x,ka+rn.y,Wn.x+Wn.w,Wn.y,S,Si,Tn.x,Un.y,Zn,$n),Xd(rt,ie.x,ie.y,ri.x,ka+ri.y,Wn.x,Wn.y+Wn.h,S,Si,Un.x,Tn.y,Zn,$n),Xd(rt,ie.x,ie.y,fi.x,ka+fi.y,Wn.x+Wn.w,Wn.y+Wn.h,S,Si,Tn.x,Tn.y,Zn,$n),V2(p.dynamicLayoutVertexArray,ie,jr),et.emplaceBack(po,po+1,po+2),et.emplaceBack(po+1,po+2,po+3),Vt.vertexLength+=4,Vt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wn[0]),Tr!==_.length-1&&mi===_[Tr+1].sectionIndex||p.programConfigurations.populatePaintArrays(rt.length,V,V.index,{},Ge,gr&&gr[mi])}p.placedSymbolArray.emplaceBack(ie.x,ie.y,Ot,this.glyphOffsetArray.length-Ot,xr,he,Ee,ie.segment,S?S[0]:0,S?S[1]:0,z[0],z[1],Q,0,!1,0,Me)}_addCollisionDebugVertex(p,_,S,z,O,V){return _.emplaceBack(0,0),p.emplaceBack(S.x,S.y,z,O,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(p,_,S,z,O,V,Q){const ie=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),he=ie.vertexLength,Ee=O.layoutVertexArray,Me=O.collisionVertexArray,Ge=Q.anchorX,et=Q.anchorY;this._addCollisionDebugVertex(Ee,Me,V,Ge,et,new ht(p,_)),this._addCollisionDebugVertex(Ee,Me,V,Ge,et,new ht(S,_)),this._addCollisionDebugVertex(Ee,Me,V,Ge,et,new ht(S,z)),this._addCollisionDebugVertex(Ee,Me,V,Ge,et,new ht(p,z)),ie.vertexLength+=4;const rt=O.indexArray;rt.emplaceBack(he,he+1),rt.emplaceBack(he+1,he+2),rt.emplaceBack(he+2,he+3),rt.emplaceBack(he+3,he),ie.primitiveLength+=4}addDebugCollisionBoxes(p,_,S,z){for(let O=p;O<_;O++){const V=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,z?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,S)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new G2(rr,Ie.members,hr),this.iconCollisionBox=new G2(rr,Ie.members,hr);for(let p=0;p<this.symbolInstances.length;p++){const _=this.symbolInstances.get(p);this.addDebugCollisionBoxes(_.textBoxStartIndex,_.textBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.iconBoxStartIndex,_.iconBoxEndIndex,_,!1),this.addDebugCollisionBoxes(_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_,!1)}}_deserializeCollisionBoxesForSymbol(p,_,S,z,O,V,Q,ie,he){const Ee={};for(let Me=_;Me<S;Me++){const Ge=p.get(Me);Ee.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ee.textFeatureIndex=Ge.featureIndex;break}for(let Me=z;Me<O;Me++){const Ge=p.get(Me);Ee.verticalTextBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ee.verticalTextFeatureIndex=Ge.featureIndex;break}for(let Me=V;Me<Q;Me++){const Ge=p.get(Me);Ee.iconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ee.iconFeatureIndex=Ge.featureIndex;break}for(let Me=ie;Me<he;Me++){const Ge=p.get(Me);Ee.verticalIconBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},Ee.verticalIconFeatureIndex=Ge.featureIndex;break}return Ee}deserializeCollisionBoxes(p){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const S=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(p,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(p,_){const S=p.placedSymbolArray.get(_),z=S.vertexStartIndex+4*S.numGlyphs;for(let O=S.vertexStartIndex;O<z;O+=4)p.indexArray.emplaceBack(O,O+1,O+2),p.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(p){if(this.sortedAngle===p&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const _=Math.sin(p),S=Math.cos(p),z=[],O=[],V=[];for(let Q=0;Q<this.symbolInstances.length;++Q){V.push(Q);const ie=this.symbolInstances.get(Q);z.push(0|Math.round(_*ie.anchorX+S*ie.anchorY)),O.push(ie.featureIndex)}return V.sort((Q,ie)=>z[Q]-z[ie]||O[ie]-O[Q]),V}addToSortKeyRanges(p,_){const S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===_?S.symbolInstanceEnd=p+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:p,symbolInstanceEnd:p+1})}sortFeatures(p){if(this.sortFeaturesByY&&this.sortedAngle!==p&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(p),this.sortedAngle=p,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const S=this.symbolInstances.get(_);this.featureSortOrder.push(S.featureIndex),[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach((z,O,V)=>{z>=0&&V.indexOf(z)===O&&this.addIndicesForPlacedSymbol(this.text,z)}),S.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,S.verticalPlacedTextSymbolIndex),S.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.placedIconSymbolIndex),S.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Dn("SymbolBucket",kh,{omit:["layers","collisionBoxArray","features","compareText"]}),kh.MAX_GLYPHS=65535,kh.addDynamicAttributes=V2;const pA=new jo({"symbol-placement":new oi(yr.layout_symbol["symbol-placement"]),"symbol-spacing":new oi(yr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oi(yr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vi(yr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oi(yr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oi(yr.layout_symbol["icon-allow-overlap"]),"icon-overlap":new oi(yr.layout_symbol["icon-overlap"]),"icon-ignore-placement":new oi(yr.layout_symbol["icon-ignore-placement"]),"icon-optional":new oi(yr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oi(yr.layout_symbol["icon-rotation-alignment"]),"icon-size":new vi(yr.layout_symbol["icon-size"]),"icon-text-fit":new oi(yr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oi(yr.layout_symbol["icon-text-fit-padding"]),"icon-image":new vi(yr.layout_symbol["icon-image"]),"icon-rotate":new vi(yr.layout_symbol["icon-rotate"]),"icon-padding":new vi(yr.layout_symbol["icon-padding"]),"icon-keep-upright":new oi(yr.layout_symbol["icon-keep-upright"]),"icon-offset":new vi(yr.layout_symbol["icon-offset"]),"icon-anchor":new vi(yr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oi(yr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oi(yr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oi(yr.layout_symbol["text-rotation-alignment"]),"text-field":new vi(yr.layout_symbol["text-field"]),"text-font":new vi(yr.layout_symbol["text-font"]),"text-size":new vi(yr.layout_symbol["text-size"]),"text-max-width":new vi(yr.layout_symbol["text-max-width"]),"text-line-height":new oi(yr.layout_symbol["text-line-height"]),"text-letter-spacing":new vi(yr.layout_symbol["text-letter-spacing"]),"text-justify":new vi(yr.layout_symbol["text-justify"]),"text-radial-offset":new vi(yr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oi(yr.layout_symbol["text-variable-anchor"]),"text-anchor":new vi(yr.layout_symbol["text-anchor"]),"text-max-angle":new oi(yr.layout_symbol["text-max-angle"]),"text-writing-mode":new oi(yr.layout_symbol["text-writing-mode"]),"text-rotate":new vi(yr.layout_symbol["text-rotate"]),"text-padding":new oi(yr.layout_symbol["text-padding"]),"text-keep-upright":new oi(yr.layout_symbol["text-keep-upright"]),"text-transform":new vi(yr.layout_symbol["text-transform"]),"text-offset":new vi(yr.layout_symbol["text-offset"]),"text-allow-overlap":new oi(yr.layout_symbol["text-allow-overlap"]),"text-overlap":new oi(yr.layout_symbol["text-overlap"]),"text-ignore-placement":new oi(yr.layout_symbol["text-ignore-placement"]),"text-optional":new oi(yr.layout_symbol["text-optional"])});var H2={paint:new jo({"icon-opacity":new vi(yr.paint_symbol["icon-opacity"]),"icon-color":new vi(yr.paint_symbol["icon-color"]),"icon-halo-color":new vi(yr.paint_symbol["icon-halo-color"]),"icon-halo-width":new vi(yr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vi(yr.paint_symbol["icon-halo-blur"]),"icon-translate":new oi(yr.paint_symbol["icon-translate"]),"icon-translate-anchor":new oi(yr.paint_symbol["icon-translate-anchor"]),"text-opacity":new vi(yr.paint_symbol["text-opacity"]),"text-color":new vi(yr.paint_symbol["text-color"],{runtimeType:ci,getOverride:y=>y.textColor,hasOverride:y=>!!y.textColor}),"text-halo-color":new vi(yr.paint_symbol["text-halo-color"]),"text-halo-width":new vi(yr.paint_symbol["text-halo-width"]),"text-halo-blur":new vi(yr.paint_symbol["text-halo-blur"]),"text-translate":new oi(yr.paint_symbol["text-translate"]),"text-translate-anchor":new oi(yr.paint_symbol["text-translate-anchor"])}),layout:pA};class m_{constructor(p){if(p.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=p.property.overrides?p.property.overrides.runtimeType:un,this.defaultValue=p}evaluate(p){if(p.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(p.formattedSection))return _.getOverride(p.formattedSection)}return p.feature&&p.featureState?this.defaultValue.evaluate(p.feature,p.featureState):this.defaultValue.property.specification.default}eachChild(p){this.defaultValue.isConstant()||p(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dn("FormatSectionOverride",m_,{omit:["defaultValue"]});class Yd extends Js{constructor(p){super(p,H2)}recalculate(p,_){if(super.recalculate(p,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const S=this.layout.get("text-writing-mode");if(S){const z=[];for(const O of S)z.indexOf(O)<0&&z.push(O);this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(p,_,S,z){const O=this.layout.get(p).evaluate(_,{},S,z),V=this._unevaluatedLayout._values[p];return V.isDataDriven()||Vo(V.value)||!O?O:function(Q,ie){return ie.replace(/{([^{}]+)}/g,(he,Ee)=>Ee in Q?String(Q[Ee]):"")}(_.properties,O)}createBucket(p){return new kh(p)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const p of H2.paint.overridableProperties){if(!Yd.hasPaintOverride(this.layout,p))continue;const _=this.paint.get(p),S=new m_(_),z=new fo(S,_.property.specification);let O=null;O=_.value.kind==="constant"||_.value.kind==="source"?new ea("source",z):new Da("composite",z,_.value.zoomStops),this.paint._values[p]=new ll(_.property,O,_.parameters)}}_handleOverridablePaintPropertyUpdate(p,_,S){return!(!this.layout||_.isDataDriven()||S.isDataDriven())&&Yd.hasPaintOverride(this.layout,p)}static hasPaintOverride(p,_){const S=p.get("text-field"),z=H2.paint.properties[_];let O=!1;const V=Q=>{for(const ie of Q)if(z.overrides&&z.overrides.hasOverride(ie))return void(O=!0)};if(S.value.kind==="constant"&&S.value.value instanceof Ht)V(S.value.value.sections);else if(S.value.kind==="source"){const Q=he=>{O||(he instanceof Yn&&Fr(he.value)===li?V(he.value.sections):he instanceof wu?V(he.sections):he.eachChild(Q))},ie=S.value;ie._styleExpression&&Q(ie._styleExpression.expression)}return O}}function W2(y,p,_){let S="never";const z=y.get(p);return z?S=z:y.get(_)&&(S="always"),S}var dA={paint:new jo({"background-color":new oi(yr.paint_background["background-color"]),"background-pattern":new Ku(yr.paint_background["background-pattern"]),"background-opacity":new oi(yr.paint_background["background-opacity"])})},mA={paint:new jo({"raster-opacity":new oi(yr.paint_raster["raster-opacity"]),"raster-hue-rotate":new oi(yr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oi(yr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oi(yr.paint_raster["raster-brightness-max"]),"raster-saturation":new oi(yr.paint_raster["raster-saturation"]),"raster-contrast":new oi(yr.paint_raster["raster-contrast"]),"raster-resampling":new oi(yr.paint_raster["raster-resampling"]),"raster-fade-duration":new oi(yr.paint_raster["raster-fade-duration"])})};class gA extends Js{constructor(p){super(p,{}),this.onAdd=_=>{this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},this.onRemove=_=>{this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},this.implementation=p}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const yA={circle:class extends Js{constructor(y){super(y,Bc)}createBucket(y){return new da(y)}queryRadius(y){const p=y;return vc("circle-radius",this,p)+vc("circle-stroke-width",this,p)+_c(this.paint.get("circle-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V,Q){const ie=bc(y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,V),he=this.paint.get("circle-radius").evaluate(p,_)+this.paint.get("circle-stroke-width").evaluate(p,_),Ee=this.paint.get("circle-pitch-alignment")==="map",Me=Ee?ie:function(et,rt){return et.map(Vt=>ue(Vt,rt))}(ie,Q),Ge=Ee?he*V:he;for(const et of S)for(const rt of et){const Vt=Ee?rt:ue(rt,Q);let Ot=Ge;const xr=va([],[rt.x,rt.y,0,1],Q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ot*=xr[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ot*=O.cameraToCenterDistance/xr[3]),H0(Me,Vt,Ot))return!0}return!1}},heatmap:class extends Js{constructor(y){super(y,$e),this._updateColorRamp()}createBucket(y){return new xe(y)}_handleSpecialPaintPropertyUpdate(y){y==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Js{constructor(y){super(y,on)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Js{constructor(y){super(y,zd)}recalculate(y,p){super.recalculate(y,p);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(y){return new Ap(y)}queryRadius(){return _c(this.paint.get("fill-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V){return zl(bc(y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,V),S)}isTileClipped(){return!0}},"fill-extrusion":class extends Js{constructor(y){super(y,R2)}createBucket(y){return new Gf(y)}queryRadius(){return _c(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(y,p,_,S,z,O,V,Q){const ie=bc(y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,V),he=this.paint.get("fill-extrusion-height").evaluate(p,_),Ee=this.paint.get("fill-extrusion-base").evaluate(p,_),Me=function(et,rt,Vt,Ot){const xr=[];for(const jr of et){const gr=[jr.x,jr.y,0,1];va(gr,gr,rt),xr.push(new ht(gr[0]/gr[3],gr[1]/gr[3]))}return xr}(ie,Q),Ge=function(et,rt,Vt,Ot){const xr=[],jr=[],gr=Ot[8]*rt,Tr=Ot[9]*rt,an=Ot[10]*rt,rn=Ot[11]*rt,ri=Ot[8]*Vt,fi=Ot[9]*Vt,Wn=Ot[10]*Vt,Un=Ot[11]*Vt;for(const Tn of et){const Zn=[],$n=[];for(const wn of Tn){const Si=wn.x,mi=wn.y,po=Ot[0]*Si+Ot[4]*mi+Ot[12],ka=Ot[1]*Si+Ot[5]*mi+Ot[13],Pa=Ot[2]*Si+Ot[6]*mi+Ot[14],Ls=Ot[3]*Si+Ot[7]*mi+Ot[15],Ec=Pa+an,cl=Ls+rn,ps=po+ri,$s=ka+fi,fl=Pa+Wn,Rl=Ls+Un,Lu=new ht((po+gr)/cl,(ka+Tr)/cl);Lu.z=Ec/cl,Zn.push(Lu);const ds=new ht(ps/Rl,$s/Rl);ds.z=fl/Rl,$n.push(ds)}xr.push(Zn),jr.push($n)}return[xr,jr]}(S,Ee,he,Q);return function(et,rt,Vt){let Ot=1/0;zl(Vt,rt)&&(Ot=Bd(Vt,rt[0]));for(let xr=0;xr<rt.length;xr++){const jr=rt[xr],gr=et[xr];for(let Tr=0;Tr<jr.length-1;Tr++){const an=jr[Tr],rn=[an,jr[Tr+1],gr[Tr+1],gr[Tr],an];k0(Vt,rn)&&(Ot=Math.min(Ot,Bd(Vt,rn)))}}return Ot!==1/0&&Ot}(Ge[0],Ge[1],Me)}},line:class extends Js{constructor(y){super(y,P),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(y){y==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ws,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(y,p){super.recalculate(y,p),this.paint._values["line-floorwidth"]=U.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,y)}createBucket(y){return new x(y)}queryRadius(y){const p=y,_=j(vc("line-width",this,p),vc("line-gap-width",this,p)),S=vc("line-offset",this,p);return _/2+Math.abs(S)+_c(this.paint.get("line-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V){const Q=bc(y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,V),ie=V/2*j(this.paint.get("line-width").evaluate(p,_),this.paint.get("line-gap-width").evaluate(p,_)),he=this.paint.get("line-offset").evaluate(p,_);return he&&(S=function(Ee,Me){const Ge=[];for(let et=0;et<Ee.length;et++){const rt=Ee[et],Vt=[];for(let Ot=0;Ot<rt.length;Ot++){const xr=rt[Ot-1],jr=rt[Ot],gr=rt[Ot+1],Tr=Ot===0?new ht(0,0):jr.sub(xr)._unit()._perp(),an=Ot===rt.length-1?new ht(0,0):gr.sub(jr)._unit()._perp(),rn=Tr._add(an)._unit(),ri=rn.x*an.x+rn.y*an.y;ri!==0&&rn._mult(1/ri),Vt.push(rn._mult(Me)._add(jr))}Ge.push(Vt)}return Ge}(S,he*V)),function(Ee,Me,Ge){for(let et=0;et<Me.length;et++){const rt=Me[et];if(Ee.length>=3){for(let Vt=0;Vt<rt.length;Vt++)if(Qu(Ee,rt[Vt]))return!0}if(fa(Ee,rt,Ge))return!0}return!1}(Q,S,ie)}isTileClipped(){return!0}},symbol:Yd,background:class extends Js{constructor(y){super(y,dA)}},raster:class extends Js{constructor(y){super(y,mA)}}};class vA{constructor(p){this._callback=p,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const g_=63710088e-1;class Qa{constructor(p,_){if(isNaN(p)||isNaN(_))throw new Error(`Invalid LngLat object: (${p}, ${_})`);if(this.lng=+p,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qa(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(p){const _=Math.PI/180,S=this.lat*_,z=p.lat*_,O=Math.sin(S)*Math.sin(z)+Math.cos(S)*Math.cos(z)*Math.cos((p.lng-this.lng)*_);return g_*Math.acos(Math.min(O,1))}toBounds(p=0){const _=360*p/40075017,S=_/Math.cos(Math.PI/180*this.lat);return new Wf(new Qa(this.lng-S,this.lat-_),new Qa(this.lng+S,this.lat+_))}static convert(p){if(p instanceof Qa)return p;if(Array.isArray(p)&&(p.length===2||p.length===3))return new Qa(Number(p[0]),Number(p[1]));if(!Array.isArray(p)&&typeof p=="object"&&p!==null)return new Qa(Number("lng"in p?p.lng:p.lon),Number(p.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Wf{constructor(p,_){p&&(_?this.setSouthWest(p).setNorthEast(_):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))}setNorthEast(p){return this._ne=p instanceof Qa?new Qa(p.lng,p.lat):Qa.convert(p),this}setSouthWest(p){return this._sw=p instanceof Qa?new Qa(p.lng,p.lat):Qa.convert(p),this}extend(p){const _=this._sw,S=this._ne;let z,O;if(p instanceof Qa)z=p,O=p;else{if(!(p instanceof Wf))return Array.isArray(p)?p.length===4||p.every(Array.isArray)?this.extend(Wf.convert(p)):this.extend(Qa.convert(p)):this;if(z=p._sw,O=p._ne,!z||!O)return this}return _||S?(_.lng=Math.min(z.lng,_.lng),_.lat=Math.min(z.lat,_.lat),S.lng=Math.max(O.lng,S.lng),S.lat=Math.max(O.lat,S.lat)):(this._sw=new Qa(z.lng,z.lat),this._ne=new Qa(O.lng,O.lat)),this}getCenter(){return new Qa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Qa(this.getWest(),this.getNorth())}getSouthEast(){return new Qa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(p){const{lng:_,lat:S}=Qa.convert(p);let z=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(z=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=S&&S<=this._ne.lat&&z}static convert(p){return p instanceof Wf?p:p&&new Wf(p)}}const y_=2*Math.PI*g_;function v_(y){return y_*Math.cos(y*Math.PI/180)}function __(y){return(180+y)/360}function b_(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function w_(y,p){return y/v_(p)}function Z2(y){return 360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90}class Jd{constructor(p,_,S=0){this.x=+p,this.y=+_,this.z=+S}static fromLngLat(p,_=0){const S=Qa.convert(p);return new Jd(__(S.lng),b_(S.lat),w_(_,S.lat))}toLngLat(){return new Qa(360*this.x-180,Z2(this.y))}toAltitude(){return this.z*v_(Z2(this.y))}meterInMercatorCoordinateUnits(){return 1/y_*(p=Z2(this.y),1/Math.cos(p*Math.PI/180));var p}}function x_(y,p,_){var S=2*Math.PI*6378137/256/Math.pow(2,_);return[y*S-2*Math.PI*6378137/2,p*S-2*Math.PI*6378137/2]}class X2{constructor(p,_,S){if(p<0||p>25||S<0||S>=Math.pow(2,p)||_<0||_>=Math.pow(2,p))throw new Error(`x=${_}, y=${S}, z=${p} outside of bounds. 0<=x<${Math.pow(2,p)}, 0<=y<${Math.pow(2,p)} 0<=z<=25 `);this.z=p,this.x=_,this.y=S,this.key=Cp(0,p,p,_,S)}equals(p){return this.z===p.z&&this.x===p.x&&this.y===p.y}url(p,_,S){const z=(V=this.y,Q=this.z,ie=x_(256*(O=this.x),256*(V=Math.pow(2,Q)-V-1),Q),he=x_(256*(O+1),256*(V+1),Q),ie[0]+","+ie[1]+","+he[0]+","+he[1]);var O,V,Q,ie,he;const Ee=function(Me,Ge,et){let rt,Vt="";for(let Ot=Me;Ot>0;Ot--)rt=1<<Ot-1,Vt+=(Ge&rt?1:0)+(et&rt?2:0);return Vt}(this.z,this.x,this.y);return p[(this.x+this.y)%p.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(S==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,_>1?"@2x":"").replace(/{quadkey}/g,Ee).replace(/{bbox-epsg-3857}/g,z)}isChildOf(p){const _=this.z-p.z;return _>0&&p.x===this.x>>_&&p.y===this.y>>_}getTilePoint(p){const _=Math.pow(2,this.z);return new ht((p.x*_-this.x)*$o,(p.y*_-this.y)*$o)}toString(){return`${this.z}/${this.x}/${this.y}`}}class k_{constructor(p,_){this.wrap=p,this.canonical=_,this.key=Cp(p,_.z,_.z,_.x,_.y)}}class Ac{constructor(p,_,S,z,O){if(p<S)throw new Error(`overscaledZ should be >= z; overscaledZ = ${p}; z = ${S}`);this.overscaledZ=p,this.wrap=_,this.canonical=new X2(S,+z,+O),this.key=Cp(_,p,S,z,O)}clone(){return new Ac(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(p){return this.overscaledZ===p.overscaledZ&&this.wrap===p.wrap&&this.canonical.equals(p.canonical)}scaledTo(p){if(p>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${p}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-p;return p>this.canonical.z?new Ac(p,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ac(p,this.wrap,p,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(p,_){if(p>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${p}; overscaledZ = ${this.overscaledZ}`);const S=this.canonical.z-p;return p>this.canonical.z?Cp(this.wrap*+_,p,this.canonical.z,this.canonical.x,this.canonical.y):Cp(this.wrap*+_,p,p,this.canonical.x>>S,this.canonical.y>>S)}isChildOf(p){if(p.wrap!==this.wrap)return!1;const _=this.canonical.z-p.canonical.z;return p.overscaledZ===0||p.overscaledZ<this.overscaledZ&&p.canonical.x===this.canonical.x>>_&&p.canonical.y===this.canonical.y>>_}children(p){if(this.overscaledZ>=p)return[new Ac(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,S=2*this.canonical.x,z=2*this.canonical.y;return[new Ac(_,this.wrap,_,S,z),new Ac(_,this.wrap,_,S+1,z),new Ac(_,this.wrap,_,S,z+1),new Ac(_,this.wrap,_,S+1,z+1)]}isLessThan(p){return this.wrap<p.wrap||!(this.wrap>p.wrap)&&(this.overscaledZ<p.overscaledZ||!(this.overscaledZ>p.overscaledZ)&&(this.canonical.x<p.canonical.x||!(this.canonical.x>p.canonical.x)&&this.canonical.y<p.canonical.y))}wrapped(){return new Ac(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(p){return new Ac(this.overscaledZ,p,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new k_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(p){return this.canonical.getTilePoint(new Jd(p.x-this.wrap,p.y))}}function Cp(y,p,_,S,z){(y*=2)<0&&(y=-1*y-1);const O=1<<_;return(O*O*y+O*z+S).toString(36)+_.toString(36)+p.toString(36)}Dn("CanonicalTileID",X2),Dn("OverscaledTileID",Ac,{omit:["posMatrix"]});class A_{constructor(p,_,S){if(this.uid=p,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(S&&S!=="mapbox"&&S!=="terrarium")return void le(`"${S}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_.height;const z=this.dim=_.height-2;this.data=new Uint32Array(_.data.buffer),this.encoding=S||"mapbox";for(let O=0;O<z;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(z,O)]=this.data[this._idx(z-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,z)]=this.data[this._idx(O,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<z;O++)for(let V=0;V<z;V++){const Q=this.get(O,V);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(p,_){const S=new Uint8Array(this.data.buffer),z=4*this._idx(p,_);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(S[z],S[z+1],S[z+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(p,_){if(p<-1||p>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(p+1)}_unpackMapbox(p,_,S){return(256*p*256+256*_+S)/10-1e4}_unpackTerrarium(p,_,S){return 256*p+_+S/256-32768}getPixels(){return new _r({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(p,_,S){if(this.dim!==p.dim)throw new Error("dem dimension mismatch");let z=_*this.dim,O=_*this.dim+this.dim,V=S*this.dim,Q=S*this.dim+this.dim;switch(_){case-1:z=O-1;break;case 1:O=z+1}switch(S){case-1:V=Q-1;break;case 1:Q=V+1}const ie=-_*this.dim,he=-S*this.dim;for(let Ee=V;Ee<Q;Ee++)for(let Me=z;Me<O;Me++)this.data[this._idx(Me,Ee)]=p.data[this._idx(Me+ie,Ee+he)]}}Dn("DEMData",A_);class E_{constructor(p){this._stringToNumber={},this._numberToString=[];for(let _=0;_<p.length;_++){const S=p[_];this._stringToNumber[S]=_,this._numberToString[_]=S}}encode(p){return this._stringToNumber[p]}decode(p){if(p>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${p} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[p]}}class S_{constructor(p,_,S,z,O){this.type="Feature",this._vectorTileFeature=p,p._z=_,p._x=S,p._y=z,this.properties=p.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(p){this._geometry=p}toJSON(){const p={geometry:this.geometry};for(const _ in this)_!=="_geometry"&&_!=="_vectorTileFeature"&&(p[_]=this[_]);return p}}class C_{constructor(p,_){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Pl($o,16,0),this.grid3D=new Pl($o,16,0),this.featureIndexArray=new Di,this.promoteId=_}insert(p,_,S,z,O,V){const Q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(S,z,O);const ie=V?this.grid3D:this.grid;for(let he=0;he<_.length;he++){const Ee=_[he],Me=[1/0,1/0,-1/0,-1/0];for(let Ge=0;Ge<Ee.length;Ge++){const et=Ee[Ge];Me[0]=Math.min(Me[0],et.x),Me[1]=Math.min(Me[1],et.y),Me[2]=Math.max(Me[2],et.x),Me[3]=Math.max(Me[3],et.y)}Me[0]<$o&&Me[1]<$o&&Me[2]>=0&&Me[3]>=0&&ie.insert(Q,Me[0],Me[1],Me[2],Me[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new L0.VectorTile(new Qt(this.rawTileData)).layers,this.sourceLayerCoder=new E_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(p,_,S,z){this.loadVTLayers();const O=p.params||{},V=$o/p.tileSize/p.scale,Q=Na(O.filter),ie=p.queryGeometry,he=p.queryPadding*V,Ee=L_(ie),Me=this.grid.query(Ee.minX-he,Ee.minY-he,Ee.maxX+he,Ee.maxY+he),Ge=L_(p.cameraQueryGeometry),et=this.grid3D.query(Ge.minX-he,Ge.minY-he,Ge.maxX+he,Ge.maxY+he,(Ot,xr,jr,gr)=>function(Tr,an,rn,ri,fi){for(const Un of Tr)if(an<=Un.x&&rn<=Un.y&&ri>=Un.x&&fi>=Un.y)return!0;const Wn=[new ht(an,rn),new ht(an,fi),new ht(ri,fi),new ht(ri,rn)];if(Tr.length>2){for(const Un of Wn)if(Qu(Tr,Un))return!0}for(let Un=0;Un<Tr.length-1;Un++)if(E0(Tr[Un],Tr[Un+1],Wn))return!0;return!1}(p.cameraQueryGeometry,Ot-he,xr-he,jr+he,gr+he));for(const Ot of et)Me.push(Ot);Me.sort(_A);const rt={};let Vt;for(let Ot=0;Ot<Me.length;Ot++){const xr=Me[Ot];if(xr===Vt)continue;Vt=xr;const jr=this.featureIndexArray.get(xr);let gr=null;this.loadMatchingFeature(rt,jr.bucketIndex,jr.sourceLayerIndex,jr.featureIndex,Q,O.layers,O.availableImages,_,S,z,(Tr,an,rn)=>(gr||(gr=js(Tr)),an.queryIntersectsFeature(ie,Tr,rn,gr,this.z,p.transform,V,p.pixelPosMatrix)))}return rt}loadMatchingFeature(p,_,S,z,O,V,Q,ie,he,Ee,Me){const Ge=this.bucketLayerIDs[_];if(V&&!function(Ot,xr){for(let jr=0;jr<Ot.length;jr++)if(xr.indexOf(Ot[jr])>=0)return!0;return!1}(V,Ge))return;const et=this.sourceLayerCoder.decode(S),rt=this.vtLayers[et].feature(z);if(O.needGeometry){const Ot=Ks(rt,!0);if(!O.filter(new Ho(this.tileID.overscaledZ),Ot,this.tileID.canonical))return}else if(!O.filter(new Ho(this.tileID.overscaledZ),rt))return;const Vt=this.getId(rt,et);for(let Ot=0;Ot<Ge.length;Ot++){const xr=Ge[Ot];if(V&&V.indexOf(xr)<0)continue;const jr=ie[xr];if(!jr)continue;let gr={};Vt&&Ee&&(gr=Ee.getState(jr.sourceLayer||"_geojsonTileLayer",Vt));const Tr=F({},he[xr]);Tr.paint=I_(Tr.paint,jr.paint,rt,gr,Q),Tr.layout=I_(Tr.layout,jr.layout,rt,gr,Q);const an=!Me||Me(rt,jr,gr);if(!an)continue;const rn=new S_(rt,this.z,this.x,this.y,Vt);rn.layer=Tr;let ri=p[xr];ri===void 0&&(ri=p[xr]=[]),ri.push({featureIndex:z,feature:rn,intersectionZ:an})}}lookupSymbolFeatures(p,_,S,z,O,V,Q,ie){const he={};this.loadVTLayers();const Ee=Na(O);for(const Me of p)this.loadMatchingFeature(he,S,z,Me,Ee,V,Q,ie,_);return he}hasLayer(p){for(const _ of this.bucketLayerIDs)for(const S of _)if(p===S)return!0;return!1}getId(p,_){let S=p.id;return this.promoteId&&(S=p.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[_]],typeof S=="boolean"&&(S=Number(S))),S}}function I_(y,p,_,S,z){return H(y,(O,V)=>{const Q=p instanceof gc?p.get(V):null;return Q&&Q.evaluate?Q.evaluate(_,S,z):Q})}function L_(y){let p=1/0,_=1/0,S=-1/0,z=-1/0;for(const O of y)p=Math.min(p,O.x),_=Math.min(_,O.y),S=Math.max(S,O.x),z=Math.max(z,O.y);return{minX:p,minY:_,maxX:S,maxY:z}}function _A(y,p){return p-y}var Y2;Dn("FeatureIndex",C_,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(Y2=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",Y2.load="load",Y2.fullLoad="fullLoad";let Kd=null,Ip=[];const J2=1e3/30,bA={mark(y){performance.mark(y)},frame(y){const p=y;Kd!=null&&Ip.push(p-Kd),Kd=p},clearMetrics(){Kd=null,Ip=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const y in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[y])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const y=performance.getEntriesByName("loadTime")[0].duration,p=performance.getEntriesByName("fullLoadTime")[0].duration,_=Ip.length,S=1/(Ip.reduce((O,V)=>O+V,0)/_/1e3),z=Ip.filter(O=>O>J2).reduce((O,V)=>O+(V-J2)/J2,0);return{loadTime:y,fullLoadTime:p,fps:S,percentDroppedFrames:z/(_+z)*100}}};s.AJAXError=Mr,s.ARRAY_TYPE=Ja,s.Actor=class{constructor(y,p,_){this.target=y,this.parent=p,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},G(["receive","process"],this),this.invoker=new vA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=pe()?y:window}send(y,p,_,S,z=!1){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[O]=_);const V=Oe(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:y,hasCallback:!!_,targetMapId:S,mustQueue:z,sourceMapId:this.mapId,data:Ki(p,V)},V),{cancel:()=>{_&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:S,sourceMapId:this.mapId})}}}receive(y){const p=y.data,_=p.id;if(_&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[_];const S=this.cancelCallbacks[_];delete this.cancelCallbacks[_],S&&S()}else pe()||p.mustQueue?(this.tasks[_]=p,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,p)}process(){if(!this.taskQueue.length)return;const y=this.taskQueue.shift(),p=this.tasks[y];delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(y,p)}processTask(y,p){if(p.type==="<response>"){const _=this.callbacks[y];delete this.callbacks[y],_&&(p.error?_(Bo(p.error)):_(null,Bo(p.data)))}else{let _=!1;const S=Oe(this.globalScope)?void 0:[],z=p.hasCallback?(Q,ie)=>{_=!0,delete this.cancelCallbacks[y],this.target.postMessage({id:y,type:"<response>",sourceMapId:this.mapId,error:Q?Ki(Q):null,data:Ki(ie,S)},S)}:Q=>{_=!0};let O=null;const V=Bo(p.data);if(this.parent[p.type])O=this.parent[p.type](p.sourceMapId,V,z);else if(this.parent.getWorkerSource){const Q=p.type.split(".");O=this.parent.getWorkerSource(p.sourceMapId,Q[0],V.source)[Q[1]](V,z)}else z(new Error(`Could not find function ${p.type}`));!_&&O&&O.cancel&&(this.cancelCallbacks[y]=O.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=Zt,s.CanonicalTileID=X2,s.CollisionBoxArray=Zr,s.CollisionCircleLayoutArray=class extends Se{},s.Color=lt,s.DEMData=A_,s.DataConstantProperty=oi,s.DictionaryCoder=E_,s.EXTENT=$o,s.ErrorEvent=_i,s.EvaluationParameters=Ho,s.Event=ai,s.Evented=hi,s.FeatureIndex=C_,s.FillBucket=Ap,s.FillExtrusionBucket=Gf,s.GeoJSONFeature=S_,s.ImageAtlas=Jv,s.ImagePosition=F2,s.LineBucket=x,s.LineStripIndexArray=class extends Dt{},s.LngLat=Qa,s.LngLatBounds=Wf,s.MercatorCoordinate=Jd,s.ONE_EM=Lt,s.OverscaledTileID=Ac,s.PerformanceUtils=bA,s.PosArray=N,s.Properties=jo,s.QuadTriangleArray=class extends Je{},s.RGBAImage=_r,s.RasterBoundsArray=class extends M{},s.RequestPerformance=class{constructor(y){this._marks={start:[y.url,"start"].join("#"),end:[y.url,"end"].join("#"),measure:y.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let y=performance.getEntriesByName(this._marks.measure);return y.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),y=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),y}},s.ResourceType=Rr,s.SegmentVector=zt,s.SymbolBucket=kh,s.Transitionable=Oc,s.TriangleIndexArray=kr,s.Uniform1f=Eo,s.Uniform1i=class extends Gi{constructor(y,p){super(y,p),this.current=0}set(y){this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}},s.Uniform2f=class extends Gi{constructor(y,p){super(y,p),this.current=[0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1]))}},s.Uniform3f=class extends Gi{constructor(y,p){super(y,p),this.current=[0,0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2]))}},s.Uniform4f=Mo,s.UniformColor=Qi,s.UniformMatrix4f=class extends Gi{constructor(y,p){super(y,p),this.current=Fa}set(y){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let p=1;p<16;p++)if(y[p]!==this.current[p]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}},s.UnwrappedTileID=k_,s.ValidationError=Vr,s.ZoomHistory=ga,s.add=function(y,p,_){return y[0]=p[0]+_[0],y[1]=p[1]+_[1],y[2]=p[2]+_[2],y},s.addDynamicAttributes=V2,s.asyncAll=function(y,p,_){if(!y.length)return _(null,[]);let S=y.length;const z=new Array(y.length);let O=null;y.forEach((V,Q)=>{p(V,(ie,he)=>{ie&&(O=ie),z[Q]=he,--S==0&&_(O,z)})})},s.bezier=w,s.bindAll=G,s.cacheEntryPossiblyAdded=function(y){dt++,dt>Re&&(y.getActor().send("enforceCacheSizeLimit",ke),dt=0)},s.clamp=L,s.clearTileCache=function(y){const p=caches.delete(bt);y&&p.catch(y).then(()=>y())},s.clipLine=u_,s.clone=function(y){var p=new Ja(16);return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p[6]=y[6],p[7]=y[7],p[8]=y[8],p[9]=y[9],p[10]=y[10],p[11]=y[11],p[12]=y[12],p[13]=y[13],p[14]=y[14],p[15]=y[15],p},s.clone$1=ee,s.clone$2=function(y){var p=new Ja(3);return p[0]=y[0],p[1]=y[1],p[2]=y[2],p},s.collisionCircleLayout=je,s.config=ut,s.copy=function(y,p){return y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[4]=p[4],y[5]=p[5],y[6]=p[6],y[7]=p[7],y[8]=p[8],y[9]=p[9],y[10]=p[10],y[11]=p[11],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15],y},s.create=function(){var y=new Ja(16);return Ja!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},s.create$1=La,s.createExpression=Qo,s.createFilter=Na,s.createLayout=xa,s.createStyleLayer=function(y){return y.type==="custom"?new gA(y):new yA[y.type](y)},s.cross=function(y,p,_){var S=p[0],z=p[1],O=p[2],V=_[0],Q=_[1],ie=_[2];return y[0]=z*ie-O*Q,y[1]=O*V-S*ie,y[2]=S*Q-z*V,y},s.dot=function(y,p){return y[0]*p[0]+y[1]*p[1]+y[2]*p[2]},s.dot$1=function(y,p){return y[0]*p[0]+y[1]*p[1]+y[2]*p[2]+y[3]*p[3]},s.ease=E,s.emitValidationErrors=Ca,s.enforceCacheSizeLimit=function(y){Pe(),Xe&&Xe.then(p=>{p.keys().then(_=>{for(let S=0;S<_.length-y;S++)p.delete(_[S])})})},s.equals=function(y,p){var _=y[0],S=y[1],z=y[2],O=y[3],V=y[4],Q=y[5],ie=y[6],he=y[7],Ee=y[8],Me=y[9],Ge=y[10],et=y[11],rt=y[12],Vt=y[13],Ot=y[14],xr=y[15],jr=p[0],gr=p[1],Tr=p[2],an=p[3],rn=p[4],ri=p[5],fi=p[6],Wn=p[7],Un=p[8],Tn=p[9],Zn=p[10],$n=p[11],wn=p[12],Si=p[13],mi=p[14],po=p[15];return Math.abs(_-jr)<=hs*Math.max(1,Math.abs(_),Math.abs(jr))&&Math.abs(S-gr)<=hs*Math.max(1,Math.abs(S),Math.abs(gr))&&Math.abs(z-Tr)<=hs*Math.max(1,Math.abs(z),Math.abs(Tr))&&Math.abs(O-an)<=hs*Math.max(1,Math.abs(O),Math.abs(an))&&Math.abs(V-rn)<=hs*Math.max(1,Math.abs(V),Math.abs(rn))&&Math.abs(Q-ri)<=hs*Math.max(1,Math.abs(Q),Math.abs(ri))&&Math.abs(ie-fi)<=hs*Math.max(1,Math.abs(ie),Math.abs(fi))&&Math.abs(he-Wn)<=hs*Math.max(1,Math.abs(he),Math.abs(Wn))&&Math.abs(Ee-Un)<=hs*Math.max(1,Math.abs(Ee),Math.abs(Un))&&Math.abs(Me-Tn)<=hs*Math.max(1,Math.abs(Me),Math.abs(Tn))&&Math.abs(Ge-Zn)<=hs*Math.max(1,Math.abs(Ge),Math.abs(Zn))&&Math.abs(et-$n)<=hs*Math.max(1,Math.abs(et),Math.abs($n))&&Math.abs(rt-wn)<=hs*Math.max(1,Math.abs(rt),Math.abs(wn))&&Math.abs(Vt-Si)<=hs*Math.max(1,Math.abs(Vt),Math.abs(Si))&&Math.abs(Ot-mi)<=hs*Math.max(1,Math.abs(Ot),Math.abs(mi))&&Math.abs(xr-po)<=hs*Math.max(1,Math.abs(xr),Math.abs(po))},s.evaluateSizeForFeature=function(y,{uSize:p,uSizeT:_},{lowerSize:S,upperSize:z}){return y.kind==="source"?S/X0:y.kind==="composite"?Oo(S/X0,z/X0,_):p},s.evaluateSizeForZoom=function(y,p){let _=0,S=0;if(y.kind==="constant")S=y.layoutSize;else if(y.kind!=="source"){const{interpolationType:z,minZoom:O,maxZoom:V}=y,Q=z?L(Pr.interpolationFactor(z,p,O,V),0,1):0;y.kind==="camera"?S=Oo(y.minSize,y.maxSize,Q):_=Q}return{uSizeT:_,uSize:S}},s.evaluateVariableOffset=h_,s.evented=tu,s.exported=mt,s.exported$1=Et,s.extend=F,s.filterObject=Z,s.fromRotation=function(y,p){var _=Math.sin(p),S=Math.cos(p);return y[0]=S,y[1]=_,y[2]=0,y[3]=-_,y[4]=S,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},s.fromScaling=function(y,p){return y[0]=p[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=p[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=p[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},s.getAnchorAlignment=j2,s.getAnchorJustification=q2,s.getArrayBuffer=Dr,s.getImage=tn,s.getJSON=function(y,p){return pt(F(y,{type:"json"}),p)},s.getOverlapMode=W2,s.getRTLTextPluginStatus=ru,s.getReferrer=Kr,s.getVideo=function(y,p){const _=window.document.createElement("video");_.muted=!0,_.onloadstart=function(){p(null,_)};for(let S=0;S<y.length;S++){const z=window.document.createElement("source");ln(y[S])||(_.crossOrigin="Anonymous"),z.src=y[S],_.appendChild(z)}return{cancel:()=>{}}},s.identity=ou,s.invert=function(y,p){var _=p[0],S=p[1],z=p[2],O=p[3],V=p[4],Q=p[5],ie=p[6],he=p[7],Ee=p[8],Me=p[9],Ge=p[10],et=p[11],rt=p[12],Vt=p[13],Ot=p[14],xr=p[15],jr=_*Q-S*V,gr=_*ie-z*V,Tr=_*he-O*V,an=S*ie-z*Q,rn=S*he-O*Q,ri=z*he-O*ie,fi=Ee*Vt-Me*rt,Wn=Ee*Ot-Ge*rt,Un=Ee*xr-et*rt,Tn=Me*Ot-Ge*Vt,Zn=Me*xr-et*Vt,$n=Ge*xr-et*Ot,wn=jr*$n-gr*Zn+Tr*Tn+an*Un-rn*Wn+ri*fi;return wn?(y[0]=(Q*$n-ie*Zn+he*Tn)*(wn=1/wn),y[1]=(z*Zn-S*$n-O*Tn)*wn,y[2]=(Vt*ri-Ot*rn+xr*an)*wn,y[3]=(Ge*rn-Me*ri-et*an)*wn,y[4]=(ie*Un-V*$n-he*Wn)*wn,y[5]=(_*$n-z*Un+O*Wn)*wn,y[6]=(Ot*Tr-rt*ri-xr*gr)*wn,y[7]=(Ee*ri-Ge*Tr+et*gr)*wn,y[8]=(V*Zn-Q*Un+he*fi)*wn,y[9]=(S*Un-_*Zn-O*fi)*wn,y[10]=(rt*rn-Vt*Tr+xr*jr)*wn,y[11]=(Me*Tr-Ee*rn-et*jr)*wn,y[12]=(Q*Wn-V*Tn-ie*fi)*wn,y[13]=(_*Tn-S*Wn+z*fi)*wn,y[14]=(Vt*gr-rt*an-Ot*jr)*wn,y[15]=(Ee*an-Me*gr+Ge*jr)*wn,y):null},s.isImageBitmap=nt,s.isSafari=Oe,s.isWorker=pe,s.keysDifference=function(y,p){const _=[];for(const S in y)S in p||_.push(S);return _},s.lazyLoadRTLTextPlugin=function(){Cs.isLoading()||Cs.isLoaded()||ru()!=="deferred"||ho()},s.makeRequest=pt,s.mapObject=H,s.mercatorXfromLng=__,s.mercatorYfromLat=b_,s.mercatorZfromAltitude=w_,s.mul=W0,s.mul$1=function(y,p,_){return y[0]=p[0]*_[0],y[1]=p[1]*_[1],y[2]=p[2]*_[2],y[3]=p[3]*_[3],y},s.multiply=n0,s.nextPowerOfTwo=function(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))},s.normalize=function(y,p){var _=p[0],S=p[1],z=p[2],O=_*_+S*S+z*z;return O>0&&(O=1/Math.sqrt(O)),y[0]=p[0]*O,y[1]=p[1]*O,y[2]=p[2]*O,y},s.number=Oo,s.ortho=function(y,p,_,S,z,O,V){var Q=1/(p-_),ie=1/(S-z),he=1/(O-V);return y[0]=-2*Q,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ie,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*he,y[11]=0,y[12]=(p+_)*Q,y[13]=(z+S)*ie,y[14]=(V+O)*he,y[15]=1,y},s.parseCacheControl=Ne,s.parseGlyphPbf=function(y){return new Qt(y).readFields(Xk,[])},s.pbf=Qt,s.performSymbolLayout=function(y){y.bucket.createArrays(),y.bucket.tilePixelRatio=$o/(512*y.bucket.overscaling),y.bucket.compareText={},y.bucket.iconsNeedLinear=!1;const p=y.bucket.layers[0].layout,_=y.bucket.layers[0]._unevaluatedLayout._values,S={layoutIconSize:_["icon-size"].possiblyEvaluate(new Ho(y.bucket.zoom+1),y.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Ho(y.bucket.zoom+1),y.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Ho(18))};if(y.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:he}=y.bucket.textSizeData;S.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Ho(ie),y.canonical),_["text-size"].possiblyEvaluate(new Ho(he),y.canonical)]}if(y.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:he}=y.bucket.iconSizeData;S.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Ho(ie),y.canonical),_["icon-size"].possiblyEvaluate(new Ho(he),y.canonical)]}const z=p.get("text-line-height")*Lt,O=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",V=p.get("text-keep-upright"),Q=p.get("text-size");for(const ie of y.bucket.features){const he=p.get("text-font").evaluate(ie,{},y.canonical).join(","),Ee=Q.evaluate(ie,{},y.canonical),Me=S.layoutTextSize.evaluate(ie,{},y.canonical),Ge=S.layoutIconSize.evaluate(ie,{},y.canonical),et={horizontal:{},vertical:void 0},rt=ie.text;let Vt,Ot=[0,0];if(rt){const gr=rt.toString(),Tr=p.get("text-letter-spacing").evaluate(ie,{},y.canonical)*Lt,an=Yu(gr)?Tr:0,rn=p.get("text-anchor").evaluate(ie,{},y.canonical),ri=p.get("text-variable-anchor");if(!ri){const Zn=p.get("text-radial-offset").evaluate(ie,{},y.canonical);Ot=Zn?h_(rn,[Zn*Lt,U2]):p.get("text-offset").evaluate(ie,{},y.canonical).map($n=>$n*Lt)}let fi=O?"center":p.get("text-justify").evaluate(ie,{},y.canonical);const Wn=p.get("symbol-placement"),Un=Wn==="point"?p.get("text-max-width").evaluate(ie,{},y.canonical)*Lt:0,Tn=()=>{y.bucket.allowVerticalPlacement&&Ss(gr)&&(et.vertical=Vd(rt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Un,z,rn,"left",an,Ot,s.WritingMode.vertical,!0,Wn,Me,Ee))};if(!O&&ri){const Zn=fi==="auto"?ri.map(wn=>q2(wn)):[fi];let $n=!1;for(let wn=0;wn<Zn.length;wn++){const Si=Zn[wn];if(!et.horizontal[Si])if($n)et.horizontal[Si]=et.horizontal[0];else{const mi=Vd(rt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Un,z,"center",Si,an,Ot,s.WritingMode.horizontal,!1,Wn,Me,Ee);mi&&(et.horizontal[Si]=mi,$n=mi.positionedLines.length===1)}}Tn()}else{fi==="auto"&&(fi=q2(rn));const Zn=Vd(rt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Un,z,rn,fi,an,Ot,s.WritingMode.horizontal,!1,Wn,Me,Ee);Zn&&(et.horizontal[fi]=Zn),Tn(),Ss(gr)&&O&&V&&(et.vertical=Vd(rt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Un,z,rn,fi,an,Ot,s.WritingMode.vertical,!1,Wn,Me,Ee))}}let xr=!1;if(ie.icon&&ie.icon.name){const gr=y.imageMap[ie.icon.name];gr&&(Vt=tA(y.imagePositions[ie.icon.name],p.get("icon-offset").evaluate(ie,{},y.canonical),p.get("icon-anchor").evaluate(ie,{},y.canonical)),xr=!!gr.sdf,y.bucket.sdfIcons===void 0?y.bucket.sdfIcons=xr:y.bucket.sdfIcons!==xr&&le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gr.pixelRatio!==y.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(y.bucket.iconsNeedLinear=!0))}const jr=d_(et.horizontal)||et.vertical;y.bucket.iconsInText=!!jr&&jr.iconsInText,(jr||Vt)&&lA(y.bucket,ie,et,Vt,y.imageMap,S,Me,Ge,Ot,xr,y.canonical)}y.showCollisionBoxes&&y.bucket.generateCollisionDebugBuffers()},s.perspective=function(y,p,_,S,z){var O,V=1/Math.tan(p/2);return y[0]=V/_,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=V,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,z!=null&&z!==1/0?(y[10]=(z+S)*(O=1/(S-z)),y[14]=2*z*S*O):(y[10]=-1,y[14]=-2*S),y},s.pick=function(y,p){const _={};for(let S=0;S<p.length;S++){const z=p[S];z in y&&(_[z]=y[z])}return _},s.plugin=Cs,s.pointGeometry=ht,s.polygonIntersectsPolygon=k0,s.potpack=Yv,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=Dn,s.registerForPluginStateChange=function(y){return y({pluginStatus:ia,pluginURL:Ys}),tu.on("pluginStateChange",y),y},s.renderColorRamp=Cr,s.rotateX=function(y,p,_){var S=Math.sin(_),z=Math.cos(_),O=p[4],V=p[5],Q=p[6],ie=p[7],he=p[8],Ee=p[9],Me=p[10],Ge=p[11];return p!==y&&(y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15]),y[4]=O*z+he*S,y[5]=V*z+Ee*S,y[6]=Q*z+Me*S,y[7]=ie*z+Ge*S,y[8]=he*z-O*S,y[9]=Ee*z-V*S,y[10]=Me*z-Q*S,y[11]=Ge*z-ie*S,y},s.rotateZ=function(y,p,_){var S=Math.sin(_),z=Math.cos(_),O=p[0],V=p[1],Q=p[2],ie=p[3],he=p[4],Ee=p[5],Me=p[6],Ge=p[7];return p!==y&&(y[8]=p[8],y[9]=p[9],y[10]=p[10],y[11]=p[11],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15]),y[0]=O*z+he*S,y[1]=V*z+Ee*S,y[2]=Q*z+Me*S,y[3]=ie*z+Ge*S,y[4]=he*z-O*S,y[5]=Ee*z-V*S,y[6]=Me*z-Q*S,y[7]=Ge*z-ie*S,y},s.scale=function(y,p,_){var S=_[0],z=_[1],O=_[2];return y[0]=p[0]*S,y[1]=p[1]*S,y[2]=p[2]*S,y[3]=p[3]*S,y[4]=p[4]*z,y[5]=p[5]*z,y[6]=p[6]*z,y[7]=p[7]*z,y[8]=p[8]*O,y[9]=p[9]*O,y[10]=p[10]*O,y[11]=p[11]*O,y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15],y},s.scale$1=function(y,p,_){return y[0]=p[0]*_,y[1]=p[1]*_,y[2]=p[2]*_,y},s.setCacheLimits=function(y,p){ke=y,Re=p},s.setRTLTextPlugin=function(y,p,_=!1){if(ia===Rc||ia===dc||ia===ua)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ys=mt.resolveURL(y),ia=Rc,os=p,eu(),_||ho()},s.spec=yr,s.sphericalToCartesian=function([y,p,_]){return p+=90,p*=Math.PI/180,_*=Math.PI/180,{x:y*Math.cos(p)*Math.sin(_),y:y*Math.sin(p)*Math.sin(_),z:y*Math.cos(_)}},s.sqrLen=function(y){var p=y[0],_=y[1];return p*p+_*_},s.sub=function(y,p,_){return y[0]=p[0]-_[0],y[1]=p[1]-_[1],y[2]=p[2]-_[2],y},s.toEvaluationFeature=Ks,s.transformMat3=function(y,p,_){var S=p[0],z=p[1],O=p[2];return y[0]=S*_[0]+z*_[3]+O*_[6],y[1]=S*_[1]+z*_[4]+O*_[7],y[2]=S*_[2]+z*_[5]+O*_[8],y},s.transformMat4=va,s.transformMat4$1=function(y,p,_){var S=p[0],z=p[1];return y[0]=_[0]*S+_[4]*z+_[12],y[1]=_[1]*S+_[5]*z+_[13],y},s.translate=function(y,p,_){var S,z,O,V,Q,ie,he,Ee,Me,Ge,et,rt,Vt=_[0],Ot=_[1],xr=_[2];return p===y?(y[12]=p[0]*Vt+p[4]*Ot+p[8]*xr+p[12],y[13]=p[1]*Vt+p[5]*Ot+p[9]*xr+p[13],y[14]=p[2]*Vt+p[6]*Ot+p[10]*xr+p[14],y[15]=p[3]*Vt+p[7]*Ot+p[11]*xr+p[15]):(z=p[1],O=p[2],V=p[3],Q=p[4],ie=p[5],he=p[6],Ee=p[7],Me=p[8],Ge=p[9],et=p[10],rt=p[11],y[0]=S=p[0],y[1]=z,y[2]=O,y[3]=V,y[4]=Q,y[5]=ie,y[6]=he,y[7]=Ee,y[8]=Me,y[9]=Ge,y[10]=et,y[11]=rt,y[12]=S*Vt+Q*Ot+Me*xr+p[12],y[13]=z*Vt+ie*Ot+Ge*xr+p[13],y[14]=O*Vt+he*Ot+et*xr+p[14],y[15]=V*Vt+Ee*Ot+rt*xr+p[15]),y},s.triggerPluginCompletionEvent=mc,s.unicodeBlockLookup=An,s.uniqueId=function(){return B++},s.validateCustomStyleLayer=function(y){const p=[],_=y.id;return _===void 0&&p.push({message:`layers.${_}: missing required property "id"`}),y.render===void 0&&p.push({message:`layers.${_}: missing required method "render"`}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&p.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),p},s.validateLight=al,s.validateStyle=Es,s.vectorTile=L0,s.warnOnce=le,s.wrap=C}),u(["./shared"],function(s){function f(we){const _e=typeof we;if(_e==="number"||_e==="boolean"||_e==="string"||we==null)return JSON.stringify(we);if(Array.isArray(we)){let lt="[";for(const Rt of we)lt+=`${f(Rt)},`;return`${lt}]`}const De=Object.keys(we).sort();let ot="{";for(let lt=0;lt<De.length;lt++)ot+=`${JSON.stringify(De[lt])}:${f(we[De[lt]])},`;return`${ot}}`}function v(we){let _e="";for(const De of s.refProperties)_e+=`/${f(we[De])}`;return _e}class w{constructor(_e){this.keyCache={},_e&&this.replace(_e)}replace(_e){this._layerConfigs={},this._layers={},this.update(_e,[])}update(_e,De){for(const lt of _e){this._layerConfigs[lt.id]=lt;const Rt=this._layers[lt.id]=s.createStyleLayer(lt);Rt._featureFilter=s.createFilter(Rt.filter),this.keyCache[lt.id]&&delete this.keyCache[lt.id]}for(const lt of De)delete this.keyCache[lt],delete this._layerConfigs[lt],delete this._layers[lt];this.familiesBySource={};const ot=function(lt,Rt){const Fe={};for(let Nt=0;Nt<lt.length;Nt++){const ir=Rt&&Rt[lt[Nt].id]||v(lt[Nt]);Rt&&(Rt[lt[Nt].id]=ir);let Br=Fe[ir];Br||(Br=Fe[ir]=[]),Br.push(lt[Nt])}const Ht=[];for(const Nt in Fe)Ht.push(Fe[Nt]);return Ht}(Object.values(this._layerConfigs),this.keyCache);for(const lt of ot){const Rt=lt.map(nn=>this._layers[nn.id]),Fe=Rt[0];if(Fe.visibility==="none")continue;const Ht=Fe.source||"";let Nt=this.familiesBySource[Ht];Nt||(Nt=this.familiesBySource[Ht]={});const ir=Fe.sourceLayer||"_geojsonTileLayer";let Br=Nt[ir];Br||(Br=Nt[ir]=[]),Br.push(Rt)}}}class E{constructor(_e){const De={},ot=[];for(const Ht in _e){const Nt=_e[Ht],ir=De[Ht]={};for(const Br in Nt){const nn=Nt[+Br];if(!nn||nn.bitmap.width===0||nn.bitmap.height===0)continue;const Fr={x:0,y:0,w:nn.bitmap.width+2,h:nn.bitmap.height+2};ot.push(Fr),ir[Br]={rect:Fr,metrics:nn.metrics}}}const{w:lt,h:Rt}=s.potpack(ot),Fe=new s.AlphaImage({width:lt||1,height:Rt||1});for(const Ht in _e){const Nt=_e[Ht];for(const ir in Nt){const Br=Nt[+ir];if(!Br||Br.bitmap.width===0||Br.bitmap.height===0)continue;const nn=De[Ht][ir].rect;s.AlphaImage.copy(Br.bitmap,Fe,{x:0,y:0},{x:nn.x+1,y:nn.y+1},Br.bitmap)}}this.image=Fe,this.positions=De}}s.register("GlyphAtlas",E);class L{constructor(_e){this.tileID=new s.OverscaledTileID(_e.tileID.overscaledZ,_e.tileID.wrap,_e.tileID.canonical.z,_e.tileID.canonical.x,_e.tileID.canonical.y),this.uid=_e.uid,this.zoom=_e.zoom,this.pixelRatio=_e.pixelRatio,this.tileSize=_e.tileSize,this.source=_e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=_e.showCollisionBoxes,this.collectResourceTiming=!!_e.collectResourceTiming,this.returnDependencies=!!_e.returnDependencies,this.promoteId=_e.promoteId}parse(_e,De,ot,lt,Rt){this.status="parsing",this.data=_e,this.collisionBoxArray=new s.CollisionBoxArray;const Fe=new s.DictionaryCoder(Object.keys(_e.layers).sort()),Ht=new s.FeatureIndex(this.tileID,this.promoteId);Ht.bucketLayerIDs=[];const Nt={},ir={featureIndex:Ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ot},Br=De.familiesBySource[this.source];for(const Ii in Br){const Vi=_e.layers[Ii];if(!Vi)continue;Vi.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${Ii}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const io=Fe.encode(Ii),ko=[];for(let Jo=0;Jo<Vi.length;Jo++){const So=Vi.feature(Jo),Ko=Ht.getId(So,Ii);ko.push({feature:So,id:Ko,index:Jo,sourceLayerIndex:io})}for(const Jo of Br[Ii]){const So=Jo[0];So.source!==this.source&&s.warnOnce(`layer.source = ${So.source} does not equal this.source = ${this.source}`),So.minzoom&&this.zoom<Math.floor(So.minzoom)||So.maxzoom&&this.zoom>=So.maxzoom||So.visibility!=="none"&&(C(Jo,this.zoom,ot),(Nt[So.id]=So.createBucket({index:Ht.bucketLayerIDs.length,layers:Jo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:io,sourceID:this.source})).populate(ko,ir,this.tileID.canonical),Ht.bucketLayerIDs.push(Jo.map(Ko=>Ko.id)))}}let nn,Fr,Hn,Yn;const sn=s.mapObject(ir.glyphDependencies,Ii=>Object.keys(Ii).map(Number));Object.keys(sn).length?lt.send("getGlyphs",{uid:this.uid,stacks:sn},(Ii,Vi)=>{nn||(nn=Ii,Fr=Vi,Yi.call(this))}):Fr={};const yi=Object.keys(ir.iconDependencies);yi.length?lt.send("getImages",{icons:yi,source:this.source,tileID:this.tileID,type:"icons"},(Ii,Vi)=>{nn||(nn=Ii,Hn=Vi,Yi.call(this))}):Hn={};const Ai=Object.keys(ir.patternDependencies);function Yi(){if(nn)return Rt(nn);if(Fr&&Hn&&Yn){const Ii=new E(Fr),Vi=new s.ImageAtlas(Hn,Yn);for(const io in Nt){const ko=Nt[io];ko instanceof s.SymbolBucket?(C(ko.layers,this.zoom,ot),s.performSymbolLayout({bucket:ko,glyphMap:Fr,glyphPositions:Ii.positions,imageMap:Hn,imagePositions:Vi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ko.hasPattern&&(ko instanceof s.LineBucket||ko instanceof s.FillBucket||ko instanceof s.FillExtrusionBucket)&&(C(ko.layers,this.zoom,ot),ko.addFeatures(ir,this.tileID.canonical,Vi.patternPositions))}this.status="done",Rt(null,{buckets:Object.values(Nt).filter(io=>!io.isEmpty()),featureIndex:Ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ii.image,imageAtlas:Vi,glyphMap:this.returnDependencies?Fr:null,iconMap:this.returnDependencies?Hn:null,glyphPositions:this.returnDependencies?Ii.positions:null})}}Ai.length?lt.send("getImages",{icons:Ai,source:this.source,tileID:this.tileID,type:"patterns"},(Ii,Vi)=>{nn||(nn=Ii,Yn=Vi,Yi.call(this))}):Yn={},Yi.call(this)}}function C(we,_e,De){const ot=new s.EvaluationParameters(_e);for(const lt of we)lt.recalculate(ot,De)}function F(we,_e){const De=s.getArrayBuffer(we.request,(ot,lt,Rt,Fe)=>{ot?_e(ot):lt&&_e(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(lt)),rawData:lt,cacheControl:Rt,expires:Fe})});return()=>{De.cancel(),_e()}}class B{constructor(_e,De,ot,lt){this.actor=_e,this.layerIndex=De,this.availableImages=ot,this.loadVectorData=lt||F,this.loading={},this.loaded={}}loadTile(_e,De){const ot=_e.uid;this.loading||(this.loading={});const lt=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new s.RequestPerformance(_e.request),Rt=this.loading[ot]=new L(_e);Rt.abort=this.loadVectorData(_e,(Fe,Ht)=>{if(delete this.loading[ot],Fe||!Ht)return Rt.status="done",this.loaded[ot]=Rt,De(Fe);const Nt=Ht.rawData,ir={};Ht.expires&&(ir.expires=Ht.expires),Ht.cacheControl&&(ir.cacheControl=Ht.cacheControl);const Br={};if(lt){const nn=lt.finish();nn&&(Br.resourceTiming=JSON.parse(JSON.stringify(nn)))}Rt.vectorTile=Ht.vectorTile,Rt.parse(Ht.vectorTile,this.layerIndex,this.availableImages,this.actor,(nn,Fr)=>{if(nn||!Fr)return De(nn);De(null,s.extend({rawTileData:Nt.slice(0)},Fr,ir,Br))}),this.loaded=this.loaded||{},this.loaded[ot]=Rt})}reloadTile(_e,De){const ot=this.loaded,lt=_e.uid,Rt=this;if(ot&&ot[lt]){const Fe=ot[lt];Fe.showCollisionBoxes=_e.showCollisionBoxes;const Ht=(Nt,ir)=>{const Br=Fe.reloadCallback;Br&&(delete Fe.reloadCallback,Fe.parse(Fe.vectorTile,Rt.layerIndex,this.availableImages,Rt.actor,Br)),De(Nt,ir)};Fe.status==="parsing"?Fe.reloadCallback=Ht:Fe.status==="done"&&(Fe.vectorTile?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,Ht):Ht())}}abortTile(_e,De){const ot=this.loading,lt=_e.uid;ot&&ot[lt]&&ot[lt].abort&&(ot[lt].abort(),delete ot[lt]),De()}removeTile(_e,De){const ot=this.loaded,lt=_e.uid;ot&&ot[lt]&&delete ot[lt],De()}}class G{constructor(){this.loaded={}}loadTile(_e,De){const{uid:ot,encoding:lt,rawImageData:Rt}=_e,Fe=s.isImageBitmap(Rt)?this.getImageData(Rt):Rt,Ht=new s.DEMData(ot,Fe,lt);this.loaded=this.loaded||{},this.loaded[ot]=Ht,De(null,Ht)}getImageData(_e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(_e.width,_e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=_e.width,this.offscreenCanvas.height=_e.height,this.offscreenCanvasContext.drawImage(_e,0,0,_e.width,_e.height);const De=this.offscreenCanvasContext.getImageData(-1,-1,_e.width+2,_e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:De.width,height:De.height},De.data)}removeTile(_e){const De=this.loaded,ot=_e.uid;De&&De[ot]&&delete De[ot]}}var H=function we(_e,De){var ot,lt=_e&&_e.type;if(lt==="FeatureCollection")for(ot=0;ot<_e.features.length;ot++)we(_e.features[ot],De);else if(lt==="GeometryCollection")for(ot=0;ot<_e.geometries.length;ot++)we(_e.geometries[ot],De);else if(lt==="Feature")we(_e.geometry,De);else if(lt==="Polygon")Z(_e.coordinates,De);else if(lt==="MultiPolygon")for(ot=0;ot<_e.coordinates.length;ot++)Z(_e.coordinates[ot],De);return _e};function Z(we,_e){if(we.length!==0){ee(we[0],_e);for(var De=1;De<we.length;De++)ee(we[De],!_e)}}function ee(we,_e){for(var De=0,ot=0,lt=0,Rt=we.length,Fe=Rt-1;lt<Rt;Fe=lt++){var Ht=(we[lt][0]-we[Fe][0])*(we[Fe][1]+we[lt][1]),Nt=De+Ht;ot+=Math.abs(De)>=Math.abs(Ht)?De-Nt+Ht:Ht-Nt+De,De=Nt}De+ot>=0!=!!_e&&we.reverse()}const Y=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class le{constructor(_e){this._feature=_e,this.extent=s.EXTENT,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){const _e=[];for(const De of this._feature.geometry)_e.push([new s.pointGeometry(De[0],De[1])]);return _e}{const _e=[];for(const De of this._feature.geometry){const ot=[];for(const lt of De)ot.push(new s.pointGeometry(lt[0],lt[1]));_e.push(ot)}return _e}}toGeoJSON(_e,De,ot){return Y.call(this,_e,De,ot)}}class ce{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=_e.length,this._features=_e}feature(_e){return new le(this._features[_e])}}var ve={exports:{}},pe=s.pointGeometry,Ne=s.vectorTile.VectorTileFeature,Ve=be;function be(we,_e){this.options=_e||{},this.features=we,this.length=we.length}function Ce(we,_e){this.id=typeof we.id=="number"?we.id:void 0,this.type=we.type,this.rawGeometry=we.type===1?[we.geometry]:we.geometry,this.properties=we.tags,this.extent=_e||4096}be.prototype.feature=function(we){return new Ce(this.features[we],this.options.extent)},Ce.prototype.loadGeometry=function(){var we=this.rawGeometry;this.geometry=[];for(var _e=0;_e<we.length;_e++){for(var De=we[_e],ot=[],lt=0;lt<De.length;lt++)ot.push(new pe(De[lt][0],De[lt][1]));this.geometry.push(ot)}return this.geometry},Ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var we=this.geometry,_e=1/0,De=-1/0,ot=1/0,lt=-1/0,Rt=0;Rt<we.length;Rt++)for(var Fe=we[Rt],Ht=0;Ht<Fe.length;Ht++){var Nt=Fe[Ht];_e=Math.min(_e,Nt.x),De=Math.max(De,Nt.x),ot=Math.min(ot,Nt.y),lt=Math.max(lt,Nt.y)}return[_e,ot,De,lt]},Ce.prototype.toGeoJSON=Ne.prototype.toGeoJSON;var Oe=s.pbf,nt=Ve;function mt(we){var _e=new Oe;return function(De,ot){for(var lt in De.layers)ot.writeMessage(3,ht,De.layers[lt])}(we,_e),_e.finish()}function ht(we,_e){var De;_e.writeVarintField(15,we.version||1),_e.writeStringField(1,we.name||""),_e.writeVarintField(5,we.extent||4096);var ot={keys:[],values:[],keycache:{},valuecache:{}};for(De=0;De<we.length;De++)ot.feature=we.feature(De),_e.writeMessage(2,He,ot);var lt=ot.keys;for(De=0;De<lt.length;De++)_e.writeStringField(3,lt[De]);var Rt=ot.values;for(De=0;De<Rt.length;De++)_e.writeMessage(4,ke,Rt[De])}function He(we,_e){var De=we.feature;De.id!==void 0&&_e.writeVarintField(1,De.id),_e.writeMessage(2,ut,we),_e.writeVarintField(3,De.type),_e.writeMessage(4,We,De)}function ut(we,_e){var De=we.feature,ot=we.keys,lt=we.values,Rt=we.keycache,Fe=we.valuecache;for(var Ht in De.properties){var Nt=De.properties[Ht],ir=Rt[Ht];if(Nt!==null){ir===void 0&&(ot.push(Ht),Rt[Ht]=ir=ot.length-1),_e.writeVarint(ir);var Br=typeof Nt;Br!=="string"&&Br!=="boolean"&&Br!=="number"&&(Nt=JSON.stringify(Nt));var nn=Br+":"+Nt,Fr=Fe[nn];Fr===void 0&&(lt.push(Nt),Fe[nn]=Fr=lt.length-1),_e.writeVarint(Fr)}}}function bt(we,_e){return(_e<<3)+(7&we)}function Xe(we){return we<<1^we>>31}function We(we,_e){for(var De=we.loadGeometry(),ot=we.type,lt=0,Rt=0,Fe=De.length,Ht=0;Ht<Fe;Ht++){var Nt=De[Ht],ir=1;ot===1&&(ir=Nt.length),_e.writeVarint(bt(1,ir));for(var Br=ot===3?Nt.length-1:Nt.length,nn=0;nn<Br;nn++){nn===1&&ot!==1&&_e.writeVarint(bt(2,Br-1));var Fr=Nt[nn].x-lt,Hn=Nt[nn].y-Rt;_e.writeVarint(Xe(Fr)),_e.writeVarint(Xe(Hn)),lt+=Fr,Rt+=Hn}ot===3&&_e.writeVarint(bt(7,1))}}function ke(we,_e){var De=typeof we;De==="string"?_e.writeStringField(1,we):De==="boolean"?_e.writeBooleanField(7,we):De==="number"&&(we%1!=0?_e.writeDoubleField(3,we):we<0?_e.writeSVarintField(6,we):_e.writeVarintField(5,we))}function Re(we,_e,De,ot,lt,Rt){if(lt-ot<=De)return;const Fe=ot+lt>>1;Pe(we,_e,Fe,ot,lt,Rt%2),Re(we,_e,De,ot,Fe-1,Rt+1),Re(we,_e,De,Fe+1,lt,Rt+1)}function Pe(we,_e,De,ot,lt,Rt){for(;lt>ot;){if(lt-ot>600){const ir=lt-ot+1,Br=De-ot+1,nn=Math.log(ir),Fr=.5*Math.exp(2*nn/3),Hn=.5*Math.sqrt(nn*Fr*(ir-Fr)/ir)*(Br-ir/2<0?-1:1);Pe(we,_e,De,Math.max(ot,Math.floor(De-Br*Fr/ir+Hn)),Math.min(lt,Math.floor(De+(ir-Br)*Fr/ir+Hn)),Rt)}const Fe=_e[2*De+Rt];let Ht=ot,Nt=lt;for(dt(we,_e,ot,De),_e[2*lt+Rt]>Fe&&dt(we,_e,ot,lt);Ht<Nt;){for(dt(we,_e,Ht,Nt),Ht++,Nt--;_e[2*Ht+Rt]<Fe;)Ht++;for(;_e[2*Nt+Rt]>Fe;)Nt--}_e[2*ot+Rt]===Fe?dt(we,_e,ot,Nt):(Nt++,dt(we,_e,Nt,lt)),Nt<=De&&(ot=Nt+1),De<=Nt&&(lt=Nt-1)}}function dt(we,_e,De,ot){Et(we,De,ot),Et(_e,2*De,2*ot),Et(_e,2*De+1,2*ot+1)}function Et(we,_e,De){const ot=we[_e];we[_e]=we[De],we[De]=ot}function Pt(we,_e,De,ot){const lt=we-De,Rt=_e-ot;return lt*lt+Rt*Rt}ve.exports=mt,ve.exports.fromVectorTileJs=mt,ve.exports.fromGeojsonVt=function(we,_e){_e=_e||{};var De={};for(var ot in we)De[ot]=new nt(we[ot].features,_e),De[ot].name=ot,De[ot].version=_e.version,De[ot].extent=_e.extent;return mt({layers:De})},ve.exports.GeoJSONWrapper=nt;const Kt=we=>we[0],$t=we=>we[1];class br{constructor(_e,De=Kt,ot=$t,lt=64,Rt=Float64Array){this.nodeSize=lt,this.points=_e;const Fe=_e.length<65536?Uint16Array:Uint32Array,Ht=this.ids=new Fe(_e.length),Nt=this.coords=new Rt(2*_e.length);for(let ir=0;ir<_e.length;ir++)Ht[ir]=ir,Nt[2*ir]=De(_e[ir]),Nt[2*ir+1]=ot(_e[ir]);Re(Ht,Nt,lt,0,Ht.length-1,0)}range(_e,De,ot,lt){return function(Rt,Fe,Ht,Nt,ir,Br,nn){const Fr=[0,Rt.length-1,0],Hn=[];let Yn,sn;for(;Fr.length;){const yi=Fr.pop(),Ai=Fr.pop(),Yi=Fr.pop();if(Ai-Yi<=nn){for(let io=Yi;io<=Ai;io++)Yn=Fe[2*io],sn=Fe[2*io+1],Yn>=Ht&&Yn<=ir&&sn>=Nt&&sn<=Br&&Hn.push(Rt[io]);continue}const Ii=Math.floor((Yi+Ai)/2);Yn=Fe[2*Ii],sn=Fe[2*Ii+1],Yn>=Ht&&Yn<=ir&&sn>=Nt&&sn<=Br&&Hn.push(Rt[Ii]);const Vi=(yi+1)%2;(yi===0?Ht<=Yn:Nt<=sn)&&(Fr.push(Yi),Fr.push(Ii-1),Fr.push(Vi)),(yi===0?ir>=Yn:Br>=sn)&&(Fr.push(Ii+1),Fr.push(Ai),Fr.push(Vi))}return Hn}(this.ids,this.coords,_e,De,ot,lt,this.nodeSize)}within(_e,De,ot){return function(lt,Rt,Fe,Ht,Nt,ir){const Br=[0,lt.length-1,0],nn=[],Fr=Nt*Nt;for(;Br.length;){const Hn=Br.pop(),Yn=Br.pop(),sn=Br.pop();if(Yn-sn<=ir){for(let Vi=sn;Vi<=Yn;Vi++)Pt(Rt[2*Vi],Rt[2*Vi+1],Fe,Ht)<=Fr&&nn.push(lt[Vi]);continue}const yi=Math.floor((sn+Yn)/2),Ai=Rt[2*yi],Yi=Rt[2*yi+1];Pt(Ai,Yi,Fe,Ht)<=Fr&&nn.push(lt[yi]);const Ii=(Hn+1)%2;(Hn===0?Fe-Nt<=Ai:Ht-Nt<=Yi)&&(Br.push(sn),Br.push(yi-1),Br.push(Ii)),(Hn===0?Fe+Nt>=Ai:Ht+Nt>=Yi)&&(Br.push(yi+1),Br.push(Yn),Br.push(Ii))}return nn}(this.ids,this.coords,_e,De,ot,this.nodeSize)}}const Gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:we=>we},Rr=Math.fround||(Mr=new Float32Array(1),we=>(Mr[0]=+we,Mr[0]));var Mr;class Kr{constructor(_e){this.options=tn(Object.create(Gt),_e),this.trees=new Array(this.options.maxZoom+1)}load(_e){const{log:De,minZoom:ot,maxZoom:lt,nodeSize:Rt}=this.options;De&&console.time("total time");const Fe=`prepare ${_e.length} points`;De&&console.time(Fe),this.points=_e;let Ht=[];for(let Nt=0;Nt<_e.length;Nt++)_e[Nt].geometry&&Ht.push(pt(_e[Nt],Nt));this.trees[lt+1]=new br(Ht,Bn,Jn,Rt,Float32Array),De&&console.timeEnd(Fe);for(let Nt=lt;Nt>=ot;Nt--){const ir=+Date.now();Ht=this._cluster(Ht,Nt),this.trees[Nt]=new br(Ht,Bn,Jn,Rt,Float32Array),De&&console.log("z%d: %d clusters in %dms",Nt,Ht.length,+Date.now()-ir)}return De&&console.timeEnd("total time"),this}getClusters(_e,De){let ot=((_e[0]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,_e[1]));let Rt=_e[2]===180?180:((_e[2]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,_e[3]));if(_e[2]-_e[0]>=360)ot=-180,Rt=180;else if(ot>Rt){const Br=this.getClusters([ot,lt,180,Fe],De),nn=this.getClusters([-180,lt,Rt,Fe],De);return Br.concat(nn)}const Ht=this.trees[this._limitZoom(De)],Nt=Ht.range(Wt(ot),Ur(Fe),Wt(Rt),Ur(lt)),ir=[];for(const Br of Nt){const nn=Ht.points[Br];ir.push(nn.numPoints?Dr(nn):this.points[nn.index])}return ir}getChildren(_e){const De=this._getOriginId(_e),ot=this._getOriginZoom(_e),lt="No cluster with the specified id.",Rt=this.trees[ot];if(!Rt)throw new Error(lt);const Fe=Rt.points[De];if(!Fe)throw new Error(lt);const Ht=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),Nt=Rt.within(Fe.x,Fe.y,Ht),ir=[];for(const Br of Nt){const nn=Rt.points[Br];nn.parentId===_e&&ir.push(nn.numPoints?Dr(nn):this.points[nn.index])}if(ir.length===0)throw new Error(lt);return ir}getLeaves(_e,De,ot){const lt=[];return this._appendLeaves(lt,_e,De=De||10,ot=ot||0,0),lt}getTile(_e,De,ot){const lt=this.trees[this._limitZoom(_e)],Rt=Math.pow(2,_e),{extent:Fe,radius:Ht}=this.options,Nt=Ht/Fe,ir=(ot-Nt)/Rt,Br=(ot+1+Nt)/Rt,nn={features:[]};return this._addTileFeatures(lt.range((De-Nt)/Rt,ir,(De+1+Nt)/Rt,Br),lt.points,De,ot,Rt,nn),De===0&&this._addTileFeatures(lt.range(1-Nt/Rt,ir,1,Br),lt.points,Rt,ot,Rt,nn),De===Rt-1&&this._addTileFeatures(lt.range(0,ir,Nt/Rt,Br),lt.points,-1,ot,Rt,nn),nn.features.length?nn:null}getClusterExpansionZoom(_e){let De=this._getOriginZoom(_e)-1;for(;De<=this.options.maxZoom;){const ot=this.getChildren(_e);if(De++,ot.length!==1)break;_e=ot[0].properties.cluster_id}return De}_appendLeaves(_e,De,ot,lt,Rt){const Fe=this.getChildren(De);for(const Ht of Fe){const Nt=Ht.properties;if(Nt&&Nt.cluster?Rt+Nt.point_count<=lt?Rt+=Nt.point_count:Rt=this._appendLeaves(_e,Nt.cluster_id,ot,lt,Rt):Rt<lt?Rt++:_e.push(Ht),_e.length===ot)break}return Rt}_addTileFeatures(_e,De,ot,lt,Rt,Fe){for(const Ht of _e){const Nt=De[Ht],ir=Nt.numPoints;let Br,nn,Fr;if(ir)Br=ln(Nt),nn=Nt.x,Fr=Nt.y;else{const sn=this.points[Nt.index];Br=sn.properties,nn=Wt(sn.geometry.coordinates[0]),Fr=Ur(sn.geometry.coordinates[1])}const Hn={type:1,geometry:[[Math.round(this.options.extent*(nn*Rt-ot)),Math.round(this.options.extent*(Fr*Rt-lt))]],tags:Br};let Yn;ir?Yn=Nt.id:this.options.generateId?Yn=Nt.index:this.points[Nt.index].id&&(Yn=this.points[Nt.index].id),Yn!==void 0&&(Hn.id=Yn),Fe.features.push(Hn)}}_limitZoom(_e){return Math.max(this.options.minZoom,Math.min(Math.floor(+_e),this.options.maxZoom+1))}_cluster(_e,De){const ot=[],{radius:lt,extent:Rt,reduce:Fe,minPoints:Ht}=this.options,Nt=lt/(Rt*Math.pow(2,De));for(let ir=0;ir<_e.length;ir++){const Br=_e[ir];if(Br.zoom<=De)continue;Br.zoom=De;const nn=this.trees[De+1],Fr=nn.within(Br.x,Br.y,Nt),Hn=Br.numPoints||1;let Yn=Hn;for(const sn of Fr){const yi=nn.points[sn];yi.zoom>De&&(Yn+=yi.numPoints||1)}if(Yn>Hn&&Yn>=Ht){let sn=Br.x*Hn,yi=Br.y*Hn,Ai=Fe&&Hn>1?this._map(Br,!0):null;const Yi=(ir<<5)+(De+1)+this.points.length;for(const Ii of Fr){const Vi=nn.points[Ii];if(Vi.zoom<=De)continue;Vi.zoom=De;const io=Vi.numPoints||1;sn+=Vi.x*io,yi+=Vi.y*io,Vi.parentId=Yi,Fe&&(Ai||(Ai=this._map(Br,!0)),Fe(Ai,this._map(Vi)))}Br.parentId=Yi,ot.push(Ct(sn/Yn,yi/Yn,Yi,Yn,Ai))}else if(ot.push(Br),Yn>1)for(const sn of Fr){const yi=nn.points[sn];yi.zoom<=De||(yi.zoom=De,ot.push(yi))}}return ot}_getOriginId(_e){return _e-this.points.length>>5}_getOriginZoom(_e){return(_e-this.points.length)%32}_map(_e,De){if(_e.numPoints)return De?tn({},_e.properties):_e.properties;const ot=this.points[_e.index].properties,lt=this.options.map(ot);return De&&lt===ot?tn({},lt):lt}}function Ct(we,_e,De,ot,lt){return{x:Rr(we),y:Rr(_e),zoom:1/0,id:De,parentId:-1,numPoints:ot,properties:lt}}function pt(we,_e){const[De,ot]=we.geometry.coordinates;return{x:Rr(Wt(De)),y:Rr(Ur(ot)),zoom:1/0,index:_e,parentId:-1}}function Dr(we){return{type:"Feature",id:we.id,properties:ln(we),geometry:{type:"Point",coordinates:[(_e=we.x,360*(_e-.5)),dn(we.y)]}};var _e}function ln(we){const _e=we.numPoints,De=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e;return tn(tn({},we.properties),{cluster:!0,cluster_id:we.id,point_count:_e,point_count_abbreviated:De})}function Wt(we){return we/360+.5}function Ur(we){const _e=Math.sin(we*Math.PI/180),De=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return De<0?0:De>1?1:De}function dn(we){const _e=(180-360*we)*Math.PI/180;return 360*Math.atan(Math.exp(_e))/Math.PI-90}function tn(we,_e){for(const De in _e)we[De]=_e[De];return we}function Bn(we){return we.x}function Jn(we){return we.y}function ai(we,_e,De,ot){for(var lt,Rt=ot,Fe=De-_e>>1,Ht=De-_e,Nt=we[_e],ir=we[_e+1],Br=we[De],nn=we[De+1],Fr=_e+3;Fr<De;Fr+=3){var Hn=_i(we[Fr],we[Fr+1],Nt,ir,Br,nn);if(Hn>Rt)lt=Fr,Rt=Hn;else if(Hn===Rt){var Yn=Math.abs(Fr-Fe);Yn<Ht&&(lt=Fr,Ht=Yn)}}Rt>ot&&(lt-_e>3&&ai(we,_e,lt,ot),we[lt+2]=Rt,De-lt>3&&ai(we,lt,De,ot))}function _i(we,_e,De,ot,lt,Rt){var Fe=lt-De,Ht=Rt-ot;if(Fe!==0||Ht!==0){var Nt=((we-De)*Fe+(_e-ot)*Ht)/(Fe*Fe+Ht*Ht);Nt>1?(De=lt,ot=Rt):Nt>0&&(De+=Fe*Nt,ot+=Ht*Nt)}return(Fe=we-De)*Fe+(Ht=_e-ot)*Ht}function hi(we,_e,De,ot){var lt={id:we===void 0?null:we,type:_e,geometry:De,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Rt){var Fe=Rt.geometry,Ht=Rt.type;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")yr(Rt,Fe);else if(Ht==="Polygon"||Ht==="MultiLineString")for(var Nt=0;Nt<Fe.length;Nt++)yr(Rt,Fe[Nt]);else if(Ht==="MultiPolygon")for(Nt=0;Nt<Fe.length;Nt++)for(var ir=0;ir<Fe[Nt].length;ir++)yr(Rt,Fe[Nt][ir])}(lt),lt}function yr(we,_e){for(var De=0;De<_e.length;De+=3)we.minX=Math.min(we.minX,_e[De]),we.minY=Math.min(we.minY,_e[De+1]),we.maxX=Math.max(we.maxX,_e[De]),we.maxY=Math.max(we.maxY,_e[De+1])}function Vr(we,_e,De,ot){if(_e.geometry){var lt=_e.geometry.coordinates,Rt=_e.geometry.type,Fe=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2),Ht=[],Nt=_e.id;if(De.promoteId?Nt=_e.properties[De.promoteId]:De.generateId&&(Nt=ot||0),Rt==="Point")wi(lt,Ht);else if(Rt==="MultiPoint")for(var ir=0;ir<lt.length;ir++)wi(lt[ir],Ht);else if(Rt==="LineString")xn(lt,Ht,Fe,!1);else if(Rt==="MultiLineString"){if(De.lineMetrics){for(ir=0;ir<lt.length;ir++)xn(lt[ir],Ht=[],Fe,!1),we.push(hi(Nt,"LineString",Ht,_e.properties));return}si(lt,Ht,Fe,!1)}else if(Rt==="Polygon")si(lt,Ht,Fe,!0);else{if(Rt!=="MultiPolygon"){if(Rt==="GeometryCollection"){for(ir=0;ir<_e.geometry.geometries.length;ir++)Vr(we,{id:Nt,geometry:_e.geometry.geometries[ir],properties:_e.properties},De,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ir=0;ir<lt.length;ir++){var Br=[];si(lt[ir],Br,Fe,!0),Ht.push(Br)}}we.push(hi(Nt,Rt,Ht,_e.properties))}}function wi(we,_e){_e.push(fr(we[0])),_e.push(or(we[1])),_e.push(0)}function xn(we,_e,De,ot){for(var lt,Rt,Fe=0,Ht=0;Ht<we.length;Ht++){var Nt=fr(we[Ht][0]),ir=or(we[Ht][1]);_e.push(Nt),_e.push(ir),_e.push(0),Ht>0&&(Fe+=ot?(lt*ir-Nt*Rt)/2:Math.sqrt(Math.pow(Nt-lt,2)+Math.pow(ir-Rt,2))),lt=Nt,Rt=ir}var Br=_e.length-3;_e[2]=1,ai(_e,0,Br,De),_e[Br+2]=1,_e.size=Math.abs(Fe),_e.start=0,_e.end=_e.size}function si(we,_e,De,ot){for(var lt=0;lt<we.length;lt++){var Rt=[];xn(we[lt],Rt,De,ot),_e.push(Rt)}}function fr(we){return we/360+.5}function or(we){var _e=Math.sin(we*Math.PI/180),De=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return De<0?0:De>1?1:De}function Yr(we,_e,De,ot,lt,Rt,Fe,Ht){if(ot/=_e,Rt>=(De/=_e)&&Fe<ot)return we;if(Fe<De||Rt>=ot)return null;for(var Nt=[],ir=0;ir<we.length;ir++){var Br=we[ir],nn=Br.geometry,Fr=Br.type,Hn=lt===0?Br.minX:Br.minY,Yn=lt===0?Br.maxX:Br.maxY;if(Hn>=De&&Yn<ot)Nt.push(Br);else if(!(Yn<De||Hn>=ot)){var sn=[];if(Fr==="Point"||Fr==="MultiPoint")un(nn,sn,De,ot,lt);else if(Fr==="LineString")Or(nn,sn,De,ot,lt,!1,Ht.lineMetrics);else if(Fr==="MultiLineString")Qn(nn,sn,De,ot,lt,!1);else if(Fr==="Polygon")Qn(nn,sn,De,ot,lt,!0);else if(Fr==="MultiPolygon")for(var yi=0;yi<nn.length;yi++){var Ai=[];Qn(nn[yi],Ai,De,ot,lt,!0),Ai.length&&sn.push(Ai)}if(sn.length){if(Ht.lineMetrics&&Fr==="LineString"){for(yi=0;yi<sn.length;yi++)Nt.push(hi(Br.id,Fr,sn[yi],Br.tags));continue}Fr!=="LineString"&&Fr!=="MultiLineString"||(sn.length===1?(Fr="LineString",sn=sn[0]):Fr="MultiLineString"),Fr!=="Point"&&Fr!=="MultiPoint"||(Fr=sn.length===3?"Point":"MultiPoint"),Nt.push(hi(Br.id,Fr,sn,Br.tags))}}}return Nt.length?Nt:null}function un(we,_e,De,ot,lt){for(var Rt=0;Rt<we.length;Rt+=3){var Fe=we[Rt+lt];Fe>=De&&Fe<=ot&&(_e.push(we[Rt]),_e.push(we[Rt+1]),_e.push(we[Rt+2]))}}function Or(we,_e,De,ot,lt,Rt,Fe){for(var Ht,Nt,ir=pn(we),Br=lt===0?Ro:gi,nn=we.start,Fr=0;Fr<we.length-3;Fr+=3){var Hn=we[Fr],Yn=we[Fr+1],sn=we[Fr+2],yi=we[Fr+3],Ai=we[Fr+4],Yi=lt===0?Hn:Yn,Ii=lt===0?yi:Ai,Vi=!1;Fe&&(Ht=Math.sqrt(Math.pow(Hn-yi,2)+Math.pow(Yn-Ai,2))),Yi<De?Ii>De&&(Nt=Br(ir,Hn,Yn,yi,Ai,De),Fe&&(ir.start=nn+Ht*Nt)):Yi>ot?Ii<ot&&(Nt=Br(ir,Hn,Yn,yi,Ai,ot),Fe&&(ir.start=nn+Ht*Nt)):ci(ir,Hn,Yn,sn),Ii<De&&Yi>=De&&(Nt=Br(ir,Hn,Yn,yi,Ai,De),Vi=!0),Ii>ot&&Yi<=ot&&(Nt=Br(ir,Hn,Yn,yi,Ai,ot),Vi=!0),!Rt&&Vi&&(Fe&&(ir.end=nn+Ht*Nt),_e.push(ir),ir=pn(we)),Fe&&(nn+=Ht)}var io=we.length-3;Hn=we[io],Yn=we[io+1],sn=we[io+2],(Yi=lt===0?Hn:Yn)>=De&&Yi<=ot&&ci(ir,Hn,Yn,sn),io=ir.length-3,Rt&&io>=3&&(ir[io]!==ir[0]||ir[io+1]!==ir[1])&&ci(ir,ir[0],ir[1],ir[2]),ir.length&&_e.push(ir)}function pn(we){var _e=[];return _e.size=we.size,_e.start=we.start,_e.end=we.end,_e}function Qn(we,_e,De,ot,lt,Rt){for(var Fe=0;Fe<we.length;Fe++)Or(we[Fe],_e,De,ot,lt,Rt,!1)}function ci(we,_e,De,ot){we.push(_e),we.push(De),we.push(ot)}function Ro(we,_e,De,ot,lt,Rt){var Fe=(Rt-_e)/(ot-_e);return we.push(Rt),we.push(De+(lt-De)*Fe),we.push(1),Fe}function gi(we,_e,De,ot,lt,Rt){var Fe=(Rt-De)/(lt-De);return we.push(_e+(ot-_e)*Fe),we.push(Rt),we.push(1),Fe}function co(we,_e){for(var De=[],ot=0;ot<we.length;ot++){var lt,Rt=we[ot],Fe=Rt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")lt=li(Rt.geometry,_e);else if(Fe==="MultiLineString"||Fe==="Polygon"){lt=[];for(var Ht=0;Ht<Rt.geometry.length;Ht++)lt.push(li(Rt.geometry[Ht],_e))}else if(Fe==="MultiPolygon")for(lt=[],Ht=0;Ht<Rt.geometry.length;Ht++){for(var Nt=[],ir=0;ir<Rt.geometry[Ht].length;ir++)Nt.push(li(Rt.geometry[Ht][ir],_e));lt.push(Nt)}De.push(hi(Rt.id,Fe,lt,Rt.tags))}return De}function li(we,_e){var De=[];De.size=we.size,we.start!==void 0&&(De.start=we.start,De.end=we.end);for(var ot=0;ot<we.length;ot+=3)De.push(we[ot]+_e,we[ot+1],we[ot+2]);return De}function no(we,_e){if(we.transformed)return we;var De,ot,lt,Rt=1<<we.z,Fe=we.x,Ht=we.y;for(De=0;De<we.features.length;De++){var Nt=we.features[De],ir=Nt.geometry,Br=Nt.type;if(Nt.geometry=[],Br===1)for(ot=0;ot<ir.length;ot+=2)Nt.geometry.push(yo(ir[ot],ir[ot+1],_e,Rt,Fe,Ht));else for(ot=0;ot<ir.length;ot++){var nn=[];for(lt=0;lt<ir[ot].length;lt+=2)nn.push(yo(ir[ot][lt],ir[ot][lt+1],_e,Rt,Fe,Ht));Nt.geometry.push(nn)}}return we.transformed=!0,we}function yo(we,_e,De,ot,lt,Rt){return[Math.round(De*(we*ot-lt)),Math.round(De*(_e*ot-Rt))]}function pi(we,_e,De,ot,lt){for(var Rt=_e===lt.maxZoom?0:lt.tolerance/((1<<_e)*lt.extent),Fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:De,y:ot,z:_e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ht=0;Ht<we.length;Ht++){Fe.numFeatures++,Li(Fe,we[Ht],Rt,lt);var Nt=we[Ht].minX,ir=we[Ht].minY,Br=we[Ht].maxX,nn=we[Ht].maxY;Nt<Fe.minX&&(Fe.minX=Nt),ir<Fe.minY&&(Fe.minY=ir),Br>Fe.maxX&&(Fe.maxX=Br),nn>Fe.maxY&&(Fe.maxY=nn)}return Fe}function Li(we,_e,De,ot){var lt=_e.geometry,Rt=_e.type,Fe=[];if(Rt==="Point"||Rt==="MultiPoint")for(var Ht=0;Ht<lt.length;Ht+=3)Fe.push(lt[Ht]),Fe.push(lt[Ht+1]),we.numPoints++,we.numSimplified++;else if(Rt==="LineString")Yo(Fe,lt,we,De,!1,!1);else if(Rt==="MultiLineString"||Rt==="Polygon")for(Ht=0;Ht<lt.length;Ht++)Yo(Fe,lt[Ht],we,De,Rt==="Polygon",Ht===0);else if(Rt==="MultiPolygon")for(var Nt=0;Nt<lt.length;Nt++){var ir=lt[Nt];for(Ht=0;Ht<ir.length;Ht++)Yo(Fe,ir[Ht],we,De,!0,Ht===0)}if(Fe.length){var Br=_e.tags||null;if(Rt==="LineString"&&ot.lineMetrics){for(var nn in Br={},_e.tags)Br[nn]=_e.tags[nn];Br.mapbox_clip_start=lt.start/lt.size,Br.mapbox_clip_end=lt.end/lt.size}var Fr={geometry:Fe,type:Rt==="Polygon"||Rt==="MultiPolygon"?3:Rt==="LineString"||Rt==="MultiLineString"?2:1,tags:Br};_e.id!==null&&(Fr.id=_e.id),we.features.push(Fr)}}function Yo(we,_e,De,ot,lt,Rt){var Fe=ot*ot;if(ot>0&&_e.size<(lt?Fe:ot))De.numPoints+=_e.length/3;else{for(var Ht=[],Nt=0;Nt<_e.length;Nt+=3)(ot===0||_e[Nt+2]>Fe)&&(De.numSimplified++,Ht.push(_e[Nt]),Ht.push(_e[Nt+1])),De.numPoints++;lt&&function(ir,Br){for(var nn=0,Fr=0,Hn=ir.length,Yn=Hn-2;Fr<Hn;Yn=Fr,Fr+=2)nn+=(ir[Fr]-ir[Yn])*(ir[Fr+1]+ir[Yn+1]);if(nn>0===Br)for(Fr=0,Hn=ir.length;Fr<Hn/2;Fr+=2){var sn=ir[Fr],yi=ir[Fr+1];ir[Fr]=ir[Hn-2-Fr],ir[Fr+1]=ir[Hn-1-Fr],ir[Hn-2-Fr]=sn,ir[Hn-1-Fr]=yi}}(Ht,Rt),we.push(Ht)}}function vn(we,_e){var De=(_e=this.options=function(lt,Rt){for(var Fe in Rt)lt[Fe]=Rt[Fe];return lt}(Object.create(this.options),_e)).debug;if(De&&console.time("preprocess data"),_e.maxZoom<0||_e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(_e.promoteId&&_e.generateId)throw new Error("promoteId and generateId cannot be used together.");var ot=function(lt,Rt){var Fe=[];if(lt.type==="FeatureCollection")for(var Ht=0;Ht<lt.features.length;Ht++)Vr(Fe,lt.features[Ht],Rt,Ht);else Vr(Fe,lt.type==="Feature"?lt:{geometry:lt},Rt);return Fe}(we,_e);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_e.indexMaxZoom,_e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ot=function(lt,Rt){var Fe=Rt.buffer/Rt.extent,Ht=lt,Nt=Yr(lt,1,-1-Fe,Fe,0,-1,2,Rt),ir=Yr(lt,1,1-Fe,2+Fe,0,-1,2,Rt);return(Nt||ir)&&(Ht=Yr(lt,1,-Fe,1+Fe,0,-1,2,Rt)||[],Nt&&(Ht=co(Nt,1).concat(Ht)),ir&&(Ht=Ht.concat(co(ir,-1)))),Ht}(ot,_e),ot.length&&this.splitTile(ot,0,0,0),De&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ze(we,_e,De){return 32*((1<<we)*De+_e)+we}function Ea(we,_e){const De=we.tileID.canonical;if(!this._geoJSONIndex)return _e(null,null);const ot=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!ot)return _e(null,null);const lt=new ce(ot.features);let Rt=ve.exports(lt);Rt.byteOffset===0&&Rt.byteLength===Rt.buffer.byteLength||(Rt=new Uint8Array(Rt)),_e(null,{vectorTile:lt,rawData:Rt.buffer})}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(we,_e,De,ot,lt,Rt,Fe){for(var Ht=[we,_e,De,ot],Nt=this.options,ir=Nt.debug;Ht.length;){ot=Ht.pop(),De=Ht.pop(),_e=Ht.pop(),we=Ht.pop();var Br=1<<_e,nn=ze(_e,De,ot),Fr=this.tiles[nn];if(!Fr&&(ir>1&&console.time("creation"),Fr=this.tiles[nn]=pi(we,_e,De,ot,Nt),this.tileCoords.push({z:_e,x:De,y:ot}),ir)){ir>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_e,De,ot,Fr.numFeatures,Fr.numPoints,Fr.numSimplified),console.timeEnd("creation"));var Hn="z"+_e;this.stats[Hn]=(this.stats[Hn]||0)+1,this.total++}if(Fr.source=we,lt){if(_e===Nt.maxZoom||_e===lt)continue;var Yn=1<<lt-_e;if(De!==Math.floor(Rt/Yn)||ot!==Math.floor(Fe/Yn))continue}else if(_e===Nt.indexMaxZoom||Fr.numPoints<=Nt.indexMaxPoints)continue;if(Fr.source=null,we.length!==0){ir>1&&console.time("clipping");var sn,yi,Ai,Yi,Ii,Vi,io=.5*Nt.buffer/Nt.extent,ko=.5-io,Jo=.5+io,So=1+io;sn=yi=Ai=Yi=null,Ii=Yr(we,Br,De-io,De+Jo,0,Fr.minX,Fr.maxX,Nt),Vi=Yr(we,Br,De+ko,De+So,0,Fr.minX,Fr.maxX,Nt),we=null,Ii&&(sn=Yr(Ii,Br,ot-io,ot+Jo,1,Fr.minY,Fr.maxY,Nt),yi=Yr(Ii,Br,ot+ko,ot+So,1,Fr.minY,Fr.maxY,Nt),Ii=null),Vi&&(Ai=Yr(Vi,Br,ot-io,ot+Jo,1,Fr.minY,Fr.maxY,Nt),Yi=Yr(Vi,Br,ot+ko,ot+So,1,Fr.minY,Fr.maxY,Nt),Vi=null),ir>1&&console.timeEnd("clipping"),Ht.push(sn||[],_e+1,2*De,2*ot),Ht.push(yi||[],_e+1,2*De,2*ot+1),Ht.push(Ai||[],_e+1,2*De+1,2*ot),Ht.push(Yi||[],_e+1,2*De+1,2*ot+1)}}},vn.prototype.getTile=function(we,_e,De){var ot=this.options,lt=ot.extent,Rt=ot.debug;if(we<0||we>24)return null;var Fe=1<<we,Ht=ze(we,_e=(_e%Fe+Fe)%Fe,De);if(this.tiles[Ht])return no(this.tiles[Ht],lt);Rt>1&&console.log("drilling down to z%d-%d-%d",we,_e,De);for(var Nt,ir=we,Br=_e,nn=De;!Nt&&ir>0;)ir--,Br=Math.floor(Br/2),nn=Math.floor(nn/2),Nt=this.tiles[ze(ir,Br,nn)];return Nt&&Nt.source?(Rt>1&&console.log("found parent tile z%d-%d-%d",ir,Br,nn),Rt>1&&console.time("drilling down"),this.splitTile(Nt.source,ir,Br,nn,we,_e,De),Rt>1&&console.timeEnd("drilling down"),this.tiles[Ht]?no(this.tiles[Ht],lt):null):null};class ha extends B{constructor(_e,De,ot,lt){super(_e,De,ot,Ea),lt&&(this.loadGeoJSON=lt)}loadData(_e,De){var ot;(ot=this._pendingRequest)===null||ot===void 0||ot.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const lt=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new s.RequestPerformance(_e.request);this._pendingCallback=De,this._pendingRequest=this.loadGeoJSON(_e,(Rt,Fe)=>{if(delete this._pendingCallback,delete this._pendingRequest,Rt||!Fe)return De(Rt);if(typeof Fe!="object")return De(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));{H(Fe,!0);try{if(_e.filter){const Nt=s.createExpression(_e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Nt.result==="error")throw new Error(Nt.value.map(Br=>`${Br.key}: ${Br.message}`).join(", "));Fe={type:"FeatureCollection",features:Fe.features.filter(Br=>Nt.value.evaluate({zoom:0},Br))}}this._geoJSONIndex=_e.cluster?new Kr(function({superclusterOptions:Nt,clusterProperties:ir}){if(!ir||!Nt)return Nt;const Br={},nn={},Fr={accumulated:null,zoom:0},Hn={properties:null},Yn=Object.keys(ir);for(const sn of Yn){const[yi,Ai]=ir[sn],Yi=s.createExpression(Ai),Ii=s.createExpression(typeof yi=="string"?[yi,["accumulated"],["get",sn]]:yi);Br[sn]=Yi.value,nn[sn]=Ii.value}return Nt.map=sn=>{Hn.properties=sn;const yi={};for(const Ai of Yn)yi[Ai]=Br[Ai].evaluate(Fr,Hn);return yi},Nt.reduce=(sn,yi)=>{Hn.properties=yi;for(const Ai of Yn)Fr.accumulated=sn[Ai],sn[Ai]=nn[Ai].evaluate(Fr,Hn)},Nt}(_e)).load(Fe.features):function(Nt,ir){return new vn(Nt,ir)}(Fe,_e.geojsonVtOptions)}catch(Nt){return De(Nt)}this.loaded={};const Ht={};if(lt){const Nt=lt.finish();Nt&&(Ht.resourceTiming={},Ht.resourceTiming[_e.source]=JSON.parse(JSON.stringify(Nt)))}De(null,Ht)}})}reloadTile(_e,De){const ot=this.loaded;return ot&&ot[_e.uid]?super.reloadTile(_e,De):this.loadTile(_e,De)}loadGeoJSON(_e,De){if(_e.request)return s.getJSON(_e.request,De);if(typeof _e.data=="string")try{De(null,JSON.parse(_e.data))}catch{De(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`))}else De(new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(_e,De){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),De()}getClusterExpansionZoom(_e,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(_e.clusterId))}catch(ot){De(ot)}}getClusterChildren(_e,De){try{De(null,this._geoJSONIndex.getChildren(_e.clusterId))}catch(ot){De(ot)}}getClusterLeaves(_e,De){try{De(null,this._geoJSONIndex.getLeaves(_e.clusterId,_e.limit,_e.offset))}catch(ot){De(ot)}}}class ra{constructor(_e){this.self=_e,this.actor=new s.Actor(_e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:B,geojson:ha},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(De,ot)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=ot},this.self.registerRTLTextPlugin=De=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=De.applyArabicShaping,s.plugin.processBidirectionalText=De.processBidirectionalText,s.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}}setReferrer(_e,De){this.referrer=De}setImages(_e,De,ot){this.availableImages[_e]=De;for(const lt in this.workerSources[_e]){const Rt=this.workerSources[_e][lt];for(const Fe in Rt)Rt[Fe].availableImages=De}ot()}setLayers(_e,De,ot){this.getLayerIndex(_e).replace(De),ot()}updateLayers(_e,De,ot){this.getLayerIndex(_e).update(De.layers,De.removedIds),ot()}loadTile(_e,De,ot){this.getWorkerSource(_e,De.type,De.source).loadTile(De,ot)}loadDEMTile(_e,De,ot){this.getDEMWorkerSource(_e,De.source).loadTile(De,ot)}reloadTile(_e,De,ot){this.getWorkerSource(_e,De.type,De.source).reloadTile(De,ot)}abortTile(_e,De,ot){this.getWorkerSource(_e,De.type,De.source).abortTile(De,ot)}removeTile(_e,De,ot){this.getWorkerSource(_e,De.type,De.source).removeTile(De,ot)}removeDEMTile(_e,De){this.getDEMWorkerSource(_e,De.source).removeTile(De)}removeSource(_e,De,ot){if(!this.workerSources[_e]||!this.workerSources[_e][De.type]||!this.workerSources[_e][De.type][De.source])return;const lt=this.workerSources[_e][De.type][De.source];delete this.workerSources[_e][De.type][De.source],lt.removeSource!==void 0?lt.removeSource(De,ot):ot()}loadWorkerSource(_e,De,ot){try{this.self.importScripts(De.url),ot()}catch(lt){ot(lt.toString())}}syncRTLPluginState(_e,De,ot){try{s.plugin.setState(De);const lt=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&lt!=null){this.self.importScripts(lt);const Rt=s.plugin.isParsed();ot(Rt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${lt}`),Rt)}}catch(lt){ot(lt.toString())}}getAvailableImages(_e){let De=this.availableImages[_e];return De||(De=[]),De}getLayerIndex(_e){let De=this.layerIndexes[_e];return De||(De=this.layerIndexes[_e]=new w),De}getWorkerSource(_e,De,ot){if(this.workerSources[_e]||(this.workerSources[_e]={}),this.workerSources[_e][De]||(this.workerSources[_e][De]={}),!this.workerSources[_e][De][ot]){const lt={send:(Rt,Fe,Ht)=>{this.actor.send(Rt,Fe,Ht,_e)}};this.workerSources[_e][De][ot]=new this.workerSourceTypes[De](lt,this.getLayerIndex(_e),this.getAvailableImages(_e))}return this.workerSources[_e][De][ot]}getDEMWorkerSource(_e,De){return this.demWorkerSources[_e]||(this.demWorkerSources[_e]={}),this.demWorkerSources[_e][De]||(this.demWorkerSources[_e][De]=new G),this.demWorkerSources[_e][De]}enforceCacheSizeLimit(_e,De){s.enforceCacheSizeLimit(De)}}return s.isWorker()&&(self.worker=new ra(self)),ra}),u(["./shared"],function(s){var f=v;function v(M){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var I,D,q=new Blob([""],{type:"text/javascript"}),J=URL.createObjectURL(q);try{D=new Worker(J),I=!0}catch{I=!1}return D&&D.terminate(),URL.revokeObjectURL(J),I}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var I=document.createElement("canvas");I.width=I.height=1;var D=I.getContext("2d");if(!D)return!1;var q=D.getImageData(0,0,1,1);return q&&q.width===I.width}()?(w[k=d&&d.failIfMajorPerformanceCaveat]===void 0&&(w[k]=function(I){var D,q=function(J){var oe=document.createElement("canvas"),se=Object.create(v.webGLContextAttributes);return se.failIfMajorPerformanceCaveat=J,oe.getContext("webgl",se)||oe.getContext("experimental-webgl",se)}(I);if(!q)return!1;try{D=q.createShader(q.VERTEX_SHADER)}catch{return!1}return!(!D||q.isContextLost())&&(q.shaderSource(D,"void main() {}"),q.compileShader(D),q.getShaderParameter(D,q.COMPILE_STATUS)===!0)}(k)),w[k]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var k}(M)}var w={};function E(M,d){if(Array.isArray(M)){if(!Array.isArray(d)||M.length!==d.length)return!1;for(let k=0;k<M.length;k++)if(!E(M[k],d[k]))return!1;return!0}if(typeof M=="object"&&M!==null&&d!==null){if(typeof d!="object"||Object.keys(M).length!==Object.keys(d).length)return!1;for(const k in M)if(!E(M[k],d[k]))return!1;return!0}return M===d}v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class L{static testProp(d){if(!L.docStyle)return d[0];for(let k=0;k<d.length;k++)if(d[k]in L.docStyle)return d[k];return d[0]}static create(d,k,I){const D=window.document.createElement(d);return k!==void 0&&(D.className=k),I&&I.appendChild(D),D}static createNS(d,k){return window.document.createElementNS(d,k)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(d,k){d.style[L.transformProp]=k}static addEventListener(d,k,I,D={}){d.addEventListener(k,I,"passive"in D?D:D.capture)}static removeEventListener(d,k,I,D={}){d.removeEventListener(k,I,"passive"in D?D:D.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",L.suppressClickInternal,!0)},0)}static mousePos(d,k){const I=d.getBoundingClientRect();return new s.pointGeometry(k.clientX-I.left-d.clientLeft,k.clientY-I.top-d.clientTop)}static touchPos(d,k){const I=d.getBoundingClientRect(),D=[];for(let q=0;q<k.length;q++)D.push(new s.pointGeometry(k[q].clientX-I.left-d.clientLeft,k[q].clientY-I.top-d.clientTop));return D}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}L.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);class C{constructor(d){this._transformRequestFn=d}transformRequest(d,k){return this._transformRequestFn&&this._transformRequestFn(d,k)||{url:d}}normalizeSpriteURL(d,k,I){const D=function(q){const J=q.match(F);if(!J)throw new Error(`Unable to parse URL "${q}"`);return{protocol:J[1],authority:J[2],path:J[3]||"/",params:J[4]?J[4].split("&"):[]}}(d);return D.path+=`${k}${I}`,function(q){const J=q.params.length?`?${q.params.join("&")}`:"";return`${q.protocol}://${q.authority}${q.path}${J}`}(D)}setTransformRequest(d){this._transformRequestFn=d}}const F=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class B{constructor(d,k,I,D){this.context=d,this.format=I,this.texture=d.gl.createTexture(),this.update(k,D)}update(d,k,I){const{width:D,height:q}=d,J=!(this.size&&this.size[0]===D&&this.size[1]===q||I),{context:oe}=this,{gl:se}=oe;if(this.useMipmap=!!(k&&k.useMipmap),se.bindTexture(se.TEXTURE_2D,this.texture),oe.pixelStoreUnpackFlipY.set(!1),oe.pixelStoreUnpack.set(1),oe.pixelStoreUnpackPremultiplyAlpha.set(this.format===se.RGBA&&(!k||k.premultiply!==!1)),J)this.size=[D,q],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||s.isImageBitmap(d)?se.texImage2D(se.TEXTURE_2D,0,this.format,this.format,se.UNSIGNED_BYTE,d):se.texImage2D(se.TEXTURE_2D,0,this.format,D,q,0,this.format,se.UNSIGNED_BYTE,d.data);else{const{x:ge,y:Se}=I||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||s.isImageBitmap(d)?se.texSubImage2D(se.TEXTURE_2D,0,ge,Se,se.RGBA,se.UNSIGNED_BYTE,d):se.texSubImage2D(se.TEXTURE_2D,0,ge,Se,D,q,se.RGBA,se.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&se.generateMipmap(se.TEXTURE_2D)}bind(d,k,I){const{context:D}=this,{gl:q}=D;q.bindTexture(q.TEXTURE_2D,this.texture),I!==q.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(I=q.LINEAR),d!==this.filter&&(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,d),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,I||d),this.filter=d),k!==this.wrap&&(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,k),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,k),this.wrap=k)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function G(M){const{userImage:d}=M;return!!(d&&d.render&&d.render())&&(M.data.replace(new Uint8Array(d.data.buffer)),!0)}class H extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:k,callback:I}of this.requestors)this._notify(k,I);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,k){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,k)&&(this.images[d]=k)}_validate(d,k){let I=!0;return this._validateStretch(k.stretchX,k.data&&k.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),I=!1),this._validateStretch(k.stretchY,k.data&&k.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),I=!1),this._validateContent(k.content,k)||(this.fire(new s.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),I=!1),I}_validateStretch(d,k){if(!d)return!0;let I=0;for(const D of d){if(D[0]<I||D[1]<D[0]||k<D[1])return!1;I=D[1]}return!0}_validateContent(d,k){return!(d&&(d.length!==4||d[0]<0||k.data.width<d[0]||d[1]<0||k.data.height<d[1]||d[2]<0||k.data.width<d[2]||d[3]<0||k.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,k){const I=this.images[d];if(I.data.width!==k.data.width||I.data.height!==k.data.height)throw new Error(`size mismatch between old image (${I.data.width}x${I.data.height}) and new image (${k.data.width}x${k.data.height}).`);k.version=I.version+1,this.images[d]=k,this.updatedImages[d]=!0}removeImage(d){const k=this.images[d];delete this.images[d],delete this.patterns[d],k.userImage&&k.userImage.onRemove&&k.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,k){let I=!0;if(!this.isLoaded())for(const D of d)this.images[D]||(I=!1);this.isLoaded()||I?this._notify(d,k):this.requestors.push({ids:d,callback:k})}_notify(d,k){const I={};for(const D of d){this.images[D]||this.fire(new s.Event("styleimagemissing",{id:D}));const q=this.images[D];q?I[D]={data:q.data.clone(),pixelRatio:q.pixelRatio,sdf:q.sdf,version:q.version,stretchX:q.stretchX,stretchY:q.stretchY,content:q.content,hasRenderCallback:!!(q.userImage&&q.userImage.render)}:s.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}k(null,I)}getPixelSize(){const{width:d,height:k}=this.atlasImage;return{width:d,height:k}}getPattern(d){const k=this.patterns[d],I=this.getImage(d);if(!I)return null;if(k&&k.position.version===I.version)return k.position;if(k)k.position.version=I.version;else{const D={w:I.data.width+2,h:I.data.height+2,x:0,y:0},q=new s.ImagePosition(D,I);this.patterns[d]={bin:D,position:q}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const k=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new B(d,this.atlasImage,k.RGBA),this.atlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const q in this.patterns)d.push(this.patterns[q].bin);const{w:k,h:I}=s.potpack(d),D=this.atlasImage;D.resize({width:k||1,height:I||1});for(const q in this.patterns){const{bin:J}=this.patterns[q],oe=J.x+1,se=J.y+1,ge=this.images[q].data,Se=ge.width,Ue=ge.height;s.RGBAImage.copy(ge,D,{x:0,y:0},{x:oe,y:se},{width:Se,height:Ue}),s.RGBAImage.copy(ge,D,{x:0,y:Ue-1},{x:oe,y:se-1},{width:Se,height:1}),s.RGBAImage.copy(ge,D,{x:0,y:0},{x:oe,y:se+Ue},{width:Se,height:1}),s.RGBAImage.copy(ge,D,{x:Se-1,y:0},{x:oe-1,y:se},{width:1,height:Ue}),s.RGBAImage.copy(ge,D,{x:0,y:0},{x:oe+Se,y:se},{width:1,height:Ue})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const k of d){if(this.callbackDispatchedThisFrame[k])continue;this.callbackDispatchedThisFrame[k]=!0;const I=this.images[k];I||s.warnOnce(`Image with ID: "${k}" was not found`),G(I)&&this.updateImage(k,I)}}}const Z=1e20;function ee(M,d,k,I,D,q,J,oe,se){for(let ge=d;ge<d+I;ge++)Y(M,k*q+ge,q,D,J,oe,se);for(let ge=k;ge<k+D;ge++)Y(M,ge*q+d,1,I,J,oe,se)}function Y(M,d,k,I,D,q,J){q[0]=0,J[0]=-Z,J[1]=Z,D[0]=M[d];for(let oe=1,se=0,ge=0;oe<I;oe++){D[oe]=M[d+oe*k];const Se=oe*oe;do{const Ue=q[se];ge=(D[oe]-D[Ue]+Se-Ue*Ue)/(oe-Ue)/2}while(ge<=J[se]&&--se>-1);se++,q[se]=oe,J[se]=ge,J[se+1]=Z}for(let oe=0,se=0;oe<I;oe++){for(;J[se+1]<oe;)se++;const ge=q[se],Se=oe-ge;M[d+oe*k]=D[ge]+Se*Se}}class le{constructor(d,k){this.requestManager=d,this.localIdeographFontFamily=k,this.entries={}}setURL(d){this.url=d}getGlyphs(d,k){const I=[];for(const D in d)for(const q of d[D])I.push({stack:D,id:q});s.asyncAll(I,({stack:D,id:q},J)=>{let oe=this.entries[D];oe||(oe=this.entries[D]={glyphs:{},requests:{},ranges:{}});let se=oe.glyphs[q];if(se!==void 0)return void J(null,{stack:D,id:q,glyph:se});if(se=this._tinySDF(oe,D,q),se)return oe.glyphs[q]=se,void J(null,{stack:D,id:q,glyph:se});const ge=Math.floor(q/256);if(256*ge>65535)return void J(new Error("glyphs > 65535 not supported"));if(oe.ranges[ge])return void J(null,{stack:D,id:q,glyph:se});let Se=oe.requests[ge];Se||(Se=oe.requests[ge]=[],le.loadGlyphRange(D,ge,this.url,this.requestManager,(Ue,Je)=>{if(Je){for(const St in Je)this._doesCharSupportLocalGlyph(+St)||(oe.glyphs[+St]=Je[+St]);oe.ranges[ge]=!0}for(const St of Se)St(Ue,Je);delete oe.requests[ge]})),Se.push((Ue,Je)=>{Ue?J(Ue):Je&&J(null,{stack:D,id:q,glyph:Je[q]||null})})},(D,q)=>{if(D)k(D);else if(q){const J={};for(const{stack:oe,id:se,glyph:ge}of q)(J[oe]||(J[oe]={}))[se]=ge&&{id:ge.id,bitmap:ge.bitmap.clone(),metrics:ge.metrics};k(null,J)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](d)||s.unicodeBlockLookup["Hangul Syllables"](d)||s.unicodeBlockLookup.Hiragana(d)||s.unicodeBlockLookup.Katakana(d))}_tinySDF(d,k,I){const D=this.localIdeographFontFamily;if(!D||!this._doesCharSupportLocalGlyph(I))return;let q=d.tinySDF;if(!q){let oe="400";/bold/i.test(k)?oe="900":/medium/i.test(k)?oe="500":/light/i.test(k)&&(oe="200"),q=d.tinySDF=new le.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:D,fontWeight:oe})}const J=q.draw(String.fromCharCode(I));return{id:I,bitmap:new s.AlphaImage({width:J.width||30,height:J.height||30},J.data),metrics:{width:J.glyphWidth||24,height:J.glyphHeight||24,left:J.glyphLeft||0,top:J.glyphTop-27||-8,advance:J.glyphAdvance||24}}}}le.loadGlyphRange=function(M,d,k,I,D){const q=256*d,J=q+255,oe=I.transformRequest(k.replace("{fontstack}",M).replace("{range}",`${q}-${J}`),s.ResourceType.Glyphs);s.getArrayBuffer(oe,(se,ge)=>{if(se)D(se);else if(ge){const Se={};for(const Ue of s.parseGlyphPbf(ge))Se[Ue.id]=Ue;D(null,Se)}})},le.TinySDF=class{constructor({fontSize:M=24,buffer:d=3,radius:k=8,cutoff:I=.25,fontFamily:D="sans-serif",fontWeight:q="normal",fontStyle:J="normal"}={}){this.buffer=d,this.cutoff=I,this.radius=k;const oe=this.size=M+4*d,se=this._createCanvas(oe),ge=this.ctx=se.getContext("2d",{willReadFrequently:!0});ge.font=`${J} ${q} ${M}px ${D}`,ge.textBaseline="alphabetic",ge.textAlign="left",ge.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe)}_createCanvas(M){const d=document.createElement("canvas");return d.width=d.height=M,d}draw(M){const{width:d,actualBoundingBoxAscent:k,actualBoundingBoxDescent:I,actualBoundingBoxLeft:D,actualBoundingBoxRight:q}=this.ctx.measureText(M),J=Math.ceil(k),oe=Math.min(this.size-this.buffer,Math.ceil(q-D)),se=Math.min(this.size-this.buffer,J+Math.ceil(I)),ge=oe+2*this.buffer,Se=se+2*this.buffer,Ue=Math.max(ge*Se,0),Je=new Uint8ClampedArray(Ue),St={data:Je,width:ge,height:Se,glyphWidth:oe,glyphHeight:se,glyphTop:J,glyphLeft:0,glyphAdvance:d};if(oe===0||se===0)return St;const{ctx:vt,buffer:xt,gridInner:tr,gridOuter:cr}=this;vt.clearRect(xt,xt,oe,se),vt.fillText(M,xt,xt+J);const Ar=vt.getImageData(xt,xt,oe,se);cr.fill(Z,0,Ue),tr.fill(0,0,Ue);for(let Dt=0;Dt<se;Dt++)for(let Lr=0;Lr<oe;Lr++){const Ir=Ar.data[4*(Dt*oe+Lr)+3]/255;if(Ir===0)continue;const Zr=(Dt+xt)*ge+Lr+xt;if(Ir===1)cr[Zr]=0,tr[Zr]=Z;else{const Gr=.5-Ir;cr[Zr]=Gr>0?Gr*Gr:0,tr[Zr]=Gr<0?Gr*Gr:0}}ee(cr,0,0,ge,Se,ge,this.f,this.v,this.z),ee(tr,xt,xt,oe,se,ge,this.f,this.v,this.z);for(let Dt=0;Dt<Ue;Dt++){const Lr=Math.sqrt(cr[Dt])-Math.sqrt(tr[Dt]);Je[Dt]=Math.round(255-255*(Lr/this.radius+this.cutoff))}return St}};const ce=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(M,d){return s.sphericalToCartesian(M.expression.evaluate(d))}interpolate(M,d,k){return{x:s.number(M.x,d.x,k),y:s.number(M.y,d.y,k),z:s.number(M.z,d.z,k)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),ve="-transition";class pe extends s.Evented{constructor(d){super(),this._transitionable=new s.Transitionable(ce),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,k={}){if(!this._validate(s.validateLight,d,k))for(const I in d){const D=d[I];I.endsWith(ve)?this._transitionable.setTransition(I.slice(0,-ve.length),D):this._transitionable.setValue(I,D)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,k,I){return(!I||I.validate!==!1)&&s.emitValidationErrors(this,d.call(s.validateStyle,s.extend({value:k,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ne{constructor(d,k){this.width=d,this.height=k,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,k){const I=d.join(",")+String(k);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(d,k)),this.dashEntry[I]}getDashRanges(d,k,I){const D=[];let q=d.length%2==1?-d[d.length-1]*I:0,J=d[0]*I,oe=!0;D.push({left:q,right:J,isDash:oe,zeroLength:d[0]===0});let se=d[0];for(let ge=1;ge<d.length;ge++){oe=!oe;const Se=d[ge];q=se*I,se+=Se,J=se*I,D.push({left:q,right:J,isDash:oe,zeroLength:Se===0})}return D}addRoundDash(d,k,I){const D=k/2;for(let q=-I;q<=I;q++){const J=this.width*(this.nextRow+I+q);let oe=0,se=d[oe];for(let ge=0;ge<this.width;ge++){ge/se.right>1&&(se=d[++oe]);const Se=Math.abs(ge-se.left),Ue=Math.abs(ge-se.right),Je=Math.min(Se,Ue);let St;const vt=q/I*(D+1);if(se.isDash){const xt=D-Math.abs(vt);St=Math.sqrt(Je*Je+xt*xt)}else St=D-Math.sqrt(Je*Je+vt*vt);this.data[J+ge]=Math.max(0,Math.min(255,St+128))}}}addRegularDash(d){for(let oe=d.length-1;oe>=0;--oe){const se=d[oe],ge=d[oe+1];se.zeroLength?d.splice(oe,1):ge&&ge.isDash===se.isDash&&(ge.left=se.left,d.splice(oe,1))}const k=d[0],I=d[d.length-1];k.isDash===I.isDash&&(k.left=I.left-this.width,I.right=k.right+this.width);const D=this.width*this.nextRow;let q=0,J=d[q];for(let oe=0;oe<this.width;oe++){oe/J.right>1&&(J=d[++q]);const se=Math.abs(oe-J.left),ge=Math.abs(oe-J.right),Se=Math.min(se,ge);this.data[D+oe]=Math.max(0,Math.min(255,(J.isDash?Se:-Se)+128))}}addDash(d,k){const I=k?7:0,D=2*I+1;if(this.nextRow+D>this.height)return s.warnOnce("LineAtlas out of space"),null;let q=0;for(let oe=0;oe<d.length;oe++)q+=d[oe];if(q!==0){const oe=this.width/q,se=this.getDashRanges(d,this.width,oe);k?this.addRoundDash(se,oe,I):this.addRegularDash(se)}const J={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:q};return this.nextRow+=D,this.dirty=!0,J}bind(d){const k=d.gl;this.texture?(k.bindTexture(k.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,k.texSubImage2D(k.TEXTURE_2D,0,0,0,this.width,this.height,k.ALPHA,k.UNSIGNED_BYTE,this.data))):(this.texture=k.createTexture(),k.bindTexture(k.TEXTURE_2D,this.texture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR),k.texImage2D(k.TEXTURE_2D,0,k.ALPHA,this.width,this.height,0,k.ALPHA,k.UNSIGNED_BYTE,this.data))}}class Ve{constructor(d,k){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const I=this.workerPool.acquire(this.id);for(let D=0;D<I.length;D++){const q=new Ve.Actor(I[D],k,this.id);q.name=`Worker ${D}`,this.actors.push(q)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,k,I){s.asyncAll(this.actors,(D,q)=>{D.send(d,k,q)},I=I||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function be(M,d,k){const I=function(D,q){if(D)return k(D);if(q){const J=s.pick(s.extend(q,M),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(J.vectorLayers=q.vector_layers,J.vectorLayerIds=J.vectorLayers.map(oe=>oe.id)),k(null,J)}};return M.url?s.getJSON(d.transformRequest(M.url,s.ResourceType.Source),I):s.exported.frame(()=>I(null,M))}Ve.Actor=s.Actor;class Ce{constructor(d,k,I){this.bounds=s.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=k||0,this.maxzoom=I||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const k=Math.pow(2,d.z),I=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*k),D=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*k),q=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*k),J=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*k);return d.x>=I&&d.x<q&&d.y>=D&&d.y<J}}class Oe extends s.Evented{constructor(d,k,I,D){if(super(),this.id=d,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(k,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},k),this._collectResourceTiming=k.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=be(this._options,this.map._requestManager,(d,k)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new s.ErrorEvent(d)):k&&(s.extend(this,k),k.bounds&&(this.tileBounds=new Ce(k.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(d,k){const I=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),D={request:this.map._requestManager.transformRequest(I,s.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function q(J,oe){return delete d.request,d.aborted?k(null):J&&J.status!==404?k(J):(oe&&oe.resourceTiming&&(d.resourceTiming=oe.resourceTiming),this.map._refreshExpiredTiles&&oe&&d.setExpiryData(oe),d.loadVectorData(oe,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),k(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}D.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=k:d.request=d.actor.send("reloadTile",D,q.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",D,q.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class nt extends s.Evented{constructor(d,k,I,D){super(),this.id=d,this.dispatcher=I,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},k),s.extend(this,s.pick(k,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=be(this._options,this.map._requestManager,(d,k)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new s.ErrorEvent(d)):k&&(s.extend(this,k),k.bounds&&(this.tileBounds=new Ce(k.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,k){const I=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=s.getImage(this.map._requestManager.transformRequest(I,s.ResourceType.Tile),(D,q,J)=>{if(delete d.request,d.aborted)d.state="unloaded",k(null);else if(D)d.state="errored",k(D);else if(q){this.map._refreshExpiredTiles&&d.setExpiryData(J);const oe=this.map.painter.context,se=oe.gl;d.texture=this.map.painter.getTileTexture(q.width),d.texture?d.texture.update(q,{useMipmap:!0}):(d.texture=new B(oe,q,se.RGBA,{useMipmap:!0}),d.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),oe.extTextureFilterAnisotropic&&se.texParameterf(se.TEXTURE_2D,oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,oe.extTextureFilterAnisotropicMax)),d.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),k(null)}})}abortTile(d,k){d.request&&(d.request.cancel(),delete d.request),k()}unloadTile(d,k){d.texture&&this.map.painter.saveTileTexture(d.texture),k()}hasTransition(){return!1}}let mt;class ht extends nt{constructor(d,k,I,D){super(d,k,I,D),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},k),this.encoding=k.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,k){const I=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function D(q,J){q&&(d.state="errored",k(q)),J&&(d.dem=J,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",k(null))}d.request=s.getImage(this.map._requestManager.transformRequest(I,s.ResourceType.Tile),function(q,J){if(delete d.request,d.aborted)d.state="unloaded",k(null);else if(q)d.state="errored",k(q);else if(J){this.map._refreshExpiredTiles&&d.setExpiryData(J),delete J.cacheControl,delete J.expires;const oe=s.isImageBitmap(J)&&(mt==null&&(mt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),mt)?J:s.exported.getImageData(J,1),se={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:oe,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",se,D.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const k=d.canonical,I=Math.pow(2,k.z),D=(k.x-1+I)%I,q=k.x===0?d.wrap-1:d.wrap,J=(k.x+1+I)%I,oe=k.x+1===I?d.wrap+1:d.wrap,se={};return se[new s.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y).key]={backfilled:!1},se[new s.OverscaledTileID(d.overscaledZ,oe,k.z,J,k.y).key]={backfilled:!1},k.y>0&&(se[new s.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y-1).key]={backfilled:!1},se[new s.OverscaledTileID(d.overscaledZ,d.wrap,k.z,k.x,k.y-1).key]={backfilled:!1},se[new s.OverscaledTileID(d.overscaledZ,oe,k.z,J,k.y-1).key]={backfilled:!1}),k.y+1<I&&(se[new s.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y+1).key]={backfilled:!1},se[new s.OverscaledTileID(d.overscaledZ,d.wrap,k.z,k.x,k.y+1).key]={backfilled:!1},se[new s.OverscaledTileID(d.overscaledZ,oe,k.z,J,k.y+1).key]={backfilled:!1}),se}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class He extends s.Evented{constructor(d,k,I,D){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=I.getActor(),this.setEventedParent(D),this._data=k.data,this._options=s.extend({},k),this._collectResourceTiming=k.collectResourceTiming,k.maxzoom!==void 0&&(this.maxzoom=k.maxzoom),k.type&&(this.type=k.type),k.attribution&&(this.attribution=k.attribution),this.promoteId=k.promoteId;const q=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:k.cluster||!1,geojsonVtOptions:{buffer:(k.buffer!==void 0?k.buffer:128)*q,tolerance:(k.tolerance!==void 0?k.tolerance:.375)*q,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:k.lineMetrics||!1,generateId:k.generateId||!1},superclusterOptions:{maxZoom:k.clusterMaxZoom!==void 0?k.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,k.clusterMinPoints||2),extent:s.EXTENT,radius:(k.clusterRadius||50)*q,log:!1,generateId:k.generateId||!1},clusterProperties:k.clusterProperties,filter:k.filter},k.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,k){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},k),this}getClusterChildren(d,k){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},k),this}getClusterLeaves(d,k,I,D){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:k,offset:I},D),this}_updateWorkerData(d){const k=s.extend({},this.workerOptions),I=this._data;typeof I=="string"?(k.request=this.map._requestManager.transformRequest(s.exported.resolveURL(I),s.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(I),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,k,(D,q)=>{if(this._pendingLoads--,this._removed||q&&q.abandoned)return void this.fire(new s.Event("dataabort",{dataType:"source",sourceDataType:d}));let J=null;if(q&&q.resourceTiming&&q.resourceTiming[this.id]&&(J=q.resourceTiming[this.id].slice(0)),D)return void this.fire(new s.ErrorEvent(D));const oe={dataType:"source",sourceDataType:d};this._collectResourceTiming&&J&&J.length>0&&s.extend(oe,{resourceTiming:J}),this.fire(new s.Event("data",oe))})}loaded(){return this._pendingLoads===0}loadTile(d,k){const I=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const D={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(I,D,(q,J)=>(delete d.request,d.unloadVectorData(),d.aborted?k(null):q?k(q):(d.loadVectorData(J,this.map.painter,I==="reloadTile"),k(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ut=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bt extends s.Evented{constructor(d,k,I,D){super(),this.id=d,this.dispatcher=I,this.coordinates=k.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=k}load(d,k){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(I,D)=>{this._loaded=!0,I?this.fire(new s.ErrorEvent(I)):D&&(this.image=D,d&&(this.coordinates=d),k&&k(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const k=d.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(D){let q=1/0,J=1/0,oe=-1/0,se=-1/0;for(const Je of D)q=Math.min(q,Je.x),J=Math.min(J,Je.y),oe=Math.max(oe,Je.x),se=Math.max(se,Je.y);const ge=Math.max(oe-q,se-J),Se=Math.max(0,Math.floor(-Math.log(ge)/Math.LN2)),Ue=Math.pow(2,Se);return new s.CanonicalTileID(Se,Math.floor((q+oe)/2*Ue),Math.floor((J+se)/2*Ue))}(k),this.minzoom=this.maxzoom=this.tileID.z;const I=k.map(D=>this.tileID.getTilePoint(D)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(I[0].x,I[0].y,0,0),this._boundsArray.emplaceBack(I[1].x,I[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(I[3].x,I[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(I[2].x,I[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,k=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new B(d,this.image,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));for(const I in this.tiles){const D=this.tiles[I];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}loadTile(d,k){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},k(null)):(d.state="errored",k(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends bt{constructor(d,k,I,D){super(d,k,I,D),this.roundZoom=!0,this.type="video",this.options=k}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const k of d.urls)this.urls.push(this.map._requestManager.transformRequest(k,s.ResourceType.Source).url);s.getVideo(this.urls,(k,I)=>{this._loaded=!0,k?this.fire(new s.ErrorEvent(k)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const k=this.video.seekable;d<k.start(0)||d>k.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${k.start(0)} and ${k.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,k=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE),k.texSubImage2D(k.TEXTURE_2D,0,0,0,k.RGBA,k.UNSIGNED_BYTE,this.video)):(this.texture=new B(d,this.video,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));for(const I in this.tiles){const D=this.tiles[I];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class We extends bt{constructor(d,k,I,D){super(d,k,I,D),k.coordinates?Array.isArray(k.coordinates)&&k.coordinates.length===4&&!k.coordinates.some(q=>!Array.isArray(q)||q.length!==2||q.some(J=>typeof J!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),k.animate&&typeof k.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),k.canvas?typeof k.canvas=="string"||k.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=k,this.animate=k.animate===void 0||k.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const k=this.map.painter.context,I=k.gl;this.boundsBuffer||(this.boundsBuffer=k.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new B(k,this.canvas,I.RGBA,{premultiply:!0});for(const D in this.tiles){const q=this.tiles[D];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const ke={vector:Oe,raster:nt,"raster-dem":ht,geojson:He,video:Xe,image:bt,canvas:We};function Re(M,d){const k=s.create();return s.translate(k,k,[1,1,0]),s.scale(k,k,[.5*M.width,.5*M.height,1]),s.multiply(k,k,M.calculatePosMatrix(d.toUnwrapped()))}function Pe(M,d,k,I,D,q){const J=function(Ue,Je,St){if(Ue)for(const vt of Ue){const xt=Je[vt];if(xt&&xt.source===St&&xt.type==="fill-extrusion")return!0}else for(const vt in Je){const xt=Je[vt];if(xt.source===St&&xt.type==="fill-extrusion")return!0}return!1}(D&&D.layers,d,M.id),oe=q.maxPitchScaleFactor(),se=M.tilesIn(I,oe,J);se.sort(dt);const ge=[];for(const Ue of se)ge.push({wrappedTileID:Ue.tileID.wrapped().key,queryResults:Ue.tile.queryRenderedFeatures(d,k,M._state,Ue.queryGeometry,Ue.cameraQueryGeometry,Ue.scale,D,q,oe,Re(M.transform,Ue.tileID))});const Se=function(Ue){const Je={},St={};for(const vt of Ue){const xt=vt.queryResults,tr=vt.wrappedTileID,cr=St[tr]=St[tr]||{};for(const Ar in xt){const Dt=xt[Ar],Lr=cr[Ar]=cr[Ar]||{},Ir=Je[Ar]=Je[Ar]||[];for(const Zr of Dt)Lr[Zr.featureIndex]||(Lr[Zr.featureIndex]=!0,Ir.push(Zr))}}return Je}(ge);for(const Ue in Se)Se[Ue].forEach(Je=>{const St=Je.feature,vt=M.getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=vt});return Se}function dt(M,d){const k=M.tileID,I=d.tileID;return k.overscaledZ-I.overscaledZ||k.canonical.y-I.canonical.y||k.wrap-I.wrap||k.canonical.x-I.canonical.x}class Et{constructor(d,k){this.tileID=d,this.uid=s.uniqueId(),this.uses=0,this.tileSize=k,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const k=d+this.timeAdded;k<s.exported.now()||this.fadeEndTime&&k<this.fadeEndTime||(this.fadeEndTime=k)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(k=>d.saveTileTexture(k)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,k,I){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(D,q){const J={};if(!q)return J;for(const oe of D){const se=oe.layerIds.map(ge=>q.getLayer(ge)).filter(Boolean);if(se.length!==0){oe.layers=se,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(ge=>se.filter(Se=>Se.id===ge)[0]));for(const ge of se)J[ge.id]=oe}}return J}(d.buckets,k.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const q=this.buckets[D];if(q instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!I)break;q.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const q=this.buckets[D];if(q instanceof s.SymbolBucket&&q.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const D in this.buckets){const q=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,k.style.getLayer(D).queryRadius(q))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const I in this.buckets){const D=this.buckets[I];D.uploadPending()&&D.upload(d)}const k=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new B(d,this.imageAtlas.image,k.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new B(d,this.glyphAtlasImage,k.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,k,I,D,q,J,oe,se,ge,Se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:D,cameraQueryGeometry:q,scale:J,tileSize:this.tileSize,pixelPosMatrix:Se,transform:se,params:oe,queryPadding:this.queryPadding*ge},d,k,I):{}}querySourceFeatures(d,k){const I=this.latestFeatureIndex;if(!I||!I.rawTileData)return;const D=I.loadVTLayers(),q=k?k.sourceLayer:"",J=D._geojsonTileLayer||D[q];if(!J)return;const oe=s.createFilter(k&&k.filter),{z:se,x:ge,y:Se}=this.tileID.canonical,Ue={z:se,x:ge,y:Se};for(let Je=0;Je<J.length;Je++){const St=J.feature(Je);if(oe.needGeometry){const tr=s.toEvaluationFeature(St,!0);if(!oe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),tr,this.tileID.canonical))continue}else if(!oe.filter(new s.EvaluationParameters(this.tileID.overscaledZ),St))continue;const vt=I.getId(St,q),xt=new s.GeoJSONFeature(St,se,ge,Se,vt);xt.tile=Ue,d.push(xt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const k=this.expirationTime;if(d.cacheControl){const I=s.parseCacheControl(d.cacheControl);I["max-age"]&&(this.expirationTime=Date.now()+1e3*I["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const I=Date.now();let D=!1;if(this.expirationTime>I)D=!1;else if(k)if(this.expirationTime<k)D=!0;else{const q=this.expirationTime-k;q?this.expirationTime=I+Math.max(q,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,k){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const I=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!k.style.hasLayer(D))continue;const q=this.buckets[D],J=q.layers[0].sourceLayer||"_geojsonTileLayer",oe=I[J],se=d[J];if(!oe||!se||Object.keys(se).length===0)continue;q.update(se,oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ge=k&&k.style&&k.style.getLayer(D);ge&&(this.queryPadding=Math.max(this.queryPadding,ge.queryRadius(q)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=s.exported.now()+d}setDependencies(d,k){const I={};for(const D of k)I[D]=!0;this.dependencies[d]=I}hasDependency(d,k){for(const I of d){const D=this.dependencies[I];if(D){for(const q of k)if(D[q])return!0}}return!1}}class Pt{constructor(d,k){this.max=d,this.onRemove=k,this.reset()}reset(){for(const d in this.data)for(const k of this.data[d])k.timeout&&clearTimeout(k.timeout),this.onRemove(k.value);return this.data={},this.order=[],this}add(d,k,I){const D=d.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);const q={value:k,timeout:void 0};if(I!==void 0&&(q.timeout=setTimeout(()=>{this.remove(d,q)},I)),this.data[D].push(q),this.order.push(D),this.order.length>this.max){const J=this._getAndRemoveByKey(this.order[0]);J&&this.onRemove(J)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const k=this.data[d].shift();return k.timeout&&clearTimeout(k.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),k.value}getByKey(d){const k=this.data[d];return k?k[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,k){if(!this.has(d))return this;const I=d.wrapped().key,D=k===void 0?0:this.data[I].indexOf(k),q=this.data[I][D];return this.data[I].splice(D,1),q.timeout&&clearTimeout(q.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(q.value),this.order.splice(this.order.indexOf(I),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}filter(d){const k=[];for(const I in this.data)for(const D of this.data[I])d(D.value)||k.push(D);for(const I of k)this.remove(I.value.tileID,I)}}class Kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,k,I){const D=String(k);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][D]=this.stateChanges[d][D]||{},s.extend(this.stateChanges[d][D],I),this.deletedStates[d]===null){this.deletedStates[d]={};for(const q in this.state[d])q!==D&&(this.deletedStates[d][q]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][D]===null){this.deletedStates[d][D]={};for(const q in this.state[d][D])I[q]||(this.deletedStates[d][D][q]=null)}else for(const q in I)this.deletedStates[d]&&this.deletedStates[d][D]&&this.deletedStates[d][D][q]===null&&delete this.deletedStates[d][D][q]}removeFeatureState(d,k,I){if(this.deletedStates[d]===null)return;const D=String(k);if(this.deletedStates[d]=this.deletedStates[d]||{},I&&k!==void 0)this.deletedStates[d][D]!==null&&(this.deletedStates[d][D]=this.deletedStates[d][D]||{},this.deletedStates[d][D][I]=null);else if(k!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][D])for(I in this.deletedStates[d][D]={},this.stateChanges[d][D])this.deletedStates[d][D][I]=null;else this.deletedStates[d][D]=null;else this.deletedStates[d]=null}getState(d,k){const I=String(k),D=s.extend({},(this.state[d]||{})[I],(this.stateChanges[d]||{})[I]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const q=this.deletedStates[d][k];if(q===null)return{};for(const J in q)delete D[J]}return D}initializeTileState(d,k){d.setFeatureState(this.state,k)}coalesceChanges(d,k){const I={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const q={};for(const J in this.stateChanges[D])this.state[D][J]||(this.state[D][J]={}),s.extend(this.state[D][J],this.stateChanges[D][J]),q[J]=this.state[D][J];I[D]=q}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const q={};if(this.deletedStates[D]===null)for(const J in this.state[D])q[J]={},this.state[D][J]={};else for(const J in this.deletedStates[D]){if(this.deletedStates[D][J]===null)this.state[D][J]={};else for(const oe of Object.keys(this.deletedStates[D][J]))delete this.state[D][J][oe];q[J]=this.state[D][J]}I[D]=I[D]||{},s.extend(I[D],q)}if(this.stateChanges={},this.deletedStates={},Object.keys(I).length!==0)for(const D in d)d[D].setFeatureState(I,k)}}class $t extends s.Evented{constructor(d,k,I){super(),this.id=d,this.dispatcher=I,this.on("data",D=>{D.dataType==="source"&&D.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&D.dataType==="source"&&D.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(D,q,J,oe){const se=new ke[q.type](D,q,J,oe);if(se.id!==D)throw new Error(`Expected Source id to be ${D} instead of ${se.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],se),se}(d,k,I,this),this._tiles={},this._cache=new Pt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Kt}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const k=this._tiles[d];if(k.state!=="loaded"&&k.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,k){return this._source.loadTile(d,k)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new s.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const k in this._tiles){const I=this._tiles[k];I.upload(d),I.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(br).map(d=>d.key)}getRenderableIds(d){const k=[];for(const I in this._tiles)this._isIdRenderable(I,d)&&k.push(this._tiles[I]);return d?k.sort((I,D)=>{const q=I.tileID,J=D.tileID,oe=new s.pointGeometry(q.canonical.x,q.canonical.y)._rotate(this.transform.angle),se=new s.pointGeometry(J.canonical.x,J.canonical.y)._rotate(this.transform.angle);return q.overscaledZ-J.overscaledZ||se.y-oe.y||se.x-oe.x}).map(I=>I.tileID.key):k.map(I=>I.tileID).sort(br).map(I=>I.key)}hasRenderableParent(d){const k=this.findLoadedParent(d,0);return!!k&&this._isIdRenderable(k.tileID.key)}_isIdRenderable(d,k){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(k||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,k){const I=this._tiles[d];I&&(I.state!=="loading"&&(I.state=k),this._loadTile(I,this._tileLoaded.bind(this,I,d,k)))}_tileLoaded(d,k,I,D){if(D)return d.state="errored",void(D.status!==404?this._source.fire(new s.ErrorEvent(D,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=s.exported.now(),I==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(k,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new s.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const k=this.getRenderableIds();for(let D=0;D<k.length;D++){const q=k[D];if(d.neighboringTiles&&d.neighboringTiles[q]){const J=this.getTileByID(q);I(d,J),I(J,d)}}function I(D,q){D.needsHillshadePrepare=!0,D.needsTerrainPrepare=!0;let J=q.tileID.canonical.x-D.tileID.canonical.x;const oe=q.tileID.canonical.y-D.tileID.canonical.y,se=Math.pow(2,D.tileID.canonical.z),ge=q.tileID.key;J===0&&oe===0||Math.abs(oe)>1||(Math.abs(J)>1&&(Math.abs(J+se)===1?J+=se:Math.abs(J-se)===1&&(J-=se)),q.dem&&D.dem&&(D.dem.backfillBorder(q.dem,J,oe),D.neighboringTiles&&D.neighboringTiles[ge]&&(D.neighboringTiles[ge].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,k,I,D){for(const q in this._tiles){let J=this._tiles[q];if(D[q]||!J.hasData()||J.tileID.overscaledZ<=k||J.tileID.overscaledZ>I)continue;let oe=J.tileID;for(;J&&J.tileID.overscaledZ>k+1;){const ge=J.tileID.scaledTo(J.tileID.overscaledZ-1);J=this._tiles[ge.key],J&&J.hasData()&&(oe=ge)}let se=oe;for(;se.overscaledZ>k;)if(se=se.scaledTo(se.overscaledZ-1),d[se.key]){D[oe.key]=oe;break}}}findLoadedParent(d,k){if(d.key in this._loadedParentTiles){const I=this._loadedParentTiles[d.key];return I&&I.tileID.overscaledZ>=k?I:null}for(let I=d.overscaledZ-1;I>=k;I--){const D=d.scaledTo(I),q=this._getLoadedTile(D);if(q)return q}}_getLoadedTile(d){const k=this._tiles[d.key];return k&&k.hasData()?k:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const k=Math.ceil(d.width/this._source.tileSize)+1,I=Math.ceil(d.height/this._source.tileSize)+1,D=Math.floor(k*I*5),q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(q)}handleWrapJump(d){const k=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,k){const I={};for(const D in this._tiles){const q=this._tiles[D];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+k),I[q.tileID.key]=q}this._tiles=I;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}}update(d,k){if(this.transform=d,this.terrain=k,!this._sourceLoaded||this._paused)return;let I;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?I=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(ge=>new s.OverscaledTileID(ge.canonical.z,ge.wrap,ge.canonical.z,ge.canonical.x,ge.canonical.y)):(I=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:k}),this._source.hasTile&&(I=I.filter(ge=>this._source.hasTile(ge)))):I=[];const D=d.coveringZoomLevel(this._source),q=Math.max(D-$t.maxOverzooming,this._source.minzoom),J=Math.max(D+$t.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ge={};for(const Se of I)if(Se.canonical.z>this._source.minzoom){const Ue=Se.scaledTo(Se.canonical.z-1);ge[Ue.key]=Ue;const Je=Se.scaledTo(Math.max(this._source.minzoom,Math.min(Se.canonical.z,5)));ge[Je.key]=Je}I=I.concat(Object.values(ge))}const oe=this._updateRetainedTiles(I,D);if(Gt(this._source.type)){const ge={},Se={},Ue=Object.keys(oe);for(const Je of Ue){const St=oe[Je],vt=this._tiles[Je];if(!vt||vt.fadeEndTime&&vt.fadeEndTime<=s.exported.now())continue;const xt=this.findLoadedParent(St,q);xt&&(this._addTile(xt.tileID),ge[xt.tileID.key]=xt.tileID),Se[Je]=St}this._retainLoadedChildren(Se,D,J,oe);for(const Je in ge)oe[Je]||(this._coveredTiles[Je]=!0,oe[Je]=ge[Je]);if(k){const Je={},St={};for(const vt of I)this._tiles[vt.key].hasData()?Je[vt.key]=vt:St[vt.key]=vt;for(const vt in St){const xt=St[vt].children(this._source.maxzoom);this._tiles[xt[0].key]&&this._tiles[xt[1].key]&&this._tiles[xt[2].key]&&this._tiles[xt[3].key]&&(Je[xt[0].key]=oe[xt[0].key]=xt[0],Je[xt[1].key]=oe[xt[1].key]=xt[1],Je[xt[2].key]=oe[xt[2].key]=xt[2],Je[xt[3].key]=oe[xt[3].key]=xt[3],delete St[vt])}for(const vt in St){const xt=this.findLoadedParent(St[vt],this._source.minzoom);if(xt){Je[xt.tileID.key]=oe[xt.tileID.key]=xt.tileID;for(const tr in Je)Je[tr].isChildOf(xt.tileID)&&delete Je[tr]}}for(const vt in this._tiles)Je[vt]||(this._coveredTiles[vt]=!0)}}for(const ge in oe)this._tiles[ge].clearFadeHold();const se=s.keysDifference(this._tiles,oe);for(const ge of se){const Se=this._tiles[ge];Se.hasSymbolBuckets&&!Se.holdingForFade()?Se.setHoldDuration(this.map._fadeDuration):Se.hasSymbolBuckets&&!Se.symbolFadeFinished()||this._removeTile(ge)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,k){const I={},D={},q=Math.max(k-$t.maxOverzooming,this._source.minzoom),J=Math.max(k+$t.maxUnderzooming,this._source.minzoom),oe={};for(const se of d){const ge=this._addTile(se);I[se.key]=se,ge.hasData()||k<this._source.maxzoom&&(oe[se.key]=se)}this._retainLoadedChildren(oe,k,J,I);for(const se of d){let ge=this._tiles[se.key];if(ge.hasData())continue;if(k+1>this._source.maxzoom){const Ue=se.children(this._source.maxzoom)[0],Je=this.getTile(Ue);if(Je&&Je.hasData()){I[Ue.key]=Ue;continue}}else{const Ue=se.children(this._source.maxzoom);if(I[Ue[0].key]&&I[Ue[1].key]&&I[Ue[2].key]&&I[Ue[3].key])continue}let Se=ge.wasRequested();for(let Ue=se.overscaledZ-1;Ue>=q;--Ue){const Je=se.scaledTo(Ue);if(D[Je.key]||(D[Je.key]=!0,ge=this.getTile(Je),!ge&&Se&&(ge=this._addTile(Je)),ge&&(I[Je.key]=Je,Se=ge.wasRequested(),ge.hasData())))break}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const k=[];let I,D=this._tiles[d].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){I=this._loadedParentTiles[D.key];break}k.push(D.key);const q=D.scaledTo(D.overscaledZ-1);if(I=this._getLoadedTile(q),I)break;D=q}for(const q of k)this._loadedParentTiles[q]=I}}_addTile(d){let k=this._tiles[d.key];if(k)return k;k=this._cache.getAndRemove(d),k&&(this._setTileReloadTimer(d.key,k),k.tileID=d,this._state.initializeTileState(k,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,k)));const I=k;return k||(k=new Et(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(k,this._tileLoaded.bind(this,k,d.key,k.state))),k.uses++,this._tiles[d.key]=k,I||this._source.fire(new s.Event("dataloading",{tile:k,coord:k.tileID,dataType:"source"})),k}_setTileReloadTimer(d,k){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const I=k.getExpiryTimeout();I&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},I))}_removeTile(d){const k=this._tiles[d];k&&(k.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),k.uses>0||(k.hasData()&&k.state!=="reloading"?this._cache.add(k.tileID,k,k.getExpiryTimeout()):(k.aborted=!0,this._abortTile(k),this._unloadTile(k))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,k,I){const D=[],q=this.transform;if(!q)return D;const J=I?q.getCameraQueryGeometry(d):d,oe=d.map(vt=>q.pointCoordinate(vt,this.terrain)),se=J.map(vt=>q.pointCoordinate(vt,this.terrain)),ge=this.getIds();let Se=1/0,Ue=1/0,Je=-1/0,St=-1/0;for(const vt of se)Se=Math.min(Se,vt.x),Ue=Math.min(Ue,vt.y),Je=Math.max(Je,vt.x),St=Math.max(St,vt.y);for(let vt=0;vt<ge.length;vt++){const xt=this._tiles[ge[vt]];if(xt.holdingForFade())continue;const tr=xt.tileID,cr=Math.pow(2,q.zoom-xt.tileID.overscaledZ),Ar=k*xt.queryPadding*s.EXTENT/xt.tileSize/cr,Dt=[tr.getTilePoint(new s.MercatorCoordinate(Se,Ue)),tr.getTilePoint(new s.MercatorCoordinate(Je,St))];if(Dt[0].x-Ar<s.EXTENT&&Dt[0].y-Ar<s.EXTENT&&Dt[1].x+Ar>=0&&Dt[1].y+Ar>=0){const Lr=oe.map(Zr=>tr.getTilePoint(Zr)),Ir=se.map(Zr=>tr.getTilePoint(Zr));D.push({tile:xt,tileID:tr,queryGeometry:Lr,cameraQueryGeometry:Ir,scale:cr})}}return D}getVisibleCoordinates(d){const k=this.getRenderableIds(d).map(I=>this._tiles[I].tileID);for(const I of k)I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped());return k}hasTransition(){if(this._source.hasTransition())return!0;if(Gt(this._source.type))for(const d in this._tiles){const k=this._tiles[d];if(k.fadeEndTime!==void 0&&k.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(d,k,I){this._state.updateState(d=d||"_geojsonTileLayer",k,I)}removeFeatureState(d,k,I){this._state.removeFeatureState(d=d||"_geojsonTileLayer",k,I)}getFeatureState(d,k){return this._state.getState(d=d||"_geojsonTileLayer",k)}setDependencies(d,k,I){const D=this._tiles[d];D&&D.setDependencies(k,I)}reloadTilesForDependencies(d,k){for(const I in this._tiles)this._tiles[I].hasDependency(d,k)&&this._reloadTile(I,"reloading");this._cache.filter(I=>!I.hasDependency(d,k))}}function br(M,d){const k=Math.abs(2*M.wrap)-+(M.wrap<0),I=Math.abs(2*d.wrap)-+(d.wrap<0);return M.overscaledZ-d.overscaledZ||I-k||d.canonical.y-M.canonical.y||d.canonical.x-M.canonical.x}function Gt(M){return M==="raster"||M==="image"||M==="video"}$t.maxOverzooming=10,$t.maxUnderzooming=3;const Rr="mapboxgl_preloaded_worker_pool";class Mr{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<Mr.workerCount;)this.workers.push(new Worker(as.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(k=>{k.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rr]}numActive(){return Object.keys(this.active).length}}const Kr=Math.floor(s.exported.hardwareConcurrency/2);let Ct;function pt(){return Ct||(Ct=new Mr),Ct}function Dr(M,d){const k={};for(const I in M)I!=="ref"&&(k[I]=M[I]);return s.refProperties.forEach(I=>{I in d&&(k[I]=d[I])}),k}function ln(M){M=M.slice();const d=Object.create(null);for(let k=0;k<M.length;k++)d[M[k].id]=M[k];for(let k=0;k<M.length;k++)"ref"in M[k]&&(M[k]=Dr(M[k],d[M[k].ref]));return M}Mr.workerCount=Math.max(Math.min(Kr,6),1);const Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ur(M,d,k){k.push({command:Wt.addSource,args:[M,d[M]]})}function dn(M,d,k){d.push({command:Wt.removeSource,args:[M]}),k[M]=!0}function tn(M,d,k,I){dn(M,k,I),Ur(M,d,k)}function Bn(M,d,k){let I;for(I in M[k])if(Object.prototype.hasOwnProperty.call(M[k],I)&&I!=="data"&&!E(M[k][I],d[k][I]))return!1;for(I in d[k])if(Object.prototype.hasOwnProperty.call(d[k],I)&&I!=="data"&&!E(M[k][I],d[k][I]))return!1;return!0}function Jn(M,d,k,I,D,q){let J;for(J in d=d||{},M=M||{})Object.prototype.hasOwnProperty.call(M,J)&&(E(M[J],d[J])||k.push({command:q,args:[I,J,d[J],D]}));for(J in d)Object.prototype.hasOwnProperty.call(d,J)&&!Object.prototype.hasOwnProperty.call(M,J)&&(E(M[J],d[J])||k.push({command:q,args:[I,J,d[J],D]}))}function ai(M){return M.id}function _i(M,d){return M[d.id]=d,M}class hi{constructor(d,k){this.reset(d,k)}reset(d,k){this.points=d||[],this._distances=[0];for(let I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(k||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=s.clamp(d,0,1);let k=1,I=this._distances[k];const D=d*this.paddedLength+this.padding;for(;I<D&&k<this._distances.length;)I=this._distances[++k];const q=k-1,J=this._distances[q],oe=I-J,se=oe>0?(D-J)/oe:0;return this.points[q].mult(1-se).add(this.points[k].mult(se))}}function yr(M,d){let k=!0;return M==="always"||M!=="never"&&d!=="never"||(k=!1),k}class Vr{constructor(d,k,I){const D=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(d/I),this.yCellCount=Math.ceil(k/I);for(let J=0;J<this.xCellCount*this.yCellCount;J++)D.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=k,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/k,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,k,I,D,q){this._forEachCell(k,I,D,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(k),this.bboxes.push(I),this.bboxes.push(D),this.bboxes.push(q)}insertCircle(d,k,I,D){this._forEachCell(k-D,I-D,k+D,I+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(k),this.circles.push(I),this.circles.push(D)}_insertBoxCell(d,k,I,D,q,J){this.boxCells[q].push(J)}_insertCircleCell(d,k,I,D,q,J){this.circleCells[q].push(J)}_query(d,k,I,D,q,J,oe){if(I<0||d>this.width||D<0||k>this.height)return[];const se=[];if(d<=0&&k<=0&&this.width<=I&&this.height<=D){if(q)return[{key:null,x1:d,y1:k,x2:I,y2:D}];for(let ge=0;ge<this.boxKeys.length;ge++)se.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(let ge=0;ge<this.circleKeys.length;ge++){const Se=this.circles[3*ge],Ue=this.circles[3*ge+1],Je=this.circles[3*ge+2];se.push({key:this.circleKeys[ge],x1:Se-Je,y1:Ue-Je,x2:Se+Je,y2:Ue+Je})}}else this._forEachCell(d,k,I,D,this._queryCell,se,{hitTest:q,overlapMode:J,seenUids:{box:{},circle:{}}},oe);return se}query(d,k,I,D){return this._query(d,k,I,D,!1,null)}hitTest(d,k,I,D,q,J){return this._query(d,k,I,D,!0,q,J).length>0}hitTestCircle(d,k,I,D,q){const J=d-I,oe=d+I,se=k-I,ge=k+I;if(oe<0||J>this.width||ge<0||se>this.height)return!1;const Se=[];return this._forEachCell(J,se,oe,ge,this._queryCellCircle,Se,{hitTest:!0,overlapMode:D,circle:{x:d,y:k,radius:I},seenUids:{box:{},circle:{}}},q),Se.length>0}_queryCell(d,k,I,D,q,J,oe,se){const{seenUids:ge,hitTest:Se,overlapMode:Ue}=oe,Je=this.boxCells[q];if(Je!==null){const vt=this.bboxes;for(const xt of Je)if(!ge.box[xt]){ge.box[xt]=!0;const tr=4*xt,cr=this.boxKeys[xt];if(d<=vt[tr+2]&&k<=vt[tr+3]&&I>=vt[tr+0]&&D>=vt[tr+1]&&(!se||se(cr))&&(!Se||!yr(Ue,cr.overlapMode))&&(J.push({key:cr,x1:vt[tr],y1:vt[tr+1],x2:vt[tr+2],y2:vt[tr+3]}),Se))return!0}}const St=this.circleCells[q];if(St!==null){const vt=this.circles;for(const xt of St)if(!ge.circle[xt]){ge.circle[xt]=!0;const tr=3*xt,cr=this.circleKeys[xt];if(this._circleAndRectCollide(vt[tr],vt[tr+1],vt[tr+2],d,k,I,D)&&(!se||se(cr))&&(!Se||!yr(Ue,cr.overlapMode))){const Ar=vt[tr],Dt=vt[tr+1],Lr=vt[tr+2];if(J.push({key:cr,x1:Ar-Lr,y1:Dt-Lr,x2:Ar+Lr,y2:Dt+Lr}),Se)return!0}}}return!1}_queryCellCircle(d,k,I,D,q,J,oe,se){const{circle:ge,seenUids:Se,overlapMode:Ue}=oe,Je=this.boxCells[q];if(Je!==null){const vt=this.bboxes;for(const xt of Je)if(!Se.box[xt]){Se.box[xt]=!0;const tr=4*xt,cr=this.boxKeys[xt];if(this._circleAndRectCollide(ge.x,ge.y,ge.radius,vt[tr+0],vt[tr+1],vt[tr+2],vt[tr+3])&&(!se||se(cr))&&!yr(Ue,cr.overlapMode))return J.push(!0),!0}}const St=this.circleCells[q];if(St!==null){const vt=this.circles;for(const xt of St)if(!Se.circle[xt]){Se.circle[xt]=!0;const tr=3*xt,cr=this.circleKeys[xt];if(this._circlesCollide(vt[tr],vt[tr+1],vt[tr+2],ge.x,ge.y,ge.radius)&&(!se||se(cr))&&!yr(Ue,cr.overlapMode))return J.push(!0),!0}}}_forEachCell(d,k,I,D,q,J,oe,se){const ge=this._convertToXCellCoord(d),Se=this._convertToYCellCoord(k),Ue=this._convertToXCellCoord(I),Je=this._convertToYCellCoord(D);for(let St=ge;St<=Ue;St++)for(let vt=Se;vt<=Je;vt++)if(q.call(this,d,k,I,D,this.xCellCount*vt+St,J,oe,se))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,k,I,D,q,J){const oe=D-d,se=q-k,ge=I+J;return ge*ge>oe*oe+se*se}_circleAndRectCollide(d,k,I,D,q,J,oe){const se=(J-D)/2,ge=Math.abs(d-(D+se));if(ge>se+I)return!1;const Se=(oe-q)/2,Ue=Math.abs(k-(q+Se));if(Ue>Se+I)return!1;if(ge<=se||Ue<=Se)return!0;const Je=ge-se,St=Ue-Se;return Je*Je+St*St<=I*I}}function wi(M,d,k,I,D){const q=s.create();return d?(s.scale(q,q,[1/D,1/D,1]),k||s.rotateZ(q,q,I.angle)):s.multiply(q,I.labelPlaneMatrix,M),q}function xn(M,d,k,I,D){if(d){const q=s.clone(M);return s.scale(q,q,[D,D,1]),k||s.rotateZ(q,q,-I.angle),q}return I.glCoordMatrix}function si(M,d,k){let I;k?(I=[M.x,M.y,k(M.x,M.y),1],s.transformMat4(I,I,d)):(I=[M.x,M.y,0,1],co(I,I,d));const D=I[3];return{point:new s.pointGeometry(I[0]/D,I[1]/D),signedDistanceFromCamera:D}}function fr(M,d){return .5+M/d*.5}function or(M,d){const k=M[0]/M[3],I=M[1]/M[3];return k>=-d[0]&&k<=d[0]&&I>=-d[1]&&I<=d[1]}function Yr(M,d,k,I,D,q,J,oe,se,ge){const Se=I?M.textSizeData:M.iconSizeData,Ue=s.evaluateSizeForZoom(Se,k.transform.zoom),Je=[256/k.width*2+1,256/k.height*2+1],St=I?M.text.dynamicLayoutVertexArray:M.icon.dynamicLayoutVertexArray;St.clear();const vt=M.lineVertexArray,xt=I?M.text.placedSymbolArray:M.icon.placedSymbolArray,tr=k.transform.width/k.transform.height;let cr=!1;for(let Ar=0;Ar<xt.length;Ar++){const Dt=xt.get(Ar);if(Dt.hidden||Dt.writingMode===s.WritingMode.vertical&&!cr){gi(Dt.numGlyphs,St);continue}let Lr;if(cr=!1,ge?(Lr=[Dt.anchorX,Dt.anchorY,ge(Dt.anchorX,Dt.anchorY),1],s.transformMat4(Lr,Lr,d)):(Lr=[Dt.anchorX,Dt.anchorY,0,1],co(Lr,Lr,d)),!or(Lr,Je)){gi(Dt.numGlyphs,St);continue}const Ir=fr(k.transform.cameraToCenterDistance,Lr[3]),Zr=s.evaluateSizeForFeature(Se,Ue,Dt),Gr=J?Zr/Ir:Zr*Ir,mn=new s.pointGeometry(Dt.anchorX,Dt.anchorY),qr=si(mn,D,ge).point,zn={},En=pn(Dt,Gr,!1,oe,d,D,q,M.glyphOffsetArray,vt,St,qr,mn,zn,tr,se,ge);cr=En.useVertical,(En.notEnoughRoom||cr||En.needsFlipping&&pn(Dt,Gr,!0,oe,d,D,q,M.glyphOffsetArray,vt,St,qr,mn,zn,tr,se,ge).notEnoughRoom)&&gi(Dt.numGlyphs,St)}I?M.text.dynamicLayoutVertexBuffer.updateData(St):M.icon.dynamicLayoutVertexBuffer.updateData(St)}function un(M,d,k,I,D,q,J,oe,se,ge,Se,Ue,Je){const St=oe.glyphStartIndex+oe.numGlyphs,vt=oe.lineStartIndex,xt=oe.lineStartIndex+oe.lineLength,tr=d.getoffsetX(oe.glyphStartIndex),cr=d.getoffsetX(St-1),Ar=ci(M*tr,k,I,D,q,J,oe.segment,vt,xt,se,ge,Se,Ue,Je);if(!Ar)return null;const Dt=ci(M*cr,k,I,D,q,J,oe.segment,vt,xt,se,ge,Se,Ue,Je);return Dt?{first:Ar,last:Dt}:null}function Or(M,d,k,I){return M===s.WritingMode.horizontal&&Math.abs(k.y-d.y)>Math.abs(k.x-d.x)*I?{useVertical:!0}:(M===s.WritingMode.vertical?d.y<k.y:d.x>k.x)?{needsFlipping:!0}:null}function pn(M,d,k,I,D,q,J,oe,se,ge,Se,Ue,Je,St,vt,xt){const tr=d/24,cr=M.lineOffsetX*tr,Ar=M.lineOffsetY*tr;let Dt;if(M.numGlyphs>1){const Lr=M.glyphStartIndex+M.numGlyphs,Ir=M.lineStartIndex,Zr=M.lineStartIndex+M.lineLength,Gr=un(tr,oe,cr,Ar,k,Se,Ue,M,se,q,Je,vt,xt);if(!Gr)return{notEnoughRoom:!0};const mn=si(Gr.first.point,J,xt).point,qr=si(Gr.last.point,J,xt).point;if(I&&!k){const zn=Or(M.writingMode,mn,qr,St);if(zn)return zn}Dt=[Gr.first];for(let zn=M.glyphStartIndex+1;zn<Lr-1;zn++)Dt.push(ci(tr*oe.getoffsetX(zn),cr,Ar,k,Se,Ue,M.segment,Ir,Zr,se,q,Je,vt,xt));Dt.push(Gr.last)}else{if(I&&!k){const Ir=si(Ue,D,xt).point,Zr=M.lineStartIndex+M.segment+1,Gr=new s.pointGeometry(se.getx(Zr),se.gety(Zr)),mn=si(Gr,D,xt),qr=mn.signedDistanceFromCamera>0?mn.point:Qn(Ue,Gr,Ir,1,D,xt),zn=Or(M.writingMode,Ir,qr,St);if(zn)return zn}const Lr=ci(tr*oe.getoffsetX(M.glyphStartIndex),cr,Ar,k,Se,Ue,M.segment,M.lineStartIndex,M.lineStartIndex+M.lineLength,se,q,Je,vt,xt);if(!Lr)return{notEnoughRoom:!0};Dt=[Lr]}for(const Lr of Dt)s.addDynamicAttributes(ge,Lr.point,Lr.angle);return{}}function Qn(M,d,k,I,D,q){const J=si(M.add(M.sub(d)._unit()),D,q).point,oe=k.sub(J);return k.add(oe._mult(I/oe.mag()))}function ci(M,d,k,I,D,q,J,oe,se,ge,Se,Ue,Je,St){const vt=I?M-d:M+d;let xt=vt>0?1:-1,tr=0;I&&(xt*=-1,tr=Math.PI),xt<0&&(tr+=Math.PI);let cr=xt>0?oe+J:oe+J+1,Ar=D,Dt=D,Lr=0,Ir=0;const Zr=Math.abs(vt),Gr=[];for(;Lr+Ir<=Zr;){if(cr+=xt,cr<oe||cr>=se)return null;if(Dt=Ar,Gr.push(Ar),Ar=Ue[cr],Ar===void 0){const Vn=new s.pointGeometry(ge.getx(cr),ge.gety(cr)),Ti=si(Vn,Se,St);if(Ti.signedDistanceFromCamera>0)Ar=Ue[cr]=Ti.point;else{const Di=cr-xt;Ar=Qn(Lr===0?q:new s.pointGeometry(ge.getx(Di),ge.gety(Di)),Vn,Dt,Zr-Lr+1,Se,St)}}Lr+=Ir,Ir=Dt.dist(Ar)}const mn=(Zr-Lr)/Ir,qr=Ar.sub(Dt),zn=qr.mult(mn)._add(Dt);zn._add(qr._unit()._perp()._mult(k*xt));const En=tr+Math.atan2(Ar.y-Dt.y,Ar.x-Dt.x);return Gr.push(zn),{point:zn,angle:Je?En:0,path:Gr}}const Ro=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(M,d){for(let k=0;k<M;k++){const I=d.length;d.resize(I+4),d.float32.set(Ro,3*I)}}function co(M,d,k){const I=d[0],D=d[1];return M[0]=k[0]*I+k[4]*D+k[12],M[1]=k[1]*I+k[5]*D+k[13],M[3]=k[3]*I+k[7]*D+k[15],M}const li=100;class no{constructor(d,k=new Vr(d.width+200,d.height+200,25),I=new Vr(d.width+200,d.height+200,25)){this.transform=d,this.grid=k,this.ignoredGrid=I,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+li,this.screenBottomBoundary=d.height+li,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,k,I,D,q,J){const oe=this.projectAndGetPerspectiveRatio(D,d.anchorPointX,d.anchorPointY,J),se=I*oe.perspectiveRatio,ge=d.x1*se+oe.point.x,Se=d.y1*se+oe.point.y,Ue=d.x2*se+oe.point.x,Je=d.y2*se+oe.point.y;return!this.isInsideGrid(ge,Se,Ue,Je)||k!=="always"&&this.grid.hitTest(ge,Se,Ue,Je,k,q)||oe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ge,Se,Ue,Je],offscreen:this.isOffscreen(ge,Se,Ue,Je)}}placeCollisionCircles(d,k,I,D,q,J,oe,se,ge,Se,Ue,Je,St,vt){const xt=[],tr=new s.pointGeometry(k.anchorX,k.anchorY),cr=si(tr,J,vt),Ar=fr(this.transform.cameraToCenterDistance,cr.signedDistanceFromCamera),Dt=(Se?q/Ar:q*Ar)/s.ONE_EM,Lr=si(tr,oe,vt).point,Ir=un(Dt,D,k.lineOffsetX*Dt,k.lineOffsetY*Dt,!1,Lr,tr,k,I,oe,{},!1,vt);let Zr=!1,Gr=!1,mn=!0;if(Ir){const qr=.5*Je*Ar+St,zn=new s.pointGeometry(-100,-100),En=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Vn=new hi,Ti=Ir.first,Di=Ir.last;let N=[];for(let fe=Ti.path.length-1;fe>=1;fe--)N.push(Ti.path[fe]);for(let fe=1;fe<Di.path.length;fe++)N.push(Di.path[fe]);const $=2.5*qr;if(se){const fe=N.map(Le=>si(Le,se,vt));N=fe.some(Le=>Le.signedDistanceFromCamera<=0)?[]:fe.map(Le=>Le.point)}let re=[];if(N.length>0){const fe=N[0].clone(),Le=N[0].clone();for(let Be=1;Be<N.length;Be++)fe.x=Math.min(fe.x,N[Be].x),fe.y=Math.min(fe.y,N[Be].y),Le.x=Math.max(Le.x,N[Be].x),Le.y=Math.max(Le.y,N[Be].y);re=fe.x>=zn.x&&Le.x<=En.x&&fe.y>=zn.y&&Le.y<=En.y?[N]:Le.x<zn.x||fe.x>En.x||Le.y<zn.y||fe.y>En.y?[]:s.clipLine([N],zn.x,zn.y,En.x,En.y)}for(const fe of re){Vn.reset(fe,.25*qr);let Le=0;Le=Vn.length<=.5*qr?1:Math.ceil(Vn.paddedLength/$)+1;for(let Be=0;Be<Le;Be++){const qe=Be/Math.max(Le-1,1),Ke=Vn.lerp(qe),it=Ke.x+li,_t=Ke.y+li;xt.push(it,_t,qr,0);const rr=it-qr,Er=_t-qr,kr=it+qr,hr=_t+qr;if(mn=mn&&this.isOffscreen(rr,Er,kr,hr),Gr=Gr||this.isInsideGrid(rr,Er,kr,hr),d!=="always"&&this.grid.hitTestCircle(it,_t,qr,d,Ue)&&(Zr=!0,!ge))return{circles:[],offscreen:!1,collisionDetected:Zr}}}}return{circles:!ge&&Zr||!Gr||Ar<this.perspectiveRatioCutoff?[]:xt,offscreen:mn,collisionDetected:Zr}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const k=[];let I=1/0,D=1/0,q=-1/0,J=-1/0;for(const Se of d){const Ue=new s.pointGeometry(Se.x+li,Se.y+li);I=Math.min(I,Ue.x),D=Math.min(D,Ue.y),q=Math.max(q,Ue.x),J=Math.max(J,Ue.y),k.push(Ue)}const oe=this.grid.query(I,D,q,J).concat(this.ignoredGrid.query(I,D,q,J)),se={},ge={};for(const Se of oe){const Ue=Se.key;if(se[Ue.bucketInstanceId]===void 0&&(se[Ue.bucketInstanceId]={}),se[Ue.bucketInstanceId][Ue.featureIndex])continue;const Je=[new s.pointGeometry(Se.x1,Se.y1),new s.pointGeometry(Se.x2,Se.y1),new s.pointGeometry(Se.x2,Se.y2),new s.pointGeometry(Se.x1,Se.y2)];s.polygonIntersectsPolygon(k,Je)&&(se[Ue.bucketInstanceId][Ue.featureIndex]=!0,ge[Ue.bucketInstanceId]===void 0&&(ge[Ue.bucketInstanceId]=[]),ge[Ue.bucketInstanceId].push(Ue.featureIndex))}return ge}insertCollisionBox(d,k,I,D,q,J){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:D,featureIndex:q,collisionGroupID:J,overlapMode:k},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,k,I,D,q,J){const oe=I?this.ignoredGrid:this.grid,se={bucketInstanceId:D,featureIndex:q,collisionGroupID:J,overlapMode:k};for(let ge=0;ge<d.length;ge+=4)oe.insertCircle(se,d[ge],d[ge+1],d[ge+2])}projectAndGetPerspectiveRatio(d,k,I,D){let q;return D?(q=[k,I,D(k,I),1],s.transformMat4(q,q,d)):(q=[k,I,0,1],co(q,q,d)),{point:new s.pointGeometry((q[0]/q[3]+1)/2*this.transform.width+li,(-q[1]/q[3]+1)/2*this.transform.height+li),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q[3]*.5}}isOffscreen(d,k,I,D){return I<li||d>=this.screenRightBoundary||D<li||k>this.screenBottomBoundary}isInsideGrid(d,k,I,D){return I>=0&&d<this.gridRightBoundary&&D>=0&&k<this.gridBottomBoundary}getViewportMatrix(){const d=s.identity([]);return s.translate(d,d,[-100,-100,0]),d}}function yo(M,d,k){return d*(s.EXTENT/(M.tileSize*Math.pow(2,k-M.tileID.overscaledZ)))}class pi{constructor(d,k,I,D){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?k:-k))):D&&I?1:0,this.placed=I}isHidden(){return this.opacity===0&&!this.placed}}class Li{constructor(d,k,I,D,q){this.text=new pi(d?d.text:null,k,I,q),this.icon=new pi(d?d.icon:null,k,D,q)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yo{constructor(d,k,I){this.text=d,this.icon=k,this.skipFade=I}}class vn{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class ze{constructor(d,k,I,D,q){this.bucketInstanceId=d,this.featureIndex=k,this.sourceLayerIndex=I,this.bucketIndex=D,this.tileID=q}}class Ea{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const k=++this.maxGroupID;this.collisionGroups[d]={ID:k,predicate:I=>I.collisionGroupID===k}}return this.collisionGroups[d]}}function ha(M,d,k,I,D){const{horizontalAlign:q,verticalAlign:J}=s.getAnchorAlignment(M),oe=-(q-.5)*d,se=-(J-.5)*k,ge=s.evaluateVariableOffset(M,I);return new s.pointGeometry(oe+ge[0]*D,se+ge[1]*D)}function ra(M,d,k,I,D,q){const{x1:J,x2:oe,y1:se,y2:ge,anchorPointX:Se,anchorPointY:Ue}=M,Je=new s.pointGeometry(d,k);return I&&Je._rotate(D?q:-q),{x1:J+Je.x,y1:se+Je.y,x2:oe+Je.x,y2:ge+Je.y,anchorPointX:Se,anchorPointY:Ue}}class we{constructor(d,k,I,D,q){this.transform=d.clone(),this.terrain=k,this.collisionIndex=new no(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=I,this.retainedQueryData={},this.collisionGroups=new Ea(D),this.collisionCircleArrays={},this.prevPlacement=q,q&&(q.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,k,I,D){const q=I.getBucket(k),J=I.latestFeatureIndex;if(!q||!J||k.id!==q.layerIds[0])return;const oe=I.collisionBoxArray,se=q.layers[0].layout,ge=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),Se=I.tileSize/s.EXTENT,Ue=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),Je=se.get("text-pitch-alignment")==="map",St=se.get("text-rotation-alignment")==="map",vt=yo(I,1,this.transform.zoom),xt=wi(Ue,Je,St,this.transform,vt);let tr=null;if(Je){const Ar=xn(Ue,Je,St,this.transform,vt);tr=s.multiply([],this.transform.labelPlaneMatrix,Ar)}this.retainedQueryData[q.bucketInstanceId]=new ze(q.bucketInstanceId,J,q.sourceLayerIndex,q.index,I.tileID);const cr={bucket:q,layout:se,posMatrix:Ue,textLabelPlaneMatrix:xt,labelToScreenMatrix:tr,scale:ge,textPixelRatio:Se,holdingForFade:I.holdingForFade(),collisionBoxArray:oe,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(D)for(const Ar of q.sortKeyRanges){const{sortKey:Dt,symbolInstanceStart:Lr,symbolInstanceEnd:Ir}=Ar;d.push({sortKey:Dt,symbolInstanceStart:Lr,symbolInstanceEnd:Ir,parameters:cr})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:cr})}attemptAnchorPlacement(d,k,I,D,q,J,oe,se,ge,Se,Ue,Je,St,vt,xt,tr){const cr=[Je.textOffset0,Je.textOffset1],Ar=ha(d,I,D,cr,q),Dt=this.collisionIndex.placeCollisionBox(ra(k,Ar.x,Ar.y,J,oe,this.transform.angle),Ue,se,ge,Se.predicate,tr);if((!xt||this.collisionIndex.placeCollisionBox(ra(xt,Ar.x,Ar.y,J,oe,this.transform.angle),Ue,se,ge,Se.predicate,tr).box.length!==0)&&Dt.box.length>0){let Lr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Je.crossTileID]&&this.prevPlacement.placements[Je.crossTileID]&&this.prevPlacement.placements[Je.crossTileID].text&&(Lr=this.prevPlacement.variableOffsets[Je.crossTileID].anchor),Je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Je.crossTileID]={textOffset:cr,width:I,height:D,anchor:d,textBoxScale:q,prevAnchor:Lr},this.markUsedJustification(St,d,Je,vt),St.allowVerticalPlacement&&(this.markUsedOrientation(St,vt,Je),this.placedOrientations[Je.crossTileID]=vt),{shift:Ar,placedGlyphBoxes:Dt}}}placeLayerBucketPart(d,k,I){const{bucket:D,layout:q,posMatrix:J,textLabelPlaneMatrix:oe,labelToScreenMatrix:se,textPixelRatio:ge,holdingForFade:Se,collisionBoxArray:Ue,partiallyEvaluatedTextSize:Je,collisionGroup:St}=d.parameters,vt=q.get("text-optional"),xt=q.get("icon-optional"),tr=s.getOverlapMode(q,"text-overlap","text-allow-overlap"),cr=tr==="always",Ar=s.getOverlapMode(q,"icon-overlap","icon-allow-overlap"),Dt=Ar==="always",Lr=q.get("text-rotation-alignment")==="map",Ir=q.get("text-pitch-alignment")==="map",Zr=q.get("icon-text-fit")!=="none",Gr=q.get("symbol-z-order")==="viewport-y",mn=cr&&(Dt||!D.hasIconData()||xt),qr=Dt&&(cr||!D.hasTextData()||vt);!D.collisionArrays&&Ue&&D.deserializeCollisionBoxes(Ue);const zn=(En,Vn)=>{if(k[En.crossTileID])return;if(Se)return void(this.placements[En.crossTileID]=new Yo(!1,!1,!1));let Ti=!1,Di=!1,N=!0,$=null,re={box:null,offscreen:null},fe={box:null,offscreen:null},Le=null,Be=null,qe=null,Ke=0,it=0,_t=0;Vn.textFeatureIndex?Ke=Vn.textFeatureIndex:En.useRuntimeCollisionCircles&&(Ke=En.featureIndex),Vn.verticalTextFeatureIndex&&(it=Vn.verticalTextFeatureIndex);const rr=this.retainedQueryData[D.bucketInstanceId].tileID,Er=this.terrain?(zr,zt)=>this.terrain.getElevation(rr,zr,zt):null;for(const zr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const zt=Vn[zr];zt&&(zt.elevation=Er?Er(zt.anchorPointX,zt.anchorPointY):0)}const kr=Vn.textBox;if(kr){const zr=Xt=>{let Hr=s.WritingMode.horizontal;if(D.allowVerticalPlacement&&!Xt&&this.prevPlacement){const en=this.prevPlacement.placedOrientations[En.crossTileID];en&&(this.placedOrientations[En.crossTileID]=en,Hr=en,this.markUsedOrientation(D,Hr,En))}return Hr},zt=(Xt,Hr)=>{if(D.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&Vn.verticalTextBox){for(const en of D.writingModes)if(en===s.WritingMode.vertical?(re=Hr(),fe=re):re=Xt(),re&&re.box&&re.box.length)break}else re=Xt()};if(q.get("text-variable-anchor")){let Xt=q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[En.crossTileID]){const Wr=this.prevPlacement.variableOffsets[En.crossTileID];Xt.indexOf(Wr.anchor)>0&&(Xt=Xt.filter(On=>On!==Wr.anchor),Xt.unshift(Wr.anchor))}const Hr=(Wr,On,In)=>{const Ci=Wr.x2-Wr.x1,Fn=Wr.y2-Wr.y1,Co=En.textBoxScale,Po=Zr&&Ar==="never"?On:null;let ao={box:[],offscreen:!1};const Gi=tr!=="never"?2*Xt.length:Xt.length;for(let Eo=0;Eo<Gi;++Eo){const Mo=this.attemptAnchorPlacement(Xt[Eo%Xt.length],Wr,Ci,Fn,Co,Lr,Ir,ge,J,St,Eo>=Xt.length?tr:"never",En,D,In,Po,Er);if(Mo&&(ao=Mo.placedGlyphBoxes,ao&&ao.box&&ao.box.length)){Ti=!0,$=Mo.shift;break}}return ao};zt(()=>Hr(kr,Vn.iconBox,s.WritingMode.horizontal),()=>{const Wr=Vn.verticalTextBox;return D.allowVerticalPlacement&&!(re&&re.box&&re.box.length)&&En.numVerticalGlyphVertices>0&&Wr?Hr(Wr,Vn.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),re&&(Ti=re.box,N=re.offscreen);const en=zr(re&&re.box);if(!Ti&&this.prevPlacement){const Wr=this.prevPlacement.variableOffsets[En.crossTileID];Wr&&(this.variableOffsets[En.crossTileID]=Wr,this.markUsedJustification(D,Wr.anchor,En,en))}}else{const Xt=(Hr,en)=>{const Wr=this.collisionIndex.placeCollisionBox(Hr,tr,ge,J,St.predicate,Er);return Wr&&Wr.box&&Wr.box.length&&(this.markUsedOrientation(D,en,En),this.placedOrientations[En.crossTileID]=en),Wr};zt(()=>Xt(kr,s.WritingMode.horizontal),()=>{const Hr=Vn.verticalTextBox;return D.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&Hr?Xt(Hr,s.WritingMode.vertical):{box:null,offscreen:null}}),zr(re&&re.box&&re.box.length)}}if(Le=re,Ti=Le&&Le.box&&Le.box.length>0,N=Le&&Le.offscreen,En.useRuntimeCollisionCircles){const zr=D.text.placedSymbolArray.get(En.centerJustifiedTextSymbolIndex),zt=s.evaluateSizeForFeature(D.textSizeData,Je,zr),Xt=q.get("text-padding");Be=this.collisionIndex.placeCollisionCircles(tr,zr,D.lineVertexArray,D.glyphOffsetArray,zt,J,oe,se,I,Ir,St.predicate,En.collisionCircleDiameter,Xt,Er),Be.circles.length&&Be.collisionDetected&&!I&&s.warnOnce("Collisions detected, but collision boxes are not shown"),Ti=cr||Be.circles.length>0&&!Be.collisionDetected,N=N&&Be.offscreen}if(Vn.iconFeatureIndex&&(_t=Vn.iconFeatureIndex),Vn.iconBox){const zr=zt=>{const Xt=Zr&&$?ra(zt,$.x,$.y,Lr,Ir,this.transform.angle):zt;return this.collisionIndex.placeCollisionBox(Xt,Ar,ge,J,St.predicate,Er)};fe&&fe.box&&fe.box.length&&Vn.verticalIconBox?(qe=zr(Vn.verticalIconBox),Di=qe.box.length>0):(qe=zr(Vn.iconBox),Di=qe.box.length>0),N=N&&qe.offscreen}const hr=vt||En.numHorizontalGlyphVertices===0&&En.numVerticalGlyphVertices===0,fn=xt||En.numIconVertices===0;if(hr||fn?fn?hr||(Di=Di&&Ti):Ti=Di&&Ti:Di=Ti=Di&&Ti,Ti&&Le&&Le.box&&this.collisionIndex.insertCollisionBox(Le.box,tr,q.get("text-ignore-placement"),D.bucketInstanceId,fe&&fe.box&&it?it:Ke,St.ID),Di&&qe&&this.collisionIndex.insertCollisionBox(qe.box,Ar,q.get("icon-ignore-placement"),D.bucketInstanceId,_t,St.ID),Be&&(Ti&&this.collisionIndex.insertCollisionCircles(Be.circles,tr,q.get("text-ignore-placement"),D.bucketInstanceId,Ke,St.ID),I)){const zr=D.bucketInstanceId;let zt=this.collisionCircleArrays[zr];zt===void 0&&(zt=this.collisionCircleArrays[zr]=new vn);for(let Xt=0;Xt<Be.circles.length;Xt+=4)zt.circles.push(Be.circles[Xt+0]),zt.circles.push(Be.circles[Xt+1]),zt.circles.push(Be.circles[Xt+2]),zt.circles.push(Be.collisionDetected?1:0)}if(En.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(D.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[En.crossTileID]=new Yo(Ti||mn,Di||qr,N||D.justReloaded),k[En.crossTileID]=!0};if(Gr){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const En=D.getSortedSymbolIndexes(this.transform.angle);for(let Vn=En.length-1;Vn>=0;--Vn){const Ti=En[Vn];zn(D.symbolInstances.get(Ti),D.collisionArrays[Ti])}}else for(let En=d.symbolInstanceStart;En<d.symbolInstanceEnd;En++)zn(D.symbolInstances.get(En),D.collisionArrays[En]);if(I&&D.bucketInstanceId in this.collisionCircleArrays){const En=this.collisionCircleArrays[D.bucketInstanceId];s.invert(En.invProjMatrix,J),En.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(d,k,I,D){let q;q=D===s.WritingMode.vertical?I.verticalPlacedTextSymbolIndex:{left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(k)];const J=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex];for(const oe of J)oe>=0&&(d.text.placedSymbolArray.get(oe).crossTileID=q>=0&&oe!==q?0:I.crossTileID)}markUsedOrientation(d,k,I){const D=k===s.WritingMode.horizontal||k===s.WritingMode.horizontalOnly?k:0,q=k===s.WritingMode.vertical?k:0,J=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex];for(const oe of J)d.text.placedSymbolArray.get(oe).placedOrientation=D;I.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=q)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const k=this.prevPlacement;let I=!1;this.prevZoomAdjustment=k?k.zoomAdjustment(this.transform.zoom):0;const D=k?k.symbolFadeChange(d):1,q=k?k.opacities:{},J=k?k.variableOffsets:{},oe=k?k.placedOrientations:{};for(const se in this.placements){const ge=this.placements[se],Se=q[se];Se?(this.opacities[se]=new Li(Se,D,ge.text,ge.icon),I=I||ge.text!==Se.text.placed||ge.icon!==Se.icon.placed):(this.opacities[se]=new Li(null,D,ge.text,ge.icon,ge.skipFade),I=I||ge.text||ge.icon)}for(const se in q){const ge=q[se];if(!this.opacities[se]){const Se=new Li(ge,D,!1,!1);Se.isHidden()||(this.opacities[se]=Se,I=I||ge.text.placed||ge.icon.placed)}}for(const se in J)this.variableOffsets[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.variableOffsets[se]=J[se]);for(const se in oe)this.placedOrientations[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.placedOrientations[se]=oe[se]);if(k&&k.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");I?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=k?k.lastPlacementChangeTime:d)}updateLayerOpacities(d,k){const I={};for(const D of k){const q=D.getBucket(d);q&&D.latestFeatureIndex&&d.id===q.layerIds[0]&&this.updateBucketOpacities(q,I,D.collisionBoxArray)}}updateBucketOpacities(d,k,I){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const D=d.layers[0].layout,q=new Li(null,0,!1,!1,!0),J=D.get("text-allow-overlap"),oe=D.get("icon-allow-overlap"),se=D.get("text-variable-anchor"),ge=D.get("text-rotation-alignment")==="map",Se=D.get("text-pitch-alignment")==="map",Ue=D.get("icon-text-fit")!=="none",Je=new Li(null,0,J&&(oe||!d.hasIconData()||D.get("icon-optional")),oe&&(J||!d.hasTextData()||D.get("text-optional")),!0);!d.collisionArrays&&I&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(I);const St=(vt,xt,tr)=>{for(let cr=0;cr<xt/4;cr++)vt.opacityVertexArray.emplaceBack(tr)};for(let vt=0;vt<d.symbolInstances.length;vt++){const xt=d.symbolInstances.get(vt),{numHorizontalGlyphVertices:tr,numVerticalGlyphVertices:cr,crossTileID:Ar}=xt;let Dt=this.opacities[Ar];k[Ar]?Dt=q:Dt||(Dt=Je,this.opacities[Ar]=Dt),k[Ar]=!0;const Lr=xt.numIconVertices>0,Ir=this.placedOrientations[xt.crossTileID],Zr=Ir===s.WritingMode.vertical,Gr=Ir===s.WritingMode.horizontal||Ir===s.WritingMode.horizontalOnly;if(tr>0||cr>0){const mn=ir(Dt.text);St(d.text,tr,Zr?Br:mn),St(d.text,cr,Gr?Br:mn);const qr=Dt.text.isHidden();[xt.rightJustifiedTextSymbolIndex,xt.centerJustifiedTextSymbolIndex,xt.leftJustifiedTextSymbolIndex].forEach(Vn=>{Vn>=0&&(d.text.placedSymbolArray.get(Vn).hidden=qr||Zr?1:0)}),xt.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(xt.verticalPlacedTextSymbolIndex).hidden=qr||Gr?1:0);const zn=this.variableOffsets[xt.crossTileID];zn&&this.markUsedJustification(d,zn.anchor,xt,Ir);const En=this.placedOrientations[xt.crossTileID];En&&(this.markUsedJustification(d,"left",xt,En),this.markUsedOrientation(d,En,xt))}if(Lr){const mn=ir(Dt.icon),qr=!(Ue&&xt.verticalPlacedIconSymbolIndex&&Zr);xt.placedIconSymbolIndex>=0&&(St(d.icon,xt.numIconVertices,qr?mn:Br),d.icon.placedSymbolArray.get(xt.placedIconSymbolIndex).hidden=Dt.icon.isHidden()),xt.verticalPlacedIconSymbolIndex>=0&&(St(d.icon,xt.numVerticalIconVertices,qr?Br:mn),d.icon.placedSymbolArray.get(xt.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const mn=d.collisionArrays[vt];if(mn){let qr=new s.pointGeometry(0,0);if(mn.textBox||mn.verticalTextBox){let En=!0;if(se){const Vn=this.variableOffsets[Ar];Vn?(qr=ha(Vn.anchor,Vn.width,Vn.height,Vn.textOffset,Vn.textBoxScale),ge&&qr._rotate(Se?this.transform.angle:-this.transform.angle)):En=!1}mn.textBox&&_e(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!En||Zr,qr.x,qr.y),mn.verticalTextBox&&_e(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!En||Gr,qr.x,qr.y)}const zn=!!(!Gr&&mn.verticalIconBox);mn.iconBox&&_e(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,zn,Ue?qr.x:0,Ue?qr.y:0),mn.verticalIconBox&&_e(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!zn,Ue?qr.x:0,Ue?qr.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const vt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=vt.invProjMatrix,d.placementViewportMatrix=vt.viewportMatrix,d.collisionCircleArray=vt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,k){const I=this.zoomAtLastRecencyCheck===k?1-this.zoomAdjustment(k):1;return this.zoomAtLastRecencyCheck=k,this.commitTime+this.fadeDuration*I>d}setStale(){this.stale=!0}}function _e(M,d,k,I,D){M.emplaceBack(d?1:0,k?1:0,I||0,D||0),M.emplaceBack(d?1:0,k?1:0,I||0,D||0),M.emplaceBack(d?1:0,k?1:0,I||0,D||0),M.emplaceBack(d?1:0,k?1:0,I||0,D||0)}const De=Math.pow(2,25),ot=Math.pow(2,24),lt=Math.pow(2,17),Rt=Math.pow(2,16),Fe=Math.pow(2,9),Ht=Math.pow(2,8),Nt=Math.pow(2,1);function ir(M){if(M.opacity===0&&!M.placed)return 0;if(M.opacity===1&&M.placed)return 4294967295;const d=M.placed?1:0,k=Math.floor(127*M.opacity);return k*De+d*ot+k*lt+d*Rt+k*Fe+d*Ht+k*Nt+d}const Br=0;class nn{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,k,I,D,q){const J=this._bucketParts;for(;this._currentTileIndex<d.length;)if(k.getBucketParts(J,D,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,q())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,J.sort((oe,se)=>oe.sortKey-se.sortKey));this._currentPartIndex<J.length;)if(k.placeLayerBucketPart(J[this._currentPartIndex],this._seenCrossTileIDs,I),this._currentPartIndex++,q())return!0;return!1}}class Fr{constructor(d,k,I,D,q,J,oe,se){this.placement=new we(d,k,J,oe,se),this._currentPlacementIndex=I.length-1,this._forceFullPlacement=D,this._showCollisionBoxes=q,this._done=!1}isDone(){return this._done}continuePlacement(d,k,I){const D=s.exported.now(),q=()=>{const J=s.exported.now()-D;return!this._forceFullPlacement&&J>2};for(;this._currentPlacementIndex>=0;){const J=k[d[this._currentPlacementIndex]],oe=this.placement.collisionIndex.transform.zoom;if(J.type==="symbol"&&(!J.minzoom||J.minzoom<=oe)&&(!J.maxzoom||J.maxzoom>oe)){if(this._inProgressLayer||(this._inProgressLayer=new nn(J)),this._inProgressLayer.continuePlacement(I[J.source],this.placement,this._showCollisionBoxes,J,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Hn=512/s.EXTENT/2;class Yn{constructor(d,k,I){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=I;for(let D=0;D<k.length;D++){const q=k.get(D),J=q.key;this.indexedSymbolInstances[J]||(this.indexedSymbolInstances[J]=[]),this.indexedSymbolInstances[J].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,d)})}}getScaledCoordinates(d,k){const I=Hn/Math.pow(2,k.canonical.z-this.tileID.canonical.z);return{x:Math.floor((k.canonical.x*s.EXTENT+d.anchorX)*I),y:Math.floor((k.canonical.y*s.EXTENT+d.anchorY)*I)}}findMatches(d,k,I){const D=this.tileID.canonical.z<k.canonical.z?1:Math.pow(2,this.tileID.canonical.z-k.canonical.z);for(let q=0;q<d.length;q++){const J=d.get(q);if(J.crossTileID)continue;const oe=this.indexedSymbolInstances[J.key];if(!oe)continue;const se=this.getScaledCoordinates(J,k);for(const ge of oe)if(Math.abs(ge.coord.x-se.x)<=D&&Math.abs(ge.coord.y-se.y)<=D&&!I[ge.crossTileID]){I[ge.crossTileID]=!0,J.crossTileID=ge.crossTileID;break}}}}class sn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const k=Math.round((d-this.lng)/360);if(k!==0)for(const I in this.indexes){const D=this.indexes[I],q={};for(const J in D){const oe=D[J];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+k),q[oe.tileID.key]=oe}this.indexes[I]=q}this.lng=d}addBucket(d,k,I){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===k.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let q=0;q<k.symbolInstances.length;q++)k.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const D=this.usedCrossTileIDs[d.overscaledZ];for(const q in this.indexes){const J=this.indexes[q];if(Number(q)>d.overscaledZ)for(const oe in J){const se=J[oe];se.tileID.isChildOf(d)&&se.findMatches(k.symbolInstances,d,D)}else{const oe=J[d.scaledTo(Number(q)).key];oe&&oe.findMatches(k.symbolInstances,d,D)}}for(let q=0;q<k.symbolInstances.length;q++){const J=k.symbolInstances.get(q);J.crossTileID||(J.crossTileID=I.generate(),D[J.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Yn(d,k.symbolInstances,k.bucketInstanceId),!0}removeBucketCrossTileIDs(d,k){for(const I in k.indexedSymbolInstances)for(const D of k.indexedSymbolInstances[I])delete this.usedCrossTileIDs[d][D.crossTileID]}removeStaleBuckets(d){let k=!1;for(const I in this.indexes){const D=this.indexes[I];for(const q in D)d[D[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,D[q]),delete D[q],k=!0)}return k}}class Ai{constructor(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,k,I){let D=this.layerIndexes[d.id];D===void 0&&(D=this.layerIndexes[d.id]=new yi);let q=!1;const J={};D.handleWrapJump(I);for(const oe of k){const se=oe.getBucket(d);se&&d.id===se.layerIds[0]&&(se.bucketInstanceId||(se.bucketInstanceId=++this.maxBucketInstanceId),D.addBucket(oe.tileID,se,this.crossTileIDs)&&(q=!0),J[se.bucketInstanceId]=!0)}return D.removeStaleBuckets(J)&&(q=!0),q}pruneUnusedLayers(d){const k={};d.forEach(I=>{k[I]=!0});for(const I in this.layerIndexes)k[I]||delete this.layerIndexes[I]}}var Yi=s.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Ii extends s.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const k=this._tiles[d];k.textures.forEach(I=>I.destroy()),k.textures=[]}}update(d,k){this.sourceCache.update(d,k),this._renderableTilesKeys=[];for(const I of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:k}))this._renderableTilesKeys.push(I.key),this._tiles[I.key]||(I.posMatrix=new Float64Array(16),s.ortho(I.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),this._tiles[I.key]=new Et(I,this.tileSize))}removeOutdated(d){const k={};this.renderHistory=this.renderHistory.filter((I,D)=>this.renderHistory.indexOf(I)===D).slice(0,this.renderHistorySize);for(const I of this._renderableTilesKeys)k[I]=!0;for(const I of this.renderHistory)k[I]=!0;for(const I in this._tiles)k[I]||(this._tiles[I].clearTextures(d),delete this._tiles[I])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const k={};for(const I of this._renderableTilesKeys){const D=this._tiles[I].tileID;if(D.canonical.equals(d.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16),s.ortho(q.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),k[I]=q}else if(D.canonical.isChildOf(d.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16);const J=D.canonical.z-d.canonical.z,oe=D.canonical.x-(D.canonical.x>>J<<J),se=D.canonical.y-(D.canonical.y>>J<<J),ge=s.EXTENT>>J;s.ortho(q.posMatrix,0,ge,0,ge,0,1),s.translate(q.posMatrix,q.posMatrix,[-oe*ge,-se*ge,0]),k[I]=q}else if(d.canonical.isChildOf(D.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16);const J=d.canonical.z-D.canonical.z,oe=d.canonical.x-(d.canonical.x>>J<<J),se=d.canonical.y-(d.canonical.y>>J<<J),ge=s.EXTENT>>J;s.ortho(q.posMatrix,0,s.EXTENT,0,s.EXTENT,0,1),s.translate(q.posMatrix,q.posMatrix,[oe*ge,se*ge,0]),s.scale(q.posMatrix,q.posMatrix,[1/2**J,1/2**J,0]),k[I]=q}}return k}getSourceTile(d,k){const I=this.sourceCache._source;let D=d.overscaledZ-this.deltaZoom;if(D>I.maxzoom&&(D=I.maxzoom),D<I.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(D).key);let q=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!q||!q.dem)&&k)for(;D>=I.minzoom&&(!q||!q.dem);)q=this.sourceCache.getTileByID(d.scaledTo(D--).key);return q}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(k=>k.timeLoaded>=d)}}class Vi{constructor(d,k,I){this.style=d,this.sourceCache=new Ii(k),this.options=I,this.exaggeration=typeof I.exaggeration=="number"?I.exaggeration:1,this.elevationOffset=typeof I.elevationOffset=="number"?I.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,k,I,D=s.EXTENT){if(!(k>=0&&k<D&&I>=0&&I<D))return this.elevationOffset;let q=0;const J=this.getTerrainData(d);if(J.tile&&J.tile.dem){const oe=s.transformMat4$1([],[k/D*s.EXTENT,I/D*s.EXTENT],J.u_terrain_matrix),se=[oe[0]*J.tile.dem.dim,oe[1]*J.tile.dem.dim],ge=[Math.floor(se[0]),Math.floor(se[1])],Se=J.tile.dem.get(ge[0],ge[1]),Ue=J.tile.dem.get(ge[0],ge[1]+1),Je=J.tile.dem.get(ge[0]+1,ge[1]),St=J.tile.dem.get(ge[0]+1,ge[1]+1);q=s.number(s.number(Se,Ue,se[0]-ge[0]),s.number(Je,St,se[0]-ge[0]),se[1]-ge[1])}return q}rememberForRerender(d,k){for(const I in this.sourceCache._tiles){const D=this.sourceCache._tiles[I];(D.tileID.equals(k)||D.tileID.isChildOf(k))&&(d===this.sourceCache.sourceCache.id&&(D.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][D.tileID.key]=!0)}}needsRerender(d,k){return this._rerender[d]&&this._rerender[d][k.key]}clearRerenderCache(){this._rerender={}}getElevation(d,k,I,D=s.EXTENT){return(this.getDEMElevation(d,k,I,D)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const D=this.style.map.painter.context,q=new s.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new B(D,q,D.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new B(D,new s.RGBAImage({width:1,height:1}),D.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.identity([])}const k=this.sourceCache.getSourceTile(d,!0);if(k&&k.dem&&(!k.demTexture||k.needsTerrainPrepare)){const D=this.style.map.painter.context;k.demTexture=this.style.map.painter.getTileTexture(k.dem.stride),k.demTexture?k.demTexture.update(k.dem.getPixels(),{premultiply:!1}):k.demTexture=new B(D,k.dem.getPixels(),D.gl.RGBA,{premultiply:!1}),k.demTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),k.needsTerrainPrepare=!1}const I=k&&k+k.tileID.key+d.key;if(I&&!this._demMatrixCache[I]){const D=this.sourceCache.sourceCache._source.maxzoom;let q=d.canonical.z-k.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=D?q=d.canonical.z-D:s.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const J=d.canonical.x-(d.canonical.x>>q<<q),oe=d.canonical.y-(d.canonical.y>>q<<q),se=s.fromScaling(new Float64Array(16),[1/(s.EXTENT<<q),1/(s.EXTENT<<q),0]);s.translate(se,se,[J*s.EXTENT,oe*s.EXTENT,0]),this._demMatrixCache[d.key]={matrix:se,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:k&&k.dem&&k.dem.dim||1,u_terrain_matrix:I?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:k&&k.dem&&k.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(k&&k.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:k}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const k=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(k,k,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,k,k))}return this._rttFramebuffer}getFramebuffer(d){const k=this.style.map.painter,I=k.width/devicePixelRatio,D=k.height/devicePixelRatio;return!this._fbo||this._fbo.width===I&&this._fbo.height===D||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new B(k.context,{width:I,height:D,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new B(k.context,{width:I,height:D,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=k.context.createFramebuffer(I,D,!0),this._fbo.depthAttachment.set(k.context.createRenderbuffer(k.context.gl.DEPTH_COMPONENT16,I,D))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const k=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let q=0,J=0;q<this._coordsTextureSize;q++)for(let oe=0;oe<this._coordsTextureSize;oe++,J+=4)k[J+0]=255&oe,k[J+1]=255&q,k[J+2]=oe>>8<<4|q>>8,k[J+3]=0;const I=new s.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(k.buffer)),D=new B(d,I,d.gl.RGBA,{premultiply:!1});return D.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=D,D}pointCoordinate(d){const k=new Uint8Array(4),I=this.style.map.painter,D=I.context,q=D.gl;D.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),q.readPixels(d.x,I.height/devicePixelRatio-d.y-1,1,1,q.RGBA,q.UNSIGNED_BYTE,k),D.bindFramebuffer.set(null);const J=k[0]+(k[2]>>4<<8),oe=k[1]+((15&k[2])<<8),se=this.coordsIndex[255-k[3]],ge=se&&this.sourceCache.getTileByID(se);if(!ge)return null;const Se=this._coordsTextureSize,Ue=(1<<ge.tileID.canonical.z)*Se;return new s.MercatorCoordinate((ge.tileID.canonical.x*Se+J)/Ue,(ge.tileID.canonical.y*Se+oe)/Ue,this.getElevation(ge.tileID,J,oe,Se))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,k=new s.PosArray,I=new s.TriangleIndexArray,D=this.meshSize,q=s.EXTENT/D,J=D*D;for(let oe=0;oe<=D;oe++)for(let se=0;se<=D;se++)k.emplaceBack(se*q,oe*q);for(let oe=0;oe<J;oe+=D+1)for(let se=0;se<D;se++)I.emplaceBack(se+oe,D+se+oe+1,D+se+oe+2),I.emplaceBack(se+oe,D+se+oe+2,se+oe+1);return this._mesh={indexBuffer:d.createIndexBuffer(I),vertexBuffer:d.createVertexBuffer(k,Yi.members),segments:s.SegmentVector.simpleSegment(0,0,k.length,I.length)},this._mesh}getMinMaxElevation(d){const k=this.getTerrainData(d).tile,I={minElevation:null,maxElevation:null};return k&&k.dem&&(I.minElevation=(k.dem.min+this.elevationOffset)*this.exaggeration,I.maxElevation=(k.dem.max+this.elevationOffset)*this.exaggeration),I}}const io=(M,d)=>s.emitValidationErrors(M,d&&d.filter(k=>k.identifier!=="source.canvas")),ko=s.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jo=s.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),So=function(){const M={},d=s.spec.$version;for(const k in s.spec.$root){const I=s.spec.$root[k];if(I.required){let D=null;D=k==="version"?d:I.type==="array"?[]:{},D!=null&&(M[k]=D)}}return M}();class Ko extends s.Evented{constructor(d,k={}){super(),this.map=d,this.dispatcher=new Ve(pt(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new le(d._requestManager,k.localIdeographFontFamily),this.lineAtlas=new Ne(256,512),this.crossTileSymbolIndex=new Ai,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const I=this;this._rtlTextPluginCallback=Ko.registerForPluginStateChange(D=>{I.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(q,J)=>{if(s.triggerPluginCompletionEvent(q),J&&J.every(oe=>oe))for(const oe in I.sourceCaches)I.sourceCaches[oe].reload()})}),this.on("data",D=>{if(D.dataType!=="source"||D.sourceDataType!=="metadata")return;const q=this.sourceCaches[D.sourceId];if(!q)return;const J=q.getSource();if(J&&J.vectorLayerIds)for(const oe in this._layers){const se=this._layers[oe];se.source===J.id&&this._validateLayer(se)}})}loadURL(d,k={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const I=typeof k.validate!="boolean"||k.validate,D=this.map._requestManager.transformRequest(d,s.ResourceType.Style);this._request=s.getJSON(D,(q,J)=>{this._request=null,q?this.fire(new s.ErrorEvent(q)):J&&this._load(J,I)})}loadJSON(d,k={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(d,k.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(So,!1)}_load(d,k){if(k&&io(this,s.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const D in d.sources)this.addSource(D,d.sources[D],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const I=ln(this.stylesheet.layers);this._order=I.map(D=>D.id),this._layers={},this._serializedLayers={};for(let D of I)D=s.createStyleLayer(D),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new pe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(k,I,D,q){let J,oe,se;const ge=D>1?"@2x":"";let Se=s.getJSON(I.transformRequest(I.normalizeSpriteURL(k,ge,".json"),s.ResourceType.SpriteJSON),(St,vt)=>{Se=null,se||(se=St,J=vt,Je())}),Ue=s.getImage(I.transformRequest(I.normalizeSpriteURL(k,ge,".png"),s.ResourceType.SpriteImage),(St,vt)=>{Ue=null,se||(se=St,oe=vt,Je())});function Je(){if(se)q(se);else if(J&&oe){const St=s.exported.getImageData(oe),vt={};for(const xt in J){const{width:tr,height:cr,x:Ar,y:Dt,sdf:Lr,pixelRatio:Ir,stretchX:Zr,stretchY:Gr,content:mn}=J[xt],qr=new s.RGBAImage({width:tr,height:cr});s.RGBAImage.copy(St,qr,{x:Ar,y:Dt},{x:0,y:0},{width:tr,height:cr}),vt[xt]={data:qr,pixelRatio:Ir,sdf:Lr,stretchX:Zr,stretchY:Gr,content:mn}}q(null,vt)}}return{cancel(){Se&&(Se.cancel(),Se=null),Ue&&(Ue.cancel(),Ue=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(k,I)=>{if(this._spriteRequest=null,k)this.fire(new s.ErrorEvent(k));else if(I)for(const D in I)this.imageManager.addImage(D,I[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(d){const k=this.sourceCaches[d.source];if(!k)return;const I=d.sourceLayer;if(!I)return;const D=k.getSource();(D.type==="geojson"||D.vectorLayerIds&&D.vectorLayerIds.indexOf(I)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${I}" does not exist on source "${D.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const k=[];for(const I of d){const D=this._layers[I];D.type!=="custom"&&k.push(D.serialize())}return k}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const k=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);(D.length||q.length)&&this._updateWorkerLayers(D,q);for(const J in this._updatedSources){const oe=this._updatedSources[J];if(oe==="reload")this._reloadSource(J);else{if(oe!=="clear")throw new Error(`Invalid action ${oe}`);this._clearSource(J)}}this._updateTilesForChangedImages();for(const J in this._updatedPaintProps)this._layers[J].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const I={};for(const D in this.sourceCaches){const q=this.sourceCaches[D];I[D]=q.used,q.used=!1}for(const D of this._order){const q=this._layers[D];q.recalculate(d,this._availableImages),!q.isHidden(d.zoom)&&q.source&&(this.sourceCaches[q.source].used=!0)}for(const D in I){const q=this.sourceCaches[D];I[D]!==q.used&&q.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:D}))}this.light.recalculate(d),this.z=d.zoom,k&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const k in this.sourceCaches)this.sourceCaches[k].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,k){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:k})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const k=this.sourceCaches[d.source];if(!k)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new Vi(this,k,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=I=>{I.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=I=>{I.tile&&(I.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(I.sourceId,I.tile.tileID)):I.source.type==="geojson"&&this.terrain.rememberForRerender(I.sourceId,I.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new s.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),io(this,s.validateStyle(d)))return!1;(d=s.clone$1(d)).layers=ln(d.layers);const k=function(D,q){if(!D)return[{command:Wt.setStyle,args:[q]}];let J=[];try{if(!E(D.version,q.version))return[{command:Wt.setStyle,args:[q]}];E(D.center,q.center)||J.push({command:Wt.setCenter,args:[q.center]}),E(D.zoom,q.zoom)||J.push({command:Wt.setZoom,args:[q.zoom]}),E(D.bearing,q.bearing)||J.push({command:Wt.setBearing,args:[q.bearing]}),E(D.pitch,q.pitch)||J.push({command:Wt.setPitch,args:[q.pitch]}),E(D.sprite,q.sprite)||J.push({command:Wt.setSprite,args:[q.sprite]}),E(D.glyphs,q.glyphs)||J.push({command:Wt.setGlyphs,args:[q.glyphs]}),E(D.transition,q.transition)||J.push({command:Wt.setTransition,args:[q.transition]}),E(D.light,q.light)||J.push({command:Wt.setLight,args:[q.light]});const oe={},se=[];(function(Se,Ue,Je,St){let vt;for(vt in Ue=Ue||{},Se=Se||{})Object.prototype.hasOwnProperty.call(Se,vt)&&(Object.prototype.hasOwnProperty.call(Ue,vt)||dn(vt,Je,St));for(vt in Ue)Object.prototype.hasOwnProperty.call(Ue,vt)&&(Object.prototype.hasOwnProperty.call(Se,vt)?E(Se[vt],Ue[vt])||(Se[vt].type==="geojson"&&Ue[vt].type==="geojson"&&Bn(Se,Ue,vt)?Je.push({command:Wt.setGeoJSONSourceData,args:[vt,Ue[vt].data]}):tn(vt,Ue,Je,St)):Ur(vt,Ue,Je))})(D.sources,q.sources,se,oe);const ge=[];D.layers&&D.layers.forEach(Se=>{oe[Se.source]?J.push({command:Wt.removeLayer,args:[Se.id]}):ge.push(Se)}),J=J.concat(se),function(Se,Ue,Je){Ue=Ue||[];const St=(Se=Se||[]).map(ai),vt=Ue.map(ai),xt=Se.reduce(_i,{}),tr=Ue.reduce(_i,{}),cr=St.slice(),Ar=Object.create(null);let Dt,Lr,Ir,Zr,Gr,mn,qr;for(Dt=0,Lr=0;Dt<St.length;Dt++)Ir=St[Dt],Object.prototype.hasOwnProperty.call(tr,Ir)?Lr++:(Je.push({command:Wt.removeLayer,args:[Ir]}),cr.splice(cr.indexOf(Ir,Lr),1));for(Dt=0,Lr=0;Dt<vt.length;Dt++)Ir=vt[vt.length-1-Dt],cr[cr.length-1-Dt]!==Ir&&(Object.prototype.hasOwnProperty.call(xt,Ir)?(Je.push({command:Wt.removeLayer,args:[Ir]}),cr.splice(cr.lastIndexOf(Ir,cr.length-Lr),1)):Lr++,mn=cr[cr.length-Dt],Je.push({command:Wt.addLayer,args:[tr[Ir],mn]}),cr.splice(cr.length-Dt,0,Ir),Ar[Ir]=!0);for(Dt=0;Dt<vt.length;Dt++)if(Ir=vt[Dt],Zr=xt[Ir],Gr=tr[Ir],!Ar[Ir]&&!E(Zr,Gr))if(E(Zr.source,Gr.source)&&E(Zr["source-layer"],Gr["source-layer"])&&E(Zr.type,Gr.type)){for(qr in Jn(Zr.layout,Gr.layout,Je,Ir,null,Wt.setLayoutProperty),Jn(Zr.paint,Gr.paint,Je,Ir,null,Wt.setPaintProperty),E(Zr.filter,Gr.filter)||Je.push({command:Wt.setFilter,args:[Ir,Gr.filter]}),E(Zr.minzoom,Gr.minzoom)&&E(Zr.maxzoom,Gr.maxzoom)||Je.push({command:Wt.setLayerZoomRange,args:[Ir,Gr.minzoom,Gr.maxzoom]}),Zr)Object.prototype.hasOwnProperty.call(Zr,qr)&&qr!=="layout"&&qr!=="paint"&&qr!=="filter"&&qr!=="metadata"&&qr!=="minzoom"&&qr!=="maxzoom"&&(qr.indexOf("paint.")===0?Jn(Zr[qr],Gr[qr],Je,Ir,qr.slice(6),Wt.setPaintProperty):E(Zr[qr],Gr[qr])||Je.push({command:Wt.setLayerProperty,args:[Ir,qr,Gr[qr]]}));for(qr in Gr)Object.prototype.hasOwnProperty.call(Gr,qr)&&!Object.prototype.hasOwnProperty.call(Zr,qr)&&qr!=="layout"&&qr!=="paint"&&qr!=="filter"&&qr!=="metadata"&&qr!=="minzoom"&&qr!=="maxzoom"&&(qr.indexOf("paint.")===0?Jn(Zr[qr],Gr[qr],Je,Ir,qr.slice(6),Wt.setPaintProperty):E(Zr[qr],Gr[qr])||Je.push({command:Wt.setLayerProperty,args:[Ir,qr,Gr[qr]]}))}else Je.push({command:Wt.removeLayer,args:[Ir]}),mn=cr[cr.lastIndexOf(Ir)+1],Je.push({command:Wt.addLayer,args:[Gr,mn]})}(ge,q.layers,J)}catch(oe){console.warn("Unable to compute style diff:",oe),J=[{command:Wt.setStyle,args:[q]}]}return J}(this.serialize(),d).filter(D=>!(D.command in Jo));if(k.length===0)return!1;const I=k.filter(D=>!(D.command in ko));if(I.length>0)throw new Error(`Unimplemented: ${I.map(D=>D.command).join(", ")}.`);return k.forEach(D=>{D.command!=="setTransition"&&this[D.command].apply(this,D.args)}),this.stylesheet=d,!0}addImage(d,k){if(this.getImage(d))return this.fire(new s.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,k),this._afterImageUpdated(d)}updateImage(d,k){this.imageManager.updateImage(d,k)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new s.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,k,I={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!k.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(k).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(k.type)>=0&&this._validate(s.validateStyle.source,`sources.${d}`,k,null,I))return;this.map&&this.map._collectResourceTiming&&(k.collectResourceTiming=!0);const D=this.sourceCaches[d]=new $t(d,k,this.dispatcher);D.style=this,D.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:D.serialize(),sourceId:d})),D.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const I in this._layers)if(this._layers[I].source===d)return this.fire(new s.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${I}" is using it.`)));const k=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],k.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),k.setEventedParent(null),k.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,k){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const I=this.sourceCaches[d].getSource();if(I.type!=="geojson")throw new Error(`geojsonSource.type is ${I.type}, which is !== 'geojson`);I.setData(k),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,k,I={}){this._checkLoaded();const D=d.id;if(this.getLayer(D))return void this.fire(new s.ErrorEvent(new Error(`Layer "${D}" already exists on this map.`)));let q;if(d.type==="custom"){if(io(this,s.validateCustomStyleLayer(d)))return;q=s.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(D,d.source),d=s.clone$1(d),d=s.extend(d,{source:D})),this._validate(s.validateStyle.layer,`layers.${D}`,d,{arrayIndex:-1},I))return;q=s.createStyleLayer(d),this._validateLayer(q),q.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[q.id]=q.serialize()}const J=k?this._order.indexOf(k):this._order.length;if(k&&J===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${D}" before non-existing layer "${k}".`)));else{if(this._order.splice(J,0,D),this._layerOrderChanged=!0,this._layers[D]=q,this._removedLayers[D]&&q.source&&q.type!=="custom"){const oe=this._removedLayers[D];delete this._removedLayers[D],oe.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map)}}moveLayer(d,k){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new s.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===k)return;const I=this._order.indexOf(d);this._order.splice(I,1);const D=k?this._order.indexOf(k):this._order.length;k&&D===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${k}".`))):(this._order.splice(D,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const k=this._layers[d];if(!k)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));k.setEventedParent(null);const I=this._order.indexOf(d);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=k,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],k.onRemove&&k.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,k,I){this._checkLoaded();const D=this.getLayer(d);D?D.minzoom===k&&D.maxzoom===I||(k!=null&&(D.minzoom=k),I!=null&&(D.maxzoom=I),this._updateLayer(D)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,k,I={}){this._checkLoaded();const D=this.getLayer(d);if(D){if(!E(D.filter,k))return k==null?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(s.validateStyle.filter,`layers.${D.id}.filter`,k,null,I)||(D.filter=s.clone$1(k),this._updateLayer(D)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return s.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,k,I,D={}){this._checkLoaded();const q=this.getLayer(d);q?E(q.getLayoutProperty(k),I)||(q.setLayoutProperty(k,I,D),this._updateLayer(q)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,k){const I=this.getLayer(d);if(I)return I.getLayoutProperty(k);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,k,I,D={}){this._checkLoaded();const q=this.getLayer(d);q?E(q.getPaintProperty(k),I)||(q.setPaintProperty(k,I,D)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,k){return this.getLayer(d).getPaintProperty(k)}setFeatureState(d,k){this._checkLoaded();const I=d.source,D=d.sourceLayer,q=this.sourceCaches[I];if(q===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const J=q.getSource().type;J==="geojson"&&D?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):J!=="vector"||D?(d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),q.setFeatureState(D,d.id,k)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,k){this._checkLoaded();const I=d.source,D=this.sourceCaches[I];if(D===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const q=D.getSource().type,J=q==="vector"?d.sourceLayer:void 0;q!=="vector"||J?k&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):D.removeFeatureState(J,d.id,k):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const k=d.source,I=d.sourceLayer,D=this.sourceCaches[k];if(D!==void 0)return D.getSource().type!=="vector"||I?(d.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),D.getFeatureState(I,d.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const k=J=>this._layers[J].type==="fill-extrusion",I={},D=[];for(let J=this._order.length-1;J>=0;J--){const oe=this._order[J];if(k(oe)){I[oe]=J;for(const se of d){const ge=se[oe];if(ge)for(const Se of ge)D.push(Se)}}}D.sort((J,oe)=>oe.intersectionZ-J.intersectionZ);const q=[];for(let J=this._order.length-1;J>=0;J--){const oe=this._order[J];if(k(oe))for(let se=D.length-1;se>=0;se--){const ge=D[se].feature;if(I[ge.layer.id]<J)break;q.push(ge),D.pop()}else for(const se of d){const ge=se[oe];if(ge)for(const Se of ge)q.push(Se.feature)}}return q}queryRenderedFeatures(d,k,I){k&&k.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",k.filter,null,k);const D={};if(k&&k.layers){if(!Array.isArray(k.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const J of k.layers){const oe=this._layers[J];if(!oe)return this.fire(new s.ErrorEvent(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];D[oe.source]=!0}}const q=[];k.availableImages=this._availableImages;for(const J in this.sourceCaches)k.layers&&!D[J]||q.push(Pe(this.sourceCaches[J],this._layers,this._serializedLayers,d,k,I));return this.placement&&q.push(function(J,oe,se,ge,Se,Ue,Je){const St={},vt=Ue.queryRenderedSymbols(ge),xt=[];for(const tr of Object.keys(vt).map(Number))xt.push(Je[tr]);xt.sort(dt);for(const tr of xt){const cr=tr.featureIndex.lookupSymbolFeatures(vt[tr.bucketInstanceId],oe,tr.bucketIndex,tr.sourceLayerIndex,Se.filter,Se.layers,Se.availableImages,J);for(const Ar in cr){const Dt=St[Ar]=St[Ar]||[],Lr=cr[Ar];Lr.sort((Ir,Zr)=>{const Gr=tr.featureSortOrder;if(Gr){const mn=Gr.indexOf(Ir.featureIndex);return Gr.indexOf(Zr.featureIndex)-mn}return Zr.featureIndex-Ir.featureIndex});for(const Ir of Lr)Dt.push(Ir)}}for(const tr in St)St[tr].forEach(cr=>{const Ar=cr.feature,Dt=se[J[tr].source].getFeatureState(Ar.layer["source-layer"],Ar.id);Ar.source=Ar.layer.source,Ar.layer["source-layer"]&&(Ar.sourceLayer=Ar.layer["source-layer"]),Ar.state=Dt});return St}(this._layers,this._serializedLayers,this.sourceCaches,d,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(q)}querySourceFeatures(d,k){k&&k.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",k.filter,null,k);const I=this.sourceCaches[d];return I?function(D,q){const J=D.getRenderableIds().map(ge=>D.getTileByID(ge)),oe=[],se={};for(let ge=0;ge<J.length;ge++){const Se=J[ge],Ue=Se.tileID.canonical.key;se[Ue]||(se[Ue]=!0,Se.querySourceFeatures(oe,q))}return oe}(I,k):[]}addSourceType(d,k,I){return Ko.getSourceType(d)?I(new Error(`A source type called "${d}" already exists.`)):(Ko.setSourceType(d,k),k.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:k.workerSourceURL},I):I(null,null))}getLight(){return this.light.getLight()}setLight(d,k={}){this._checkLoaded();const I=this.light.getLight();let D=!1;for(const J in d)if(!E(d[J],I[J])){D=!0;break}if(!D)return;const q={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,k),this.light.updateTransitions(q)}_validate(d,k,I,D,q={}){return(!q||q.validate!==!1)&&io(this,d.call(s.validateStyle,s.extend({key:k,style:this.serialize(),value:I,styleSpec:s.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const k=this.sourceCaches[d];k.setEventedParent(null),k.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const k in this.sourceCaches)this.sourceCaches[k].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,k,I,D,q=!1){let J=!1,oe=!1;const se={};for(const ge of this._order){const Se=this._layers[ge];if(Se.type!=="symbol")continue;if(!se[Se.source]){const Je=this.sourceCaches[Se.source];se[Se.source]=Je.getRenderableIds(!0).map(St=>Je.getTileByID(St)).sort((St,vt)=>vt.tileID.overscaledZ-St.tileID.overscaledZ||(St.tileID.isLessThan(vt.tileID)?-1:1))}const Ue=this.crossTileSymbolIndex.addLayer(Se,se[Se.source],d.center.lng);J=J||Ue}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((q=q||this._layerOrderChanged||I===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),d.zoom))&&(this.pauseablePlacement=new Fr(d,this.terrain,this._order,q,k,I,D,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,se),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),oe=!0),J&&this.pauseablePlacement.placement.setStale()),oe||J)for(const ge of this._order){const Se=this._layers[ge];Se.type==="symbol"&&this.placement.updateLayerOpacities(Se,se[Se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,k,I){this.imageManager.getImages(k.icons,I),this._updateTilesForChangedImages();const D=this.sourceCaches[k.source];D&&D.setDependencies(k.tileID.key,k.type,k.icons)}getGlyphs(d,k,I){this.glyphManager.getGlyphs(k.stacks,I)}getResource(d,k,I){return s.makeRequest(k,I)}}Ko.getSourceType=function(M){return ke[M]},Ko.setSourceType=function(M,d){ke[M]=d},Ko.registerForPluginStateChange=s.registerForPluginStateChange;var Gl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const na={prelude:Ao(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ao(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ao(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ao(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ao("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ao(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ao(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ao("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ao("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ao("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ao(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ao(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ao(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ao(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ao(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ao(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ao(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ao(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ao(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ao(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ao(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ao(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ao(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ao("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Gl),terrainDepth:Ao("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Gl),terrainCoords:Ao("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Gl)};function Ao(M,d){const k=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=d.match(/attribute ([\w]+) ([\w]+)/g),D=M.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=q?q.concat(D):D,oe={};return{fragmentSource:M=M.replace(k,(se,ge,Se,Ue,Je)=>(oe[Je]=!0,ge==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
varying ${Se} ${Ue} ${Je};
#else
uniform ${Se} ${Ue} u_${Je};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Je}
    ${Se} ${Ue} ${Je} = u_${Je};
#endif
`)),vertexSource:d=d.replace(k,(se,ge,Se,Ue,Je)=>{const St=Ue==="float"?"vec2":"vec4",vt=Je.match(/color/)?"color":St;return oe[Je]?ge==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${Se} ${St} a_${Je};
varying ${Se} ${Ue} ${Je};
#else
uniform ${Se} ${Ue} u_${Je};
#endif
`:vt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = a_${Je};
#else
    ${Se} ${Ue} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = unpack_mix_${vt}(a_${Je}, u_${Je}_t);
#else
    ${Se} ${Ue} ${Je} = u_${Je};
#endif
`:ge==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${Se} ${St} a_${Je};
#else
uniform ${Se} ${Ue} u_${Je};
#endif
`:vt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${Se} ${Ue} ${Je} = a_${Je};
#else
    ${Se} ${Ue} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${Se} ${Ue} ${Je} = unpack_mix_${vt}(a_${Je}, u_${Je}_t);
#else
    ${Se} ${Ue} ${Je} = u_${Je};
#endif
`}),staticAttributes:I,staticUniforms:J}}class _l{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,k,I,D,q,J,oe,se,ge){this.context=d;let Se=this.boundPaintVertexBuffers.length!==D.length;for(let Ue=0;!Se&&Ue<D.length;Ue++)this.boundPaintVertexBuffers[Ue]!==D[Ue]&&(Se=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===k&&this.boundLayoutVertexBuffer===I&&!Se&&this.boundIndexBuffer===q&&this.boundVertexOffset===J&&this.boundDynamicVertexBuffer===oe&&this.boundDynamicVertexBuffer2===se&&this.boundDynamicVertexBuffer3===ge?(d.bindVertexArrayOES.set(this.vao),oe&&oe.bind(),q&&q.dynamicDraw&&q.bind(),se&&se.bind(),ge&&ge.bind()):this.freshBind(k,I,D,q,J,oe,se,ge)}freshBind(d,k,I,D,q,J,oe,se){let ge;const Se=d.numAttributes,Ue=this.context,Je=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=d,this.boundLayoutVertexBuffer=k,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=D,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=J,this.boundDynamicVertexBuffer2=oe,this.boundDynamicVertexBuffer3=se;else{ge=Ue.currentNumAttributes||0;for(let St=Se;St<ge;St++)Je.disableVertexAttribArray(St)}k.enableAttributes(Je,d);for(const St of I)St.enableAttributes(Je,d);J&&J.enableAttributes(Je,d),oe&&oe.enableAttributes(Je,d),se&&se.enableAttributes(Je,d),k.bind(),k.setVertexAttribPointers(Je,d,q);for(const St of I)St.bind(),St.setVertexAttribPointers(Je,d,q);J&&(J.bind(),J.setVertexAttribPointers(Je,d,q)),D&&D.bind(),oe&&(oe.bind(),oe.setVertexAttribPointers(Je,d,q)),se&&(se.bind(),se.setVertexAttribPointers(Je,d,q)),Ue.currentNumAttributes=Se}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function bl(M){const d=[];for(let k=0;k<M.length;k++){if(M[k]===null)continue;const I=M[k].split(" ");d.push(I.pop())}return d}class vs{constructor(d,k,I,D,q,J,oe){const se=d.gl;this.program=se.createProgram();const ge=bl(I.staticAttributes),Se=D?D.getBinderAttributes():[],Ue=ge.concat(Se),Je=na.prelude.staticUniforms?bl(na.prelude.staticUniforms):[],St=I.staticUniforms?bl(I.staticUniforms):[],vt=D?D.getBinderUniforms():[],xt=Je.concat(St).concat(vt),tr=[];for(const Gr of xt)tr.indexOf(Gr)<0&&tr.push(Gr);const cr=D?D.defines():[];J&&cr.push("#define OVERDRAW_INSPECTOR;"),oe&&cr.push("#define TERRAIN3D;");const Ar=cr.concat(na.prelude.fragmentSource,I.fragmentSource).join(`
`),Dt=cr.concat(na.prelude.vertexSource,I.vertexSource).join(`
`),Lr=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(Lr,Ar),se.compileShader(Lr),se.attachShader(this.program,Lr);const Ir=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);se.shaderSource(Ir,Dt),se.compileShader(Ir),se.attachShader(this.program,Ir),this.attributes={};const Zr={};this.numAttributes=Ue.length;for(let Gr=0;Gr<this.numAttributes;Gr++)Ue[Gr]&&(se.bindAttribLocation(this.program,Gr,Ue[Gr]),this.attributes[Ue[Gr]]=Gr);se.linkProgram(this.program),se.deleteShader(Ir),se.deleteShader(Lr);for(let Gr=0;Gr<tr.length;Gr++){const mn=tr[Gr];if(mn&&!Zr[mn]){const qr=se.getUniformLocation(this.program,mn);qr&&(Zr[mn]=qr)}}this.fixedUniforms=q(d,Zr),this.terrainUniforms=((Gr,mn)=>({u_depth:new s.Uniform1i(Gr,mn.u_depth),u_terrain:new s.Uniform1i(Gr,mn.u_terrain),u_terrain_dim:new s.Uniform1f(Gr,mn.u_terrain_dim),u_terrain_matrix:new s.UniformMatrix4f(Gr,mn.u_terrain_matrix),u_terrain_unpack:new s.Uniform4f(Gr,mn.u_terrain_unpack),u_terrain_offset:new s.Uniform1f(Gr,mn.u_terrain_offset),u_terrain_exaggeration:new s.Uniform1f(Gr,mn.u_terrain_exaggeration)}))(d,Zr),this.binderUniforms=D?D.getUniforms(d,Zr):[]}draw(d,k,I,D,q,J,oe,se,ge,Se,Ue,Je,St,vt,xt,tr,cr,Ar){const Dt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(I),d.setStencilMode(D),d.setColorMode(q),d.setCullFace(J),se){d.activeTexture.set(Dt.TEXTURE2),Dt.bindTexture(Dt.TEXTURE_2D,se.depthTexture),d.activeTexture.set(Dt.TEXTURE3),Dt.bindTexture(Dt.TEXTURE_2D,se.texture);for(const Ir in this.terrainUniforms)this.terrainUniforms[Ir].set(se[Ir])}for(const Ir in this.fixedUniforms)this.fixedUniforms[Ir].set(oe[Ir]);xt&&xt.setUniforms(d,this.binderUniforms,St,{zoom:vt});let Lr=0;switch(k){case Dt.LINES:Lr=2;break;case Dt.TRIANGLES:Lr=3;break;case Dt.LINE_STRIP:Lr=1}for(const Ir of Je.get()){const Zr=Ir.vaos||(Ir.vaos={});(Zr[ge]||(Zr[ge]=new _l)).bind(d,this,Se,xt?xt.getPaintVertexBuffers():[],Ue,Ir.vertexOffset,tr,cr,Ar),Dt.drawElements(k,Ir.primitiveLength*Lr,Dt.UNSIGNED_SHORT,Ir.primitiveOffset*Lr*2)}}}function Hl(M,d,k){const I=1/yo(k,1,d.transform.tileZoom),D=Math.pow(2,k.tileID.overscaledZ),q=k.tileSize*Math.pow(2,d.transform.tileZoom)/D,J=q*(k.tileID.canonical.x+k.tileID.wrap*D),oe=q*k.tileID.canonical.y;return{u_image:0,u_texsize:k.imageAtlasTexture.size,u_scale:[I,M.fromScale,M.toScale],u_fade:M.t,u_pixel_coord_upper:[J>>16,oe>>16],u_pixel_coord_lower:[65535&J,65535&oe]}}const _s=(M,d,k,I)=>{const D=d.style.light,q=D.properties.get("position"),J=[q.x,q.y,q.z],oe=s.create$1();D.properties.get("anchor")==="viewport"&&s.fromRotation(oe,-d.transform.angle),s.transformMat3(J,J,oe);const se=D.properties.get("color");return{u_matrix:M,u_lightpos:J,u_lightintensity:D.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+k,u_opacity:I}},Vu=(M,d,k,I,D,q,J)=>s.extend(_s(M,d,k,I),Hl(q,d,J),{u_height_factor:-Math.pow(2,D.overscaledZ)/J.tileSize/8}),$a=M=>({u_matrix:M}),wl=(M,d,k,I)=>s.extend($a(M),Hl(k,d,I)),Wl=(M,d)=>({u_matrix:M,u_world:d}),$u=(M,d,k,I,D)=>s.extend(wl(M,d,k,I),{u_world:D}),Gu=(M,d,k,I)=>{const D=M.transform;let q,J;if(I.paint.get("circle-pitch-alignment")==="map"){const oe=yo(k,1,D.zoom);q=!0,J=[oe,oe]}else q=!1,J=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:M.translatePosMatrix(d.posMatrix,k,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+q,u_device_pixel_ratio:M.pixelRatio,u_extrude_scale:J}},nl=(M,d,k)=>{const I=yo(k,1,d.zoom),D=Math.pow(2,d.zoom-k.tileID.overscaledZ),q=k.tileID.overscaleFactor();return{u_matrix:M,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[d.pixelsToGLUnits[0]/(I*D),d.pixelsToGLUnits[1]/(I*D)],u_overscale_factor:q}},us=(M,d,k=1)=>({u_matrix:M,u_color:d,u_overlay:0,u_overlay_scale:k}),Ds=M=>({u_matrix:M}),xl=(M,d,k,I)=>({u_matrix:M,u_extrude_scale:yo(d,1,k),u_intensity:I});function gu(M,d){const k=Math.pow(2,d.canonical.z),I=d.canonical.y;return[new s.MercatorCoordinate(0,I/k).toLngLat().lat,new s.MercatorCoordinate(0,(I+1)/k).toLngLat().lat]}const kl=(M,d,k,I)=>{const D=M.transform;return{u_matrix:il(M,d,k,I),u_ratio:1/yo(d,1,D.zoom),u_device_pixel_ratio:M.pixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},yu=(M,d,k,I,D)=>s.extend(kl(M,d,k,D),{u_image:0,u_image_height:I}),bs=(M,d,k,I,D)=>{const q=M.transform,J=Oo(d,q);return{u_matrix:il(M,d,k,D),u_texsize:d.imageAtlasTexture.size,u_ratio:1/yo(d,1,q.zoom),u_device_pixel_ratio:M.pixelRatio,u_image:0,u_scale:[J,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},ws=(M,d,k,I,D,q)=>{const J=M.lineAtlas,oe=Oo(d,M.transform),se=k.layout.get("line-cap")==="round",ge=J.getDash(I.from,se),Se=J.getDash(I.to,se),Ue=ge.width*D.fromScale,Je=Se.width*D.toScale;return s.extend(kl(M,d,k,q),{u_patternscale_a:[oe/Ue,-ge.height/2],u_patternscale_b:[oe/Je,-Se.height/2],u_sdfgamma:J.width/(256*Math.min(Ue,Je)*M.pixelRatio)/2,u_image:0,u_tex_y_a:ge.y,u_tex_y_b:Se.y,u_mix:D.t})};function Oo(M,d){return 1/yo(M,1,d.tileZoom)}function il(M,d,k,I){return M.translatePosMatrix(I?I.posMatrix:d.tileID.posMatrix,d,k.paint.get("line-translate"),k.paint.get("line-translate-anchor"))}const R=(M,d,k,I,D)=>{return{u_matrix:M,u_tl_parent:d,u_scale_parent:k,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(J=D.paint.get("raster-saturation"),J>0?1-1/(1.001-J):-J),u_contrast_factor:(q=D.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:W(D.paint.get("raster-hue-rotate"))};var q,J};function W(M){M*=Math.PI/180;const d=Math.sin(M),k=Math.cos(M);return[(2*k+1)/3,(-Math.sqrt(3)*d-k+1)/3,(Math.sqrt(3)*d-k+1)/3]}const ae=(M,d,k,I,D,q,J,oe,se,ge)=>{const Se=D.transform;return{u_is_size_zoom_constant:+(M==="constant"||M==="source"),u_is_size_feature_constant:+(M==="constant"||M==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+k,u_aspect_ratio:Se.width/Se.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:J,u_coord_matrix:oe,u_is_text:+se,u_pitch_with_map:+I,u_texsize:ge,u_texture:0}},Ae=(M,d,k,I,D,q,J,oe,se,ge,Se)=>{const Ue=D.transform;return s.extend(ae(M,d,k,I,D,q,J,oe,se,ge),{u_gamma_scale:I?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:+Se})},Ye=(M,d,k,I,D,q,J,oe,se,ge)=>s.extend(Ae(M,d,k,I,D,q,J,oe,!0,se,!0),{u_texsize_icon:ge,u_texture_icon:1}),yt=(M,d,k)=>({u_matrix:M,u_opacity:d,u_color:k}),Mt=(M,d,k,I,D,q)=>s.extend(function(J,oe,se,ge){const Se=se.imageManager.getPattern(J.from.toString()),Ue=se.imageManager.getPattern(J.to.toString()),{width:Je,height:St}=se.imageManager.getPixelSize(),vt=Math.pow(2,ge.tileID.overscaledZ),xt=ge.tileSize*Math.pow(2,se.transform.tileZoom)/vt,tr=xt*(ge.tileID.canonical.x+ge.tileID.wrap*vt),cr=xt*ge.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Se.tl,u_pattern_br_a:Se.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[Je,St],u_mix:oe.t,u_pattern_size_a:Se.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:oe.fromScale,u_scale_b:oe.toScale,u_tile_units_to_pixels:1/yo(ge,1,se.transform.tileZoom),u_pixel_coord_upper:[tr>>16,cr>>16],u_pixel_coord_lower:[65535&tr,65535&cr]}}(I,q,k,D),{u_matrix:M,u_opacity:d}),Tt={fillExtrusion:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_lightpos:new s.Uniform3f(M,d.u_lightpos),u_lightintensity:new s.Uniform1f(M,d.u_lightintensity),u_lightcolor:new s.Uniform3f(M,d.u_lightcolor),u_vertical_gradient:new s.Uniform1f(M,d.u_vertical_gradient),u_opacity:new s.Uniform1f(M,d.u_opacity)}),fillExtrusionPattern:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_lightpos:new s.Uniform3f(M,d.u_lightpos),u_lightintensity:new s.Uniform1f(M,d.u_lightintensity),u_lightcolor:new s.Uniform3f(M,d.u_lightcolor),u_vertical_gradient:new s.Uniform1f(M,d.u_vertical_gradient),u_height_factor:new s.Uniform1f(M,d.u_height_factor),u_image:new s.Uniform1i(M,d.u_image),u_texsize:new s.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new s.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new s.Uniform3f(M,d.u_scale),u_fade:new s.Uniform1f(M,d.u_fade),u_opacity:new s.Uniform1f(M,d.u_opacity)}),fill:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix)}),fillPattern:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_image:new s.Uniform1i(M,d.u_image),u_texsize:new s.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new s.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new s.Uniform3f(M,d.u_scale),u_fade:new s.Uniform1f(M,d.u_fade)}),fillOutline:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_world:new s.Uniform2f(M,d.u_world)}),fillOutlinePattern:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_world:new s.Uniform2f(M,d.u_world),u_image:new s.Uniform1i(M,d.u_image),u_texsize:new s.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new s.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new s.Uniform3f(M,d.u_scale),u_fade:new s.Uniform1f(M,d.u_fade)}),circle:(M,d)=>({u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(M,d.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(M,d.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(M,d.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(M,d.u_matrix)}),collisionBox:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(M,d.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(M,d.u_extrude_scale),u_overscale_factor:new s.Uniform1f(M,d.u_overscale_factor)}),collisionCircle:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_inv_matrix:new s.UniformMatrix4f(M,d.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(M,d.u_viewport_size)}),debug:(M,d)=>({u_color:new s.UniformColor(M,d.u_color),u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_overlay:new s.Uniform1i(M,d.u_overlay),u_overlay_scale:new s.Uniform1f(M,d.u_overlay_scale)}),clippingMask:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix)}),heatmap:(M,d)=>({u_extrude_scale:new s.Uniform1f(M,d.u_extrude_scale),u_intensity:new s.Uniform1f(M,d.u_intensity),u_matrix:new s.UniformMatrix4f(M,d.u_matrix)}),heatmapTexture:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_world:new s.Uniform2f(M,d.u_world),u_image:new s.Uniform1i(M,d.u_image),u_color_ramp:new s.Uniform1i(M,d.u_color_ramp),u_opacity:new s.Uniform1f(M,d.u_opacity)}),hillshade:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_image:new s.Uniform1i(M,d.u_image),u_latrange:new s.Uniform2f(M,d.u_latrange),u_light:new s.Uniform2f(M,d.u_light),u_shadow:new s.UniformColor(M,d.u_shadow),u_highlight:new s.UniformColor(M,d.u_highlight),u_accent:new s.UniformColor(M,d.u_accent)}),hillshadePrepare:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_image:new s.Uniform1i(M,d.u_image),u_dimension:new s.Uniform2f(M,d.u_dimension),u_zoom:new s.Uniform1f(M,d.u_zoom),u_unpack:new s.Uniform4f(M,d.u_unpack)}),line:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_ratio:new s.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(M,d.u_units_to_pixels)}),lineGradient:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_ratio:new s.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(M,d.u_units_to_pixels),u_image:new s.Uniform1i(M,d.u_image),u_image_height:new s.Uniform1f(M,d.u_image_height)}),linePattern:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_texsize:new s.Uniform2f(M,d.u_texsize),u_ratio:new s.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_image:new s.Uniform1i(M,d.u_image),u_units_to_pixels:new s.Uniform2f(M,d.u_units_to_pixels),u_scale:new s.Uniform3f(M,d.u_scale),u_fade:new s.Uniform1f(M,d.u_fade)}),lineSDF:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_ratio:new s.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(M,d.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(M,d.u_patternscale_a),u_patternscale_b:new s.Uniform2f(M,d.u_patternscale_b),u_sdfgamma:new s.Uniform1f(M,d.u_sdfgamma),u_image:new s.Uniform1i(M,d.u_image),u_tex_y_a:new s.Uniform1f(M,d.u_tex_y_a),u_tex_y_b:new s.Uniform1f(M,d.u_tex_y_b),u_mix:new s.Uniform1f(M,d.u_mix)}),raster:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_tl_parent:new s.Uniform2f(M,d.u_tl_parent),u_scale_parent:new s.Uniform1f(M,d.u_scale_parent),u_buffer_scale:new s.Uniform1f(M,d.u_buffer_scale),u_fade_t:new s.Uniform1f(M,d.u_fade_t),u_opacity:new s.Uniform1f(M,d.u_opacity),u_image0:new s.Uniform1i(M,d.u_image0),u_image1:new s.Uniform1i(M,d.u_image1),u_brightness_low:new s.Uniform1f(M,d.u_brightness_low),u_brightness_high:new s.Uniform1f(M,d.u_brightness_high),u_saturation_factor:new s.Uniform1f(M,d.u_saturation_factor),u_contrast_factor:new s.Uniform1f(M,d.u_contrast_factor),u_spin_weights:new s.Uniform3f(M,d.u_spin_weights)}),symbolIcon:(M,d)=>({u_is_size_zoom_constant:new s.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new s.Uniform1f(M,d.u_size_t),u_size:new s.Uniform1f(M,d.u_size),u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new s.Uniform1f(M,d.u_pitch),u_rotate_symbol:new s.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new s.Uniform1f(M,d.u_fade_change),u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new s.Uniform1i(M,d.u_is_text),u_pitch_with_map:new s.Uniform1i(M,d.u_pitch_with_map),u_texsize:new s.Uniform2f(M,d.u_texsize),u_texture:new s.Uniform1i(M,d.u_texture)}),symbolSDF:(M,d)=>({u_is_size_zoom_constant:new s.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new s.Uniform1f(M,d.u_size_t),u_size:new s.Uniform1f(M,d.u_size),u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new s.Uniform1f(M,d.u_pitch),u_rotate_symbol:new s.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new s.Uniform1f(M,d.u_fade_change),u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new s.Uniform1i(M,d.u_is_text),u_pitch_with_map:new s.Uniform1i(M,d.u_pitch_with_map),u_texsize:new s.Uniform2f(M,d.u_texsize),u_texture:new s.Uniform1i(M,d.u_texture),u_gamma_scale:new s.Uniform1f(M,d.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(M,d.u_is_halo)}),symbolTextAndIcon:(M,d)=>({u_is_size_zoom_constant:new s.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new s.Uniform1f(M,d.u_size_t),u_size:new s.Uniform1f(M,d.u_size),u_camera_to_center_distance:new s.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new s.Uniform1f(M,d.u_pitch),u_rotate_symbol:new s.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new s.Uniform1f(M,d.u_fade_change),u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new s.Uniform1i(M,d.u_is_text),u_pitch_with_map:new s.Uniform1i(M,d.u_pitch_with_map),u_texsize:new s.Uniform2f(M,d.u_texsize),u_texsize_icon:new s.Uniform2f(M,d.u_texsize_icon),u_texture:new s.Uniform1i(M,d.u_texture),u_texture_icon:new s.Uniform1i(M,d.u_texture_icon),u_gamma_scale:new s.Uniform1f(M,d.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(M,d.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(M,d.u_is_halo)}),background:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_opacity:new s.Uniform1f(M,d.u_opacity),u_color:new s.UniformColor(M,d.u_color)}),backgroundPattern:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_opacity:new s.Uniform1f(M,d.u_opacity),u_image:new s.Uniform1i(M,d.u_image),u_pattern_tl_a:new s.Uniform2f(M,d.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(M,d.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(M,d.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(M,d.u_pattern_br_b),u_texsize:new s.Uniform2f(M,d.u_texsize),u_mix:new s.Uniform1f(M,d.u_mix),u_pattern_size_a:new s.Uniform2f(M,d.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(M,d.u_pattern_size_b),u_scale_a:new s.Uniform1f(M,d.u_scale_a),u_scale_b:new s.Uniform1f(M,d.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(M,d.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(M,d.u_tile_units_to_pixels)}),terrain:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_texture:new s.Uniform1i(M,d.u_texture)}),terrainDepth:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix)}),terrainCoords:(M,d)=>({u_matrix:new s.UniformMatrix4f(M,d.u_matrix),u_texture:new s.Uniform1i(M,d.u_texture),u_terrain_coords_id:new s.Uniform1f(M,d.u_terrain_coords_id)})};class wr{constructor(d,k,I){this.context=d;const D=d.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const k=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),k.bufferSubData(k.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const mr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vr{constructor(d,k,I,D){this.length=k.length,this.attributes=I,this.itemSize=k.bytesPerElement,this.dynamicDraw=D,this.context=d;const q=d.gl;this.buffer=q.createBuffer(),d.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const k=this.context.gl;this.bind(),k.bufferSubData(k.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,k){for(let I=0;I<this.attributes.length;I++){const D=k.attributes[this.attributes[I].name];D!==void 0&&d.enableVertexAttribArray(D)}}setVertexAttribPointers(d,k,I){for(let D=0;D<this.attributes.length;D++){const q=this.attributes[D],J=k.attributes[q.name];J!==void 0&&d.vertexAttribPointer(J,q.components,d[mr[q.type]],!1,this.itemSize,q.offset+this.itemSize*(I||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ar{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $r extends ar{getDefault(){return s.Color.transparent}set(d){const k=this.current;(d.r!==k.r||d.g!==k.g||d.b!==k.b||d.a!==k.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class cn extends ar{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Ln extends ar{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class tt extends ar{getDefault(){return[!0,!0,!0,!0]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||d[3]!==k[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class m extends ar{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Pr extends ar{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class h extends ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const k=this.current;(d.func!==k.func||d.ref!==k.ref||d.mask!==k.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class T extends ar{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class kn extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST),this.current=d,this.dirty=!1}}class ii extends ar{getDefault(){return[0,1]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Lo extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),this.current=d,this.dirty=!1}}class K extends ar{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Ri extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.BLEND):k.disable(k.BLEND),this.current=d,this.dirty=!1}}class xs extends ar{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ws extends ar{getDefault(){return s.Color.transparent}set(d){const k=this.current;(d.r!==k.r||d.g!==k.g||d.b!==k.b||d.a!==k.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Mc extends ar{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Al extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),this.current=d,this.dirty=!1}}class Xa extends ar{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class hc extends ar{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class vu extends ar{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class Dc extends ar{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class _u extends ar{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||d[3]!==k[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Qc extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Hu extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindRenderbuffer(k.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class bu extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindTexture(k.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class wu extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindBuffer(k.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Zl extends ar{getDefault(){return null}set(d){const k=this.gl;k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class xu extends ar{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class qn extends ar{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class jn extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Wu extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class zs extends ar{constructor(d,k){super(d),this.context=d,this.parent=k}getDefault(){return null}}class ks extends zs{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Xl extends zs{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_ATTACHMENT,k.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class As{constructor(d,k,I,D){this.context=d,this.width=k,this.height=I;const q=d.gl,J=this.framebuffer=q.createFramebuffer();if(this.colorAttachment=new ks(d,J),D&&(this.depthAttachment=new Xl(d,J)),q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,k=this.colorAttachment.get();if(k&&d.deleteTexture(k),this.depthAttachment){const I=this.depthAttachment.get();I&&d.deleteRenderbuffer(I)}d.deleteFramebuffer(this.framebuffer)}}class To{constructor(d,k,I){this.blendFunction=d,this.blendColor=k,this.mask=I}}To.Replace=[1,0],To.disabled=new To(To.Replace,s.Color.transparent,[!1,!1,!1,!1]),To.unblended=new To(To.Replace,s.Color.transparent,[!0,!0,!0,!0]),To.alphaBlended=new To([1,771],s.Color.transparent,[!0,!0,!0,!0]);class te{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new $r(this),this.clearDepth=new cn(this),this.clearStencil=new Ln(this),this.colorMask=new tt(this),this.depthMask=new m(this),this.stencilMask=new Pr(this),this.stencilFunc=new h(this),this.stencilOp=new T(this),this.stencilTest=new kn(this),this.depthRange=new ii(this),this.depthTest=new Lo(this),this.depthFunc=new K(this),this.blend=new Ri(this),this.blendFunc=new xs(this),this.blendColor=new Ws(this),this.blendEquation=new Mc(this),this.cullFace=new Al(this),this.cullFaceSide=new Xa(this),this.frontFace=new hc(this),this.program=new vu(this),this.activeTexture=new Dc(this),this.viewport=new _u(this),this.bindFramebuffer=new Qc(this),this.bindRenderbuffer=new Hu(this),this.bindTexture=new bu(this),this.bindVertexBuffer=new wu(this),this.bindElementBuffer=new Zl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xu(this),this.pixelStoreUnpack=new qn(this),this.pixelStoreUnpackPremultiplyAlpha=new jn(this),this.pixelStoreUnpackFlipY=new Wu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,k){return new wr(this,d,k)}createVertexBuffer(d,k,I){return new vr(this,d,k,I)}createRenderbuffer(d,k,I){const D=this.gl,q=D.createRenderbuffer();return this.bindRenderbuffer.set(q),D.renderbufferStorage(D.RENDERBUFFER,d,k,I),this.bindRenderbuffer.set(null),q}createFramebuffer(d,k,I){return new As(this,d,k,I)}clear({color:d,depth:k}){const I=this.gl;let D=0;d&&(D|=I.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),k!==void 0&&(D|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(k),this.depthMask.set(!0)),I.clear(D)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){E(d.blendFunction,To.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Te{constructor(d,k,I){this.func=d,this.mask=k,this.range=I}}Te.ReadOnly=!1,Te.ReadWrite=!0,Te.disabled=new Te(519,Te.ReadOnly,[0,1]);const gt=7680;class qt{constructor(d,k,I,D,q,J){this.test=d,this.ref=k,this.mask=I,this.fail=D,this.depthFail=q,this.pass=J}}qt.disabled=new qt({func:519,mask:0},0,0,gt,gt,gt);class ur{constructor(d,k,I){this.enable=d,this.mode=k,this.frontFace=I}}let Xr;function gn(M,d,k,I,D,q,J){const oe=M.context,se=oe.gl,ge=M.useProgram("collisionBox"),Se=[];let Ue=0,Je=0;for(let Dt=0;Dt<I.length;Dt++){const Lr=I[Dt],Ir=d.getTile(Lr),Zr=Ir.getBucket(k);if(!Zr)continue;let Gr=Lr.posMatrix;D[0]===0&&D[1]===0||(Gr=M.translatePosMatrix(Lr.posMatrix,Ir,D,q));const mn=J?Zr.textCollisionBox:Zr.iconCollisionBox,qr=Zr.collisionCircleArray;if(qr.length>0){const zn=s.create(),En=Gr;s.mul(zn,Zr.placementInvProjMatrix,M.transform.glCoordMatrix),s.mul(zn,zn,Zr.placementViewportMatrix),Se.push({circleArray:qr,circleOffset:Je,transform:En,invTransform:zn,coord:Lr}),Ue+=qr.length/4,Je=Ue}mn&&ge.draw(oe,se.LINES,Te.disabled,qt.disabled,M.colorModeForRenderPass(),ur.disabled,nl(Gr,M.transform,Ir),M.style.terrain&&M.style.terrain.getTerrainData(Lr),k.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,null,M.transform.zoom,null,null,mn.collisionVertexBuffer)}if(!J||!Se.length)return;const St=M.useProgram("collisionCircle"),vt=new s.CollisionCircleLayoutArray;vt.resize(4*Ue),vt._trim();let xt=0;for(const Dt of Se)for(let Lr=0;Lr<Dt.circleArray.length/4;Lr++){const Ir=4*Lr,Zr=Dt.circleArray[Ir+0],Gr=Dt.circleArray[Ir+1],mn=Dt.circleArray[Ir+2],qr=Dt.circleArray[Ir+3];vt.emplace(xt++,Zr,Gr,mn,qr,0),vt.emplace(xt++,Zr,Gr,mn,qr,1),vt.emplace(xt++,Zr,Gr,mn,qr,2),vt.emplace(xt++,Zr,Gr,mn,qr,3)}(!Xr||Xr.length<2*Ue)&&(Xr=function(Dt){const Lr=2*Dt,Ir=new s.QuadTriangleArray;Ir.resize(Lr),Ir._trim();for(let Zr=0;Zr<Lr;Zr++){const Gr=6*Zr;Ir.uint16[Gr+0]=4*Zr+0,Ir.uint16[Gr+1]=4*Zr+1,Ir.uint16[Gr+2]=4*Zr+2,Ir.uint16[Gr+3]=4*Zr+2,Ir.uint16[Gr+4]=4*Zr+3,Ir.uint16[Gr+5]=4*Zr+0}return Ir}(Ue));const tr=oe.createIndexBuffer(Xr,!0),cr=oe.createVertexBuffer(vt,s.collisionCircleLayout.members,!0);for(const Dt of Se){const Lr={u_matrix:Dt.transform,u_inv_matrix:Dt.invTransform,u_camera_to_center_distance:(Ar=M.transform).cameraToCenterDistance,u_viewport_size:[Ar.width,Ar.height]};St.draw(oe,se.TRIANGLES,Te.disabled,qt.disabled,M.colorModeForRenderPass(),ur.disabled,Lr,M.style.terrain&&M.style.terrain.getTerrainData(Dt.coord),k.id,cr,tr,s.SegmentVector.simpleSegment(0,2*Dt.circleOffset,Dt.circleArray.length,Dt.circleArray.length/2),null,M.transform.zoom,null,null,null)}var Ar;cr.destroy(),tr.destroy()}ur.disabled=new ur(!1,1029,2305),ur.backCCW=new ur(!0,1029,2305);const Kn=s.identity(new Float32Array(16));function xi(M,d,k,I,D,q){const{horizontalAlign:J,verticalAlign:oe}=s.getAnchorAlignment(M),se=-(J-.5)*d,ge=-(oe-.5)*k,Se=s.evaluateVariableOffset(M,I);return new s.pointGeometry((se/D+Se[0])*q,(ge/D+Se[1])*q)}function Oi(M,d,k,I,D,q,J,oe,se,ge,Se){const Ue=M.text.placedSymbolArray,Je=M.text.dynamicLayoutVertexArray,St=M.icon.dynamicLayoutVertexArray,vt={};Je.clear();for(let xt=0;xt<Ue.length;xt++){const tr=Ue.get(xt),cr=M.allowVerticalPlacement&&!tr.placedOrientation,Ar=tr.hidden||!tr.crossTileID||cr?null:I[tr.crossTileID];if(Ar){const Dt=new s.pointGeometry(tr.anchorX,tr.anchorY),Lr=si(Dt,k?J:q,Se),Ir=fr(D.cameraToCenterDistance,Lr.signedDistanceFromCamera);let Zr=s.evaluateSizeForFeature(M.textSizeData,se,tr)*Ir/s.ONE_EM;k&&(Zr*=M.tilePixelRatio/oe);const{width:Gr,height:mn,anchor:qr,textOffset:zn,textBoxScale:En}=Ar,Vn=xi(qr,Gr,mn,zn,En,Zr),Ti=k?si(Dt.add(Vn),q,Se).point:Lr.point.add(d?Vn.rotate(-D.angle):Vn),Di=M.allowVerticalPlacement&&tr.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let N=0;N<tr.numGlyphs;N++)s.addDynamicAttributes(Je,Ti,Di);ge&&tr.associatedIconIndex>=0&&(vt[tr.associatedIconIndex]={shiftedAnchor:Ti,angle:Di})}else gi(tr.numGlyphs,Je)}if(ge){St.clear();const xt=M.icon.placedSymbolArray;for(let tr=0;tr<xt.length;tr++){const cr=xt.get(tr);if(cr.hidden)gi(cr.numGlyphs,St);else{const Ar=vt[tr];if(Ar)for(let Dt=0;Dt<cr.numGlyphs;Dt++)s.addDynamicAttributes(St,Ar.shiftedAnchor,Ar.angle);else gi(cr.numGlyphs,St)}}M.icon.dynamicLayoutVertexBuffer.updateData(St)}M.text.dynamicLayoutVertexBuffer.updateData(Je)}function Ji(M,d,k){return k.iconsInText&&d?"symbolTextAndIcon":M?"symbolSDF":"symbolIcon"}function fo(M,d,k,I,D,q,J,oe,se,ge,Se,Ue){const Je=M.context,St=Je.gl,vt=M.transform,xt=oe==="map",tr=se==="map",cr=oe!=="viewport"&&k.layout.get("symbol-placement")!=="point",Ar=xt&&!tr&&!cr,Dt=!k.layout.get("symbol-sort-key").isConstant();let Lr=!1;const Ir=M.depthModeForSublayer(0,Te.ReadOnly),Zr=k.layout.get("text-variable-anchor"),Gr=[];for(const mn of I){const qr=d.getTile(mn),zn=qr.getBucket(k);if(!zn)continue;const En=D?zn.text:zn.icon;if(!En||!En.segments.get().length)continue;const Vn=En.programConfigurations.get(k.id),Ti=D||zn.sdfIcons,Di=D?zn.textSizeData:zn.iconSizeData,N=tr||vt.pitch!==0,$=M.useProgram(Ji(Ti,D,zn),Vn),re=s.evaluateSizeForZoom(Di,vt.zoom),fe=M.style.terrain&&M.style.terrain.getTerrainData(mn);let Le,Be,qe,Ke,it=[0,0],_t=null;if(D){if(Be=qr.glyphAtlasTexture,qe=St.LINEAR,Le=qr.glyphAtlasTexture.size,zn.iconsInText){it=qr.imageAtlasTexture.size,_t=qr.imageAtlasTexture;const On=Di.kind==="composite"||Di.kind==="camera";Ke=N||M.options.rotating||M.options.zooming||On?St.LINEAR:St.NEAREST}}else{const On=k.layout.get("icon-size").constantOr(0)!==1||zn.iconsNeedLinear;Be=qr.imageAtlasTexture,qe=Ti||M.options.rotating||M.options.zooming||On||N?St.LINEAR:St.NEAREST,Le=qr.imageAtlasTexture.size}const rr=yo(qr,1,M.transform.zoom),Er=wi(mn.posMatrix,tr,xt,M.transform,rr),kr=xn(mn.posMatrix,tr,xt,M.transform,rr),hr=Zr&&zn.hasTextData(),fn=k.layout.get("icon-text-fit")!=="none"&&hr&&zn.hasIconData();if(cr){const On=M.style.terrain?(Ci,Fn)=>M.style.terrain.getElevation(mn,Ci,Fn):null,In=k.layout.get("text-rotation-alignment")==="map";Yr(zn,mn.posMatrix,M,D,Er,kr,tr,ge,In,On)}const zr=M.translatePosMatrix(mn.posMatrix,qr,q,J),zt=cr||D&&Zr||fn?Kn:Er,Xt=M.translatePosMatrix(kr,qr,q,J,!0),Hr=Ti&&k.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let en;en=Ti?zn.iconsInText?Ye(Di.kind,re,Ar,tr,M,zr,zt,Xt,Le,it):Ae(Di.kind,re,Ar,tr,M,zr,zt,Xt,D,Le,!0):ae(Di.kind,re,Ar,tr,M,zr,zt,Xt,D,Le);const Wr={program:$,buffers:En,uniformValues:en,atlasTexture:Be,atlasTextureIcon:_t,atlasInterpolation:qe,atlasInterpolationIcon:Ke,isSDF:Ti,hasHalo:Hr};if(Dt&&zn.canOverlap){Lr=!0;const On=En.segments.get();for(const In of On)Gr.push({segments:new s.SegmentVector([In]),sortKey:In.sortKey,state:Wr,terrainData:fe})}else Gr.push({segments:En.segments,sortKey:0,state:Wr,terrainData:fe})}Lr&&Gr.sort((mn,qr)=>mn.sortKey-qr.sortKey);for(const mn of Gr){const qr=mn.state;if(Je.activeTexture.set(St.TEXTURE0),qr.atlasTexture.bind(qr.atlasInterpolation,St.CLAMP_TO_EDGE),qr.atlasTextureIcon&&(Je.activeTexture.set(St.TEXTURE1),qr.atlasTextureIcon&&qr.atlasTextureIcon.bind(qr.atlasInterpolationIcon,St.CLAMP_TO_EDGE)),qr.isSDF){const zn=qr.uniformValues;qr.hasHalo&&(zn.u_is_halo=1,Vo(qr.buffers,mn.segments,k,M,qr.program,Ir,Se,Ue,zn,mn.terrainData)),zn.u_is_halo=0}Vo(qr.buffers,mn.segments,k,M,qr.program,Ir,Se,Ue,qr.uniformValues,mn.terrainData)}}function Vo(M,d,k,I,D,q,J,oe,se,ge){const Se=I.context;D.draw(Se,Se.gl.TRIANGLES,q,J,oe,ur.disabled,se,ge,k.id,M.layoutVertexBuffer,M.indexBuffer,d,k.paint,I.transform.zoom,M.programConfigurations.get(k.id),M.dynamicLayoutVertexBuffer,M.opacityVertexBuffer)}function Qo(M,d,k,I,D,q,J){const oe=M.context.gl,se=k.paint.get("fill-pattern"),ge=se&&se.constantOr(1),Se=k.getCrossfadeParameters();let Ue,Je,St,vt,xt;J?(Je=ge&&!k.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=oe.LINES):(Je=ge?"fillPattern":"fill",Ue=oe.TRIANGLES);for(const tr of I){const cr=d.getTile(tr);if(ge&&!cr.patternsLoaded())continue;const Ar=cr.getBucket(k);if(!Ar)continue;const Dt=Ar.programConfigurations.get(k.id),Lr=M.useProgram(Je,Dt),Ir=M.style.terrain&&M.style.terrain.getTerrainData(tr);ge&&(M.context.activeTexture.set(oe.TEXTURE0),cr.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Se));const Zr=se.constantOr(null);if(Zr&&cr.imageAtlas){const qr=cr.imageAtlas,zn=qr.patternPositions[Zr.to.toString()],En=qr.patternPositions[Zr.from.toString()];zn&&En&&Dt.setConstantPatternPositions(zn,En)}const Gr=Ir?tr:null,mn=M.translatePosMatrix(Gr?Gr.posMatrix:tr.posMatrix,cr,k.paint.get("fill-translate"),k.paint.get("fill-translate-anchor"));if(J){vt=Ar.indexBuffer2,xt=Ar.segments2;const qr=[oe.drawingBufferWidth,oe.drawingBufferHeight];St=Je==="fillOutlinePattern"&&ge?$u(mn,M,Se,cr,qr):Wl(mn,qr)}else vt=Ar.indexBuffer,xt=Ar.segments,St=ge?wl(mn,M,Se,cr):$a(mn);Lr.draw(M.context,Ue,D,M.stencilModeForClipping(tr),q,ur.disabled,St,Ir,k.id,Ar.layoutVertexBuffer,vt,xt,k.paint,M.transform.zoom,Dt)}}function ea(M,d,k,I,D,q,J){const oe=M.context,se=oe.gl,ge=k.paint.get("fill-extrusion-pattern"),Se=ge.constantOr(1),Ue=k.getCrossfadeParameters(),Je=k.paint.get("fill-extrusion-opacity");for(const St of I){const vt=d.getTile(St),xt=vt.getBucket(k);if(!xt)continue;const tr=M.style.terrain&&M.style.terrain.getTerrainData(St),cr=xt.programConfigurations.get(k.id),Ar=M.useProgram(Se?"fillExtrusionPattern":"fillExtrusion",cr);Se&&(M.context.activeTexture.set(se.TEXTURE0),vt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),cr.updatePaintBuffers(Ue));const Dt=ge.constantOr(null);if(Dt&&vt.imageAtlas){const Gr=vt.imageAtlas,mn=Gr.patternPositions[Dt.to.toString()],qr=Gr.patternPositions[Dt.from.toString()];mn&&qr&&cr.setConstantPatternPositions(mn,qr)}const Lr=M.translatePosMatrix(St.posMatrix,vt,k.paint.get("fill-extrusion-translate"),k.paint.get("fill-extrusion-translate-anchor")),Ir=k.paint.get("fill-extrusion-vertical-gradient"),Zr=Se?Vu(Lr,M,Ir,Je,St,Ue,vt):_s(Lr,M,Ir,Je);Ar.draw(oe,oe.gl.TRIANGLES,D,q,J,ur.backCCW,Zr,tr,k.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,k.paint,M.transform.zoom,cr,M.style.terrain&&xt.centroidVertexBuffer)}}function Da(M,d,k,I,D,q,J){const oe=M.context,se=oe.gl,ge=k.fbo;if(!ge)return;const Se=M.useProgram("hillshade"),Ue=M.style.terrain&&M.style.terrain.getTerrainData(d);oe.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ge.colorAttachment.get()),Se.draw(oe,se.TRIANGLES,D,q,J,ur.disabled,((Je,St,vt,xt)=>{const tr=vt.paint.get("hillshade-shadow-color"),cr=vt.paint.get("hillshade-highlight-color"),Ar=vt.paint.get("hillshade-accent-color");let Dt=vt.paint.get("hillshade-illumination-direction")*(Math.PI/180);vt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Dt-=Je.transform.angle);const Lr=!Je.options.moving;return{u_matrix:xt?xt.posMatrix:Je.transform.calculatePosMatrix(St.tileID.toUnwrapped(),Lr),u_image:0,u_latrange:gu(0,St.tileID),u_light:[vt.paint.get("hillshade-exaggeration"),Dt],u_shadow:tr,u_highlight:cr,u_accent:Ar}})(M,k,I,Ue?d:null),Ue,I.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}function aa(M,d,k,I,D,q){const J=M.context,oe=J.gl,se=d.dem;if(se&&se.data){const ge=se.dim,Se=se.stride,Ue=se.getPixels();if(J.activeTexture.set(oe.TEXTURE1),J.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||M.getTileTexture(Se),d.demTexture){const St=d.demTexture;St.update(Ue,{premultiply:!1}),St.bind(oe.NEAREST,oe.CLAMP_TO_EDGE)}else d.demTexture=new B(J,Ue,oe.RGBA,{premultiply:!1}),d.demTexture.bind(oe.NEAREST,oe.CLAMP_TO_EDGE);J.activeTexture.set(oe.TEXTURE0);let Je=d.fbo;if(!Je){const St=new B(J,{width:ge,height:ge,data:null},oe.RGBA);St.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Je=d.fbo=J.createFramebuffer(ge,ge,!0),Je.colorAttachment.set(St.texture)}J.bindFramebuffer.set(Je.framebuffer),J.viewport.set([0,0,ge,ge]),M.useProgram("hillshadePrepare").draw(J,oe.TRIANGLES,I,D,q,ur.disabled,((St,vt)=>{const xt=vt.stride,tr=s.create();return s.ortho(tr,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(tr,tr,[0,-s.EXTENT,0]),{u_matrix:tr,u_image:1,u_dimension:[xt,xt],u_zoom:St.overscaledZ,u_unpack:vt.getUnpackVector()}})(d.tileID,se),null,k.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function $i(M,d,k,I,D,q){const J=I.paint.get("raster-fade-duration");if(!q&&J>0){const oe=s.exported.now(),se=(oe-M.timeAdded)/J,ge=d?(oe-d.timeAdded)/J:-1,Se=k.getSource(),Ue=D.coveringZoomLevel({tileSize:Se.tileSize,roundZoom:Se.roundZoom}),Je=!d||Math.abs(d.tileID.overscaledZ-Ue)>Math.abs(M.tileID.overscaledZ-Ue),St=Je&&M.refreshedUponExpiration?1:s.clamp(Je?se:1-ge,0,1);return M.refreshedUponExpiration&&se>=1&&(M.refreshedUponExpiration=!1),d?{opacity:1,mix:1-St}:{opacity:St,mix:0}}return{opacity:1,mix:0}}const za=new s.Color(1,0,0,1),Sa=new s.Color(0,1,0,1),Yl=new s.Color(0,0,1,1),El=new s.Color(1,0,1,1),Zu=new s.Color(0,1,1,1);function Ns(M,d,k,I){ol(M,0,d+k/2,M.transform.width,k,I)}function Sl(M,d,k,I){ol(M,d-k/2,0,k,M.transform.height,I)}function ol(M,d,k,I,D,q){const J=M.context,oe=J.gl;oe.enable(oe.SCISSOR_TEST),oe.scissor(d*M.pixelRatio,k*M.pixelRatio,I*M.pixelRatio,D*M.pixelRatio),J.clear({color:q}),oe.disable(oe.SCISSOR_TEST)}function ku(M,d,k){const I=M.context,D=I.gl,q=k.posMatrix,J=M.useProgram("debug"),oe=Te.disabled,se=qt.disabled,ge=M.colorModeForRenderPass(),Se="$debug",Ue=M.style.terrain&&M.style.terrain.getTerrainData(k);I.activeTexture.set(D.TEXTURE0),M.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE);const Je=d.getTileByID(k.key).latestRawTileData,St=Math.floor((Je&&Je.byteLength||0)/1024),vt=d.getTile(k).tileSize,xt=512/Math.min(vt,512)*(k.overscaledZ/M.transform.zoom)*.5;let tr=k.canonical.toString();k.overscaledZ!==k.canonical.z&&(tr+=` => ${k.overscaledZ}`),function(cr,Ar){cr.initDebugOverlayCanvas();const Dt=cr.debugOverlayCanvas,Lr=cr.context.gl,Ir=cr.debugOverlayCanvas.getContext("2d");Ir.clearRect(0,0,Dt.width,Dt.height),Ir.shadowColor="white",Ir.shadowBlur=2,Ir.lineWidth=1.5,Ir.strokeStyle="white",Ir.textBaseline="top",Ir.font="bold 36px Open Sans, sans-serif",Ir.fillText(Ar,5,5),Ir.strokeText(Ar,5,5),cr.debugOverlayTexture.update(Dt),cr.debugOverlayTexture.bind(Lr.LINEAR,Lr.CLAMP_TO_EDGE)}(M,`${tr} ${St}kB`),J.draw(I,D.TRIANGLES,oe,se,To.alphaBlended,ur.disabled,us(q,s.Color.transparent,xt),null,Se,M.debugBuffer,M.quadTriangleIndexBuffer,M.debugSegments),J.draw(I,D.LINE_STRIP,oe,se,ge,ur.disabled,us(q,s.Color.red),Ue,Se,M.debugBuffer,M.tileBorderIndexBuffer,M.debugSegments)}function Na(M,d,k){const I=M.context,D=I.gl,q=M.colorModeForRenderPass(),J=new Te(D.LEQUAL,Te.ReadWrite,M.depthRangeFor3D),oe=M.useProgram("terrain"),se=d.getTerrainMesh(),ge=d.getTerrainData(k.tileID);I.bindFramebuffer.set(null),I.viewport.set([0,0,M.width,M.height]),I.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const Se=M.transform.calculatePosMatrix(k.tileID.toUnwrapped());oe.draw(I,D.TRIANGLES,J,qt.disabled,q,ur.backCCW,{u_matrix:Se,u_texture:0},ge,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}function Au(M,d,k,I){const D=M.context,q=k.tileSize*d.qualityFactor;k.textures[I]||(k.textures[I]=M.getTileTexture(q)||new B(D,{width:q,height:q,data:null},D.gl.RGBA),k.textures[I].bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),I===0&&d.sourceCache.renderHistory.unshift(k.tileID.key));const J=d.getRTTFramebuffer();J.colorAttachment.set(k.textures[I].texture),D.bindFramebuffer.set(J.framebuffer),D.viewport.set([0,0,q,q])}class Jl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,k=d.terrain;for(const I in d.sourceCaches){this._coordsDescendingInv[I]={};const D=d.sourceCaches[I].getVisibleCoordinates();for(const q of D){const J=k.sourceCache.getTerrainCoords(q);for(const oe in J)this._coordsDescendingInv[I][oe]||(this._coordsDescendingInv[I][oe]=[]),this._coordsDescendingInv[I][oe].push(J[oe])}}for(const I of d._order){const D=d._layers[I],q=D.source;if(this._renderToTexture[D.type]&&!this._coordsDescendingInvStr[q]){this._coordsDescendingInvStr[q]={};for(const J in this._coordsDescendingInv[q])this._coordsDescendingInvStr[q][J]=this._coordsDescendingInv[q][J].map(oe=>oe.key).sort().join()}}return this._renderableTiles.forEach(I=>{for(const D in this._coordsDescendingInvStr){const q=this._coordsDescendingInvStr[D][I.tileID.key];q&&q!==I.textureCoords[D]&&I.clearTextures(this.painter),k.needsRerender(D,I.tileID)&&I.clearTextures(this.painter)}this._rerender[I.tileID.key]=!I.textures.length}),k.clearRerenderCache(),k.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const k=d.type,I=this.painter,D=I.style._order,q=I.currentLayer,J=q+1===D.length;if(this._renderToTexture[k]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=k,this._stacks[this._stacks.length-1].push(D[q]),!J))return!0;if(this._renderToTexture[this._prevType]||k==="hillshade"||this._renderToTexture[k]&&J){this._prevType=k;const oe=this._stacks.length-1,se=this._stacks[oe]||[];for(const ge of this._renderableTiles){if(Au(I,I.style.terrain,ge,oe),this._rerender[ge.tileID.key]){I.context.clear({color:s.Color.transparent});for(let Se=0;Se<se.length;Se++){const Ue=I.style._layers[se[Se]],Je=Ue.source?this._coordsDescendingInv[Ue.source][ge.tileID.key]:[ge.tileID];I._renderTileClippingMasks(Ue,Je),I.renderLayer(I,I.style.sourceCaches[Ue.source],Ue,Je),Ue.source&&(ge.textureCoords[Ue.source]=this._coordsDescendingInvStr[Ue.source][ge.tileID.key])}}Na(I,I.style.terrain,ge)}if(k==="hillshade"){this._stacks.push([D[q]]);for(const ge of this._renderableTiles){const Se=this._coordsDescendingInv[d.source][ge.tileID.key];Au(I,I.style.terrain,ge,this._stacks.length-1),I.context.clear({color:s.Color.transparent}),I._renderTileClippingMasks(d,Se),I.renderLayer(I,I.style.sourceCaches[d.source],d,Se),Na(I,I.style.terrain,ge)}return!0}return this._renderToTexture[k]}return!1}}const Zs={symbol:function(M,d,k,I,D){if(M.renderPass!=="translucent")return;const q=qt.disabled,J=M.colorModeForRenderPass();k.layout.get("text-variable-anchor")&&function(oe,se,ge,Se,Ue,Je,St){const vt=se.transform,xt=Ue==="map",tr=Je==="map";for(const cr of oe){const Ar=Se.getTile(cr),Dt=Ar.getBucket(ge);if(!Dt||!Dt.text||!Dt.text.segments.get().length)continue;const Lr=s.evaluateSizeForZoom(Dt.textSizeData,vt.zoom),Ir=yo(Ar,1,se.transform.zoom),Zr=wi(cr.posMatrix,tr,xt,se.transform,Ir),Gr=ge.layout.get("icon-text-fit")!=="none"&&Dt.hasIconData();if(Lr){const mn=Math.pow(2,vt.zoom-Ar.tileID.overscaledZ);Oi(Dt,xt,tr,St,vt,Zr,cr.posMatrix,mn,Lr,Gr,se.style.terrain?(qr,zn)=>se.style.terrain.getElevation(cr,qr,zn):null)}}}(I,M,k,d,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),D),k.paint.get("icon-opacity").constantOr(1)!==0&&fo(M,d,k,I,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),q,J),k.paint.get("text-opacity").constantOr(1)!==0&&fo(M,d,k,I,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),q,J),d.map.showCollisionBoxes&&(gn(M,d,k,I,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),gn(M,d,k,I,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))},circle:function(M,d,k,I){if(M.renderPass!=="translucent")return;const D=k.paint.get("circle-opacity"),q=k.paint.get("circle-stroke-width"),J=k.paint.get("circle-stroke-opacity"),oe=!k.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(q.constantOr(1)===0||J.constantOr(1)===0))return;const se=M.context,ge=se.gl,Se=M.depthModeForSublayer(0,Te.ReadOnly),Ue=qt.disabled,Je=M.colorModeForRenderPass(),St=[];for(let vt=0;vt<I.length;vt++){const xt=I[vt],tr=d.getTile(xt),cr=tr.getBucket(k);if(!cr)continue;const Ar=cr.programConfigurations.get(k.id),Dt=M.useProgram("circle",Ar),Lr=cr.layoutVertexBuffer,Ir=cr.indexBuffer,Zr=M.style.terrain&&M.style.terrain.getTerrainData(xt),Gr={programConfiguration:Ar,program:Dt,layoutVertexBuffer:Lr,indexBuffer:Ir,uniformValues:Gu(M,xt,tr,k),terrainData:Zr};if(oe){const mn=cr.segments.get();for(const qr of mn)St.push({segments:new s.SegmentVector([qr]),sortKey:qr.sortKey,state:Gr})}else St.push({segments:cr.segments,sortKey:0,state:Gr})}oe&&St.sort((vt,xt)=>vt.sortKey-xt.sortKey);for(const vt of St){const{programConfiguration:xt,program:tr,layoutVertexBuffer:cr,indexBuffer:Ar,uniformValues:Dt,terrainData:Lr}=vt.state;tr.draw(se,ge.TRIANGLES,Se,Ue,Je,ur.disabled,Dt,Lr,k.id,cr,Ar,vt.segments,k.paint,M.transform.zoom,xt)}},heatmap:function(M,d,k,I){if(k.paint.get("heatmap-opacity")!==0)if(M.renderPass==="offscreen"){const D=M.context,q=D.gl,J=qt.disabled,oe=new To([q.ONE,q.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(se,ge,Se){const Ue=se.gl;se.activeTexture.set(Ue.TEXTURE1),se.viewport.set([0,0,ge.width/4,ge.height/4]);let Je=Se.heatmapFbo;if(Je)Ue.bindTexture(Ue.TEXTURE_2D,Je.colorAttachment.get()),se.bindFramebuffer.set(Je.framebuffer);else{const St=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,St),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.LINEAR),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.LINEAR),Je=Se.heatmapFbo=se.createFramebuffer(ge.width/4,ge.height/4,!1),function(vt,xt,tr,cr){const Ar=vt.gl;Ar.texImage2D(Ar.TEXTURE_2D,0,Ar.RGBA,xt.width/4,xt.height/4,0,Ar.RGBA,vt.extRenderToTextureHalfFloat?vt.extTextureHalfFloat.HALF_FLOAT_OES:Ar.UNSIGNED_BYTE,null),cr.colorAttachment.set(tr)}(se,ge,St,Je)}})(D,M,k),D.clear({color:s.Color.transparent});for(let se=0;se<I.length;se++){const ge=I[se];if(d.hasRenderableParent(ge))continue;const Se=d.getTile(ge),Ue=Se.getBucket(k);if(!Ue)continue;const Je=Ue.programConfigurations.get(k.id),St=M.useProgram("heatmap",Je),{zoom:vt}=M.transform;St.draw(D,q.TRIANGLES,Te.disabled,J,oe,ur.disabled,xl(ge.posMatrix,Se,vt,k.paint.get("heatmap-intensity")),null,k.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,k.paint,M.transform.zoom,Je)}D.viewport.set([0,0,M.width,M.height])}else M.renderPass==="translucent"&&(M.context.setColorMode(M.colorModeForRenderPass()),function(D,q){const J=D.context,oe=J.gl,se=q.heatmapFbo;if(!se)return;J.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,se.colorAttachment.get()),J.activeTexture.set(oe.TEXTURE1);let ge=q.colorRampTexture;ge||(ge=q.colorRampTexture=new B(J,q.colorRamp,oe.RGBA)),ge.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(J,oe.TRIANGLES,Te.disabled,qt.disabled,D.colorModeForRenderPass(),ur.disabled,((Se,Ue,Je,St)=>{const vt=s.create();s.ortho(vt,0,Se.width,Se.height,0,0,1);const xt=Se.context.gl;return{u_matrix:vt,u_world:[xt.drawingBufferWidth,xt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}})(D,q),null,q.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,q.paint,D.transform.zoom)}(M,k))},line:function(M,d,k,I){if(M.renderPass!=="translucent")return;const D=k.paint.get("line-opacity"),q=k.paint.get("line-width");if(D.constantOr(1)===0||q.constantOr(1)===0)return;const J=M.depthModeForSublayer(0,Te.ReadOnly),oe=M.colorModeForRenderPass(),se=k.paint.get("line-dasharray"),ge=k.paint.get("line-pattern"),Se=ge.constantOr(1),Ue=k.paint.get("line-gradient"),Je=k.getCrossfadeParameters(),St=Se?"linePattern":se?"lineSDF":Ue?"lineGradient":"line",vt=M.context,xt=vt.gl;let tr=!0;for(const cr of I){const Ar=d.getTile(cr);if(Se&&!Ar.patternsLoaded())continue;const Dt=Ar.getBucket(k);if(!Dt)continue;const Lr=Dt.programConfigurations.get(k.id),Ir=M.context.program.get(),Zr=M.useProgram(St,Lr),Gr=tr||Zr.program!==Ir,mn=M.style.terrain&&M.style.terrain.getTerrainData(cr),qr=ge.constantOr(null);if(qr&&Ar.imageAtlas){const Vn=Ar.imageAtlas,Ti=Vn.patternPositions[qr.to.toString()],Di=Vn.patternPositions[qr.from.toString()];Ti&&Di&&Lr.setConstantPatternPositions(Ti,Di)}const zn=mn?cr:null,En=Se?bs(M,Ar,k,Je,zn):se?ws(M,Ar,k,se,Je,zn):Ue?yu(M,Ar,k,Dt.lineClipsArray.length,zn):kl(M,Ar,k,zn);if(Se)vt.activeTexture.set(xt.TEXTURE0),Ar.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Lr.updatePaintBuffers(Je);else if(se&&(Gr||M.lineAtlas.dirty))vt.activeTexture.set(xt.TEXTURE0),M.lineAtlas.bind(vt);else if(Ue){const Vn=Dt.gradients[k.id];let Ti=Vn.texture;if(k.gradientVersion!==Vn.version){let Di=256;if(k.stepInterpolant){const N=d.getSource().maxzoom,$=cr.canonical.z===N?Math.ceil(1<<M.transform.maxZoom-cr.canonical.z):1;Di=s.clamp(s.nextPowerOfTwo(Dt.maxLineLength/s.EXTENT*1024*$),256,vt.maxTextureSize)}Vn.gradient=s.renderColorRamp({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Di,image:Vn.gradient||void 0,clips:Dt.lineClipsArray}),Vn.texture?Vn.texture.update(Vn.gradient):Vn.texture=new B(vt,Vn.gradient,xt.RGBA),Vn.version=k.gradientVersion,Ti=Vn.texture}vt.activeTexture.set(xt.TEXTURE0),Ti.bind(k.stepInterpolant?xt.NEAREST:xt.LINEAR,xt.CLAMP_TO_EDGE)}Zr.draw(vt,xt.TRIANGLES,J,M.stencilModeForClipping(cr),oe,ur.disabled,En,mn,k.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,k.paint,M.transform.zoom,Lr,Dt.layoutVertexBuffer2),tr=!1}},fill:function(M,d,k,I){const D=k.paint.get("fill-color"),q=k.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const J=M.colorModeForRenderPass(),oe=k.paint.get("fill-pattern"),se=M.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&D.constantOr(s.Color.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===se){const ge=M.depthModeForSublayer(1,M.renderPass==="opaque"?Te.ReadWrite:Te.ReadOnly);Qo(M,d,k,I,ge,J,!1)}if(M.renderPass==="translucent"&&k.paint.get("fill-antialias")){const ge=M.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Te.ReadOnly);Qo(M,d,k,I,ge,J,!0)}},"fill-extrusion":function(M,d,k,I){const D=k.paint.get("fill-extrusion-opacity");if(D!==0&&M.renderPass==="translucent"){const q=new Te(M.context.gl.LEQUAL,Te.ReadWrite,M.depthRangeFor3D);if(D!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))ea(M,d,k,I,q,qt.disabled,To.disabled),ea(M,d,k,I,q,M.stencilModeFor3D(),M.colorModeForRenderPass());else{const J=M.colorModeForRenderPass();ea(M,d,k,I,q,qt.disabled,J)}}},hillshade:function(M,d,k,I){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const D=M.context,q=M.depthModeForSublayer(0,Te.ReadOnly),J=M.colorModeForRenderPass(),[oe,se]=M.renderPass==="translucent"?M.stencilConfigForOverlap(I):[{},I];for(const ge of se){const Se=d.getTile(ge);Se.needsHillshadePrepare!==void 0&&Se.needsHillshadePrepare&&M.renderPass==="offscreen"?aa(M,Se,k,q,qt.disabled,J):M.renderPass==="translucent"&&Da(M,ge,Se,k,q,oe[ge.overscaledZ],J)}D.viewport.set([0,0,M.width,M.height])},raster:function(M,d,k,I){if(M.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!I.length)return;const D=M.context,q=D.gl,J=d.getSource(),oe=M.useProgram("raster"),se=M.colorModeForRenderPass(),[ge,Se]=J instanceof bt?[{},I]:M.stencilConfigForOverlap(I),Ue=Se[Se.length-1].overscaledZ,Je=!M.options.moving;for(const St of Se){const vt=M.depthModeForSublayer(St.overscaledZ-Ue,k.paint.get("raster-opacity")===1?Te.ReadWrite:Te.ReadOnly,q.LESS),xt=d.getTile(St);xt.registerFadeDuration(k.paint.get("raster-fade-duration"));const tr=d.findLoadedParent(St,0),cr=$i(xt,tr,d,k,M.transform,M.style.terrain);let Ar,Dt;const Lr=k.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;D.activeTexture.set(q.TEXTURE0),xt.texture.bind(Lr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(q.TEXTURE1),tr?(tr.texture.bind(Lr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Ar=Math.pow(2,tr.tileID.overscaledZ-xt.tileID.overscaledZ),Dt=[xt.tileID.canonical.x*Ar%1,xt.tileID.canonical.y*Ar%1]):xt.texture.bind(Lr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const Ir=M.style.terrain&&M.style.terrain.getTerrainData(St),Zr=Ir?St:null,Gr=Zr?Zr.posMatrix:M.transform.calculatePosMatrix(St.toUnwrapped(),Je),mn=R(Gr,Dt||[0,0],Ar||1,cr,k);J instanceof bt?oe.draw(D,q.TRIANGLES,vt,qt.disabled,se,ur.disabled,mn,Ir,k.id,J.boundsBuffer,M.quadTriangleIndexBuffer,J.boundsSegments):oe.draw(D,q.TRIANGLES,vt,ge[St.overscaledZ],se,ur.disabled,mn,Ir,k.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}},background:function(M,d,k,I){const D=k.paint.get("background-color"),q=k.paint.get("background-opacity");if(q===0)return;const J=M.context,oe=J.gl,se=M.transform,ge=se.tileSize,Se=k.paint.get("background-pattern");if(M.isPatternMissing(Se))return;const Ue=!Se&&D.a===1&&q===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Ue)return;const Je=qt.disabled,St=M.depthModeForSublayer(0,Ue==="opaque"?Te.ReadWrite:Te.ReadOnly),vt=M.colorModeForRenderPass(),xt=M.useProgram(Se?"backgroundPattern":"background"),tr=I||se.coveringTiles({tileSize:ge,terrain:M.style.terrain});Se&&(J.activeTexture.set(oe.TEXTURE0),M.imageManager.bind(M.context));const cr=k.getCrossfadeParameters();for(const Ar of tr){const Dt=I?Ar.posMatrix:M.transform.calculatePosMatrix(Ar.toUnwrapped()),Lr=Se?Mt(Dt,q,M,Se,{tileID:Ar,tileSize:ge},cr):yt(Dt,q,D),Ir=M.style.terrain&&M.style.terrain.getTerrainData(Ar);xt.draw(J,oe.TRIANGLES,St,Je,vt,ur.disabled,Lr,Ir,k.id,M.tileExtentBuffer,M.quadTriangleIndexBuffer,M.tileExtentSegments)}},debug:function(M,d,k){for(let I=0;I<k.length;I++)ku(M,d,k[I])},custom:function(M,d,k){const I=M.context,D=k.implementation;if(M.renderPass==="offscreen"){const q=D.prerender;q&&(M.setCustomLayerDefaults(),I.setColorMode(M.colorModeForRenderPass()),q.call(D,I.gl,M.transform.customLayerMatrix()),I.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),I.setColorMode(M.colorModeForRenderPass()),I.setStencilMode(qt.disabled);const q=D.renderingMode==="3d"?new Te(M.context.gl.LEQUAL,Te.ReadWrite,M.depthRangeFor3D):M.depthModeForSublayer(0,Te.ReadOnly);I.setDepthMode(q),D.render(I.gl,M.transform.customLayerMatrix()),I.setDirty(),M.setBaseState(),I.bindFramebuffer.set(null)}}};class Cl{constructor(d,k){this.context=new te(d),this.transform=k,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.create(),renderTime:0},this.setup(),this.numSublayers=$t.maxUnderzooming+$t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ai,this.gpuTimers={}}resize(d,k,I){if(this.width=d*I,this.height=k*I,this.pixelRatio=I,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const D of this.style._order)this.style._layers[D].resize()}setup(){const d=this.context,k=new s.PosArray;k.emplaceBack(0,0),k.emplaceBack(s.EXTENT,0),k.emplaceBack(0,s.EXTENT),k.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(k,Yi.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const I=new s.PosArray;I.emplaceBack(0,0),I.emplaceBack(s.EXTENT,0),I.emplaceBack(0,s.EXTENT),I.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=d.createVertexBuffer(I,Yi.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const D=new s.RasterBoundsArray;D.emplaceBack(0,0,0,0),D.emplaceBack(s.EXTENT,0,s.EXTENT,0),D.emplaceBack(0,s.EXTENT,0,s.EXTENT),D.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(D,ut.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const q=new s.PosArray;q.emplaceBack(0,0),q.emplaceBack(1,0),q.emplaceBack(0,1),q.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(q,Yi.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const J=new s.LineStripIndexArray;J.emplaceBack(0),J.emplaceBack(1),J.emplaceBack(3),J.emplaceBack(2),J.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(J);const oe=new s.TriangleIndexArray;oe.emplaceBack(0,1,2),oe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(oe),this.emptyTexture=new B(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const se=this.context.gl;this.stencilClearMode=new qt({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO)}clearStencil(){const d=this.context,k=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const I=s.create();s.ortho(I,0,this.width,this.height,0,0,1),s.scale(I,I,[k.drawingBufferWidth,k.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,k.TRIANGLES,Te.disabled,this.stencilClearMode,To.disabled,ur.disabled,Ds(I),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,k){if(this.currentStencilSource===d.source||!d.isTileClipped()||!k||!k.length)return;this.currentStencilSource=d.source;const I=this.context,D=I.gl;this.nextStencilID+k.length>256&&this.clearStencil(),I.setColorMode(To.disabled),I.setDepthMode(Te.disabled);const q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const J of k){const oe=this._tileClippingMaskIDs[J.key]=this.nextStencilID++,se=this.style.terrain&&this.style.terrain.getTerrainData(J);q.draw(I,D.TRIANGLES,Te.disabled,new qt({func:D.ALWAYS,mask:0},oe,255,D.KEEP,D.KEEP,D.REPLACE),To.disabled,ur.disabled,Ds(J.posMatrix),se,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,k=this.context.gl;return new qt({func:k.NOTEQUAL,mask:255},d,255,k.KEEP,k.KEEP,k.REPLACE)}stencilModeForClipping(d){const k=this.context.gl;return new qt({func:k.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,k.KEEP,k.KEEP,k.REPLACE)}stencilConfigForOverlap(d){const k=this.context.gl,I=d.sort((J,oe)=>oe.overscaledZ-J.overscaledZ),D=I[I.length-1].overscaledZ,q=I[0].overscaledZ-D+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();const J={};for(let oe=0;oe<q;oe++)J[oe+D]=new qt({func:k.GEQUAL,mask:255},oe+this.nextStencilID,255,k.KEEP,k.KEEP,k.REPLACE);return this.nextStencilID+=q,[J,I]}return[{[D]:qt.disabled},I]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new To([d.CONSTANT_COLOR,d.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?To.unblended:To.alphaBlended}depthModeForSublayer(d,k,I){if(!this.opaquePassEnabledForLayer())return Te.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Te(I||this.context.gl.LEQUAL,k,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,k){this.style=d,this.options=k,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const I=this.style._order,D=this.style.sourceCaches,q=this.style.terrain&&new Jl(this);for(const ge in D){const Se=D[ge];Se.used&&Se.prepare(this.context)}const J={},oe={},se={};for(const ge in D){const Se=D[ge];J[ge]=Se.getVisibleCoordinates(),oe[ge]=J[ge].slice().reverse(),se[ge]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ge=0;ge<I.length;ge++)if(this.style._layers[I[ge]].is3D()){this.opaquePassCutoff=ge;break}if(q){this.opaquePassCutoff=0;const ge=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ge.length)&&(s.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Se,Ue){const Je=Se.context,St=Je.gl,vt=To.unblended,xt=new Te(St.LEQUAL,Te.ReadWrite,[0,1]),tr=Ue.getTerrainMesh(),cr=Ue.sourceCache.getRenderableTiles(),Ar=Se.useProgram("terrainDepth");Je.bindFramebuffer.set(Ue.getFramebuffer("depth").framebuffer),Je.viewport.set([0,0,Se.width/devicePixelRatio,Se.height/devicePixelRatio]),Je.clear({color:s.Color.transparent,depth:1});for(const Dt of cr){const Lr=Ue.getTerrainData(Dt.tileID),Ir=Se.transform.calculatePosMatrix(Dt.tileID.toUnwrapped());Ar.draw(Je,St.TRIANGLES,xt,qt.disabled,vt,ur.backCCW,{u_matrix:Ir},Lr,"terrain",tr.vertexBuffer,tr.indexBuffer,tr.segments)}Je.bindFramebuffer.set(null),Je.viewport.set([0,0,Se.width,Se.height])}(this,this.style.terrain),function(Se,Ue){const Je=Se.context,St=Je.gl,vt=To.unblended,xt=new Te(St.LEQUAL,Te.ReadWrite,[0,1]),tr=Ue.getTerrainMesh(),cr=Ue.getCoordsTexture(),Ar=Ue.sourceCache.getRenderableTiles(),Dt=Se.useProgram("terrainCoords");Je.bindFramebuffer.set(Ue.getFramebuffer("coords").framebuffer),Je.viewport.set([0,0,Se.width/devicePixelRatio,Se.height/devicePixelRatio]),Je.clear({color:s.Color.transparent,depth:1}),Ue.coordsIndex=[];for(const Lr of Ar){const Ir=Ue.getTerrainData(Lr.tileID);Je.activeTexture.set(St.TEXTURE0),St.bindTexture(St.TEXTURE_2D,cr.texture);const Zr=Se.transform.calculatePosMatrix(Lr.tileID.toUnwrapped());Dt.draw(Je,St.TRIANGLES,xt,qt.disabled,vt,ur.backCCW,{u_matrix:Zr,u_terrain_coords_id:(255-Ue.coordsIndex.length)/255,u_texture:0},Ir,"terrain",tr.vertexBuffer,tr.indexBuffer,tr.segments),Ue.coordsIndex.push(Lr.tileID.key)}Je.bindFramebuffer.set(null),Je.viewport.set([0,0,Se.width,Se.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const ge of I){const Se=this.style._layers[ge];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const Ue=oe[Se.source];(Se.type==="custom"||Ue.length)&&this.renderLayer(this,D[Se.source],Se,Ue)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:k.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=k.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!q)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const ge=this.style._layers[I[this.currentLayer]],Se=D[ge.source],Ue=J[ge.source];this._renderTileClippingMasks(ge,Ue),this.renderLayer(this,Se,ge,Ue)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const ge=this.style._layers[I[this.currentLayer]],Se=D[ge.source];if(q&&q.renderLayer(ge))continue;const Ue=(ge.type==="symbol"?se:oe)[ge.source];this._renderTileClippingMasks(ge,J[ge.source]),this.renderLayer(this,Se,ge,Ue)}if(this.options.showTileBoundaries){let ge,Se;Object.values(this.style._layers).forEach(Ue=>{Ue.source&&!Ue.isHidden(this.transform.zoom)&&(Ue.source!==(Se&&Se.id)&&(Se=this.style.sourceCaches[Ue.source]),(!ge||ge.getSource().maxzoom<Se.getSource().maxzoom)&&(ge=Se))}),ge&&Zs.debug(this,ge,ge.getVisibleCoordinates())}this.options.showPadding&&function(ge){const Se=ge.transform.padding;Ns(ge,ge.transform.height-(Se.top||0),3,za),Ns(ge,Se.bottom||0,3,Sa),Sl(ge,Se.left||0,3,Yl),Sl(ge,ge.transform.width-(Se.right||0),3,El);const Ue=ge.transform.centerPoint;(function(Je,St,vt,xt){ol(Je,St-1,vt-10,2,20,xt),ol(Je,St-10,vt-1,20,2,xt)})(ge,Ue.x,ge.transform.height-Ue.y,Zu)}(this),this.context.setDefault()}renderLayer(d,k,I,D){I.isHidden(this.transform.zoom)||(I.type==="background"||I.type==="custom"||(D||[]).length)&&(this.id=I.id,this.gpuTimingStart(I),Zs[I.type](d,k,I,D,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const k=this.context.extTimerQuery;let I=this.gpuTimers[d.id];I||(I=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:k.createQueryEXT()}),I.calls++,k.beginQueryEXT(k.TIME_ELAPSED_EXT,I.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const k={};for(const I in d){const D=d[I],q=this.context.extTimerQuery,J=q.getQueryObjectEXT(D.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(D.query),k[I]=J}return k}translatePosMatrix(d,k,I,D,q){if(!I[0]&&!I[1])return d;const J=q?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(J){const ge=Math.sin(J),Se=Math.cos(J);I=[I[0]*Se-I[1]*ge,I[0]*ge+I[1]*Se]}const oe=[q?I[0]:yo(k,I[0],this.transform.zoom),q?I[1]:yo(k,I[1],this.transform.zoom),0],se=new Float32Array(16);return s.translate(se,d,oe),se}saveTileTexture(d){const k=this._tileTextures[d.size[0]];k?k.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const k=this._tileTextures[d];return k&&k.length>0?k.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const k=this.imageManager.getPattern(d.from.toString()),I=this.imageManager.getPattern(d.to.toString());return!k||!I}useProgram(d,k){this.cache=this.cache||{};const I=d+(k?k.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[I]||(this.cache[I]=new vs(this.context,d,na[d],k,Tt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new B(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ra{constructor(d,k){this.points=d,this.planes=k}static fromInvProjectionMatrix(d,k,I){const D=Math.pow(2,I),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(oe=>{const se=1/(oe=s.transformMat4([],oe,d))[3]/k*D;return s.mul$1(oe,oe,[se,se,1/oe[3],se])}),J=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(oe=>{const se=s.sub([],q[oe[0]],q[oe[1]]),ge=s.sub([],q[oe[2]],q[oe[1]]),Se=s.normalize([],s.cross([],se,ge)),Ue=-s.dot(Se,q[oe[1]]);return Se.concat(Ue)});return new Ra(q,J)}}class Kl{constructor(d,k){this.min=d,this.max=k,this.center=s.scale$1([],s.add([],this.min,this.max),.5)}quadrant(d){const k=[d%2==0,d<2],I=s.clone$2(this.min),D=s.clone$2(this.max);for(let q=0;q<k.length;q++)I[q]=k[q]?this.min[q]:this.center[q],D[q]=k[q]?this.center[q]:this.max[q];return D[2]=this.max[2],new Kl(I,D)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const k=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let I=!0;for(let D=0;D<d.planes.length;D++){const q=d.planes[D];let J=0;for(let oe=0;oe<k.length;oe++)s.dot$1(q,k[oe])>=0&&J++;if(J===0)return 0;J!==k.length&&(I=!1)}if(I)return 2;for(let D=0;D<3;D++){let q=Number.MAX_VALUE,J=-Number.MAX_VALUE;for(let oe=0;oe<d.points.length;oe++){const se=d.points[oe][D]-this.min[D];q=Math.min(q,se),J=Math.max(J,se)}if(J<0||q>this.max[D]-this.min[D])return 0}return 1}}class Xs{constructor(d=0,k=0,I=0,D=0){if(isNaN(d)||d<0||isNaN(k)||k<0||isNaN(I)||I<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=k,this.left=I,this.right=D}interpolate(d,k,I){return k.top!=null&&d.top!=null&&(this.top=s.number(d.top,k.top,I)),k.bottom!=null&&d.bottom!=null&&(this.bottom=s.number(d.bottom,k.bottom,I)),k.left!=null&&d.left!=null&&(this.left=s.number(d.left,k.left,I)),k.right!=null&&d.right!=null&&(this.right=s.number(d.right,k.right,I)),this}getCenter(d,k){const I=s.clamp((this.left+d-this.right)/2,0,d),D=s.clamp((this.top+k-this.bottom)/2,0,k);return new s.pointGeometry(I,D)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Xs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Il{constructor(d,k,I,D,q){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=q===void 0||!!q,this._minZoom=d||0,this._maxZoom=k||22,this._minPitch=I??0,this._maxPitch=D??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xs,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Il(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const k=-s.wrap(d,-180,180)*Math.PI/180;var I;this.angle!==k&&(this._unmodified=!1,this.angle=k,this._calcMatrices(),this.rotationMatrix=(I=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I),function(D,q,J){var oe=q[0],se=q[1],ge=q[2],Se=q[3],Ue=Math.sin(J),Je=Math.cos(J);D[0]=oe*Je+ge*Ue,D[1]=se*Je+Se*Ue,D[2]=oe*-Ue+ge*Je,D[3]=se*-Ue+Se*Je}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const k=s.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==k&&(this._unmodified=!1,this._pitch=k,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const k=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==k&&(this._unmodified=!1,this._zoom=k,this.scale=this.zoomScale(k),this.tileZoom=Math.floor(k),this.zoomFraction=k-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,k,I){this._unmodified=!1,this._edgeInsets.interpolate(d,k,I),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const k=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,k)}getVisibleUnwrappedCoordinates(d){const k=[new s.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const I=this.pointCoordinate(new s.pointGeometry(0,0)),D=this.pointCoordinate(new s.pointGeometry(this.width,0)),q=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),J=this.pointCoordinate(new s.pointGeometry(0,this.height)),oe=Math.floor(Math.min(I.x,D.x,q.x,J.x)),se=Math.floor(Math.max(I.x,D.x,q.x,J.x)),ge=1;for(let Se=oe-ge;Se<=se+ge;Se++)Se!==0&&k.push(new s.UnwrappedTileID(Se,d))}return k}coveringTiles(d){var k,I;let D=this.coveringZoomLevel(d);const q=D;if(d.minzoom!==void 0&&D<d.minzoom)return[];d.maxzoom!==void 0&&D>d.maxzoom&&(D=d.maxzoom);const J=this.pointCoordinate(this.getCameraPoint()),oe=s.MercatorCoordinate.fromLngLat(this.center),se=Math.pow(2,D),ge=[se*J.x,se*J.y,0],Se=[se*oe.x,se*oe.y,0],Ue=Ra.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,D);let Je=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Je=D);const St=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,vt=Dt=>({aabb:new Kl([Dt*se,0,0],[(Dt+1)*se,se,0]),zoom:0,x:0,y:0,wrap:Dt,fullyVisible:!1}),xt=[],tr=[],cr=D,Ar=d.reparseOverscaled?q:D;if(this._renderWorldCopies)for(let Dt=1;Dt<=3;Dt++)xt.push(vt(-Dt)),xt.push(vt(Dt));for(xt.push(vt(0));xt.length>0;){const Dt=xt.pop(),Lr=Dt.x,Ir=Dt.y;let Zr=Dt.fullyVisible;if(!Zr){const Vn=Dt.aabb.intersects(Ue);if(Vn===0)continue;Zr=Vn===2}const Gr=d.terrain?ge:Se,mn=Dt.aabb.distanceX(Gr),qr=Dt.aabb.distanceY(Gr),zn=Math.max(Math.abs(mn),Math.abs(qr)),En=St+(1<<cr-Dt.zoom)-2;if(Dt.zoom===cr||zn>En&&Dt.zoom>=Je){const Vn=cr-Dt.zoom,Ti=ge[0]-.5-(Lr<<Vn),Di=ge[1]-.5-(Ir<<Vn);tr.push({tileID:new s.OverscaledTileID(Dt.zoom===cr?Ar:Dt.zoom,Dt.wrap,Dt.zoom,Lr,Ir),distanceSq:s.sqrLen([Se[0]-.5-Lr,Se[1]-.5-Ir]),tileDistanceToCamera:Math.sqrt(Ti*Ti+Di*Di)})}else for(let Vn=0;Vn<4;Vn++){const Ti=(Lr<<1)+Vn%2,Di=(Ir<<1)+(Vn>>1),N=Dt.zoom+1;let $=Dt.aabb.quadrant(Vn);if(d.terrain){const re=new s.OverscaledTileID(N,Dt.wrap,N,Ti,Di),fe=d.terrain.getMinMaxElevation(re),Le=(k=fe.minElevation)!==null&&k!==void 0?k:this.elevation,Be=(I=fe.maxElevation)!==null&&I!==void 0?I:this.elevation;$=new Kl([$.min[0],$.min[1],Le],[$.max[0],$.max[1],Be])}xt.push({aabb:$,zoom:N,x:Ti,y:Di,wrap:Dt.wrap,fullyVisible:Zr})}}return tr.sort((Dt,Lr)=>Dt.distanceSq-Lr.distanceSq).map(Dt=>Dt.tileID)}resize(d,k){this.width=d,this.height=k,this.pixelsToGLUnits=[2/d,-2/k],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const k=s.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(d.lng)*this.worldSize,s.mercatorYfromLat(k)*this.worldSize)}unproject(d){return new s.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,k){const I=s.MercatorCoordinate.fromLngLat(d),D=(1<<this.tileZoom)*s.EXTENT,q=I.x*D,J=I.y*D,oe=Math.floor(q/s.EXTENT),se=Math.floor(J/s.EXTENT),ge=new s.OverscaledTileID(this.tileZoom,0,this.tileZoom,oe,se);return k.getElevation(ge,q%s.EXTENT,J%s.EXTENT,s.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const k=this.pointLocation(this.centerPoint,d),I=this.getElevation(k,d);if(!(this.elevation-I))return;const D=this.getCameraPosition(),q=s.MercatorCoordinate.fromLngLat(D.lngLat,D.altitude),J=s.MercatorCoordinate.fromLngLat(k,I),oe=q.x-J.x,se=q.y-J.y,ge=q.z-J.z,Se=Math.sqrt(oe*oe+se*se+ge*ge),Ue=this.scaleZoom(this.cameraToCenterDistance/Se/this.tileSize);this._elevation=I,this._center=k,this.zoom=Ue}setLocationAtPoint(d,k){const I=this.pointCoordinate(k),D=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(d),J=new s.MercatorCoordinate(q.x-(I.x-D.x),q.y-(I.y-D.y));this.center=this.coordinateLocation(J),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,k){return k?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,k),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,k){return this.coordinateLocation(this.pointCoordinate(d,k))}locationCoordinate(d){return s.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,k){if(k){const Je=k.pointCoordinate(d);if(Je!=null)return Je}const I=[d.x,d.y,0,1],D=[d.x,d.y,1,1];s.transformMat4(I,I,this.pixelMatrixInverse),s.transformMat4(D,D,this.pixelMatrixInverse);const q=I[3],J=D[3],oe=I[1]/q,se=D[1]/J,ge=I[2]/q,Se=D[2]/J,Ue=(0-ge)/(Se-ge);return new s.MercatorCoordinate(s.number(I[0]/q,D[0]/J,Ue)/this.worldSize,s.number(oe,se,Ue)/this.worldSize)}coordinatePoint(d,k=0,I=this.pixelMatrix){const D=[d.x*this.worldSize,d.y*this.worldSize,k,1];return s.transformMat4(D,D,I),new s.pointGeometry(D[0]/D[3],D[1]/D[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,d))).extend(this.pointLocation(new s.pointGeometry(this.width,d))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,k=!1){const I=d.key,D=k?this._alignedPosMatrixCache:this._posMatrixCache;if(D[I])return D[I];const q=d.canonical,J=this.worldSize/this.zoomScale(q.z),oe=q.x+Math.pow(2,q.z)*d.wrap,se=s.identity(new Float64Array(16));return s.translate(se,se,[oe*J,q.y*J,0]),s.scale(se,se,[J/s.EXTENT,J/s.EXTENT,1]),s.multiply(se,k?this.alignedProjMatrix:this.projMatrix,se),D[I]=new Float32Array(se),D[I]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,k,I,D,q=-90,J=90,oe=-180,se=180;const ge=this.size,Se=this._unmodified;if(this.latRange){const St=this.latRange;q=s.mercatorYfromLat(St[1])*this.worldSize,J=s.mercatorYfromLat(St[0])*this.worldSize,d=J-q<ge.y?ge.y/(J-q):0}if(this.lngRange){const St=this.lngRange;oe=s.wrap(s.mercatorXfromLng(St[0])*this.worldSize,0,this.worldSize),se=s.wrap(s.mercatorXfromLng(St[1])*this.worldSize,0,this.worldSize),se<oe&&(se+=this.worldSize),k=se-oe<ge.x?ge.x/(se-oe):0}const Ue=this.point,Je=Math.max(k||0,d||0);if(Je)return this.center=this.unproject(new s.pointGeometry(k?(se+oe)/2:Ue.x,d?(J+q)/2:Ue.y)),this.zoom+=this.scaleZoom(Je),this._unmodified=Se,void(this._constraining=!1);if(this.latRange){const St=Ue.y,vt=ge.y/2;St-vt<q&&(D=q+vt),St+vt>J&&(D=J-vt)}if(this.lngRange){const St=(oe+se)/2,vt=s.wrap(Ue.x,St-this.worldSize/2,St+this.worldSize/2),xt=ge.x/2;vt-xt<oe&&(I=oe+xt),vt+xt>se&&(I=se-xt)}I===void 0&&D===void 0||(this.center=this.unproject(new s.pointGeometry(I!==void 0?I:Ue.x,D!==void 0?D:Ue.y)).wrap()),this._unmodified=Se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,k=this.point.x,I=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let D=s.identity(new Float64Array(16));s.scale(D,D,[this.width/2,-this.height/2,1]),s.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=s.identity(new Float64Array(16)),s.scale(D,D,[1,-1,1]),s.translate(D,D,[-1,-1,0]),s.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const q=Math.PI/2+this._pitch,J=this._fov*(.5+d.y/this.height),oe=Math.sin(J)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-q-J,.01,Math.PI-.01)),se=this.getHorizon(),ge=2*Math.atan(se/this.cameraToCenterDistance)*(.5+d.y/(2*se)),Se=Math.sin(ge)*this.cameraToSeaLevelDistance/Math.sin(s.clamp(Math.PI-q-ge,.01,Math.PI-.01)),Ue=Math.cos(Math.PI/2-this._pitch)*oe+this.cameraToSeaLevelDistance,Je=Math.cos(Math.PI/2-this._pitch)*Se+this.cameraToSeaLevelDistance,St=1.01*Math.min(Ue,Je),vt=this.height/50;D=new Float64Array(16),s.perspective(D,this._fov,this.width/this.height,vt,St),D[8]=2*-d.x/this.width,D[9]=2*d.y/this.height,s.scale(D,D,[1,-1,1]),s.translate(D,D,[0,0,-this.cameraToCenterDistance]),s.rotateX(D,D,this._pitch),s.rotateZ(D,D,this.angle),s.translate(D,D,[-k,-I,0]),this.mercatorMatrix=s.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),s.scale(D,D,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D),s.translate(D,D,[0,0,-this.elevation]),this.projMatrix=D,this.invProjMatrix=s.invert([],D),this.pixelMatrix3D=s.multiply(new Float64Array(16),this.labelPlaneMatrix,D);const xt=this.width%2/2,tr=this.height%2/2,cr=Math.cos(this.angle),Ar=Math.sin(this.angle),Dt=k-Math.round(k)+cr*xt+Ar*tr,Lr=I-Math.round(I)+cr*tr+Ar*xt,Ir=new Float64Array(D);if(s.translate(Ir,Ir,[Dt>.5?Dt-1:Dt,Lr>.5?Lr-1:Lr,0]),this.alignedProjMatrix=Ir,D=s.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new s.pointGeometry(0,0)),k=[d.x*this.worldSize,d.y*this.worldSize,0,1];return s.transformMat4(k,k,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,d))}getCameraQueryGeometry(d){const k=this.getCameraPoint();if(d.length===1)return[d[0],k];{let I=k.x,D=k.y,q=k.x,J=k.y;for(const oe of d)I=Math.min(I,oe.x),D=Math.min(D,oe.y),q=Math.max(q,oe.x),J=Math.max(J,oe.y);return[new s.pointGeometry(I,D),new s.pointGeometry(q,D),new s.pointGeometry(q,J),new s.pointGeometry(I,J),new s.pointGeometry(I,D)]}}}class is{constructor(d){this._hashName=d&&encodeURIComponent(d),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(k,I){let D=!1,q=null;const J=()=>{q=null,D&&(k(),q=setTimeout(J,300),D=!1)};return()=>(D=!0,q||J(),q)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const k=this._map.getCenter(),I=Math.round(100*this._map.getZoom())/100,D=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,D),J=Math.round(k.lng*q)/q,oe=Math.round(k.lat*q)/q,se=this._map.getBearing(),ge=this._map.getPitch();let Se="";if(Se+=d?`/${J}/${oe}/${I}`:`${I}/${oe}/${J}`,(se||ge)&&(Se+="/"+Math.round(10*se)/10),ge&&(Se+=`/${Math.round(ge)}`),this._hashName){const Ue=this._hashName;let Je=!1;const St=window.location.hash.slice(1).split("&").map(vt=>{const xt=vt.split("=")[0];return xt===Ue?(Je=!0,`${xt}=${Se}`):vt}).filter(vt=>vt);return Je||St.push(`${Ue}=${Se}`),`#${St.join("&")}`}return`#${Se}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let k;return d.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(k=I)}),(k&&k[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(k=>isNaN(k))){const k=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:k,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const Ll={linearity:.3,easing:s.bezier(0,0,.3,1)},pc=s.extend({deceleration:2500,maxSpeed:1400},Ll),zc=s.extend({deceleration:20,maxSpeed:1400},Ll),Tl=s.extend({deceleration:1e3,maxSpeed:360},Ll),Ga=s.extend({deceleration:1e3,maxSpeed:90},Ll);class Rs{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,k=s.exported.now();for(;d.length>0&&k-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const k={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:q}of this._inertiaBuffer)k.zoom+=q.zoomDelta||0,k.bearing+=q.bearingDelta||0,k.pitch+=q.pitchDelta||0,q.panDelta&&k.pan._add(q.panDelta),q.around&&(k.around=q.around),q.pinchAround&&(k.pinchAround=q.pinchAround);const I=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(k.pan.mag()){const q=Ya(k.pan.mag(),I,s.extend({},pc,d||{}));D.offset=k.pan.mult(q.amount/k.pan.mag()),D.center=this._map.transform.center,Os(D,q)}if(k.zoom){const q=Ya(k.zoom,I,zc);D.zoom=this._map.transform.zoom+q.amount,Os(D,q)}if(k.bearing){const q=Ya(k.bearing,I,Tl);D.bearing=this._map.transform.bearing+s.clamp(q.amount,-179,179),Os(D,q)}if(k.pitch){const q=Ya(k.pitch,I,Ga);D.pitch=this._map.transform.pitch+q.amount,Os(D,q)}if(D.zoom||D.bearing){const q=k.pinchAround===void 0?k.around:k.pinchAround;D.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),s.extend(D,{noMoveStart:!0})}}function Os(M,d){(!M.duration||M.duration<d.duration)&&(M.duration=d.duration,M.easing=d.easing)}function Ya(M,d,k){const{maxSpeed:I,linearity:D,deceleration:q}=k,J=s.clamp(M*D/(d/1e3),-I,I),oe=Math.abs(J)/(q*D);return{easing:k.easing,duration:1e3*oe,amount:J*(oe/2)}}class sa extends s.Event{constructor(d,k,I,D={}){const q=L.mousePos(k.getCanvasContainer(),I),J=k.unproject(q);super(d,s.extend({point:q,lngLat:J,originalEvent:I},D)),this._defaultPrevented=!1,this.target=k}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Fs extends s.Event{constructor(d,k,I){const D=d==="touchend"?I.changedTouches:I.touches,q=L.touchPos(k.getCanvasContainer(),D),J=q.map(se=>k.unproject(se)),oe=q.reduce((se,ge,Se,Ue)=>se.add(ge.div(Ue.length)),new s.pointGeometry(0,0));super(d,{points:q,point:oe,lngLats:J,lngLat:k.unproject(oe),originalEvent:I}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class la extends s.Event{constructor(d,k,I){super(d,{originalEvent:I}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Xu{constructor(d,k){this._map=d,this._clickTolerance=k.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new la(d.type,this._map,d))}mousedown(d,k){return this._mousedownPos=k,this._firePreventable(new sa(d.type,this._map,d))}mouseup(d){this._map.fire(new sa(d.type,this._map,d))}click(d,k){this._mousedownPos&&this._mousedownPos.dist(k)>=this._clickTolerance||this._map.fire(new sa(d.type,this._map,d))}dblclick(d){return this._firePreventable(new sa(d.type,this._map,d))}mouseover(d){this._map.fire(new sa(d.type,this._map,d))}mouseout(d){this._map.fire(new sa(d.type,this._map,d))}touchstart(d){return this._firePreventable(new Fs(d.type,this._map,d))}touchmove(d){this._map.fire(new Fs(d.type,this._map,d))}touchend(d){this._map.fire(new Fs(d.type,this._map,d))}touchcancel(d){this._map.fire(new Fs(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new sa(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new sa(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fs{constructor(d,k){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=k.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,k){this.isEnabled()&&d.shiftKey&&d.button===0&&(L.disableDrag(),this._startPos=this._lastPos=k,this._active=!0)}mousemoveWindow(d,k){if(!this._active)return;const I=k;if(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)return;const D=this._startPos;this._lastPos=I,this._box||(this._box=L.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const q=Math.min(D.x,I.x),J=Math.max(D.x,I.x),oe=Math.min(D.y,I.y),se=Math.max(D.y,I.y);L.setTransform(this._box,`translate(${q}px,${oe}px)`),this._box.style.width=J-q+"px",this._box.style.height=se-oe+"px"}mouseupWindow(d,k){if(!this._active||d.button!==0)return;const I=this._startPos,D=k;if(this.reset(),L.suppressClick(),I.x!==D.x||I.y!==D.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:q=>q.fitScreenCoordinates(I,D,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,k){return this._map.fire(new s.Event(d,{originalEvent:k}))}}function oo(M,d){if(M.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${M.length}, points ${d.length}`);const k={};for(let I=0;I<M.length;I++)k[M[I].identifier]=d[I];return k}class Es{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,k,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),I.length===this.numTouches&&(this.centroid=function(D){const q=new s.pointGeometry(0,0);for(const J of D)q._add(J);return q.div(D.length)}(k),this.touches=oo(I,k)))}touchmove(d,k,I){if(this.aborted||!this.centroid)return;const D=oo(I,k);for(const q in this.touches){const J=this.touches[q],oe=D[q];(!oe||oe.dist(J)>30)&&(this.aborted=!0)}}touchend(d,k,I){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),I.length===0){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class al{constructor(d){this.singleTap=new Es(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,k,I){this.singleTap.touchstart(d,k,I)}touchmove(d,k,I){this.singleTap.touchmove(d,k,I)}touchend(d,k,I){const D=this.singleTap.touchend(d,k,I);if(D){const q=d.timeStamp-this.lastTime<500,J=!this.lastTap||this.lastTap.dist(D)<30;if(q&&J||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class Ql{constructor(){this._zoomIn=new al({numTouches:1,numTaps:2}),this._zoomOut=new al({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,k,I){this._zoomIn.touchstart(d,k,I),this._zoomOut.touchstart(d,k,I)}touchmove(d,k,I){this._zoomIn.touchmove(d,k,I),this._zoomOut.touchmove(d,k,I)}touchend(d,k,I){const D=this._zoomIn.touchend(d,k,I),q=this._zoomOut.touchend(d,k,I);return D?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:J=>J.easeTo({duration:300,zoom:J.getZoom()+1,around:J.unproject(D)},{originalEvent:d})}):q?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:J=>J.easeTo({duration:300,zoom:J.getZoom()-1,around:J.unproject(q)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Eu={0:1,2:2};class Ca{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,k){return!1}_move(d,k){return{}}mousedown(d,k){if(this._lastPoint)return;const I=L.mouseButton(d);this._correctButton(d,I)&&(this._lastPoint=k,this._eventButton=I)}mousemoveWindow(d,k){const I=this._lastPoint;if(I){if(d.preventDefault(),function(D,q){const J=Eu[q];return D.buttons===void 0||(D.buttons&J)!==J}(d,this._eventButton))this.reset();else if(this._moved||!(k.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=k,this._move(I,k)}}mouseupWindow(d){this._lastPoint&&L.mouseButton(d)===this._eventButton&&(this._moved&&L.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pl extends Ca{mousedown(d,k){super.mousedown(d,k),this._lastPoint&&(this._active=!0)}_correctButton(d,k){return k===0&&!d.ctrlKey}_move(d,k){return{around:k,panDelta:k.sub(d)}}}class ba extends Ca{_correctButton(d,k){return k===0&&d.ctrlKey||k===2}_move(d,k){const I=.8*(k.x-d.x);if(I)return this._active=!0,{bearingDelta:I}}contextmenu(d){d.preventDefault()}}class Dn extends Ca{_correctButton(d,k){return k===0&&d.ctrlKey||k===2}_move(d,k){const I=-.5*(k.y-d.y);if(I)return this._active=!0,{pitchDelta:I}}contextmenu(d){d.preventDefault()}}class Fo{constructor(d,k){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=k,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,k,I){return this._calculateTransform(d,k,I)}touchmove(d,k,I){if(this._map._cooperativeGestures&&(this._minTouches===2&&I.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,I.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(I.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,k,I)}touchend(d,k,I){this._calculateTransform(d,k,I),this._active&&I.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,k,I){I.length>0&&(this._active=!0);const D=oo(I,k),q=new s.pointGeometry(0,0),J=new s.pointGeometry(0,0);let oe=0;for(const ge in D){const Se=D[ge],Ue=this._touches[ge];Ue&&(q._add(Se),J._add(Se.sub(Ue)),oe++,D[ge]=Se)}if(this._touches=D,oe<this._minTouches||!J.mag())return;const se=J.div(oe);return this._sum._add(se),this._sum.mag()<this._clickTolerance?void 0:{around:q.div(oe),panDelta:se}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ki{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,k,I){return{}}touchstart(d,k,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([k[0],k[1]]))}touchmove(d,k,I){if(!this._firstTwoTouches)return;d.preventDefault();const[D,q]=this._firstTwoTouches,J=Bo(I,k,D),oe=Bo(I,k,q);if(!J||!oe)return;const se=this._aroundCenter?null:J.add(oe).div(2);return this._move([J,oe],se,d)}touchend(d,k,I){if(!this._firstTwoTouches)return;const[D,q]=this._firstTwoTouches,J=Bo(I,k,D),oe=Bo(I,k,q);J&&oe||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bo(M,d,k){for(let I=0;I<M.length;I++)if(M[I].identifier===k)return d[I]}function ga(M,d){return Math.log(M/d)/Math.LN2}class An extends Ki{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,k){const I=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(ga(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ga(this._distance,I),pinchAround:k}}}function Ss(M,d){return 180*M.angleWith(d)/Math.PI}class Yu extends Ki{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,k){const I=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ss(this._vector,I),pinchAround:k}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const k=25/(Math.PI*this._minDiameter)*360,I=Ss(d,this._startVector);return Math.abs(I)<k}}function Ju(M){return Math.abs(M.y)>Math.abs(M.x)}class Nc extends Ki{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,k,I){super.touchstart(d,k,I),this._currentTouchCount=I.length}_start(d){this._lastPoints=d,Ju(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,k,I){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const D=d[0].sub(this._lastPoints[0]),q=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(D,q,I.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(D.y+q.y)/2*-.5}):void 0}gestureBeginsVertically(d,k,I){if(this._valid!==void 0)return this._valid;const D=d.mag()>=2,q=k.mag()>=2;if(!D&&!q)return;if(!D||!q)return this._firstMove===void 0&&(this._firstMove=I),I-this._firstMove<100&&void 0;const J=d.y>0==k.y>0;return Ju(d)&&Ju(k)&&J}}const e0={panStep:100,bearingStep:15,pitchStep:10};class t0{constructor(){const d=e0;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let k=0,I=0,D=0,q=0,J=0;switch(d.keyCode){case 61:case 107:case 171:case 187:k=1;break;case 189:case 109:case 173:k=-1;break;case 37:d.shiftKey?I=-1:(d.preventDefault(),q=-1);break;case 39:d.shiftKey?I=1:(d.preventDefault(),q=1);break;case 38:d.shiftKey?D=1:(d.preventDefault(),J=-1);break;case 40:d.shiftKey?D=-1:(d.preventDefault(),J=1);break;default:return}return this._rotationDisabled&&(I=0,D=0),{cameraAnimation:oe=>{const se=oe.getZoom();oe.easeTo({duration:300,easeId:"keyboardHandler",easing:w0,zoom:k?Math.round(se)+k*(d.shiftKey?2:1):se,bearing:oe.getBearing()+I*this._bearingStep,pitch:oe.getPitch()+D*this._pitchStep,offset:[-q*this._panStep,-J*this._panStep],center:oe.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function w0(M){return M*(2-M)}const Mi=4.000244140625;class Rc{constructor(d,k){this._map=d,this._el=d.getCanvasContainer(),this._handler=k,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let k=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const I=s.exported.now(),D=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,k!==0&&k%Mi==0?this._type="wheel":k!==0&&Math.abs(k)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=k,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(D*k)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,k+=this._lastValue)),d.shiftKey&&k&&(k/=4),this._type&&(this._lastWheelEvent=d,this._delta-=k,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const k=L.mousePos(this._el,d);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(k)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const oe=this._type==="wheel"&&Math.abs(this._delta)>Mi?this._wheelZoomRate:this._defaultZoomRate;let se=2/(1+Math.exp(-Math.abs(this._delta*oe)));this._delta<0&&se!==0&&(se=1/se);const ge=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(ge*se))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const k=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,I=this._startZoom,D=this._easing;let q,J=!1;if(this._type==="wheel"&&I&&D){const oe=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),se=D(oe);q=s.number(I,k,se),oe<1?this._frameId||(this._frameId=!0):J=!0}else q=k,J=!0;return this._active=!0,J&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!J,zoomDelta:q-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let k=s.ease;if(this._prevEase){const I=this._prevEase,D=(s.exported.now()-I.start)/I.duration,q=I.easing(D+.01)-I.easing(D),J=.27/Math.sqrt(q*q+1e-4)*.01,oe=Math.sqrt(.0729-J*J);k=s.bezier(J,oe,.25,1)}return this._prevEase={start:s.exported.now(),duration:d,easing:k},k}reset(){this._active=!1}}class dc{constructor(d,k){this._clickZoom=d,this._tapZoom=k}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ua{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,k){return d.preventDefault(),{cameraAnimation:I=>{I.easeTo({duration:300,zoom:I.getZoom()+(d.shiftKey?-1:1),around:I.unproject(k)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class os{constructor(){this._tap=new al({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,k,I){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=k[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(d,k,I))}touchmove(d,k,I){if(this._tapTime){if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;const D=k[0],q=D.y-this._swipePoint.y;return this._swipePoint=D,d.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(d,k,I)}touchend(d,k,I){this._tapTime?this._swipePoint&&I.length===0&&this.reset():this._tap.touchend(d,k,I)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ia{constructor(d,k,I){this._el=d,this._mousePan=k,this._touchPan=I}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ys{constructor(d,k,I){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=k,this._mousePitch=I}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mc{constructor(d,k,I,D){this._el=d,this._touchZoom=k,this._touchRotate=I,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const eu=M=>M.zoom||M.drag||M.pitch||M.rotate;class tu extends s.Event{}function ru(M){return M.panDelta&&M.panDelta.mag()||M.zoomDelta||M.bearingDelta||M.pitchDelta}class ho{constructor(d,k){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rs(d),this._bearingSnap=k.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(k),s.bindAll(["handleEvent","handleWindowEvent"],this);const I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[window,"blur",void 0]];for(const[D,q,J]of this._listeners)L.addEventListener(D,q,D===document?this.handleWindowEvent:this.handleEvent,J)}destroy(){for(const[d,k,I]of this._listeners)L.removeEventListener(d,k,d===document?this.handleWindowEvent:this.handleEvent,I)}_addDefaultHandlers(d){const k=this._map,I=k.getCanvasContainer();this._add("mapEvent",new Xu(k,d));const D=k.boxZoom=new fs(k,d);this._add("boxZoom",D);const q=new Ql,J=new ua;k.doubleClickZoom=new dc(J,q),this._add("tapZoom",q),this._add("clickZoom",J);const oe=new os;this._add("tapDragZoom",oe);const se=k.touchPitch=new Nc(k);this._add("touchPitch",se);const ge=new ba(d),Se=new Dn(d);k.dragRotate=new Ys(d,ge,Se),this._add("mouseRotate",ge,["mousePitch"]),this._add("mousePitch",Se,["mouseRotate"]);const Ue=new Pl(d),Je=new Fo(d,k);k.dragPan=new ia(I,Ue,Je),this._add("mousePan",Ue),this._add("touchPan",Je,["touchZoom","touchRotate"]);const St=new Yu,vt=new An;k.touchZoomRotate=new mc(I,vt,St,oe),this._add("touchRotate",St,["touchPan","touchZoom"]),this._add("touchZoom",vt,["touchPan","touchRotate"]);const xt=k.scrollZoom=new Rc(k,this);this._add("scrollZoom",xt,["mousePan"]);const tr=k.keyboard=new t0;this._add("keyboard",tr),this._add("blockableMapEvent",new cs(k));for(const cr of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[cr]&&k[cr].enable(d[cr])}_add(d,k,I){this._handlers.push({handlerName:d,handler:k,allowed:I}),this._handlersById[d]=k}stop(d){if(!this._updatingCamera){for(const{handler:k}of this._handlers)k.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!eu(this._eventsInProgress)||this.isZooming()}_blockedByActive(d,k,I){for(const D in d)if(D!==I&&(!k||k.indexOf(D)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const k=[];for(const I of d)this._el.contains(I.target)&&k.push(I);return k}handleEvent(d,k){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=d.type==="renderFrame"?void 0:d,D={needsRenderFrame:!1},q={},J={},oe=d.touches,se=oe?this._getMapTouches(oe):void 0,ge=se?L.touchPos(this._el,se):L.mousePos(this._el,d);for(const{handlerName:Je,handler:St,allowed:vt}of this._handlers){if(!St.isEnabled())continue;let xt;this._blockedByActive(J,vt,Je)?St.reset():St[k||d.type]&&(xt=St[k||d.type](d,ge,se),this.mergeHandlerResult(D,q,xt,Je,I),xt&&xt.needsRenderFrame&&this._triggerRenderFrame()),(xt||St.isActive())&&(J[Je]=St)}const Se={};for(const Je in this._previousActiveHandlers)J[Je]||(Se[Je]=I);this._previousActiveHandlers=J,(Object.keys(Se).length||ru(D))&&(this._changes.push([D,q,Se]),this._triggerRenderFrame()),(Object.keys(J).length||ru(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ue}=D;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))}mergeHandlerResult(d,k,I,D,q){if(!I)return;s.extend(d,I);const J={handlerName:D,originalEvent:I.originalEvent||q};I.zoomDelta!==void 0&&(k.zoom=J),I.panDelta!==void 0&&(k.drag=J),I.pitchDelta!==void 0&&(k.pitch=J),I.bearingDelta!==void 0&&(k.rotate=J)}_applyChanges(){const d={},k={},I={};for(const[D,q,J]of this._changes)D.panDelta&&(d.panDelta=(d.panDelta||new s.pointGeometry(0,0))._add(D.panDelta)),D.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+D.pitchDelta),D.around!==void 0&&(d.around=D.around),D.pinchAround!==void 0&&(d.pinchAround=D.pinchAround),D.noInertia&&(d.noInertia=D.noInertia),s.extend(k,q),s.extend(I,J);this._updateMapTransform(d,k,I),this._changes=[]}_updateMapTransform(d,k,I){const D=this._map,q=D.transform,J=D.style&&D.style.terrain;if(!(ru(d)||J&&this._drag))return this._fireEvents(k,I,!0);let{panDelta:oe,zoomDelta:se,bearingDelta:ge,pitchDelta:Se,around:Ue,pinchAround:Je}=d;Je!==void 0&&(Ue=Je),D._stop(!0),Ue=Ue||D.transform.centerPoint;const St=q.pointLocation(oe?Ue.sub(oe):Ue);ge&&(q.bearing+=ge),Se&&(q.pitch+=Se),se&&(q.zoom+=se),J?k.drag&&!this._drag?(this._drag={center:q.centerPoint,lngLat:q.pointLocation(Ue),point:Ue,handlerName:k.drag.handlerName},D.fire(new s.Event("freezeElevation",{freeze:!0}))):this._drag&&I[this._drag.handlerName]?(D.fire(new s.Event("freezeElevation",{freeze:!1})),this._drag=null):k.drag&&this._drag&&(q.center=q.pointLocation(q.centerPoint.sub(oe))):q.setLocationAtPoint(St,Ue),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(k,I,!0)}_fireEvents(d,k,I){const D=eu(this._eventsInProgress),q=eu(d),J={};for(const Se in d){const{originalEvent:Ue}=d[Se];this._eventsInProgress[Se]||(J[`${Se}start`]=Ue),this._eventsInProgress[Se]=d[Se]}!D&&q&&this._fireEvent("movestart",q.originalEvent);for(const Se in J)this._fireEvent(Se,J[Se]);q&&this._fireEvent("move",q.originalEvent);for(const Se in d){const{originalEvent:Ue}=d[Se];this._fireEvent(Se,Ue)}const oe={};let se;for(const Se in this._eventsInProgress){const{handlerName:Ue,originalEvent:Je}=this._eventsInProgress[Se];this._handlersById[Ue].isActive()||(delete this._eventsInProgress[Se],se=k[Ue]||Je,oe[`${Se}end`]=se)}for(const Se in oe)this._fireEvent(Se,oe[Se]);const ge=eu(this._eventsInProgress);if(I&&(D||q)&&!ge){this._updatingCamera=!0;const Se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ue=Je=>Je!==0&&-this._bearingSnap<Je&&Je<this._bearingSnap;Se?(Ue(Se.bearing||this._map.getBearing())&&(Se.bearing=0),this._map.easeTo(Se,{originalEvent:se})):(this._map.fire(new s.Event("moveend",{originalEvent:se})),Ue(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,k){this._map.fire(new s.Event(d,k?{originalEvent:k}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new tu("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Cs={extend:(M,...d)=>s.extend(M,...d),run(M){M()},logToElement(M,d=!1,k="log"){const I=window.document.getElementById(k);I&&(d&&(I.innerHTML=""),I.innerHTML+=`<br>${M}`)}};class Ho extends s.Evented{constructor(d,k){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=k.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,k){return this.jumpTo({center:d},k)}panBy(d,k,I){return d=s.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,s.extend({offset:d},k),I)}panTo(d,k,I){return this.easeTo(s.extend({center:d},k),I)}getZoom(){return this.transform.zoom}setZoom(d,k){return this.jumpTo({zoom:d},k),this}zoomTo(d,k,I){return this.easeTo(s.extend({zoom:d},k),I)}zoomIn(d,k){return this.zoomTo(this.getZoom()+1,d,k),this}zoomOut(d,k){return this.zoomTo(this.getZoom()-1,d,k),this}getBearing(){return this.transform.bearing}setBearing(d,k){return this.jumpTo({bearing:d},k),this}getPadding(){return this.transform.padding}setPadding(d,k){return this.jumpTo({padding:d},k),this}rotateTo(d,k,I){return this.easeTo(s.extend({bearing:d},k),I)}resetNorth(d,k){return this.rotateTo(0,s.extend({duration:1e3},d),k),this}resetNorthPitch(d,k){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},d),k),this}snapToNorth(d,k){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,k):this}getPitch(){return this.transform.pitch}setPitch(d,k){return this.jumpTo({pitch:d},k),this}cameraForBounds(d,k){d=s.LngLatBounds.convert(d);const I=k&&k.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),I,k)}_cameraForBoxAndBearing(d,k,I,D){const q={top:0,bottom:0,right:0,left:0};if(typeof(D=s.extend({padding:q,offset:[0,0],maxZoom:this.transform.maxZoom},D)).padding=="number"){const Ir=D.padding;D.padding={top:Ir,bottom:Ir,right:Ir,left:Ir}}D.padding=s.extend(q,D.padding);const J=this.transform,oe=J.padding,se=J.project(s.LngLat.convert(d)),ge=J.project(s.LngLat.convert(k)),Se=se.rotate(-I*Math.PI/180),Ue=ge.rotate(-I*Math.PI/180),Je=new s.pointGeometry(Math.max(Se.x,Ue.x),Math.max(Se.y,Ue.y)),St=new s.pointGeometry(Math.min(Se.x,Ue.x),Math.min(Se.y,Ue.y)),vt=Je.sub(St),xt=(J.width-(oe.left+oe.right+D.padding.left+D.padding.right))/vt.x,tr=(J.height-(oe.top+oe.bottom+D.padding.top+D.padding.bottom))/vt.y;if(tr<0||xt<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const cr=Math.min(J.scaleZoom(J.scale*Math.min(xt,tr)),D.maxZoom),Ar=s.pointGeometry.convert(D.offset),Dt=new s.pointGeometry((D.padding.left-D.padding.right)/2,(D.padding.top-D.padding.bottom)/2).rotate(I*Math.PI/180),Lr=Ar.add(Dt).mult(J.scale/J.zoomScale(cr));return{center:J.unproject(se.add(ge).div(2).sub(Lr)),zoom:cr,bearing:I}}fitBounds(d,k,I){return this._fitInternal(this.cameraForBounds(d,k),k,I)}fitScreenCoordinates(d,k,I,D,q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(d)),this.transform.pointLocation(s.pointGeometry.convert(k)),I,D),D,q)}_fitInternal(d,k,I){return d?(delete(k=s.extend(d,k)).padding,k.linear?this.easeTo(k,I):this.flyTo(k,I)):this}jumpTo(d,k){this.stop();const I=this.transform;let D=!1,q=!1,J=!1;return"zoom"in d&&I.zoom!==+d.zoom&&(D=!0,I.zoom=+d.zoom),d.center!==void 0&&(I.center=s.LngLat.convert(d.center)),"bearing"in d&&I.bearing!==+d.bearing&&(q=!0,I.bearing=+d.bearing),"pitch"in d&&I.pitch!==+d.pitch&&(J=!0,I.pitch=+d.pitch),d.padding==null||I.isPaddingEqual(d.padding)||(I.padding=d.padding),this.fire(new s.Event("movestart",k)).fire(new s.Event("move",k)),D&&this.fire(new s.Event("zoomstart",k)).fire(new s.Event("zoom",k)).fire(new s.Event("zoomend",k)),q&&this.fire(new s.Event("rotatestart",k)).fire(new s.Event("rotate",k)).fire(new s.Event("rotateend",k)),J&&this.fire(new s.Event("pitchstart",k)).fire(new s.Event("pitch",k)).fire(new s.Event("pitchend",k)),this.fire(new s.Event("moveend",k))}calculateCameraOptionsFromTo(d,k,I,D=0){const q=s.MercatorCoordinate.fromLngLat(d,k),J=s.MercatorCoordinate.fromLngLat(I,D),oe=J.x-q.x,se=J.y-q.y,ge=J.z-q.z,Se=Math.hypot(oe,se,ge);if(Se===0)throw new Error("Can't calculate camera options with same From and To");const Ue=Math.hypot(oe,se),Je=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Se/this.transform.tileSize),St=180*Math.atan2(oe,-se)/Math.PI;let vt=180*Math.acos(Ue/Se)/Math.PI;return vt=ge<0?90-vt:90+vt,{center:J.toLngLat(),zoom:Je,pitch:vt,bearing:St}}easeTo(d,k){this._stop(!1,d.easeId),((d=s.extend({offset:[0,0],duration:500,easing:s.ease},d)).animate===!1||!d.essential&&s.exported.prefersReducedMotion)&&(d.duration=0);const I=this.transform,D=this.getZoom(),q=this.getBearing(),J=this.getPitch(),oe=this.getPadding(),se="zoom"in d?+d.zoom:D,ge="bearing"in d?this._normalizeBearing(d.bearing,q):q,Se="pitch"in d?+d.pitch:J,Ue="padding"in d?d.padding:I.padding,Je=s.pointGeometry.convert(d.offset);let St=I.centerPoint.add(Je);const vt=I.pointLocation(St),xt=s.LngLat.convert(d.center||vt);this._normalizeCenter(xt);const tr=I.project(vt),cr=I.project(xt).sub(tr),Ar=I.zoomScale(se-D);let Dt,Lr;d.around&&(Dt=s.LngLat.convert(d.around),Lr=I.locationPoint(Dt));const Ir={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||se!==D,this._rotating=this._rotating||q!==ge,this._pitching=this._pitching||Se!==J,this._padding=!I.isPaddingEqual(Ue),this._easeId=d.easeId,this._prepareEase(k,d.noMoveStart,Ir),this._ease(Zr=>{if(this._zooming&&(I.zoom=s.number(D,se,Zr)),this._rotating&&(I.bearing=s.number(q,ge,Zr)),this._pitching&&(I.pitch=s.number(J,Se,Zr)),this._padding&&(I.interpolatePadding(oe,Ue,Zr),St=I.centerPoint.add(Je)),Dt)I.setLocationAtPoint(Dt,Lr);else{const Gr=I.zoomScale(I.zoom-D),mn=se>D?Math.min(2,Ar):Math.max(.5,Ar),qr=Math.pow(mn,1-Zr),zn=I.unproject(tr.add(cr.mult(Zr*qr)).mult(Gr));I.setLocationAtPoint(I.renderWorldCopies?zn.wrap():zn,St)}this._fireMoveEvents(k)},Zr=>{this._afterEase(k,Zr)},d),this}_prepareEase(d,k,I={}){this._moving=!0,this.fire(new s.Event("freezeElevation",{freeze:!0})),k||I.moving||this.fire(new s.Event("movestart",d)),this._zooming&&!I.zooming&&this.fire(new s.Event("zoomstart",d)),this._rotating&&!I.rotating&&this.fire(new s.Event("rotatestart",d)),this._pitching&&!I.pitching&&this.fire(new s.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new s.Event("move",d)),this._zooming&&this.fire(new s.Event("zoom",d)),this._rotating&&this.fire(new s.Event("rotate",d)),this._pitching&&this.fire(new s.Event("pitch",d))}_afterEase(d,k){if(this._easeId&&k&&this._easeId===k)return;delete this._easeId,this.fire(new s.Event("freezeElevation",{freeze:!1}));const I=this._zooming,D=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new s.Event("zoomend",d)),D&&this.fire(new s.Event("rotateend",d)),q&&this.fire(new s.Event("pitchend",d)),this.fire(new s.Event("moveend",d))}flyTo(d,k){if(!d.essential&&s.exported.prefersReducedMotion){const N=s.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(N,k)}this.stop(),d=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},d);const I=this.transform,D=this.getZoom(),q=this.getBearing(),J=this.getPitch(),oe=this.getPadding(),se="zoom"in d?s.clamp(+d.zoom,I.minZoom,I.maxZoom):D,ge="bearing"in d?this._normalizeBearing(d.bearing,q):q,Se="pitch"in d?+d.pitch:J,Ue="padding"in d?d.padding:I.padding,Je=I.zoomScale(se-D),St=s.pointGeometry.convert(d.offset);let vt=I.centerPoint.add(St);const xt=I.pointLocation(vt),tr=s.LngLat.convert(d.center||xt);this._normalizeCenter(tr);const cr=I.project(xt),Ar=I.project(tr).sub(cr);let Dt=d.curve;const Lr=Math.max(I.width,I.height),Ir=Lr/Je,Zr=Ar.mag();if("minZoom"in d){const N=s.clamp(Math.min(d.minZoom,D,se),I.minZoom,I.maxZoom),$=Lr/I.zoomScale(N-D);Dt=Math.sqrt($/Zr*2)}const Gr=Dt*Dt;function mn(N){const $=(Ir*Ir-Lr*Lr+(N?-1:1)*Gr*Gr*Zr*Zr)/(2*(N?Ir:Lr)*Gr*Zr);return Math.log(Math.sqrt($*$+1)-$)}function qr(N){return(Math.exp(N)-Math.exp(-N))/2}function zn(N){return(Math.exp(N)+Math.exp(-N))/2}const En=mn(0);let Vn=function(N){return zn(En)/zn(En+Dt*N)},Ti=function(N){return Lr*((zn(En)*(qr($=En+Dt*N)/zn($))-qr(En))/Gr)/Zr;var $},Di=(mn(1)-En)/Dt;if(Math.abs(Zr)<1e-6||!isFinite(Di)){if(Math.abs(Lr-Ir)<1e-6)return this.easeTo(d,k);const N=Ir<Lr?-1:1;Di=Math.abs(Math.log(Ir/Lr))/Dt,Ti=function(){return 0},Vn=function($){return Math.exp(N*Dt*$)}}return d.duration="duration"in d?+d.duration:1e3*Di/("screenSpeed"in d?+d.screenSpeed/Dt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=q!==ge,this._pitching=Se!==J,this._padding=!I.isPaddingEqual(Ue),this._prepareEase(k,!1),this._ease(N=>{const $=N*Di,re=1/Vn($);I.zoom=N===1?se:D+I.scaleZoom(re),this._rotating&&(I.bearing=s.number(q,ge,N)),this._pitching&&(I.pitch=s.number(J,Se,N)),this._padding&&(I.interpolatePadding(oe,Ue,N),vt=I.centerPoint.add(St));const fe=N===1?tr:I.unproject(cr.add(Ar.mult(Ti($))).mult(re));I.setLocationAtPoint(I.renderWorldCopies?fe.wrap():fe,vt),this._fireMoveEvents(k)},()=>this._afterEase(k),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,k){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,k)}if(!d){const I=this.handlers;I&&I.stop(!1)}return this}_ease(d,k,I){I.animate===!1||I.duration===0?(d(1),k()):(this._easeStart=s.exported.now(),this._easeOptions=I,this._onEaseFrame=d,this._onEaseEnd=k,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,k){d=s.wrap(d,-180,180);const I=Math.abs(d-k);return Math.abs(d-360-k)<I&&(d-=360),Math.abs(d+360-k)<I&&(d+=360),d}_normalizeCenter(d){const k=this.transform;if(!k.renderWorldCopies||k.lngRange)return;const I=d.lng-k.center.lng;d.lng+=I>180?-360:I<-180?360:0}}class Is{constructor(d={}){this.options=d,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,k){const I=this._map._getUIString(`AttributionControl.${k}`);d.title=I,d.setAttribute("aria-label",I)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(D=>typeof D!="string"?"":D)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const k=this._map.style.sourceCaches;for(const D in k){const q=k[D];if(q.used||q.usedForTerrain){const J=q.getSource();J.attribution&&d.indexOf(J.attribution)<0&&d.push(J.attribution)}}d=d.filter(D=>String(D).trim()),d.sort((D,q)=>D.length-q.length),d=d.filter((D,q)=>{for(let J=q+1;J<d.length;J++)if(d[J].indexOf(D)>=0)return!1;return!0});const I=d.join(" | ");I!==this._attribHTML&&(this._attribHTML=I,d.length?(this._innerContainer.innerHTML=I,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Su{constructor(d={}){this.options=d,s.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl mapboxgl-ctrl");const k=L.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return k.target="_blank",k.rel="noopener nofollow",k.href="https://maplibre.org/",k.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),k.setAttribute("rel","noopener nofollow"),this._container.appendChild(k),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const k=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&k.classList.add("maplibregl-compact","mapboxgl-compact"):k.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Oc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const k=++this._id;return this._queue.push({callback:d,id:k,cancelled:!1}),k}remove(d){const k=this._currentlyRunning,I=k?this._queue.concat(k):this._queue;for(const D of I)if(D.id===d)return void(D.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const k=this._currentlyRunning=this._queue;this._queue=[];for(const I of k)if(!I.cancelled&&(I.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Cu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},sl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},x0={showCompass:!0,showZoom:!0,visualizePitch:!1};class ll{constructor(d,k,I=!1){this._clickTolerance=10,this.element=k,this.mouseRotate=new ba({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,I&&(this.mousePitch=new Dn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),L.addEventListener(k,"mousedown",this.mousedown),L.addEventListener(k,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(k,"touchmove",this.touchmove),L.addEventListener(k,"touchend",this.touchend),L.addEventListener(k,"touchcancel",this.reset)}down(d,k){this.mouseRotate.mousedown(d,k),this.mousePitch&&this.mousePitch.mousedown(d,k),L.disableDrag()}move(d,k){const I=this.map,D=this.mouseRotate.mousemoveWindow(d,k);if(D&&D.bearingDelta&&I.setBearing(I.getBearing()+D.bearingDelta),this.mousePitch){const q=this.mousePitch.mousemoveWindow(d,k);q&&q.pitchDelta&&I.setPitch(I.getPitch()+q.pitchDelta)}}off(){const d=this.element;L.removeEventListener(d,"mousedown",this.mousedown),L.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(d,"touchmove",this.touchmove),L.removeEventListener(d,"touchend",this.touchend),L.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(s.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),L.mousePos(this.element,d)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,L.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function gc(M,d,k){if(M=new s.LngLat(M.lng,M.lat),d){const I=new s.LngLat(M.lng-360,M.lat),D=new s.LngLat(M.lng+360,M.lat),q=k.locationPoint(M).distSqr(d);k.locationPoint(I).distSqr(d)<q?M=I:k.locationPoint(D).distSqr(d)<q&&(M=D)}for(;Math.abs(M.lng-k.center.lng)>180;){const I=k.locationPoint(M);if(I.x>=0&&I.y>=0&&I.x<=k.width&&I.y<=k.height)break;M.lng>k.center.lng?M.lng-=360:M.lng+=360}return M}const oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vi(M,d,k){const I=M.classList;for(const D in oi)I.remove(`maplibregl-${k}-anchor-${D}`,`mapboxgl-${k}-anchor-${D}`);I.add(`maplibregl-${k}-anchor-${d}`,`mapboxgl-${k}-anchor-${d}`)}class Oa extends s.Evented{constructor(d,k){if(super(),(d instanceof HTMLElement||k)&&(d=s.extend({element:d},k)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=s.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div"),this._element.setAttribute("aria-label","Map marker");const I=L.createNS("http://www.w3.org/2000/svg","svg"),D=41,q=27;I.setAttributeNS(null,"display","block"),I.setAttributeNS(null,"height",`${D}px`),I.setAttributeNS(null,"width",`${q}px`),I.setAttributeNS(null,"viewBox",`0 0 ${q} ${D}`);const J=L.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"stroke","none"),J.setAttributeNS(null,"stroke-width","1"),J.setAttributeNS(null,"fill","none"),J.setAttributeNS(null,"fill-rule","evenodd");const oe=L.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill-rule","nonzero");const se=L.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(3.0, 29.0)"),se.setAttributeNS(null,"fill","#000000");const ge=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ar of ge){const Dt=L.createNS("http://www.w3.org/2000/svg","ellipse");Dt.setAttributeNS(null,"opacity","0.04"),Dt.setAttributeNS(null,"cx","10.5"),Dt.setAttributeNS(null,"cy","5.80029008"),Dt.setAttributeNS(null,"rx",Ar.rx),Dt.setAttributeNS(null,"ry",Ar.ry),se.appendChild(Dt)}const Se=L.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"fill",this._color);const Ue=L.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Se.appendChild(Ue);const Je=L.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"fill","#000000");const St=L.createNS("http://www.w3.org/2000/svg","path");St.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Je.appendChild(St);const vt=L.createNS("http://www.w3.org/2000/svg","g");vt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),vt.setAttributeNS(null,"fill","#FFFFFF");const xt=L.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const tr=L.createNS("http://www.w3.org/2000/svg","circle");tr.setAttributeNS(null,"fill","#000000"),tr.setAttributeNS(null,"opacity","0.25"),tr.setAttributeNS(null,"cx","5.5"),tr.setAttributeNS(null,"cy","5.5"),tr.setAttributeNS(null,"r","5.4999962");const cr=L.createNS("http://www.w3.org/2000/svg","circle");cr.setAttributeNS(null,"fill","#FFFFFF"),cr.setAttributeNS(null,"cx","5.5"),cr.setAttributeNS(null,"cy","5.5"),cr.setAttributeNS(null,"r","5.4999962"),xt.appendChild(tr),xt.appendChild(cr),oe.appendChild(se),oe.appendChild(Se),oe.appendChild(Je),oe.appendChild(vt),oe.appendChild(xt),I.appendChild(oe),I.setAttributeNS(null,"height",D*this._scale+"px"),I.setAttributeNS(null,"width",q*this._scale+"px"),this._element.appendChild(I),this._offset=s.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",I=>{I.preventDefault()}),this._element.addEventListener("mousedown",I=>{I.preventDefault()}),vi(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=s.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(38.1-13.5+D)],"bottom-right":[-D,-1*(38.1-13.5+D)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const k=d.code,I=d.charCode||d.keyCode;k!=="Space"&&k!=="Enter"&&I!==32&&I!==13||this.togglePopup()}_onMapClick(d){const k=d.originalEvent.target,I=this._element;this._popup&&(k===I||I.contains(k))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=gc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${oi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${k}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const D=this._map.unproject(this._pos),q=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=D.distanceTo(this._lngLat)>20*q?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=s.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const k=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=k}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ku={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let wa,jo=0,Ml=!1;const Js={maxWidth:100,unit:"metric"};function r0(M,d,k){const I=k&&k.maxWidth||100,D=M._container.clientHeight/2,q=M.unproject([0,D]),J=M.unproject([I,D]),oe=q.distanceTo(J);if(k&&k.unit==="imperial"){const se=3.2808*oe;se>5280?Dl(d,I,se/5280,M._getUIString("ScaleControl.Miles")):Dl(d,I,se,M._getUIString("ScaleControl.Feet"))}else k&&k.unit==="nautical"?Dl(d,I,oe/1852,M._getUIString("ScaleControl.NauticalMiles")):oe>=1e3?Dl(d,I,oe/1e3,M._getUIString("ScaleControl.Kilometers")):Dl(d,I,oe,M._getUIString("ScaleControl.Meters"))}function Dl(M,d,k,I){const D=function(q){const J=Math.pow(10,`${Math.floor(q)}`.length-1);let oe=q/J;return oe=oe>=10?10:oe>=5?5:oe>=3?3:oe>=2?2:oe>=1?1:function(se){const ge=Math.pow(10,Math.ceil(-Math.log(se)/Math.LN10));return Math.round(se*ge)/ge}(oe),J*oe}(k);M.style.width=d*(D/k)+"px",M.innerHTML=`${D}&nbsp;${I}`}const ca={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fc(M){if(M){if(typeof M=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(M,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,M),"top-left":new s.pointGeometry(d,d),"top-right":new s.pointGeometry(-d,d),bottom:new s.pointGeometry(0,-M),"bottom-left":new s.pointGeometry(d,-d),"bottom-right":new s.pointGeometry(-d,-d),left:new s.pointGeometry(M,0),right:new s.pointGeometry(-M,0)}}if(M instanceof s.pointGeometry||Array.isArray(M)){const d=s.pointGeometry.convert(M);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:s.pointGeometry.convert(M.center||[0,0]),top:s.pointGeometry.convert(M.top||[0,0]),"top-left":s.pointGeometry.convert(M["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(M["top-right"]||[0,0]),bottom:s.pointGeometry.convert(M.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(M["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(M["bottom-right"]||[0,0]),left:s.pointGeometry.convert(M.left||[0,0]),right:s.pointGeometry.convert(M.right||[0,0])}}return Fc(new s.pointGeometry(0,0))}const as={supported:f,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Ho{constructor(M){var d;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(M=s.extend({},sl,M)).minZoom!=null&&M.maxZoom!=null&&M.minZoom>M.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(M.minPitch!=null&&M.maxPitch!=null&&M.minPitch>M.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(M.minPitch!=null&&M.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(M.maxPitch!=null&&M.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Il(M.minZoom,M.maxZoom,M.minPitch,M.maxPitch,M.renderWorldCopies),{bearingSnap:M.bearingSnap}),this._interactive=M.interactive,this._cooperativeGestures=M.cooperativeGestures,this._maxTileCacheSize=M.maxTileCacheSize,this._failIfMajorPerformanceCaveat=M.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=M.preserveDrawingBuffer,this._antialias=M.antialias,this._trackResize=M.trackResize,this._bearingSnap=M.bearingSnap,this._refreshExpiredTiles=M.refreshExpiredTiles,this._fadeDuration=M.fadeDuration,this._crossSourceCollisions=M.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=M.collectResourceTiming,this._renderTaskQueue=new Oc,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Cu,M.locale),this._clickTolerance=M.clickTolerance,this._pixelRatio=(d=M.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new C(M.transformRequest),typeof M.container=="string"){if(this._container=document.getElementById(M.container),!this._container)throw new Error(`Container '${M.container}' not found.`)}else{if(!(M.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=M.container}if(M.maxBounds&&this.setMaxBounds(M.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ho(this,M),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=M.hash&&new is(typeof M.hash=="string"&&M.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}),M.bounds&&(this.resize(),this.fitBounds(M.bounds,s.extend({},M.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=M.localIdeographFontFamily,M.style&&this.setStyle(M.style,{localIdeographFontFamily:M.localIdeographFontFamily}),M.attributionControl&&this.addControl(new Is({customAttribution:M.customAttribution})),M.maplibreLogo&&this.addControl(new Su,M.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new s.Event(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new s.Event(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new s.Event("sourcedataabort",k))})}_getMapId(){return this._mapId}addControl(M,d){if(d===void 0&&(d=M.getDefaultPosition?M.getDefaultPosition():"top-right"),!M||!M.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const k=M.onAdd(this);this._controls.push(M);const I=this._controlPositions[d];return d.indexOf("bottom")!==-1?I.insertBefore(k,I.firstChild):I.appendChild(k),this}removeControl(M){if(!M||!M.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(M);return d>-1&&this._controls.splice(d,1),M.onRemove(this),this}hasControl(M){return this._controls.indexOf(M)>-1}calculateCameraOptionsFromTo(M,d,k,I){return I==null&&this.style.terrain&&(I=this.transform.getElevation(k,this.style.terrain)),super.calculateCameraOptionsFromTo(M,d,k,I)}resize(M){const d=this._containerDimensions(),k=d[0],I=d[1];this._resizeCanvas(k,I,this.getPixelRatio()),this.transform.resize(k,I),this.painter.resize(k,I,this.getPixelRatio());const D=!this._moving;return D&&(this.stop(),this.fire(new s.Event("movestart",M)).fire(new s.Event("move",M))),this.fire(new s.Event("resize",M)),D&&this.fire(new s.Event("moveend",M)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(M){const[d,k]=this._containerDimensions();this._pixelRatio=M,this._resizeCanvas(d,k,M),this.painter.resize(d,k,M)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(M){return this.transform.setMaxBounds(s.LngLatBounds.convert(M)),this._update()}setMinZoom(M){if((M=M??-2)>=-2&&M<=this.transform.maxZoom)return this.transform.minZoom=M,this._update(),this.getZoom()<M&&this.setZoom(M),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(M){if((M=M??22)>=this.transform.minZoom)return this.transform.maxZoom=M,this._update(),this.getZoom()>M&&this.setZoom(M),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(M){if((M=M??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(M>=0&&M<=this.transform.maxPitch)return this.transform.minPitch=M,this._update(),this.getPitch()<M&&this.setPitch(M),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(M){if((M=M??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(M>=this.transform.minPitch)return this.transform.maxPitch=M,this._update(),this.getPitch()>M&&this.setPitch(M),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(M){return this.transform.renderWorldCopies=M,this._update()}project(M){return this.transform.locationPoint(s.LngLat.convert(M),this.style&&this.style.terrain)}unproject(M){return this.transform.pointLocation(s.pointGeometry.convert(M),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(M,d,k){if(M==="mouseenter"||M==="mouseover"){let I=!1;return{layer:d,listener:k,delegates:{mousemove:q=>{const J=this.getLayer(d)?this.queryRenderedFeatures(q.point,{layers:[d]}):[];J.length?I||(I=!0,k.call(this,new sa(M,this,q.originalEvent,{features:J}))):I=!1},mouseout:()=>{I=!1}}}}if(M==="mouseleave"||M==="mouseout"){let I=!1;return{layer:d,listener:k,delegates:{mousemove:J=>{(this.getLayer(d)?this.queryRenderedFeatures(J.point,{layers:[d]}):[]).length?I=!0:I&&(I=!1,k.call(this,new sa(M,this,J.originalEvent)))},mouseout:J=>{I&&(I=!1,k.call(this,new sa(M,this,J.originalEvent)))}}}}{const I=D=>{const q=this.getLayer(d)?this.queryRenderedFeatures(D.point,{layers:[d]}):[];q.length&&(D.features=q,k.call(this,D),delete D.features)};return{layer:d,listener:k,delegates:{[M]:I}}}}on(M,d,k){if(k===void 0)return super.on(M,d);const I=this._createDelegatedListener(M,d,k);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[M]=this._delegatedListeners[M]||[],this._delegatedListeners[M].push(I);for(const D in I.delegates)this.on(D,I.delegates[D]);return this}once(M,d,k){if(k===void 0)return super.once(M,d);const I=this._createDelegatedListener(M,d,k);for(const D in I.delegates)this.once(D,I.delegates[D]);return this}off(M,d,k){return k===void 0?super.off(M,d):(this._delegatedListeners&&this._delegatedListeners[M]&&(I=>{const D=this._delegatedListeners[M];for(let q=0;q<D.length;q++){const J=D[q];if(J.layer===d&&J.listener===k){for(const oe in J.delegates)this.off(oe,J.delegates[oe]);return D.splice(q,1),this}}})(),this)}queryRenderedFeatures(M,d){if(!this.style)return[];let k;if(d!==void 0||M===void 0||M instanceof s.pointGeometry||Array.isArray(M)||(d=M,M=void 0),d=d||{},(M=M||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof M[0]=="number")k=[s.pointGeometry.convert(M)];else{const I=s.pointGeometry.convert(M[0]),D=s.pointGeometry.convert(M[1]);k=[I,new s.pointGeometry(D.x,I.y),D,new s.pointGeometry(I.x,D.y),I]}return this.style.queryRenderedFeatures(k,d,this.transform)}querySourceFeatures(M,d){return this.style.querySourceFeatures(M,d)}setStyle(M,d){return(d=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&M?(this._diffStyle(M,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(M,d))}setTransformRequest(M){return this._requestManager.setTransformRequest(M),this}_getUIString(M){const d=this._locale[M];if(d==null)throw new Error(`Missing UI string '${M}'`);return d}_updateStyle(M,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),M?(this.style=new Ko(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof M=="string"?this.style.loadURL(M):this.style.loadJSON(M),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ko(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(M,d){if(typeof M=="string"){const k=this._requestManager.transformRequest(M,s.ResourceType.Style);s.getJSON(k,(I,D)=>{I?this.fire(new s.ErrorEvent(I)):D&&this._updateDiff(D,d)})}else typeof M=="object"&&this._updateDiff(M,d)}_updateDiff(M,d){try{this.style.setState(M)&&this._update(!0)}catch(k){s.warnOnce(`Unable to perform style diff: ${k.message||k.error||k}.  Rebuilding the style from scratch.`),this._updateStyle(M,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(M,d){return this._lazyInitEmptyStyle(),this.style.addSource(M,d),this._update(!0)}isSourceLoaded(M){const d=this.style&&this.style.sourceCaches[M];if(d!==void 0)return d.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${M}'`)))}setTerrain(M){return this.style.setTerrain(M),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const M=this.style&&this.style.sourceCaches;for(const d in M){const k=M[d]._tiles;for(const I in k){const D=k[I];if(D.state!=="loaded"&&D.state!=="errored")return!1}}return!0}addSourceType(M,d,k){return this._lazyInitEmptyStyle(),this.style.addSourceType(M,d,k)}removeSource(M){return this.style.removeSource(M),this._update(!0)}getSource(M){return this.style.getSource(M)}addImage(M,d,{pixelRatio:k=1,sdf:I=!1,stretchX:D,stretchY:q,content:J}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||s.isImageBitmap(d)){const{width:oe,height:se,data:ge}=s.exported.getImageData(d);this.style.addImage(M,{data:new s.RGBAImage({width:oe,height:se},ge),pixelRatio:k,stretchX:D,stretchY:q,content:J,sdf:I,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:oe,height:se,data:ge}=d,Se=d;this.style.addImage(M,{data:new s.RGBAImage({width:oe,height:se},new Uint8Array(ge)),pixelRatio:k,stretchX:D,stretchY:q,content:J,sdf:I,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,M)}}}updateImage(M,d){const k=this.style.getImage(M);if(!k)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const I=d instanceof HTMLImageElement||s.isImageBitmap(d)?s.exported.getImageData(d):d,{width:D,height:q,data:J}=I;if(D===void 0||q===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(D!==k.data.width||q!==k.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const oe=!(d instanceof HTMLImageElement||s.isImageBitmap(d));k.data.replace(J,oe),this.style.updateImage(M,k)}hasImage(M){return M?!!this.style.getImage(M):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(M){this.style.removeImage(M)}loadImage(M,d){s.getImage(this._requestManager.transformRequest(M,s.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(M,d){return this._lazyInitEmptyStyle(),this.style.addLayer(M,d),this._update(!0)}moveLayer(M,d){return this.style.moveLayer(M,d),this._update(!0)}removeLayer(M){return this.style.removeLayer(M),this._update(!0)}getLayer(M){return this.style.getLayer(M)}setLayerZoomRange(M,d,k){return this.style.setLayerZoomRange(M,d,k),this._update(!0)}setFilter(M,d,k={}){return this.style.setFilter(M,d,k),this._update(!0)}getFilter(M){return this.style.getFilter(M)}setPaintProperty(M,d,k,I={}){return this.style.setPaintProperty(M,d,k,I),this._update(!0)}getPaintProperty(M,d){return this.style.getPaintProperty(M,d)}setLayoutProperty(M,d,k,I={}){return this.style.setLayoutProperty(M,d,k,I),this._update(!0)}getLayoutProperty(M,d){return this.style.getLayoutProperty(M,d)}setLight(M,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(M,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(M,d){return this.style.setFeatureState(M,d),this._update()}removeFeatureState(M,d){return this.style.removeFeatureState(M,d),this._update()}getFeatureState(M){return this.style.getFeatureState(M)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let M=0,d=0;return this._container&&(M=this._container.clientWidth||400,d=this._container.clientHeight||300),[M,d]}_setupContainer(){const M=this._container;M.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=L.create("div","maplibregl-canvas-container mapboxgl-canvas-container",M);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const k=this._containerDimensions();this._resizeCanvas(k[0],k[1],this.getPixelRatio());const I=this._controlContainer=L.create("div","maplibregl-control-container mapboxgl-control-container",M),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{D[q]=L.create("div",`maplibregl-ctrl-${q} mapboxgl-ctrl-${q}`,I)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const M=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=L.create("div","maplibregl-cooperative-gesture-screen",M);let d="Control",k=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(k=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${k}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",I=>{I.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",I=>{I.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",I=>{this._onCooperativeGesture(I,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(M,d,k){this._canvas.width=k*M,this._canvas.height=k*d,this._canvas.style.width=`${M}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const M=s.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",M)||this._canvas.getContext("experimental-webgl",M);d?(this.painter=new Cl(d,this.transform),s.exported$1.testSupport(d)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(M){M.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:M}))}_contextRestored(M){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:M}))}_onMapScroll(M){if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(M,d,k){return!d&&k<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(M){return this.style?(this._styleDirty=this._styleDirty||M,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(M){return this._update(),this._renderTaskQueue.add(M)}_cancelRenderFrame(M){this._renderTaskQueue.remove(M)}_render(M){let d,k=0;const I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,d),k=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(M),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const J=this.transform.zoom,oe=s.exported.now();this.style.zoomHistory.update(J,oe);const se=new s.EvaluationParameters(J,{now:oe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ge=se.crossFadingFactor();ge===1&&ge===this._crossFadingFactor||(D=!0,this._crossFadingFactor=ge),this.style.update(se)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const J=s.exported.now()-k;I.endQueryEXT(I.TIME_ELAPSED_EXT,d),setTimeout(()=>{const oe=I.getQueryObjectEXT(d,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(d),this.fire(new s.Event("gpu-timing-frame",{cpuTime:J,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){const J=this.painter.collectGpuTimers();setTimeout(()=>{const oe=this.painter.queryGpuTimers(J);this.fire(new s.Event("gpu-timing-layer",{layerTimes:oe}))},50)}const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const M=this.painter.context.gl.getExtension("WEBGL_lose_context");M&&M.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._cooperativeGestures&&L.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(M=>{s.PerformanceUtils.frame(M),this._frame=null,this._render(M)}))}_onWindowOnline(){this._update()}_onWindowResize(M){this._trackResize&&this.resize({originalEvent:M})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(M){this._showTileBoundaries!==M&&(this._showTileBoundaries=M,this._update())}get showPadding(){return!!this._showPadding}set showPadding(M){this._showPadding!==M&&(this._showPadding=M,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(M){this._showCollisionBoxes!==M&&(this._showCollisionBoxes=M,M?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(M){this._showOverdrawInspector!==M&&(this._showOverdrawInspector=M,this._update())}get repaint(){return!!this._repaint}set repaint(M){this._repaint!==M&&(this._repaint=M,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(M){this._vertices=M,this._update()}_setCacheLimits(M,d){s.setCacheLimits(M,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(M){this.options=s.extend({},x0,M),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const M=this._map.getZoom(),d=M===this._map.getMaxZoom(),k=M===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=k,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",k.toString())}_rotateCompassArrow(){const M=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=M}onAdd(M){return this._map=M,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ll(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(M,d){const k=L.create("button",M,this._container);return k.type="button",k.addEventListener("click",d),k}_setButtonTitle(M,d){const k=this._map._getUIString(`NavigationControl.${d}`);M.title=k,M.setAttribute("aria-label",k)}},GeolocateControl:class extends s.Evented{constructor(M){super(),this.options=s.extend({},Ku,M),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(M){var d;return this._map=M,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,wa!==void 0?d(wa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(k=>{wa=k.state!=="denied",d(wa)}):(wa=!!window.navigator.geolocation,d(wa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jo=0,Ml=!1}_isOutOfMapMaxBounds(M){const d=this._map.getMaxBounds(),k=M.coords;return d&&(k.longitude<d.getWest()||k.longitude>d.getEast()||k.latitude<d.getSouth()||k.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(M){if(this._map){if(this._isOutOfMapMaxBounds(M))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",M)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=M,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(M),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(M),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",M)),this._finish()}}_updateCamera(M){const d=new s.LngLat(M.coords.longitude,M.coords.latitude),k=M.coords.accuracy,I=this._map.getBearing(),D=s.extend({bearing:I},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(k),D,{geolocateSource:!0})}_updateMarker(M){if(M){const d=new s.LngLat(M.coords.longitude,M.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=M.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const M=this._map._container.clientHeight/2,d=this._map.unproject([0,M]),k=this._map.unproject([1,M]),I=d.distanceTo(k),D=Math.ceil(2*this._accuracy/I);this._circleElement.style.width=`${D}px`,this._circleElement.style.height=`${D}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(M){if(this._map){if(this.options.trackUserLocation)if(M.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(M.code===3&&Ml)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",M)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(M){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",M===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Oa(this._dotElement),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jo--,Ml=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let M;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jo++,jo>1?(M={maximumAge:6e5,timeout:0},Ml=!0):(M=this.options.positionOptions,Ml=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,M)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Is,LogoControl:Su,ScaleControl:class{constructor(M){this.options=s.extend({},Js,M),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){r0(this._map,this._container,this.options)}onAdd(M){return this._map=M,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",M.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(M){this.options.unit=M,r0(this._map,this._container,this.options)}},FullscreenControl:class{constructor(M){this._fullscreen=!1,M&&M.container&&(M.container instanceof HTMLElement?this._container=M.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(M){return this._map=M,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const M=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",M).setAttribute("aria-hidden","true"),M.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const M=this._getTitle();this._fullscreenButton.setAttribute("aria-label",M),this._fullscreenButton.title=M}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(M){this.options=M,s.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(M){return this._map=M,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends s.Evented{constructor(M){super(),this.options=s.extend(Object.create(ca),M),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(M){return this._map&&this.remove(),this._map=M,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(M){return this._lngLat=s.LngLat.convert(M),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(M){return this.setDOMContent(document.createTextNode(M))}setHTML(M){const d=document.createDocumentFragment(),k=document.createElement("body");let I;for(k.innerHTML=M;I=k.firstChild,I;)d.appendChild(I);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(M){return this.options.maxWidth=M,this._update(),this}setDOMContent(M){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(M),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(M){this._container&&this._container.classList.add(M)}removeClassName(M){this._container&&this._container.classList.remove(M)}setOffset(M){return this.options.offset=M,this._update(),this}toggleClassName(M){if(this._container)return this._container.classList.toggle(M)}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(M){this._update(M.point)}_onMouseMove(M){this._update(M.point)}_onDrag(M){this._update(M.point)}_update(M){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=L.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(q=>this._container.classList.add(q)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!M))return;const d=this._pos=this._trackPointer&&M?M:this._map.project(this._lngLat);let k=this.options.anchor;const I=Fc(this.options.offset);if(!k){const q=this._container.offsetWidth,J=this._container.offsetHeight;let oe;oe=d.y+I.bottom.y<J?["top"]:d.y>this._map.transform.height-J?["bottom"]:[],d.x<q/2?oe.push("left"):d.x>this._map.transform.width-q/2&&oe.push("right"),k=oe.length===0?"bottom":oe.join("-")}const D=d.add(I[k]).round();L.setTransform(this._container,`${oi[k]} translate(${D.x}px,${D.y}px)`),vi(this._container,k,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const M=this._container.querySelector(xa);M&&M.focus()}_onClose(){this.remove()}},Marker:Oa,Style:Ko,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:We,GeoJSONSource:He,ImageSource:bt,RasterDEMTileSource:ht,RasterTileSource:nt,VectorTileSource:Oe,VideoSource:Xe,prewarm:function(){pt().acquire(Rr)},clearPrewarmedResources:function(){const M=Ct;M&&(M.isPreloaded()&&M.numActive()===1?(M.release(Rr),Ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Mr.workerCount},set workerCount(M){Mr.workerCount=M},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(M){s.config.MAX_PARALLEL_IMAGE_REQUESTS=M},clearStorage(M){s.clearTileCache(M)},workerUrl:"",addProtocol(M,d){s.config.REGISTERED_PROTOCOLS[M]=d},removeProtocol(M){delete s.config.REGISTERED_PROTOCOLS[M]}};return Cs.extend(as,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),as});var c=o;return c})})(UA);const Zw=Ic,nc=df(null),nd=df(null),ji={title:"WASAC Rural Water Network",url:"https://wasac.rw",logo:"https://raw.githubusercontent.com/wasac/logo/main/logo.png",basePath:"",attribution:"<a href='http://wasac.rw'>WASAC,Ltd.</a>",styles:[{title:"OSM",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style.json"},{title:"OSM (Open Building)",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-buildings.json"},{title:"Bing Aerial",uri:"https://wasac.github.io/mapbox-stylefiles/unvt/style-aerial.json"}],center:[30.0291,-2.0032],zoom:9,search:{url:"https://wasac.github.io/vt/wss.geojson",target:["wss_name","district","po_name"],format:e=>`${e.wss_id}-${e.wss_name}, ${e.po_name}, ${e.district}`,place_type:["wss"],placeholder:"Search WSS/PO/District",limit:10,zoom:13},popup:{target:["handpump","improvedspring","dugwell","solarpump","otherwaterpoint","household","publictap","waterkiosk","industrial","institution","other connection","chamber","reservoir","pumping-station","watersource","pipeline","wss","pg-building"]},legend:{targets:{village:"Village","village-annotation":"Village Label",cell:"Cell","cell-annotation":"Cell Label",sector:"Sector","sector-annotation":"Sector Label",district:"District","district-annotation":"District Label",wss:"WSS","wss-annotation":"WSS Label",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",watersource:"Water Source",reservoir:"Reservoir","pumping-station":"Pumping Station",chamber:"Chamber",household:"Household",publictap:"Public Tap",waterkiosk:"Water Kiosk",industrial:"Industrial",institution:"Institution","other connection":"Other connection",handpump:"Hand Pump",improvedspring:"Improved Spring",dugwell:"Dug well",solarpump:"Solar Pump",otherwaterpoint:"Other water point",parcels:"Parcels",parcels_annotation:"Parcels Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade"}},elevation:{url:"https://wasac.github.io/rw-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",isoChroneOptions:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],isochrone:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff"}},routingOptions:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}},terrain:{source:"rwanda-dem",exaggeration:1},adminBoundary:{url:"https://wasac.github.io/rw-admin-boundary"}};var Xw={};Object.defineProperty(Xw,"__esModule",{value:!0});class If{constructor(t,r){this.areas=t||If.DEFAULT_AREAS,this.limit_no_areas=r||If.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(t){this.map=t;const r=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const n of this.areas){const o=document.createElement("button");o.innerText=n.title,o.classList.add(n.title.replace(/[^a-z0-9-]/gi,"_")),o.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),o.addEventListener("click",u=>{const c=u.srcElement;this.map.jumpTo(JSON.parse(c.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const s=this.mapAreaContainer.getElementsByClassName("active");for(;s[0];)s[0].classList.remove("active");c.classList.add("active")}),n.title===If.DEFAULT_AREA&&o.classList.add("active"),this.mapAreaContainer.appendChild(o)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(n){n.target&&r.map.flyTo(JSON.parse(n.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(n){var o=document.createElement("option");o.setAttribute("type","option"),o.text=n.title,o.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),r.select.appendChild(o)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var qA=Xw.default=If;If.DEFAULT_AREA="Narok";If.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];If.DEFAULT_NO_AREAS=5;function O_(e,t,r){const n=e.slice();return n[12]=t[r],n}function F_(e,t,r){const n=e.slice();return n[15]=t[r],n}function B_(e,t,r){const n=e.slice();return n[15]=t[r],n}function j_(e){let t;function r(u,c){return u[3]?$A:VA}let n=r(e),o=n(e);return{c(){t=ct("div"),o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","popup-select svelte-1655iok")},m(u,c){It(u,t,c),o.m(t,null)},p(u,c){n===(n=r(u))&&o?o.p(u,c):(o.d(1),o=n(u),o&&(o.c(),o.m(t,null)))},d(u){u&&de(t),o.d()}}}function VA(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=U_(F_(e,o,c));return{c(){t=ct("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=ft(c,"SELECT",{class:!0});var s=wt(t);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(de),this.h()},h(){ye(t,"class","is-focused svelte-1655iok"),e[2]===void 0&&yl(()=>e[8].call(t))},m(c,s){It(c,t,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);gs(t,e[2],!0),r||(n=Qr(t,"change",e[8]),r=!0)},p(c,s){if(s&1){o=c[0];let f;for(f=0;f<o.length;f+=1){const v=F_(c,o,f);u[f]?u[f].p(v,s):(u[f]=U_(v),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&5&&gs(t,c[2])},d(c){c&&de(t),ys(u,c),r=!1,n()}}}function $A(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=q_(B_(e,o,c));return{c(){t=ct("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=ft(c,"SELECT",{class:!0});var s=wt(t);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(de),this.h()},h(){ye(t,"class","is-focused svelte-1655iok"),t.disabled=!0,e[2]===void 0&&yl(()=>e[7].call(t))},m(c,s){It(c,t,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);gs(t,e[2],!0),r||(n=Qr(t,"change",e[7]),r=!0)},p(c,s){if(s&1){o=c[0];let f;for(f=0;f<o.length;f+=1){const v=B_(c,o,f);u[f]?u[f].p(v,s):(u[f]=q_(v),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&5&&gs(t,c[2])},d(c){c&&de(t),ys(u,c),r=!1,n()}}}function U_(e){let t,r=`${e[15].sourceLayer} (${e[15].source})`,n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{class:!0});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[15],t.value=t.__value,ye(t,"class","svelte-1655iok")},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&No(n,r),c&1&&o!==(o=u[15])&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function q_(e){let t,r=`${e[15].sourceLayer} (${e[15].source})`,n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{class:!0});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[15],t.value=t.__value,ye(t,"class","svelte-1655iok")},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&No(n,r),c&1&&o!==(o=u[15])&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function V_(e){let t,r,n=Object.keys(e[2].properties),o=[];for(let u=0;u<n.length;u+=1)o[u]=$_(O_(e,n,u));return{c(){t=ct("div"),r=ct("table");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);r=ft(c,"TABLE",{class:!0});var s=wt(r);for(let f=0;f<o.length;f+=1)o[f].l(s);s.forEach(de),c.forEach(de),this.h()},h(){ye(r,"class","svelte-1655iok"),ye(t,"class","popup-table svelte-1655iok")},m(u,c){It(u,t,c),Qe(t,r);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(r,null)},p(u,c){if(c&4){n=Object.keys(u[2].properties);let s;for(s=0;s<n.length;s+=1){const f=O_(u,n,s);o[s]?o[s].p(f,c):(o[s]=$_(f),o[s].c(),o[s].m(r,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(u){u&&de(t),ys(o,u)}}}function $_(e){let t,r,n=e[12]+"",o,u,c=e[2].properties[e[12]]+"",s;return{c(){t=ct("tr"),r=ct("th"),o=Nn(n),u=ct("td"),s=Nn(c),this.h()},l(f){t=ft(f,"TR",{});var v=wt(t);r=ft(v,"TH",{class:!0});var w=wt(r);o=Rn(w,n),w.forEach(de),u=ft(v,"TD",{class:!0});var E=wt(u);s=Rn(E,c),E.forEach(de),v.forEach(de),this.h()},h(){ye(r,"class","svelte-1655iok"),ye(u,"class","svelte-1655iok")},m(f,v){It(f,t,v),Qe(t,r),Qe(r,o),Qe(t,u),Qe(u,s)},p(f,v){v&4&&n!==(n=f[12]+"")&&No(o,n),v&4&&c!==(c=f[2].properties[f[12]]+"")&&No(s,c)},d(f){f&&de(t)}}}function GA(e){let t,r,n=e[0]&&e[0].length>0&&j_(e),o=e[2]&&V_(e);return{c(){t=ct("div"),n&&n.c(),r=pr(),o&&o.c()},l(u){t=ft(u,"DIV",{});var c=wt(t);n&&n.l(c),r=dr(c),o&&o.l(c),c.forEach(de)},m(u,c){It(u,t,c),n&&n.m(t,null),Qe(t,r),o&&o.m(t,null),e[9](t)},p(u,[c]){u[0]&&u[0].length>0?n?n.p(u,c):(n=j_(u),n.c(),n.m(t,r)):n&&(n.d(1),n=null),u[2]?o?o.p(u,c):(o=V_(u),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:Xn,o:Xn,d(u){u&&de(t),n&&n.d(),o&&o.d(),e[9](null)}}}function HA(e,t,r){let n,{map:o}=t,{targetLayers:u=[]}=t,c,s,f=[],v;function w(){}w.prototype.onAdd=function(B){return this.map=B,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},w.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),r(0,f=[]),r(2,v=void 0),c&&(c.remove(),c=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},w.prototype.onClick=function(B){if(!this.isActive){r(0,f=[]),r(2,v=void 0);return}let G=[];u.length>0?u.forEach(Z=>{this.map.getLayer(Z)&&G.push(Z)}):G=o.getStyle().layers.map(Z=>Z.id);const H=this.map.queryRenderedFeatures(B.point,{layers:G});r(0,f=H.filter(Z=>Object.keys(Z.properties).length>0)),r(2,v=f.length>0?f[0]:void 0),f.length>0?c=new Ic.Popup().setLngLat(B.lngLat).setDOMContent(s).setMaxWidth("300px").addTo(o):c&&(c.remove(),c=void 0)},w.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let E=null;jf(async()=>{r(6,E=new w)});function L(){v=d0(this),r(2,v),r(0,f)}function C(){v=d0(this),r(2,v),r(0,f)}function F(B){Ft[B?"unshift":"push"](()=>{s=B,r(1,s)})}return e.$$set=B=>{"map"in B&&r(4,o=B.map),"targetLayers"in B&&r(5,u=B.targetLayers)},e.$$.update=()=>{e.$$.dirty&1&&r(3,n=f.length===1),e.$$.dirty&80&&o&&E!==null&&o.hasControl(E)===!1&&o.addControl(E,"top-right")},[f,s,v,n,o,u,E,L,C,F]}class WA extends Pn{constructor(t){super(),Mn(this,t,HA,GA,Cn,{map:4,targetLayers:5})}}const e1=parseFloat;function Ig(e,t=";"){let r;if(Array.isArray(e))r=e.filter(n=>n);else{r=[];for(const n in e)e[n]&&r.push(`${n}:${e[n]}`)}return r.join(t)}function ZA(e,t,r,n){let o,u;const c="1em";let s,f,v,w="-.125em";const E="visible";return n&&(v="center",u="1.25em"),r&&(o=r),t&&(t=="lg"?(f="1.33333em",s=".75em",w="-.225em"):t=="xs"?f=".75em":t=="sm"?f=".875em":f=t.replace("x","em")),Ig([Ig({float:o,width:u,height:c,"line-height":s,"font-size":f,"text-align":v,"vertical-align":w,"transform-origin":"center",overflow:E}),e])}function XA(e,t,r,n,o,u=1,c="",s=""){let f=1,v=1;return o&&(o=="horizontal"?f=-1:o=="vertical"?v=-1:f=v=-1),Ig([`translate(${e1(t)*u}${c},${e1(r)*u}${c})`,`scale(${f*e1(e)},${v*e1(e)})`,n&&`rotate(${n}${s})`]," ")}function G_(e){let t,r,n,o,u,c,s,f;function v(L,C){return typeof L[10][4]=="string"?JA:YA}let w=v(e),E=w(e);return{c(){t=$h("svg"),r=$h("g"),n=$h("g"),E.c(),this.h()},l(L){t=Gh(L,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var C=wt(t);r=Gh(C,"g",{transform:!0,"transform-origin":!0});var F=wt(r);n=Gh(F,"g",{transform:!0});var B=wt(n);E.l(B),B.forEach(de),F.forEach(de),C.forEach(de),this.h()},h(){ye(n,"transform",e[12]),ye(r,"transform",o="translate("+e[10][0]/2+" "+e[10][1]/2+")"),ye(r,"transform-origin",u=e[10][0]/4+" 0"),ye(t,"id",c=e[1]||void 0),ye(t,"class",s="svelte-fa "+e[0]+" svelte-1cj2gr0"),ye(t,"style",e[11]),ye(t,"viewBox",f="0 0 "+e[10][0]+" "+e[10][1]),ye(t,"aria-hidden","true"),ye(t,"role","img"),ye(t,"xmlns","http://www.w3.org/2000/svg"),ni(t,"pulse",e[4]),ni(t,"spin",e[3])},m(L,C){It(L,t,C),Qe(t,r),Qe(r,n),E.m(n,null)},p(L,C){w===(w=v(L))&&E?E.p(L,C):(E.d(1),E=w(L),E&&(E.c(),E.m(n,null))),C&4096&&ye(n,"transform",L[12]),C&1024&&o!==(o="translate("+L[10][0]/2+" "+L[10][1]/2+")")&&ye(r,"transform",o),C&1024&&u!==(u=L[10][0]/4+" 0")&&ye(r,"transform-origin",u),C&2&&c!==(c=L[1]||void 0)&&ye(t,"id",c),C&1&&s!==(s="svelte-fa "+L[0]+" svelte-1cj2gr0")&&ye(t,"class",s),C&2048&&ye(t,"style",L[11]),C&1024&&f!==(f="0 0 "+L[10][0]+" "+L[10][1])&&ye(t,"viewBox",f),C&17&&ni(t,"pulse",L[4]),C&9&&ni(t,"spin",L[3])},d(L){L&&de(t),E.d()}}}function YA(e){let t,r,n,o,u,c,s,f,v,w;return{c(){t=$h("path"),c=$h("path"),this.h()},l(E){t=Gh(E,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),wt(t).forEach(de),c=Gh(E,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),wt(c).forEach(de),this.h()},h(){ye(t,"d",r=e[10][4][0]),ye(t,"fill",n=e[6]||e[2]||"currentColor"),ye(t,"fill-opacity",o=e[9]!=!1?e[7]:e[8]),ye(t,"transform",u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")"),ye(c,"d",s=e[10][4][1]),ye(c,"fill",f=e[5]||e[2]||"currentColor"),ye(c,"fill-opacity",v=e[9]!=!1?e[8]:e[7]),ye(c,"transform",w="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(E,L){It(E,t,L),It(E,c,L)},p(E,L){L&1024&&r!==(r=E[10][4][0])&&ye(t,"d",r),L&68&&n!==(n=E[6]||E[2]||"currentColor")&&ye(t,"fill",n),L&896&&o!==(o=E[9]!=!1?E[7]:E[8])&&ye(t,"fill-opacity",o),L&1024&&u!==(u="translate("+E[10][0]/-2+" "+E[10][1]/-2+")")&&ye(t,"transform",u),L&1024&&s!==(s=E[10][4][1])&&ye(c,"d",s),L&36&&f!==(f=E[5]||E[2]||"currentColor")&&ye(c,"fill",f),L&896&&v!==(v=E[9]!=!1?E[8]:E[7])&&ye(c,"fill-opacity",v),L&1024&&w!==(w="translate("+E[10][0]/-2+" "+E[10][1]/-2+")")&&ye(c,"transform",w)},d(E){E&&de(t),E&&de(c)}}}function JA(e){let t,r,n,o;return{c(){t=$h("path"),this.h()},l(u){t=Gh(u,"path",{d:!0,fill:!0,transform:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"d",r=e[10][4]),ye(t,"fill",n=e[2]||e[5]||"currentColor"),ye(t,"transform",o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(u,c){It(u,t,c)},p(u,c){c&1024&&r!==(r=u[10][4])&&ye(t,"d",r),c&36&&n!==(n=u[2]||u[5]||"currentColor")&&ye(t,"fill",n),c&1024&&o!==(o="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&ye(t,"transform",o)},d(u){u&&de(t)}}}function KA(e){let t,r=e[10][4]&&G_(e);return{c(){r&&r.c(),t=Xi()},l(n){r&&r.l(n),t=Xi()},m(n,o){r&&r.m(n,o),It(n,t,o)},p(n,[o]){n[10][4]?r?r.p(n,o):(r=G_(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Xn,o:Xn,d(n){r&&r.d(n),n&&de(t)}}}function QA(e,t,r){let{class:n=""}=t,{id:o=""}=t,{style:u=""}=t,{icon:c}=t,{size:s=""}=t,{color:f=""}=t,{fw:v=!1}=t,{pull:w=""}=t,{scale:E=1}=t,{translateX:L=0}=t,{translateY:C=0}=t,{rotate:F=""}=t,{flip:B=!1}=t,{spin:G=!1}=t,{pulse:H=!1}=t,{primaryColor:Z=""}=t,{secondaryColor:ee=""}=t,{primaryOpacity:Y=1}=t,{secondaryOpacity:le=.4}=t,{swapOpacity:ce=!1}=t,ve,pe,Ne;return e.$$set=Ve=>{"class"in Ve&&r(0,n=Ve.class),"id"in Ve&&r(1,o=Ve.id),"style"in Ve&&r(13,u=Ve.style),"icon"in Ve&&r(14,c=Ve.icon),"size"in Ve&&r(15,s=Ve.size),"color"in Ve&&r(2,f=Ve.color),"fw"in Ve&&r(16,v=Ve.fw),"pull"in Ve&&r(17,w=Ve.pull),"scale"in Ve&&r(18,E=Ve.scale),"translateX"in Ve&&r(19,L=Ve.translateX),"translateY"in Ve&&r(20,C=Ve.translateY),"rotate"in Ve&&r(21,F=Ve.rotate),"flip"in Ve&&r(22,B=Ve.flip),"spin"in Ve&&r(3,G=Ve.spin),"pulse"in Ve&&r(4,H=Ve.pulse),"primaryColor"in Ve&&r(5,Z=Ve.primaryColor),"secondaryColor"in Ve&&r(6,ee=Ve.secondaryColor),"primaryOpacity"in Ve&&r(7,Y=Ve.primaryOpacity),"secondaryOpacity"in Ve&&r(8,le=Ve.secondaryOpacity),"swapOpacity"in Ve&&r(9,ce=Ve.swapOpacity)},e.$$.update=()=>{e.$$.dirty&16384&&r(10,ve=c&&c.icon||[0,0,"",[],""]),e.$$.dirty&237568&&r(11,pe=ZA(u,s,w,v)),e.$$.dirty&8126464&&r(12,Ne=XA(E,L,C,F,B,512))},[n,o,f,G,H,Z,ee,Y,le,ce,ve,pe,Ne,u,c,s,v,w,E,L,C,F,B]}class go extends Pn{constructor(t){super(),Mn(this,t,QA,KA,Cn,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}var e7={prefix:"fas",iconName:"sort-down",icon:[320,512,["sort-desc"],"f0dd","M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"]},t7={prefix:"fas",iconName:"arrow-down-up-across-line",icon:[576,512,[],"e4af","M137.4 502.6c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V288H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H448V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L384 109.3V224H192 128 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96V402.7L86.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96zM128 192h64V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192zM448 320H384V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320z"]},r7={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},n7={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},i7={prefix:"fas",iconName:"share-nodes",icon:[448,512,["share-alt"],"f1e0","M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"]},o7={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},a7={prefix:"fas",iconName:"bicycle",icon:[640,512,[128690],"f206","M312 32c-13.3 0-24 10.7-24 24s10.7 24 24 24h25.7l34.6 64H222.9l-27.4-38C191 99.7 183.7 96 176 96H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h43.7l22.1 30.7-26.6 53.1c-10-2.5-20.5-3.8-31.2-3.8C57.3 224 0 281.3 0 352s57.3 128 128 128c65.3 0 119.1-48.9 127-112h49c8.5 0 16.3-4.5 20.7-11.8l84.8-143.5 21.7 40.1C402.4 276.3 384 312 384 352c0 70.7 57.3 128 128 128s128-57.3 128-128s-57.3-128-128-128c-13.5 0-26.5 2.1-38.7 6L375.4 48.8C369.8 38.4 359 32 347.2 32H312zM458.6 303.7l32.3 59.7c6.3 11.7 20.9 16 32.5 9.7s16-20.9 9.7-32.5l-32.3-59.7c3.6-.6 7.4-.9 11.2-.9c39.8 0 72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72c0-18.6 7-35.5 18.6-48.3zM133.2 368h65c-7.3 32.1-36 56-70.2 56c-39.8 0-72-32.2-72-72s32.2-72 72-72c1.7 0 3.4 .1 5.1 .2l-24.2 48.5c-9 18.1 4.1 39.4 24.3 39.4zm33.7-48l50.7-101.3 72.9 101.2-.1 .1H166.8zm90.6-128H365.9L317 274.8 257.4 192z"]},s7={prefix:"fas",iconName:"chart-simple",icon:[448,512,[],"e473","M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z"]},l7={prefix:"fas",iconName:"person-walking",icon:[320,512,[128694,"walking"],"f554","M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z"]},u7={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},c7={prefix:"fas",iconName:"left-right",icon:[512,512,[8596,"arrows-alt-h"],"f337","M504.3 273.6c4.9-4.5 7.7-10.9 7.7-17.6s-2.8-13-7.7-17.6l-112-104c-7-6.5-17.2-8.2-25.9-4.4s-14.4 12.5-14.4 22l0 56-192 0 0-56c0-9.5-5.7-18.2-14.4-22s-18.9-2.1-25.9 4.4l-112 104C2.8 243 0 249.3 0 256s2.8 13 7.7 17.6l112 104c7 6.5 17.2 8.2 25.9 4.4s14.4-12.5 14.4-22l0-56 192 0 0 56c0 9.5 5.7 18.2 14.4 22s18.9 2.1 25.9-4.4l112-104z"]},f7={prefix:"fas",iconName:"layer-group",icon:[576,512,[],"f5fd","M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"]},h7={prefix:"fas",iconName:"up-down-left-right",icon:[512,512,["arrows-alt"],"f0b2","M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8h32v96H128V192c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V288h96v96H192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8H288V288h96v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6v32H288V128h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64z"]},p7={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},d7={prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M512 96c0 50.2-59.1 125.1-84.6 155c-3.8 4.4-9.4 6.1-14.5 5H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c53 0 96 43 96 96s-43 96-96 96H139.6c8.7-9.9 19.3-22.6 30-36.8c6.3-8.4 12.8-17.6 19-27.2H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320c-53 0-96-43-96-96s43-96 96-96h39.8c-21-31.5-39.8-67.7-39.8-96c0-53 43-96 96-96s96 43 96 96zM117.1 489.1c-3.8 4.3-7.2 8.1-10.1 11.3l-1.8 2-.2-.2c-6 4.6-14.6 4-20-1.8C59.8 473 0 402.5 0 352c0-53 43-96 96-96s96 43 96 96c0 30-21.1 67-43.5 97.9c-10.7 14.7-21.7 28-30.8 38.5l-.6 .7zM128 352a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM416 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},m7={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},g7={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},y7={prefix:"fas",iconName:"sort-up",icon:[320,512,["sort-asc"],"f0de","M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},Dy={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},zy={prefix:"fas",iconName:"ruler",icon:[512,512,[128207],"f545","M174.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L14.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L174.9 494.1z"]},v7={prefix:"fas",iconName:"file-pdf",icon:[448,512,[],"f1c1","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V304H296 272 184 160c-35.3 0-64 28.7-64 64v80 48 16H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM160 352h24c30.9 0 56 25.1 56 56s-25.1 56-56 56h-8v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm24 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8v48h8zm88-80h24c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H272c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm24 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16h-8v96h8zm72-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H400v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H400v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z"]},_7={prefix:"fas",iconName:"braille",icon:[640,512,[],"f2a1","M128 96c0 35.3-28.7 64-64 64S0 131.3 0 96S28.7 32 64 32s64 28.7 64 64zm96 176c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM80 416c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm112 0c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM64 320c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM224 160c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM480 96c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm112 0c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM576 272c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zm16 96c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM416 272c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zm16 96c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64z"]},b7={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},w7={prefix:"fas",iconName:"grip-vertical",icon:[320,512,[],"f58e","M40 352c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zm192 0c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zM40 320l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40zM232 192c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zM40 160l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40L40 32C17.9 32 0 49.9 0 72l0 48c0 22.1 17.9 40 40 40zM232 32c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0z"]},Yw={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Jw={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Kw={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},x7={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},k7={prefix:"fas",iconName:"car",icon:[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},A7={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"]},E7={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},S7=E7,C7={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},Ny={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},I7={prefix:"fas",iconName:"arrow-down-up-lock",icon:[640,512,[],"e4b0","M150.6 502.6l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 402.7V288H416V272c0-17.2 3.9-33.5 10.8-48H352V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L288 109.3V224l-128 0H96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32H96V402.7L54.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0zM160 192V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192h64zM288 320V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320H288zm240-80c17.7 0 32 14.3 32 32v48H496V272c0-17.7 14.3-32 32-32zm-80 32v48c-17.7 0-32 14.3-32 32V480c0 17.7 14.3 32 32 32H608c17.7 0 32-14.3 32-32V352c0-17.7-14.3-32-32-32V272c0-44.2-35.8-80-80-80s-80 35.8-80 80z"]},L7={prefix:"fas",iconName:"angle-up",icon:[384,512,[8963],"f106","M169.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L192 205.3 54.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"]},T7={prefix:"fas",iconName:"up-down",icon:[256,512,[8597,11021,"arrows-alt-v"],"f338","M145.6 7.7C141 2.8 134.7 0 128 0s-13 2.8-17.6 7.7l-104 112c-6.5 7-8.2 17.2-4.4 25.9S14.5 160 24 160H80V352H24c-9.5 0-18.2 5.7-22 14.4s-2.1 18.9 4.4 25.9l104 112c4.5 4.9 10.9 7.7 17.6 7.7s13-2.8 17.6-7.7l104-112c6.5-7 8.2-17.2 4.4-25.9s-12.5-14.4-22-14.4H176V160h56c9.5 0 18.2-5.7 22-14.4s2.1-18.9-4.4-25.9l-104-112z"]},Ry={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};function _a(e){return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}var Ru=Uint8Array,Ou=Uint16Array,id=Uint32Array,o2=new Ru([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a2=new Ru([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lg=new Ru([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qw=function(e,t){for(var r=new Ou(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new id(r[30]),n=1;n<30;++n)for(var u=r[n];u<r[n+1];++u)o[u]=u-r[n]<<5|n;return[r,o]},e6=Qw(o2,2),t6=e6[0],Tg=e6[1];t6[28]=258,Tg[258]=28;var r6=Qw(a2,0),P7=r6[0],H_=r6[1],Pg=new Ou(32768);for(var Za=0;Za<32768;++Za){var xf=(Za&43690)>>>1|(Za&21845)<<1;xf=(xf&52428)>>>2|(xf&13107)<<2,xf=(xf&61680)>>>4|(xf&3855)<<4,Pg[Za]=((xf&65280)>>>8|(xf&255)<<8)>>>1}var B0=function(e,t,r){for(var n=e.length,o=0,u=new Ou(t);o<n;++o)++u[e[o]-1];var c=new Ou(t);for(o=0;o<t;++o)c[o]=c[o-1]+u[o-1]<<1;var s;if(r){s=new Ou(1<<t);var f=15-t;for(o=0;o<n;++o)if(e[o])for(var v=o<<4|e[o],w=t-e[o],E=c[e[o]-1]++<<w,L=E|(1<<w)-1;E<=L;++E)s[Pg[E]>>>f]=v}else for(s=new Ou(n),o=0;o<n;++o)s[o]=Pg[c[e[o]-1]++]>>>15-e[o];return s},Nf=new Ru(288);for(var Za=0;Za<144;++Za)Nf[Za]=8;for(var Za=144;Za<256;++Za)Nf[Za]=9;for(var Za=256;Za<280;++Za)Nf[Za]=7;for(var Za=280;Za<288;++Za)Nf[Za]=8;var od=new Ru(32);for(var Za=0;Za<32;++Za)od[Za]=5;var M7=B0(Nf,9,0),D7=B0(Nf,9,1),z7=B0(od,5,0),N7=B0(od,5,1),rm=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},f0=function(e,t,r){var n=t/8>>0;return(e[n]|e[n+1]<<8)>>>(t&7)&r},nm=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Oy=function(e){return(e/8>>0)+(e&7&&1)},n6=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e instanceof Ou?Ou:e instanceof id?id:Ru)(r-t);return n.set(e.subarray(t,r)),n},R7=function(e,t,r){var n=e.length,o=!t||r,u=!r||r.i;r||(r={}),t||(t=new Ru(n*3));var c=function(Et){var Pt=t.length;if(Et>Pt){var Kt=new Ru(Math.max(Pt*2,Et));Kt.set(t),t=Kt}},s=r.f||0,f=r.p||0,v=r.b||0,w=r.l,E=r.d,L=r.m,C=r.n,F=n*8;do{if(!w){r.f=s=f0(e,f,1);var B=f0(e,f+1,3);if(f+=3,B)if(B==1)w=D7,E=N7,L=9,C=5;else if(B==2){var ee=f0(e,f,31)+257,Y=f0(e,f+10,15)+4,le=ee+f0(e,f+5,31)+1;f+=14;for(var ce=new Ru(le),ve=new Ru(19),pe=0;pe<Y;++pe)ve[Lg[pe]]=f0(e,f+pe*3,7);f+=Y*3;var Ne=rm(ve),Ve=(1<<Ne)-1;if(!u&&f+le*(Ne+7)>F)break;for(var be=B0(ve,Ne,1),pe=0;pe<le;){var Ce=be[f0(e,f,Ve)];f+=Ce&15;var G=Ce>>>4;if(G<16)ce[pe++]=G;else{var Oe=0,nt=0;for(G==16?(nt=3+f0(e,f,3),f+=2,Oe=ce[pe-1]):G==17?(nt=3+f0(e,f,7),f+=3):G==18&&(nt=11+f0(e,f,127),f+=7);nt--;)ce[pe++]=Oe}}var mt=ce.subarray(0,ee),ht=ce.subarray(ee);L=rm(mt),C=rm(ht),w=B0(mt,L,1),E=B0(ht,C,1)}else throw"invalid block type";else{var G=Oy(f)+4,H=e[G-4]|e[G-3]<<8,Z=G+H;if(Z>n){if(u)throw"unexpected EOF";break}o&&c(v+H),t.set(e.subarray(G,Z),v),r.b=v+=H,r.p=f=Z*8;continue}if(f>F)throw"unexpected EOF"}o&&c(v+131072);for(var He=(1<<L)-1,ut=(1<<C)-1,bt=L+C+18;u||f+bt<F;){var Oe=w[nm(e,f)&He],Xe=Oe>>>4;if(f+=Oe&15,f>F)throw"unexpected EOF";if(!Oe)throw"invalid length/literal";if(Xe<256)t[v++]=Xe;else if(Xe==256){w=null;break}else{var We=Xe-254;if(Xe>264){var pe=Xe-257,ke=o2[pe];We=f0(e,f,(1<<ke)-1)+t6[pe],f+=ke}var Re=E[nm(e,f)&ut],Pe=Re>>>4;if(!Re)throw"invalid distance";f+=Re&15;var ht=P7[Pe];if(Pe>3){var ke=a2[Pe];ht+=nm(e,f)&(1<<ke)-1,f+=ke}if(f>F)throw"unexpected EOF";o&&c(v+131072);for(var dt=v+We;v<dt;v+=4)t[v]=t[v-ht],t[v+1]=t[v+1-ht],t[v+2]=t[v+2-ht],t[v+3]=t[v+3-ht];v=dt}}r.l=w,r.p=f,r.b=v,w&&(s=1,r.m=L,r.d=E,r.n=C)}while(!s);return v==t.length?t:n6(t,0,v)},Q0=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},Mp=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},im=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,u=r.slice();if(!o)return[new Ru(0),0];if(o==1){var c=new Ru(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(le,ce){return le.f-ce.f}),r.push({s:-1,f:25001});var s=r[0],f=r[1],v=0,w=1,E=2;for(r[0]={s:-1,f:s.f+f.f,l:s,r:f};w!=o-1;)s=r[r[v].f<r[E].f?v++:E++],f=r[v!=w&&r[v].f<r[E].f?v++:E++],r[w++]={s:-1,f:s.f+f.f,l:s,r:f};for(var L=u[0].s,n=1;n<o;++n)u[n].s>L&&(L=u[n].s);var C=new Ou(L+1),F=Mg(r[w-1],C,0);if(F>t){var n=0,B=0,G=F-t,H=1<<G;for(u.sort(function(ce,ve){return C[ve.s]-C[ce.s]||ce.f-ve.f});n<o;++n){var Z=u[n].s;if(C[Z]>t)B+=H-(1<<F-C[Z]),C[Z]=t;else break}for(B>>>=G;B>0;){var ee=u[n].s;C[ee]<t?B-=1<<t-C[ee]++-1:++n}for(;n>=0&&B;--n){var Y=u[n].s;C[Y]==t&&(--C[Y],++B)}F=t}return[new Ru(C),F]},Mg=function(e,t,r){return e.s==-1?Math.max(Mg(e.l,t,r+1),Mg(e.r,t,r+1)):t[e.s]=r},W_=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ou(++t),n=0,o=e[0],u=1,c=function(f){r[n++]=f},s=1;s<=t;++s)if(e[s]==o&&s!=t)++u;else{if(!o&&u>2){for(;u>138;u-=138)c(32754);u>2&&(c(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(c(o),--u;u>6;u-=6)c(8304);u>2&&(c(u-3<<5|8208),u=0)}for(;u--;)c(o);u=1,o=e[s]}return[r.subarray(0,n),t]},Dp=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},w1=function(e,t,r){var n=r.length,o=Oy(t+2);e[o]=n&255,e[o+1]=n>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var u=0;u<n;++u)e[o+u+4]=r[u];return(o+4+n)*8},Z_=function(e,t,r,n,o,u,c,s,f,v,w){Q0(t,w++,r),++o[256];for(var E=im(o,15),L=E[0],C=E[1],F=im(u,15),B=F[0],G=F[1],H=W_(L),Z=H[0],ee=H[1],Y=W_(B),le=Y[0],ce=Y[1],ve=new Ou(19),pe=0;pe<Z.length;++pe)ve[Z[pe]&31]++;for(var pe=0;pe<le.length;++pe)ve[le[pe]&31]++;for(var Ne=im(ve,7),Ve=Ne[0],be=Ne[1],Ce=19;Ce>4&&!Ve[Lg[Ce-1]];--Ce);var Oe=v+5<<3,nt=Dp(o,Nf)+Dp(u,od)+c,mt=Dp(o,L)+Dp(u,B)+c+14+3*Ce+Dp(ve,Ve)+(2*ve[16]+3*ve[17]+7*ve[18]);if(Oe<=nt&&Oe<=mt)return w1(t,w,e.subarray(f,f+v));var ht,He,ut,bt;if(Q0(t,w,1+(mt<nt)),w+=2,mt<nt){ht=B0(L,C,0),He=L,ut=B0(B,G,0),bt=B;var Xe=B0(Ve,be,0);Q0(t,w,ee-257),Q0(t,w+5,ce-1),Q0(t,w+10,Ce-4),w+=14;for(var pe=0;pe<Ce;++pe)Q0(t,w+3*pe,Ve[Lg[pe]]);w+=3*Ce;for(var We=[Z,le],ke=0;ke<2;++ke)for(var Re=We[ke],pe=0;pe<Re.length;++pe){var Pe=Re[pe]&31;Q0(t,w,Xe[Pe]),w+=Ve[Pe],Pe>15&&(Q0(t,w,Re[pe]>>>5&127),w+=Re[pe]>>>12)}}else ht=M7,He=Nf,ut=z7,bt=od;for(var pe=0;pe<s;++pe)if(n[pe]>255){var Pe=n[pe]>>>18&31;Mp(t,w,ht[Pe+257]),w+=He[Pe+257],Pe>7&&(Q0(t,w,n[pe]>>>23&31),w+=o2[Pe]);var dt=n[pe]&31;Mp(t,w,ut[dt]),w+=bt[dt],dt>3&&(Mp(t,w,n[pe]>>>5&8191),w+=a2[dt])}else Mp(t,w,ht[n[pe]]),w+=He[n[pe]];return Mp(t,w,ht[256]),w+He[256]},O7=new id([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F7=new Ru(0),B7=function(e,t,r,n,o,u){var c=e.length,s=new Ru(n+c+5*(1+Math.floor(c/7e3))+o),f=s.subarray(n,s.length-o),v=0;if(!t||c<8)for(var w=0;w<=c;w+=65535){var E=w+65535;E<c?v=w1(f,v,e.subarray(w,E)):(f[w]=u,v=w1(f,v,e.subarray(w,c)))}else{for(var L=O7[t-1],C=L>>>13,F=L&8191,B=(1<<r)-1,G=new Ou(32768),H=new Ou(B+1),Z=Math.ceil(r/3),ee=2*Z,Y=function(Kr){return(e[Kr]^e[Kr+1]<<Z^e[Kr+2]<<ee)&B},le=new id(25e3),ce=new Ou(288),ve=new Ou(32),pe=0,Ne=0,w=0,Ve=0,be=0,Ce=0;w<c;++w){var Oe=Y(w),nt=w&32767,mt=H[Oe];if(G[nt]=mt,H[Oe]=nt,be<=w){var ht=c-w;if((pe>7e3||Ve>24576)&&ht>423){v=Z_(e,f,0,le,ce,ve,Ne,Ve,Ce,w-Ce,v),Ve=pe=Ne=0,Ce=w;for(var He=0;He<286;++He)ce[He]=0;for(var He=0;He<30;++He)ve[He]=0}var ut=2,bt=0,Xe=F,We=nt-mt&32767;if(ht>2&&Oe==Y(w-We))for(var ke=Math.min(C,ht)-1,Re=Math.min(32767,w),Pe=Math.min(258,ht);We<=Re&&--Xe&&nt!=mt;){if(e[w+ut]==e[w+ut-We]){for(var dt=0;dt<Pe&&e[w+dt]==e[w+dt-We];++dt);if(dt>ut){if(ut=dt,bt=We,dt>ke)break;for(var Et=Math.min(We,dt-2),Pt=0,He=0;He<Et;++He){var Kt=w-We+He+32768&32767,$t=G[Kt],br=Kt-$t+32768&32767;br>Pt&&(Pt=br,mt=Kt)}}}nt=mt,mt=G[nt],We+=nt-mt+32768&32767}if(bt){le[Ve++]=268435456|Tg[ut]<<18|H_[bt];var Gt=Tg[ut]&31,Rr=H_[bt]&31;Ne+=o2[Gt]+a2[Rr],++ce[257+Gt],++ve[Rr],be=w+ut,++pe}else le[Ve++]=e[w],++ce[e[w]]}}v=Z_(e,f,u,le,ce,ve,Ne,Ve,Ce,w-Ce,v),u||(v=w1(f,v,F7))}return n6(s,0,n+Oy(v)+o)},j7=function(){var e=1,t=0;return{p:function(r){for(var n=e,o=t,u=r.length,c=0;c!=u;){for(var s=Math.min(c+5552,u);c<s;++c)n+=r[c],o+=n;n%=65521,o%=65521}e=n,t=o},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},U7=function(e,t,r,n,o){return B7(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,n,!o)},q7=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},V7=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)},$7=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Dg(e,t){t===void 0&&(t={});var r=j7();r.p(e);var n=U7(e,t,2,4);return V7(n,t),q7(n,n.length-4,r.d()),n}function G7(e,t){return R7(($7(e),e.subarray(2,-4)),t)}var ro=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function om(){ro.console&&typeof ro.console.log=="function"&&ro.console.log.apply(ro.console,arguments)}var Ma={log:om,warn:function(e){ro.console&&(typeof ro.console.warn=="function"?ro.console.warn.apply(ro.console,arguments):om.call(null,arguments))},error:function(e){ro.console&&(typeof ro.console.error=="function"?ro.console.error.apply(ro.console,arguments):om(e))}};function am(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Kf(n.response,t,r)},n.onerror=function(){Ma.error("could not download file")},n.send()}function X_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function t1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Gp,zg,Kf=ro.saveAs||((typeof window>"u"?"undefined":_a(window))!=="object"||window!==ro?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=ro.URL||ro.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?X_(o.href)?am(e,t,r):t1(o,o.target="_blank"):t1(o)):(o.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){t1(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(X_(e))am(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){t1(n)})}else navigator.msSaveOrOpenBlob(function(o,u){return u===void 0?u={autoBom:!1}:_a(u)!=="object"&&(Ma.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return am(e,t,r);var o=e.type==="application/octet-stream",u=/constructor/i.test(ro.HTMLElement)||ro.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&u)&&(typeof FileReader>"u"?"undefined":_a(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var w=s.result;w=c?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=w:location=w,n=null},s.readAsDataURL(e)}else{var f=ro.URL||ro.webkitURL,v=f.createObjectURL(e);n?n.location=v:location.href=v,n=null,setTimeout(function(){f.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function i6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var o=r[n].re,u=r[n].process,c=o.exec(e);c&&(t=u(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),f=this.g.toString(16),v=this.b.toString(16);return s.length==1&&(s="0"+s),f.length==1&&(f="0"+f),v.length==1&&(v="0"+v),"#"+s+f+v}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function sm(e,t){var r=e[0],n=e[1],o=e[2],u=e[3];r=lu(r,n,o,u,t[0],7,-680876936),u=lu(u,r,n,o,t[1],12,-389564586),o=lu(o,u,r,n,t[2],17,606105819),n=lu(n,o,u,r,t[3],22,-1044525330),r=lu(r,n,o,u,t[4],7,-176418897),u=lu(u,r,n,o,t[5],12,1200080426),o=lu(o,u,r,n,t[6],17,-1473231341),n=lu(n,o,u,r,t[7],22,-45705983),r=lu(r,n,o,u,t[8],7,1770035416),u=lu(u,r,n,o,t[9],12,-1958414417),o=lu(o,u,r,n,t[10],17,-42063),n=lu(n,o,u,r,t[11],22,-1990404162),r=lu(r,n,o,u,t[12],7,1804603682),u=lu(u,r,n,o,t[13],12,-40341101),o=lu(o,u,r,n,t[14],17,-1502002290),r=uu(r,n=lu(n,o,u,r,t[15],22,1236535329),o,u,t[1],5,-165796510),u=uu(u,r,n,o,t[6],9,-1069501632),o=uu(o,u,r,n,t[11],14,643717713),n=uu(n,o,u,r,t[0],20,-373897302),r=uu(r,n,o,u,t[5],5,-701558691),u=uu(u,r,n,o,t[10],9,38016083),o=uu(o,u,r,n,t[15],14,-660478335),n=uu(n,o,u,r,t[4],20,-405537848),r=uu(r,n,o,u,t[9],5,568446438),u=uu(u,r,n,o,t[14],9,-1019803690),o=uu(o,u,r,n,t[3],14,-187363961),n=uu(n,o,u,r,t[8],20,1163531501),r=uu(r,n,o,u,t[13],5,-1444681467),u=uu(u,r,n,o,t[2],9,-51403784),o=uu(o,u,r,n,t[7],14,1735328473),r=cu(r,n=uu(n,o,u,r,t[12],20,-1926607734),o,u,t[5],4,-378558),u=cu(u,r,n,o,t[8],11,-2022574463),o=cu(o,u,r,n,t[11],16,1839030562),n=cu(n,o,u,r,t[14],23,-35309556),r=cu(r,n,o,u,t[1],4,-1530992060),u=cu(u,r,n,o,t[4],11,1272893353),o=cu(o,u,r,n,t[7],16,-155497632),n=cu(n,o,u,r,t[10],23,-1094730640),r=cu(r,n,o,u,t[13],4,681279174),u=cu(u,r,n,o,t[0],11,-358537222),o=cu(o,u,r,n,t[3],16,-722521979),n=cu(n,o,u,r,t[6],23,76029189),r=cu(r,n,o,u,t[9],4,-640364487),u=cu(u,r,n,o,t[12],11,-421815835),o=cu(o,u,r,n,t[15],16,530742520),r=fu(r,n=cu(n,o,u,r,t[2],23,-995338651),o,u,t[0],6,-198630844),u=fu(u,r,n,o,t[7],10,1126891415),o=fu(o,u,r,n,t[14],15,-1416354905),n=fu(n,o,u,r,t[5],21,-57434055),r=fu(r,n,o,u,t[12],6,1700485571),u=fu(u,r,n,o,t[3],10,-1894986606),o=fu(o,u,r,n,t[10],15,-1051523),n=fu(n,o,u,r,t[1],21,-2054922799),r=fu(r,n,o,u,t[8],6,1873313359),u=fu(u,r,n,o,t[15],10,-30611744),o=fu(o,u,r,n,t[6],15,-1560198380),n=fu(n,o,u,r,t[13],21,1309151649),r=fu(r,n,o,u,t[4],6,-145523070),u=fu(u,r,n,o,t[11],10,-1120210379),o=fu(o,u,r,n,t[2],15,718787259),n=fu(n,o,u,r,t[9],21,-343485551),e[0]=Sf(r,e[0]),e[1]=Sf(n,e[1]),e[2]=Sf(o,e[2]),e[3]=Sf(u,e[3])}function s2(e,t,r,n,o,u){return t=Sf(Sf(t,e),Sf(n,u)),Sf(t<<o|t>>>32-o,r)}function lu(e,t,r,n,o,u,c){return s2(t&r|~t&n,e,t,o,u,c)}function uu(e,t,r,n,o,u,c){return s2(t&n|r&~n,e,t,o,u,c)}function cu(e,t,r,n,o,u,c){return s2(t^r^n,e,t,o,u,c)}function fu(e,t,r,n,o,u,c){return s2(r^(t|~n),e,t,o,u,c)}function o6(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)sm(n,H7(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(sm(n,o),t=0;t<16;t++)o[t]=0;return o[14]=8*r,sm(n,o),n}function H7(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Gp=ro.atob.bind(ro),zg=ro.btoa.bind(ro);var Y_="0123456789abcdef".split("");function W7(e){for(var t="",r=0;r<4;r++)t+=Y_[e>>8*r+4&15]+Y_[e>>8*r&15];return t}function Z7(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Ng(e){return o6(e).map(Z7).join("")}var X7=function(e){for(var t=0;t<e.length;t++)e[t]=W7(e[t]);return e.join("")}(o6("hello"))!="5d41402abc4b2a76b9719d911017c592";function Sf(e,t){if(X7){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Rg(e,t){var r,n,o,u;if(e!==r){for(var c=(o=e,u=1+(256/e.length>>0),new Array(u+1).join(o)),s=[],f=0;f<256;f++)s[f]=f;var v=0;for(f=0;f<256;f++){var w=s[f];v=(v+w+c.charCodeAt(f))%256,s[f]=s[v],s[v]=w}r=e,n=s}else s=n;var E=t.length,L=0,C=0,F="";for(f=0;f<E;f++)C=(C+(w=s[L=(L+1)%256]))%256,s[L]=s[C],s[C]=w,c=s[(s[L]+s[C])%256],F+=String.fromCharCode(t.charCodeAt(f)^c);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var J_={print:4,modify:8,copy:16,"annot-forms":32};function Dh(e,t,r,n){this.v=1,this.r=2;var o=192;e.forEach(function(s){if(J_.perm!==void 0)throw new Error("Invalid permission: "+s);o+=J_[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var u=(t+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,c),this.P=-(1+(255^o)),this.encryptionKey=Ng(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Rg(this.encryptionKey,this.padding)}function zh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var o=e.charCodeAt(n);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[n]}return t}function K_(e){if(_a(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,o){if(o=o||!1,typeof r!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var u=Math.random().toString(35);return t[r][u]=[n,!!o],u},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var u in t[r]){var c=t[r][u];try{c[0].apply(e,n)}catch(s){ro.console&&Ma.error("jsPDF PubSub Error",s.message,s)}c[1]&&o.push(u)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function D1(e){if(!(this instanceof D1))return new D1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function a6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function th(e,t,r,n,o){if(!(this instanceof th))return new th(e,t,r,n,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,a6.call(this,n,o)}function Bh(e,t,r,n,o){if(!(this instanceof Bh))return new Bh(e,t,r,n,o);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,a6.call(this,n,o)}function to(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],u=arguments[3],c=[],s=1,f=16,v="S",w=null;_a(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,o=e.format||o,u=e.compress||e.compressPdf||u,(w=e.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),v=e.defaultPathOperation||"S"),c=e.filters||(u===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var E=e.putOnlyUsedFonts||!1,L={},C={internal:{},__private__:{}};C.__private__.PubSub=K_;var F="1.3",B=C.__private__.getPdfVersion=function(){return F};C.__private__.setPdfVersion=function(te){F=te};var G={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return G};var H=C.__private__.getPageFormat=function(te){return G[te]};o=o||"a4";var Z={COMPAT:"compat",ADVANCED:"advanced"},ee=Z.COMPAT;function Y(){this.saveGraphicsState(),pt(new vn(xn,0,0,-xn,0,As()*xn).toString()+" cm"),this.setFontSize(this.getFontSize()/xn),v="n",ee=Z.ADVANCED}function le(){this.restoreGraphicsState(),v="S",ee=Z.COMPAT}var ce=C.__private__.combineFontStyleAndFontWeight=function(te,Te){if(te=="bold"&&Te=="normal"||te=="bold"&&Te==400||te=="normal"&&Te=="italic"||te=="bold"&&Te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Te&&(te=Te==400||Te==="normal"?te==="italic"?"italic":"normal":Te!=700&&Te!=="bold"||te!=="normal"?(Te==700?"bold":Te)+""+te:"bold"),te};C.advancedAPI=function(te){var Te=ee===Z.COMPAT;return Te&&Y.call(this),typeof te!="function"||(te(this),Te&&le.call(this)),this},C.compatAPI=function(te){var Te=ee===Z.ADVANCED;return Te&&le.call(this),typeof te!="function"||(te(this),Te&&Y.call(this)),this},C.isAdvancedAPI=function(){return ee===Z.ADVANCED};var ve,pe=function(te){if(ee!==Z.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ne=C.roundToPrecision=C.__private__.roundToPrecision=function(te,Te){var gt=t||Te;if(isNaN(te)||isNaN(gt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(gt).replace(/0+$/,"")};ve=C.hpf=C.__private__.hpf=typeof f=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ne(te,f)}:f==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ne(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ne(te,16)};var Ve=C.f2=C.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return Ne(te,2)},be=C.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return Ne(te,3)},Ce=C.scale=C.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return ee===Z.COMPAT?te*xn:ee===Z.ADVANCED?te:void 0},Oe=function(te){return ee===Z.COMPAT?As()-te:ee===Z.ADVANCED?te:void 0},nt=function(te){return Ce(Oe(te))};C.__private__.setPrecision=C.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var mt,ht="00000000000000000000000000000000",He=C.__private__.getFileId=function(){return ht},ut=C.__private__.setFileId=function(te){return ht=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():ht.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(R=new Dh(w.userPermissions,w.userPassword,w.ownerPassword,ht)),ht};C.setFileId=function(te){return ut(te),this},C.getFileId=function(){return He()};var bt=C.__private__.convertDateToPDFDate=function(te){var Te=te.getTimezoneOffset(),gt=Te<0?"+":"-",qt=Math.floor(Math.abs(Te/60)),ur=Math.abs(Te%60),Xr=[gt,Pe(qt),"'",Pe(ur),"'"].join("");return["D:",te.getFullYear(),Pe(te.getMonth()+1),Pe(te.getDate()),Pe(te.getHours()),Pe(te.getMinutes()),Pe(te.getSeconds()),Xr].join("")},Xe=C.__private__.convertPDFDateToDate=function(te){var Te=parseInt(te.substr(2,4),10),gt=parseInt(te.substr(6,2),10)-1,qt=parseInt(te.substr(8,2),10),ur=parseInt(te.substr(10,2),10),Xr=parseInt(te.substr(12,2),10),gn=parseInt(te.substr(14,2),10);return new Date(Te,gt,qt,ur,Xr,gn,0)},We=C.__private__.setCreationDate=function(te){var Te;if(te===void 0&&(te=new Date),te instanceof Date)Te=bt(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Te=te}return mt=Te},ke=C.__private__.getCreationDate=function(te){var Te=mt;return te==="jsDate"&&(Te=Xe(mt)),Te};C.setCreationDate=function(te){return We(te),this},C.getCreationDate=function(te){return ke(te)};var Re,Pe=C.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},dt=C.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},Et=0,Pt=[],Kt=[],$t=0,br=[],Gt=[],Rr=!1,Mr=Kt,Kr=function(){Et=0,$t=0,Kt=[],Pt=[],br=[],ot=we(),lt=we()};C.__private__.setCustomOutputDestination=function(te){Rr=!0,Mr=te};var Ct=function(te){Rr||(Mr=te)};C.__private__.resetCustomOutputDestination=function(){Rr=!1,Mr=Kt};var pt=C.__private__.out=function(te){return te=te.toString(),$t+=te.length+1,Mr.push(te),Mr},Dr=C.__private__.write=function(te){return pt(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},ln=C.__private__.getArrayBuffer=function(te){for(var Te=te.length,gt=new ArrayBuffer(Te),qt=new Uint8Array(gt);Te--;)qt[Te]=te.charCodeAt(Te);return gt},Wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Wt};var Ur=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(te){return Ur=ee===Z.ADVANCED?te/xn:te,this};var dn,tn=C.__private__.getFontSize=C.getFontSize=function(){return ee===Z.COMPAT?Ur:Ur*xn},Bn=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(te){return Bn=te,this},C.__private__.getR2L=C.getR2L=function(){return Bn};var Jn,ai=C.__private__.setZoomMode=function(te){var Te=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))dn=te;else if(isNaN(te)){if(Te.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');dn=te}else dn=parseInt(te,10)};C.__private__.getZoomMode=function(){return dn};var _i,hi=C.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');Jn=te};C.__private__.getPageMode=function(){return Jn};var yr=C.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');_i=te};C.__private__.getLayoutMode=function(){return _i},C.__private__.setDisplayMode=C.setDisplayMode=function(te,Te,gt){return ai(te),yr(Te),hi(gt),this};var Vr={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(te){if(Object.keys(Vr).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vr[te]},C.__private__.getDocumentProperties=function(){return Vr},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(te){for(var Te in Vr)Vr.hasOwnProperty(Te)&&te[Te]&&(Vr[Te]=te[Te]);return this},C.__private__.setDocumentProperty=function(te,Te){if(Object.keys(Vr).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vr[te]=Te};var wi,xn,si,fr,or,Yr={},un={},Or=[],pn={},Qn={},ci={},Ro={},gi=null,co=0,li=[],no=new K_(C),yo=e.hotfixes||[],pi={},Li={},Yo=[],vn=function te(Te,gt,qt,ur,Xr,gn){if(!(this instanceof te))return new te(Te,gt,qt,ur,Xr,gn);isNaN(Te)&&(Te=1),isNaN(gt)&&(gt=0),isNaN(qt)&&(qt=0),isNaN(ur)&&(ur=1),isNaN(Xr)&&(Xr=0),isNaN(gn)&&(gn=0),this._matrix=[Te,gt,qt,ur,Xr,gn]};Object.defineProperty(vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vn.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ve).join(te)},vn.prototype.multiply=function(te){var Te=te.sx*this.sx+te.shy*this.shx,gt=te.sx*this.shy+te.shy*this.sy,qt=te.shx*this.sx+te.sy*this.shx,ur=te.shx*this.shy+te.sy*this.sy,Xr=te.tx*this.sx+te.ty*this.shx+this.tx,gn=te.tx*this.shy+te.ty*this.sy+this.ty;return new vn(Te,gt,qt,ur,Xr,gn)},vn.prototype.decompose=function(){var te=this.sx,Te=this.shy,gt=this.shx,qt=this.sy,ur=this.tx,Xr=this.ty,gn=Math.sqrt(te*te+Te*Te),Kn=(te/=gn)*gt+(Te/=gn)*qt;gt-=te*Kn,qt-=Te*Kn;var xi=Math.sqrt(gt*gt+qt*qt);return Kn/=xi,te*(qt/=xi)<Te*(gt/=xi)&&(te=-te,Te=-Te,Kn=-Kn,gn=-gn),{scale:new vn(gn,0,0,xi,0,0),translate:new vn(1,0,0,1,ur,Xr),rotate:new vn(te,Te,-Te,te,0,0),skew:new vn(1,0,Kn,1,0,0)}},vn.prototype.toString=function(te){return this.join(" ")},vn.prototype.inversed=function(){var te=this.sx,Te=this.shy,gt=this.shx,qt=this.sy,ur=this.tx,Xr=this.ty,gn=1/(te*qt-Te*gt),Kn=qt*gn,xi=-Te*gn,Oi=-gt*gn,Ji=te*gn;return new vn(Kn,xi,Oi,Ji,-Kn*ur-Oi*Xr,-xi*ur-Ji*Xr)},vn.prototype.applyToPoint=function(te){var Te=te.x*this.sx+te.y*this.shx+this.tx,gt=te.x*this.shy+te.y*this.sy+this.ty;return new Zl(Te,gt)},vn.prototype.applyToRectangle=function(te){var Te=this.applyToPoint(te),gt=this.applyToPoint(new Zl(te.x+te.w,te.y+te.h));return new xu(Te.x,Te.y,gt.x-Te.x,gt.y-Te.y)},vn.prototype.clone=function(){var te=this.sx,Te=this.shy,gt=this.shx,qt=this.sy,ur=this.tx,Xr=this.ty;return new vn(te,Te,gt,qt,ur,Xr)},C.Matrix=vn;var ze=C.matrixMult=function(te,Te){return Te.multiply(te)},Ea=new vn(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=Ea;var ha=function(te,Te){if(!Qn[te]){var gt=(Te instanceof th?"Sh":"P")+(Object.keys(pn).length+1).toString(10);Te.id=gt,Qn[te]=gt,pn[gt]=Te,no.publish("addPattern",Te)}};C.ShadingPattern=th,C.TilingPattern=Bh,C.addShadingPattern=function(te,Te){return pe("addShadingPattern()"),ha(te,Te),this},C.beginTilingPattern=function(te){pe("beginTilingPattern()"),jn(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},C.endTilingPattern=function(te,Te){pe("endTilingPattern()"),Te.stream=Gt[Re].join(`
`),ha(te,Te),no.publish("endTilingPattern",Te),Yo.pop().restore()};var ra=C.__private__.newObject=function(){var te=we();return _e(te,!0),te},we=C.__private__.newObjectDeferred=function(){return Et++,Pt[Et]=function(){return $t},Et},_e=function(te,Te){return Te=typeof Te=="boolean"&&Te,Pt[te]=$t,Te&&pt(te+" 0 obj"),te},De=C.__private__.newAdditionalObject=function(){var te={objId:we(),content:""};return br.push(te),te},ot=we(),lt=we(),Rt=C.__private__.decodeColorString=function(te){var Te=te.split(" ");if(Te.length!==2||Te[1]!=="g"&&Te[1]!=="G")Te.length===5&&(Te[4]==="k"||Te[4]==="K")&&(Te=[(1-Te[0])*(1-Te[3]),(1-Te[1])*(1-Te[3]),(1-Te[2])*(1-Te[3]),"r"]);else{var gt=parseFloat(Te[0]);Te=[gt,gt,gt,"r"]}for(var qt="#",ur=0;ur<3;ur++)qt+=("0"+Math.floor(255*parseFloat(Te[ur])).toString(16)).slice(-2);return qt},Fe=C.__private__.encodeColorString=function(te){var Te;typeof te=="string"&&(te={ch1:te});var gt=te.ch1,qt=te.ch2,ur=te.ch3,Xr=te.ch4,gn=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof gt=="string"&&gt.charAt(0)!=="#"){var Kn=new i6(gt);if(Kn.ok)gt=Kn.toHex();else if(!/^\d*\.?\d*$/.test(gt))throw new Error('Invalid color "'+gt+'" passed to jsPDF.encodeColorString.')}if(typeof gt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(gt)&&(gt="#"+gt[1]+gt[1]+gt[2]+gt[2]+gt[3]+gt[3]),typeof gt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(gt)){var xi=parseInt(gt.substr(1),16);gt=xi>>16&255,qt=xi>>8&255,ur=255&xi}if(qt===void 0||Xr===void 0&&gt===qt&&qt===ur)if(typeof gt=="string")Te=gt+" "+gn[0];else switch(te.precision){case 2:Te=Ve(gt/255)+" "+gn[0];break;case 3:default:Te=be(gt/255)+" "+gn[0]}else if(Xr===void 0||_a(Xr)==="object"){if(Xr&&!isNaN(Xr.a)&&Xr.a===0)return Te=["1.","1.","1.",gn[1]].join(" ");if(typeof gt=="string")Te=[gt,qt,ur,gn[1]].join(" ");else switch(te.precision){case 2:Te=[Ve(gt/255),Ve(qt/255),Ve(ur/255),gn[1]].join(" ");break;default:case 3:Te=[be(gt/255),be(qt/255),be(ur/255),gn[1]].join(" ")}}else if(typeof gt=="string")Te=[gt,qt,ur,Xr,gn[2]].join(" ");else switch(te.precision){case 2:Te=[Ve(gt),Ve(qt),Ve(ur),Ve(Xr),gn[2]].join(" ");break;case 3:default:Te=[be(gt),be(qt),be(ur),be(Xr),gn[2]].join(" ")}return Te},Ht=C.__private__.getFilters=function(){return c},Nt=C.__private__.putStream=function(te){var Te=(te=te||{}).data||"",gt=te.filters||Ht(),qt=te.alreadyAppliedFilters||[],ur=te.addLength1||!1,Xr=Te.length,gn=te.objectId,Kn=function(Da){return Da};if(w!==null&&gn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Kn=R.encryptor(gn,0));var xi={};gt===!0&&(gt=["FlateEncode"]);var Oi=te.additionalKeyValues||[],Ji=(xi=to.API.processDataByFilters!==void 0?to.API.processDataByFilters(Te,gt):{data:Te,reverseChain:[]}).reverseChain+(Array.isArray(qt)?qt.join(" "):qt.toString());if(xi.data.length!==0&&(Oi.push({key:"Length",value:xi.data.length}),ur===!0&&Oi.push({key:"Length1",value:Xr})),Ji.length!=0)if(Ji.split("/").length-1==1)Oi.push({key:"Filter",value:Ji});else{Oi.push({key:"Filter",value:"["+Ji+"]"});for(var fo=0;fo<Oi.length;fo+=1)if(Oi[fo].key==="DecodeParms"){for(var Vo=[],Qo=0;Qo<xi.reverseChain.split("/").length-1;Qo+=1)Vo.push("null");Vo.push(Oi[fo].value),Oi[fo].value="["+Vo.join(" ")+"]"}}pt("<<");for(var ea=0;ea<Oi.length;ea++)pt("/"+Oi[ea].key+" "+Oi[ea].value);pt(">>"),xi.data.length!==0&&(pt("stream"),pt(Kn(xi.data)),pt("endstream"))},ir=C.__private__.putPage=function(te){var Te=te.number,gt=te.data,qt=te.objId,ur=te.contentsObjId;_e(qt,!0),pt("<</Type /Page"),pt("/Parent "+te.rootDictionaryObjId+" 0 R"),pt("/Resources "+te.resourceDictionaryObjId+" 0 R"),pt("/MediaBox ["+parseFloat(ve(te.mediaBox.bottomLeftX))+" "+parseFloat(ve(te.mediaBox.bottomLeftY))+" "+ve(te.mediaBox.topRightX)+" "+ve(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&pt("/CropBox ["+ve(te.cropBox.bottomLeftX)+" "+ve(te.cropBox.bottomLeftY)+" "+ve(te.cropBox.topRightX)+" "+ve(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&pt("/BleedBox ["+ve(te.bleedBox.bottomLeftX)+" "+ve(te.bleedBox.bottomLeftY)+" "+ve(te.bleedBox.topRightX)+" "+ve(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&pt("/TrimBox ["+ve(te.trimBox.bottomLeftX)+" "+ve(te.trimBox.bottomLeftY)+" "+ve(te.trimBox.topRightX)+" "+ve(te.trimBox.topRightY)+"]"),te.artBox!==null&&pt("/ArtBox ["+ve(te.artBox.bottomLeftX)+" "+ve(te.artBox.bottomLeftY)+" "+ve(te.artBox.topRightX)+" "+ve(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&pt("/UserUnit "+te.userUnit),no.publish("putPage",{objId:qt,pageContext:li[Te],pageNumber:Te,page:gt}),pt("/Contents "+ur+" 0 R"),pt(">>"),pt("endobj");var Xr=gt.join(`
`);return ee===Z.ADVANCED&&(Xr+=`
Q`),_e(ur,!0),Nt({data:Xr,filters:Ht(),objectId:ur}),pt("endobj"),qt},Br=C.__private__.putPages=function(){var te,Te,gt=[];for(te=1;te<=co;te++)li[te].objId=we(),li[te].contentsObjId=we();for(te=1;te<=co;te++)gt.push(ir({number:te,data:Gt[te],objId:li[te].objId,contentsObjId:li[te].contentsObjId,mediaBox:li[te].mediaBox,cropBox:li[te].cropBox,bleedBox:li[te].bleedBox,trimBox:li[te].trimBox,artBox:li[te].artBox,userUnit:li[te].userUnit,rootDictionaryObjId:ot,resourceDictionaryObjId:lt}));_e(ot,!0),pt("<</Type /Pages");var qt="/Kids [";for(Te=0;Te<co;Te++)qt+=gt[Te]+" 0 R ";pt(qt+"]"),pt("/Count "+co),pt(">>"),pt("endobj"),no.publish("postPutPages")},nn=function(te){no.publish("putFont",{font:te,out:pt,newObject:ra,putStream:Nt}),te.isAlreadyPutted!==!0&&(te.objectNumber=ra(),pt("<<"),pt("/Type /Font"),pt("/BaseFont /"+zh(te.postScriptName)),pt("/Subtype /Type1"),typeof te.encoding=="string"&&pt("/Encoding /"+te.encoding),pt("/FirstChar 32"),pt("/LastChar 255"),pt(">>"),pt("endobj"))},Fr=function(){for(var te in Yr)Yr.hasOwnProperty(te)&&(E===!1||E===!0&&L.hasOwnProperty(te))&&nn(Yr[te])},Hn=function(te){te.objectNumber=ra();var Te=[];Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Form"}),Te.push({key:"BBox",value:"["+[ve(te.x),ve(te.y),ve(te.x+te.width),ve(te.y+te.height)].join(" ")+"]"}),Te.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var gt=te.pages[1].join(`
`);Nt({data:gt,additionalKeyValues:Te,objectId:te.objectNumber}),pt("endobj")},Yn=function(){for(var te in pi)pi.hasOwnProperty(te)&&Hn(pi[te])},sn=function(te,Te){var gt,qt=[],ur=1/(Te-1);for(gt=0;gt<1;gt+=ur)qt.push(gt);if(qt.push(1),te[0].offset!=0){var Xr={offset:0,color:te[0].color};te.unshift(Xr)}if(te[te.length-1].offset!=1){var gn={offset:1,color:te[te.length-1].color};te.push(gn)}for(var Kn="",xi=0,Oi=0;Oi<qt.length;Oi++){for(gt=qt[Oi];gt>te[xi+1].offset;)xi++;var Ji=te[xi].offset,fo=(gt-Ji)/(te[xi+1].offset-Ji),Vo=te[xi].color,Qo=te[xi+1].color;Kn+=dt(Math.round((1-fo)*Vo[0]+fo*Qo[0]).toString(16))+dt(Math.round((1-fo)*Vo[1]+fo*Qo[1]).toString(16))+dt(Math.round((1-fo)*Vo[2]+fo*Qo[2]).toString(16))}return Kn.trim()},yi=function(te,Te){Te||(Te=21);var gt=ra(),qt=sn(te.colors,Te),ur=[];ur.push({key:"FunctionType",value:"0"}),ur.push({key:"Domain",value:"[0.0 1.0]"}),ur.push({key:"Size",value:"["+Te+"]"}),ur.push({key:"BitsPerSample",value:"8"}),ur.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nt({data:qt,additionalKeyValues:ur,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:gt}),pt("endobj"),te.objectNumber=ra(),pt("<< /ShadingType "+te.type),pt("/ColorSpace /DeviceRGB");var Xr="/Coords ["+ve(parseFloat(te.coords[0]))+" "+ve(parseFloat(te.coords[1]))+" ";te.type===2?Xr+=ve(parseFloat(te.coords[2]))+" "+ve(parseFloat(te.coords[3])):Xr+=ve(parseFloat(te.coords[2]))+" "+ve(parseFloat(te.coords[3]))+" "+ve(parseFloat(te.coords[4]))+" "+ve(parseFloat(te.coords[5])),pt(Xr+="]"),te.matrix&&pt("/Matrix ["+te.matrix.toString()+"]"),pt("/Function "+gt+" 0 R"),pt("/Extend [true true]"),pt(">>"),pt("endobj")},Ai=function(te,Te){var gt=we(),qt=ra();Te.push({resourcesOid:gt,objectOid:qt}),te.objectNumber=qt;var ur=[];ur.push({key:"Type",value:"/Pattern"}),ur.push({key:"PatternType",value:"1"}),ur.push({key:"PaintType",value:"1"}),ur.push({key:"TilingType",value:"1"}),ur.push({key:"BBox",value:"["+te.boundingBox.map(ve).join(" ")+"]"}),ur.push({key:"XStep",value:ve(te.xStep)}),ur.push({key:"YStep",value:ve(te.yStep)}),ur.push({key:"Resources",value:gt+" 0 R"}),te.matrix&&ur.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),Nt({data:te.stream,additionalKeyValues:ur,objectId:te.objectNumber}),pt("endobj")},Yi=function(te){var Te;for(Te in pn)pn.hasOwnProperty(Te)&&(pn[Te]instanceof th?yi(pn[Te]):pn[Te]instanceof Bh&&Ai(pn[Te],te))},Ii=function(te){for(var Te in te.objectNumber=ra(),pt("<<"),te)switch(Te){case"opacity":pt("/ca "+Ve(te[Te]));break;case"stroke-opacity":pt("/CA "+Ve(te[Te]))}pt(">>"),pt("endobj")},Vi=function(){var te;for(te in ci)ci.hasOwnProperty(te)&&Ii(ci[te])},io=function(){for(var te in pt("/XObject <<"),pi)pi.hasOwnProperty(te)&&pi[te].objectNumber>=0&&pt("/"+te+" "+pi[te].objectNumber+" 0 R");no.publish("putXobjectDict"),pt(">>")},ko=function(){R.oid=ra(),pt("<<"),pt("/Filter /Standard"),pt("/V "+R.v),pt("/R "+R.r),pt("/U <"+R.toHexString(R.U)+">"),pt("/O <"+R.toHexString(R.O)+">"),pt("/P "+R.P),pt(">>"),pt("endobj")},Jo=function(){for(var te in pt("/Font <<"),Yr)Yr.hasOwnProperty(te)&&(E===!1||E===!0&&L.hasOwnProperty(te))&&pt("/"+te+" "+Yr[te].objectNumber+" 0 R");pt(">>")},So=function(){if(Object.keys(pn).length>0){for(var te in pt("/Shading <<"),pn)pn.hasOwnProperty(te)&&pn[te]instanceof th&&pn[te].objectNumber>=0&&pt("/"+te+" "+pn[te].objectNumber+" 0 R");no.publish("putShadingPatternDict"),pt(">>")}},Ko=function(te){if(Object.keys(pn).length>0){for(var Te in pt("/Pattern <<"),pn)pn.hasOwnProperty(Te)&&pn[Te]instanceof C.TilingPattern&&pn[Te].objectNumber>=0&&pn[Te].objectNumber<te&&pt("/"+Te+" "+pn[Te].objectNumber+" 0 R");no.publish("putTilingPatternDict"),pt(">>")}},Gl=function(){if(Object.keys(ci).length>0){var te;for(te in pt("/ExtGState <<"),ci)ci.hasOwnProperty(te)&&ci[te].objectNumber>=0&&pt("/"+te+" "+ci[te].objectNumber+" 0 R");no.publish("putGStateDict"),pt(">>")}},na=function(te){_e(te.resourcesOid,!0),pt("<<"),pt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Jo(),So(),Ko(te.objectOid),Gl(),io(),pt(">>"),pt("endobj")},Ao=function(){var te=[];Fr(),Vi(),Yn(),Yi(te),no.publish("putResources"),te.forEach(na),na({resourcesOid:lt,objectOid:Number.MAX_SAFE_INTEGER}),no.publish("postPutResources")},_l=function(){no.publish("putAdditionalObjects");for(var te=0;te<br.length;te++){var Te=br[te];_e(Te.objId,!0),pt(Te.content),pt("endobj")}no.publish("postPutAdditionalObjects")},bl=function(te){un[te.fontName]=un[te.fontName]||{},un[te.fontName][te.fontStyle]=te.id},vs=function(te,Te,gt,qt,ur){var Xr={id:"F"+(Object.keys(Yr).length+1).toString(10),postScriptName:te,fontName:Te,fontStyle:gt,encoding:qt,isStandardFont:ur||!1,metadata:{}};return no.publish("addFont",{font:Xr,instance:this}),Yr[Xr.id]=Xr,bl(Xr),Xr.id},Hl=function(te){for(var Te=0,gt=Wt.length;Te<gt;Te++){var qt=vs.call(this,te[Te][0],te[Te][1],te[Te][2],Wt[Te][3],!0);E===!1&&(L[qt]=!0);var ur=te[Te][0].split("-");bl({id:qt,fontName:ur[0],fontStyle:ur[1]||""})}no.publish("addFonts",{fonts:Yr,dictionary:un})},_s=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(qt){var Te=qt.stack||"";~Te.indexOf(" at ")&&(Te=Te.split(" at ")[1]);var gt="Error in function "+Te.split(`
`)[0].split("<")[0]+": "+qt.message;if(!ro.console)throw new Error(gt);ro.console.error(gt,qt),ro.alert&&alert(gt)}},te.foo.bar=te,te.foo},Vu=function(te,Te){var gt,qt,ur,Xr,gn,Kn,xi,Oi,Ji;if(ur=(Te=Te||{}).sourceEncoding||"Unicode",gn=Te.outputEncoding,(Te.autoencode||gn)&&Yr[wi].metadata&&Yr[wi].metadata[ur]&&Yr[wi].metadata[ur].encoding&&(Xr=Yr[wi].metadata[ur].encoding,!gn&&Yr[wi].encoding&&(gn=Yr[wi].encoding),!gn&&Xr.codePages&&(gn=Xr.codePages[0]),typeof gn=="string"&&(gn=Xr[gn]),gn)){for(xi=!1,Kn=[],gt=0,qt=te.length;gt<qt;gt++)(Oi=gn[te.charCodeAt(gt)])?Kn.push(String.fromCharCode(Oi)):Kn.push(te[gt]),Kn[gt].charCodeAt(0)>>8&&(xi=!0);te=Kn.join("")}for(gt=te.length;xi===void 0&&gt!==0;)te.charCodeAt(gt-1)>>8&&(xi=!0),gt--;if(!xi)return te;for(Kn=Te.noBOM?[]:[254,255],gt=0,qt=te.length;gt<qt;gt++){if((Ji=(Oi=te.charCodeAt(gt))>>8)>>8)throw new Error("Character at position "+gt+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kn.push(Ji),Kn.push(Oi-(Ji<<8))}return String.fromCharCode.apply(void 0,Kn)},$a=C.__private__.pdfEscape=C.pdfEscape=function(te,Te){return Vu(te,Te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wl=C.__private__.beginPage=function(te){Gt[++co]=[],li[co]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Gu(co),Ct(Gt[Re])},Wl=function(te,Te){var gt,qt,ur;switch(r=Te||r,typeof te=="string"&&(gt=H(te.toLowerCase()),Array.isArray(gt)&&(qt=gt[0],ur=gt[1])),Array.isArray(te)&&(qt=te[0]*xn,ur=te[1]*xn),isNaN(qt)&&(qt=o[0],ur=o[1]),(qt>14400||ur>14400)&&(Ma.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qt=Math.min(14400,qt),ur=Math.min(14400,ur)),o=[qt,ur],r.substr(0,1)){case"l":ur>qt&&(o=[ur,qt]);break;case"p":qt>ur&&(o=[ur,qt])}wl(o),ii(T),pt(Xa),Hu!==0&&pt(Hu+" J"),bu!==0&&pt(bu+" j"),no.publish("addPage",{pageNumber:co})},$u=function(te){te>0&&te<=co&&(Gt.splice(te,1),li.splice(te,1),co--,Re>co&&(Re=co),this.setPage(Re))},Gu=function(te){te>0&&te<=co&&(Re=te)},nl=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return Gt.length-1},us=function(te,Te,gt){var qt,ur=void 0;return gt=gt||{},te=te!==void 0?te:Yr[wi].fontName,Te=Te!==void 0?Te:Yr[wi].fontStyle,qt=te.toLowerCase(),un[qt]!==void 0&&un[qt][Te]!==void 0?ur=un[qt][Te]:un[te]!==void 0&&un[te][Te]!==void 0?ur=un[te][Te]:gt.disableWarning===!1&&Ma.warn("Unable to look up font label for font '"+te+"', '"+Te+"'. Refer to getFontList() for available fonts."),ur||gt.noFallback||(ur=un.times[Te])==null&&(ur=un.times.normal),ur},Ds=C.__private__.putInfo=function(){var te=ra(),Te=function(qt){return qt};for(var gt in w!==null&&(Te=R.encryptor(te,0)),pt("<<"),pt("/Producer ("+$a(Te("jsPDF "+to.version))+")"),Vr)Vr.hasOwnProperty(gt)&&Vr[gt]&&pt("/"+gt.substr(0,1).toUpperCase()+gt.substr(1)+" ("+$a(Te(Vr[gt]))+")");pt("/CreationDate ("+$a(Te(mt))+")"),pt(">>"),pt("endobj")},xl=C.__private__.putCatalog=function(te){var Te=(te=te||{}).rootDictionaryObjId||ot;switch(ra(),pt("<<"),pt("/Type /Catalog"),pt("/Pages "+Te+" 0 R"),dn||(dn="fullwidth"),dn){case"fullwidth":pt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pt("/OpenAction [3 0 R /Fit]");break;case"original":pt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var gt=""+dn;gt.substr(gt.length-1)==="%"&&(dn=parseInt(dn)/100),typeof dn=="number"&&pt("/OpenAction [3 0 R /XYZ null null "+Ve(dn)+"]")}switch(_i||(_i="continuous"),_i){case"continuous":pt("/PageLayout /OneColumn");break;case"single":pt("/PageLayout /SinglePage");break;case"two":case"twoleft":pt("/PageLayout /TwoColumnLeft");break;case"tworight":pt("/PageLayout /TwoColumnRight")}Jn&&pt("/PageMode /"+Jn),no.publish("putCatalog"),pt(">>"),pt("endobj")},gu=C.__private__.putTrailer=function(){pt("trailer"),pt("<<"),pt("/Size "+(Et+1)),pt("/Root "+Et+" 0 R"),pt("/Info "+(Et-1)+" 0 R"),w!==null&&pt("/Encrypt "+R.oid+" 0 R"),pt("/ID [ <"+ht+"> <"+ht+"> ]"),pt(">>")},kl=C.__private__.putHeader=function(){pt("%PDF-"+F),pt("%")},yu=C.__private__.putXRef=function(){var te="0000000000";pt("xref"),pt("0 "+(Et+1)),pt("0000000000 65535 f ");for(var Te=1;Te<=Et;Te++)typeof Pt[Te]=="function"?pt((te+Pt[Te]()).slice(-10)+" 00000 n "):Pt[Te]!==void 0?pt((te+Pt[Te]).slice(-10)+" 00000 n "):pt("0000000000 00000 n ")},bs=C.__private__.buildDocument=function(){Kr(),Ct(Kt),no.publish("buildDocument"),kl(),Br(),_l(),Ao(),w!==null&&ko(),Ds(),xl();var te=$t;return yu(),gu(),pt("startxref"),pt(""+te),pt("%%EOF"),Ct(Gt[Re]),Kt.join(`
`)},ws=C.__private__.getBlob=function(te){return new Blob([ln(te)],{type:"application/pdf"})},Oo=C.output=C.__private__.output=_s(function(te,Te){switch(typeof(Te=Te||{})=="string"?Te={filename:Te}:Te.filename=Te.filename||"generated.pdf",te){case void 0:return bs();case"save":C.save(Te.filename);break;case"arraybuffer":return ln(bs());case"blob":return ws(bs());case"bloburi":case"bloburl":if(ro.URL!==void 0&&typeof ro.URL.createObjectURL=="function")return ro.URL&&ro.URL.createObjectURL(ws(bs()))||void 0;Ma.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var gt="",qt=bs();try{gt=zg(qt)}catch{gt=zg(unescape(encodeURIComponent(qt)))}return"data:application/pdf;filename="+Te.filename+";base64,"+gt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ro)==="[object Window]"){var ur="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Te.pdfObjectUrl&&(ur=Te.pdfObjectUrl,Xr="");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ur+'"'+Xr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Te)+");<\/script></body></html>",Kn=ro.open();return Kn!==null&&Kn.document.write(gn),Kn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ro)==="[object Window]"){var xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Te.filename+'" width="500px" height="400px" /></body></html>',Oi=ro.open();if(Oi!==null){Oi.document.write(xi);var Ji=this;Oi.document.documentElement.querySelector("#pdfViewer").onload=function(){Oi.document.title=Te.filename,Oi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ji.output("bloburl"))}}return Oi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ro)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fo='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Te)+'"></iframe></body></html>',Vo=ro.open();if(Vo!==null&&(Vo.document.write(fo),Vo.document.title=Te.filename),Vo||typeof safari>"u")return Vo;break;case"datauri":case"dataurl":return ro.document.location.href=this.output("datauristring",Te);default:return null}}),il=function(te){return Array.isArray(yo)===!0&&yo.indexOf(te)>-1};switch(n){case"pt":xn=1;break;case"mm":xn=72/25.4;break;case"cm":xn=72/2.54;break;case"in":xn=72;break;case"px":xn=il("px_scaling")==1?.75:96/72;break;case"pc":case"em":xn=12;break;case"ex":xn=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xn=n}var R=null;We(),ut();var W=function(te){return w!==null?R.encryptor(te,0):function(Te){return Te}},ae=C.__private__.getPageInfo=C.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:li[te].objId,pageNumber:te,pageContext:li[te]}},Ae=C.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Te in li)if(li[Te].objId===te)break;return ae(Te)},Ye=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:li[Re].objId,pageNumber:Re,pageContext:li[Re]}};C.addPage=function(){return Wl.apply(this,arguments),this},C.setPage=function(){return Gu.apply(this,arguments),Ct.call(this,Gt[Re]),this},C.insertPage=function(te){return this.addPage(),this.movePage(Re,te),this},C.movePage=function(te,Te){var gt,qt;if(te>Te){gt=Gt[te],qt=li[te];for(var ur=te;ur>Te;ur--)Gt[ur]=Gt[ur-1],li[ur]=li[ur-1];Gt[Te]=gt,li[Te]=qt,this.setPage(Te)}else if(te<Te){gt=Gt[te],qt=li[te];for(var Xr=te;Xr<Te;Xr++)Gt[Xr]=Gt[Xr+1],li[Xr]=li[Xr+1];Gt[Te]=gt,li[Te]=qt,this.setPage(Te)}return this},C.deletePage=function(){return $u.apply(this,arguments),this},C.__private__.text=C.text=function(te,Te,gt,qt,ur){var Xr,gn,Kn,xi,Oi,Ji,fo,Vo,Qo,ea=(qt=qt||{}).scope||this;if(typeof te=="number"&&typeof Te=="number"&&(typeof gt=="string"||Array.isArray(gt))){var Da=gt;gt=Te,Te=te,te=Da}if(arguments[3]instanceof vn?(pe("The transform parameter of text() with a Matrix value"),Qo=ur):(Kn=arguments[4],xi=arguments[5],_a(fo=arguments[3])==="object"&&fo!==null||(typeof Kn=="string"&&(xi=Kn,Kn=null),typeof fo=="string"&&(xi=fo,fo=null),typeof fo=="number"&&(Kn=fo,fo=null),qt={flags:fo,angle:Kn,align:xi})),isNaN(Te)||isNaN(gt)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return ea;var aa="",$i=!1,za=typeof qt.lineHeightFactor=="number"?qt.lineHeightFactor:h,Sa=ea.internal.scaleFactor;function Yl(Fo){return Fo=Fo.split("	").join(Array(qt.TabLen||9).join(" ")),$a(Fo,fo)}function El(Fo){for(var Ki,Bo=Fo.concat(),ga=[],An=Bo.length;An--;)typeof(Ki=Bo.shift())=="string"?ga.push(Ki):Array.isArray(Fo)&&(Ki.length===1||Ki[1]===void 0&&Ki[2]===void 0)?ga.push(Ki[0]):ga.push([Ki[0],Ki[1],Ki[2]]);return ga}function Zu(Fo,Ki){var Bo;if(typeof Fo=="string")Bo=Ki(Fo)[0];else if(Array.isArray(Fo)){for(var ga,An,Ss=Fo.concat(),Yu=[],Ju=Ss.length;Ju--;)typeof(ga=Ss.shift())=="string"?Yu.push(Ki(ga)[0]):Array.isArray(ga)&&typeof ga[0]=="string"&&(An=Ki(ga[0],ga[1],ga[2]),Yu.push([An[0],An[1],An[2]]));Bo=Yu}return Bo}var Ns=!1,Sl=!0;if(typeof te=="string")Ns=!0;else if(Array.isArray(te)){var ol=te.concat();gn=[];for(var ku,Na=ol.length;Na--;)(typeof(ku=ol.shift())!="string"||Array.isArray(ku)&&typeof ku[0]!="string")&&(Sl=!1);Ns=Sl}if(Ns===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var Au=Ur/ea.internal.scaleFactor,Jl=Au*(za-1);switch(qt.baseline){case"bottom":gt-=Jl;break;case"top":gt+=Au-Jl;break;case"hanging":gt+=Au-2*Jl;break;case"middle":gt+=Au/2-Jl}if((Ji=qt.maxWidth||0)>0&&(typeof te=="string"?te=ea.splitTextToSize(te,Ji):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(Fo,Ki){return Fo.concat(ea.splitTextToSize(Ki,Ji))},[]))),Xr={text:te,x:Te,y:gt,options:qt,mutex:{pdfEscape:$a,activeFontKey:wi,fonts:Yr,activeFontSize:Ur}},no.publish("preProcessText",Xr),te=Xr.text,Kn=(qt=Xr.options).angle,!(Qo instanceof vn)&&Kn&&typeof Kn=="number"){Kn*=Math.PI/180,qt.rotationDirection===0&&(Kn=-Kn),ee===Z.ADVANCED&&(Kn=-Kn);var Zs=Math.cos(Kn),Cl=Math.sin(Kn);Qo=new vn(Zs,Cl,-Cl,Zs,0,0)}else Kn&&Kn instanceof vn&&(Qo=Kn);ee!==Z.ADVANCED||Qo||(Qo=Ea),(Oi=qt.charSpace||_u)!==void 0&&(aa+=ve(Ce(Oi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Vo=qt.horizontalScale)!==void 0&&(aa+=ve(100*Vo)+` Tz
`),qt.lang;var Ra=-1,Kl=qt.renderingMode!==void 0?qt.renderingMode:qt.stroke,Xs=ea.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":Ra=0;break;case 1:case!0:case"stroke":Ra=1;break;case 2:case"fillThenStroke":Ra=2;break;case 3:case"invisible":Ra=3;break;case 4:case"fillAndAddForClipping":Ra=4;break;case 5:case"strokeAndAddPathForClipping":Ra=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ra=6;break;case 7:case"addToPathForClipping":Ra=7}var Il=Xs.usedRenderingMode!==void 0?Xs.usedRenderingMode:-1;Ra!==-1?aa+=Ra+` Tr
`:Il!==-1&&(aa+=`0 Tr
`),Ra!==-1&&(Xs.usedRenderingMode=Ra),xi=qt.align||"left";var is,Ll=Ur*za,pc=ea.internal.pageSize.getWidth(),zc=Yr[wi];Oi=qt.charSpace||_u,Ji=qt.maxWidth||0,fo=Object.assign({autoencode:!0,noBOM:!0},qt.flags);var Tl=[];if(Object.prototype.toString.call(te)==="[object Array]"){var Ga;gn=El(te),xi!=="left"&&(is=gn.map(function(Fo){return ea.getStringUnitWidth(Fo,{font:zc,charSpace:Oi,fontSize:Ur,doKerning:!1})*Ur/Sa}));var Rs,Os=0;if(xi==="right"){Te-=is[0],te=[],Na=gn.length;for(var Ya=0;Ya<Na;Ya++)Ya===0?(Rs=xs(Te),Ga=Ws(gt)):(Rs=Ce(Os-is[Ya]),Ga=-Ll),te.push([gn[Ya],Rs,Ga]),Os=is[Ya]}else if(xi==="center"){Te-=is[0]/2,te=[],Na=gn.length;for(var sa=0;sa<Na;sa++)sa===0?(Rs=xs(Te),Ga=Ws(gt)):(Rs=Ce((Os-is[sa])/2),Ga=-Ll),te.push([gn[sa],Rs,Ga]),Os=is[sa]}else if(xi==="left"){te=[],Na=gn.length;for(var Fs=0;Fs<Na;Fs++)te.push(gn[Fs])}else{if(xi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');te=[],Na=gn.length,Ji=Ji!==0?Ji:pc;for(var la=0;la<Na;la++)Ga=la===0?Ws(gt):-Ll,Rs=la===0?xs(Te):0,la<Na-1?Tl.push(ve(Ce((Ji-is[la])/(gn[la].split(" ").length-1)))):Tl.push(0),te.push([gn[la],Rs,Ga])}}var Xu=typeof qt.R2L=="boolean"?qt.R2L:Bn;Xu===!0&&(te=Zu(te,function(Fo,Ki,Bo){return[Fo.split("").reverse().join(""),Ki,Bo]})),Xr={text:te,x:Te,y:gt,options:qt,mutex:{pdfEscape:$a,activeFontKey:wi,fonts:Yr,activeFontSize:Ur}},no.publish("postProcessText",Xr),te=Xr.text,$i=Xr.mutex.isHex||!1;var cs=Yr[wi].encoding;cs!=="WinAnsiEncoding"&&cs!=="StandardEncoding"||(te=Zu(te,function(Fo,Ki,Bo){return[Yl(Fo),Ki,Bo]})),gn=El(te),te=[];for(var fs,oo,Es,al=0,Ql=1,Eu=Array.isArray(gn[0])?Ql:al,Ca="",Pl=function(Fo,Ki,Bo){var ga="";return Bo instanceof vn?(Bo=typeof qt.angle=="number"?ze(Bo,new vn(1,0,0,1,Fo,Ki)):ze(new vn(1,0,0,1,Fo,Ki),Bo),ee===Z.ADVANCED&&(Bo=ze(new vn(1,0,0,-1,0,0),Bo)),ga=Bo.join(" ")+` Tm
`):ga=ve(Fo)+" "+ve(Ki)+` Td
`,ga},ba=0;ba<gn.length;ba++){switch(Ca="",Eu){case Ql:Es=($i?"<":"(")+gn[ba][0]+($i?">":")"),fs=parseFloat(gn[ba][1]),oo=parseFloat(gn[ba][2]);break;case al:Es=($i?"<":"(")+gn[ba]+($i?">":")"),fs=xs(Te),oo=Ws(gt)}Tl!==void 0&&Tl[ba]!==void 0&&(Ca=Tl[ba]+` Tw
`),ba===0?te.push(Ca+Pl(fs,oo,Qo)+Es):Eu===al?te.push(Ca+Es):Eu===Ql&&te.push(Ca+Pl(fs,oo,Qo)+Es)}te=Eu===al?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var Dn=`BT
/`;return Dn+=wi+" "+Ur+` Tf
`,Dn+=ve(Ur*za)+` TL
`,Dn+=vu+`
`,Dn+=aa,Dn+=te,pt(Dn+="ET"),L[wi]=!0,ea};var yt=C.__private__.clip=C.clip=function(te){return pt(te==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return yt("evenodd")},C.__private__.discardPath=C.discardPath=function(){return pt("n"),this};var Mt=C.__private__.isValidStyle=function(te){var Te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(Te=!0),Te};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(te){return Mt(te)&&(v=te),this};var Tt=C.__private__.getStyle=C.getStyle=function(te){var Te=v;switch(te){case"D":case"S":Te="S";break;case"F":Te="f";break;case"FD":case"DF":Te="B";break;case"f":case"f*":case"B":case"B*":Te=te}return Te},wr=C.close=function(){return pt("h"),this};C.stroke=function(){return pt("S"),this},C.fill=function(te){return mr("f",te),this},C.fillEvenOdd=function(te){return mr("f*",te),this},C.fillStroke=function(te){return mr("B",te),this},C.fillStrokeEvenOdd=function(te){return mr("B*",te),this};var mr=function(te,Te){_a(Te)==="object"?$r(Te,te):pt(te)},vr=function(te){te===null||ee===Z.ADVANCED&&te===void 0||(te=Tt(te),pt(te))};function ar(te,Te,gt,qt,ur){var Xr=new Bh(Te||this.boundingBox,gt||this.xStep,qt||this.yStep,this.gState,ur||this.matrix);Xr.stream=this.stream;var gn=te+"$$"+this.cloneIndex+++"$$";return ha(gn,Xr),Xr}var $r=function(te,Te){var gt=Qn[te.key],qt=pn[gt];if(qt instanceof th)pt("q"),pt(cn(Te)),qt.gState&&C.setGState(qt.gState),pt(te.matrix.toString()+" cm"),pt("/"+gt+" sh"),pt("Q");else if(qt instanceof Bh){var ur=new vn(1,0,0,-1,0,As());te.matrix&&(ur=ur.multiply(te.matrix||Ea),gt=ar.call(qt,te.key,te.boundingBox,te.xStep,te.yStep,ur).id),pt("q"),pt("/Pattern cs"),pt("/"+gt+" scn"),qt.gState&&C.setGState(qt.gState),pt(Te),pt("Q")}},cn=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ln=C.moveTo=function(te,Te){return pt(ve(Ce(te))+" "+ve(nt(Te))+" m"),this},tt=C.lineTo=function(te,Te){return pt(ve(Ce(te))+" "+ve(nt(Te))+" l"),this},m=C.curveTo=function(te,Te,gt,qt,ur,Xr){return pt([ve(Ce(te)),ve(nt(Te)),ve(Ce(gt)),ve(nt(qt)),ve(Ce(ur)),ve(nt(Xr)),"c"].join(" ")),this};C.__private__.line=C.line=function(te,Te,gt,qt,ur){if(isNaN(te)||isNaN(Te)||isNaN(gt)||isNaN(qt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.line");return ee===Z.COMPAT?this.lines([[gt-te,qt-Te]],te,Te,[1,1],ur||"S"):this.lines([[gt-te,qt-Te]],te,Te,[1,1]).stroke()},C.__private__.lines=C.lines=function(te,Te,gt,qt,ur,Xr){var gn,Kn,xi,Oi,Ji,fo,Vo,Qo,ea,Da,aa,$i;if(typeof te=="number"&&($i=gt,gt=Te,Te=te,te=$i),qt=qt||[1,1],Xr=Xr||!1,isNaN(Te)||isNaN(gt)||!Array.isArray(te)||!Array.isArray(qt)||!Mt(ur)||typeof Xr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ln(Te,gt),gn=qt[0],Kn=qt[1],Oi=te.length,Da=Te,aa=gt,xi=0;xi<Oi;xi++)(Ji=te[xi]).length===2?(Da=Ji[0]*gn+Da,aa=Ji[1]*Kn+aa,tt(Da,aa)):(fo=Ji[0]*gn+Da,Vo=Ji[1]*Kn+aa,Qo=Ji[2]*gn+Da,ea=Ji[3]*Kn+aa,Da=Ji[4]*gn+Da,aa=Ji[5]*Kn+aa,m(fo,Vo,Qo,ea,Da,aa));return Xr&&wr(),vr(ur),this},C.path=function(te){for(var Te=0;Te<te.length;Te++){var gt=te[Te],qt=gt.c;switch(gt.op){case"m":Ln(qt[0],qt[1]);break;case"l":tt(qt[0],qt[1]);break;case"c":m.apply(this,qt);break;case"h":wr()}}return this},C.__private__.rect=C.rect=function(te,Te,gt,qt,ur){if(isNaN(te)||isNaN(Te)||isNaN(gt)||isNaN(qt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.rect");return ee===Z.COMPAT&&(qt=-qt),pt([ve(Ce(te)),ve(nt(Te)),ve(Ce(gt)),ve(Ce(qt)),"re"].join(" ")),vr(ur),this},C.__private__.triangle=C.triangle=function(te,Te,gt,qt,ur,Xr,gn){if(isNaN(te)||isNaN(Te)||isNaN(gt)||isNaN(qt)||isNaN(ur)||isNaN(Xr)||!Mt(gn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[gt-te,qt-Te],[ur-gt,Xr-qt],[te-ur,Te-Xr]],te,Te,[1,1],gn,!0),this},C.__private__.roundedRect=C.roundedRect=function(te,Te,gt,qt,ur,Xr,gn){if(isNaN(te)||isNaN(Te)||isNaN(gt)||isNaN(qt)||isNaN(ur)||isNaN(Xr)||!Mt(gn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Kn=4/3*(Math.SQRT2-1);return ur=Math.min(ur,.5*gt),Xr=Math.min(Xr,.5*qt),this.lines([[gt-2*ur,0],[ur*Kn,0,ur,Xr-Xr*Kn,ur,Xr],[0,qt-2*Xr],[0,Xr*Kn,-ur*Kn,Xr,-ur,Xr],[2*ur-gt,0],[-ur*Kn,0,-ur,-Xr*Kn,-ur,-Xr],[0,2*Xr-qt],[0,-Xr*Kn,ur*Kn,-Xr,ur,-Xr]],te+ur,Te,[1,1],gn,!0),this},C.__private__.ellipse=C.ellipse=function(te,Te,gt,qt,ur){if(isNaN(te)||isNaN(Te)||isNaN(gt)||isNaN(qt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xr=4/3*(Math.SQRT2-1)*gt,gn=4/3*(Math.SQRT2-1)*qt;return Ln(te+gt,Te),m(te+gt,Te-gn,te+Xr,Te-qt,te,Te-qt),m(te-Xr,Te-qt,te-gt,Te-gn,te-gt,Te),m(te-gt,Te+gn,te-Xr,Te+qt,te,Te+qt),m(te+Xr,Te+qt,te+gt,Te+gn,te+gt,Te),vr(ur),this},C.__private__.circle=C.circle=function(te,Te,gt,qt){if(isNaN(te)||isNaN(Te)||isNaN(gt)||!Mt(qt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,Te,gt,gt,qt)},C.setFont=function(te,Te,gt){return gt&&(Te=ce(Te,gt)),wi=us(te,Te,{disableWarning:!1}),this};var Pr=C.__private__.getFont=C.getFont=function(){return Yr[us.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var te,Te,gt={};for(te in un)if(un.hasOwnProperty(te))for(Te in gt[te]=[],un[te])un[te].hasOwnProperty(Te)&&gt[te].push(Te);return gt},C.addFont=function(te,Te,gt,qt,ur){var Xr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xr.indexOf(arguments[3])!==-1?ur=arguments[3]:arguments[3]&&Xr.indexOf(arguments[3])==-1&&(gt=ce(gt,qt)),ur=ur||"Identity-H",vs.call(this,te,Te,gt,ur)};var h,T=e.lineWidth||.200025,kn=C.__private__.getLineWidth=C.getLineWidth=function(){return T},ii=C.__private__.setLineWidth=C.setLineWidth=function(te){return T=te,pt(ve(Ce(te))+" w"),this};C.__private__.setLineDash=to.API.setLineDash=to.API.setLineDashPattern=function(te,Te){if(te=te||[],Te=Te||0,isNaN(Te)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(gt){return ve(Ce(gt))}).join(" "),Te=ve(Ce(Te)),pt("["+te+"] "+Te+" d"),this};var Lo=C.__private__.getLineHeight=C.getLineHeight=function(){return Ur*h};C.__private__.getLineHeight=C.getLineHeight=function(){return Ur*h};var K=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(h=te),this},Ri=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return h};K(e.lineHeight);var xs=C.__private__.getHorizontalCoordinate=function(te){return Ce(te)},Ws=C.__private__.getVerticalCoordinate=function(te){return ee===Z.ADVANCED?te:li[Re].mediaBox.topRightY-li[Re].mediaBox.bottomLeftY-Ce(te)},Mc=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(te){return ve(xs(te))},Al=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(te){return ve(Ws(te))},Xa=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return Rt(Xa)},C.__private__.setStrokeColor=C.setDrawColor=function(te,Te,gt,qt){return Xa=Fe({ch1:te,ch2:Te,ch3:gt,ch4:qt,pdfColorType:"draw",precision:2}),pt(Xa),this};var hc=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return Rt(hc)},C.__private__.setFillColor=C.setFillColor=function(te,Te,gt,qt){return hc=Fe({ch1:te,ch2:Te,ch3:gt,ch4:qt,pdfColorType:"fill",precision:2}),pt(hc),this};var vu=e.textColor||"0 g",Dc=C.__private__.getTextColor=C.getTextColor=function(){return Rt(vu)};C.__private__.setTextColor=C.setTextColor=function(te,Te,gt,qt){return vu=Fe({ch1:te,ch2:Te,ch3:gt,ch4:qt,pdfColorType:"text",precision:3}),this};var _u=e.charSpace,Qc=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(_u||0)};C.__private__.setCharSpace=C.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _u=te,this};var Hu=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(te){var Te=C.CapJoinStyles[te];if(Te===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hu=Te,pt(Te+" J"),this};var bu=0;C.__private__.setLineJoin=C.setLineJoin=function(te){var Te=C.CapJoinStyles[te];if(Te===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bu=Te,pt(Te+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pt(ve(Ce(te))+" M"),this},C.GState=D1,C.setGState=function(te){(te=typeof te=="string"?ci[Ro[te]]:wu(null,te)).equals(gi)||(pt("/"+te.id+" gs"),gi=te)};var wu=function(te,Te){if(!te||!Ro[te]){var gt=!1;for(var qt in ci)if(ci.hasOwnProperty(qt)&&ci[qt].equals(Te)){gt=!0;break}if(gt)Te=ci[qt];else{var ur="GS"+(Object.keys(ci).length+1).toString(10);ci[ur]=Te,Te.id=ur}return te&&(Ro[te]=Te.id),no.publish("addGState",Te),Te}};C.addGState=function(te,Te){return wu(te,Te),this},C.saveGraphicsState=function(){return pt("q"),Or.push({key:wi,size:Ur,color:vu}),this},C.restoreGraphicsState=function(){pt("Q");var te=Or.pop();return wi=te.key,Ur=te.size,vu=te.color,gi=null,this},C.setCurrentTransformationMatrix=function(te){return pt(te.toString()+" cm"),this},C.comment=function(te){return pt("#"+te),this};var Zl=function(te,Te){var gt=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return gt},set:function(Xr){isNaN(Xr)||(gt=parseFloat(Xr))}});var qt=Te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qt},set:function(Xr){isNaN(Xr)||(qt=parseFloat(Xr))}});var ur="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ur},set:function(Xr){ur=Xr.toString()}}),this},xu=function(te,Te,gt,qt){Zl.call(this,te,Te),this.type="rect";var ur=gt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ur},set:function(gn){isNaN(gn)||(ur=parseFloat(gn))}});var Xr=qt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xr},set:function(gn){isNaN(gn)||(Xr=parseFloat(gn))}}),this},qn=function(){this.page=co,this.currentPage=Re,this.pages=Gt.slice(0),this.pagesContext=li.slice(0),this.x=si,this.y=fr,this.matrix=or,this.width=ks(Re),this.height=As(Re),this.outputDestination=Mr,this.id="",this.objectNumber=-1};qn.prototype.restore=function(){co=this.page,Re=this.currentPage,li=this.pagesContext,Gt=this.pages,si=this.x,fr=this.y,or=this.matrix,Xl(Re,this.width),To(Re,this.height),Mr=this.outputDestination};var jn=function(te,Te,gt,qt,ur){Yo.push(new qn),co=Re=0,Gt=[],si=te,fr=Te,or=ur,wl([gt,qt])},Wu=function(te){if(Li[te])Yo.pop().restore();else{var Te=new qn,gt="Xo"+(Object.keys(pi).length+1).toString(10);Te.id=gt,Li[te]=gt,pi[gt]=Te,no.publish("addFormObject",Te),Yo.pop().restore()}};for(var zs in C.beginFormObject=function(te,Te,gt,qt,ur){return jn(te,Te,gt,qt,ur),this},C.endFormObject=function(te){return Wu(te),this},C.doFormObject=function(te,Te){var gt=pi[Li[te]];return pt("q"),pt(Te.toString()+" cm"),pt("/"+gt.id+" Do"),pt("Q"),this},C.getFormObject=function(te){var Te=pi[Li[te]];return{x:Te.x,y:Te.y,width:Te.width,height:Te.height,matrix:Te.matrix}},C.save=function(te,Te){return te=te||"generated.pdf",(Te=Te||{}).returnPromise=Te.returnPromise||!1,Te.returnPromise===!1?(Kf(ws(bs()),te),typeof Kf.unload=="function"&&ro.setTimeout&&setTimeout(Kf.unload,911),this):new Promise(function(gt,qt){try{var ur=Kf(ws(bs()),te);typeof Kf.unload=="function"&&ro.setTimeout&&setTimeout(Kf.unload,911),gt(ur)}catch(Xr){qt(Xr.message)}})},to.API)to.API.hasOwnProperty(zs)&&(zs==="events"&&to.API.events.length?function(te,Te){var gt,qt,ur;for(ur=Te.length-1;ur!==-1;ur--)gt=Te[ur][0],qt=Te[ur][1],te.subscribe.apply(te,[gt].concat(typeof qt=="function"?[qt]:qt))}(no,to.API.events):C[zs]=to.API[zs]);var ks=C.getPageWidth=function(te){return(li[te=te||Re].mediaBox.topRightX-li[te].mediaBox.bottomLeftX)/xn},Xl=C.setPageWidth=function(te,Te){li[te].mediaBox.topRightX=Te*xn+li[te].mediaBox.bottomLeftX},As=C.getPageHeight=function(te){return(li[te=te||Re].mediaBox.topRightY-li[te].mediaBox.bottomLeftY)/xn},To=C.setPageHeight=function(te,Te){li[te].mediaBox.topRightY=Te*xn+li[te].mediaBox.bottomLeftY};return C.internal={pdfEscape:$a,getStyle:Tt,getFont:Pr,getFontSize:tn,getCharSpace:Qc,getTextColor:Dc,getLineHeight:Lo,getLineHeightFactor:Ri,getLineWidth:kn,write:Dr,getHorizontalCoordinate:xs,getVerticalCoordinate:Ws,getCoordinateString:Mc,getVerticalCoordinateString:Al,collections:{},newObject:ra,newAdditionalObject:De,newObjectDeferred:we,newObjectDeferredBegin:_e,getFilters:Ht,putStream:Nt,events:no,scaleFactor:xn,pageSize:{getWidth:function(){return ks(Re)},setWidth:function(te){Xl(Re,te)},getHeight:function(){return As(Re)},setHeight:function(te){To(Re,te)}},encryptionOptions:w,encryption:R,getEncryptor:W,output:Oo,getNumberOfPages:nl,pages:Gt,out:pt,f2:Ve,f3:be,getPageInfo:ae,getPageInfoByObjId:Ae,getCurrentPageInfo:Ye,getPDFVersion:B,Point:Zl,Rectangle:xu,Matrix:vn,hasHotfix:il},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return ks(Re)},set:function(te){Xl(Re,te)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return As(Re)},set:function(te){To(Re,te)},enumerable:!0,configurable:!0}),Hl.call(C,Wt),wi="F1",Wl(o,r),no.publish("initialized"),C}Dh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Dh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Dh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Dh.prototype.processOwnerPassword=function(e,t){return Rg(Ng(t).substr(0,5),e)},Dh.prototype.encryptor=function(e,t){var r=Ng(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Rg(r,n)}},D1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||_a(e)!==_a(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},to.API={events:[]},to.version="2.5.1";var ms=to.API,Fy=1,mh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ah=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mo=function(e){return e.toFixed(2)},kf=function(e){return e.toFixed(5)};ms.__acroform__={};var uc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Q_=function(e){return e*Fy},M0=function(e){var t=new l6,r=ki.internal.getHeight(e)||0,n=ki.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mo(n)),Number(mo(r))],t},Y7=ms.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},J7=ms.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},K7=ms.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ts=ms.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return K7(e,t-1)},Ps=ms.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y7(e,t-1)},Ms=ms.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J7(e,t-1)},Q7=ms.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,o=e[0],u=e[1],c=e[2],s=e[3],f={};return f.lowerLeft_X=r(o)||0,f.lowerLeft_Y=n(u+s)||0,f.upperRight_X=r(o+c)||0,f.upperRight_Y=n(u)||0,[Number(mo(f.lowerLeft_X)),Number(mo(f.lowerLeft_Y)),Number(mo(f.upperRight_X)),Number(mo(f.upperRight_Y))]},e9=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Og(e,r),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+mo(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=M0(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},Og=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(be){return be.split(`
`)}):o.map(function(be){return[be]});var u=r,c=ki.internal.getHeight(e)||0;c=c<0?-c:c;var s=ki.internal.getWidth(e)||0;s=s<0?-s:s;var f=function(be,Ce,Oe){if(be+1<o.length){var nt=Ce+" "+o[be+1][0];return r1(nt,e,Oe).width<=s-4}return!1};u++;e:for(;u>0;){t="",u--;var v,w,E=r1("3",e,u).height,L=e.multiline?c-u:(c-E)/2,C=L+=2,F=0,B=0,G=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+r1(t,e,u=12).width+", FieldWidth:"+s+`
`;break}for(var H="",Z=0,ee=0;ee<o.length;ee++)if(o.hasOwnProperty(ee)){var Y=!1;if(o[ee].length!==1&&G!==o[ee].length-1){if((E+2)*(Z+2)+2>c)continue e;H+=o[ee][G],Y=!0,B=ee,ee--}else{H=(H+=o[ee][G]+" ").substr(H.length-1)==" "?H.substr(0,H.length-1):H;var le=parseInt(ee),ce=f(le,H,u),ve=ee>=o.length-1;if(ce&&!ve){H+=" ",G=0;continue}if(ce||ve){if(ve)B=le;else if(e.multiline&&(E+2)*(Z+2)+2>c)continue e}else{if(!e.multiline||(E+2)*(Z+2)+2>c)continue e;B=le}}for(var pe="",Ne=F;Ne<=B;Ne++){var Ve=o[Ne];if(e.multiline){if(Ne===B){pe+=Ve[G]+" ",G=(G+1)%Ve.length;continue}if(Ne===F){pe+=Ve[Ve.length-1]+" ";continue}}pe+=Ve[0]+" "}switch(pe=pe.substr(pe.length-1)==" "?pe.substr(0,pe.length-1):pe,w=r1(pe,e,u).width,e.textAlign){case"right":v=s-w-2;break;case"center":v=(s-w)/2;break;case"left":default:v=2}t+=mo(v)+" "+mo(C)+` Td
`,t+="("+mh(pe)+`) Tj
`,t+=-mo(v)+` 0 Td
`,C=-(u+2),w=0,F=Y?B:B+1,Z++,H=""}break}return n.text=t,n.fontSize=u,n},r1=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},t9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},r9=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},n9=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,o=e[r];t.internal.newObjectDeferredBegin(o.objId,!0),_a(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[n]}},i9=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(_0.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(t9)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Fy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new u6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u.objId=void 0,u.hasAnnotation&&r9(u,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,o){var u=!n;for(var c in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var s=n[c],f=[],v=s.Rect;if(s.Rect&&(s.Rect=Q7(s.Rect,o)),o.internal.newObjectDeferredBegin(s.objId,!0),s.DA=ki.createDefaultAppearanceStream(s),_a(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(f=s.getKeyValueListForStream()),s.Rect=v,s.hasAppearanceStream&&!s.appearanceStreamContent){var w=e9(s);f.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(s.appearanceStreamContent){var E="";for(var L in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(L)){var C=s.appearanceStreamContent[L];if(E+="/"+L+" ",E+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var F=C[c];typeof F=="function"&&(F=F.call(o,s)),E+="/"+c+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=C)=="function"&&(F=F.call(o,s)),E+="/"+c+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);E+=">>"}f.push({key:"AP",value:`<<
`+E+">>"})}o.internal.putStream({additionalKeyValues:f,objectId:s.objId}),o.internal.out("endobj")}u&&n9(o.internal.acroformPlugin.xForms,o)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},s6=ms.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(c){return c};if(Array.isArray(e)){for(var o="[",u=0;u<e.length;u++)switch(u!==0&&(o+=" "),_a(e[u])){case"boolean":case"number":case"object":o+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),o+="("+mh(n(e[u].toString()))+")"):o+=e[u].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lm=function(e,t,r){var n=function(o){return o};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+mh(n(e))+")"},O0=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};O0.prototype.toString=function(){return this.objId+" 0 R"},O0.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},O0.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],o=this[n];o&&(Array.isArray(o)?e.push({key:n,value:s6(o,this.objId,this.scope)}):o instanceof O0?(o.scope=this.scope,e.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:n,value:o}))}return e};var l6=function(){O0.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};uc(l6,O0);var u6=function(){O0.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+mh(r(e))+")"}},set:function(r){e=r}})};uc(u6,O0);var _0=function e(){O0.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute F supplied.');t=H}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ts(t,3)},set:function(H){H?this.F=Ps(t,3):this.F=Ms(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute Ff supplied.');r=H}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(H){n=H!==void 0?H:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(H){n[0]=H}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(H){n[1]=H}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(H){n[2]=H}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(H){n[3]=H}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(H){switch(H){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=H;break;default:throw new Error('Invalid value "'+H+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof z1)return;u="FieldObject"+e.FieldNum++}var H=function(Z){return Z};return this.scope&&(H=this.scope.internal.getEncryptor(this.objId)),"("+mh(H(u))+")"},set:function(H){u=H.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(H){u=H}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(H){c=H}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(H){s=H}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(H){f=H}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/Fy:v},set:function(H){v=H}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(H){w=H}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof z1||this instanceof oh))return lm(E,this.objId,this.scope)},set:function(H){H=H.toString(),E=H}});var L=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(L)return this instanceof ml?L:lm(L,this.objId,this.scope)},set:function(H){H=H.toString(),L=this instanceof ml?H:H.substr(0,1)==="("?Ah(H.substr(1,H.length-2)):Ah(H)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ml?Ah(L.substr(1,L.length-1)):L},set:function(H){H=H.toString(),L=this instanceof ml?"/"+H:H}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(H){this.V=H}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof ml?C:lm(C,this.objId,this.scope)},set:function(H){H=H.toString(),C=this instanceof ml?H:H.substr(0,1)==="("?Ah(H.substr(1,H.length-2)):Ah(H)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ml?Ah(C.substr(1,C.length-1)):C},set:function(H){H=H.toString(),C=this instanceof ml?"/"+H:H}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,B=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return B},set:function(H){H=!!H,B=H}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(H){F=H}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,1)},set:function(H){H?this.Ff=Ps(this.Ff,1):this.Ff=Ms(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,2)},set:function(H){H?this.Ff=Ps(this.Ff,2):this.Ff=Ms(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,3)},set:function(H){H?this.Ff=Ps(this.Ff,3):this.Ff=Ms(this.Ff,3)}});var G=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(G!==null)return G},set:function(H){if([0,1,2].indexOf(H)===-1)throw new Error('Invalid value "'+H+'" for attribute Q supplied.');G=H}}),Object.defineProperty(this,"textAlign",{get:function(){var H;switch(G){case 0:default:H="left";break;case 1:H="center";break;case 2:H="right"}return H},configurable:!0,enumerable:!0,set:function(H){switch(H){case"right":case 2:G=2;break;case"center":case 1:G=1;break;case"left":case 0:default:G=0}}})};uc(_0,O0);var Hh=function(){_0.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return s6(t,this.objId,this.scope)},set:function(r){var n,o;o=[],typeof(n=r)=="string"&&(o=function(u,c,s){s||(s=1);for(var f,v=[];f=c.exec(u);)v.push(f[s]);return v}(n,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,18)},set:function(r){r?this.Ff=Ps(this.Ff,18):this.Ff=Ms(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ps(this.Ff,19):this.Ff=Ms(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,20)},set:function(r){r?(this.Ff=Ps(this.Ff,20),t.sort()):this.Ff=Ms(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,22)},set:function(r){r?this.Ff=Ps(this.Ff,22):this.Ff=Ms(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,23)},set:function(r){r?this.Ff=Ps(this.Ff,23):this.Ff=Ms(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,27)},set:function(r){r?this.Ff=Ps(this.Ff,27):this.Ff=Ms(this.Ff,27)}}),this.hasAppearanceStream=!1};uc(Hh,_0);var Wh=function(){Hh.call(this),this.fontName="helvetica",this.combo=!1};uc(Wh,Hh);var Zh=function(){Wh.call(this),this.combo=!0};uc(Zh,Wh);var x1=function(){Zh.call(this),this.edit=!0};uc(x1,Zh);var ml=function(){_0.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,15)},set:function(r){r?this.Ff=Ps(this.Ff,15):this.Ff=Ms(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,16)},set:function(r){r?this.Ff=Ps(this.Ff,16):this.Ff=Ms(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,17)},set:function(r){r?this.Ff=Ps(this.Ff,17):this.Ff=Ms(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,26)},set:function(r){r?this.Ff=Ps(this.Ff,26):this.Ff=Ms(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,o=[];for(n in o.push("<<"),t)o.push("/"+n+" ("+mh(r(t[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){_a(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};uc(ml,_0);var k1=function(){ml.call(this),this.pushButton=!0};uc(k1,ml);var Xh=function(){ml.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};uc(Xh,ml);var z1=function(){var e,t;_0.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(s){return s};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var u,c=[];for(u in c.push("<<"),n)c.push("/"+u+" ("+mh(o(n[u]))+")");return c.push(">>"),c.join(`
`)},set:function(o){_a(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ki.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};uc(z1,_0),Xh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Xh.prototype.createOption=function(e){var t=new z1;return t.Parent=this,t.optionName=e,this.Kids.push(t),o9.call(this.scope,t),t};var A1=function(){ml.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ki.CheckBox.createAppearanceStream()};uc(A1,ml);var oh=function(){_0.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,13)},set:function(t){t?this.Ff=Ps(this.Ff,13):this.Ff=Ms(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,21)},set:function(t){t?this.Ff=Ps(this.Ff,21):this.Ff=Ms(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,23)},set:function(t){t?this.Ff=Ps(this.Ff,23):this.Ff=Ms(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,24)},set:function(t){t?this.Ff=Ps(this.Ff,24):this.Ff=Ms(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,25)},set:function(t){t?this.Ff=Ps(this.Ff,25):this.Ff=Ms(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,26)},set:function(t){t?this.Ff=Ps(this.Ff,26):this.Ff=Ms(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};uc(oh,_0);var E1=function(){oh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ts(this.Ff,14)},set:function(e){e?this.Ff=Ps(this.Ff,14):this.Ff=Ms(this.Ff,14)}}),this.password=!0};uc(E1,oh);var ki={CheckBox:{createAppearanceStream:function(){return{N:{On:ki.CheckBox.YesNormal},D:{On:ki.CheckBox.YesPushDown,Off:ki.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),u=Og(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mo(u.fontSize)+" Tf "+o),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=M0(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),o=[],u=ki.internal.getHeight(e),c=ki.internal.getWidth(e),s=Og(e,e.caption);return o.push("1 g"),o.push("0 0 "+mo(c)+" "+mo(u)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+mo(c-1)+" "+mo(u-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+mo(s.fontSize)+" Tf "+n),o.push(s.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ki.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ki.RadioButton.Circle.YesNormal,t.D[e]=ki.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=M0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=ki.internal.Bezier_C,u=Number((n*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+kf(ki.internal.getWidth(e)/2)+" "+kf(ki.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*ki.internal.Bezier_C).toFixed(5)),c=Number((n*ki.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kf(ki.internal.getWidth(e)/2)+" "+kf(ki.internal.getHeight(e)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+kf(ki.internal.getWidth(e)/2)+" "+kf(ki.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*ki.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kf(ki.internal.getWidth(e)/2)+" "+kf(ki.internal.getHeight(e)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ki.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ki.RadioButton.Cross.YesNormal,t.D[e]=ki.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=M0(e);t.scope=e.scope;var r=[],n=ki.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+mo(ki.internal.getWidth(e)-2)+" "+mo(ki.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mo(n.x1.x)+" "+mo(n.x1.y)+" m"),r.push(mo(n.x2.x)+" "+mo(n.x2.y)+" l"),r.push(mo(n.x4.x)+" "+mo(n.x4.y)+" m"),r.push(mo(n.x3.x)+" "+mo(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=ki.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mo(ki.internal.getWidth(e)-2)+" "+mo(ki.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(mo(r.x1.x)+" "+mo(r.x1.y)+" m"),n.push(mo(r.x2.x)+" "+mo(r.x2.y)+" l"),n.push(mo(r.x4.x)+" "+mo(r.x4.y)+" m"),n.push(mo(r.x3.x)+" "+mo(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=M0(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ki.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ki.internal.getWidth(e),r=ki.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ki.internal.getWidth=function(e){var t=0;return _a(e)==="object"&&(t=Q_(e.Rect[2])),t},ki.internal.getHeight=function(e){var t=0;return _a(e)==="object"&&(t=Q_(e.Rect[3])),t};var o9=ms.addField=function(e){if(i9(this,e),!(e instanceof _0))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ms.AcroFormChoiceField=Hh,ms.AcroFormListBox=Wh,ms.AcroFormComboBox=Zh,ms.AcroFormEditBox=x1,ms.AcroFormButton=ml,ms.AcroFormPushButton=k1,ms.AcroFormRadioButton=Xh,ms.AcroFormCheckBox=A1,ms.AcroFormTextField=oh,ms.AcroFormPasswordField=E1,ms.AcroFormAppearance=ki,ms.AcroForm={ChoiceField:Hh,ListBox:Wh,ComboBox:Zh,EditBox:x1,Button:ml,PushButton:k1,RadioButton:Xh,CheckBox:A1,TextField:oh,PasswordField:E1,Appearance:ki},to.AcroForm={ChoiceField:Hh,ListBox:Wh,ComboBox:Zh,EditBox:x1,Button:ml,PushButton:k1,RadioButton:Xh,CheckBox:A1,TextField:oh,PasswordField:E1,Appearance:ki};function c6(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(be,Ce){var Oe,nt,mt,ht,He,ut=t;if((Ce=Ce||t)==="RGBA"||be.data!==void 0&&be.data instanceof Uint8ClampedArray&&"height"in be&&"width"in be)return"RGBA";if(ce(be))for(He in r)for(mt=r[He],Oe=0;Oe<mt.length;Oe+=1){for(ht=!0,nt=0;nt<mt[Oe].length;nt+=1)if(mt[Oe][nt]!==void 0&&mt[Oe][nt]!==be[nt]){ht=!1;break}if(ht===!0){ut=He;break}}else for(He in r)for(mt=r[He],Oe=0;Oe<mt.length;Oe+=1){for(ht=!0,nt=0;nt<mt[Oe].length;nt+=1)if(mt[Oe][nt]!==void 0&&mt[Oe][nt]!==be.charCodeAt(nt)){ht=!1;break}if(ht===!0){ut=He;break}}return ut===t&&Ce!==t&&(ut=Ce),ut},o=function be(Ce){for(var Oe=this.internal.write,nt=this.internal.putStream,mt=(0,this.internal.getFilters)();mt.indexOf("FlateEncode")!==-1;)mt.splice(mt.indexOf("FlateEncode"),1);Ce.objectId=this.internal.newObject();var ht=[];if(ht.push({key:"Type",value:"/XObject"}),ht.push({key:"Subtype",value:"/Image"}),ht.push({key:"Width",value:Ce.width}),ht.push({key:"Height",value:Ce.height}),Ce.colorSpace===G.INDEXED?ht.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ce.palette.length/3-1)+" "+("sMask"in Ce&&Ce.sMask!==void 0?Ce.objectId+2:Ce.objectId+1)+" 0 R]"}):(ht.push({key:"ColorSpace",value:"/"+Ce.colorSpace}),Ce.colorSpace===G.DEVICE_CMYK&&ht.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ht.push({key:"BitsPerComponent",value:Ce.bitsPerComponent}),"decodeParameters"in Ce&&Ce.decodeParameters!==void 0&&ht.push({key:"DecodeParms",value:"<<"+Ce.decodeParameters+">>"}),"transparency"in Ce&&Array.isArray(Ce.transparency)){for(var He="",ut=0,bt=Ce.transparency.length;ut<bt;ut++)He+=Ce.transparency[ut]+" "+Ce.transparency[ut]+" ";ht.push({key:"Mask",value:"["+He+"]"})}Ce.sMask!==void 0&&ht.push({key:"SMask",value:Ce.objectId+1+" 0 R"});var Xe=Ce.filter!==void 0?["/"+Ce.filter]:void 0;if(nt({data:Ce.data,additionalKeyValues:ht,alreadyAppliedFilters:Xe,objectId:Ce.objectId}),Oe("endobj"),"sMask"in Ce&&Ce.sMask!==void 0){var We="/Predictor "+Ce.predictor+" /Colors 1 /BitsPerComponent "+Ce.bitsPerComponent+" /Columns "+Ce.width,ke={width:Ce.width,height:Ce.height,colorSpace:"DeviceGray",bitsPerComponent:Ce.bitsPerComponent,decodeParameters:We,data:Ce.sMask};"filter"in Ce&&(ke.filter=Ce.filter),be.call(this,ke)}if(Ce.colorSpace===G.INDEXED){var Re=this.internal.newObject();nt({data:pe(new Uint8Array(Ce.palette)),objectId:Re}),Oe("endobj")}},u=function(){var be=this.internal.collections.addImage_images;for(var Ce in be)o.call(this,be[Ce])},c=function(){var be,Ce=this.internal.collections.addImage_images,Oe=this.internal.write;for(var nt in Ce)Oe("/I"+(be=Ce[nt]).index,be.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var be=this.internal.collections.addImage_images;return s.call(this),be},v=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(be){return typeof e["process"+be.toUpperCase()]=="function"},E=function(be){return _a(be)==="object"&&be.nodeType===1},L=function(be,Ce){if(be.nodeName==="IMG"&&be.hasAttribute("src")){var Oe=""+be.getAttribute("src");if(Oe.indexOf("data:image/")===0)return Gp(unescape(Oe).split("base64,").pop());var nt=e.loadFile(Oe,!0);if(nt!==void 0)return nt}if(be.nodeName==="CANVAS"){if(be.width===0||be.height===0)throw new Error("Given canvas must have data. Canvas width: "+be.width+", height: "+be.height);var mt;switch(Ce){case"PNG":mt="image/png";break;case"WEBP":mt="image/webp";break;case"JPEG":case"JPG":default:mt="image/jpeg"}return Gp(be.toDataURL(mt,1).split("base64,").pop())}},C=function(be){var Ce=this.internal.collections.addImage_images;if(Ce){for(var Oe in Ce)if(be===Ce[Oe].alias)return Ce[Oe]}},F=function(be,Ce,Oe){return be||Ce||(be=-96,Ce=-96),be<0&&(be=-1*Oe.width*72/be/this.internal.scaleFactor),Ce<0&&(Ce=-1*Oe.height*72/Ce/this.internal.scaleFactor),be===0&&(be=Ce*Oe.width/Oe.height),Ce===0&&(Ce=be*Oe.height/Oe.width),[be,Ce]},B=function(be,Ce,Oe,nt,mt,ht){var He=F.call(this,Oe,nt,mt),ut=this.internal.getCoordinateString,bt=this.internal.getVerticalCoordinateString,Xe=f.call(this);if(Oe=He[0],nt=He[1],Xe[mt.index]=mt,ht){ht*=Math.PI/180;var We=Math.cos(ht),ke=Math.sin(ht),Re=function(dt){return dt.toFixed(4)},Pe=[Re(We),Re(ke),Re(-1*ke),Re(We),0,0,"cm"]}this.internal.write("q"),ht?(this.internal.write([1,"0","0",1,ut(be),bt(Ce+nt),"cm"].join(" ")),this.internal.write(Pe.join(" ")),this.internal.write([ut(Oe),"0","0",ut(nt),"0","0","cm"].join(" "))):this.internal.write([ut(Oe),"0","0",ut(nt),ut(be),bt(Ce+nt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+mt.index+" Do"),this.internal.write("Q")},G=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var H=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Z=e.__addimage__.sHashCode=function(be){var Ce,Oe,nt=0;if(typeof be=="string")for(Oe=be.length,Ce=0;Ce<Oe;Ce++)nt=(nt<<5)-nt+be.charCodeAt(Ce),nt|=0;else if(ce(be))for(Oe=be.byteLength/2,Ce=0;Ce<Oe;Ce++)nt=(nt<<5)-nt+be[Ce],nt|=0;return nt},ee=e.__addimage__.validateStringAsBase64=function(be){(be=be||"").toString().trim();var Ce=!0;return be.length===0&&(Ce=!1),be.length%4!=0&&(Ce=!1),/^[A-Za-z0-9+/]+$/.test(be.substr(0,be.length-2))===!1&&(Ce=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(be.substr(-2))===!1&&(Ce=!1),Ce},Y=e.__addimage__.extractImageFromDataUrl=function(be){var Ce=(be=be||"").split("base64,"),Oe=null;if(Ce.length===2){var nt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ce[0]);Array.isArray(nt)&&(Oe={mimeType:nt[1],charset:nt[2],data:Ce[1]})}return Oe},le=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(be){return le()&&be instanceof ArrayBuffer};var ce=e.__addimage__.isArrayBufferView=function(be){return le()&&typeof Uint32Array<"u"&&(be instanceof Int8Array||be instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&be instanceof Uint8ClampedArray||be instanceof Int16Array||be instanceof Uint16Array||be instanceof Int32Array||be instanceof Uint32Array||be instanceof Float32Array||be instanceof Float64Array)},ve=e.__addimage__.binaryStringToUint8Array=function(be){for(var Ce=be.length,Oe=new Uint8Array(Ce),nt=0;nt<Ce;nt++)Oe[nt]=be.charCodeAt(nt);return Oe},pe=e.__addimage__.arrayBufferToBinaryString=function(be){for(var Ce="",Oe=ce(be)?be:new Uint8Array(be),nt=0;nt<Oe.length;nt+=8192)Ce+=String.fromCharCode.apply(null,Oe.subarray(nt,nt+8192));return Ce};e.addImage=function(){var be,Ce,Oe,nt,mt,ht,He,ut,bt;if(typeof arguments[1]=="number"?(Ce=t,Oe=arguments[1],nt=arguments[2],mt=arguments[3],ht=arguments[4],He=arguments[5],ut=arguments[6],bt=arguments[7]):(Ce=arguments[1],Oe=arguments[2],nt=arguments[3],mt=arguments[4],ht=arguments[5],He=arguments[6],ut=arguments[7],bt=arguments[8]),_a(be=arguments[0])==="object"&&!E(be)&&"imageData"in be){var Xe=be;be=Xe.imageData,Ce=Xe.format||Ce||t,Oe=Xe.x||Oe||0,nt=Xe.y||nt||0,mt=Xe.w||Xe.width||mt,ht=Xe.h||Xe.height||ht,He=Xe.alias||He,ut=Xe.compression||ut,bt=Xe.rotation||Xe.angle||bt}var We=this.internal.getFilters();if(ut===void 0&&We.indexOf("FlateEncode")!==-1&&(ut="SLOW"),isNaN(Oe)||isNaN(nt))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var ke=Ne.call(this,be,Ce,He,ut);return B.call(this,Oe,nt,mt,ht,ke,bt),this};var Ne=function(be,Ce,Oe,nt){var mt,ht,He;if(typeof be=="string"&&n(be)===t){be=unescape(be);var ut=Ve(be,!1);(ut!==""||(ut=e.loadFile(be,!0))!==void 0)&&(be=ut)}if(E(be)&&(be=L(be,Ce)),Ce=n(be,Ce),!w(Ce))throw new Error("addImage does not support files of type '"+Ce+"', please ensure that a plugin for '"+Ce+"' support is added.");if(((He=Oe)==null||He.length===0)&&(Oe=function(bt){return typeof bt=="string"||ce(bt)?Z(bt):ce(bt.data)?Z(bt.data):null}(be)),(mt=C.call(this,Oe))||(le()&&(be instanceof Uint8Array||Ce==="RGBA"||(ht=be,be=ve(be))),mt=this["process"+Ce.toUpperCase()](be,v.call(this),Oe,function(bt){return bt&&typeof bt=="string"&&(bt=bt.toUpperCase()),bt in e.image_compression?bt:H.NONE}(nt),ht)),!mt)throw new Error("An unknown error occurred whilst processing the image.");return mt},Ve=e.__addimage__.convertBase64ToBinaryString=function(be,Ce){var Oe;Ce=typeof Ce!="boolean"||Ce;var nt,mt="";if(typeof be=="string"){nt=(Oe=Y(be))!==null?Oe.data:be;try{mt=Gp(nt)}catch(ht){if(Ce)throw ee(nt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ht.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return mt};e.getImageProperties=function(be){var Ce,Oe,nt="";if(E(be)&&(be=L(be)),typeof be=="string"&&n(be)===t&&((nt=Ve(be,!1))===""&&(nt=e.loadFile(be)||""),be=nt),Oe=n(be),!w(Oe))throw new Error("addImage does not support files of type '"+Oe+"', please ensure that a plugin for '"+Oe+"' support is added.");if(!le()||be instanceof Uint8Array||(be=ve(be)),!(Ce=this["process"+Oe.toUpperCase()](be)))throw new Error("An unknown error occurred whilst processing the image");return Ce.fileType=Oe,Ce}})(to.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};to.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,o,u,c=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,w=!1,E=0;E<v.length&&!w;E++)switch((n=v[E]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var L=0;L<v.length;L++){n=v[L];var C=this.internal.pdfEscape,F=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var B=this.internal.newAdditionalObject(),G=this.internal.newAdditionalObject(),H=this.internal.getEncryptor(B.objId),Z=n.title||"Note";u="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+C(H(n.contents))+")",u+=" /Popup "+G.objId+" 0 R",u+=" /P "+f.objId+" 0 R",u+=" /T ("+C(H(Z))+") >>",B.content=u;var ee=B.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+ee,n.open&&(u+=" /Open true"),u+=" >>",G.content=u,this.internal.write(B.objId,"0 R",G.objId,"0 R");break;case"freetext":o="/Rect ["+c(n.bounds.x)+" "+s(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var Y=n.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(F(n.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(n.options.name){var le=this.annotations._nameMap[n.options.name];n.options.pageNumber=le.page,n.options.top=le.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",u="",n.options.url)u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(F(n.options.url))+") >>";else if(n.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,u+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ce=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),u+=" /XYZ "+n.options.left+" "+ce+" "+n.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,o,u,c){var s=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:f(r),y:v(n),w:f(r+o),h:v(n+u)},options:c,type:"link"})},e.textWithLink=function(r,n,o,u){var c,s,f=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){s=u.maxWidth;var w=this.splitTextToSize(r,s).length;c=Math.ceil(v*w)}else s=f,c=v;return this.text(r,n,o,u),o+=.2*v,u.align==="center"&&(n-=f/2),u.align==="right"&&(n-=f),this.link(n,o-v,s,c,u),f},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(to.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(B){return t[B.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(B){return typeof B=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(B)},s=e.__arabicParser__.isArabicEndLetter=function(B){return c(B)&&u(B)&&t[B.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(B){return c(B)&&o.indexOf(B.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(B){return c(B)&&u(B)&&t[B.charCodeAt(0)].length>=1};var v=e.__arabicParser__.arabicLetterHasFinalForm=function(B){return c(B)&&u(B)&&t[B.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(B){return c(B)&&u(B)&&t[B.charCodeAt(0)].length>=3};var w=e.__arabicParser__.arabicLetterHasMedialForm=function(B){return c(B)&&u(B)&&t[B.charCodeAt(0)].length==4},E=e.__arabicParser__.resolveLigatures=function(B){var G=0,H=r,Z="",ee=0;for(G=0;G<B.length;G+=1)H[B.charCodeAt(G)]!==void 0?(ee++,typeof(H=H[B.charCodeAt(G)])=="number"&&(Z+=String.fromCharCode(H),H=r,ee=0),G===B.length-1&&(H=r,Z+=B.charAt(G-(ee-1)),G-=ee-1,ee=0)):(H=r,Z+=B.charAt(G-ee),G-=ee,ee=0);return Z};e.__arabicParser__.isArabicDiacritic=function(B){return B!==void 0&&n[B.charCodeAt(0)]!==void 0};var L=e.__arabicParser__.getCorrectForm=function(B,G,H){return c(B)?u(B)===!1?-1:!v(B)||!c(G)&&!c(H)||!c(H)&&s(G)||s(B)&&!c(G)||s(B)&&f(G)||s(B)&&s(G)?0:w(B)&&c(G)&&!s(G)&&c(H)&&v(H)?3:s(B)||!c(H)?1:2:-1},C=function(B){var G=0,H=0,Z=0,ee="",Y="",le="",ce=(B=B||"").split("\\s+"),ve=[];for(G=0;G<ce.length;G+=1){for(ve.push(""),H=0;H<ce[G].length;H+=1)ee=ce[G][H],Y=ce[G][H-1],le=ce[G][H+1],c(ee)?(Z=L(ee,Y,le),ve[G]+=Z!==-1?String.fromCharCode(t[ee.charCodeAt(0)][Z]):ee):ve[G]+=ee;ve[G]=E(ve[G])}return ve.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var B,G=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,H=[];if(Array.isArray(G)){var Z=0;for(H=[],Z=0;Z<G.length;Z+=1)Array.isArray(G[Z])?H.push([C(G[Z][0]),G[Z][1],G[Z][2]]):H.push([C(G[Z])]);B=H}else B=C(G);return typeof arguments[0]=="string"?B:(arguments[0].text=B,arguments[0])};e.events.push(["preProcessText",F])}(to.API),to.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(s){o=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(s){u=s}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(s){c=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var o;if((r=r||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(to.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(B){f=B}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(B){v=B}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(B){w=B}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(B){E=B}});var L=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return L},set:function(B){L=B}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(B){C=B}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(B){F=B}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,v){n.call(this);var w=(v=v||{}).fontSize||this.getFontSize(),E=v.font||this.getFont(),L=v.scaleFactor||this.internal.scaleFactor,C=0,F=0,B=0,G=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var H=v.maxWidth;H>0?typeof f=="string"?f=this.splitTextToSize(f,H):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(ee,Y){return ee.concat(G.splitTextToSize(Y,H))},[])):f=Array.isArray(f)?f:[f];for(var Z=0;Z<f.length;Z++)C<(B=this.getStringUnitWidth(f[Z],{font:E})*w)&&(C=B);return C!==0&&(F=f.length),{w:C/=L,h:Math.max((F*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/L,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var f;f=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var v=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,L=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===f.lineNumber?(f.x=(v.x||0)+(v.width||0),f.y=v.y||0):v.y+v.height+f.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=E.top,C&&L&&(this.printHeaderRow(f.lineNumber,!0),f.y+=L[0].height)):f.y=v.y+v.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,r===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-w,f.y+w,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+w,{align:"center",baseline:"top",maxWidth:f.width-w-w}):this.text(f.text,f.x+w,f.y+w,{align:"left",baseline:"top",maxWidth:f.width-w-w})),this.internal.__cell__.lastCell=f,this};e.table=function(f,v,w,E,L){if(n.call(this),!w)throw new Error("No data for PDF table.");var C,F,B,G,H=[],Z=[],ee=[],Y={},le={},ce=[],ve=[],pe=(L=L||{}).autoSize||!1,Ne=L.printHeaders!==!1,Ve=L.css&&L.css["font-size"]!==void 0?16*L.css["font-size"]:L.fontSize||12,be=L.margins||Object.assign({width:this.getPageWidth()},t),Ce=typeof L.padding=="number"?L.padding:3,Oe=L.headerBackgroundColor||"#c8c8c8",nt=L.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Ne,this.internal.__cell__.margins=be,this.internal.__cell__.table_font_size=Ve,this.internal.__cell__.padding=Ce,this.internal.__cell__.headerBackgroundColor=Oe,this.internal.__cell__.headerTextColor=nt,this.setFontSize(Ve),E==null)Z=H=Object.keys(w[0]),ee=H.map(function(){return"left"});else if(Array.isArray(E)&&_a(E[0])==="object")for(H=E.map(function(Xe){return Xe.name}),Z=E.map(function(Xe){return Xe.prompt||Xe.name||""}),ee=E.map(function(Xe){return Xe.align||"left"}),C=0;C<E.length;C+=1)le[E[C].name]=E[C].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(Z=H=E,ee=H.map(function(){return"left"}));if(pe||Array.isArray(E)&&typeof E[0]=="string")for(C=0;C<H.length;C+=1){for(Y[G=H[C]]=w.map(function(Xe){return Xe[G]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(Z[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=Y[G],this.setFont(void 0,"normal"),B=0;B<F.length;B+=1)ce.push(this.getTextDimensions(F[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[G]=Math.max.apply(null,ce)+Ce+Ce,ce=[]}if(Ne){var mt={};for(C=0;C<H.length;C+=1)mt[H[C]]={},mt[H[C]].text=Z[C],mt[H[C]].align=ee[C];var ht=s.call(this,mt,le);ve=H.map(function(Xe){return new u(f,v,le[Xe],ht,mt[Xe].text,void 0,mt[Xe].align)}),this.setTableHeaderRow(ve),this.printHeaderRow(1,!1)}var He=E.reduce(function(Xe,We){return Xe[We.name]=We.align,Xe},{});for(C=0;C<w.length;C+=1){"rowStart"in L&&L.rowStart instanceof Function&&L.rowStart({row:C,data:w[C]},this);var ut=s.call(this,w[C],le);for(B=0;B<H.length;B+=1){var bt=w[C][H[B]];"cellStart"in L&&L.cellStart instanceof Function&&L.cellStart({row:C,col:B,data:bt},this),c.call(this,new u(f,v,le[H[B]],ut,bt,C+2,He[H[B]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=v,this};var s=function(f,v){var w=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,L=this.internal.scaleFactor;return Object.keys(f).map(function(C){var F=f[C];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,v[C]-w-w)},this).map(function(C){return this.getLineHeightFactor()*C.length*E/L+w+w},this).reduce(function(C,F){return Math.max(C,F)},0)};e.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,v){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var L=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){w=this.internal.__cell__.tableHeaderRow[C].clone(),v&&(w.y=this.internal.__cell__.margins.top||0,L.push(w)),w.lineNumber=f;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,w),this.setTextColor(F)}L.length>0&&this.setTableHeaderRow(L),this.setFont(void 0,"normal"),r=!1}}(to.API);var f6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},h6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fg=c6(h6),p6=[100,200,300,400,500,600,700,800,900],a9=c6(p6);function Bg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return f6[u=u||"normal"]?u:"normal"}(e.style),n=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(u){return typeof Fg[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,r,n].join(" ")}}}function eb(e,t,r,n){var o;for(o=r;o>=0&&o<t.length;o+=n)if(e[t[o]])return e[t[o]];for(o=r;o>=0&&o<t.length;o-=n)if(e[t[o]])return e[t[o]]}var s9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function l9(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},s9,r.genericFontFamilies||{}),u=null,c=null,s=0;s<t.length;++s)if(o[(u=Bg(t[s])).family]&&(u.family=o[u.family]),e.hasOwnProperty(u.family)){c=e[u.family];break}if(!(c=c||e[n]))throw new Error("Could not find a font-family for the rule '"+rb(u)+"' and default family '"+n+"'.");if(c=function(f,v){if(v[f])return v[f];var w=Fg[f],E=w<=Fg.normal?-1:1,L=eb(v,h6,w,E);if(!L)throw new Error("Could not find a matching font-stretch value for "+f);return L}(u.stretch,c),c=function(f,v){if(v[f])return v[f];for(var w=f6[f],E=0;E<w.length;++E)if(v[w[E]])return v[w[E]];throw new Error("Could not find a matching font-style for "+f)}(u.style,c),!(c=function(f,v){if(v[f])return v[f];if(f===400&&v[500])return v[500];if(f===500&&v[400])return v[400];var w=a9[f],E=eb(v,p6,w,f<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+f);return E}(u.weight,c)))throw new Error("Failed to resolve a font for the rule '"+rb(u)+"'.");return c}function nb(e){return e.trimLeft()}function u9(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function c9(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var n1,ib,ob,um=["times"];(function(e){var t,r,n,o,u,c,s,f,v,w=function(ke){return ke=ke||{},this.isStrokeTransparent=ke.isStrokeTransparent||!1,this.strokeOpacity=ke.strokeOpacity||1,this.strokeStyle=ke.strokeStyle||"#000000",this.fillStyle=ke.fillStyle||"#000000",this.isFillTransparent=ke.isFillTransparent||!1,this.fillOpacity=ke.fillOpacity||1,this.font=ke.font||"10px sans-serif",this.textBaseline=ke.textBaseline||"alphabetic",this.textAlign=ke.textAlign||"left",this.lineWidth=ke.lineWidth||1,this.lineJoin=ke.lineJoin||"miter",this.lineCap=ke.lineCap||"butt",this.path=ke.path||[],this.transform=ke.transform!==void 0?ke.transform.clone():new f,this.globalCompositeOperation=ke.globalCompositeOperation||"normal",this.globalAlpha=ke.globalAlpha||1,this.clip_path=ke.clip_path||[],this.currentPoint=ke.currentPoint||new c,this.miterLimit=ke.miterLimit||10,this.lastPoint=ke.lastPoint||new c,this.lineDashOffset=ke.lineDashOffset||0,this.lineDash=ke.lineDash||[],this.margin=ke.margin||[0,0,0,0],this.prevPageLastElemOffset=ke.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ke.ignoreClearRect!="boolean"||ke.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,c=this.internal.Point,s=this.internal.Rectangle,f=this.internal.Matrix,v=new w}]);var E=function(ke){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Re=ke;Object.defineProperty(this,"pdf",{get:function(){return Re}});var Pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Pe},set:function(Ct){Pe=!!Ct}});var dt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return dt},set:function(Ct){dt=!!Ct}});var Et=0;Object.defineProperty(this,"posX",{get:function(){return Et},set:function(Ct){isNaN(Ct)||(Et=Ct)}});var Pt=0;Object.defineProperty(this,"posY",{get:function(){return Pt},set:function(Ct){isNaN(Ct)||(Pt=Ct)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(Ct){var pt;typeof Ct=="number"?pt=[Ct,Ct,Ct,Ct]:((pt=new Array(4))[0]=Ct[0],pt[1]=Ct.length>=2?Ct[1]:pt[0],pt[2]=Ct.length>=3?Ct[2]:pt[0],pt[3]=Ct.length>=4?Ct[3]:pt[1]),v.margin=pt}});var Kt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Kt},set:function(Ct){Kt=Ct}});var $t=0;Object.defineProperty(this,"lastBreak",{get:function(){return $t},set:function(Ct){$t=Ct}});var br=[];Object.defineProperty(this,"pageBreaks",{get:function(){return br},set:function(Ct){br=Ct}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(Ct){Ct instanceof w&&(v=Ct)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(Ct){v.path=Ct}});var Gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Gt},set:function(Ct){Gt=Ct}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ct){var pt;pt=L(Ct),this.ctx.fillStyle=pt.style,this.ctx.isFillTransparent=pt.a===0,this.ctx.fillOpacity=pt.a,this.pdf.setFillColor(pt.r,pt.g,pt.b,{a:pt.a}),this.pdf.setTextColor(pt.r,pt.g,pt.b,{a:pt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ct){var pt=L(Ct);this.ctx.strokeStyle=pt.style,this.ctx.isStrokeTransparent=pt.a===0,this.ctx.strokeOpacity=pt.a,pt.a===0?this.pdf.setDrawColor(255,255,255):(pt.a,this.pdf.setDrawColor(pt.r,pt.g,pt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ct){["butt","round","square"].indexOf(Ct)!==-1&&(this.ctx.lineCap=Ct,this.pdf.setLineCap(Ct))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ct){isNaN(Ct)||(this.ctx.lineWidth=Ct,this.pdf.setLineWidth(Ct))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ct){["bevel","round","miter"].indexOf(Ct)!==-1&&(this.ctx.lineJoin=Ct,this.pdf.setLineJoin(Ct))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ct){isNaN(Ct)||(this.ctx.miterLimit=Ct,this.pdf.setMiterLimit(Ct))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ct){this.ctx.textBaseline=Ct}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ct){["right","end","center","left","start"].indexOf(Ct)!==-1&&(this.ctx.textAlign=Ct)}});var Rr=null;function Mr(Ct,pt){if(Rr===null){var Dr=function(ln){var Wt=[];return Object.keys(ln).forEach(function(Ur){ln[Ur].forEach(function(dn){var tn=null;switch(dn){case"bold":tn={family:Ur,weight:"bold"};break;case"italic":tn={family:Ur,style:"italic"};break;case"bolditalic":tn={family:Ur,weight:"bold",style:"italic"};break;case"":case"normal":tn={family:Ur}}tn!==null&&(tn.ref={name:Ur,style:dn},Wt.push(tn))})}),Wt}(Ct.getFontList());Rr=function(ln){for(var Wt={},Ur=0;Ur<ln.length;++Ur){var dn=Bg(ln[Ur]),tn=dn.family,Bn=dn.stretch,Jn=dn.style,ai=dn.weight;Wt[tn]=Wt[tn]||{},Wt[tn][Bn]=Wt[tn][Bn]||{},Wt[tn][Bn][Jn]=Wt[tn][Bn][Jn]||{},Wt[tn][Bn][Jn][ai]=dn}return Wt}(Dr.concat(pt))}return Rr}var Kr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Kr},set:function(Ct){Rr=null,Kr=Ct}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ct){var pt;if(this.ctx.font=Ct,(pt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ct))!==null){var Dr=pt[1],ln=(pt[2],pt[3]),Wt=pt[4],Ur=(pt[5],pt[6]),dn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Wt)[2];Wt=Math.floor(dn==="px"?parseFloat(Wt)*this.pdf.internal.scaleFactor:dn==="em"?parseFloat(Wt)*this.pdf.getFontSize():parseFloat(Wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Wt);var tn=function(Vr){var wi,xn,si=[],fr=Vr.trim();if(fr==="")return um;if(fr in tb)return[tb[fr]];for(;fr!=="";){switch(xn=null,wi=(fr=nb(fr)).charAt(0)){case'"':case"'":xn=u9(fr.substring(1),wi);break;default:xn=c9(fr)}if(xn===null||(si.push(xn[0]),(fr=nb(xn[1]))!==""&&fr.charAt(0)!==","))return um;fr=fr.replace(/^,/,"")}return si}(Ur);if(this.fontFaces){var Bn=l9(Mr(this.pdf,this.fontFaces),tn.map(function(Vr){return{family:Vr,stretch:"normal",weight:ln,style:Dr}}));this.pdf.setFont(Bn.ref.name,Bn.ref.style)}else{var Jn="";(ln==="bold"||parseInt(ln,10)>=700||Dr==="bold")&&(Jn="bold"),Dr==="italic"&&(Jn+="italic"),Jn.length===0&&(Jn="normal");for(var ai="",_i={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},hi=0;hi<tn.length;hi++){if(this.pdf.internal.getFont(tn[hi],Jn,{noFallback:!0,disableWarning:!0})!==void 0){ai=tn[hi];break}if(Jn==="bolditalic"&&this.pdf.internal.getFont(tn[hi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ai=tn[hi],Jn="bold";else if(this.pdf.internal.getFont(tn[hi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ai=tn[hi],Jn="normal";break}}if(ai===""){for(var yr=0;yr<tn.length;yr++)if(_i[tn[yr]]){ai=_i[tn[yr]];break}}ai=ai===""?"Times":ai,this.pdf.setFont(ai,Jn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ct){this.ctx.globalCompositeOperation=Ct}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ct){this.ctx.globalAlpha=Ct}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ct){this.ctx.lineDashOffset=Ct,We.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ct){this.ctx.lineDash=Ct,We.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ct){this.ctx.ignoreClearRect=!!Ct}})};E.prototype.setLineDash=function(ke){this.lineDash=ke},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){Y.call(this,"fill",!1)},E.prototype.stroke=function(){Y.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(ke,Re){if(isNaN(ke)||isNaN(Re))throw Ma.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Pe=this.ctx.transform.applyToPoint(new c(ke,Re));this.path.push({type:"mt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(ke,Re)},E.prototype.closePath=function(){var ke=new c(0,0),Re=0;for(Re=this.path.length-1;Re!==-1;Re--)if(this.path[Re].type==="begin"&&_a(this.path[Re+1])==="object"&&typeof this.path[Re+1].x=="number"){ke=new c(this.path[Re+1].x,this.path[Re+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ke.x,ke.y)},E.prototype.lineTo=function(ke,Re){if(isNaN(ke)||isNaN(Re))throw Ma.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Pe=this.ctx.transform.applyToPoint(new c(ke,Re));this.path.push({type:"lt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(Pe.x,Pe.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},E.prototype.quadraticCurveTo=function(ke,Re,Pe,dt){if(isNaN(Pe)||isNaN(dt)||isNaN(ke)||isNaN(Re))throw Ma.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Et=this.ctx.transform.applyToPoint(new c(Pe,dt)),Pt=this.ctx.transform.applyToPoint(new c(ke,Re));this.path.push({type:"qct",x1:Pt.x,y1:Pt.y,x:Et.x,y:Et.y}),this.ctx.lastPoint=new c(Et.x,Et.y)},E.prototype.bezierCurveTo=function(ke,Re,Pe,dt,Et,Pt){if(isNaN(Et)||isNaN(Pt)||isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt))throw Ma.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Kt=this.ctx.transform.applyToPoint(new c(Et,Pt)),$t=this.ctx.transform.applyToPoint(new c(ke,Re)),br=this.ctx.transform.applyToPoint(new c(Pe,dt));this.path.push({type:"bct",x1:$t.x,y1:$t.y,x2:br.x,y2:br.y,x:Kt.x,y:Kt.y}),this.ctx.lastPoint=new c(Kt.x,Kt.y)},E.prototype.arc=function(ke,Re,Pe,dt,Et,Pt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt)||isNaN(Et))throw Ma.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Pt=!!Pt,!this.ctx.transform.isIdentity){var Kt=this.ctx.transform.applyToPoint(new c(ke,Re));ke=Kt.x,Re=Kt.y;var $t=this.ctx.transform.applyToPoint(new c(0,Pe)),br=this.ctx.transform.applyToPoint(new c(0,0));Pe=Math.sqrt(Math.pow($t.x-br.x,2)+Math.pow($t.y-br.y,2))}Math.abs(Et-dt)>=2*Math.PI&&(dt=0,Et=2*Math.PI),this.path.push({type:"arc",x:ke,y:Re,radius:Pe,startAngle:dt,endAngle:Et,counterclockwise:Pt})},E.prototype.arcTo=function(ke,Re,Pe,dt,Et){throw new Error("arcTo not implemented.")},E.prototype.rect=function(ke,Re,Pe,dt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt))throw Ma.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ke,Re),this.lineTo(ke+Pe,Re),this.lineTo(ke+Pe,Re+dt),this.lineTo(ke,Re+dt),this.lineTo(ke,Re),this.lineTo(ke+Pe,Re),this.lineTo(ke,Re)},E.prototype.fillRect=function(ke,Re,Pe,dt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt))throw Ma.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Et={};this.lineCap!=="butt"&&(Et.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Et.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ke,Re,Pe,dt),this.fill(),Et.hasOwnProperty("lineCap")&&(this.lineCap=Et.lineCap),Et.hasOwnProperty("lineJoin")&&(this.lineJoin=Et.lineJoin)}},E.prototype.strokeRect=function(ke,Re,Pe,dt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt))throw Ma.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(ke,Re,Pe,dt),this.stroke())},E.prototype.clearRect=function(ke,Re,Pe,dt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt))throw Ma.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ke,Re,Pe,dt))},E.prototype.save=function(ke){ke=typeof ke!="boolean"||ke;for(var Re=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Re),ke){this.ctx.fontSize=this.pdf.internal.getFontSize();var dt=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=dt}},E.prototype.restore=function(ke){ke=typeof ke!="boolean"||ke;for(var Re=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("Q");this.pdf.setPage(Re),ke&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var L=function(ke){var Re,Pe,dt,Et;if(ke.isCanvasGradient===!0&&(ke=ke.getColor()),!ke)return{r:0,g:0,b:0,a:0,style:ke};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ke))Re=0,Pe=0,dt=0,Et=0;else{var Pt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ke);if(Pt!==null)Re=parseInt(Pt[1]),Pe=parseInt(Pt[2]),dt=parseInt(Pt[3]),Et=1;else if((Pt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ke))!==null)Re=parseInt(Pt[1]),Pe=parseInt(Pt[2]),dt=parseInt(Pt[3]),Et=parseFloat(Pt[4]);else{if(Et=1,typeof ke=="string"&&ke.charAt(0)!=="#"){var Kt=new i6(ke);ke=Kt.ok?Kt.toHex():"#000000"}ke.length===4?(Re=ke.substring(1,2),Re+=Re,Pe=ke.substring(2,3),Pe+=Pe,dt=ke.substring(3,4),dt+=dt):(Re=ke.substring(1,3),Pe=ke.substring(3,5),dt=ke.substring(5,7)),Re=parseInt(Re,16),Pe=parseInt(Pe,16),dt=parseInt(dt,16)}}return{r:Re,g:Pe,b:dt,a:Et,style:ke}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(ke,Re,Pe,dt){if(isNaN(Re)||isNaN(Pe)||typeof ke!="string")throw Ma.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(dt=isNaN(dt)?void 0:dt,!C.call(this)){var Et=ut(this.ctx.transform.rotation),Pt=this.ctx.transform.scaleX;Ce.call(this,{text:ke,x:Re,y:Pe,scale:Pt,angle:Et,align:this.textAlign,maxWidth:dt})}},E.prototype.strokeText=function(ke,Re,Pe,dt){if(isNaN(Re)||isNaN(Pe)||typeof ke!="string")throw Ma.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){dt=isNaN(dt)?void 0:dt;var Et=ut(this.ctx.transform.rotation),Pt=this.ctx.transform.scaleX;Ce.call(this,{text:ke,x:Re,y:Pe,scale:Pt,renderingMode:"stroke",angle:Et,align:this.textAlign,maxWidth:dt})}},E.prototype.measureText=function(ke){if(typeof ke!="string")throw Ma.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Re=this.pdf,Pe=this.pdf.internal.scaleFactor,dt=Re.internal.getFontSize(),Et=Re.getStringUnitWidth(ke)*dt/Re.internal.scaleFactor,Pt=function(Kt){var $t=(Kt=Kt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return $t}}),this};return new Pt({width:Et*=Math.round(96*Pe/72*1e4)/1e4})},E.prototype.scale=function(ke,Re){if(isNaN(ke)||isNaN(Re))throw Ma.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Pe=new f(ke,0,0,Re,0,0);this.ctx.transform=this.ctx.transform.multiply(Pe)},E.prototype.rotate=function(ke){if(isNaN(ke))throw Ma.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Re=new f(Math.cos(ke),Math.sin(ke),-Math.sin(ke),Math.cos(ke),0,0);this.ctx.transform=this.ctx.transform.multiply(Re)},E.prototype.translate=function(ke,Re){if(isNaN(ke)||isNaN(Re))throw Ma.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Pe=new f(1,0,0,1,ke,Re);this.ctx.transform=this.ctx.transform.multiply(Pe)},E.prototype.transform=function(ke,Re,Pe,dt,Et,Pt){if(isNaN(ke)||isNaN(Re)||isNaN(Pe)||isNaN(dt)||isNaN(Et)||isNaN(Pt))throw Ma.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Kt=new f(ke,Re,Pe,dt,Et,Pt);this.ctx.transform=this.ctx.transform.multiply(Kt)},E.prototype.setTransform=function(ke,Re,Pe,dt,Et,Pt){ke=isNaN(ke)?1:ke,Re=isNaN(Re)?0:Re,Pe=isNaN(Pe)?0:Pe,dt=isNaN(dt)?1:dt,Et=isNaN(Et)?0:Et,Pt=isNaN(Pt)?0:Pt,this.ctx.transform=new f(ke,Re,Pe,dt,Et,Pt)};var B=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(ke,Re,Pe,dt,Et,Pt,Kt,$t,br){var Gt=this.pdf.getImageProperties(ke),Rr=1,Mr=1,Kr=1,Ct=1;dt!==void 0&&$t!==void 0&&(Kr=$t/dt,Ct=br/Et,Rr=Gt.width/dt*$t/dt,Mr=Gt.height/Et*br/Et),Pt===void 0&&(Pt=Re,Kt=Pe,Re=0,Pe=0),dt!==void 0&&$t===void 0&&($t=dt,br=Et),dt===void 0&&$t===void 0&&($t=Gt.width,br=Gt.height);for(var pt,Dr=this.ctx.transform.decompose(),ln=ut(Dr.rotate.shx),Wt=new f,Ur=(Wt=(Wt=(Wt=Wt.multiply(Dr.translate)).multiply(Dr.skew)).multiply(Dr.scale)).applyToRectangle(new s(Pt-Re*Kr,Kt-Pe*Ct,dt*Rr,Et*Mr)),dn=G.call(this,Ur),tn=[],Bn=0;Bn<dn.length;Bn+=1)tn.indexOf(dn[Bn])===-1&&tn.push(dn[Bn]);if(ee(tn),this.autoPaging)for(var Jn=tn[0],ai=tn[tn.length-1],_i=Jn;_i<ai+1;_i++){this.pdf.setPage(_i);var hi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=_i===1?this.posY+this.margin[0]:this.margin[0],Vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xn=_i===1?0:Vr+(_i-2)*wi;if(this.ctx.clip_path.length!==0){var si=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(pt,this.posX+this.margin[3],-xn+yr+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=si}var fr=JSON.parse(JSON.stringify(Ur));fr=Z([fr],this.posX+this.margin[3],-xn+yr+this.ctx.prevPageLastElemOffset)[0];var or=(_i>Jn||_i<ai)&&B.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hi,wi,null).clip().discardPath()),this.pdf.addImage(ke,"JPEG",fr.x,fr.y,fr.w,fr.h,null,null,ln),or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ke,"JPEG",Ur.x,Ur.y,Ur.w,Ur.h,null,null,ln)};var G=function(ke,Re,Pe){var dt=[];Re=Re||this.pdf.internal.pageSize.width,Pe=Pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Et=this.posY+this.ctx.prevPageLastElemOffset;switch(ke.type){default:case"mt":case"lt":dt.push(Math.floor((ke.y+Et)/Pe)+1);break;case"arc":dt.push(Math.floor((ke.y+Et-ke.radius)/Pe)+1),dt.push(Math.floor((ke.y+Et+ke.radius)/Pe)+1);break;case"qct":var Pt=bt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ke.x1,ke.y1,ke.x,ke.y);dt.push(Math.floor((Pt.y+Et)/Pe)+1),dt.push(Math.floor((Pt.y+Pt.h+Et)/Pe)+1);break;case"bct":var Kt=Xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ke.x1,ke.y1,ke.x2,ke.y2,ke.x,ke.y);dt.push(Math.floor((Kt.y+Et)/Pe)+1),dt.push(Math.floor((Kt.y+Kt.h+Et)/Pe)+1);break;case"rect":dt.push(Math.floor((ke.y+Et)/Pe)+1),dt.push(Math.floor((ke.y+ke.h+Et)/Pe)+1)}for(var $t=0;$t<dt.length;$t+=1)for(;this.pdf.internal.getNumberOfPages()<dt[$t];)H.call(this);return dt},H=function(){var ke=this.fillStyle,Re=this.strokeStyle,Pe=this.font,dt=this.lineCap,Et=this.lineWidth,Pt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ke,this.strokeStyle=Re,this.font=Pe,this.lineCap=dt,this.lineWidth=Et,this.lineJoin=Pt},Z=function(ke,Re,Pe){for(var dt=0;dt<ke.length;dt++)switch(ke[dt].type){case"bct":ke[dt].x2+=Re,ke[dt].y2+=Pe;case"qct":ke[dt].x1+=Re,ke[dt].y1+=Pe;case"mt":case"lt":case"arc":default:ke[dt].x+=Re,ke[dt].y+=Pe}return ke},ee=function(ke){return ke.sort(function(Re,Pe){return Re-Pe})},Y=function(ke,Re){for(var Pe,dt,Et=this.fillStyle,Pt=this.strokeStyle,Kt=this.lineCap,$t=this.lineWidth,br=Math.abs($t*this.ctx.transform.scaleX),Gt=this.lineJoin,Rr=JSON.parse(JSON.stringify(this.path)),Mr=JSON.parse(JSON.stringify(this.path)),Kr=[],Ct=0;Ct<Mr.length;Ct++)if(Mr[Ct].x!==void 0)for(var pt=G.call(this,Mr[Ct]),Dr=0;Dr<pt.length;Dr+=1)Kr.indexOf(pt[Dr])===-1&&Kr.push(pt[Dr]);for(var ln=0;ln<Kr.length;ln++)for(;this.pdf.internal.getNumberOfPages()<Kr[ln];)H.call(this);if(ee(Kr),this.autoPaging)for(var Wt=Kr[0],Ur=Kr[Kr.length-1],dn=Wt;dn<Ur+1;dn++){this.pdf.setPage(dn),this.fillStyle=Et,this.strokeStyle=Pt,this.lineCap=Kt,this.lineWidth=br,this.lineJoin=Gt;var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Bn=dn===1?this.posY+this.margin[0]:this.margin[0],Jn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ai=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_i=dn===1?0:Jn+(dn-2)*ai;if(this.ctx.clip_path.length!==0){var hi=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(Pe,this.posX+this.margin[3],-_i+Bn+this.ctx.prevPageLastElemOffset),le.call(this,ke,!0),this.path=hi}if(dt=JSON.parse(JSON.stringify(Rr)),this.path=Z(dt,this.posX+this.margin[3],-_i+Bn+this.ctx.prevPageLastElemOffset),Re===!1||dn===0){var yr=(dn>Wt||dn<Ur)&&B.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,ai,null).clip().discardPath()),le.call(this,ke,Re),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=$t}else this.lineWidth=br,le.call(this,ke,Re),this.lineWidth=$t;this.path=Rr},le=function(ke,Re){if((ke!=="stroke"||Re||!F.call(this))&&(ke==="stroke"||Re||!C.call(this))){for(var Pe,dt,Et=[],Pt=this.path,Kt=0;Kt<Pt.length;Kt++){var $t=Pt[Kt];switch($t.type){case"begin":Et.push({begin:!0});break;case"close":Et.push({close:!0});break;case"mt":Et.push({start:$t,deltas:[],abs:[]});break;case"lt":var br=Et.length;if(Pt[Kt-1]&&!isNaN(Pt[Kt-1].x)&&(Pe=[$t.x-Pt[Kt-1].x,$t.y-Pt[Kt-1].y],br>0)){for(;br>=0;br--)if(Et[br-1].close!==!0&&Et[br-1].begin!==!0){Et[br-1].deltas.push(Pe),Et[br-1].abs.push($t);break}}break;case"bct":Pe=[$t.x1-Pt[Kt-1].x,$t.y1-Pt[Kt-1].y,$t.x2-Pt[Kt-1].x,$t.y2-Pt[Kt-1].y,$t.x-Pt[Kt-1].x,$t.y-Pt[Kt-1].y],Et[Et.length-1].deltas.push(Pe);break;case"qct":var Gt=Pt[Kt-1].x+2/3*($t.x1-Pt[Kt-1].x),Rr=Pt[Kt-1].y+2/3*($t.y1-Pt[Kt-1].y),Mr=$t.x+2/3*($t.x1-$t.x),Kr=$t.y+2/3*($t.y1-$t.y),Ct=$t.x,pt=$t.y;Pe=[Gt-Pt[Kt-1].x,Rr-Pt[Kt-1].y,Mr-Pt[Kt-1].x,Kr-Pt[Kt-1].y,Ct-Pt[Kt-1].x,pt-Pt[Kt-1].y],Et[Et.length-1].deltas.push(Pe);break;case"arc":Et.push({deltas:[],abs:[],arc:!0}),Array.isArray(Et[Et.length-1].abs)&&Et[Et.length-1].abs.push($t)}}dt=Re?null:ke==="stroke"?"stroke":"fill";for(var Dr=!1,ln=0;ln<Et.length;ln++)if(Et[ln].arc)for(var Wt=Et[ln].abs,Ur=0;Ur<Wt.length;Ur++){var dn=Wt[Ur];dn.type==="arc"?pe.call(this,dn.x,dn.y,dn.radius,dn.startAngle,dn.endAngle,dn.counterclockwise,void 0,Re,!Dr):Oe.call(this,dn.x,dn.y),Dr=!0}else if(Et[ln].close===!0)this.pdf.internal.out("h"),Dr=!1;else if(Et[ln].begin!==!0){var tn=Et[ln].start.x,Bn=Et[ln].start.y;nt.call(this,Et[ln].deltas,tn,Bn),Dr=!0}dt&&Ne.call(this,dt),Re&&Ve.call(this)}},ce=function(ke){var Re=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Pe=Re*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ke-Pe;case"top":return ke+Re-Pe;case"hanging":return ke+Re-2*Pe;case"middle":return ke+Re/2-Pe;case"ideographic":return ke;case"alphabetic":default:return ke}},ve=function(ke){return ke+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var ke=function(){};return ke.colorStops=[],ke.addColorStop=function(Re,Pe){this.colorStops.push([Re,Pe])},ke.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ke.isCanvasGradient=!0,ke},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pe=function(ke,Re,Pe,dt,Et,Pt,Kt,$t,br){for(var Gt=ht.call(this,Pe,dt,Et,Pt),Rr=0;Rr<Gt.length;Rr++){var Mr=Gt[Rr];Rr===0&&(br?be.call(this,Mr.x1+ke,Mr.y1+Re):Oe.call(this,Mr.x1+ke,Mr.y1+Re)),mt.call(this,ke,Re,Mr.x2,Mr.y2,Mr.x3,Mr.y3,Mr.x4,Mr.y4)}$t?Ve.call(this):Ne.call(this,Kt)},Ne=function(ke){switch(ke){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ve=function(){this.pdf.clip(),this.pdf.discardPath()},be=function(ke,Re){this.pdf.internal.out(r(ke)+" "+n(Re)+" m")},Ce=function(ke){var Re;switch(ke.align){case"right":case"end":Re="right";break;case"center":Re="center";break;case"left":case"start":default:Re="left"}var Pe=this.pdf.getTextDimensions(ke.text),dt=ce.call(this,ke.y),Et=ve.call(this,dt)-Pe.h,Pt=this.ctx.transform.applyToPoint(new c(ke.x,dt)),Kt=this.ctx.transform.decompose(),$t=new f;$t=($t=($t=$t.multiply(Kt.translate)).multiply(Kt.skew)).multiply(Kt.scale);for(var br,Gt,Rr,Mr=this.ctx.transform.applyToRectangle(new s(ke.x,dt,Pe.w,Pe.h)),Kr=$t.applyToRectangle(new s(ke.x,Et,Pe.w,Pe.h)),Ct=G.call(this,Kr),pt=[],Dr=0;Dr<Ct.length;Dr+=1)pt.indexOf(Ct[Dr])===-1&&pt.push(Ct[Dr]);if(ee(pt),this.autoPaging)for(var ln=pt[0],Wt=pt[pt.length-1],Ur=ln;Ur<Wt+1;Ur++){this.pdf.setPage(Ur);var dn=Ur===1?this.posY+this.margin[0]:this.margin[0],tn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bn=this.pdf.internal.pageSize.height-this.margin[2],Jn=Bn-this.margin[0],ai=this.pdf.internal.pageSize.width-this.margin[1],_i=ai-this.margin[3],hi=Ur===1?0:tn+(Ur-2)*Jn;if(this.ctx.clip_path.length!==0){var yr=this.path;br=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(br,this.posX+this.margin[3],-1*hi+dn),le.call(this,"fill",!0),this.path=yr}var Vr=Z([JSON.parse(JSON.stringify(Kr))],this.posX+this.margin[3],-hi+dn+this.ctx.prevPageLastElemOffset)[0];ke.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*ke.scale),Rr=this.lineWidth,this.lineWidth=Rr*ke.scale);var wi=this.autoPaging!=="text";if(wi||Vr.y+Vr.h<=Bn){if(wi||Vr.y>=dn&&Vr.x<=ai){var xn=wi?ke.text:this.pdf.splitTextToSize(ke.text,ke.maxWidth||ai-Vr.x)[0],si=Z([JSON.parse(JSON.stringify(Mr))],this.posX+this.margin[3],-hi+dn+this.ctx.prevPageLastElemOffset)[0],fr=wi&&(Ur>ln||Ur<Wt)&&B.call(this);fr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_i,Jn,null).clip().discardPath()),this.pdf.text(xn,si.x,si.y,{angle:ke.angle,align:Re,renderingMode:ke.renderingMode}),fr&&this.pdf.restoreGraphicsState()}}else Vr.y<Bn&&(this.ctx.prevPageLastElemOffset+=Bn-Vr.y);ke.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Rr)}else ke.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*ke.scale),Rr=this.lineWidth,this.lineWidth=Rr*ke.scale),this.pdf.text(ke.text,Pt.x+this.posX,Pt.y+this.posY,{angle:ke.angle,align:Re,renderingMode:ke.renderingMode,maxWidth:ke.maxWidth}),ke.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Rr)},Oe=function(ke,Re,Pe,dt){Pe=Pe||0,dt=dt||0,this.pdf.internal.out(r(ke+Pe)+" "+n(Re+dt)+" l")},nt=function(ke,Re,Pe){return this.pdf.lines(ke,Re,Pe,null,null)},mt=function(ke,Re,Pe,dt,Et,Pt,Kt,$t){this.pdf.internal.out([t(o(Pe+ke)),t(u(dt+Re)),t(o(Et+ke)),t(u(Pt+Re)),t(o(Kt+ke)),t(u($t+Re)),"c"].join(" "))},ht=function(ke,Re,Pe,dt){for(var Et=2*Math.PI,Pt=Math.PI/2;Re>Pe;)Re-=Et;var Kt=Math.abs(Pe-Re);Kt<Et&&dt&&(Kt=Et-Kt);for(var $t=[],br=dt?-1:1,Gt=Re;Kt>1e-5;){var Rr=Gt+br*Math.min(Kt,Pt);$t.push(He.call(this,ke,Gt,Rr)),Kt-=Math.abs(Rr-Gt),Gt=Rr}return $t},He=function(ke,Re,Pe){var dt=(Pe-Re)/2,Et=ke*Math.cos(dt),Pt=ke*Math.sin(dt),Kt=Et,$t=-Pt,br=Kt*Kt+$t*$t,Gt=br+Kt*Et+$t*Pt,Rr=4/3*(Math.sqrt(2*br*Gt)-Gt)/(Kt*Pt-$t*Et),Mr=Kt-Rr*$t,Kr=$t+Rr*Kt,Ct=Mr,pt=-Kr,Dr=dt+Re,ln=Math.cos(Dr),Wt=Math.sin(Dr);return{x1:ke*Math.cos(Re),y1:ke*Math.sin(Re),x2:Mr*ln-Kr*Wt,y2:Mr*Wt+Kr*ln,x3:Ct*ln-pt*Wt,y3:Ct*Wt+pt*ln,x4:ke*Math.cos(Pe),y4:ke*Math.sin(Pe)}},ut=function(ke){return 180*ke/Math.PI},bt=function(ke,Re,Pe,dt,Et,Pt){var Kt=ke+.5*(Pe-ke),$t=Re+.5*(dt-Re),br=Et+.5*(Pe-Et),Gt=Pt+.5*(dt-Pt),Rr=Math.min(ke,Et,Kt,br),Mr=Math.max(ke,Et,Kt,br),Kr=Math.min(Re,Pt,$t,Gt),Ct=Math.max(Re,Pt,$t,Gt);return new s(Rr,Kr,Mr-Rr,Ct-Kr)},Xe=function(ke,Re,Pe,dt,Et,Pt,Kt,$t){var br,Gt,Rr,Mr,Kr,Ct,pt,Dr,ln,Wt,Ur,dn,tn,Bn,Jn=Pe-ke,ai=dt-Re,_i=Et-Pe,hi=Pt-dt,yr=Kt-Et,Vr=$t-Pt;for(Gt=0;Gt<41;Gt++)ln=(pt=(Rr=ke+(br=Gt/40)*Jn)+br*((Kr=Pe+br*_i)-Rr))+br*(Kr+br*(Et+br*yr-Kr)-pt),Wt=(Dr=(Mr=Re+br*ai)+br*((Ct=dt+br*hi)-Mr))+br*(Ct+br*(Pt+br*Vr-Ct)-Dr),Gt==0?(Ur=ln,dn=Wt,tn=ln,Bn=Wt):(Ur=Math.min(Ur,ln),dn=Math.min(dn,Wt),tn=Math.max(tn,ln),Bn=Math.max(Bn,Wt));return new s(Math.round(Ur),Math.round(dn),Math.round(tn-Ur),Math.round(Bn-dn))},We=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ke,Re,Pe=(ke=this.ctx.lineDash,Re=this.ctx.lineDashOffset,JSON.stringify({lineDash:ke,lineDashOffset:Re}));this.prevLineDash!==Pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Pe)}}})(to.API),function(e){var t=function(u){var c,s,f,v,w,E,L,C,F,B;for(s=[],f=0,v=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;v>f;f+=4)(w=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(E=(w=((w=((w=((w=(w-(B=w%85))/85)-(F=w%85))/85)-(C=w%85))/85)-(L=w%85))/85)%85,s.push(E+33,L+33,C+33,F+33,B+33)):s.push(122);return function(G,H){for(var Z=H;Z>0;Z--)G.pop()}(s,c.length),String.fromCharCode.apply(String,s)+"~>"},r=function(u){var c,s,f,v,w,E=String,L="length",C=255,F="charCodeAt",B="slice",G="replace";for(u[B](-2),u=u[B](0,-2)[G](/\s/g,"")[G]("z","!!!!!"),f=[],v=0,w=(u+=c="uuuuu"[B](u[L]%5||5))[L];w>v;v+=5)s=52200625*(u[F](v)-33)+614125*(u[F](v+1)-33)+7225*(u[F](v+2)-33)+85*(u[F](v+3)-33)+(u[F](v+4)-33),f.push(C&s>>24,C&s>>16,C&s>>8,C&s);return function(H,Z){for(var ee=Z;ee>0;ee--)H.pop()}(f,c[L]),E.fromCharCode.apply(E,f)},n=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var s="",f=0;f<u.length;f+=2)s+=String.fromCharCode("0x"+(u[f]+u[f+1]));return s},o=function(u){for(var c=new Uint8Array(u.length),s=u.length;s--;)c[s]=u.charCodeAt(s);return u=(c=Dg(c)).reduce(function(f,v){return f+String.fromCharCode(v)},"")};e.processDataByFilters=function(u,c){var s=0,f=u||"",v=[];for(typeof(c=c||[])=="string"&&(c=[c]),s=0;s<c.length;s+=1)switch(c[s]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=n(f),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[s]+'" is not implemented')}return{data:f,reverseChain:v.reverse().join(" ")}}}(to.API),function(e){e.loadFile=function(t,r,n){return function(o,u,c){u=u!==!1,c=typeof c=="function"?c:function(){};var s=void 0;try{s=function(f,v,w){var E=new XMLHttpRequest,L=0,C=function(F){var B=F.length,G=[],H=String.fromCharCode;for(L=0;L<B;L+=1)G.push(H(255&F.charCodeAt(L)));return G.join("")};if(E.open("GET",f,!v),E.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(E.onload=function(){E.status===200?w(C(this.responseText)):w(void 0)}),E.send(null),v&&E.status===200)return C(E.responseText)}(o,u,c)}catch{}return s}(t,r,n)},e.loadImageFile=e.loadFile}(to.API),function(e){function t(){return(ro.html2canvas?Promise.resolve(ro.html2canvas):rd(()=>import("./html2canvas.esm.0a33ed42.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(ro.DOMPurify?Promise.resolve(ro.DOMPurify):rd(()=>import("./purify.es.9f923ed6.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var s=_a(c);return s==="undefined"?"undefined":s==="string"||c instanceof String?"string":s==="number"||c instanceof Number?"number":s==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":s==="object"?"object":"unknown"},o=function(c,s){var f=document.createElement(c);for(var v in s.className&&(f.className=s.className),s.innerHTML&&s.dompurify&&(f.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)f.style[v]=s.style[v];return f},u=function c(s){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),v=c.convert(Promise.resolve(),f);return v=(v=v.setProgress(1,c,1,[c])).set(s)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,s){return c.__proto__=s||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,s){return this.then(function(){switch(s=s||function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(f){return this.set({src:o("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function f(v,w){for(var E=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),L=v.firstChild;L;L=L.nextSibling)w!==!0&&L.nodeType===1&&L.nodeName==="SCRIPT"||E.appendChild(f(L,w));return v.nodeType===1&&(v.nodeName==="CANVAS"?(E.width=v.width,E.height=v.height,E.getContext("2d").drawImage(v,0,0)):v.nodeName!=="TEXTAREA"&&v.nodeName!=="SELECT"||(E.value=v.value),E.addEventListener("load",function(){E.scrollTop=v.scrollTop,E.scrollLeft=v.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(s){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,s(this.prop.container,f)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(s){var f=this.opt.jsPDF,v=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=v,v)for(var L=0;L<v.length;++L){var C=v[L],F=C.src.find(function(B){return B.format==="truetype"});F&&f.addFont(F.url,C.ref.name,C.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,f.context2d.save(!0),s(this.prop.container,E)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,s,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,s):this.outputPdf(c,s)},u.prototype.outputPdf=function(c,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,s)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(n(c)!=="object")return this;var s=Object.keys(c||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(s)})},u.prototype.get=function(c,s){return this.then(function(){var f=c in u.template.prop?this.prop[c]:this.opt[c];return s?s(f):f})},u.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function s(f,v){return Math.floor(f*v/72*96)}return this.then(function(){(c=c||to.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:s(c.inner.width,c.k),height:s(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,s,f,v){return c!=null&&(this.progress.val=c),s!=null&&(this.progress.state=s),f!=null&&(this.progress.n=f),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,s,f,v){return this.setProgress(c?this.progress.val+c:null,s||null,f?this.progress.n+f:null,v?this.progress.stack.concat(v):null)},u.prototype.then=function(c,s){var f=this;return this.thenCore(c,s,function(v,w){return f.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(E){return f.updateProgress(null,v),E}).then(v,w).then(function(E){return f.updateProgress(1),E})})},u.prototype.thenCore=function(c,s,f){f=f||Promise.prototype.then,c&&(c=c.bind(this)),s&&(s=s.bind(this));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),w=f.call(v,c,s);return u.convert(w,this.__proto__)},u.prototype.thenExternal=function(c,s){return Promise.prototype.then.call(this,c,s)},u.prototype.thenList=function(c){var s=this;return c.forEach(function(f){s=s.thenCore(f)}),s},u.prototype.catch=function(c){c&&(c=c.bind(this));var s=Promise.prototype.catch.call(this,c);return u.convert(s,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,to.getPageSize=function(c,s,f){if(_a(c)==="object"){var v=c;c=v.orientation,s=v.unit||s,f=v.format||f}s=s||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var w,E=(""+f).toLowerCase(),L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+s}var C,F=0,B=0;if(L.hasOwnProperty(E))F=L[E][1]/w,B=L[E][0]/w;else try{F=f[1],B=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",B>F&&(C=B,B=F,F=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",F>B&&(C=B,B=F,F=C)}return{width:B,height:F,unit:s,k:w,orientation:c}},e.html=function(c,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(Bg):null;var f=new u(s);return s.worker?f:f.from(c).doCallback()}}(to.API),to.API.addJS=function(e){return ob=e,this.internal.events.subscribe("postPutResources",function(){n1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(n1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ib=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ob+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){n1!==void 0&&ib!==void 0&&this.internal.out("/Names <</JavaScript "+n1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),u=0;u<o.length;u++){var c=o[u],s=n.exec(c);if(s!=null){var f=s[1];r.internal.newObjectDeferredBegin(f,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,w=[];for(u=0;u<v;u++){var E=r.internal.newObject();w.push(E);var L=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+L.objId+" 0 R /XYZ null null null]>> endobj")}var C=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<w.length;u++)r.internal.write("(page_"+(u+1)+")"+w[u]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+C+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,o,u){var c={title:o,options:u,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<n.children.length;u++){var c=n.children[u];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),u>0&&this.line("/Prev "+this.makeRef(n.children[u-1])),u<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[u+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var s=this.count=this.count_r({count:0},c);if(s>0&&this.line("/Count "+s),c.options&&c.options.pageNumber){var f=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var v=0;v<n.children.length;v++)this.renderItems(n.children[v])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,o){for(var u=0;u<o.children.length;u++)n.count++,this.count_r(n,o.children[u]);return n.count}}])}(to.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,o,u,c,s){var f,v=this.decode.DCT_DECODE,w=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(f=function(E){for(var L,C=256*E.charCodeAt(4)+E.charCodeAt(5),F=E.length,B={width:0,height:0,numcomponents:1},G=4;G<F;G+=2){if(G+=C,t.indexOf(E.charCodeAt(G+1))!==-1){L=256*E.charCodeAt(G+5)+E.charCodeAt(G+6),B={width:256*E.charCodeAt(G+7)+E.charCodeAt(G+8),height:L,numcomponents:E.charCodeAt(G+9)};break}C=256*E.charCodeAt(G+2)+E.charCodeAt(G+3)}return B}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}w={data:r,width:f.width,height:f.height,colorSpace:s,bitsPerComponent:8,filter:v,index:n,alias:o}}return w}}(to.API);var Eh,i1,ab,sb,lb,f9=function(){var e,t,r;function n(u){var c,s,f,v,w,E,L,C,F,B,G,H,Z,ee;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(c=this.readUInt32(),F=function(){var Y,le;for(le=[],Y=0;Y<4;++Y)le.push(String.fromCharCode(this.data[this.pos++]));return le}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),v=this.readUInt16()||100,E.delay=1e3*w/v,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,c-=4),u=(E!=null?E.data:void 0)||this.imgData,H=0;0<=c?H<c:H>c;0<=c?++H:--H)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((B=f-this.transparency.indexed.length)>0)for(Z=0;0<=B?Z<B:Z>B;0<=B?++Z:--Z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":L=(G=this.read(c)).indexOf(0),C=String.fromCharCode.apply(String,G.slice(0,L)),this.text[C]=String.fromCharCode.apply(String,G.slice(L+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(ee=this.colorType)===4||ee===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(u){var c,s;for(s=[],c=0;0<=u?c<u:c>u;0<=u?++c:--c)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(u){var c=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*c),f=0,v=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function w(E,L,C,F){var B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt,Xe=Math.ceil((v.width-E)/C),We=Math.ceil((v.height-L)/F),ke=v.width==Xe&&v.height==We;for(Ce=c*Xe,Ve=ke?s:new Uint8Array(Ce*We),Y=u.length,be=0,G=0;be<We&&f<Y;){switch(u[f++]){case 0:for(Z=mt=0;mt<Ce;Z=mt+=1)Ve[G++]=u[f++];break;case 1:for(Z=ht=0;ht<Ce;Z=ht+=1)B=u[f++],ee=Z<c?0:Ve[G-c],Ve[G++]=(B+ee)%256;break;case 2:for(Z=He=0;He<Ce;Z=He+=1)B=u[f++],H=(Z-Z%c)/c,Oe=be&&Ve[(be-1)*Ce+H*c+Z%c],Ve[G++]=(Oe+B)%256;break;case 3:for(Z=ut=0;ut<Ce;Z=ut+=1)B=u[f++],H=(Z-Z%c)/c,ee=Z<c?0:Ve[G-c],Oe=be&&Ve[(be-1)*Ce+H*c+Z%c],Ve[G++]=(B+Math.floor((ee+Oe)/2))%256;break;case 4:for(Z=bt=0;bt<Ce;Z=bt+=1)B=u[f++],H=(Z-Z%c)/c,ee=Z<c?0:Ve[G-c],be===0?Oe=nt=0:(Oe=Ve[(be-1)*Ce+H*c+Z%c],nt=H&&Ve[(be-1)*Ce+(H-1)*c+Z%c]),le=ee+Oe-nt,ce=Math.abs(le-ee),pe=Math.abs(le-Oe),Ne=Math.abs(le-nt),ve=ce<=pe&&ce<=Ne?ee:pe<=Ne?Oe:nt,Ve[G++]=(B+ve)%256;break;default:throw new Error("Invalid filter algorithm: "+u[f-1])}if(!ke){var Re=((L+be*F)*v.width+E)*c,Pe=be*Ce;for(Z=0;Z<Xe;Z+=1){for(var dt=0;dt<c;dt+=1)s[Re++]=Ve[Pe++];Re+=(C-1)*c}}be++}}return u=G7(u),v.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),s},n.prototype.decodePalette=function(){var u,c,s,f,v,w,E,L,C;for(s=this.palette,w=this.transparency.indexed||[],v=new Uint8Array((w.length||0)+s.length),f=0,u=0,c=E=0,L=s.length;E<L;c=E+=3)v[f++]=s[c],v[f++]=s[c+1],v[f++]=s[c+2],v[f++]=(C=w[u++])!=null?C:255;return v},n.prototype.copyToImageData=function(u,c){var s,f,v,w,E,L,C,F,B,G,H;if(f=this.colors,B=null,s=this.hasAlphaChannel,this.palette.length&&(B=(H=this._decodedPalette)!=null?H:this._decodedPalette=this.decodePalette(),f=4,s=!0),F=(v=u.data||u).length,E=B||c,w=L=0,f===1)for(;w<F;)C=B?4*c[w/4]:L,G=E[C++],v[w++]=G,v[w++]=G,v[w++]=G,v[w++]=s?E[C++]:255,L=C;else for(;w<F;)C=B?4*c[w/4]:L,v[w++]=E[C++],v[w++]=E[C++],v[w++]=E[C++],v[w++]=s?E[C++]:255,L=C},n.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var o=function(){if(Object.prototype.toString.call(ro)==="[object Window]"){try{t=ro.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(u){var c;if(o()===!0)return r.width=u.width,r.height=u.height,r.clearRect(0,0,u.width,u.height),r.putImageData(u,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(u){var c,s,f,v,w,E,L,C;if(this.animation){for(C=[],s=w=0,E=(L=this.animation.frames).length;w<E;s=++w)c=L[s],f=u.createImageData(c.width,c.height),v=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(f,v),c.imageData=f,C.push(c.image=e(f));return C}},n.prototype.renderFrame=function(u,c){var s,f,v;return s=(f=this.animation.frames)[c],v=f[c-1],c===0&&u.clearRect(0,0,this.width,this.height),(v!=null?v.disposeOp:void 0)===1?u.clearRect(v.xOffset,v.yOffset,v.width,v.height):(v!=null?v.disposeOp:void 0)===2&&u.putImageData(v.imageData,v.xOffset,v.yOffset),s.blendOp===0&&u.clearRect(s.xOffset,s.yOffset,s.width,s.height),u.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(u){var c,s,f,v,w,E,L=this;return s=0,E=this.animation,v=E.numFrames,f=E.frames,w=E.numPlays,(c=function(){var C,F;if(C=s++%v,F=f[C],L.renderFrame(u,C),v>1&&s/v<w)return L.animation._timeout=setTimeout(c,F.delay)})()},n.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},n.prototype.render=function(u){var c,s;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,c=u.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(s=c.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),c.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function h9(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,o=e[t++],u=o>>7,c=1<<(7&o)+1;e[t++],e[t++];var s=null,f=null;u&&(s=t,f=c,t+=3*c);var v=!0,w=[],E=0,L=null,C=0,F=null;for(this.width=r,this.height=n;v&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((be=e[t++])>=0))throw Error("Invalid block size");if(be===0)break;t+=be}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var B=e[t++];E=e[t++]|e[t++]<<8,L=e[t++],!(1&B)&&(L=null),C=B>>2&7,t++;break;case 254:for(;;){if(!((be=e[t++])>=0))throw Error("Invalid block size");if(be===0)break;t+=be}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var G=e[t++]|e[t++]<<8,H=e[t++]|e[t++]<<8,Z=e[t++]|e[t++]<<8,ee=e[t++]|e[t++]<<8,Y=e[t++],le=Y>>6&1,ce=1<<(7&Y)+1,ve=s,pe=f,Ne=!1;Y>>7&&(Ne=!0,ve=t,pe=ce,t+=3*ce);var Ve=t;for(t++;;){var be;if(!((be=e[t++])>=0))throw Error("Invalid block size");if(be===0)break;t+=be}w.push({x:G,y:H,width:Z,height:ee,has_local_palette:Ne,palette_offset:ve,palette_size:pe,data_offset:Ve,data_length:t-Ve,transparent_index:L,interlaced:!!le,delay:E,disposal:C});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return F},this.frameInfo=function(Ce){if(Ce<0||Ce>=w.length)throw new Error("Frame index out of range.");return w[Ce]},this.decodeAndBlitFrameBGRA=function(Ce,Oe){var nt=this.frameInfo(Ce),mt=nt.width*nt.height,ht=new Uint8Array(mt);ub(e,nt.data_offset,ht,mt);var He=nt.palette_offset,ut=nt.transparent_index;ut===null&&(ut=256);var bt=nt.width,Xe=r-bt,We=bt,ke=4*(nt.y*r+nt.x),Re=4*((nt.y+nt.height)*r+nt.x),Pe=ke,dt=4*Xe;nt.interlaced===!0&&(dt+=4*r*7);for(var Et=8,Pt=0,Kt=ht.length;Pt<Kt;++Pt){var $t=ht[Pt];if(We===0&&(We=bt,(Pe+=dt)>=Re&&(dt=4*Xe+4*r*(Et-1),Pe=ke+(bt+Xe)*(Et<<1),Et>>=1)),$t===ut)Pe+=4;else{var br=e[He+3*$t],Gt=e[He+3*$t+1],Rr=e[He+3*$t+2];Oe[Pe++]=Rr,Oe[Pe++]=Gt,Oe[Pe++]=br,Oe[Pe++]=255}--We}},this.decodeAndBlitFrameRGBA=function(Ce,Oe){var nt=this.frameInfo(Ce),mt=nt.width*nt.height,ht=new Uint8Array(mt);ub(e,nt.data_offset,ht,mt);var He=nt.palette_offset,ut=nt.transparent_index;ut===null&&(ut=256);var bt=nt.width,Xe=r-bt,We=bt,ke=4*(nt.y*r+nt.x),Re=4*((nt.y+nt.height)*r+nt.x),Pe=ke,dt=4*Xe;nt.interlaced===!0&&(dt+=4*r*7);for(var Et=8,Pt=0,Kt=ht.length;Pt<Kt;++Pt){var $t=ht[Pt];if(We===0&&(We=bt,(Pe+=dt)>=Re&&(dt=4*Xe+4*r*(Et-1),Pe=ke+(bt+Xe)*(Et<<1),Et>>=1)),$t===ut)Pe+=4;else{var br=e[He+3*$t],Gt=e[He+3*$t+1],Rr=e[He+3*$t+2];Oe[Pe++]=br,Oe[Pe++]=Gt,Oe[Pe++]=Rr,Oe[Pe++]=255}--We}}}function ub(e,t,r,n){for(var o=e[t++],u=1<<o,c=u+1,s=c+1,f=o+1,v=(1<<f)-1,w=0,E=0,L=0,C=e[t++],F=new Int32Array(4096),B=null;;){for(;w<16&&C!==0;)E|=e[t++]<<w,w+=8,C===1?C=e[t++]:--C;if(w<f)break;var G=E&v;if(E>>=f,w-=f,G!==u){if(G===c)break;for(var H=G<s?G:B,Z=0,ee=H;ee>u;)ee=F[ee]>>8,++Z;var Y=ee;if(L+Z+(H!==G?1:0)>n)return void Ma.log("Warning, gif stream longer than expected.");r[L++]=Y;var le=L+=Z;for(H!==G&&(r[L++]=Y),ee=H;Z--;)ee=F[ee],r[--le]=255&ee,ee>>=8;B!==null&&s<4096&&(F[s++]=B<<8|Y,s>=v+1&&f<12&&(++f,v=v<<1|1)),B=G}else s=c+1,v=(1<<(f=o+1))-1,B=null}return L!==n&&Ma.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function cm(e){var t,r,n,o,u,c=Math.floor,s=new Array(64),f=new Array(64),v=new Array(64),w=new Array(64),E=new Array(65535),L=new Array(65535),C=new Array(64),F=new Array(64),B=[],G=0,H=7,Z=new Array(64),ee=new Array(64),Y=new Array(64),le=new Array(256),ce=new Array(2048),ve=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ne=[0,1,2,3,4,5,6,7,8,9,10,11],Ve=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],be=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ce=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Oe=[0,1,2,3,4,5,6,7,8,9,10,11],nt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],mt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ht(ke,Re){for(var Pe=0,dt=0,Et=new Array,Pt=1;Pt<=16;Pt++){for(var Kt=1;Kt<=ke[Pt];Kt++)Et[Re[dt]]=[],Et[Re[dt]][0]=Pe,Et[Re[dt]][1]=Pt,dt++,Pe++;Pe*=2}return Et}function He(ke){for(var Re=ke[0],Pe=ke[1]-1;Pe>=0;)Re&1<<Pe&&(G|=1<<H),Pe--,--H<0&&(G==255?(ut(255),ut(0)):ut(G),H=7,G=0)}function ut(ke){B.push(ke)}function bt(ke){ut(ke>>8&255),ut(255&ke)}function Xe(ke,Re,Pe,dt,Et){for(var Pt,Kt=Et[0],$t=Et[240],br=function(Wt,Ur){var dn,tn,Bn,Jn,ai,_i,hi,yr,Vr,wi,xn=0;for(Vr=0;Vr<8;++Vr){dn=Wt[xn],tn=Wt[xn+1],Bn=Wt[xn+2],Jn=Wt[xn+3],ai=Wt[xn+4],_i=Wt[xn+5],hi=Wt[xn+6];var si=dn+(yr=Wt[xn+7]),fr=dn-yr,or=tn+hi,Yr=tn-hi,un=Bn+_i,Or=Bn-_i,pn=Jn+ai,Qn=Jn-ai,ci=si+pn,Ro=si-pn,gi=or+un,co=or-un;Wt[xn]=ci+gi,Wt[xn+4]=ci-gi;var li=.707106781*(co+Ro);Wt[xn+2]=Ro+li,Wt[xn+6]=Ro-li;var no=.382683433*((ci=Qn+Or)-(co=Yr+fr)),yo=.5411961*ci+no,pi=1.306562965*co+no,Li=.707106781*(gi=Or+Yr),Yo=fr+Li,vn=fr-Li;Wt[xn+5]=vn+yo,Wt[xn+3]=vn-yo,Wt[xn+1]=Yo+pi,Wt[xn+7]=Yo-pi,xn+=8}for(xn=0,Vr=0;Vr<8;++Vr){dn=Wt[xn],tn=Wt[xn+8],Bn=Wt[xn+16],Jn=Wt[xn+24],ai=Wt[xn+32],_i=Wt[xn+40],hi=Wt[xn+48];var ze=dn+(yr=Wt[xn+56]),Ea=dn-yr,ha=tn+hi,ra=tn-hi,we=Bn+_i,_e=Bn-_i,De=Jn+ai,ot=Jn-ai,lt=ze+De,Rt=ze-De,Fe=ha+we,Ht=ha-we;Wt[xn]=lt+Fe,Wt[xn+32]=lt-Fe;var Nt=.707106781*(Ht+Rt);Wt[xn+16]=Rt+Nt,Wt[xn+48]=Rt-Nt;var ir=.382683433*((lt=ot+_e)-(Ht=ra+Ea)),Br=.5411961*lt+ir,nn=1.306562965*Ht+ir,Fr=.707106781*(Fe=_e+ra),Hn=Ea+Fr,Yn=Ea-Fr;Wt[xn+40]=Yn+Br,Wt[xn+24]=Yn-Br,Wt[xn+8]=Hn+nn,Wt[xn+56]=Hn-nn,xn++}for(Vr=0;Vr<64;++Vr)wi=Wt[Vr]*Ur[Vr],C[Vr]=wi>0?wi+.5|0:wi-.5|0;return C}(ke,Re),Gt=0;Gt<64;++Gt)F[ve[Gt]]=br[Gt];var Rr=F[0]-Pe;Pe=F[0],Rr==0?He(dt[0]):(He(dt[L[Pt=32767+Rr]]),He(E[Pt]));for(var Mr=63;Mr>0&&F[Mr]==0;)Mr--;if(Mr==0)return He(Kt),Pe;for(var Kr,Ct=1;Ct<=Mr;){for(var pt=Ct;F[Ct]==0&&Ct<=Mr;)++Ct;var Dr=Ct-pt;if(Dr>=16){Kr=Dr>>4;for(var ln=1;ln<=Kr;++ln)He($t);Dr&=15}Pt=32767+F[Ct],He(Et[(Dr<<4)+L[Pt]]),He(E[Pt]),Ct++}return Mr!=63&&He(Kt),Pe}function We(ke){ke=Math.min(Math.max(ke,1),100),u!=ke&&(function(Re){for(var Pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],dt=0;dt<64;dt++){var Et=c((Pe[dt]*Re+50)/100);Et=Math.min(Math.max(Et,1),255),s[ve[dt]]=Et}for(var Pt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Kt=0;Kt<64;Kt++){var $t=c((Pt[Kt]*Re+50)/100);$t=Math.min(Math.max($t,1),255),f[ve[Kt]]=$t}for(var br=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gt=0,Rr=0;Rr<8;Rr++)for(var Mr=0;Mr<8;Mr++)v[Gt]=1/(s[ve[Gt]]*br[Rr]*br[Mr]*8),w[Gt]=1/(f[ve[Gt]]*br[Rr]*br[Mr]*8),Gt++}(ke<50?Math.floor(5e3/ke):Math.floor(200-2*ke)),u=ke)}this.encode=function(ke,Re){Re&&We(Re),B=new Array,G=0,H=7,bt(65496),bt(65504),bt(16),ut(74),ut(70),ut(73),ut(70),ut(0),ut(1),ut(1),ut(0),bt(1),bt(1),ut(0),ut(0),function(){bt(65499),bt(132),ut(0);for(var tn=0;tn<64;tn++)ut(s[tn]);ut(1);for(var Bn=0;Bn<64;Bn++)ut(f[Bn])}(),function(tn,Bn){bt(65472),bt(17),ut(8),bt(Bn),bt(tn),ut(3),ut(1),ut(17),ut(0),ut(2),ut(17),ut(1),ut(3),ut(17),ut(1)}(ke.width,ke.height),function(){bt(65476),bt(418),ut(0);for(var tn=0;tn<16;tn++)ut(pe[tn+1]);for(var Bn=0;Bn<=11;Bn++)ut(Ne[Bn]);ut(16);for(var Jn=0;Jn<16;Jn++)ut(Ve[Jn+1]);for(var ai=0;ai<=161;ai++)ut(be[ai]);ut(1);for(var _i=0;_i<16;_i++)ut(Ce[_i+1]);for(var hi=0;hi<=11;hi++)ut(Oe[hi]);ut(17);for(var yr=0;yr<16;yr++)ut(nt[yr+1]);for(var Vr=0;Vr<=161;Vr++)ut(mt[Vr])}(),bt(65498),bt(12),ut(3),ut(1),ut(0),ut(2),ut(17),ut(3),ut(17),ut(0),ut(63),ut(0);var Pe=0,dt=0,Et=0;G=0,H=7,this.encode.displayName="_encode_";for(var Pt,Kt,$t,br,Gt,Rr,Mr,Kr,Ct,pt=ke.data,Dr=ke.width,ln=ke.height,Wt=4*Dr,Ur=0;Ur<ln;){for(Pt=0;Pt<Wt;){for(Gt=Wt*Ur+Pt,Mr=-1,Kr=0,Ct=0;Ct<64;Ct++)Rr=Gt+(Kr=Ct>>3)*Wt+(Mr=4*(7&Ct)),Ur+Kr>=ln&&(Rr-=Wt*(Ur+1+Kr-ln)),Pt+Mr>=Wt&&(Rr-=Pt+Mr-Wt+4),Kt=pt[Rr++],$t=pt[Rr++],br=pt[Rr++],Z[Ct]=(ce[Kt]+ce[$t+256>>0]+ce[br+512>>0]>>16)-128,ee[Ct]=(ce[Kt+768>>0]+ce[$t+1024>>0]+ce[br+1280>>0]>>16)-128,Y[Ct]=(ce[Kt+1280>>0]+ce[$t+1536>>0]+ce[br+1792>>0]>>16)-128;Pe=Xe(Z,v,Pe,t,n),dt=Xe(ee,w,dt,r,o),Et=Xe(Y,w,Et,r,o),Pt+=32}Ur+=8}if(H>=0){var dn=[];dn[1]=H+1,dn[0]=(1<<H+1)-1,He(dn)}return bt(65497),new Uint8Array(B)},e=e||50,function(){for(var ke=String.fromCharCode,Re=0;Re<256;Re++)le[Re]=ke(Re)}(),t=ht(pe,Ne),r=ht(Ce,Oe),n=ht(Ve,be),o=ht(nt,mt),function(){for(var ke=1,Re=2,Pe=1;Pe<=15;Pe++){for(var dt=ke;dt<Re;dt++)L[32767+dt]=Pe,E[32767+dt]=[],E[32767+dt][1]=Pe,E[32767+dt][0]=dt;for(var Et=-(Re-1);Et<=-ke;Et++)L[32767+Et]=Pe,E[32767+Et]=[],E[32767+Et][1]=Pe,E[32767+Et][0]=Re-1+Et;ke<<=1,Re<<=1}}(),function(){for(var ke=0;ke<256;ke++)ce[ke]=19595*ke,ce[ke+256>>0]=38470*ke,ce[ke+512>>0]=7471*ke+32768,ce[ke+768>>0]=-11059*ke,ce[ke+1024>>0]=-21709*ke,ce[ke+1280>>0]=32768*ke+8421375,ce[ke+1536>>0]=-27439*ke,ce[ke+1792>>0]=-5329*ke}(),We(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function h0(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cb(e){function t(pe){if(!pe)throw Error("assert :P")}function r(pe,Ne,Ve){for(var be=0;4>be;be++)if(pe[Ne+be]!=Ve.charCodeAt(be))return!0;return!1}function n(pe,Ne,Ve,be,Ce){for(var Oe=0;Oe<Ce;Oe++)pe[Ne+Oe]=Ve[be+Oe]}function o(pe,Ne,Ve,be){for(var Ce=0;Ce<be;Ce++)pe[Ne+Ce]=Ve}function u(pe){return new Int32Array(pe)}function c(pe,Ne){for(var Ve=[],be=0;be<pe;be++)Ve.push(new Ne);return Ve}function s(pe,Ne){var Ve=[];return function be(Ce,Oe,nt){for(var mt=nt[Oe],ht=0;ht<mt&&(Ce.push(nt.length>Oe+1?[]:new Ne),!(nt.length<Oe+1));ht++)be(Ce[ht],Oe+1,nt)}(Ve,0,pe),Ve}var f=function(){var pe=this;function Ne(N,$){for(var re=1<<$-1>>>0;N&re;)re>>>=1;return re?(N&re-1)+re:N}function Ve(N,$,re,fe,Le){t(!(fe%re));do N[$+(fe-=re)]=Le;while(0<fe)}function be(N,$,re,fe,Le){if(t(2328>=Le),512>=Le)var Be=u(512);else if((Be=u(Le))==null)return 0;return function(qe,Ke,it,_t,rr,Er){var kr,hr,fn=Ke,zr=1<<it,zt=u(16),Xt=u(16);for(t(rr!=0),t(_t!=null),t(qe!=null),t(0<it),hr=0;hr<rr;++hr){if(15<_t[hr])return 0;++zt[_t[hr]]}if(zt[0]==rr)return 0;for(Xt[1]=0,kr=1;15>kr;++kr){if(zt[kr]>1<<kr)return 0;Xt[kr+1]=Xt[kr]+zt[kr]}for(hr=0;hr<rr;++hr)kr=_t[hr],0<_t[hr]&&(Er[Xt[kr]++]=hr);if(Xt[15]==1)return(_t=new Ce).g=0,_t.value=Er[0],Ve(qe,fn,1,zr,_t),zr;var Hr,en=-1,Wr=zr-1,On=0,In=1,Ci=1,Fn=1<<it;for(hr=0,kr=1,rr=2;kr<=it;++kr,rr<<=1){if(In+=Ci<<=1,0>(Ci-=zt[kr]))return 0;for(;0<zt[kr];--zt[kr])(_t=new Ce).g=kr,_t.value=Er[hr++],Ve(qe,fn+On,rr,Fn,_t),On=Ne(On,kr)}for(kr=it+1,rr=2;15>=kr;++kr,rr<<=1){if(In+=Ci<<=1,0>(Ci-=zt[kr]))return 0;for(;0<zt[kr];--zt[kr]){if(_t=new Ce,(On&Wr)!=en){for(fn+=Fn,Hr=1<<(en=kr)-it;15>en&&!(0>=(Hr-=zt[en]));)++en,Hr<<=1;zr+=Fn=1<<(Hr=en-it),qe[Ke+(en=On&Wr)].g=Hr+it,qe[Ke+en].value=fn-Ke-en}_t.g=kr-it,_t.value=Er[hr++],Ve(qe,fn+(On>>it),rr,Fn,_t),On=Ne(On,kr)}}return In!=2*Xt[15]-1?0:zr}(N,$,re,fe,Le,Be)}function Ce(){this.value=this.g=0}function Oe(){this.value=this.g=0}function nt(){this.G=c(5,Ce),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Na,Oe)}function mt(N,$,re,fe){t(N!=null),t($!=null),t(2147483648>fe),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=$,N.pa=re,N.Jd=$,N.Yc=re+fe,N.Zc=4<=fe?re+fe-4+1:re,Pt(N)}function ht(N,$){for(var re=0;0<$--;)re|=$t(N,128)<<$;return re}function He(N,$){var re=ht(N,$);return Kt(N)?-re:re}function ut(N,$,re,fe){var Le,Be=0;for(t(N!=null),t($!=null),t(4294967288>fe),N.Sb=fe,N.Ra=0,N.u=0,N.h=0,4<fe&&(fe=4),Le=0;Le<fe;++Le)Be+=$[re+Le]<<8*Le;N.Ra=Be,N.bb=fe,N.oa=$,N.pa=re}function bt(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<Zs-8>>>0,++N.bb,N.u-=8;Pe(N)&&(N.h=1,N.u=0)}function Xe(N,$){if(t(0<=$),!N.h&&$<=Jl){var re=Re(N)&Au[$];return N.u+=$,bt(N),re}return N.h=1,N.u=0}function We(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ke(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Re(N){return N.Ra>>>(N.u&Zs-1)>>>0}function Pe(N){return t(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>Zs}function dt(N,$){N.u=$,N.h=Pe(N)}function Et(N){N.u>=Cl&&(t(N.u>=Cl),bt(N))}function Pt(N){t(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(t(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function Kt(N){return ht(N,1)}function $t(N,$){var re=N.Ca;0>N.b&&Pt(N);var fe=N.b,Le=re*$>>>8,Be=(N.I>>>fe>Le)+0;for(Be?(re-=Le,N.I-=Le+1<<fe>>>0):re=Le+1,fe=re,Le=0;256<=fe;)Le+=8,fe>>=8;return fe=7^Le+Ra[fe],N.b-=fe,N.Ca=(re<<fe)-1,Be}function br(N,$,re){N[$+0]=re>>24&255,N[$+1]=re>>16&255,N[$+2]=re>>8&255,N[$+3]=re>>0&255}function Gt(N,$){return N[$+0]<<0|N[$+1]<<8}function Rr(N,$){return Gt(N,$)|N[$+2]<<16}function Mr(N,$){return Gt(N,$)|Gt(N,$+2)<<16}function Kr(N,$){var re=1<<$;return t(N!=null),t(0<$),N.X=u(re),N.X==null?0:(N.Mb=32-$,N.Xa=$,1)}function Ct(N,$){t(N!=null),t($!=null),t(N.Xa==$.Xa),n($.X,0,N.X,0,1<<$.Xa)}function pt(){this.X=[],this.Xa=this.Mb=0}function Dr(N,$,re,fe){t(re!=null),t(fe!=null);var Le=re[0],Be=fe[0];return Le==0&&(Le=(N*Be+$/2)/$),Be==0&&(Be=($*Le+N/2)/N),0>=Le||0>=Be?0:(re[0]=Le,fe[0]=Be,1)}function ln(N,$){return N+(1<<$)-1>>>$}function Wt(N,$){return((4278255360&N)+(4278255360&$)>>>0&4278255360)+((16711935&N)+(16711935&$)>>>0&16711935)>>>0}function Ur(N,$){pe[$]=function(re,fe,Le,Be,qe,Ke,it){var _t;for(_t=0;_t<qe;++_t){var rr=pe[N](Ke[it+_t-1],Le,Be+_t);Ke[it+_t]=Wt(re[fe+_t],rr)}}}function dn(){this.ud=this.hd=this.jd=0}function tn(N,$){return((4278124286&(N^$))>>>1)+(N&$)>>>0}function Bn(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Jn(N,$){return Bn(N+(N-$+.5>>1))}function ai(N,$,re){return Math.abs($-re)-Math.abs(N-re)}function _i(N,$,re,fe,Le,Be,qe){for(fe=Be[qe-1],re=0;re<Le;++re)Be[qe+re]=fe=Wt(N[$+re],fe)}function hi(N,$,re,fe,Le){var Be;for(Be=0;Be<re;++Be){var qe=N[$+Be],Ke=qe>>8&255,it=16711935&(it=(it=16711935&qe)+((Ke<<16)+Ke));fe[Le+Be]=(4278255360&qe)+it>>>0}}function yr(N,$){$.jd=N>>0&255,$.hd=N>>8&255,$.ud=N>>16&255}function Vr(N,$,re,fe,Le,Be){var qe;for(qe=0;qe<fe;++qe){var Ke=$[re+qe],it=Ke>>>8,_t=Ke,rr=255&(rr=(rr=Ke>>>16)+((N.jd<<24>>24)*(it<<24>>24)>>>5));_t=255&(_t=(_t=_t+((N.hd<<24>>24)*(it<<24>>24)>>>5))+((N.ud<<24>>24)*(rr<<24>>24)>>>5)),Le[Be+qe]=(4278255360&Ke)+(rr<<16)+_t}}function wi(N,$,re,fe,Le){pe[$]=function(Be,qe,Ke,it,_t,rr,Er,kr,hr){for(it=Er;it<kr;++it)for(Er=0;Er<hr;++Er)_t[rr++]=Le(Ke[fe(Be[qe++])])},pe[N]=function(Be,qe,Ke,it,_t,rr,Er){var kr=8>>Be.b,hr=Be.Ea,fn=Be.K[0],zr=Be.w;if(8>kr)for(Be=(1<<Be.b)-1,zr=(1<<kr)-1;qe<Ke;++qe){var zt,Xt=0;for(zt=0;zt<hr;++zt)zt&Be||(Xt=fe(it[_t++])),rr[Er++]=Le(fn[Xt&zr]),Xt>>=kr}else pe["VP8LMapColor"+re](it,_t,fn,zr,rr,Er,qe,Ke,hr)}}function xn(N,$,re,fe,Le){for(re=$+re;$<re;){var Be=N[$++];fe[Le++]=Be>>16&255,fe[Le++]=Be>>8&255,fe[Le++]=Be>>0&255}}function si(N,$,re,fe,Le){for(re=$+re;$<re;){var Be=N[$++];fe[Le++]=Be>>16&255,fe[Le++]=Be>>8&255,fe[Le++]=Be>>0&255,fe[Le++]=Be>>24&255}}function fr(N,$,re,fe,Le){for(re=$+re;$<re;){var Be=(qe=N[$++])>>16&240|qe>>12&15,qe=qe>>0&240|qe>>28&15;fe[Le++]=Be,fe[Le++]=qe}}function or(N,$,re,fe,Le){for(re=$+re;$<re;){var Be=(qe=N[$++])>>16&248|qe>>13&7,qe=qe>>5&224|qe>>3&31;fe[Le++]=Be,fe[Le++]=qe}}function Yr(N,$,re,fe,Le){for(re=$+re;$<re;){var Be=N[$++];fe[Le++]=Be>>0&255,fe[Le++]=Be>>8&255,fe[Le++]=Be>>16&255}}function un(N,$,re,fe,Le,Be){if(Be==0)for(re=$+re;$<re;)br(fe,((Be=N[$++])[0]>>24|Be[1]>>8&65280|Be[2]<<8&16711680|Be[3]<<24)>>>0),Le+=32;else n(fe,Le,N,$,re)}function Or(N,$){pe[$][0]=pe[N+"0"],pe[$][1]=pe[N+"1"],pe[$][2]=pe[N+"2"],pe[$][3]=pe[N+"3"],pe[$][4]=pe[N+"4"],pe[$][5]=pe[N+"5"],pe[$][6]=pe[N+"6"],pe[$][7]=pe[N+"7"],pe[$][8]=pe[N+"8"],pe[$][9]=pe[N+"9"],pe[$][10]=pe[N+"10"],pe[$][11]=pe[N+"11"],pe[$][12]=pe[N+"12"],pe[$][13]=pe[N+"13"],pe[$][14]=pe[N+"0"],pe[$][15]=pe[N+"0"]}function pn(N){return N==Ho||N==Is||N==Su||N==Oc}function Qn(){this.eb=[],this.size=this.A=this.fb=0}function ci(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ro(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qn,this.f.kb=new ci,this.sd=null}function gi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function co(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function li(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function no(N,$){var re=N.T,fe=$.ba.f.RGBA,Le=fe.eb,Be=fe.fb+N.ka*fe.A,qe=q[$.ba.S],Ke=N.y,it=N.O,_t=N.f,rr=N.N,Er=N.ea,kr=N.W,hr=$.cc,fn=$.dc,zr=$.Mc,zt=$.Nc,Xt=N.ka,Hr=N.ka+N.T,en=N.U,Wr=en+1>>1;for(Xt==0?qe(Ke,it,null,null,_t,rr,Er,kr,_t,rr,Er,kr,Le,Be,null,null,en):(qe($.ec,$.fc,Ke,it,hr,fn,zr,zt,_t,rr,Er,kr,Le,Be-fe.A,Le,Be,en),++re);Xt+2<Hr;Xt+=2)hr=_t,fn=rr,zr=Er,zt=kr,rr+=N.Rc,kr+=N.Rc,Be+=2*fe.A,qe(Ke,(it+=2*N.fa)-N.fa,Ke,it,hr,fn,zr,zt,_t,rr,Er,kr,Le,Be-fe.A,Le,Be,en);return it+=N.fa,N.j+Hr<N.o?(n($.ec,$.fc,Ke,it,en),n($.cc,$.dc,_t,rr,Wr),n($.Mc,$.Nc,Er,kr,Wr),re--):1&Hr||qe(Ke,it,null,null,_t,rr,Er,kr,_t,rr,Er,kr,Le,Be+fe.A,null,null,en),re}function yo(N,$,re){var fe=N.F,Le=[N.J];if(fe!=null){var Be=N.U,qe=$.ba.S,Ke=qe==ru||qe==Su;$=$.ba.f.RGBA;var it=[0],_t=N.ka;it[0]=N.T,N.Kb&&(_t==0?--it[0]:(--_t,Le[0]-=N.width),N.j+N.ka+N.T==N.o&&(it[0]=N.o-N.j-_t));var rr=$.eb;_t=$.fb+_t*$.A,N=Ju(fe,Le[0],N.width,Be,it,rr,_t+(Ke?0:3),$.A),t(re==it),N&&pn(qe)&&Ss(rr,_t,Ke,Be,it,$.A)}return 0}function pi(N){var $=N.ma,re=$.ba.S,fe=11>re,Le=re==mc||re==tu||re==ru||re==ho||re==12||pn(re);if($.memory=null,$.Ib=null,$.Jb=null,$.Nd=null,!Sl($.Oa,N,Le?11:12))return 0;if(Le&&pn(re)&&gn(),N.da)alert("todo:use_scaling");else{if(fe){if($.Ib=li,N.Kb){if(re=N.U+1>>1,$.memory=u(N.U+2*re),$.memory==null)return 0;$.ec=$.memory,$.fc=0,$.cc=$.ec,$.dc=$.fc+N.U,$.Mc=$.cc,$.Nc=$.dc+re,$.Ib=no,gn()}}else alert("todo:EmitYUV");Le&&($.Jb=yo,fe&&ur())}if(fe&&!Dt){for(N=0;256>N;++N)Lr[N]=89858*(N-128)+vt>>St,Gr[N]=-22014*(N-128)+vt,Zr[N]=-45773*(N-128),Ir[N]=113618*(N-128)+vt>>St;for(N=xt;N<tr;++N)$=76283*(N-16)+vt>>St,mn[N-xt]=za($,255),qr[N-xt]=za($+8>>4,15);Dt=1}return 1}function Li(N){var $=N.ma,re=N.U,fe=N.T;return t(!(1&N.ka)),0>=re||0>=fe?0:(re=$.Ib(N,$),$.Jb!=null&&$.Jb(N,$,re),$.Dc+=re,1)}function Yo(N){N.ma.memory=null}function vn(N,$,re,fe){return Xe(N,8)!=47?0:($[0]=Xe(N,14)+1,re[0]=Xe(N,14)+1,fe[0]=Xe(N,1),Xe(N,3)!=0?0:!N.h)}function ze(N,$){if(4>N)return N+1;var re=N-2>>1;return(2+(1&N)<<re)+Xe($,re)+1}function Ea(N,$){return 120<$?$-120:1<=(re=((re=oi[$-1])>>4)*N+(8-(15&re)))?re:1;var re}function ha(N,$,re){var fe=Re(re),Le=N[$+=255&fe].g-8;return 0<Le&&(dt(re,re.u+8),fe=Re(re),$+=N[$].value,$+=fe&(1<<Le)-1),dt(re,re.u+N[$].g),N[$].value}function ra(N,$,re){return re.g+=N.g,re.value+=N.value<<$>>>0,t(8>=re.g),N.g}function we(N,$,re){var fe=N.xc;return t(($=fe==0?0:N.vc[N.md*(re>>fe)+($>>fe)])<N.Wb),N.Ya[$]}function _e(N,$,re,fe){var Le=N.ab,Be=N.c*$,qe=N.C;$=qe+$;var Ke=re,it=fe;for(fe=N.Ta,re=N.Ua;0<Le--;){var _t=N.gc[Le],rr=qe,Er=$,kr=Ke,hr=it,fn=(it=fe,Ke=re,_t.Ea);switch(t(rr<Er),t(Er<=_t.nc),_t.hc){case 2:Il(kr,hr,(Er-rr)*fn,it,Ke);break;case 0:var zr=rr,zt=Er,Xt=it,Hr=Ke,en=(Fn=_t).Ea;zr==0&&(Kl(kr,hr,null,null,1,Xt,Hr),_i(kr,hr+1,0,0,en-1,Xt,Hr+1),hr+=en,Hr+=en,++zr);for(var Wr=1<<Fn.b,On=Wr-1,In=ln(en,Fn.b),Ci=Fn.K,Fn=Fn.w+(zr>>Fn.b)*In;zr<zt;){var Co=Ci,Po=Fn,ao=1;for(Xs(kr,hr,Xt,Hr-en,1,Xt,Hr);ao<en;){var Gi=(ao&~On)+Wr;Gi>en&&(Gi=en),(0,Tl[Co[Po++]>>8&15])(kr,hr+ +ao,Xt,Hr+ao-en,Gi-ao,Xt,Hr+ao),ao=Gi}hr+=en,Hr+=en,++zr&On||(Fn+=In)}Er!=_t.nc&&n(it,Ke-fn,it,Ke+(Er-rr-1)*fn,fn);break;case 1:for(fn=kr,zt=hr,en=(kr=_t.Ea)-(Hr=kr&~(Xt=(hr=1<<_t.b)-1)),zr=ln(kr,_t.b),Wr=_t.K,_t=_t.w+(rr>>_t.b)*zr;rr<Er;){for(On=Wr,In=_t,Ci=new dn,Fn=zt+Hr,Co=zt+kr;zt<Fn;)yr(On[In++],Ci),Ga(Ci,fn,zt,hr,it,Ke),zt+=hr,Ke+=hr;zt<Co&&(yr(On[In++],Ci),Ga(Ci,fn,zt,en,it,Ke),zt+=en,Ke+=en),++rr&Xt||(_t+=zr)}break;case 3:if(kr==it&&hr==Ke&&0<_t.b){for(zt=it,kr=fn=Ke+(Er-rr)*fn-(Hr=(Er-rr)*ln(_t.Ea,_t.b)),hr=it,Xt=Ke,zr=[],Hr=(en=Hr)-1;0<=Hr;--Hr)zr[Hr]=hr[Xt+Hr];for(Hr=en-1;0<=Hr;--Hr)zt[kr+Hr]=zr[Hr];is(_t,rr,Er,it,fn,it,Ke)}else is(_t,rr,Er,kr,hr,it,Ke)}Ke=fe,it=re}it!=re&&n(fe,re,Ke,it,Be)}function De(N,$){var re=N.V,fe=N.Ba+N.c*N.C,Le=$-N.C;if(t($<=N.l.o),t(16>=Le),0<Le){var Be=N.l,qe=N.Ta,Ke=N.Ua,it=Be.width;if(_e(N,Le,re,fe),Le=Ke=[Ke],t((re=N.C)<(fe=$)),t(Be.v<Be.va),fe>Be.o&&(fe=Be.o),re<Be.j){var _t=Be.j-re;re=Be.j,Le[0]+=_t*it}if(re>=fe?re=0:(Le[0]+=4*Be.v,Be.ka=re-Be.j,Be.U=Be.va-Be.v,Be.T=fe-re,re=1),re){if(Ke=Ke[0],11>(re=N.ca).S){var rr=re.f.RGBA,Er=(fe=re.S,Le=Be.U,Be=Be.T,_t=rr.eb,rr.A),kr=Be;for(rr=rr.fb+N.Ma*rr.A;0<kr--;){var hr=qe,fn=Ke,zr=Le,zt=_t,Xt=rr;switch(fe){case Ys:Rs(hr,fn,zr,zt,Xt);break;case mc:Os(hr,fn,zr,zt,Xt);break;case Ho:Os(hr,fn,zr,zt,Xt),Ss(zt,Xt,0,zr,1,0);break;case eu:Fs(hr,fn,zr,zt,Xt);break;case tu:un(hr,fn,zr,zt,Xt,1);break;case Is:un(hr,fn,zr,zt,Xt,1),Ss(zt,Xt,0,zr,1,0);break;case ru:un(hr,fn,zr,zt,Xt,0);break;case Su:un(hr,fn,zr,zt,Xt,0),Ss(zt,Xt,1,zr,1,0);break;case ho:Ya(hr,fn,zr,zt,Xt);break;case Oc:Ya(hr,fn,zr,zt,Xt),Yu(zt,Xt,zr,1,0);break;case Cs:sa(hr,fn,zr,zt,Xt);break;default:t(0)}Ke+=it,rr+=Er}N.Ma+=Be}else alert("todo:EmitRescaledRowsYUVA");t(N.Ma<=re.height)}}N.C=$,t(N.C<=N.i)}function ot(N){var $;if(0<N.ua)return 0;for($=0;$<N.Wb;++$){var re=N.Ya[$].G,fe=N.Ya[$].H;if(0<re[1][fe[1]+0].g||0<re[2][fe[2]+0].g||0<re[3][fe[3]+0].g)return 0}return 1}function lt(N,$,re,fe,Le,Be){if(N.Z!=0){var qe=N.qd,Ke=N.rd;for(t(D[N.Z]!=null);$<re;++$)D[N.Z](qe,Ke,fe,Le,fe,Le,Be),qe=fe,Ke=Le,Le+=Be;N.qd=qe,N.rd=Ke}}function Rt(N,$){var re=N.l.ma,fe=re.Z==0||re.Z==1?N.l.j:N.C;if(fe=N.C<fe?fe:N.C,t($<=N.l.o),$>fe){var Le=N.l.width,Be=re.ca,qe=re.tb+Le*fe,Ke=N.V,it=N.Ba+N.c*fe,_t=N.gc;t(N.ab==1),t(_t[0].hc==3),pc(_t[0],fe,$,Ke,it,Be,qe),lt(re,fe,$,Be,qe,Le)}N.C=N.Ma=$}function Fe(N,$,re,fe,Le,Be,qe){var Ke=N.$/fe,it=N.$%fe,_t=N.m,rr=N.s,Er=re+N.$,kr=Er;Le=re+fe*Le;var hr=re+fe*Be,fn=280+rr.ua,zr=N.Pb?Ke:16777216,zt=0<rr.ua?rr.Wa:null,Xt=rr.wc,Hr=Er<hr?we(rr,it,Ke):null;t(N.C<Be),t(hr<=Le);var en=!1;e:for(;;){for(;en||Er<hr;){var Wr=0;if(Ke>=zr){var On=Er-re;t((zr=N).Pb),zr.wd=zr.m,zr.xd=On,0<zr.s.ua&&Ct(zr.s.Wa,zr.s.vb),zr=Ke+Oa}if(it&Xt||(Hr=we(rr,it,Ke)),t(Hr!=null),Hr.Qb&&($[Er]=Hr.qb,en=!0),!en)if(Et(_t),Hr.jc){Wr=_t,On=$;var In=Er,Ci=Hr.pd[Re(Wr)&Na-1];t(Hr.jc),256>Ci.g?(dt(Wr,Wr.u+Ci.g),On[In]=Ci.value,Wr=0):(dt(Wr,Wr.u+Ci.g-256),t(256<=Ci.value),Wr=Ci.value),Wr==0&&(en=!0)}else Wr=ha(Hr.G[0],Hr.H[0],_t);if(_t.h)break;if(en||256>Wr){if(!en)if(Hr.nd)$[Er]=(Hr.qb|Wr<<8)>>>0;else{if(Et(_t),en=ha(Hr.G[1],Hr.H[1],_t),Et(_t),On=ha(Hr.G[2],Hr.H[2],_t),In=ha(Hr.G[3],Hr.H[3],_t),_t.h)break;$[Er]=(In<<24|en<<16|Wr<<8|On)>>>0}if(en=!1,++Er,++it>=fe&&(it=0,++Ke,qe!=null&&Ke<=Be&&!(Ke%16)&&qe(N,Ke),zt!=null))for(;kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr}else if(280>Wr){if(Wr=ze(Wr-256,_t),On=ha(Hr.G[4],Hr.H[4],_t),Et(_t),On=Ea(fe,On=ze(On,_t)),_t.h)break;if(Er-re<On||Le-Er<Wr)break e;for(In=0;In<Wr;++In)$[Er+In]=$[Er+In-On];for(Er+=Wr,it+=Wr;it>=fe;)it-=fe,++Ke,qe!=null&&Ke<=Be&&!(Ke%16)&&qe(N,Ke);if(t(Er<=Le),it&Xt&&(Hr=we(rr,it,Ke)),zt!=null)for(;kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr}else{if(!(Wr<fn))break e;for(en=Wr-280,t(zt!=null);kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr;Wr=Er,t(!(en>>>(On=zt).Xa)),$[Wr]=On.X[en],en=!0}en||t(_t.h==Pe(_t))}if(N.Pb&&_t.h&&Er<Le)t(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Ct(N.s.vb,N.s.Wa);else{if(_t.h)break e;qe!=null&&qe(N,Ke>Be?Be:Ke),N.a=0,N.$=Er-re}return 1}return N.a=3,0}function Ht(N){t(N!=null),N.vc=null,N.yc=null,N.Ya=null;var $=N.Wa;$!=null&&($.X=null),N.vb=null,t(N!=null)}function Nt(){var N=new Wu;return N==null?null:(N.a=0,N.xb=I,Or("Predictor","VP8LPredictors"),Or("Predictor","VP8LPredictors_C"),Or("PredictorAdd","VP8LPredictorsAdd"),Or("PredictorAdd","VP8LPredictorsAdd_C"),Il=hi,Ga=Vr,Rs=xn,Os=si,Ya=fr,sa=or,Fs=Yr,pe.VP8LMapColor32b=Ll,pe.VP8LMapColor8b=zc,N)}function ir(N,$,re,fe,Le){var Be=1,qe=[N],Ke=[$],it=fe.m,_t=fe.s,rr=null,Er=0;e:for(;;){if(re)for(;Be&&Xe(it,1);){var kr=qe,hr=Ke,fn=fe,zr=1,zt=fn.m,Xt=fn.gc[fn.ab],Hr=Xe(zt,2);if(fn.Oc&1<<Hr)Be=0;else{switch(fn.Oc|=1<<Hr,Xt.hc=Hr,Xt.Ea=kr[0],Xt.nc=hr[0],Xt.K=[null],++fn.ab,t(4>=fn.ab),Hr){case 0:case 1:Xt.b=Xe(zt,3)+2,zr=ir(ln(Xt.Ea,Xt.b),ln(Xt.nc,Xt.b),0,fn,Xt.K),Xt.K=Xt.K[0];break;case 3:var en,Wr=Xe(zt,8)+1,On=16<Wr?0:4<Wr?1:2<Wr?2:3;if(kr[0]=ln(Xt.Ea,On),Xt.b=On,en=zr=ir(Wr,1,0,fn,Xt.K)){var In,Ci=Wr,Fn=Xt,Co=1<<(8>>Fn.b),Po=u(Co);if(Po==null)en=0;else{var ao=Fn.K[0],Gi=Fn.w;for(Po[0]=Fn.K[0][0],In=1;In<1*Ci;++In)Po[In]=Wt(ao[Gi+In],Po[In-1]);for(;In<4*Co;++In)Po[In]=0;Fn.K[0]=null,Fn.K[0]=Po,en=1}}zr=en;break;case 2:break;default:t(0)}Be=zr}}if(qe=qe[0],Ke=Ke[0],Be&&Xe(it,1)&&!(Be=1<=(Er=Xe(it,4))&&11>=Er)){fe.a=3;break e}var Eo;if(Eo=Be)t:{var Mo,Qi,Fa,Fi=fe,pa=qe,Ha=Ke,vo=Er,ya=re,Ba=Fi.m,Wa=Fi.s,Wo=[null],ss=1,Bs=0,$o=vi[vo];r:for(;;){if(ya&&Xe(Ba,1)){var Ia=Xe(Ba,3)+2,nu=ln(pa,Ia),js=ln(Ha,Ia),Ks=nu*js;if(!ir(nu,js,0,Fi,Wo))break r;for(Wo=Wo[0],Wa.xc=Ia,Mo=0;Mo<Ks;++Mo){var Qs=Wo[Mo]>>8&65535;Wo[Mo]=Qs,Qs>=ss&&(ss=Qs+1)}}if(Ba.h)break r;for(Qi=0;5>Qi;++Qi){var da=x0[Qi];!Qi&&0<vo&&(da+=1<<vo),Bs<da&&(Bs=da)}var k0=c(ss*$o,Ce),H0=ss,zl=c(H0,nt);if(zl==null)var fa=null;else t(65536>=H0),fa=zl;var yc=u(Bs);if(fa==null||yc==null||k0==null){Fi.a=1;break r}var A0=k0;for(Mo=Fa=0;Mo<ss;++Mo){var Us=fa[Mo],qs=Us.G,iu=Us.H,Qu=0,E0=1,vc=0;for(Qi=0;5>Qi;++Qi){da=x0[Qi],qs[Qi]=A0,iu[Qi]=Fa,!Qi&&0<vo&&(da+=1<<vo);n:{var _c,bc=da,wc=Fi,Bc=yc,hs=A0,Ja=Fa,La=0,ou=wc.m,n0=Xe(ou,1);if(o(Bc,0,0,bc),n0){var ul=Xe(ou,1)+1,W0=Xe(ou,1),S0=Xe(ou,W0==0?1:8);Bc[S0]=1,ul==2&&(Bc[S0=Xe(ou,8)]=1);var i0=1}else{var va=u(19),Z0=Xe(ou,4)+4;if(19<Z0){wc.a=3;var ue=0;break n}for(_c=0;_c<Z0;++_c)va[gc[_c]]=Xe(ou,3);var xe=void 0,$e=void 0,kt=wc,nr=va,sr=bc,Zt=Bc,_r=0,Cr=kt.m,on=8,yn=c(128,Ce);o:for(;be(yn,0,7,nr,19);){if(Xe(Cr,1)){var ei=2+2*Xe(Cr,3);if((xe=2+Xe(Cr,ei))>sr)break o}else xe=sr;for($e=0;$e<sr&&xe--;){Et(Cr);var _n=yn[0+(127&Re(Cr))];dt(Cr,Cr.u+_n.g);var ti=_n.value;if(16>ti)Zt[$e++]=ti,ti!=0&&(on=ti);else{var ui=ti==16,Hi=ti-16,so=sl[Hi],_o=Xe(Cr,Cu[Hi])+so;if($e+_o>sr)break o;for(var Uo=ui?on:0;0<_o--;)Zt[$e++]=Uo}}_r=1;break o}_r||(kt.a=3),i0=_r}(i0=i0&&!ou.h)&&(La=be(hs,Ja,8,Bc,bc)),i0&&La!=0?ue=La:(wc.a=3,ue=0)}if(ue==0)break r;if(E0&&ll[Qi]==1&&(E0=A0[Fa].g==0),Qu+=A0[Fa].g,Fa+=ue,3>=Qi){var Ta,ja=yc[0];for(Ta=1;Ta<da;++Ta)yc[Ta]>ja&&(ja=yc[Ta]);vc+=ja}}if(Us.nd=E0,Us.Qb=0,E0&&(Us.qb=(qs[3][iu[3]+0].value<<24|qs[1][iu[1]+0].value<<16|qs[2][iu[2]+0].value)>>>0,Qu==0&&256>qs[0][iu[0]+0].value&&(Us.Qb=1,Us.qb+=qs[0][iu[0]+0].value<<8)),Us.jc=!Us.Qb&&6>vc,Us.jc){var ta,eo=Us;for(ta=0;ta<Na;++ta){var bn=ta,bi=eo.pd[bn],lo=eo.G[0][eo.H[0]+bn];256<=lo.value?(bi.g=lo.g+256,bi.value=lo.value):(bi.g=0,bi.value=0,bn>>=ra(lo,8,bi),bn>>=ra(eo.G[1][eo.H[1]+bn],16,bi),bn>>=ra(eo.G[2][eo.H[2]+bn],0,bi),ra(eo.G[3][eo.H[3]+bn],24,bi))}}}Wa.vc=Wo,Wa.Wb=ss,Wa.Ya=fa,Wa.yc=k0,Eo=1;break t}Eo=0}if(!(Be=Eo)){fe.a=3;break e}if(0<Er){if(_t.ua=1<<Er,!Kr(_t.Wa,Er)){fe.a=1,Be=0;break e}}else _t.ua=0;var Wi=fe,Ka=qe,Pi=Ke,uo=Wi.s,Do=uo.xc;if(Wi.c=Ka,Wi.i=Pi,uo.md=ln(Ka,Do),uo.wc=Do==0?-1:(1<<Do)-1,re){fe.xb=k;break e}if((rr=u(qe*Ke))==null){fe.a=1,Be=0;break e}Be=(Be=Fe(fe,rr,0,qe,Ke,Ke,null))&&!it.h;break e}return Be?(Le!=null?Le[0]=rr:(t(rr==null),t(re)),fe.$=0,re||Ht(_t)):Ht(_t),Be}function Br(N,$){var re=N.c*N.i,fe=re+$+16*$;return t(N.c<=$),N.V=u(fe),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+re+$,1)}function nn(N,$){var re=N.C,fe=$-re,Le=N.V,Be=N.Ba+N.c*re;for(t($<=N.l.o);0<fe;){var qe=16<fe?16:fe,Ke=N.l.ma,it=N.l.width,_t=it*qe,rr=Ke.ca,Er=Ke.tb+it*re,kr=N.Ta,hr=N.Ua;_e(N,qe,Le,Be),Nc(kr,hr,rr,Er,_t),lt(Ke,re,re+qe,rr,Er,it),fe-=qe,Le+=qe*N.c,re+=qe}t(re==$),N.C=N.Ma=$}function Fr(){this.ub=this.yd=this.td=this.Rb=0}function Hn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yn(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function sn(){this.Yb=function(){var N=[];return function $(re,fe,Le){for(var Be=Le[fe],qe=0;qe<Be&&(re.push(Le.length>fe+1?[]:0),!(Le.length<fe+1));qe++)$(re[qe],fe+1,Le)}(N,0,[3,11]),N}()}function yi(){this.jb=u(3),this.Wc=s([4,8],sn),this.Xc=s([4,17],sn)}function Ai(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Yi(){this.ld=this.La=this.dd=this.tc=0}function Ii(){this.Na=this.la=0}function Vi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function io(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yi),this.Y=0,this.ya=Array(new io),this.aa=0,this.l=new Ko}function Jo(){this.y=u(16),this.f=u(8),this.ea=u(8)}function So(){this.cb=this.a=0,this.sc="",this.m=new We,this.Od=new Fr,this.Kc=new Hn,this.ed=new Ai,this.Qa=new Yn,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,We),this.ia=0,this.pb=c(4,Vi),this.Pa=new yi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jo),this.Hd=0,this.rb=Array(new Ii),this.sb=0,this.wa=Array(new Yi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new io),this.L=this.aa=0,this.gd=s([4,2],Yi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ko(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gl(){var N=new So;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,jo||(jo=bl)),N}function na(N,$,re){return N.a==0&&(N.a=$,N.sc=re,N.cb=0),0}function Ao(N,$,re){return 3<=re&&N[$+0]==157&&N[$+1]==1&&N[$+2]==42}function _l(N,$){if(N==null)return 0;if(N.a=0,N.sc="OK",$==null)return na(N,2,"null VP8Io passed to VP8GetHeaders()");var re=$.data,fe=$.w,Le=$.ha;if(4>Le)return na(N,7,"Truncated header.");var Be=re[fe+0]|re[fe+1]<<8|re[fe+2]<<16,qe=N.Od;if(qe.Rb=!(1&Be),qe.td=Be>>1&7,qe.yd=Be>>4&1,qe.ub=Be>>5,3<qe.td)return na(N,3,"Incorrect keyframe parameters.");if(!qe.yd)return na(N,4,"Frame not displayable.");fe+=3,Le-=3;var Ke=N.Kc;if(qe.Rb){if(7>Le)return na(N,7,"cannot parse picture header");if(!Ao(re,fe,Le))return na(N,3,"Bad code word");Ke.c=16383&(re[fe+4]<<8|re[fe+3]),Ke.Td=re[fe+4]>>6,Ke.i=16383&(re[fe+6]<<8|re[fe+5]),Ke.Ud=re[fe+6]>>6,fe+=7,Le-=7,N.za=Ke.c+15>>4,N.Ub=Ke.i+15>>4,$.width=Ke.c,$.height=Ke.i,$.Da=0,$.j=0,$.v=0,$.va=$.width,$.o=$.height,$.da=0,$.ib=$.width,$.hb=$.height,$.U=$.width,$.T=$.height,o((Be=N.Pa).jb,0,255,Be.jb.length),t((Be=N.Qa)!=null),Be.Cb=0,Be.Bb=0,Be.Fb=1,o(Be.Zb,0,0,Be.Zb.length),o(Be.Lb,0,0,Be.Lb)}if(qe.ub>Le)return na(N,7,"bad partition length");mt(Be=N.m,re,fe,qe.ub),fe+=qe.ub,Le-=qe.ub,qe.Rb&&(Ke.Ld=Kt(Be),Ke.Kd=Kt(Be)),Ke=N.Qa;var it,_t=N.Pa;if(t(Be!=null),t(Ke!=null),Ke.Cb=Kt(Be),Ke.Cb){if(Ke.Bb=Kt(Be),Kt(Be)){for(Ke.Fb=Kt(Be),it=0;4>it;++it)Ke.Zb[it]=Kt(Be)?He(Be,7):0;for(it=0;4>it;++it)Ke.Lb[it]=Kt(Be)?He(Be,6):0}if(Ke.Bb)for(it=0;3>it;++it)_t.jb[it]=Kt(Be)?ht(Be,8):255}else Ke.Bb=0;if(Be.Ka)return na(N,3,"cannot parse segment header");if((Ke=N.ed).zd=Kt(Be),Ke.Tb=ht(Be,6),Ke.wb=ht(Be,3),Ke.Pc=Kt(Be),Ke.Pc&&Kt(Be)){for(_t=0;4>_t;++_t)Kt(Be)&&(Ke.vd[_t]=He(Be,6));for(_t=0;4>_t;++_t)Kt(Be)&&(Ke.od[_t]=He(Be,6))}if(N.L=Ke.Tb==0?0:Ke.zd?1:2,Be.Ka)return na(N,3,"cannot parse filter header");var rr=Le;if(Le=it=fe,fe=it+rr,Ke=rr,N.Xb=(1<<ht(N.m,2))-1,rr<3*(_t=N.Xb))re=7;else{for(it+=3*_t,Ke-=3*_t,rr=0;rr<_t;++rr){var Er=re[Le+0]|re[Le+1]<<8|re[Le+2]<<16;Er>Ke&&(Er=Ke),mt(N.Jc[+rr],re,it,Er),it+=Er,Ke-=Er,Le+=3}mt(N.Jc[+_t],re,it,Ke),re=it<fe?0:5}if(re!=0)return na(N,re,"cannot parse partitions");for(re=ht(it=N.m,7),Le=Kt(it)?He(it,4):0,fe=Kt(it)?He(it,4):0,Ke=Kt(it)?He(it,4):0,_t=Kt(it)?He(it,4):0,it=Kt(it)?He(it,4):0,rr=N.Qa,Er=0;4>Er;++Er){if(rr.Cb){var kr=rr.Zb[Er];rr.Fb||(kr+=re)}else{if(0<Er){N.pb[Er]=N.pb[0];continue}kr=re}var hr=N.pb[Er];hr.Sc[0]=Ku[za(kr+Le,127)],hr.Sc[1]=wa[za(kr+0,127)],hr.Eb[0]=2*Ku[za(kr+fe,127)],hr.Eb[1]=101581*wa[za(kr+Ke,127)]>>16,8>hr.Eb[1]&&(hr.Eb[1]=8),hr.Qc[0]=Ku[za(kr+_t,117)],hr.Qc[1]=wa[za(kr+it,127)],hr.lc=kr+it}if(!qe.Rb)return na(N,4,"Not a key frame.");for(Kt(Be),qe=N.Pa,re=0;4>re;++re){for(Le=0;8>Le;++Le)for(fe=0;3>fe;++fe)for(Ke=0;11>Ke;++Ke)_t=$t(Be,xa[re][Le][fe][Ke])?ht(Be,8):Dl[re][Le][fe][Ke],qe.Wc[re][Le].Yb[fe][Ke]=_t;for(Le=0;17>Le;++Le)qe.Xc[re][Le]=qe.Wc[re][Fc[Le]]}return N.kc=Kt(Be),N.kc&&(N.Bd=ht(Be,8)),N.cb=1}function bl(N,$,re,fe,Le,Be,qe){var Ke=$[Le].Yb[re];for(re=0;16>Le;++Le){if(!$t(N,Ke[re+0]))return Le;for(;!$t(N,Ke[re+1]);)if(Ke=$[++Le].Yb[0],re=0,Le==16)return 16;var it=$[Le+1].Yb;if($t(N,Ke[re+2])){var _t=N,rr=0;if($t(_t,(kr=Ke)[(Er=re)+3]))if($t(_t,kr[Er+6])){for(Ke=0,Er=2*(rr=$t(_t,kr[Er+8]))+(kr=$t(_t,kr[Er+9+rr])),rr=0,kr=Ml[Er];kr[Ke];++Ke)rr+=rr+$t(_t,kr[Ke]);rr+=3+(8<<Er)}else $t(_t,kr[Er+7])?(rr=7+2*$t(_t,165),rr+=$t(_t,145)):rr=5+$t(_t,159);else rr=$t(_t,kr[Er+4])?3+$t(_t,kr[Er+5]):2;Ke=it[2]}else rr=1,Ke=it[1];it=qe+Js[Le],0>(_t=N).b&&Pt(_t);var Er,kr=_t.b,hr=(Er=_t.Ca>>1)-(_t.I>>kr)>>31;--_t.b,_t.Ca+=hr,_t.Ca|=1,_t.I-=(Er+1&hr)<<kr,Be[it]=((rr^hr)-hr)*fe[(0<Le)+0]}return 16}function vs(N){var $=N.rb[N.sb-1];$.la=0,$.Na=0,o(N.zc,0,0,N.zc.length),N.ja=0}function Hl(N,$){if(N==null)return 0;if($==null)return na(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!_l(N,$))return 0;if(t(N.cb),$.ac==null||$.ac($)){$.ob&&(N.L=0);var re=En[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=$.v-re>>4,N.zb=$.j-re>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=$.o+15+re>>4,N.Hb=$.va+15+re>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var fe=N.ed;for(re=0;4>re;++re){var Le;if(N.Qa.Cb){var Be=N.Qa.Lb[re];N.Qa.Fb||(Be+=fe.Tb)}else Be=fe.Tb;for(Le=0;1>=Le;++Le){var qe=N.gd[re][Le],Ke=Be;if(fe.Pc&&(Ke+=fe.vd[0],Le&&(Ke+=fe.od[0])),0<(Ke=0>Ke?0:63<Ke?63:Ke)){var it=Ke;0<fe.wb&&(it=4<fe.wb?it>>2:it>>1)>9-fe.wb&&(it=9-fe.wb),1>it&&(it=1),qe.dd=it,qe.tc=2*Ke+it,qe.ld=40<=Ke?2:15<=Ke?1:0}else qe.tc=0;qe.La=Le}}}re=0}else na(N,6,"Frame setup failed"),re=N.a;if(re=re==0){if(re){N.$c=0,0<N.Aa||(N.Ic=Ti);e:{re=N.Ic,fe=4*(it=N.za);var _t=32*it,rr=it+1,Er=0<N.L?it*(0<N.Aa?2:1):0,kr=(N.Aa==2?2:1)*it;if((qe=fe+832+(Le=3*(16*re+En[N.L])/2*_t)+(Be=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=qe)re=0;else{if(qe>N.Vb){if(N.Vb=0,N.Ec=u(qe),N.Fc=0,N.Ec==null){re=na(N,1,"no memory during frame initialization.");break e}N.Vb=qe}qe=N.Ec,Ke=N.Fc,N.Ac=qe,N.Bc=Ke,Ke+=fe,N.Gd=c(_t,Jo),N.Hd=0,N.rb=c(rr+1,Ii),N.sb=1,N.wa=Er?c(Er,Yi):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=it),t(!0),N.oc=qe,N.pc=Ke,Ke+=832,N.ya=c(kr,io),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=it),N.R=16*it,N.B=8*it,it=(_t=En[N.L])*N.R,_t=_t/2*N.B,N.sa=qe,N.ta=Ke+it,N.qa=N.sa,N.ra=N.ta+16*re*N.R+_t,N.Ha=N.qa,N.Ia=N.ra+8*re*N.B+_t,N.$c=0,Ke+=Le,N.mb=Be?qe:null,N.nb=Be?Ke:null,t(Ke+Be<=N.Fc+N.Vb),vs(N),o(N.Ac,N.Bc,0,fe),re=1}}if(re){if($.ka=0,$.y=N.sa,$.O=N.ta,$.f=N.qa,$.N=N.ra,$.ea=N.Ha,$.Vd=N.Ia,$.fa=N.R,$.Rc=N.B,$.F=null,$.J=0,!Rc){for(re=-255;255>=re;++re)e0[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)t0[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)w0[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)Mi[255+re]=0>re?0:255<re?255:re;Rc=1}la=Ds,Xu=$u,fs=Gu,oo=nl,Es=us,cs=Wl,al=hc,Ql=vu,Eu=Qc,Ca=Hu,Pl=Dc,ba=_u,Dn=bu,Fo=wu,Ki=Ri,Bo=xs,ga=Ws,An=Mc,M[0]=Mt,M[1]=gu,M[2]=Ye,M[3]=yt,M[4]=Tt,M[5]=mr,M[6]=wr,M[7]=vr,M[8]=$r,M[9]=ar,as[0]=il,as[1]=yu,as[2]=bs,as[3]=ws,as[4]=R,as[5]=W,as[6]=ae,d[0]=m,d[1]=kl,d[2]=cn,d[3]=Ln,d[4]=h,d[5]=Pr,d[6]=T,re=1}else re=0}re&&(re=function(hr,fn){for(hr.M=0;hr.M<hr.Va;++hr.M){var zr,zt=hr.Jc[hr.M&hr.Xb],Xt=hr.m,Hr=hr;for(zr=0;zr<Hr.za;++zr){var en=Xt,Wr=Hr,On=Wr.Ac,In=Wr.Bc+4*zr,Ci=Wr.zc,Fn=Wr.ya[Wr.aa+zr];if(Wr.Qa.Bb?Fn.$b=$t(en,Wr.Pa.jb[0])?2+$t(en,Wr.Pa.jb[2]):$t(en,Wr.Pa.jb[1]):Fn.$b=0,Wr.kc&&(Fn.Ad=$t(en,Wr.Bd)),Fn.Za=!$t(en,145)+0,Fn.Za){var Co=Fn.Ob,Po=0;for(Wr=0;4>Wr;++Wr){var ao,Gi=Ci[0+Wr];for(ao=0;4>ao;++ao){Gi=ca[On[In+ao]][Gi];for(var Eo=r0[$t(en,Gi[0])];0<Eo;)Eo=r0[2*Eo+$t(en,Gi[Eo])];Gi=-Eo,On[In+ao]=Gi}n(Co,Po,On,In,4),Po+=4,Ci[0+Wr]=Gi}}else Gi=$t(en,156)?$t(en,128)?1:3:$t(en,163)?2:0,Fn.Ob[0]=Gi,o(On,In,Gi,4),o(Ci,0,Gi,4);Fn.Dd=$t(en,142)?$t(en,114)?$t(en,183)?1:3:2:0}if(Hr.m.Ka)return na(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(Hr=zt,en=(Xt=hr).rb[Xt.sb-1],On=Xt.rb[Xt.sb+Xt.ja],zr=Xt.ya[Xt.aa+Xt.ja],In=Xt.kc?zr.Ad:0)en.la=On.la=0,zr.Za||(en.Na=On.Na=0),zr.Hc=0,zr.Gc=0,zr.ia=0;else{var Mo,Qi;if(en=On,On=Hr,In=Xt.Pa.Xc,Ci=Xt.ya[Xt.aa+Xt.ja],Fn=Xt.pb[Ci.$b],Wr=Ci.ad,Co=0,Po=Xt.rb[Xt.sb-1],Gi=ao=0,o(Wr,Co,0,384),Ci.Za)var Fa=0,Fi=In[3];else{Eo=u(16);var pa=en.Na+Po.Na;if(pa=jo(On,In[1],pa,Fn.Eb,0,Eo,0),en.Na=Po.Na=(0<pa)+0,1<pa)la(Eo,0,Wr,Co);else{var Ha=Eo[0]+3>>3;for(Eo=0;256>Eo;Eo+=16)Wr[Co+Eo]=Ha}Fa=1,Fi=In[0]}var vo=15&en.la,ya=15&Po.la;for(Eo=0;4>Eo;++Eo){var Ba=1&ya;for(Ha=Qi=0;4>Ha;++Ha)vo=vo>>1|(Ba=(pa=jo(On,Fi,pa=Ba+(1&vo),Fn.Sc,Fa,Wr,Co))>Fa)<<7,Qi=Qi<<2|(3<pa?3:1<pa?2:Wr[Co+0]!=0),Co+=16;vo>>=4,ya=ya>>1|Ba<<7,ao=(ao<<8|Qi)>>>0}for(Fi=vo,Fa=ya>>4,Mo=0;4>Mo;Mo+=2){for(Qi=0,vo=en.la>>4+Mo,ya=Po.la>>4+Mo,Eo=0;2>Eo;++Eo){for(Ba=1&ya,Ha=0;2>Ha;++Ha)pa=Ba+(1&vo),vo=vo>>1|(Ba=0<(pa=jo(On,In[2],pa,Fn.Qc,0,Wr,Co)))<<3,Qi=Qi<<2|(3<pa?3:1<pa?2:Wr[Co+0]!=0),Co+=16;vo>>=2,ya=ya>>1|Ba<<5}Gi|=Qi<<4*Mo,Fi|=vo<<4<<Mo,Fa|=(240&ya)<<Mo}en.la=Fi,Po.la=Fa,Ci.Hc=ao,Ci.Gc=Gi,Ci.ia=43690&Gi?0:Fn.ia,In=!(ao|Gi)}if(0<Xt.L&&(Xt.wa[Xt.Y+Xt.ja]=Xt.gd[zr.$b][zr.Za],Xt.wa[Xt.Y+Xt.ja].La|=!In),Hr.Ka)return na(hr,7,"Premature end-of-file encountered.")}if(vs(hr),Xt=fn,Hr=1,zr=(zt=hr).D,en=0<zt.L&&zt.M>=zt.zb&&zt.M<=zt.Va,zt.Aa==0)e:{if(zr.M=zt.M,zr.uc=en,Zu(zt,zr),Hr=1,zr=(Qi=zt.D).Nb,en=(Gi=En[zt.L])*zt.R,On=Gi/2*zt.B,Eo=16*zr*zt.R,Ha=8*zr*zt.B,In=zt.sa,Ci=zt.ta-en+Eo,Fn=zt.qa,Wr=zt.ra-On+Ha,Co=zt.Ha,Po=zt.Ia-On+Ha,ya=(vo=Qi.M)==0,ao=vo>=zt.Va-1,zt.Aa==2&&Zu(zt,Qi),Qi.uc)for(Ba=(pa=zt).D.M,t(pa.D.uc),Qi=pa.yb;Qi<pa.Hb;++Qi){Fa=Qi,Fi=Ba;var Wa=(Wo=(da=pa).D).Nb;Mo=da.R;var Wo=Wo.wa[Wo.Y+Fa],ss=da.sa,Bs=da.ta+16*Wa*Mo+16*Fa,$o=Wo.dd,Ia=Wo.tc;if(Ia!=0)if(t(3<=Ia),da.L==1)0<Fa&&Bo(ss,Bs,Mo,Ia+4),Wo.La&&An(ss,Bs,Mo,Ia),0<Fi&&Ki(ss,Bs,Mo,Ia+4),Wo.La&&ga(ss,Bs,Mo,Ia);else{var nu=da.B,js=da.qa,Ks=da.ra+8*Wa*nu+8*Fa,Qs=da.Ha,da=da.Ia+8*Wa*nu+8*Fa;Wa=Wo.ld,0<Fa&&(Ql(ss,Bs,Mo,Ia+4,$o,Wa),Ca(js,Ks,Qs,da,nu,Ia+4,$o,Wa)),Wo.La&&(ba(ss,Bs,Mo,Ia,$o,Wa),Fo(js,Ks,Qs,da,nu,Ia,$o,Wa)),0<Fi&&(al(ss,Bs,Mo,Ia+4,$o,Wa),Eu(js,Ks,Qs,da,nu,Ia+4,$o,Wa)),Wo.La&&(Pl(ss,Bs,Mo,Ia,$o,Wa),Dn(js,Ks,Qs,da,nu,Ia,$o,Wa))}}if(zt.ia&&alert("todo:DitherRow"),Xt.put!=null){if(Qi=16*vo,vo=16*(vo+1),ya?(Xt.y=zt.sa,Xt.O=zt.ta+Eo,Xt.f=zt.qa,Xt.N=zt.ra+Ha,Xt.ea=zt.Ha,Xt.W=zt.Ia+Ha):(Qi-=Gi,Xt.y=In,Xt.O=Ci,Xt.f=Fn,Xt.N=Wr,Xt.ea=Co,Xt.W=Po),ao||(vo-=Gi),vo>Xt.o&&(vo=Xt.o),Xt.F=null,Xt.J=null,zt.Fa!=null&&0<zt.Fa.length&&Qi<vo&&(Xt.J=To(zt,Xt,Qi,vo-Qi),Xt.F=zt.mb,Xt.F==null&&Xt.F.length==0)){Hr=na(zt,3,"Could not decode alpha data.");break e}Qi<Xt.j&&(Gi=Xt.j-Qi,Qi=Xt.j,t(!(1&Gi)),Xt.O+=zt.R*Gi,Xt.N+=zt.B*(Gi>>1),Xt.W+=zt.B*(Gi>>1),Xt.F!=null&&(Xt.J+=Xt.width*Gi)),Qi<vo&&(Xt.O+=Xt.v,Xt.N+=Xt.v>>1,Xt.W+=Xt.v>>1,Xt.F!=null&&(Xt.J+=Xt.v),Xt.ka=Qi-Xt.j,Xt.U=Xt.va-Xt.v,Xt.T=vo-Qi,Hr=Xt.put(Xt))}zr+1!=zt.Ic||ao||(n(zt.sa,zt.ta-en,In,Ci+16*zt.R,en),n(zt.qa,zt.ra-On,Fn,Wr+8*zt.B,On),n(zt.Ha,zt.Ia-On,Co,Po+8*zt.B,On))}if(!Hr)return na(hr,6,"Output aborted.")}return 1}(N,$)),$.bc!=null&&$.bc($),re&=1}return re?(N.cb=0,re):0}function _s(N,$,re,fe,Le){Le=N[$+re+32*fe]+(Le>>3),N[$+re+32*fe]=-256&Le?0>Le?0:255:Le}function Vu(N,$,re,fe,Le,Be){_s(N,$,0,re,fe+Le),_s(N,$,1,re,fe+Be),_s(N,$,2,re,fe-Be),_s(N,$,3,re,fe-Le)}function $a(N){return(20091*N>>16)+N}function wl(N,$,re,fe){var Le,Be=0,qe=u(16);for(Le=0;4>Le;++Le){var Ke=N[$+0]+N[$+8],it=N[$+0]-N[$+8],_t=(35468*N[$+4]>>16)-$a(N[$+12]),rr=$a(N[$+4])+(35468*N[$+12]>>16);qe[Be+0]=Ke+rr,qe[Be+1]=it+_t,qe[Be+2]=it-_t,qe[Be+3]=Ke-rr,Be+=4,$++}for(Le=Be=0;4>Le;++Le)Ke=(N=qe[Be+0]+4)+qe[Be+8],it=N-qe[Be+8],_t=(35468*qe[Be+4]>>16)-$a(qe[Be+12]),_s(re,fe,0,0,Ke+(rr=$a(qe[Be+4])+(35468*qe[Be+12]>>16))),_s(re,fe,1,0,it+_t),_s(re,fe,2,0,it-_t),_s(re,fe,3,0,Ke-rr),Be++,fe+=32}function Wl(N,$,re,fe){var Le=N[$+0]+4,Be=35468*N[$+4]>>16,qe=$a(N[$+4]),Ke=35468*N[$+1]>>16;Vu(re,fe,0,Le+qe,N=$a(N[$+1]),Ke),Vu(re,fe,1,Le+Be,N,Ke),Vu(re,fe,2,Le-Be,N,Ke),Vu(re,fe,3,Le-qe,N,Ke)}function $u(N,$,re,fe,Le){wl(N,$,re,fe),Le&&wl(N,$+16,re,fe+4)}function Gu(N,$,re,fe){Xu(N,$+0,re,fe,1),Xu(N,$+32,re,fe+128,1)}function nl(N,$,re,fe){var Le;for(N=N[$+0]+4,Le=0;4>Le;++Le)for($=0;4>$;++$)_s(re,fe,$,Le,N)}function us(N,$,re,fe){N[$+0]&&oo(N,$+0,re,fe),N[$+16]&&oo(N,$+16,re,fe+4),N[$+32]&&oo(N,$+32,re,fe+128),N[$+48]&&oo(N,$+48,re,fe+128+4)}function Ds(N,$,re,fe){var Le,Be=u(16);for(Le=0;4>Le;++Le){var qe=N[$+0+Le]+N[$+12+Le],Ke=N[$+4+Le]+N[$+8+Le],it=N[$+4+Le]-N[$+8+Le],_t=N[$+0+Le]-N[$+12+Le];Be[0+Le]=qe+Ke,Be[8+Le]=qe-Ke,Be[4+Le]=_t+it,Be[12+Le]=_t-it}for(Le=0;4>Le;++Le)qe=(N=Be[0+4*Le]+3)+Be[3+4*Le],Ke=Be[1+4*Le]+Be[2+4*Le],it=Be[1+4*Le]-Be[2+4*Le],_t=N-Be[3+4*Le],re[fe+0]=qe+Ke>>3,re[fe+16]=_t+it>>3,re[fe+32]=qe-Ke>>3,re[fe+48]=_t-it>>3,fe+=64}function xl(N,$,re){var fe,Le=$-32,Be=os,qe=255-N[Le-1];for(fe=0;fe<re;++fe){var Ke,it=Be,_t=qe+N[$-1];for(Ke=0;Ke<re;++Ke)N[$+Ke]=it[_t+N[Le+Ke]];$+=32}}function gu(N,$){xl(N,$,4)}function kl(N,$){xl(N,$,8)}function yu(N,$){xl(N,$,16)}function bs(N,$){var re;for(re=0;16>re;++re)n(N,$+32*re,N,$-32,16)}function ws(N,$){var re;for(re=16;0<re;--re)o(N,$,N[$-1],16),$+=32}function Oo(N,$,re){var fe;for(fe=0;16>fe;++fe)o($,re+32*fe,N,16)}function il(N,$){var re,fe=16;for(re=0;16>re;++re)fe+=N[$-1+32*re]+N[$+re-32];Oo(fe>>5,N,$)}function R(N,$){var re,fe=8;for(re=0;16>re;++re)fe+=N[$-1+32*re];Oo(fe>>4,N,$)}function W(N,$){var re,fe=8;for(re=0;16>re;++re)fe+=N[$+re-32];Oo(fe>>4,N,$)}function ae(N,$){Oo(128,N,$)}function Ae(N,$,re){return N+2*$+re+2>>2}function Ye(N,$){var re,fe=$-32;for(fe=new Uint8Array([Ae(N[fe-1],N[fe+0],N[fe+1]),Ae(N[fe+0],N[fe+1],N[fe+2]),Ae(N[fe+1],N[fe+2],N[fe+3]),Ae(N[fe+2],N[fe+3],N[fe+4])]),re=0;4>re;++re)n(N,$+32*re,fe,0,fe.length)}function yt(N,$){var re=N[$-1],fe=N[$-1+32],Le=N[$-1+64],Be=N[$-1+96];br(N,$+0,16843009*Ae(N[$-1-32],re,fe)),br(N,$+32,16843009*Ae(re,fe,Le)),br(N,$+64,16843009*Ae(fe,Le,Be)),br(N,$+96,16843009*Ae(Le,Be,Be))}function Mt(N,$){var re,fe=4;for(re=0;4>re;++re)fe+=N[$+re-32]+N[$-1+32*re];for(fe>>=3,re=0;4>re;++re)o(N,$+32*re,fe,4)}function Tt(N,$){var re=N[$-1+0],fe=N[$-1+32],Le=N[$-1+64],Be=N[$-1-32],qe=N[$+0-32],Ke=N[$+1-32],it=N[$+2-32],_t=N[$+3-32];N[$+0+96]=Ae(fe,Le,N[$-1+96]),N[$+1+96]=N[$+0+64]=Ae(re,fe,Le),N[$+2+96]=N[$+1+64]=N[$+0+32]=Ae(Be,re,fe),N[$+3+96]=N[$+2+64]=N[$+1+32]=N[$+0+0]=Ae(qe,Be,re),N[$+3+64]=N[$+2+32]=N[$+1+0]=Ae(Ke,qe,Be),N[$+3+32]=N[$+2+0]=Ae(it,Ke,qe),N[$+3+0]=Ae(_t,it,Ke)}function wr(N,$){var re=N[$+1-32],fe=N[$+2-32],Le=N[$+3-32],Be=N[$+4-32],qe=N[$+5-32],Ke=N[$+6-32],it=N[$+7-32];N[$+0+0]=Ae(N[$+0-32],re,fe),N[$+1+0]=N[$+0+32]=Ae(re,fe,Le),N[$+2+0]=N[$+1+32]=N[$+0+64]=Ae(fe,Le,Be),N[$+3+0]=N[$+2+32]=N[$+1+64]=N[$+0+96]=Ae(Le,Be,qe),N[$+3+32]=N[$+2+64]=N[$+1+96]=Ae(Be,qe,Ke),N[$+3+64]=N[$+2+96]=Ae(qe,Ke,it),N[$+3+96]=Ae(Ke,it,it)}function mr(N,$){var re=N[$-1+0],fe=N[$-1+32],Le=N[$-1+64],Be=N[$-1-32],qe=N[$+0-32],Ke=N[$+1-32],it=N[$+2-32],_t=N[$+3-32];N[$+0+0]=N[$+1+64]=Be+qe+1>>1,N[$+1+0]=N[$+2+64]=qe+Ke+1>>1,N[$+2+0]=N[$+3+64]=Ke+it+1>>1,N[$+3+0]=it+_t+1>>1,N[$+0+96]=Ae(Le,fe,re),N[$+0+64]=Ae(fe,re,Be),N[$+0+32]=N[$+1+96]=Ae(re,Be,qe),N[$+1+32]=N[$+2+96]=Ae(Be,qe,Ke),N[$+2+32]=N[$+3+96]=Ae(qe,Ke,it),N[$+3+32]=Ae(Ke,it,_t)}function vr(N,$){var re=N[$+0-32],fe=N[$+1-32],Le=N[$+2-32],Be=N[$+3-32],qe=N[$+4-32],Ke=N[$+5-32],it=N[$+6-32],_t=N[$+7-32];N[$+0+0]=re+fe+1>>1,N[$+1+0]=N[$+0+64]=fe+Le+1>>1,N[$+2+0]=N[$+1+64]=Le+Be+1>>1,N[$+3+0]=N[$+2+64]=Be+qe+1>>1,N[$+0+32]=Ae(re,fe,Le),N[$+1+32]=N[$+0+96]=Ae(fe,Le,Be),N[$+2+32]=N[$+1+96]=Ae(Le,Be,qe),N[$+3+32]=N[$+2+96]=Ae(Be,qe,Ke),N[$+3+64]=Ae(qe,Ke,it),N[$+3+96]=Ae(Ke,it,_t)}function ar(N,$){var re=N[$-1+0],fe=N[$-1+32],Le=N[$-1+64],Be=N[$-1+96];N[$+0+0]=re+fe+1>>1,N[$+2+0]=N[$+0+32]=fe+Le+1>>1,N[$+2+32]=N[$+0+64]=Le+Be+1>>1,N[$+1+0]=Ae(re,fe,Le),N[$+3+0]=N[$+1+32]=Ae(fe,Le,Be),N[$+3+32]=N[$+1+64]=Ae(Le,Be,Be),N[$+3+64]=N[$+2+64]=N[$+0+96]=N[$+1+96]=N[$+2+96]=N[$+3+96]=Be}function $r(N,$){var re=N[$-1+0],fe=N[$-1+32],Le=N[$-1+64],Be=N[$-1+96],qe=N[$-1-32],Ke=N[$+0-32],it=N[$+1-32],_t=N[$+2-32];N[$+0+0]=N[$+2+32]=re+qe+1>>1,N[$+0+32]=N[$+2+64]=fe+re+1>>1,N[$+0+64]=N[$+2+96]=Le+fe+1>>1,N[$+0+96]=Be+Le+1>>1,N[$+3+0]=Ae(Ke,it,_t),N[$+2+0]=Ae(qe,Ke,it),N[$+1+0]=N[$+3+32]=Ae(re,qe,Ke),N[$+1+32]=N[$+3+64]=Ae(fe,re,qe),N[$+1+64]=N[$+3+96]=Ae(Le,fe,re),N[$+1+96]=Ae(Be,Le,fe)}function cn(N,$){var re;for(re=0;8>re;++re)n(N,$+32*re,N,$-32,8)}function Ln(N,$){var re;for(re=0;8>re;++re)o(N,$,N[$-1],8),$+=32}function tt(N,$,re){var fe;for(fe=0;8>fe;++fe)o($,re+32*fe,N,8)}function m(N,$){var re,fe=8;for(re=0;8>re;++re)fe+=N[$+re-32]+N[$-1+32*re];tt(fe>>4,N,$)}function Pr(N,$){var re,fe=4;for(re=0;8>re;++re)fe+=N[$+re-32];tt(fe>>3,N,$)}function h(N,$){var re,fe=4;for(re=0;8>re;++re)fe+=N[$-1+32*re];tt(fe>>3,N,$)}function T(N,$){tt(128,N,$)}function kn(N,$,re){var fe=N[$-re],Le=N[$+0],Be=3*(Le-fe)+dc[1020+N[$-2*re]-N[$+re]],qe=ua[112+(Be+4>>3)];N[$-re]=os[255+fe+ua[112+(Be+3>>3)]],N[$+0]=os[255+Le-qe]}function ii(N,$,re,fe){var Le=N[$+0],Be=N[$+re];return ia[255+N[$-2*re]-N[$-re]]>fe||ia[255+Be-Le]>fe}function Lo(N,$,re,fe){return 4*ia[255+N[$-re]-N[$+0]]+ia[255+N[$-2*re]-N[$+re]]<=fe}function K(N,$,re,fe,Le){var Be=N[$-3*re],qe=N[$-2*re],Ke=N[$-re],it=N[$+0],_t=N[$+re],rr=N[$+2*re],Er=N[$+3*re];return 4*ia[255+Ke-it]+ia[255+qe-_t]>fe?0:ia[255+N[$-4*re]-Be]<=Le&&ia[255+Be-qe]<=Le&&ia[255+qe-Ke]<=Le&&ia[255+Er-rr]<=Le&&ia[255+rr-_t]<=Le&&ia[255+_t-it]<=Le}function Ri(N,$,re,fe){var Le=2*fe+1;for(fe=0;16>fe;++fe)Lo(N,$+fe,re,Le)&&kn(N,$+fe,re)}function xs(N,$,re,fe){var Le=2*fe+1;for(fe=0;16>fe;++fe)Lo(N,$+fe*re,1,Le)&&kn(N,$+fe*re,1)}function Ws(N,$,re,fe){var Le;for(Le=3;0<Le;--Le)Ri(N,$+=4*re,re,fe)}function Mc(N,$,re,fe){var Le;for(Le=3;0<Le;--Le)xs(N,$+=4,re,fe)}function Al(N,$,re,fe,Le,Be,qe,Ke){for(Be=2*Be+1;0<Le--;){if(K(N,$,re,Be,qe))if(ii(N,$,re,Ke))kn(N,$,re);else{var it=N,_t=$,rr=re,Er=it[_t-2*rr],kr=it[_t-rr],hr=it[_t+0],fn=it[_t+rr],zr=it[_t+2*rr],zt=27*(Hr=dc[1020+3*(hr-kr)+dc[1020+Er-fn]])+63>>7,Xt=18*Hr+63>>7,Hr=9*Hr+63>>7;it[_t-3*rr]=os[255+it[_t-3*rr]+Hr],it[_t-2*rr]=os[255+Er+Xt],it[_t-rr]=os[255+kr+zt],it[_t+0]=os[255+hr-zt],it[_t+rr]=os[255+fn-Xt],it[_t+2*rr]=os[255+zr-Hr]}$+=fe}}function Xa(N,$,re,fe,Le,Be,qe,Ke){for(Be=2*Be+1;0<Le--;){if(K(N,$,re,Be,qe))if(ii(N,$,re,Ke))kn(N,$,re);else{var it=N,_t=$,rr=re,Er=it[_t-rr],kr=it[_t+0],hr=it[_t+rr],fn=ua[112+((zr=3*(kr-Er))+4>>3)],zr=ua[112+(zr+3>>3)],zt=fn+1>>1;it[_t-2*rr]=os[255+it[_t-2*rr]+zt],it[_t-rr]=os[255+Er+zr],it[_t+0]=os[255+kr-fn],it[_t+rr]=os[255+hr-zt]}$+=fe}}function hc(N,$,re,fe,Le,Be){Al(N,$,re,1,16,fe,Le,Be)}function vu(N,$,re,fe,Le,Be){Al(N,$,1,re,16,fe,Le,Be)}function Dc(N,$,re,fe,Le,Be){var qe;for(qe=3;0<qe;--qe)Xa(N,$+=4*re,re,1,16,fe,Le,Be)}function _u(N,$,re,fe,Le,Be){var qe;for(qe=3;0<qe;--qe)Xa(N,$+=4,1,re,16,fe,Le,Be)}function Qc(N,$,re,fe,Le,Be,qe,Ke){Al(N,$,Le,1,8,Be,qe,Ke),Al(re,fe,Le,1,8,Be,qe,Ke)}function Hu(N,$,re,fe,Le,Be,qe,Ke){Al(N,$,1,Le,8,Be,qe,Ke),Al(re,fe,1,Le,8,Be,qe,Ke)}function bu(N,$,re,fe,Le,Be,qe,Ke){Xa(N,$+4*Le,Le,1,8,Be,qe,Ke),Xa(re,fe+4*Le,Le,1,8,Be,qe,Ke)}function wu(N,$,re,fe,Le,Be,qe,Ke){Xa(N,$+4,1,Le,8,Be,qe,Ke),Xa(re,fe+4,1,Le,8,Be,qe,Ke)}function Zl(){this.ba=new Ro,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new co,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function qn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jn(){this.ua=0,this.Wa=new pt,this.vb=new pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new nt,this.yc=new Ce}function Wu(){this.xb=this.a=0,this.l=new Ko,this.ca=new Ro,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ke,this.Pb=0,this.wd=new ke,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jn,this.ab=0,this.gc=c(4,qn),this.Oc=0}function zs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ko,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ks(N,$,re,fe,Le,Be,qe){for(N=N==null?0:N[$+0],$=0;$<qe;++$)Le[Be+$]=N+re[fe+$]&255,N=Le[Be+$]}function Xl(N,$,re,fe,Le,Be,qe){var Ke;if(N==null)ks(null,null,re,fe,Le,Be,qe);else for(Ke=0;Ke<qe;++Ke)Le[Be+Ke]=N[$+Ke]+re[fe+Ke]&255}function As(N,$,re,fe,Le,Be,qe){if(N==null)ks(null,null,re,fe,Le,Be,qe);else{var Ke,it=N[$+0],_t=it,rr=it;for(Ke=0;Ke<qe;++Ke)_t=rr+(it=N[$+Ke])-_t,rr=re[fe+Ke]+(-256&_t?0>_t?0:255:_t)&255,_t=it,Le[Be+Ke]=rr}}function To(N,$,re,fe){var Le=$.width,Be=$.o;if(t(N!=null&&$!=null),0>re||0>=fe||re+fe>Be)return null;if(!N.Cc){if(N.ga==null){var qe;if(N.ga=new zs,(qe=N.ga==null)||(qe=$.width*$.o,t(N.Gb.length==0),N.Gb=u(qe),N.Uc=0,N.Gb==null?qe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,qe=1),qe=!qe),!qe){qe=N.ga;var Ke=N.Fa,it=N.P,_t=N.qc,rr=N.mb,Er=N.nb,kr=it+1,hr=_t-1,fn=qe.l;if(t(Ke!=null&&rr!=null&&$!=null),D[0]=null,D[1]=ks,D[2]=Xl,D[3]=As,qe.ca=rr,qe.tb=Er,qe.c=$.width,qe.i=$.height,t(0<qe.c&&0<qe.i),1>=_t)$=0;else if(qe.$a=Ke[it+0]>>0&3,qe.Z=Ke[it+0]>>2&3,qe.Lc=Ke[it+0]>>4&3,it=Ke[it+0]>>6&3,0>qe.$a||1<qe.$a||4<=qe.Z||1<qe.Lc||it)$=0;else if(fn.put=Li,fn.ac=pi,fn.bc=Yo,fn.ma=qe,fn.width=$.width,fn.height=$.height,fn.Da=$.Da,fn.v=$.v,fn.va=$.va,fn.j=$.j,fn.o=$.o,qe.$a)e:{t(qe.$a==1),$=Nt();t:for(;;){if($==null){$=0;break e}if(t(qe!=null),qe.mc=$,$.c=qe.c,$.i=qe.i,$.l=qe.l,$.l.ma=qe,$.l.width=qe.c,$.l.height=qe.i,$.a=0,ut($.m,Ke,kr,hr),!ir(qe.c,qe.i,1,$,null)||($.ab==1&&$.gc[0].hc==3&&ot($.s)?(qe.ic=1,Ke=$.c*$.i,$.Ta=null,$.Ua=0,$.V=u(Ke),$.Ba=0,$.V==null?($.a=1,$=0):$=1):(qe.ic=0,$=Br($,qe.c)),!$))break t;$=1;break e}qe.mc=null,$=0}else $=hr>=qe.c*qe.i;qe=!$}if(qe)return null;N.ga.Lc!=1?N.Ga=0:fe=Be-re}t(N.ga!=null),t(re+fe<=Be);e:{if($=(Ke=N.ga).c,Be=Ke.l.o,Ke.$a==0){if(kr=N.rc,hr=N.Vc,fn=N.Fa,it=N.P+1+re*$,_t=N.mb,rr=N.nb+re*$,t(it<=N.P+N.qc),Ke.Z!=0)for(t(D[Ke.Z]!=null),qe=0;qe<fe;++qe)D[Ke.Z](kr,hr,fn,it,_t,rr,$),kr=_t,hr=rr,rr+=$,it+=$;else for(qe=0;qe<fe;++qe)n(_t,rr,fn,it,$),kr=_t,hr=rr,rr+=$,it+=$;N.rc=kr,N.Vc=hr}else{if(t(Ke.mc!=null),$=re+fe,t((qe=Ke.mc)!=null),t($<=qe.i),qe.C>=$)$=1;else if(Ke.ic||ur(),Ke.ic){Ke=qe.V,kr=qe.Ba,hr=qe.c;var zr=qe.i,zt=(fn=1,it=qe.$/hr,_t=qe.$%hr,rr=qe.m,Er=qe.s,qe.$),Xt=hr*zr,Hr=hr*$,en=Er.wc,Wr=zt<Hr?we(Er,_t,it):null;t(zt<=Xt),t($<=zr),t(ot(Er));t:for(;;){for(;!rr.h&&zt<Hr;){if(_t&en||(Wr=we(Er,_t,it)),t(Wr!=null),Et(rr),256>(zr=ha(Wr.G[0],Wr.H[0],rr)))Ke[kr+zt]=zr,++zt,++_t>=hr&&(_t=0,++it<=$&&!(it%16)&&Rt(qe,it));else{if(!(280>zr)){fn=0;break t}zr=ze(zr-256,rr);var On,In=ha(Wr.G[4],Wr.H[4],rr);if(Et(rr),!(zt>=(In=Ea(hr,In=ze(In,rr)))&&Xt-zt>=zr)){fn=0;break t}for(On=0;On<zr;++On)Ke[kr+zt+On]=Ke[kr+zt+On-In];for(zt+=zr,_t+=zr;_t>=hr;)_t-=hr,++it<=$&&!(it%16)&&Rt(qe,it);zt<Hr&&_t&en&&(Wr=we(Er,_t,it))}t(rr.h==Pe(rr))}Rt(qe,it>$?$:it);break t}!fn||rr.h&&zt<Xt?(fn=0,qe.a=rr.h?5:3):qe.$=zt,$=fn}else $=Fe(qe,qe.V,qe.Ba,qe.c,qe.i,$,nn);if(!$){fe=0;break e}}re+fe>=Be&&(N.Cc=1),fe=1}if(!fe)return null;if(N.Cc&&((fe=N.ga)!=null&&(fe.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+re*Le}function te(N,$,re,fe,Le,Be){for(;0<Le--;){var qe,Ke=N,it=$+(re?1:0),_t=N,rr=$+(re?0:3);for(qe=0;qe<fe;++qe){var Er=_t[rr+4*qe];Er!=255&&(Er*=32897,Ke[it+4*qe+0]=Ke[it+4*qe+0]*Er>>23,Ke[it+4*qe+1]=Ke[it+4*qe+1]*Er>>23,Ke[it+4*qe+2]=Ke[it+4*qe+2]*Er>>23)}$+=Be}}function Te(N,$,re,fe,Le){for(;0<fe--;){var Be;for(Be=0;Be<re;++Be){var qe=N[$+2*Be+0],Ke=15&(_t=N[$+2*Be+1]),it=4369*Ke,_t=(240&_t|_t>>4)*it>>16;N[$+2*Be+0]=(240&qe|qe>>4)*it>>16&240|(15&qe|qe<<4)*it>>16>>4&15,N[$+2*Be+1]=240&_t|Ke}$+=Le}}function gt(N,$,re,fe,Le,Be,qe,Ke){var it,_t,rr=255;for(_t=0;_t<Le;++_t){for(it=0;it<fe;++it){var Er=N[$+it];Be[qe+4*it]=Er,rr&=Er}$+=re,qe+=Ke}return rr!=255}function qt(N,$,re,fe,Le){var Be;for(Be=0;Be<Le;++Be)re[fe+Be]=N[$+Be]>>8}function ur(){Ss=te,Yu=Te,Ju=gt,Nc=qt}function Xr(N,$,re){pe[N]=function(fe,Le,Be,qe,Ke,it,_t,rr,Er,kr,hr,fn,zr,zt,Xt,Hr,en){var Wr,On=en-1>>1,In=Ke[it+0]|_t[rr+0]<<16,Ci=Er[kr+0]|hr[fn+0]<<16;t(fe!=null);var Fn=3*In+Ci+131074>>2;for($(fe[Le+0],255&Fn,Fn>>16,zr,zt),Be!=null&&(Fn=3*Ci+In+131074>>2,$(Be[qe+0],255&Fn,Fn>>16,Xt,Hr)),Wr=1;Wr<=On;++Wr){var Co=Ke[it+Wr]|_t[rr+Wr]<<16,Po=Er[kr+Wr]|hr[fn+Wr]<<16,ao=In+Co+Ci+Po+524296,Gi=ao+2*(Co+Ci)>>3;Fn=Gi+In>>1,In=(ao=ao+2*(In+Po)>>3)+Co>>1,$(fe[Le+2*Wr-1],255&Fn,Fn>>16,zr,zt+(2*Wr-1)*re),$(fe[Le+2*Wr-0],255&In,In>>16,zr,zt+(2*Wr-0)*re),Be!=null&&(Fn=ao+Ci>>1,In=Gi+Po>>1,$(Be[qe+2*Wr-1],255&Fn,Fn>>16,Xt,Hr+(2*Wr-1)*re),$(Be[qe+2*Wr+0],255&In,In>>16,Xt,Hr+(2*Wr+0)*re)),In=Co,Ci=Po}1&en||(Fn=3*In+Ci+131074>>2,$(fe[Le+en-1],255&Fn,Fn>>16,zr,zt+(en-1)*re),Be!=null&&(Fn=3*Ci+In+131074>>2,$(Be[qe+en-1],255&Fn,Fn>>16,Xt,Hr+(en-1)*re)))}}function gn(){q[Ys]=J,q[mc]=se,q[eu]=oe,q[tu]=ge,q[ru]=Se,q[ho]=Ue,q[Cs]=Je,q[Ho]=se,q[Is]=ge,q[Su]=Se,q[Oc]=Ue}function Kn(N){return N&~Ar?0>N?0:255:N>>cr}function xi(N,$){return Kn((19077*N>>8)+(26149*$>>8)-14234)}function Oi(N,$,re){return Kn((19077*N>>8)-(6419*$>>8)-(13320*re>>8)+8708)}function Ji(N,$){return Kn((19077*N>>8)+(33050*$>>8)-17685)}function fo(N,$,re,fe,Le){fe[Le+0]=xi(N,re),fe[Le+1]=Oi(N,$,re),fe[Le+2]=Ji(N,$)}function Vo(N,$,re,fe,Le){fe[Le+0]=Ji(N,$),fe[Le+1]=Oi(N,$,re),fe[Le+2]=xi(N,re)}function Qo(N,$,re,fe,Le){var Be=Oi(N,$,re);$=Be<<3&224|Ji(N,$)>>3,fe[Le+0]=248&xi(N,re)|Be>>5,fe[Le+1]=$}function ea(N,$,re,fe,Le){var Be=240&Ji(N,$)|15;fe[Le+0]=240&xi(N,re)|Oi(N,$,re)>>4,fe[Le+1]=Be}function Da(N,$,re,fe,Le){fe[Le+0]=255,fo(N,$,re,fe,Le+1)}function aa(N,$,re,fe,Le){Vo(N,$,re,fe,Le),fe[Le+3]=255}function $i(N,$,re,fe,Le){fo(N,$,re,fe,Le),fe[Le+3]=255}function za(N,$){return 0>N?0:N>$?$:N}function Sa(N,$,re){pe[N]=function(fe,Le,Be,qe,Ke,it,_t,rr,Er){for(var kr=rr+(-2&Er)*re;rr!=kr;)$(fe[Le+0],Be[qe+0],Ke[it+0],_t,rr),$(fe[Le+1],Be[qe+0],Ke[it+0],_t,rr+re),Le+=2,++qe,++it,rr+=2*re;1&Er&&$(fe[Le+0],Be[qe+0],Ke[it+0],_t,rr)}}function Yl(N,$,re){return re==0?N==0?$==0?6:5:$==0?4:0:re}function El(N,$,re,fe,Le){switch(N>>>30){case 3:Xu($,re,fe,Le,0);break;case 2:cs($,re,fe,Le);break;case 1:oo($,re,fe,Le)}}function Zu(N,$){var re,fe,Le=$.M,Be=$.Nb,qe=N.oc,Ke=N.pc+40,it=N.oc,_t=N.pc+584,rr=N.oc,Er=N.pc+600;for(re=0;16>re;++re)qe[Ke+32*re-1]=129;for(re=0;8>re;++re)it[_t+32*re-1]=129,rr[Er+32*re-1]=129;for(0<Le?qe[Ke-1-32]=it[_t-1-32]=rr[Er-1-32]=129:(o(qe,Ke-32-1,127,21),o(it,_t-32-1,127,9),o(rr,Er-32-1,127,9)),fe=0;fe<N.za;++fe){var kr=$.ya[$.aa+fe];if(0<fe){for(re=-1;16>re;++re)n(qe,Ke+32*re-4,qe,Ke+32*re+12,4);for(re=-1;8>re;++re)n(it,_t+32*re-4,it,_t+32*re+4,4),n(rr,Er+32*re-4,rr,Er+32*re+4,4)}var hr=N.Gd,fn=N.Hd+fe,zr=kr.ad,zt=kr.Hc;if(0<Le&&(n(qe,Ke-32,hr[fn].y,0,16),n(it,_t-32,hr[fn].f,0,8),n(rr,Er-32,hr[fn].ea,0,8)),kr.Za){var Xt=qe,Hr=Ke-32+16;for(0<Le&&(fe>=N.za-1?o(Xt,Hr,hr[fn].y[15],4):n(Xt,Hr,hr[fn+1].y,0,4)),re=0;4>re;re++)Xt[Hr+128+re]=Xt[Hr+256+re]=Xt[Hr+384+re]=Xt[Hr+0+re];for(re=0;16>re;++re,zt<<=2)Xt=qe,Hr=Ke+zn[re],M[kr.Ob[re]](Xt,Hr),El(zt,zr,16*+re,Xt,Hr)}else if(Xt=Yl(fe,Le,kr.Ob[0]),as[Xt](qe,Ke),zt!=0)for(re=0;16>re;++re,zt<<=2)El(zt,zr,16*+re,qe,Ke+zn[re]);for(re=kr.Gc,Xt=Yl(fe,Le,kr.Dd),d[Xt](it,_t),d[Xt](rr,Er),zt=zr,Xt=it,Hr=_t,255&(kr=re>>0)&&(170&kr?fs(zt,256,Xt,Hr):Es(zt,256,Xt,Hr)),kr=rr,zt=Er,255&(re>>=8)&&(170&re?fs(zr,320,kr,zt):Es(zr,320,kr,zt)),Le<N.Ub-1&&(n(hr[fn].y,0,qe,Ke+480,16),n(hr[fn].f,0,it,_t+224,8),n(hr[fn].ea,0,rr,Er+224,8)),re=8*Be*N.B,hr=N.sa,fn=N.ta+16*fe+16*Be*N.R,zr=N.qa,kr=N.ra+8*fe+re,zt=N.Ha,Xt=N.Ia+8*fe+re,re=0;16>re;++re)n(hr,fn+re*N.R,qe,Ke+32*re,16);for(re=0;8>re;++re)n(zr,kr+re*N.B,it,_t+32*re,8),n(zt,Xt+re*N.B,rr,Er+32*re,8)}}function Ns(N,$,re,fe,Le,Be,qe,Ke,it){var _t=[0],rr=[0],Er=0,kr=it!=null?it.kd:0,hr=it??new xu;if(N==null||12>re)return 7;hr.data=N,hr.w=$,hr.ha=re,$=[$],re=[re],hr.gb=[hr.gb];e:{var fn=$,zr=re,zt=hr.gb;if(t(N!=null),t(zr!=null),t(zt!=null),zt[0]=0,12<=zr[0]&&!r(N,fn[0],"RIFF")){if(r(N,fn[0]+8,"WEBP")){zt=3;break e}var Xt=Mr(N,fn[0]+4);if(12>Xt||4294967286<Xt){zt=3;break e}if(kr&&Xt>zr[0]-8){zt=7;break e}zt[0]=Xt,fn[0]+=12,zr[0]-=12}zt=0}if(zt!=0)return zt;for(Xt=0<hr.gb[0],re=re[0];;){e:{var Hr=N;zr=$,zt=re;var en=_t,Wr=rr,On=fn=[0];if((Fn=Er=[Er])[0]=0,8>zt[0])zt=7;else{if(!r(Hr,zr[0],"VP8X")){if(Mr(Hr,zr[0]+4)!=10){zt=3;break e}if(18>zt[0]){zt=7;break e}var In=Mr(Hr,zr[0]+8),Ci=1+Rr(Hr,zr[0]+12);if(2147483648<=Ci*(Hr=1+Rr(Hr,zr[0]+15))){zt=3;break e}On!=null&&(On[0]=In),en!=null&&(en[0]=Ci),Wr!=null&&(Wr[0]=Hr),zr[0]+=18,zt[0]-=18,Fn[0]=1}zt=0}}if(Er=Er[0],fn=fn[0],zt!=0)return zt;if(zr=!!(2&fn),!Xt&&Er)return 3;if(Be!=null&&(Be[0]=!!(16&fn)),qe!=null&&(qe[0]=zr),Ke!=null&&(Ke[0]=0),qe=_t[0],fn=rr[0],Er&&zr&&it==null){zt=0;break}if(4>re){zt=7;break}if(Xt&&Er||!Xt&&!Er&&!r(N,$[0],"ALPH")){re=[re],hr.na=[hr.na],hr.P=[hr.P],hr.Sa=[hr.Sa];e:{In=N,zt=$,Xt=re;var Fn=hr.gb;en=hr.na,Wr=hr.P,On=hr.Sa,Ci=22,t(In!=null),t(Xt!=null),Hr=zt[0];var Co=Xt[0];for(t(en!=null),t(On!=null),en[0]=null,Wr[0]=null,On[0]=0;;){if(zt[0]=Hr,Xt[0]=Co,8>Co){zt=7;break e}var Po=Mr(In,Hr+4);if(4294967286<Po){zt=3;break e}var ao=8+Po+1&-2;if(Ci+=ao,0<Fn&&Ci>Fn){zt=3;break e}if(!r(In,Hr,"VP8 ")||!r(In,Hr,"VP8L")){zt=0;break e}if(Co[0]<ao){zt=7;break e}r(In,Hr,"ALPH")||(en[0]=In,Wr[0]=Hr+8,On[0]=Po),Hr+=ao,Co-=ao}}if(re=re[0],hr.na=hr.na[0],hr.P=hr.P[0],hr.Sa=hr.Sa[0],zt!=0)break}re=[re],hr.Ja=[hr.Ja],hr.xa=[hr.xa];e:if(Fn=N,zt=$,Xt=re,en=hr.gb[0],Wr=hr.Ja,On=hr.xa,In=zt[0],Hr=!r(Fn,In,"VP8 "),Ci=!r(Fn,In,"VP8L"),t(Fn!=null),t(Xt!=null),t(Wr!=null),t(On!=null),8>Xt[0])zt=7;else{if(Hr||Ci){if(Fn=Mr(Fn,In+4),12<=en&&Fn>en-12){zt=3;break e}if(kr&&Fn>Xt[0]-8){zt=7;break e}Wr[0]=Fn,zt[0]+=8,Xt[0]-=8,On[0]=Ci}else On[0]=5<=Xt[0]&&Fn[In+0]==47&&!(Fn[In+4]>>5),Wr[0]=Xt[0];zt=0}if(re=re[0],hr.Ja=hr.Ja[0],hr.xa=hr.xa[0],$=$[0],zt!=0)break;if(4294967286<hr.Ja)return 3;if(Ke==null||zr||(Ke[0]=hr.xa?2:1),qe=[qe],fn=[fn],hr.xa){if(5>re){zt=7;break}Ke=qe,kr=fn,zr=Be,N==null||5>re?N=0:5<=re&&N[$+0]==47&&!(N[$+4]>>5)?(Xt=[0],Fn=[0],en=[0],ut(Wr=new ke,N,$,re),vn(Wr,Xt,Fn,en)?(Ke!=null&&(Ke[0]=Xt[0]),kr!=null&&(kr[0]=Fn[0]),zr!=null&&(zr[0]=en[0]),N=1):N=0):N=0}else{if(10>re){zt=7;break}Ke=fn,N==null||10>re||!Ao(N,$+3,re-3)?N=0:(kr=N[$+0]|N[$+1]<<8|N[$+2]<<16,zr=16383&(N[$+7]<<8|N[$+6]),N=16383&(N[$+9]<<8|N[$+8]),1&kr||3<(kr>>1&7)||!(kr>>4&1)||kr>>5>=hr.Ja||!zr||!N?N=0:(qe&&(qe[0]=zr),Ke&&(Ke[0]=N),N=1))}if(!N||(qe=qe[0],fn=fn[0],Er&&(_t[0]!=qe||rr[0]!=fn)))return 3;it!=null&&(it[0]=hr,it.offset=$-it.w,t(4294967286>$-it.w),t(it.offset==it.ha-re));break}return zt==0||zt==7&&Er&&it==null?(Be!=null&&(Be[0]|=hr.na!=null&&0<hr.na.length),fe!=null&&(fe[0]=qe),Le!=null&&(Le[0]=fn),0):zt}function Sl(N,$,re){var fe=$.width,Le=$.height,Be=0,qe=0,Ke=fe,it=Le;if($.Da=N!=null&&0<N.Da,$.Da&&(Ke=N.cd,it=N.bd,Be=N.v,qe=N.j,11>re||(Be&=-2,qe&=-2),0>Be||0>qe||0>=Ke||0>=it||Be+Ke>fe||qe+it>Le))return 0;if($.v=Be,$.j=qe,$.va=Be+Ke,$.o=qe+it,$.U=Ke,$.T=it,$.da=N!=null&&0<N.da,$.da){if(!Dr(Ke,it,re=[N.ib],Be=[N.hb]))return 0;$.ib=re[0],$.hb=Be[0]}return $.ob=N!=null&&N.ob,$.Kb=N==null||!N.Sd,$.da&&($.ob=$.ib<3*fe/4&&$.hb<3*Le/4,$.Kb=0),1}function ol(N){if(N==null)return 2;if(11>N.S){var $=N.f.RGBA;$.fb+=(N.height-1)*$.A,$.A=-$.A}else $=N.f.kb,N=N.height,$.O+=(N-1)*$.fa,$.fa=-$.fa,$.N+=(N-1>>1)*$.Ab,$.Ab=-$.Ab,$.W+=(N-1>>1)*$.Db,$.Db=-$.Db,$.F!=null&&($.J+=(N-1)*$.lb,$.lb=-$.lb);return 0}function ku(N,$,re,fe){if(fe==null||0>=N||0>=$)return 2;if(re!=null){if(re.Da){var Le=re.cd,Be=re.bd,qe=-2&re.v,Ke=-2&re.j;if(0>qe||0>Ke||0>=Le||0>=Be||qe+Le>N||Ke+Be>$)return 2;N=Le,$=Be}if(re.da){if(!Dr(N,$,Le=[re.ib],Be=[re.hb]))return 2;N=Le[0],$=Be[0]}}fe.width=N,fe.height=$;e:{var it=fe.width,_t=fe.height;if(N=fe.S,0>=it||0>=_t||!(N>=Ys&&13>N))N=2;else{if(0>=fe.Rd&&fe.sd==null){qe=Be=Le=$=0;var rr=(Ke=it*Di[N])*_t;if(11>N||(Be=(_t+1)/2*($=(it+1)/2),N==12&&(qe=(Le=it)*_t)),(_t=u(rr+2*Be+qe))==null){N=1;break e}fe.sd=_t,11>N?((it=fe.f.RGBA).eb=_t,it.fb=0,it.A=Ke,it.size=rr):((it=fe.f.kb).y=_t,it.O=0,it.fa=Ke,it.Fd=rr,it.f=_t,it.N=0+rr,it.Ab=$,it.Cd=Be,it.ea=_t,it.W=0+rr+Be,it.Db=$,it.Ed=Be,N==12&&(it.F=_t,it.J=0+rr+2*Be),it.Tc=qe,it.lb=Le)}if($=1,Le=fe.S,Be=fe.width,qe=fe.height,Le>=Ys&&13>Le)if(11>Le)N=fe.f.RGBA,$&=(Ke=Math.abs(N.A))*(qe-1)+Be<=N.size,$&=Ke>=Be*Di[Le],$&=N.eb!=null;else{N=fe.f.kb,Ke=(Be+1)/2,rr=(qe+1)/2,it=Math.abs(N.fa),_t=Math.abs(N.Ab);var Er=Math.abs(N.Db),kr=Math.abs(N.lb),hr=kr*(qe-1)+Be;$&=it*(qe-1)+Be<=N.Fd,$&=_t*(rr-1)+Ke<=N.Cd,$=($&=Er*(rr-1)+Ke<=N.Ed)&it>=Be&_t>=Ke&Er>=Ke,$&=N.y!=null,$&=N.f!=null,$&=N.ea!=null,Le==12&&($&=kr>=Be,$&=hr<=N.Tc,$&=N.F!=null)}else $=0;N=$?0:2}}return N!=0||re!=null&&re.fd&&(N=ol(fe)),N}var Na=64,Au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jl=24,Zs=32,Cl=8,Ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ur("Predictor0","PredictorAdd0"),pe.Predictor0=function(){return 4278190080},pe.Predictor1=function(N){return N},pe.Predictor2=function(N,$,re){return $[re+0]},pe.Predictor3=function(N,$,re){return $[re+1]},pe.Predictor4=function(N,$,re){return $[re-1]},pe.Predictor5=function(N,$,re){return tn(tn(N,$[re+1]),$[re+0])},pe.Predictor6=function(N,$,re){return tn(N,$[re-1])},pe.Predictor7=function(N,$,re){return tn(N,$[re+0])},pe.Predictor8=function(N,$,re){return tn($[re-1],$[re+0])},pe.Predictor9=function(N,$,re){return tn($[re+0],$[re+1])},pe.Predictor10=function(N,$,re){return tn(tn(N,$[re-1]),tn($[re+0],$[re+1]))},pe.Predictor11=function(N,$,re){var fe=$[re+0];return 0>=ai(fe>>24&255,N>>24&255,($=$[re-1])>>24&255)+ai(fe>>16&255,N>>16&255,$>>16&255)+ai(fe>>8&255,N>>8&255,$>>8&255)+ai(255&fe,255&N,255&$)?fe:N},pe.Predictor12=function(N,$,re){var fe=$[re+0];return(Bn((N>>24&255)+(fe>>24&255)-(($=$[re-1])>>24&255))<<24|Bn((N>>16&255)+(fe>>16&255)-($>>16&255))<<16|Bn((N>>8&255)+(fe>>8&255)-($>>8&255))<<8|Bn((255&N)+(255&fe)-(255&$)))>>>0},pe.Predictor13=function(N,$,re){var fe=$[re-1];return(Jn((N=tn(N,$[re+0]))>>24&255,fe>>24&255)<<24|Jn(N>>16&255,fe>>16&255)<<16|Jn(N>>8&255,fe>>8&255)<<8|Jn(N>>0&255,fe>>0&255))>>>0};var Kl=pe.PredictorAdd0;pe.PredictorAdd1=_i,Ur("Predictor2","PredictorAdd2"),Ur("Predictor3","PredictorAdd3"),Ur("Predictor4","PredictorAdd4"),Ur("Predictor5","PredictorAdd5"),Ur("Predictor6","PredictorAdd6"),Ur("Predictor7","PredictorAdd7"),Ur("Predictor8","PredictorAdd8"),Ur("Predictor9","PredictorAdd9"),Ur("Predictor10","PredictorAdd10"),Ur("Predictor11","PredictorAdd11"),Ur("Predictor12","PredictorAdd12"),Ur("Predictor13","PredictorAdd13");var Xs=pe.PredictorAdd2;wi("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),wi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Il,is=pe.ColorIndexInverseTransform,Ll=pe.MapARGB,pc=pe.VP8LColorIndexInverseTransformAlpha,zc=pe.MapAlpha,Tl=pe.VP8LPredictorsAdd=[];Tl.length=16,(pe.VP8LPredictors=[]).length=16,(pe.VP8LPredictorsAdd_C=[]).length=16,(pe.VP8LPredictors_C=[]).length=16;var Ga,Rs,Os,Ya,sa,Fs,la,Xu,cs,fs,oo,Es,al,Ql,Eu,Ca,Pl,ba,Dn,Fo,Ki,Bo,ga,An,Ss,Yu,Ju,Nc,e0=u(511),t0=u(2041),w0=u(225),Mi=u(767),Rc=0,dc=t0,ua=w0,os=Mi,ia=e0,Ys=0,mc=1,eu=2,tu=3,ru=4,ho=5,Cs=6,Ho=7,Is=8,Su=9,Oc=10,Cu=[2,3,7],sl=[3,3,11],x0=[280,256,256,256,40],ll=[0,1,1,1,0],gc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Oa=8,Ku=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],jo=null,Ml=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Js=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],r0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ca=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xa=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Fc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],M=[],d=[],k=1,I=2,D=[],q=[];Xr("UpsampleRgbLinePair",fo,3),Xr("UpsampleBgrLinePair",Vo,3),Xr("UpsampleRgbaLinePair",$i,4),Xr("UpsampleBgraLinePair",aa,4),Xr("UpsampleArgbLinePair",Da,4),Xr("UpsampleRgba4444LinePair",ea,2),Xr("UpsampleRgb565LinePair",Qo,2);var J=pe.UpsampleRgbLinePair,oe=pe.UpsampleBgrLinePair,se=pe.UpsampleRgbaLinePair,ge=pe.UpsampleBgraLinePair,Se=pe.UpsampleArgbLinePair,Ue=pe.UpsampleRgba4444LinePair,Je=pe.UpsampleRgb565LinePair,St=16,vt=1<<St-1,xt=-227,tr=482,cr=6,Ar=(256<<cr)-1,Dt=0,Lr=u(256),Ir=u(256),Zr=u(256),Gr=u(256),mn=u(tr-xt),qr=u(tr-xt);Sa("YuvToRgbRow",fo,3),Sa("YuvToBgrRow",Vo,3),Sa("YuvToRgbaRow",$i,4),Sa("YuvToBgraRow",aa,4),Sa("YuvToArgbRow",Da,4),Sa("YuvToRgba4444Row",ea,2),Sa("YuvToRgb565Row",Qo,2);var zn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],En=[0,2,8],Vn=[8,7,6,4,4,2,2,2,1,1,1,1],Ti=1;this.WebPDecodeRGBA=function(N,$,re,fe,Le){var Be=mc,qe=new Zl,Ke=new Ro;qe.ba=Ke,Ke.S=Be,Ke.width=[Ke.width],Ke.height=[Ke.height];var it=Ke.width,_t=Ke.height,rr=new gi;if(rr==null||N==null)var Er=2;else t(rr!=null),Er=Ns(N,$,re,rr.width,rr.height,rr.Pd,rr.Qd,rr.format,null);if(Er!=0?it=0:(it!=null&&(it[0]=rr.width[0]),_t!=null&&(_t[0]=rr.height[0]),it=1),it){Ke.width=Ke.width[0],Ke.height=Ke.height[0],fe!=null&&(fe[0]=Ke.width),Le!=null&&(Le[0]=Ke.height);e:{if(fe=new Ko,(Le=new xu).data=N,Le.w=$,Le.ha=re,Le.kd=1,$=[0],t(Le!=null),((N=Ns(Le.data,Le.w,Le.ha,null,null,null,$,null,Le))==0||N==7)&&$[0]&&(N=4),($=N)==0){if(t(qe!=null),fe.data=Le.data,fe.w=Le.w+Le.offset,fe.ha=Le.ha-Le.offset,fe.put=Li,fe.ac=pi,fe.bc=Yo,fe.ma=qe,Le.xa){if((N=Nt())==null){qe=1;break e}if(function(kr,hr){var fn=[0],zr=[0],zt=[0];t:for(;;){if(kr==null)return 0;if(hr==null)return kr.a=2,0;if(kr.l=hr,kr.a=0,ut(kr.m,hr.data,hr.w,hr.ha),!vn(kr.m,fn,zr,zt)){kr.a=3;break t}if(kr.xb=I,hr.width=fn[0],hr.height=zr[0],!ir(fn[0],zr[0],1,kr,null))break t;return 1}return t(kr.a!=0),0}(N,fe)){if(fe=($=ku(fe.width,fe.height,qe.Oa,qe.ba))==0){t:{fe=N;r:for(;;){if(fe==null){fe=0;break t}if(t(fe.s.yc!=null),t(fe.s.Ya!=null),t(0<fe.s.Wb),t((re=fe.l)!=null),t((Le=re.ma)!=null),fe.xb!=0){if(fe.ca=Le.ba,fe.tb=Le.tb,t(fe.ca!=null),!Sl(Le.Oa,re,tu)){fe.a=2;break r}if(!Br(fe,re.width)||re.da)break r;if((re.da||pn(fe.ca.S))&&ur(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&ur()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!Kr(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!Fe(fe,fe.V,fe.Ba,fe.c,fe.i,re.o,De))break r;Le.Dc=fe.Ma,fe=1;break t}t(fe.a!=0),fe=0}fe=!fe}fe&&($=N.a)}else $=N.a}else{if((N=new Gl)==null){qe=1;break e}if(N.Fa=Le.na,N.P=Le.P,N.qc=Le.Sa,_l(N,fe)){if(($=ku(fe.width,fe.height,qe.Oa,qe.ba))==0){if(N.Aa=0,re=qe.Oa,t((Le=N)!=null),re!=null){if(0<(it=0>(it=re.Md)?0:100<it?255:255*it/100)){for(_t=rr=0;4>_t;++_t)12>(Er=Le.pb[_t]).lc&&(Er.ia=it*Vn[0>Er.lc?0:Er.lc]>>3),rr|=Er.ia;rr&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=re.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}Hl(N,fe)||($=N.a)}}else $=N.a}$==0&&qe.Oa!=null&&qe.Oa.fd&&($=ol(qe.ba))}qe=$}Be=qe!=0?null:11>Be?Ke.f.RGBA.eb:Ke.f.kb.y}else Be=null;return Be};var Di=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(pe,Ne){for(var Ve="",be=0;be<4;be++)Ve+=String.fromCharCode(pe[Ne++]);return Ve}function w(pe,Ne){return(pe[Ne+0]<<0|pe[Ne+1]<<8|pe[Ne+2]<<16)>>>0}function E(pe,Ne){return(pe[Ne+0]<<0|pe[Ne+1]<<8|pe[Ne+2]<<16|pe[Ne+3]<<24)>>>0}new f;var L=[0],C=[0],F=[],B=new f,G=e,H=function(pe,Ne){var Ve={},be=0,Ce=!1,Oe=0,nt=0;if(Ve.frames=[],!function(Re,Pe,dt,Et){for(var Pt=0;Pt<Et;Pt++)if(Re[Pe+Pt]!=dt.charCodeAt(Pt))return!0;return!1}(pe,Ne,"RIFF",4)){var mt,ht;for(E(pe,Ne+=4),Ne+=8;Ne<pe.length;){var He=v(pe,Ne),ut=E(pe,Ne+=4);Ne+=4;var bt=ut+(1&ut);switch(He){case"VP8 ":case"VP8L":Ve.frames[be]===void 0&&(Ve.frames[be]={}),(ke=Ve.frames[be]).src_off=Ce?nt:Ne-8,ke.src_size=Oe+ut+8,be++,Ce&&(Ce=!1,Oe=0,nt=0);break;case"VP8X":(ke=Ve.header={}).feature_flags=pe[Ne];var Xe=Ne+4;ke.canvas_width=1+w(pe,Xe),Xe+=3,ke.canvas_height=1+w(pe,Xe),Xe+=3;break;case"ALPH":Ce=!0,Oe=bt+8,nt=Ne-8;break;case"ANIM":(ke=Ve.header).bgcolor=E(pe,Ne),Xe=Ne+4,ke.loop_count=(mt=pe)[(ht=Xe)+0]<<0|mt[ht+1]<<8,Xe+=2;break;case"ANMF":var We,ke;(ke=Ve.frames[be]={}).offset_x=2*w(pe,Ne),Ne+=3,ke.offset_y=2*w(pe,Ne),Ne+=3,ke.width=1+w(pe,Ne),Ne+=3,ke.height=1+w(pe,Ne),Ne+=3,ke.duration=w(pe,Ne),Ne+=3,We=pe[Ne++],ke.dispose=1&We,ke.blend=We>>1&1}He!="ANMF"&&(Ne+=bt)}return Ve}}(G,0);H.response=G,H.rgbaoutput=!0,H.dataurl=!1;var Z=H.header?H.header:null,ee=H.frames?H.frames:null;if(Z){Z.loop_counter=Z.loop_count,L=[Z.canvas_height],C=[Z.canvas_width];for(var Y=0;Y<ee.length&&ee[Y].blend!=0;Y++);}var le=ee[0],ce=B.WebPDecodeRGBA(G,le.src_off,le.src_size,C,L);le.rgba=ce,le.imgwidth=C[0],le.imgheight=L[0];for(var ve=0;ve<C[0]*L[0]*4;ve++)F[ve]=ce[ve];return this.width=C,this.height=L,this.data=F,this}(function(e){var t=function(){return typeof Dg=="function"},r=function(L,C,F,B){var G=4,H=c;switch(B){case e.image_compression.FAST:G=1,H=u;break;case e.image_compression.MEDIUM:G=6,H=s;break;case e.image_compression.SLOW:G=9,H=f}L=n(L,C,F,H);var Z=Dg(L,{level:G});return e.__addimage__.arrayBufferToBinaryString(Z)},n=function(L,C,F,B){for(var G,H,Z,ee=L.length/C,Y=new Uint8Array(L.length+ee),le=w(),ce=0;ce<ee;ce+=1){if(Z=ce*C,G=L.subarray(Z,Z+C),B)Y.set(B(G,F,H),Z+ce);else{for(var ve,pe=le.length,Ne=[];ve<pe;ve+=1)Ne[ve]=le[ve](G,F,H);var Ve=E(Ne.concat());Y.set(Ne[Ve],Z+ce)}H=G}return Y},o=function(L){var C=Array.apply([],L);return C.unshift(0),C},u=function(L,C){var F,B=[],G=L.length;B[0]=1;for(var H=0;H<G;H+=1)F=L[H-C]||0,B[H+1]=L[H]-F+256&255;return B},c=function(L,C,F){var B,G=[],H=L.length;G[0]=2;for(var Z=0;Z<H;Z+=1)B=F&&F[Z]||0,G[Z+1]=L[Z]-B+256&255;return G},s=function(L,C,F){var B,G,H=[],Z=L.length;H[0]=3;for(var ee=0;ee<Z;ee+=1)B=L[ee-C]||0,G=F&&F[ee]||0,H[ee+1]=L[ee]+256-(B+G>>>1)&255;return H},f=function(L,C,F){var B,G,H,Z,ee=[],Y=L.length;ee[0]=4;for(var le=0;le<Y;le+=1)B=L[le-C]||0,G=F&&F[le]||0,H=F&&F[le-C]||0,Z=v(B,G,H),ee[le+1]=L[le]-Z+256&255;return ee},v=function(L,C,F){if(L===C&&C===F)return L;var B=Math.abs(C-F),G=Math.abs(L-F),H=Math.abs(L+C-F-F);return B<=G&&B<=H?L:G<=H?C:F},w=function(){return[o,u,c,s,f]},E=function(L){var C=L.map(function(F){return F.reduce(function(B,G){return B+Math.abs(G)},0)});return C.indexOf(Math.min.apply(null,C))};e.processPNG=function(L,C,F,B){var G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt=this.decode.FLATE_DECODE,ht="";if(this.__addimage__.isArrayBuffer(L)&&(L=new Uint8Array(L)),this.__addimage__.isArrayBufferView(L)){if(L=(Z=new f9(L)).imgData,H=Z.bits,G=Z.colorSpace,Y=Z.colors,[4,6].indexOf(Z.colorType)!==-1){if(Z.bits===8){pe=(ve=Z.pixelBitlength==32?new Uint32Array(Z.decodePixels().buffer):Z.pixelBitlength==16?new Uint16Array(Z.decodePixels().buffer):new Uint8Array(Z.decodePixels().buffer)).length,Ve=new Uint8Array(pe*Z.colors),Ne=new Uint8Array(pe);var He,ut=Z.pixelBitlength-Z.bits;for(Oe=0,nt=0;Oe<pe;Oe++){for(Ce=ve[Oe],He=0;He<ut;)Ve[nt++]=Ce>>>He&255,He+=Z.bits;Ne[Oe]=Ce>>>He&255}}if(Z.bits===16){pe=(ve=new Uint32Array(Z.decodePixels().buffer)).length,Ve=new Uint8Array(pe*(32/Z.pixelBitlength)*Z.colors),Ne=new Uint8Array(pe*(32/Z.pixelBitlength)),be=Z.colors>1,Oe=0,nt=0;for(var bt=0;Oe<pe;)Ce=ve[Oe++],Ve[nt++]=Ce>>>0&255,be&&(Ve[nt++]=Ce>>>16&255,Ce=ve[Oe++],Ve[nt++]=Ce>>>0&255),Ne[bt++]=Ce>>>16&255;H=8}B!==e.image_compression.NONE&&t()?(L=r(Ve,Z.width*Z.colors,Z.colors,B),ce=r(Ne,Z.width,1,B)):(L=Ve,ce=Ne,mt=void 0)}if(Z.colorType===3&&(G=this.color_spaces.INDEXED,le=Z.palette,Z.transparency.indexed)){var Xe=Z.transparency.indexed,We=0;for(Oe=0,pe=Xe.length;Oe<pe;++Oe)We+=Xe[Oe];if((We/=255)===pe-1&&Xe.indexOf(0)!==-1)ee=[Xe.indexOf(0)];else if(We!==pe){for(ve=Z.decodePixels(),Ne=new Uint8Array(ve.length),Oe=0,pe=ve.length;Oe<pe;Oe++)Ne[Oe]=Xe[ve[Oe]];ce=r(Ne,Z.width,1)}}var ke=function(Re){var Pe;switch(Re){case e.image_compression.FAST:Pe=11;break;case e.image_compression.MEDIUM:Pe=13;break;case e.image_compression.SLOW:Pe=14;break;default:Pe=12}return Pe}(B);return mt===this.decode.FLATE_DECODE&&(ht="/Predictor "+ke+" "),ht+="/Colors "+Y+" /BitsPerComponent "+H+" /Columns "+Z.width,(this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:F,data:L,index:C,filter:mt,decodeParameters:ht,transparency:ee,palette:le,sMask:ce,predictor:ke,width:Z.width,height:Z.height,bitsPerComponent:H,colorSpace:G}}}})(to.API),function(e){e.processGIF89A=function(t,r,n,o){var u=new h9(t),c=u.width,s=u.height,f=[];u.decodeAndBlitFrameRGBA(0,f);var v={data:f,width:c,height:s},w=new cm(100).encode(v,100);return e.processJPEG.call(this,w,r,n,o)},e.processGIF87A=e.processGIF89A}(to.API),h0.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:n,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},h0.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ma.log("bit decode error:"+r)}},h0.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var u=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*o*4,s=0;s<8&&8*o+s<this.width;s++){var f=this.palette[u>>7-s&1];this.data[c+4*s]=f.blue,this.data[c+4*s+1]=f.green,this.data[c+4*s+2]=f.red,this.data[c+4*s+3]=255}r!==0&&(this.pos+=4-r)}},h0.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++){var u=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*o*4,s=u>>4,f=15&u,v=this.palette[s];if(this.data[c]=v.blue,this.data[c+1]=v.green,this.data[c+2]=v.red,this.data[c+3]=255,2*o+1>=this.width)break;v=this.palette[f],this.data[c+4]=v.blue,this.data[c+4+1]=v.green,this.data[c+4+2]=v.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},h0.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*n;if(o<this.palette.length){var c=this.palette[o];this.data[u]=c.red,this.data[u+1]=c.green,this.data[u+2]=c.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},h0.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&t)/t*255|0,s=(u>>5&t)/t*255|0,f=(u>>10&t)/t*255|0,v=u>>15?255:0,w=n*this.width*4+4*o;this.data[w]=f,this.data[w+1]=s,this.data[w+2]=c,this.data[w+3]=v}this.pos+=e}},h0.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,u=0;u<this.width;u++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(c&t)/t*255|0,f=(c>>5&r)/r*255|0,v=(c>>11)/t*255|0,w=o*this.width*4+4*u;this.data[w]=v,this.data[w+1]=f,this.data[w+2]=s,this.data[w+3]=255}this.pos+=e}},h0.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=u,this.data[c+1]=o,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},h0.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=u,this.data[s+1]=o,this.data[s+2]=n,this.data[s+3]=c}},h0.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,o){var u=new h0(t,!1),c=u.width,s=u.height,f={data:u.getData(),width:c,height:s},v=new cm(100).encode(f,100);return e.processJPEG.call(this,v,r,n,o)}}(to.API),cb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,o){var u=new cb(t),c=u.width,s=u.height,f={data:u.getData(),width:c,height:s},v=new cm(100).encode(f,100);return e.processJPEG.call(this,v,r,n,o)}}(to.API),to.API.processRGBA=function(e,t,r){for(var n=e.data,o=n.length,u=new Uint8Array(o/4*3),c=new Uint8Array(o/4),s=0,f=0,v=0;v<o;v+=4){var w=n[v],E=n[v+1],L=n[v+2],C=n[v+3];u[s++]=w,u[s++]=E,u[s++]=L,c[f++]=C}var F=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:F,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},to.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Eh=to.API,i1=Eh.getCharWidthsArray=function(e,t){var r,n,o=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:o.metadata.Unicode.widths,f=s.fof?s.fof:1,v=t.kerning?t.kerning:o.metadata.Unicode.kerning,w=v.fof?v.fof:1,E=t.doKerning!==!1,L=0,C=e.length,F=0,B=s[0]||f,G=[];for(r=0;r<C;r++)n=e.charCodeAt(r),typeof o.metadata.widthOfString=="function"?G.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+c*(1e3/u)||0)/1e3):(L=E&&_a(v[n])==="object"&&!isNaN(parseInt(v[n][F],10))?v[n][F]/w:0,G.push((s[n]||B)/f+L)),F=n;return G},ab=Eh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return Eh.processArabic&&(e=Eh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,o)/r:i1.apply(this,arguments).reduce(function(u,c){return u+c},0)},sb=function(e,t,r,n){for(var o=[],u=0,c=e.length,s=0;u!==c&&s+t[u]<r;)s+=t[u],u++;o.push(e.slice(0,u));var f=u;for(s=0;u!==c;)s+t[u]>n&&(o.push(e.slice(f,u)),s=0,f=u),s+=t[u],u++;return f!==u&&o.push(e.slice(f,u)),o},lb=function(e,t,r){r||(r={});var n,o,u,c,s,f,v,w=[],E=[w],L=r.textIndent||0,C=0,F=0,B=e.split(" "),G=i1.apply(this,[" ",r])[0];if(f=r.lineIndent===-1?B[0].length+2:r.lineIndent||0){var H=Array(f).join(" "),Z=[];B.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?Z=Z.concat(Y.map(function(le,ce){return(ce&&le.length?`
`:"")+le})):Z.push(Y[0])}),B=Z,f=ab.apply(this,[H,r])}for(u=0,c=B.length;u<c;u++){var ee=0;if(n=B[u],f&&n[0]==`
`&&(n=n.substr(1),ee=1),L+C+(F=(o=i1.apply(this,[n,r])).reduce(function(Y,le){return Y+le},0))>t||ee){if(F>t){for(s=sb.apply(this,[n,o,t-(L+C),t]),w.push(s.shift()),w=[s.pop()];s.length;)E.push([s.shift()]);F=o.slice(n.length-(w[0]?w[0].length:0)).reduce(function(Y,le){return Y+le},0)}else w=[n];E.push(w),L=F+f,C=G}else w.push(n),L+=C+F,C=G}return v=f?function(Y,le){return(le?H:"")+Y.join(" ")}:function(Y){return Y.join(" ")},E.map(v)},Eh.splitTextToSize=function(e,t,r){var n,o=(r=r||{}).fontSize||this.internal.getFontSize(),u=function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var E=this.internal.getFont(w.fontName,w.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/o;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,u.lineIndent=r.lineIndent;var s,f,v=[];for(s=0,f=n.length;s<f;s++)v=v.concat(lb.apply(this,[n[s],c,u]));return v},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},o=0;o<t.length;o++)r[t[o]]="0123456789abcdef"[o],n["0123456789abcdef"[o]]=t[o];var u=function(E){return"0x"+parseInt(E,10).toString(16)},c=e.__fontmetrics__.compress=function(E){var L,C,F,B,G=["{"];for(var H in E){if(L=E[H],isNaN(parseInt(H,10))?C="'"+H+"'":(H=parseInt(H,10),C=(C=u(H).slice(2)).slice(0,-1)+n[C.slice(-1)]),typeof L=="number")L<0?(F=u(L).slice(3),B="-"):(F=u(L).slice(2),B=""),F=B+F.slice(0,-1)+n[F.slice(-1)];else{if(_a(L)!=="object")throw new Error("Don't know what to do with value type "+_a(L)+".");F=c(L)}G.push(C+F)}return G.push("}"),G.join("")},s=e.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var L,C,F,B,G={},H=1,Z=G,ee=[],Y="",le="",ce=E.length-1,ve=1;ve<ce;ve+=1)(B=E[ve])=="'"?L?(F=L.join(""),L=void 0):L=[]:L?L.push(B):B=="{"?(ee.push([Z,F]),Z={},F=void 0):B=="}"?((C=ee.pop())[0][C[1]]=Z,F=void 0,Z=C[0]):B=="-"?H=-1:F===void 0?r.hasOwnProperty(B)?(Y+=r[B],F=parseInt(Y,16)*H,H=1,Y=""):Y+=B:r.hasOwnProperty(B)?(le+=r[B],Z[F]=parseInt(le,16)*H,H=1,F=void 0,le=""):le+=B;return G},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},w={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(E){var L=E.font,C=w.Unicode[L.postScriptName];C&&(L.metadata.Unicode={},L.metadata.Unicode.widths=C.widths,L.metadata.Unicode.kerning=C.kerning);var F=v.Unicode[L.postScriptName];F&&(L.metadata.Unicode.encoding=F,L.encoding=F.codePages[0])}])}(to.API),function(e){var t=function(r){for(var n=r.length,o=new Uint8Array(n),u=0;u<n;u++)o[u]=r.charCodeAt(u);return o};e.API.events.push(["addFont",function(r){var n=void 0,o=r.font,u=r.instance;if(!o.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=u.existsFileInVFS(o.postScriptName)===!1?u.loadFile(o.postScriptName):u.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Gp(s)),c.metadata=e.API.TTFFont.open(s),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,n)}}])}(to),function(e){function t(){return(ro.canvg?Promise.resolve(ro.canvg):rd(()=>import("./index.es.7d29ad16.js"),[],import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}to.API.addSvgAsImage=function(r,n,o,u,c,s,f,v){if(isNaN(n)||isNaN(o))throw Ma.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(c))throw Ma.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=u,w.height=c;var E=w.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,w.width,w.height);var L={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return t().then(function(F){return F.fromString(E,r,L)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(L)}).then(function(){C.addImage(w.toDataURL("image/jpeg",1),n,o,u,c,f,v)})}}(),to.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(t,r);return this},to.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,o,u,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(c),f=[],v=0,w=0,E=0;function L(F,B){var G,H=!1;for(G=0;G<F.length;G+=1)F[G]===B&&(H=!0);return H}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=s.length;for(E=0;E<C;E+=1)r[s[E]].value=r[s[E]].defaultValue,r[s[E]].explicitSet=!1}if(_a(e)==="object"){for(o in e)if(u=e[o],L(s,o)&&u!==void 0){if(r[o].type==="boolean"&&typeof u=="boolean")r[o].value=u;else if(r[o].type==="name"&&L(r[o].valueSet,u))r[o].value=u;else if(r[o].type==="integer"&&Number.isInteger(u))r[o].value=u;else if(r[o].type==="array"){for(v=0;v<u.length;v+=1)if(n=!0,u[v].length===1&&typeof u[v][0]=="number")f.push(String(u[v]-1));else if(u[v].length>1){for(w=0;w<u[v].length;w+=1)typeof u[v][w]!="number"&&(n=!1);n===!0&&f.push([u[v][0]-1,u[v][1]-1].join(" "))}r[o].value="["+f.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,B=[];for(F in r)r[F].explicitSet===!0&&(r[F].type==="name"?B.push("/"+F+" /"+r[F].value):B.push("/"+F+" "+r[F].value));B.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+B.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),v=u.length+c.length+s.length+o.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(o+u+c+s+f),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(to.API),function(e){var t=e.API,r=t.pdfEscape16=function(u,c){for(var s,f=c.metadata.Unicode.widths,v=["","0","00","000","0000"],w=[""],E=0,L=u.length;E<L;++E){if(s=c.metadata.characterToGlyph(u.charCodeAt(E)),c.metadata.glyIdsUsed.push(s),c.metadata.toUnicode[s]=u.charCodeAt(E),f.indexOf(s)==-1&&(f.push(s),f.push([parseInt(c.metadata.widthOfGlyph(s),10)])),s=="0")return w.join("");s=s.toString(16),w.push(v[4-s.length],s)}return w.join("")},n=function(u){var c,s,f,v,w,E,L;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],E=0,L=(s=Object.keys(u).sort(function(C,F){return C-F})).length;E<L;E++)c=s[E],f.length>=100&&(w+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),u[c]!==void 0&&u[c]!==null&&typeof u[c].toString=="function"&&(v=("0000"+u[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+v+">"));return f.length&&(w+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(c){var s=c.font,f=c.out,v=c.newObject,w=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var E=s.metadata.Unicode.widths,L=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),C="",F=0;F<L.length;F++)C+=String.fromCharCode(L[F]);var B=v();w({data:C,addLength1:!0,objectId:B}),f("endobj");var G=v();w({data:n(s.metadata.toUnicode),addLength1:!0,objectId:G}),f("endobj");var H=v();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+zh(s.fontName)),f("/FontFile2 "+B+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),f("/Flags "+s.metadata.flags),f("/StemV "+s.metadata.stemV),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f(">>"),f("endobj");var Z=v();f("<<"),f("/Type /Font"),f("/BaseFont /"+zh(s.fontName)),f("/FontDescriptor "+H+" 0 R"),f("/W "+e.API.PDFObject.convert(E)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+s.encoding+")"),f(">>"),f(">>"),f("endobj"),s.objectNumber=v(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+G+" 0 R"),f("/BaseFont /"+zh(s.fontName)),f("/Encoding /"+s.encoding),f("/DescendantFonts ["+Z+" 0 R]"),f(">>"),f("endobj"),s.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(c){var s=c.font,f=c.out,v=c.newObject,w=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var E=s.metadata.rawData,L="",C=0;C<E.length;C++)L+=String.fromCharCode(E[C]);var F=v();w({data:L,addLength1:!0,objectId:F}),f("endobj");var B=v();w({data:n(s.metadata.toUnicode),addLength1:!0,objectId:B}),f("endobj");var G=v();f("<<"),f("/Descent "+s.metadata.decender),f("/CapHeight "+s.metadata.capHeight),f("/StemV "+s.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+F+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),f("/FontName /"+zh(s.fontName)),f("/ItalicAngle "+s.metadata.italicAngle),f("/Ascent "+s.metadata.ascender),f(">>"),f("endobj"),s.objectNumber=v();for(var H=0;H<s.metadata.hmtx.widths.length;H++)s.metadata.hmtx.widths[H]=parseInt(s.metadata.hmtx.widths[H]*(1e3/s.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+B+" 0 R/BaseFont/"+zh(s.fontName)+"/FontDescriptor "+G+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),f("endobj"),s.isAlreadyPutted=!0}})(u)}]);var o=function(u){var c,s=u.text||"",f=u.x,v=u.y,w=u.options||{},E=u.mutex||{},L=E.pdfEscape,C=E.activeFontKey,F=E.fonts,B=C,G="",H=0,Z="",ee=F[B].encoding;if(F[B].encoding!=="Identity-H")return{text:s,x:f,y:v,options:w,mutex:E};for(Z=s,B=C,Array.isArray(s)&&(Z=s[0]),H=0;H<Z.length;H+=1)F[B].metadata.hasOwnProperty("cmap")&&(c=F[B].metadata.cmap.unicode.codeMap[Z[H].charCodeAt(0)]),c||Z[H].charCodeAt(0)<256&&F[B].metadata.hasOwnProperty("Unicode")?G+=Z[H]:G+="";var Y="";return parseInt(B.slice(1))<14||ee==="WinAnsiEncoding"?Y=L(G,B).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):ee==="Identity-H"&&(Y=r(G,F[B])),E.isHex=!0,{text:Y,x:f,y:v,options:w,mutex:E}};t.events.push(["postProcessText",function(u){var c=u.text||"",s=[],f={text:c,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(c)){var v=0;for(v=0;v<c.length;v+=1)Array.isArray(c[v])&&c[v].length===3?s.push([o(Object.assign({},f,{text:c[v][0]})).text,c[v][1],c[v][2]]):s.push(o(Object.assign({},f,{text:c[v]})).text);u.text=s}else u.text=o(Object.assign({},f,{text:c})).text}])}(to),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(to.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var o,u,c,s,f,v,w,E=t,L=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},B={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},G=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],H=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Z=!1,ee=0;this.__bidiEngine__={};var Y=function(be){var Ce=be.charCodeAt(),Oe=Ce>>8,nt=B[Oe];return nt!==void 0?E[256*nt+(255&Ce)]:Oe===252||Oe===253?"AL":H.test(Oe)?"L":Oe===8?"R":"N"},le=function(be){for(var Ce,Oe=0;Oe<be.length;Oe++){if((Ce=Y(be.charAt(Oe)))==="L")return!1;if(Ce==="R")return!0}return!1},ce=function(be,Ce,Oe,nt){var mt,ht,He,ut,bt=Ce[nt];switch(bt){case"L":case"R":Z=!1;break;case"N":case"AN":break;case"EN":Z&&(bt="AN");break;case"AL":Z=!0,bt="R";break;case"WS":bt="N";break;case"CS":nt<1||nt+1>=Ce.length||(mt=Oe[nt-1])!=="EN"&&mt!=="AN"||(ht=Ce[nt+1])!=="EN"&&ht!=="AN"?bt="N":Z&&(ht="AN"),bt=ht===mt?ht:"N";break;case"ES":bt=(mt=nt>0?Oe[nt-1]:"B")==="EN"&&nt+1<Ce.length&&Ce[nt+1]==="EN"?"EN":"N";break;case"ET":if(nt>0&&Oe[nt-1]==="EN"){bt="EN";break}if(Z){bt="N";break}for(He=nt+1,ut=Ce.length;He<ut&&Ce[He]==="ET";)He++;bt=He<ut&&Ce[He]==="EN"?"EN":"N";break;case"NSM":if(c&&!s){for(ut=Ce.length,He=nt+1;He<ut&&Ce[He]==="NSM";)He++;if(He<ut){var Xe=be[nt],We=Xe>=1425&&Xe<=2303||Xe===64286;if(mt=Ce[He],We&&(mt==="R"||mt==="AL")){bt="R";break}}}bt=nt<1||(mt=Ce[nt-1])==="B"?"N":Oe[nt-1];break;case"B":Z=!1,o=!0,bt=ee;break;case"S":u=!0,bt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Z=!1;break;case"BN":bt="N"}return bt},ve=function(be,Ce,Oe){var nt=be.split("");return Oe&&pe(nt,Oe,{hiLevel:ee}),nt.reverse(),Ce&&Ce.reverse(),nt.join("")},pe=function(be,Ce,Oe){var nt,mt,ht,He,ut,bt=-1,Xe=be.length,We=0,ke=[],Re=ee?C:L,Pe=[];for(Z=!1,o=!1,u=!1,mt=0;mt<Xe;mt++)Pe[mt]=Y(be[mt]);for(ht=0;ht<Xe;ht++){if(ut=We,ke[ht]=ce(be,Pe,ke,ht),nt=240&(We=Re[ut][F[ke[ht]]]),We&=15,Ce[ht]=He=Re[We][5],nt>0)if(nt===16){for(mt=bt;mt<ht;mt++)Ce[mt]=1;bt=-1}else bt=-1;if(Re[We][6])bt===-1&&(bt=ht);else if(bt>-1){for(mt=bt;mt<ht;mt++)Ce[mt]=He;bt=-1}Pe[ht]==="B"&&(Ce[ht]=0),Oe.hiLevel|=He}u&&function(dt,Et,Pt){for(var Kt=0;Kt<Pt;Kt++)if(dt[Kt]==="S"){Et[Kt]=ee;for(var $t=Kt-1;$t>=0&&dt[$t]==="WS";$t--)Et[$t]=ee}}(Pe,Ce,Xe)},Ne=function(be,Ce,Oe,nt,mt){if(!(mt.hiLevel<be)){if(be===1&&ee===1&&!o)return Ce.reverse(),void(Oe&&Oe.reverse());for(var ht,He,ut,bt,Xe=Ce.length,We=0;We<Xe;){if(nt[We]>=be){for(ut=We+1;ut<Xe&&nt[ut]>=be;)ut++;for(bt=We,He=ut-1;bt<He;bt++,He--)ht=Ce[bt],Ce[bt]=Ce[He],Ce[He]=ht,Oe&&(ht=Oe[bt],Oe[bt]=Oe[He],Oe[He]=ht);We=ut}We++}}},Ve=function(be,Ce,Oe){var nt=be.split(""),mt={hiLevel:ee};return Oe||(Oe=[]),pe(nt,Oe,mt),function(ht,He,ut){if(ut.hiLevel!==0&&w)for(var bt,Xe=0;Xe<ht.length;Xe++)He[Xe]===1&&(bt=G.indexOf(ht[Xe]))>=0&&(ht[Xe]=G[bt+1])}(nt,Oe,mt),Ne(2,nt,Ce,Oe,mt),Ne(1,nt,Ce,Oe,mt),nt.join("")};return this.__bidiEngine__.doBidiReorder=function(be,Ce,Oe){if(function(mt,ht){if(ht)for(var He=0;He<mt.length;He++)ht[He]=He;s===void 0&&(s=le(mt)),v===void 0&&(v=le(mt))}(be,Ce),c||!f||v)if(c&&f&&s^v)ee=s?1:0,be=ve(be,Ce,Oe);else if(!c&&f&&v)ee=s?1:0,be=Ve(be,Ce,Oe),be=ve(be,Ce);else if(!c||s||f||v){if(c&&!f&&s^v)be=ve(be,Ce),s?(ee=0,be=Ve(be,Ce,Oe)):(ee=1,be=Ve(be,Ce,Oe),be=ve(be,Ce));else if(c&&s&&!f&&v)ee=1,be=Ve(be,Ce,Oe),be=ve(be,Ce);else if(!c&&!f&&s^v){var nt=w;s?(ee=1,be=Ve(be,Ce,Oe),ee=0,w=!1,be=Ve(be,Ce,Oe),w=nt):(ee=0,be=Ve(be,Ce,Oe),be=ve(be,Ce),ee=1,w=!1,be=Ve(be,Ce,Oe),w=nt,be=ve(be,Ce))}}else ee=0,be=Ve(be,Ce,Oe);else ee=s?1:0,be=Ve(be,Ce,Oe);return be},this.__bidiEngine__.setOptions=function(be){be&&(c=be.isInputVisual,f=be.isOutputVisual,s=be.isInputRtl,v=be.isOutputRtl,w=be.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var o=n.text,u=(n.x,n.y,n.options||{}),c=(n.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(o)==="[object Array]"){var s=0;for(c=[],s=0;s<o.length;s+=1)Object.prototype.toString.call(o[s])==="[object Array]"?c.push([r.doBidiReorder(o[s][0]),o[s][1],o[s][2]]):c.push([r.doBidiReorder(o[s])]);n.text=c}else n.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])}(to),to.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Rf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new C9(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new p9(this.contents),this.head=new m9(this),this.name=new b9(this),this.cmap=new d6(this),this.toUnicode={},this.hhea=new g9(this),this.maxp=new w9(this),this.hmtx=new x9(this),this.post=new v9(this),this.os2=new y9(this),this.loca=new S9(this),this.glyf=new k9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,o,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var c,s,f,v;for(v=[],c=0,s=(f=this.bbox).length;c<s;c++)t=f[c],v.push(Math.round(t*this.scaleFactor));return v}.call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(r=o>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var o,u,c,s;for(c=0,u=0,s=(t=""+t).length;0<=s?u<s:u>s;u=0<=s?++u:--u)o=t.charCodeAt(u),c+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/r)||0;return c*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var b0,Rf=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,o;for(o=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)o.push(this.writeByte(t.charCodeAt(r)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,o,u,c,s,f;return t=this.readByte(),r=this.readByte(),n=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),s=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^u)+65536*(255^c)+256*(255^s)+(255^f)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*o+16777216*u+65536*c+256*s+f},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,o,u;for(u=[],n=0,o=t.length;n<o;n++)r=t[n],u.push(this.writeByte(r));return u},e}(),p9=function(){var e;function t(r){var n,o,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,u=this.tableCount;0<=u?o<u:o>u;o=0<=u?++o:--o)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,o,u,c,s,f,v,w,E,L,C,F,B;for(B in C=Object.keys(r).length,f=Math.log(2),E=16*Math.floor(Math.log(C)/f),c=Math.floor(E/f),w=16*C-E,(o=new Rf).writeInt(this.scalarType),o.writeShort(C),o.writeShort(E),o.writeShort(c),o.writeShort(w),u=16*C,v=o.pos+u,s=null,F=[],r)for(L=r[B],o.writeString(B),o.writeInt(e(L)),o.writeInt(v),o.writeInt(L.length),F=F.concat(L),B==="head"&&(s=v),v+=L.length;v%4;)F.push(0),v++;return o.write(F),n=2981146554-e(o.data),o.pos=s+8,o.writeUInt32(n),o.data},e=function(r){var n,o,u,c;for(r=m6.call(r);r.length%4;)r.push(0);for(u=new Rf(r),o=0,n=0,c=r.length;n<c;n=n+=4)o+=u.readUInt32();return 4294967295&o},t}(),d9={}.hasOwnProperty,G0=function(e,t){for(var r in t)d9.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};b0=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var m9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Rf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),fb=function(){function e(t,r){var n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(C=t.readUInt16(),L=C/2,t.pos+=6,u=function(){var Y,le;for(le=[],f=Y=0;0<=L?Y<L:Y>L;f=0<=L?++Y:--Y)le.push(t.readUInt16());return le}(),t.pos+=2,B=function(){var Y,le;for(le=[],f=Y=0;0<=L?Y<L:Y>L;f=0<=L?++Y:--Y)le.push(t.readUInt16());return le}(),v=function(){var Y,le;for(le=[],f=Y=0;0<=L?Y<L:Y>L;f=0<=L?++Y:--Y)le.push(t.readUInt16());return le}(),w=function(){var Y,le;for(le=[],f=Y=0;0<=L?Y<L:Y>L;f=0<=L?++Y:--Y)le.push(t.readUInt16());return le}(),o=(this.length-t.pos+this.offset)/2,s=function(){var Y,le;for(le=[],f=Y=0;0<=o?Y<o:Y>o;f=0<=o?++Y:--Y)le.push(t.readUInt16());return le}(),f=H=0,ee=u.length;H<ee;f=++H)for(G=u[f],n=Z=F=B[f];F<=G?Z<=G:Z>=G;n=F<=G?++Z:--Z)w[f]===0?c=n+v[f]:(c=s[w[f]/2+(n-F)-(L-f)]||0)!==0&&(c+=v[f]),this.codeMap[n]=65535&c}t.pos=E}return e.encode=function(t,r){var n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt,Xe,We,ke,Re,Pe,dt,Et,Pt,Kt,$t,br,Gt,Rr;switch(nt=new Rf,c=Object.keys(t).sort(function(Mr,Kr){return Mr-Kr}),r){case"macroman":for(B=0,G=function(){var Mr=[];for(F=0;F<256;++F)Mr.push(0);return Mr}(),Z={0:0},u={},mt=0,bt=c.length;mt<bt;mt++)Z[$t=t[o=c[mt]]]==null&&(Z[$t]=++B),u[o]={old:t[o],new:Z[t[o]]},G[o]=Z[t[o]];return nt.writeUInt16(1),nt.writeUInt16(0),nt.writeUInt32(12),nt.writeUInt16(0),nt.writeUInt16(262),nt.writeUInt16(0),nt.write(G),{charMap:u,subtable:nt.data,maxGlyphID:B+1};case"unicode":for(Ce=[],E=[],ee=0,Z={},n={},H=v=null,ht=0,Xe=c.length;ht<Xe;ht++)Z[le=t[o=c[ht]]]==null&&(Z[le]=++ee),n[o]={old:le,new:Z[le]},s=Z[le]-o,H!=null&&s===v||(H&&E.push(H),Ce.push(o),v=s),H=o;for(H&&E.push(H),E.push(65535),Ce.push(65535),Ve=2*(Ne=Ce.length),pe=2*Math.pow(Math.log(Ne)/Math.LN2,2),L=Math.log(pe/2)/Math.LN2,ve=2*Ne-pe,f=[],ce=[],C=[],F=He=0,We=Ce.length;He<We;F=++He){if(be=Ce[F],w=E[F],be===65535){f.push(0),ce.push(0);break}if(be-(Oe=n[be].new)>=32768)for(f.push(0),ce.push(2*(C.length+Ne-F)),o=ut=be;be<=w?ut<=w:ut>=w;o=be<=w?++ut:--ut)C.push(n[o].new);else f.push(Oe-be),ce.push(0)}for(nt.writeUInt16(3),nt.writeUInt16(1),nt.writeUInt32(12),nt.writeUInt16(4),nt.writeUInt16(16+8*Ne+2*C.length),nt.writeUInt16(0),nt.writeUInt16(Ve),nt.writeUInt16(pe),nt.writeUInt16(L),nt.writeUInt16(ve),Pt=0,ke=E.length;Pt<ke;Pt++)o=E[Pt],nt.writeUInt16(o);for(nt.writeUInt16(0),Kt=0,Re=Ce.length;Kt<Re;Kt++)o=Ce[Kt],nt.writeUInt16(o);for(br=0,Pe=f.length;br<Pe;br++)s=f[br],nt.writeUInt16(s);for(Gt=0,dt=ce.length;Gt<dt;Gt++)Y=ce[Gt],nt.writeUInt16(Y);for(Rr=0,Et=C.length;Rr<Et;Rr++)B=C[Rr],nt.writeUInt16(B);return{charMap:n,subtable:nt.data,maxGlyphID:ee+1}}},e}(),d6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,o,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=u?o<u:o>u;o=0<=u?++o:--o)n=new fb(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var o,u;return n==null&&(n="macroman"),o=fb.encode(r,n),(u=new Rf).writeUInt16(0),u.writeUInt16(1),o.table=u.data.concat(o.subtable),o},t}(),g9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),y9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,o;for(o=[],n=0;n<10;++n)o.push(r.readByte());return o}(),this.charRange=function(){var n,o;for(o=[],n=0;n<4;++n)o.push(r.readInt());return o}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,o;for(o=[],n=0;n<2;n=++n)o.push(r.readInt());return o}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),v9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="post",t.prototype.parse=function(r){var n,o,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(o=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)n=r.readByte(),u.push(this.names.push(r.readString(n)));return u;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=function(){var s,f,v;for(v=[],c=s=0,f=this.file.maxp.numGlyphs;0<=f?s<f:s>f;c=0<=f?++s:--s)v.push(r.readUInt32());return v}.call(this)}},t}(),_9=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},b9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="name",t.prototype.parse=function(r){var n,o,u,c,s,f,v,w,E,L,C;for(r.pos=this.offset,r.readShort(),n=r.readShort(),f=r.readShort(),o=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+f+r.readShort()});for(v={},c=E=0,L=o.length;E<L;c=++E)u=o[c],r.pos=u.offset,w=r.readString(u.length),s=new _9(w,u),v[C=u.nameID]==null&&(v[C]=[]),v[u.nameID].push(s);this.strings=v,this.copyright=v[0],this.fontFamily=v[1],this.fontSubfamily=v[2],this.uniqueSubfamily=v[3],this.fontName=v[4],this.version=v[5];try{this.postscriptName=v[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=v[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=v[7],this.manufacturer=v[8],this.designer=v[9],this.description=v[10],this.vendorUrl=v[11],this.designerUrl=v[12],this.license=v[13],this.licenseUrl=v[14],this.preferredFamily=v[15],this.preferredSubfamily=v[17],this.compatibleFull=v[18],this.sampleText=v[19]},t}(),w9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),x9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,o,u,c,s,f,v;for(r.pos=this.offset,this.metrics=[],n=0,f=this.file.hhea.numberOfMetrics;0<=f?n<f:n>f;n=0<=f?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,E;for(E=[],n=w=0;0<=u?w<u:w>u;n=0<=u?++w:--w)E.push(r.readInt16());return E}(),this.widths=function(){var w,E,L,C;for(C=[],w=0,E=(L=this.metrics).length;w<E;w++)c=L[w],C.push(c.advance);return C}.call(this),o=this.widths[this.widths.length-1],v=[],n=s=0;0<=u?s<u:s>u;n=0<=u?++s:--s)v.push(this.widths.push(o));return v},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),m6=[].slice,k9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,o,u,c,s,f,v,w,E,L;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,o=c.indexOf(r),(u=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+o,s=(f=new Rf(n.read(u))).readShort(),w=f.readShort(),L=f.readShort(),v=f.readShort(),E=f.readShort(),this.cache[r]=s===-1?new E9(f,w,L,v,E):new A9(f,s,w,L,v,E),this.cache[r]))},t.prototype.encode=function(r,n,o){var u,c,s,f,v;for(s=[],c=[],f=0,v=n.length;f<v;f++)u=r[n[f]],c.push(s.length),u&&(s=s.concat(u.encode(o)));return c.push(s.length),{table:s,offsets:c}},t}(),A9=function(){function e(t,r,n,o,u,c){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=o,this.xMax=u,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),E9=function(){function e(t,r,n,o,u){var c,s;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=o,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;s=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&s;)c.pos+=1&s?4:2,128&s?c.pos+=8:64&s?c.pos+=4:8&s&&(c.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Rf(m6.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),S9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return G0(t,b0),t.prototype.tag="loca",t.prototype.parse=function(r){var n,o;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=2)c.push(2*r.readUInt16());return c}.call(this):function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=4)c.push(r.readUInt32());return c}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var o=new Uint32Array(this.offsets.length),u=0,c=0,s=0;s<o.length;++s)if(o[s]=u,c<n.length&&n[c]==s){++c,o[s]=u;var f=this.offsets[s],v=this.offsets[s+1]-f;v>0&&(u+=v)}for(var w=new Array(4*o.length),E=0;E<o.length;++E)w[4*E+3]=255&o[E],w[4*E+2]=(65280&o[E])>>8,w[4*E+1]=(16711680&o[E])>>16,w[4*E]=(4278190080&o[E])>>24;return w},t}(),C9=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,o,u;for(r in o=this.font.cmap.tables[0].codeMap,t={},u=this.subset)n=u[r],t[r]=o[n];return t},e.prototype.glyphsFor=function(t){var r,n,o,u,c,s,f;for(o={},c=0,s=t.length;c<s;c++)o[u=t[c]]=this.font.glyf.glyphFor(u);for(u in r=[],o)(n=o[u])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(u in f=this.glyphsFor(r))n=f[u],o[u]=n;return o},e.prototype.encode=function(t,r){var n,o,u,c,s,f,v,w,E,L,C,F,B,G,H;for(o in n=d6.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),C={0:0},H=n.charMap)C[(f=H[o]).old]=f.new;for(F in L=n.maxGlyphID,c)F in C||(C[F]=L++);return w=function(Z){var ee,Y;for(ee in Y={},Z)Y[Z[ee]]=ee;return Y}(C),E=Object.keys(w).sort(function(Z,ee){return Z-ee}),B=function(){var Z,ee,Y;for(Y=[],Z=0,ee=E.length;Z<ee;Z++)s=E[Z],Y.push(w[s]);return Y}(),u=this.font.glyf.encode(c,B,C),v=this.font.loca.encode(u.offsets,B),G={cmap:this.font.cmap.raw(),glyf:u.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(G["OS/2"]=this.font.os2.raw()),this.font.directory.encode(G)},e}();to.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,o,u,c;if(Array.isArray(r))return"["+function(){var s,f,v;for(v=[],s=0,f=r.length;s<f;s++)n=r[s],v.push(t.convert(n));return v}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in u=["<<"],r)c=r[o],u.push("/"+o+" "+t.convert(c));return u.push(">>"),u.join(`
`)}return""+r},t}();const p0={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},ah={in:"in",mm:"mm"},Lf={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},F0={Landscape:"landscape",Portrait:"portrait"},op={72:72,96:96,200:200,300:300,400:400};class I9{constructor(){Bi(this,"map");Bi(this,"width",Lf.A4[0]);Bi(this,"height",Lf.A4[1]);Bi(this,"dpi",op[96]);Bi(this,"format",p0.PNG.toString());Bi(this,"unit",ah.mm)}generate(t,r=Lf.A4,n=300,o=p0.PNG.toString(),u=ah.mm){this.map=t,this.width=r[0],this.height=r[1],this.dpi=n,this.format=o,this.unit=u;const c=this,s=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return c.dpi/96}});const f=document.createElement("div");f.className="hidden-map",document.body.appendChild(f);const v=document.createElement("div");v.style.width=this.toPixels(this.width),v.style.height=this.toPixels(this.height),f.appendChild(v);const w=this.map.getStyle();if(w&&w.sources){const L=w.sources;Object.keys(L).forEach(C=>{const F=L[C];Object.keys(F).forEach(B=>{F[B]||delete F[B]})})}const E=new Ic.Map({container:v,style:w,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});E.once("idle",()=>{var F;const L=E.getCanvas(),C=`map.${c.format}`;switch(c.format){case p0.PNG:c.toPNG(L,C);break;case p0.JPEG:c.toJPEG(L,C);break;case p0.PDF:c.toPDF(E,C);break;case p0.SVG:c.toSVG(L,C);break;default:console.error(`Invalid file format: ${c.format}`);break}E.remove(),(F=f.parentNode)==null||F.removeChild(f),Object.defineProperty(window,"devicePixelRatio",{get(){return s}})})}toPNG(t,r){const n=document.createElement("a");n.href=t.toDataURL(),n.download=r,n.click(),n.remove()}toJPEG(t,r){const n=t.toDataURL("image/jpeg",.85),o=document.createElement("a");o.href=n,o.download=r,o.click(),o.remove()}toPDF(t,r){const n=t.getCanvas(),o=new to({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});o.addImage(n.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:c}=t.getCenter();o.setProperties({title:t.getStyle().name,subject:`center: [${u}, ${c}], zoom: ${t.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),o.save(r)}toSVG(t,r){const n=t.toDataURL("image/png"),o=Number(this.toPixels(this.width,this.dpi).replace("px","")),u=Number(this.toPixels(this.height,this.dpi).replace("px","")),c=`
		<svg xmlns="http://www.w3.org/2000/svg" 
			xmlns:xlink="http://www.w3.org/1999/xlink" 
			version="1.1" 
			width="${o}" 
			height="${u}" 
			viewBox="0 0 ${o} ${u}" 
			xml:space="preserve">
		    <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
			xlink:href="${n}" width="${o}" height="${u}"></image>
		</svg>`,s=document.createElement("a");s.href=`data:application/xml,${encodeURIComponent(c)}`,s.download=r,s.click(),s.remove()}toPixels(t,r=96){return this.unit===ah.mm&&(r/=25.4),`${r*t}px`}toBlob(t){const r=atob(t.replace(/^.*,/,"")),n=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)n[u]=r.charCodeAt(u);return new Blob([n.buffer],{type:"image/png"})}}const L9=Object.freeze(Object.defineProperty({__proto__:null,DPI:op,Format:p0,PageOrientation:F0,Size:Lf,Unit:ah,default:I9},Symbol.toStringTag,{value:"Module"}));class T9{constructor(t){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"unit");Bi(this,"svgCanvas");Bi(this,"svgPath");var c,s,f;if(this.map=t,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const r=(c=this.map)==null?void 0:c.getCanvas().clientWidth,n=(s=this.map)==null?void 0:s.getCanvas().clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.setAttribute("width",`${r}px`),o.setAttribute("height",`${n}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),o.append(u),(f=this.map)==null||f.getCanvasContainer().appendChild(o),this.svgCanvas=o,this.svgPath=u}mapResize(){this.generateCutOut()}updateArea(t,r){this.width=t,this.height=r,this.unit=ah.mm,this.generateCutOut()}generateCutOut(){var v,w;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0||!(this.width&&this.height))return;const t=this.toPixels(this.width),r=this.toPixels(this.height),n=(v=this.map)==null?void 0:v.getCanvas().clientWidth,o=(w=this.map)==null?void 0:w.getCanvas().clientHeight,u=n/2-t/2,c=u+t,s=o/2-r/2,f=s+r;this.svgCanvas.setAttribute("width",`${n}px`),this.svgCanvas.setAttribute("height",`${o}px`),this.svgPath.setAttribute("d",`M 0 0 L ${n} 0 L ${n} ${o} L 0 ${o} M ${u} ${s} L ${u} ${f} L ${c} ${f} L ${c} ${s}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(t,r=96){return this.unit===ah.mm&&(r/=25.4),r*t}}class P9{constructor(t){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"svgCanvas");Bi(this,"xLine");Bi(this,"yLine");Bi(this,"color","#535353");this.map=t,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,r;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,r=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${r}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${r}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="relative",r.setAttribute("width",`${this.width}px`),r.setAttribute("height",`${this.height}px`);const n=this.width/2,o=this.height/2;this.yLine=r.appendChild(this.createLine(n.toString(),"0",n.toString(),this.height.toString(),this.color,"2px")),this.xLine=r.appendChild(this.createLine("0",o.toString(),this.width.toString(),o.toString(),this.color,"2px")),t==null||t.appendChild(r),this.svgCanvas=r}}createLine(t,r,n,o,u,c){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",t),s.setAttribute("y1",r),s.setAttribute("x2",n),s.setAttribute("y2",o),s.setAttribute("stroke-dasharray","5,5"),s.setAttribute("stroke",u),s.setAttribute("stroke-width",c),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var fm={dragStart:!0},hb=(e,t,r)=>Math.min(Math.max(e,t),r),hm=e=>typeof e=="string",M9=([e,t],r,n)=>{const o=(u,c)=>c===0?0:Math.ceil(u/c)*c;return[o(r,e),o(n,t)]},pb=(e,t)=>e.some(r=>t.some(n=>r.contains(n)));function pm(e,t){if(e===void 0)return;if(jg(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:n=0,left:o=0,right:u=0,bottom:c=0}=e;return{top:n,right:window.innerWidth-u,bottom:window.innerHeight-c,left:o}}if(e==="parent")return t.parentNode.getBoundingClientRect();const r=document.querySelector(e);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var o1=(e,t,r)=>e.style.setProperty(t,r),jg=e=>e instanceof HTMLElement,D9=(e,t={})=>{let r,n,{bounds:o,axis:u="both",gpuAcceleration:c=!0,legacyTranslate:s=!0,transform:f,applyUserSelectHack:v=!0,disabled:w=!1,ignoreMultitouch:E=!1,recomputeBounds:L=fm,grid:C,position:F,cancel:B,handle:G,defaultClass:H="neodrag",defaultClassDragging:Z="neodrag-dragging",defaultClassDragged:ee="neodrag-dragged",defaultPosition:Y={x:0,y:0},onDragStart:le,onDrag:ce,onDragEnd:ve}=t,pe=!1,Ne=0,Ve=0,be=0,Ce=0,Oe=0,nt=0,{x:mt,y:ht}=F?{x:(F==null?void 0:F.x)??0,y:(F==null?void 0:F.y)??0}:Y;Et(mt,ht);let He,ut,bt,Xe,We,ke="",Re=!!F;L={...fm,...L};const Pe=document.body.style,dt=e.classList;function Et(Mr=Ne,Kr=Ve){if(!f){if(s){let pt=`${+Mr}px, ${+Kr}px`;return o1(e,"transform",c?`translate3d(${pt}, 0)`:`translate(${pt})`)}return o1(e,"translate",`${+Mr}px ${+Kr}px ${c?"1px":""}`)}const Ct=f({offsetX:Mr,offsetY:Kr,rootNode:e});hm(Ct)&&o1(e,"transform",Ct)}const Pt=(Mr,Kr)=>{const Ct={offsetX:Ne,offsetY:Ve,rootNode:e,currentNode:We};e.dispatchEvent(new CustomEvent(Mr,{detail:Ct})),Kr==null||Kr(Ct)},Kt=addEventListener;Kt("pointerdown",br,!1),Kt("pointerup",Gt,!1),Kt("pointermove",Rr,!1),o1(e,"touch-action","none");const $t=()=>{let Mr=e.offsetWidth/ut.width;return isNaN(Mr)&&(Mr=1),Mr};function br(Mr){if(w||Mr.button===2||E&&!Mr.isPrimary)return;if(L.dragStart&&(He=pm(o,e)),hm(G)&&hm(B)&&G===B)throw new Error("`handle` selector can't be same as `cancel` selector");if(dt.add(H),bt=function(ln,Wt){if(!ln)return[Wt];if(jg(ln))return[ln];if(Array.isArray(ln))return ln;const Ur=Wt.querySelectorAll(ln);if(Ur===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(Ur.values())}(G,e),Xe=function(ln,Wt){if(!ln)return[];if(jg(ln))return[ln];if(Array.isArray(ln))return ln;const Ur=Wt.querySelectorAll(ln);if(Ur===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(Ur.values())}(B,e),r=/(both|x)/.test(u),n=/(both|y)/.test(u),pb(Xe,bt))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const Kr=Mr.composedPath()[0];if(!bt.some(ln=>{var Wt;return ln.contains(Kr)||((Wt=ln.shadowRoot)==null?void 0:Wt.contains(Kr))})||pb(Xe,[Kr]))return;We=bt.length===1?e:bt.find(ln=>ln.contains(Kr)),pe=!0,ut=e.getBoundingClientRect(),v&&(ke=Pe.userSelect,Pe.userSelect="none"),Pt("neodrag:start",le);const{clientX:Ct,clientY:pt}=Mr,Dr=$t();r&&(be=Ct-mt/Dr),n&&(Ce=pt-ht/Dr),He&&(Oe=Ct-ut.left,nt=pt-ut.top)}function Gt(){pe&&(L.dragEnd&&(He=pm(o,e)),dt.remove(Z),dt.add(ee),v&&(Pe.userSelect=ke),Pt("neodrag:end",ve),r&&(be=Ne),n&&(Ce=Ve),pe=!1)}function Rr(Mr){if(!pe)return;L.drag&&(He=pm(o,e)),dt.add(Z),Mr.preventDefault(),ut=e.getBoundingClientRect();let Kr=Mr.clientX,Ct=Mr.clientY;const pt=$t();if(He){const Dr={left:He.left+Oe,top:He.top+nt,right:He.right+Oe-ut.width,bottom:He.bottom+nt-ut.height};Kr=hb(Kr,Dr.left,Dr.right),Ct=hb(Ct,Dr.top,Dr.bottom)}if(Array.isArray(C)){let[Dr,ln]=C;if(isNaN(+Dr)||Dr<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+ln)||ln<0)throw new Error("2nd argument of `grid` must be a valid positive number");let Wt=Kr-be,Ur=Ct-Ce;[Wt,Ur]=M9([Dr/pt,ln/pt],Wt,Ur),Kr=be+Wt,Ct=Ce+Ur}r&&(Ne=Math.round((Kr-be)*pt)),n&&(Ve=Math.round((Ct-Ce)*pt)),mt=Ne,ht=Ve,Pt("neodrag",ce),Et()}return{destroy:()=>{const Mr=removeEventListener;Mr("pointerdown",br,!1),Mr("pointerup",Gt,!1),Mr("pointermove",Rr,!1)},update:Mr=>{var Ct,pt;u=Mr.axis||"both",w=Mr.disabled??!1,E=Mr.ignoreMultitouch??!1,G=Mr.handle,o=Mr.bounds,L=Mr.recomputeBounds??fm,B=Mr.cancel,v=Mr.applyUserSelectHack??!0,C=Mr.grid,c=Mr.gpuAcceleration??!0,s=Mr.legacyTranslate??!0,f=Mr.transform;const Kr=dt.contains(ee);dt.remove(H,ee),H=Mr.defaultClass??"neodrag",Z=Mr.defaultClassDragging??"neodrag-dragging",ee=Mr.defaultClassDragged??"neodrag-dragged",dt.add(H),Kr&&dt.add(ee),Re&&(mt=Ne=((Ct=Mr.position)==null?void 0:Ct.x)??Ne,ht=Ve=((pt=Mr.position)==null?void 0:pt.y)??Ve,Et())}}};function db(e,t,r){const n=e.slice();return n[30]=t[r],n}function mb(e,t,r){const n=e.slice();return n[30]=t[r],n}function gb(e,t,r){const n=e.slice();return n[30]=t[r],n}function yb(e,t,r){const n=e.slice();return n[30]=t[r],n}function vb(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve;o=new go({props:{icon:h7}}),s=new go({props:{icon:Ny}});let be=e[4]&&_b(e);return F=new go({props:{icon:Jw,size:"sm"}}),ce=new go({props:{icon:b7,size:"sm"}}),{c(){t=ct("nav"),r=ct("div"),n=ct("span"),Bt(o.$$.fragment),u=Nn(`
			Export tool
			
			`),c=ct("span"),Bt(s.$$.fragment),f=pr(),be&&be.c(),v=pr(),w=ct("div"),E=ct("div"),L=ct("button"),C=ct("span"),Bt(F.$$.fragment),B=pr(),G=ct("span"),H=Nn("Export"),Z=pr(),ee=ct("div"),Y=ct("button"),le=ct("span"),Bt(ce.$$.fragment),this.h()},l(Ce){t=ft(Ce,"NAV",{class:!0});var Oe=wt(t);r=ft(Oe,"DIV",{class:!0});var nt=wt(r);n=ft(nt,"SPAN",{class:!0});var mt=wt(n);Yt(o.$$.fragment,mt),mt.forEach(de),u=Rn(nt,`
			Export tool
			
			`),c=ft(nt,"SPAN",{class:!0});var ht=wt(c);Yt(s.$$.fragment,ht),ht.forEach(de),nt.forEach(de),f=dr(Oe),be&&be.l(Oe),v=dr(Oe),w=ft(Oe,"DIV",{class:!0});var He=wt(w);E=ft(He,"DIV",{class:!0});var ut=wt(E);L=ft(ut,"BUTTON",{class:!0});var bt=wt(L);C=ft(bt,"SPAN",{class:!0});var Xe=wt(C);Yt(F.$$.fragment,Xe),Xe.forEach(de),B=dr(bt),G=ft(bt,"SPAN",{class:!0});var We=wt(G);H=Rn(We,"Export"),We.forEach(de),bt.forEach(de),ut.forEach(de),Z=dr(He),ee=ft(He,"DIV",{class:!0});var ke=wt(ee);Y=ft(ke,"BUTTON",{class:!0});var Re=wt(Y);le=ft(Re,"SPAN",{class:!0});var Pe=wt(le);Yt(ce.$$.fragment,Pe),Pe.forEach(de),Re.forEach(de),ke.forEach(de),He.forEach(de),Oe.forEach(de),this.h()},h(){ye(n,"class","icon drag-icon svelte-13nmsql"),ye(c,"class","icon close-icon svelte-13nmsql"),ye(r,"class","panel-heading heading-control svelte-13nmsql"),ye(C,"class","icon svelte-13nmsql"),ye(G,"class","svelte-13nmsql"),ye(L,"class","button is-fullwidth is-small is-success p-0 m-0 svelte-13nmsql"),ye(E,"class","column is-10 p-0 m-0 svelte-13nmsql"),ye(le,"class","icon svelte-13nmsql"),ye(Y,"class","button is-fullwidth is-small is-light p-0 m-0 svelte-13nmsql"),ye(ee,"class","column is-2 p-0 m-0 svelte-13nmsql"),ye(w,"class","columns m-1 is-mobile svelte-13nmsql"),ye(t,"class","panel is-success export-container svelte-13nmsql")},m(Ce,Oe){It(Ce,t,Oe),Qe(t,r),Qe(r,n),jt(o,n,null),Qe(r,u),Qe(r,c),jt(s,c,null),Qe(t,f),be&&be.m(t,null),Qe(t,v),Qe(t,w),Qe(w,E),Qe(E,L),Qe(L,C),jt(F,C,null),Qe(L,B),Qe(L,G),Qe(G,H),Qe(w,Z),Qe(w,ee),Qe(ee,Y),Qe(Y,le),jt(ce,le,null),pe=!0,Ne||(Ve=[Qr(c,"click",e[15]),Qr(L,"click",e[8]),Qr(Y,"click",e[20]),uh(ve=D9.call(null,t,e[7]))],Ne=!0)},p(Ce,Oe){Ce[4]?be?(be.p(Ce,Oe),Oe[0]&16&&Ze(be,1)):(be=_b(Ce),be.c(),Ze(be,1),be.m(t,v)):be&&(Ui(),at(be,1,1,()=>{be=null}),qi()),ve&&y0(ve.update)&&Oe[0]&128&&ve.update.call(null,Ce[7])},i(Ce){pe||(Ze(o.$$.fragment,Ce),Ze(s.$$.fragment,Ce),Ze(be),Ze(F.$$.fragment,Ce),Ze(ce.$$.fragment,Ce),pe=!0)},o(Ce){at(o.$$.fragment,Ce),at(s.$$.fragment,Ce),at(be),at(F.$$.fragment,Ce),at(ce.$$.fragment,Ce),pe=!1},d(Ce){Ce&&de(t),Ut(o),Ut(s),be&&be.d(),Ut(F),Ut(ce),Ne=!1,oa(Ve)}}}function _b(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt,Xe,We,ke,Re,Pe,dt,Et=Object.keys(Lf),Pt=[];for(let Ct=0;Ct<Et.length;Ct+=1)Pt[Ct]=bb(yb(e,Et,Ct));w=new go({props:{icon:A7}});let Kt=Object.keys(F0),$t=[];for(let Ct=0;Ct<Kt.length;Ct+=1)$t[Ct]=wb(gb(e,Kt,Ct));const br=Ct=>at($t[Ct],1,1,()=>{$t[Ct]=null});let Gt=Object.keys(p0),Rr=[];for(let Ct=0;Ct<Gt.length;Ct+=1)Rr[Ct]=xb(mb(e,Gt,Ct));be=new go({props:{icon:v7}});let Mr=Object.keys(op),Kr=[];for(let Ct=0;Ct<Mr.length;Ct+=1)Kr[Ct]=kb(db(e,Mr,Ct));return ke=new go({props:{icon:_7}}),{c(){t=ct("div"),r=ct("label"),n=Nn("Paper Size"),o=pr(),u=ct("div"),c=ct("div"),s=ct("select");for(let Ct=0;Ct<Pt.length;Ct+=1)Pt[Ct].c();f=pr(),v=ct("span"),Bt(w.$$.fragment),E=pr(),L=ct("div"),C=ct("label"),F=Nn("Page Orientation"),B=pr(),G=ct("div");for(let Ct=0;Ct<$t.length;Ct+=1)$t[Ct].c();H=pr(),Z=ct("div"),ee=ct("label"),Y=Nn("Format"),le=pr(),ce=ct("div"),ve=ct("div"),pe=ct("select");for(let Ct=0;Ct<Rr.length;Ct+=1)Rr[Ct].c();Ne=pr(),Ve=ct("span"),Bt(be.$$.fragment),Ce=pr(),Oe=ct("div"),nt=ct("label"),mt=Nn("DPI"),ht=pr(),He=ct("div"),ut=ct("div"),bt=ct("select");for(let Ct=0;Ct<Kr.length;Ct+=1)Kr[Ct].c();Xe=pr(),We=ct("span"),Bt(ke.$$.fragment),this.h()},l(Ct){t=ft(Ct,"DIV",{class:!0});var pt=wt(t);r=ft(pt,"LABEL",{class:!0});var Dr=wt(r);n=Rn(Dr,"Paper Size"),Dr.forEach(de),o=dr(pt),u=ft(pt,"DIV",{class:!0});var ln=wt(u);c=ft(ln,"DIV",{class:!0});var Wt=wt(c);s=ft(Wt,"SELECT",{class:!0});var Ur=wt(s);for(let Or=0;Or<Pt.length;Or+=1)Pt[Or].l(Ur);Ur.forEach(de),Wt.forEach(de),f=dr(ln),v=ft(ln,"SPAN",{class:!0});var dn=wt(v);Yt(w.$$.fragment,dn),dn.forEach(de),ln.forEach(de),pt.forEach(de),E=dr(Ct),L=ft(Ct,"DIV",{class:!0});var tn=wt(L);C=ft(tn,"LABEL",{class:!0});var Bn=wt(C);F=Rn(Bn,"Page Orientation"),Bn.forEach(de),B=dr(tn),G=ft(tn,"DIV",{class:!0});var Jn=wt(G);for(let Or=0;Or<$t.length;Or+=1)$t[Or].l(Jn);Jn.forEach(de),tn.forEach(de),H=dr(Ct),Z=ft(Ct,"DIV",{class:!0});var ai=wt(Z);ee=ft(ai,"LABEL",{class:!0});var _i=wt(ee);Y=Rn(_i,"Format"),_i.forEach(de),le=dr(ai),ce=ft(ai,"DIV",{class:!0});var hi=wt(ce);ve=ft(hi,"DIV",{class:!0});var yr=wt(ve);pe=ft(yr,"SELECT",{class:!0});var Vr=wt(pe);for(let Or=0;Or<Rr.length;Or+=1)Rr[Or].l(Vr);Vr.forEach(de),yr.forEach(de),Ne=dr(hi),Ve=ft(hi,"SPAN",{class:!0});var wi=wt(Ve);Yt(be.$$.fragment,wi),wi.forEach(de),hi.forEach(de),ai.forEach(de),Ce=dr(Ct),Oe=ft(Ct,"DIV",{class:!0});var xn=wt(Oe);nt=ft(xn,"LABEL",{class:!0});var si=wt(nt);mt=Rn(si,"DPI"),si.forEach(de),ht=dr(xn),He=ft(xn,"DIV",{class:!0});var fr=wt(He);ut=ft(fr,"DIV",{class:!0});var or=wt(ut);bt=ft(or,"SELECT",{class:!0});var Yr=wt(bt);for(let Or=0;Or<Kr.length;Or+=1)Kr[Or].l(Yr);Yr.forEach(de),or.forEach(de),Xe=dr(fr),We=ft(fr,"SPAN",{class:!0});var un=wt(We);Yt(ke.$$.fragment,un),un.forEach(de),fr.forEach(de),xn.forEach(de),this.h()},h(){ye(r,"class","label is-small svelte-13nmsql"),ye(s,"class","svelte-13nmsql"),e[0]===void 0&&yl(()=>e[16].call(s)),ye(c,"class","select is-small is-fullwidth svelte-13nmsql"),ye(v,"class","icon is-small is-left svelte-13nmsql"),ye(u,"class","control has-icons-left svelte-13nmsql"),ye(t,"class","field svelte-13nmsql"),ye(C,"class","label is-small svelte-13nmsql"),ye(G,"class","control svelte-13nmsql"),ye(L,"class","field svelte-13nmsql"),ye(ee,"class","label is-small svelte-13nmsql"),ye(pe,"class","svelte-13nmsql"),e[3]===void 0&&yl(()=>e[18].call(pe)),ye(ve,"class","select is-small is-fullwidth svelte-13nmsql"),ye(Ve,"class","icon is-small is-left svelte-13nmsql"),ye(ce,"class","control has-icons-left svelte-13nmsql"),ye(Z,"class","field svelte-13nmsql"),ye(nt,"class","label is-small svelte-13nmsql"),ye(bt,"class","svelte-13nmsql"),e[2]===void 0&&yl(()=>e[19].call(bt)),ye(ut,"class","select is-small is-fullwidth svelte-13nmsql"),ye(We,"class","icon is-small is-left svelte-13nmsql"),ye(He,"class","control has-icons-left svelte-13nmsql"),ye(Oe,"class","field svelte-13nmsql")},m(Ct,pt){It(Ct,t,pt),Qe(t,r),Qe(r,n),Qe(t,o),Qe(t,u),Qe(u,c),Qe(c,s);for(let Dr=0;Dr<Pt.length;Dr+=1)Pt[Dr]&&Pt[Dr].m(s,null);gs(s,e[0],!0),Qe(u,f),Qe(u,v),jt(w,v,null),It(Ct,E,pt),It(Ct,L,pt),Qe(L,C),Qe(C,F),Qe(L,B),Qe(L,G);for(let Dr=0;Dr<$t.length;Dr+=1)$t[Dr]&&$t[Dr].m(G,null);It(Ct,H,pt),It(Ct,Z,pt),Qe(Z,ee),Qe(ee,Y),Qe(Z,le),Qe(Z,ce),Qe(ce,ve),Qe(ve,pe);for(let Dr=0;Dr<Rr.length;Dr+=1)Rr[Dr]&&Rr[Dr].m(pe,null);gs(pe,e[3],!0),Qe(ce,Ne),Qe(ce,Ve),jt(be,Ve,null),It(Ct,Ce,pt),It(Ct,Oe,pt),Qe(Oe,nt),Qe(nt,mt),Qe(Oe,ht),Qe(Oe,He),Qe(He,ut),Qe(ut,bt);for(let Dr=0;Dr<Kr.length;Dr+=1)Kr[Dr]&&Kr[Dr].m(bt,null);gs(bt,e[2],!0),Qe(He,Xe),Qe(He,We),jt(ke,We,null),Re=!0,Pe||(dt=[Qr(s,"change",e[16]),Qr(pe,"change",e[18]),Qr(bt,"change",e[19])],Pe=!0)},p(Ct,pt){if(pt&0){Et=Object.keys(Lf);let Dr;for(Dr=0;Dr<Et.length;Dr+=1){const ln=yb(Ct,Et,Dr);Pt[Dr]?Pt[Dr].p(ln,pt):(Pt[Dr]=bb(ln),Pt[Dr].c(),Pt[Dr].m(s,null))}for(;Dr<Pt.length;Dr+=1)Pt[Dr].d(1);Pt.length=Et.length}if(pt[0]&1&&gs(s,Ct[0]),pt[0]&2){Kt=Object.keys(F0);let Dr;for(Dr=0;Dr<Kt.length;Dr+=1){const ln=gb(Ct,Kt,Dr);$t[Dr]?($t[Dr].p(ln,pt),Ze($t[Dr],1)):($t[Dr]=wb(ln),$t[Dr].c(),Ze($t[Dr],1),$t[Dr].m(G,null))}for(Ui(),Dr=Kt.length;Dr<$t.length;Dr+=1)br(Dr);qi()}if(pt&0){Gt=Object.keys(p0);let Dr;for(Dr=0;Dr<Gt.length;Dr+=1){const ln=mb(Ct,Gt,Dr);Rr[Dr]?Rr[Dr].p(ln,pt):(Rr[Dr]=xb(ln),Rr[Dr].c(),Rr[Dr].m(pe,null))}for(;Dr<Rr.length;Dr+=1)Rr[Dr].d(1);Rr.length=Gt.length}if(pt[0]&8&&gs(pe,Ct[3]),pt&0){Mr=Object.keys(op);let Dr;for(Dr=0;Dr<Mr.length;Dr+=1){const ln=db(Ct,Mr,Dr);Kr[Dr]?Kr[Dr].p(ln,pt):(Kr[Dr]=kb(ln),Kr[Dr].c(),Kr[Dr].m(bt,null))}for(;Dr<Kr.length;Dr+=1)Kr[Dr].d(1);Kr.length=Mr.length}pt[0]&4&&gs(bt,Ct[2])},i(Ct){if(!Re){Ze(w.$$.fragment,Ct);for(let pt=0;pt<Kt.length;pt+=1)Ze($t[pt]);Ze(be.$$.fragment,Ct),Ze(ke.$$.fragment,Ct),Re=!0}},o(Ct){at(w.$$.fragment,Ct),$t=$t.filter(Boolean);for(let pt=0;pt<$t.length;pt+=1)at($t[pt]);at(be.$$.fragment,Ct),at(ke.$$.fragment,Ct),Re=!1},d(Ct){Ct&&de(t),ys(Pt,Ct),Ut(w),Ct&&de(E),Ct&&de(L),ys($t,Ct),Ct&&de(H),Ct&&de(Z),ys(Rr,Ct),Ut(be),Ct&&de(Ce),Ct&&de(Oe),ys(Kr,Ct),Ut(ke),Pe=!1,oa(dt)}}}function bb(e){let t,r=e[30]+"",n;return{c(){t=ct("option"),n=Nn(r),this.h()},l(o){t=ft(o,"OPTION",{class:!0});var u=wt(t);n=Rn(u,r),u.forEach(de),this.h()},h(){t.__value=Lf[e[30]],t.value=t.__value,ye(t,"class","svelte-13nmsql")},m(o,u){It(o,t,u),Qe(t,n)},p:Xn,d(o){o&&de(t)}}}function wb(e){let t,r,n,o,u,c,s,f=e[30]+"",v,w,E,L,C;function F(){return e[17](e[30])}return c=new go({props:{icon:F0[e[30]]===F0.Landscape?c7:T7,size:"sm"}}),{c(){t=ct("label"),r=ct("input"),o=pr(),u=ct("span"),Bt(c.$$.fragment),s=pr(),v=Nn(f),w=pr(),this.h()},l(B){t=ft(B,"LABEL",{class:!0,style:!0});var G=wt(t);r=ft(G,"INPUT",{type:!0,name:!0,class:!0}),o=dr(G),u=ft(G,"SPAN",{class:!0});var H=wt(u);Yt(c.$$.fragment,H),H.forEach(de),s=dr(G),v=Rn(G,f),w=dr(G),G.forEach(de),this.h()},h(){ye(r,"type","radio"),ye(r,"name","orientation"),r.checked=n=e[1]===F0[e[30]],ye(r,"class","svelte-13nmsql"),ye(u,"class","icon svelte-13nmsql"),ye(t,"class","radio svelte-13nmsql"),zo(t,"color","black")},m(B,G){It(B,t,G),Qe(t,r),Qe(t,o),Qe(t,u),jt(c,u,null),Qe(t,s),Qe(t,v),Qe(t,w),E=!0,L||(C=Qr(r,"click",F),L=!0)},p(B,G){e=B,(!E||G[0]&2&&n!==(n=e[1]===F0[e[30]]))&&(r.checked=n)},i(B){E||(Ze(c.$$.fragment,B),E=!0)},o(B){at(c.$$.fragment,B),E=!1},d(B){B&&de(t),Ut(c),L=!1,C()}}}function xb(e){let t,r=e[30]+"",n;return{c(){t=ct("option"),n=Nn(r),this.h()},l(o){t=ft(o,"OPTION",{class:!0});var u=wt(t);n=Rn(u,r),u.forEach(de),this.h()},h(){t.__value=p0[e[30]],t.value=t.__value,ye(t,"class","svelte-13nmsql")},m(o,u){It(o,t,u),Qe(t,n)},p:Xn,d(o){o&&de(t)}}}function kb(e){let t,r=e[30]+"",n;return{c(){t=ct("option"),n=Nn(r),this.h()},l(o){t=ft(o,"OPTION",{class:!0});var u=wt(t);n=Rn(u,r),u.forEach(de),this.h()},h(){t.__value=op[e[30]],t.value=t.__value,ye(t,"class","svelte-13nmsql")},m(o,u){It(o,t,u),Qe(t,n)},p:Xn,d(o){o&&de(t)}}}function z9(e){let t,r,n,o,u=e[5]&&vb(e);return{c(){t=ct("button"),r=pr(),u&&u.c(),n=Xi(),this.h()},l(c){t=ft(c,"BUTTON",{class:!0}),wt(t).forEach(de),r=dr(c),u&&u.l(c),n=Xi(),this.h()},h(){ye(t,"class","maplibre-ctrl-icon svelte-13nmsql")},m(c,s){It(c,t,s),e[14](t),It(c,r,s),u&&u.m(c,s),It(c,n,s),o=!0},p(c,s){c[5]?u?(u.p(c,s),s[0]&32&&Ze(u,1)):(u=vb(c),u.c(),Ze(u,1),u.m(n.parentNode,n)):u&&(Ui(),at(u,1,1,()=>{u=null}),qi())},i(c){o||(Ze(u),o=!0)},o(c){at(u),o=!1},d(c){c&&de(t),e[14](null),c&&de(r),u&&u.d(c),c&&de(n)}}}function N9(e,t,r){let{map:n}=t,o,u,c,s,{showPrintableArea:f=!0}=t,{showCrosshair:v=!0}=t,{position:w="top-right"}=t,{paperSize:E=Lf.A4}=t,{dpi:L=op[96]}=t,{format:C=p0.PNG}=t,{orientation:F=F0.Landscape}=t,{isShownSetting:B=!0}=t,G=!1,H={};function Z(){}Z.prototype.onAdd=function(He){return this.map=He,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",s.addEventListener("click",()=>{r(5,G=!G)}),this.controlContainer.appendChild(s),this.controlContainer},Z.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let ee=null;jf(async()=>{const{default:He}=await rd(()=>Promise.resolve().then(()=>L9),void 0,import.meta.url);c=new He,r(13,ee=new Z)});const Y=()=>{const He=le();c.generate(n,He,L,C,ah.mm)},le=()=>{let He=[E[0],E[1]];return F!==F0.Landscape&&(He=He.reverse()),He},ce=()=>{s&&(G?s.classList.add("maplibre-ctrl-icon-active"):s.classList.remove("maplibre-ctrl-icon-active"),ve(f?G:!1),Ne(v?G:!1))},ve=He=>{He===!1?o!==void 0&&(o.destroy(),o=void 0):(o=new T9(n),pe())},pe=()=>{if(o===void 0)return;const He=le();o.updateArea(He[0],He[1])},Ne=He=>{n&&(He===!1?u!==void 0&&(u.destroy(),u=void 0):(u=new P9(n),u.create()))};function Ve(He){Ft[He?"unshift":"push"](()=>{s=He,r(6,s)})}const be=()=>{r(5,G=!G)};function Ce(){E=d0(this),r(0,E)}const Oe=He=>{r(1,F=F0[He])};function nt(){C=d0(this),r(3,C)}function mt(){L=d0(this),r(2,L)}const ht=()=>r(4,B=!B);return e.$$set=He=>{"map"in He&&r(9,n=He.map),"showPrintableArea"in He&&r(10,f=He.showPrintableArea),"showCrosshair"in He&&r(11,v=He.showCrosshair),"position"in He&&r(12,w=He.position),"paperSize"in He&&r(0,E=He.paperSize),"dpi"in He&&r(2,L=He.dpi),"format"in He&&r(3,C=He.format),"orientation"in He&&r(1,F=He.orientation),"isShownSetting"in He&&r(4,B=He.isShownSetting)},e.$$.update=()=>{e.$$.dirty[0]&1&&pe(),e.$$.dirty[0]&2&&pe(),e.$$.dirty[0]&12800&&n&&(ee!==null&&n.hasControl(ee)===!1&&n.addControl(ee,w),r(7,H.bounds=n.getContainer(),H)),e.$$.dirty[0]&32&&ce()},[E,F,L,C,B,G,s,H,Y,n,f,v,w,ee,Ve,be,Ce,Oe,nt,mt,ht]}class R9 extends Pn{constructor(t){super(),Mn(this,t,N9,z9,Cn,{map:9,showPrintableArea:10,showCrosshair:11,position:12,paperSize:0,dpi:2,format:3,orientation:1,isShownSetting:4},null,[-1,-1])}}const O9=async e=>{if("clipboard"in navigator)await navigator.clipboard.writeText(e);else{const t=document.createElement("input");t.type="text",t.disabled=!0,t.style.setProperty("position","fixed"),t.style.setProperty("z-index","-100"),t.style.setProperty("pointer-events","none"),t.style.setProperty("opacity","0"),t.value=e,document.body.appendChild(t),t.click(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},Ab=(e,t)=>{async function r(){if(o)try{await O9(o),e.dispatchEvent(new CustomEvent("svelte-copy",{detail:o}))}catch(u){e.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let n=typeof t=="string"?["click"]:[t.events].flat(1),o=typeof t=="string"?t:t.text;return n.forEach(u=>{e.addEventListener(u,r,!0)}),{update:u=>{const c=typeof u=="string"?["click"]:[u.events].flat(1),s=typeof u=="string"?u:u.text,f=c.filter(w=>!n.includes(w)),v=n.filter(w=>!c.includes(w));f.forEach(w=>{e.addEventListener(w,r,!0)}),v.forEach(w=>{e.removeEventListener(w,r,!0)}),n=c,o=s},destroy:()=>{n.forEach(u=>{e.removeEventListener(u,r,!0)})}}};function F9(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut;return Z=new go({props:{icon:C7}}),be=new go({props:{icon:Ny}}),{c(){t=ct("div"),r=ct("div"),n=pr(),o=ct("div"),u=ct("header"),c=ct("p"),s=Nn("URL to share"),f=pr(),v=ct("button"),w=pr(),E=ct("section"),L=ct("div"),C=ct("input"),B=pr(),G=ct("button"),H=ct("span"),Bt(Z.$$.fragment),ee=pr(),Y=ct("span"),le=Nn(e[2]),ve=pr(),pe=ct("footer"),Ne=ct("button"),Ve=ct("span"),Bt(be.$$.fragment),Ce=pr(),Oe=ct("span"),nt=Nn("Cancel"),this.h()},l(bt){t=ft(bt,"DIV",{class:!0});var Xe=wt(t);r=ft(Xe,"DIV",{class:!0}),wt(r).forEach(de),n=dr(Xe),o=ft(Xe,"DIV",{class:!0});var We=wt(o);u=ft(We,"HEADER",{class:!0});var ke=wt(u);c=ft(ke,"P",{class:!0});var Re=wt(c);s=Rn(Re,"URL to share"),Re.forEach(de),f=dr(ke),v=ft(ke,"BUTTON",{class:!0,"aria-label":!0}),wt(v).forEach(de),ke.forEach(de),w=dr(We),E=ft(We,"SECTION",{class:!0});var Pe=wt(E);L=ft(Pe,"DIV",{class:!0});var dt=wt(L);C=ft(dt,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),B=dr(dt),G=ft(dt,"BUTTON",{class:!0});var Et=wt(G);H=ft(Et,"SPAN",{class:!0});var Pt=wt(H);Yt(Z.$$.fragment,Pt),Pt.forEach(de),ee=dr(Et),Y=ft(Et,"SPAN",{class:!0});var Kt=wt(Y);le=Rn(Kt,e[2]),Kt.forEach(de),Et.forEach(de),dt.forEach(de),Pe.forEach(de),ve=dr(We),pe=ft(We,"FOOTER",{class:!0});var $t=wt(pe);Ne=ft($t,"BUTTON",{class:!0});var br=wt(Ne);Ve=ft(br,"SPAN",{class:!0});var Gt=wt(Ve);Yt(be.$$.fragment,Gt),Gt.forEach(de),Ce=dr(br),Oe=ft(br,"SPAN",{class:!0});var Rr=wt(Oe);nt=Rn(Rr,"Cancel"),Rr.forEach(de),br.forEach(de),$t.forEach(de),We.forEach(de),Xe.forEach(de),this.h()},h(){ye(r,"class","modal-background svelte-xtmu3o"),ye(c,"class","modal-card-title svelte-xtmu3o"),ye(v,"class","delete svelte-xtmu3o"),ye(v,"aria-label","close"),ye(u,"class","modal-card-head svelte-xtmu3o"),ye(C,"class","input is-success is-small pm-0 svelte-xtmu3o"),ye(C,"type","text"),ye(C,"placeholder","URL to share"),zo(C,"cursor","pointer"),C.readOnly=!0,ye(H,"class","icon svelte-xtmu3o"),ye(Y,"class","svelte-xtmu3o"),ye(G,"class","button is-success is-small pm-0 ml-1 svelte-xtmu3o"),ye(L,"class","copy-control svelte-xtmu3o"),ye(E,"class","modal-card-body svelte-xtmu3o"),ye(Ve,"class","icon svelte-xtmu3o"),ye(Oe,"class","svelte-xtmu3o"),ye(Ne,"class","button is-small pm-0 svelte-xtmu3o"),ye(pe,"class","modal-card-foot svelte-xtmu3o"),ye(o,"class","modal-card svelte-xtmu3o"),ye(t,"class",mt=`modal ${e[0]?"is-active":""} svelte-xtmu3o`)},m(bt,Xe){It(bt,t,Xe),Qe(t,r),Qe(t,n),Qe(t,o),Qe(o,u),Qe(u,c),Qe(c,s),Qe(u,f),Qe(u,v),Qe(o,w),Qe(o,E),Qe(E,L),Qe(L,C),R0(C,e[1]),Qe(L,B),Qe(L,G),Qe(G,H),jt(Z,H,null),Qe(G,ee),Qe(G,Y),Qe(Y,le),Qe(o,ve),Qe(o,pe),Qe(pe,Ne),Qe(Ne,Ve),jt(be,Ve,null),Qe(Ne,Ce),Qe(Ne,Oe),Qe(Oe,nt),ht=!0,He||(ut=[Qr(r,"click",e[4]),Qr(v,"click",e[4]),Qr(C,"input",e[7]),uh(F=Ab.call(null,C,e[1])),Qr(C,"click",e[3]),uh(ce=Ab.call(null,G,e[1])),Qr(G,"click",e[3]),Qr(Ne,"click",e[4])],He=!0)},p(bt,[Xe]){Xe&2&&C.value!==bt[1]&&R0(C,bt[1]),F&&y0(F.update)&&Xe&2&&F.update.call(null,bt[1]),(!ht||Xe&4)&&No(le,bt[2]),ce&&y0(ce.update)&&Xe&2&&ce.update.call(null,bt[1]),(!ht||Xe&1&&mt!==(mt=`modal ${bt[0]?"is-active":""} svelte-xtmu3o`))&&ye(t,"class",mt)},i(bt){ht||(Ze(Z.$$.fragment,bt),Ze(be.$$.fragment,bt),ht=!0)},o(bt){at(Z.$$.fragment,bt),at(be.$$.fragment,bt),ht=!1},d(bt){bt&&de(t),Ut(Z),Ut(be),He=!1,oa(ut)}}}function B9(e,t,r){let{map:n}=t,{isShareModalShown:o}=t,u,c="",s="Copy";jf(()=>{u=new URL(window.location.href)});const f=()=>{r(2,s="copied"),setTimeout(()=>{r(2,s="Copy")},2e3)};let{customiseUrl:v=C=>C}=t;const w=()=>{if(!n||!u)return"";const C=`${u.protocol}//${u.host}`,F=`#${n.getZoom().toFixed(2)}`,B=`/${n.getCenter().lat.toFixed(6)}`,G=`/${n.getCenter().lng.toFixed(6)}`,H=n.getBearing()!==0?`/${n.getBearing().toFixed(1)}`:"",Z=n.getPitch()!==0?`/${n.getPitch().toFixed()}`:"";r(1,c=v(`${C}${F}${B}${G}${H}${Z}`))},E=()=>{r(0,o=!1)};function L(){c=this.value,r(1,c)}return e.$$set=C=>{"map"in C&&r(5,n=C.map),"isShareModalShown"in C&&r(0,o=C.isShareModalShown),"customiseUrl"in C&&r(6,v=C.customiseUrl)},e.$$.update=()=>{e.$$.dirty&1&&o===!0&&w()},[o,c,s,f,E,n,v,L]}class j9 extends Pn{constructor(t){super(),Mn(this,t,B9,F9,Cn,{map:5,isShareModalShown:0,customiseUrl:6})}}function U9(e){let t,r,n,o,u,c,s,f;r=new go({props:{icon:i7}});function v(C){e[7](C)}function w(C){e[8](C)}function E(C){e[9](C)}let L={};return e[0]!==void 0&&(L.map=e[0]),e[3]!==void 0&&(L.isShareModalShown=e[3]),e[1]!==void 0&&(L.customiseUrl=e[1]),o=new j9({props:L}),Ft.push(()=>Jt(o,"map",v)),Ft.push(()=>Jt(o,"isShareModalShown",w)),Ft.push(()=>Jt(o,"customiseUrl",E)),{c(){t=ct("button"),Bt(r.$$.fragment),n=pr(),Bt(o.$$.fragment)},l(C){t=ft(C,"BUTTON",{});var F=wt(t);Yt(r.$$.fragment,F),F.forEach(de),n=dr(C),Yt(o.$$.fragment,C)},m(C,F){It(C,t,F),jt(r,t,null),e[6](t),It(C,n,F),jt(o,C,F),f=!0},p(C,[F]){const B={};!u&&F&1&&(u=!0,B.map=C[0],er(()=>u=!1)),!c&&F&8&&(c=!0,B.isShareModalShown=C[3],er(()=>c=!1)),!s&&F&2&&(s=!0,B.customiseUrl=C[1],er(()=>s=!1)),o.$set(B)},i(C){f||(Ze(r.$$.fragment,C),Ze(o.$$.fragment,C),f=!0)},o(C){at(r.$$.fragment,C),at(o.$$.fragment,C),f=!1},d(C){C&&de(t),Ut(r),e[6](null),C&&de(n),Ut(o,C)}}}function q9(e,t,r){let{map:n}=t,o,u=!1,{position:c="top-right"}=t,{customiseUrl:s=F=>F}=t;function f(){}f.prototype.onAdd=function(F){return this.map=F,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",o.addEventListener("click",()=>{r(3,u=!u)}),this.controlContainer.appendChild(o),this.controlContainer},f.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let v=null;jf(async()=>{r(5,v=new f)});function w(F){Ft[F?"unshift":"push"](()=>{o=F,r(2,o)})}function E(F){n=F,r(0,n)}function L(F){u=F,r(3,u)}function C(F){s=F,r(1,s)}return e.$$set=F=>{"map"in F&&r(0,n=F.map),"position"in F&&r(4,c=F.position),"customiseUrl"in F&&r(1,s=F.customiseUrl)},e.$$.update=()=>{e.$$.dirty&49&&n&&v!==null&&n.hasControl(v)===!1&&n.addControl(v,c)},[n,s,o,u,c,v,w,E,L,C]}class V9 extends Pn{constructor(t){super(),Mn(this,t,q9,U9,Cn,{map:0,position:4,customiseUrl:1})}}const g6={name:"SplitterContext"};function $9(e){let t,r,n,o;return{c(){t=ct("div"),r=ct("div"),this.h()},l(u){t=ft(u,"DIV",{class:!0,tabindex:!0});var c=wt(t);r=ft(c,"DIV",{class:!0,style:!0}),wt(r).forEach(de),c.forEach(de),this.h()},h(){ye(r,"class","line svelte-16wga0t"),ye(r,"style",e[3]),ye(t,"class",n=np(e[2])+" svelte-16wga0t"),ye(t,"tabindex","0"),yl(()=>e[13].call(t))},m(u,c){It(u,t,c),Qe(t,r),o=Fh(t,e[13].bind(t))},p(u,[c]){c&8&&ye(r,"style",u[3]),c&4&&n!==(n=np(u[2])+" svelte-16wga0t")&&ye(t,"class",n)},i:Xn,o:Xn,d(u){u&&de(t),o()}}}function G9(e,t,r){let n,o,u,c,s,f,v,{color:w="silver"}=t,{hoverColor:E="gray"}=t,{dragColor:L="black"}=t,C=PA(g6);vl(e,C,H=>r(12,v=H));let F,B;function G(){F=this.clientWidth,B=this.clientHeight,r(0,F),r(1,B)}return e.$$set=H=>{"color"in H&&r(5,w=H.color),"hoverColor"in H&&r(6,E=H.hoverColor),"dragColor"in H&&r(7,L=H.dragColor)},e.$$.update=()=>{e.$$.dirty&4096&&r(10,n=v.dragging),e.$$.dirty&4096&&r(8,o=v.horizontal),e.$$.dirty&259&&r(11,u=o?B:F),e.$$.dirty&3296&&r(9,c={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":n?L:w,"--splitter-line-hover-color":n?L:E}),e.$$.dirty&512&&r(3,s=Object.entries(c).map(([H,Z])=>`${H}:${Z}`).join(";")),e.$$.dirty&256&&r(2,f=o?"splitter horizontal":"splitter vertical")},[F,B,f,s,C,w,E,L,o,c,n,u,v,G]}class H9 extends Pn{constructor(t){super(),Mn(this,t,G9,$9,Cn,{color:5,hoverColor:6,dragColor:7})}}const W9=e=>({}),Eb=e=>({}),Z9=e=>({}),Sb=e=>({}),X9=e=>({}),Cb=e=>({});function Y9(e){let t,r;return t=new H9({}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function J9(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F;const B=e[33].primary,G=Bu(B,e,e[32],Cb),H=e[33].splitter,Z=Bu(H,e,e[32],Sb),ee=Z||Y9(),Y=e[33].secondary,le=Bu(Y,e,e[32],Eb);return{c(){t=ct("div"),r=ct("div"),G&&G.c(),o=pr(),u=ct("div"),ee&&ee.c(),s=pr(),f=ct("div"),le&&le.c(),this.h()},l(ce){t=ft(ce,"DIV",{class:!0,style:!0});var ve=wt(t);r=ft(ve,"DIV",{class:!0});var pe=wt(r);G&&G.l(pe),pe.forEach(de),o=dr(ve),u=ft(ve,"DIV",{class:!0});var Ne=wt(u);ee&&ee.l(Ne),Ne.forEach(de),s=dr(ve),f=ft(ve,"DIV",{class:!0});var Ve=wt(f);le&&le.l(Ve),Ve.forEach(de),ve.forEach(de),this.h()},h(){ye(r,"class","primary svelte-603y9m"),yl(()=>e[34].call(r)),ye(u,"class","splitter svelte-603y9m"),yl(()=>e[35].call(u)),ye(f,"class","secondary svelte-603y9m"),yl(()=>e[36].call(f)),ye(t,"class",w=np(e[8])+" svelte-603y9m"),ye(t,"style",e[9]),yl(()=>e[37].call(t))},m(ce,ve){It(ce,t,ve),Qe(t,r),G&&G.m(r,null),n=Fh(r,e[34].bind(r)),Qe(t,o),Qe(t,u),ee&&ee.m(u,null),c=Fh(u,e[35].bind(u)),Qe(t,s),Qe(t,f),le&&le.m(f,null),v=Fh(f,e[36].bind(f)),E=Fh(t,e[37].bind(t)),L=!0,C||(F=[Qr(u,"pointerdown",e[10]),Qr(u,"pointermove",e[11]),Qr(u,"pointerup",e[12]),Qr(u,"dblclick",e[13]),Qr(u,"keydown",e[14])],C=!0)},p(ce,ve){G&&G.p&&(!L||ve[1]&2)&&ju(G,B,ce,ce[32],L?qu(B,ce[32],ve,X9):Uu(ce[32]),Cb),Z&&Z.p&&(!L||ve[1]&2)&&ju(Z,H,ce,ce[32],L?qu(H,ce[32],ve,Z9):Uu(ce[32]),Sb),le&&le.p&&(!L||ve[1]&2)&&ju(le,Y,ce,ce[32],L?qu(Y,ce[32],ve,W9):Uu(ce[32]),Eb),(!L||ve[0]&256&&w!==(w=np(ce[8])+" svelte-603y9m"))&&ye(t,"class",w),(!L||ve[0]&512)&&ye(t,"style",ce[9])},i(ce){L||(Ze(G,ce),Ze(ee,ce),Ze(le,ce),L=!0)},o(ce){at(G,ce),at(ee,ce),at(le,ce),L=!1},d(ce){ce&&de(t),G&&G.d(ce),n(),ee&&ee.d(ce),c(),le&&le.d(ce),v(),E(),C=!1,oa(F)}}}function K9(e,t,r){let n,o,u,c,s,f,v,w,E,{$$slots:L={},$$scope:C}=t,{horizontal:F=!1}=t,{initialPrimarySize:B="50%"}=t,{minPrimarySize:G="0"}=t,{minSecondarySize:H="0"}=t,{splitterSize:Z="7px"}=t,{resetOnDoubleClick:ee=!0}=t,Y,le,ce,ve,pe,Ne,Ve,be;const Ce=br=>Math.max(0,Math.min(br,100));let Oe,nt,mt,ht=!1;const He=()=>s,ut=br=>{r(23,Oe=Ce(br))},bt=df({horizontal:F,dragging:ht});MA(g6,bt);const Xe=gp(),We=br=>{br.currentTarget.setPointerCapture(br.pointerId),nt=F?br.clientY:br.clientX,mt=o,r(24,ht=!0)},ke=br=>{if(br.currentTarget.hasPointerCapture(br.pointerId)){const Gt=F?br.clientY:br.clientX;let Rr=mt+(Gt-nt);Rr=Math.max(0,Math.min(Rr,n));const Mr=Rr/n*100;r(23,Oe=Mr)}},Re=br=>{br.currentTarget.releasePointerCapture(br.pointerId),r(24,ht=!1)},Pe=()=>{ee&&r(23,Oe=void 0)},dt=br=>{const Gt=Oe||s;if(!br.ctrlKey&&!br.shiftKey&&!br.altKey){switch(br.code){case"Space":r(23,Oe=void 0);return}if(F)switch(br.code){case"ArrowUp":r(23,Oe=Ce(Gt-1));return;case"ArrowDown":r(23,Oe=Ce(Gt+1));return}else switch(br.code){case"ArrowLeft":r(23,Oe=Ce(Gt-1));return;case"ArrowRight":r(23,Oe=Ce(Gt+1));return}}};function Et(){ce=this.clientWidth,ve=this.clientHeight,r(2,ce),r(3,ve)}function Pt(){pe=this.clientWidth,Ne=this.clientHeight,r(4,pe),r(5,Ne)}function Kt(){Ve=this.clientWidth,be=this.clientHeight,r(6,Ve),r(7,be)}function $t(){Y=this.clientWidth,le=this.clientHeight,r(0,Y),r(1,le)}return e.$$set=br=>{"horizontal"in br&&r(15,F=br.horizontal),"initialPrimarySize"in br&&r(16,B=br.initialPrimarySize),"minPrimarySize"in br&&r(17,G=br.minPrimarySize),"minSecondarySize"in br&&r(18,H=br.minSecondarySize),"splitterSize"in br&&r(19,Z=br.splitterSize),"resetOnDoubleClick"in br&&r(20,ee=br.resetOnDoubleClick),"$$scope"in br&&r(32,C=br.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&32771&&r(26,n=F?le:Y),e.$$.dirty[0]&32780&&r(27,o=F?ve:ce),e.$$.dirty[0]&32816&&r(31,u=F?Ne:pe),e.$$.dirty[0]&32960&&r(30,c=F?be:Ve),e.$$.dirty[0]&201326592|e.$$.dirty[1]&1&&r(25,s=Ce(Math.ceil((o-u)/(n-u)*100))),e.$$.dirty[0]&16809984&&bt.set({horizontal:F,dragging:ht}),e.$$.dirty[0]&1258291200|e.$$.dirty[1]&1&&Xe("changed",{percent:s,primarySize:o,splitterSize:u,secondarySize:c,dragging:ht}),e.$$.dirty[0]&8454144&&r(29,f=Oe!==void 0?`${Oe}%`:B),e.$$.dirty[0]&537788416&&r(28,v={"--primary-size":`${f}`,"--min-primary-size":`${G}`,"--min-secondary-size":`${H}`,"--splitter-size":`${Z}`}),e.$$.dirty[0]&268435456&&r(9,w=Object.entries(v).map(([br,Gt])=>`${br}:${Gt}`).join(";")),e.$$.dirty[0]&32768&&r(8,E=F?"split horizontal":"split vertical")},[Y,le,ce,ve,pe,Ne,Ve,be,E,w,We,ke,Re,Pe,dt,F,B,G,H,Z,ee,He,ut,Oe,ht,s,n,o,v,f,c,u,C,L,Et,Pt,Kt,$t]}class Q9 extends Pn{constructor(t){super(),Mn(this,t,K9,J9,Cn,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}const eE=e=>({}),Ib=e=>({}),tE=e=>({}),Lb=e=>({}),rE=e=>({}),Tb=e=>({}),nE=e=>({}),Pb=e=>({});function iE(e){let t,r;return t=new go({props:{icon:r7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function oE(e){let t,r;return t=new go({props:{icon:Ny}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function aE(e){let t;const r=e[22].map,n=Bu(r,e,e[29],Ib);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,u){n&&n.m(o,u),t=!0},p(o,u){n&&n.p&&(!t||u[0]&536870912)&&ju(n,r,o,o[29],t?qu(r,o[29],u,eE):Uu(o[29]),Ib)},i(o){t||(Ze(n,o),t=!0)},o(o){at(n,o),t=!1},d(o){n&&n.d(o)}}}function sE(e){let t,r,n=e[4]&&Mb(e);const o=e[22].sidebar,u=Bu(o,e,e[29],Lb);return{c(){n&&n.c(),t=pr(),u&&u.c()},l(c){n&&n.l(c),t=dr(c),u&&u.l(c)},m(c,s){n&&n.m(c,s),It(c,t,s),u&&u.m(c,s),r=!0},p(c,s){c[4]?n?(n.p(c,s),s[0]&16&&Ze(n,1)):(n=Mb(c),n.c(),Ze(n,1),n.m(t.parentNode,t)):n&&(Ui(),at(n,1,1,()=>{n=null}),qi()),u&&u.p&&(!r||s[0]&536870912)&&ju(u,o,c,c[29],r?qu(o,c[29],s,tE):Uu(c[29]),Lb)},i(c){r||(Ze(n),Ze(u,c),r=!0)},o(c){at(n),at(u,c),r=!1},d(c){n&&n.d(c),c&&de(t),u&&u.d(c)}}}function Mb(e){let t,r,n,o,u;return r=new go({props:{icon:Ry,size:"2x",color:"#1c1c1c"}}),{c(){t=ct("span"),Bt(r.$$.fragment),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);Yt(r.$$.fragment,s),s.forEach(de),this.h()},h(){ye(t,"class","span close-icon svelte-1isg9kr")},m(c,s){It(c,t,s),jt(r,t,null),n=!0,o||(u=Qr(t,"click",e[13]),o=!0)},p:Xn,i(c){n||(Ze(r.$$.fragment,c),n=!0)},o(c){at(r.$$.fragment,c),n=!1},d(c){c&&de(t),Ut(r),o=!1,u()}}}function lE(e){let t,r,n,o;const u=[sE,aE],c=[];function s(f,v){return f[1]?0:1}return r=s(e),n=c[r]=u[r](e),{c(){t=ct("div"),n.c(),this.h()},l(f){t=ft(f,"DIV",{slot:!0,class:!0});var v=wt(t);n.l(v),v.forEach(de),this.h()},h(){ye(t,"slot","primary"),ye(t,"class","primary-content svelte-1isg9kr")},m(f,v){It(f,t,v),c[r].m(t,null),o=!0},p(f,v){let w=r;r=s(f),r===w?c[r].p(f,v):(Ui(),at(c[w],1,1,()=>{c[w]=null}),qi(),n=c[r],n?n.p(f,v):(n=c[r]=u[r](f),n.c()),Ze(n,1),n.m(t,null))},i(f){o||(Ze(n),o=!0)},o(f){at(n),o=!1},d(f){f&&de(t),c[r].d()}}}function uE(e){let t,r,n=e[4]&&Db(e);const o=e[22].sidebar,u=Bu(o,e,e[29],Tb);return{c(){n&&n.c(),t=pr(),u&&u.c()},l(c){n&&n.l(c),t=dr(c),u&&u.l(c)},m(c,s){n&&n.m(c,s),It(c,t,s),u&&u.m(c,s),r=!0},p(c,s){c[4]?n?(n.p(c,s),s[0]&16&&Ze(n,1)):(n=Db(c),n.c(),Ze(n,1),n.m(t.parentNode,t)):n&&(Ui(),at(n,1,1,()=>{n=null}),qi()),u&&u.p&&(!r||s[0]&536870912)&&ju(u,o,c,c[29],r?qu(o,c[29],s,rE):Uu(c[29]),Tb)},i(c){r||(Ze(n),Ze(u,c),r=!0)},o(c){at(n),at(u,c),r=!1},d(c){n&&n.d(c),c&&de(t),u&&u.d(c)}}}function cE(e){let t;const r=e[22].map,n=Bu(r,e,e[29],Pb);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,u){n&&n.m(o,u),t=!0},p(o,u){n&&n.p&&(!t||u[0]&536870912)&&ju(n,r,o,o[29],t?qu(r,o[29],u,nE):Uu(o[29]),Pb)},i(o){t||(Ze(n,o),t=!0)},o(o){at(n,o),t=!1},d(o){n&&n.d(o)}}}function Db(e){let t,r,n,o,u;return r=new go({props:{icon:Ry,size:"2x",color:"#1c1c1c"}}),{c(){t=ct("span"),Bt(r.$$.fragment),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);Yt(r.$$.fragment,s),s.forEach(de),this.h()},h(){ye(t,"class","span close-icon svelte-1isg9kr")},m(c,s){It(c,t,s),jt(r,t,null),n=!0,o||(u=Qr(t,"click",e[13]),o=!0)},p:Xn,i(c){n||(Ze(r.$$.fragment,c),n=!0)},o(c){at(r.$$.fragment,c),n=!1},d(c){c&&de(t),Ut(r),o=!1,u()}}}function fE(e){let t,r,n,o;const u=[cE,uE],c=[];function s(f,v){return f[1]?0:1}return r=s(e),n=c[r]=u[r](e),{c(){t=ct("div"),n.c(),this.h()},l(f){t=ft(f,"DIV",{slot:!0,class:!0});var v=wt(t);n.l(v),v.forEach(de),this.h()},h(){ye(t,"slot","secondary"),ye(t,"class","secondary-content svelte-1isg9kr")},m(f,v){It(f,t,v),c[r].m(t,null),o=!0},p(f,v){let w=r;r=s(f),r===w?c[r].p(f,v):(Ui(),at(c[w],1,1,()=>{c[w]=null}),qi(),n=c[r],n?n.p(f,v):(n=c[r]=u[r](f),n.c()),Ze(n,1),n.m(t,null))},i(f){o||(Ze(n),o=!0)},o(f){at(n),o=!1},d(f){f&&de(t),c[r].d()}}}function hE(e){let t,r,n,o,u,c,s,f,v,w,E,L;yl(e[23]);const C=[oE,iE],F=[];function B(Y,le){return Y[0]?0:1}r=B(e),n=F[r]=C[r](e);function G(Y){e[25](Y)}function H(Y){e[26](Y)}function Z(Y){e[27](Y)}let ee={initialPrimarySize:"0%",$$slots:{secondary:[fE],primary:[lE]},$$scope:{ctx:e}};return e[8]!==void 0&&(ee.minPrimarySize=e[8]),e[9]!==void 0&&(ee.minSecondarySize=e[9]),e[7]!==void 0&&(ee.splitterSize=e[7]),c=new Q9({props:ee}),Ft.push(()=>Jt(c,"minPrimarySize",G)),Ft.push(()=>Jt(c,"minSecondarySize",H)),Ft.push(()=>Jt(c,"splitterSize",Z)),e[28](c),c.$on("changed",e[12]),{c(){t=ct("button"),n.c(),o=pr(),u=ct("div"),Bt(c.$$.fragment),this.h()},l(Y){t=ft(Y,"BUTTON",{});var le=wt(t);n.l(le),le.forEach(de),o=dr(Y),u=ft(Y,"DIV",{class:!0,style:!0});var ce=wt(u);Yt(c.$$.fragment,ce),ce.forEach(de),this.h()},h(){ye(u,"class","split-container svelte-1isg9kr"),zo(u,"height",e[11]+"px"),zo(u,"width",e[10]+"px")},m(Y,le){It(Y,t,le),F[r].m(t,null),e[24](t),It(Y,o,le),It(Y,u,le),jt(c,u,null),w=!0,E||(L=Qr(window,"resize",e[23]),E=!0)},p(Y,le){let ce=r;r=B(Y),r===ce?F[r].p(Y,le):(Ui(),at(F[ce],1,1,()=>{F[ce]=null}),qi(),n=F[r],n?n.p(Y,le):(n=F[r]=C[r](Y),n.c()),Ze(n,1),n.m(t,null));const ve={};le[0]&536870930&&(ve.$$scope={dirty:le,ctx:Y}),!s&&le[0]&256&&(s=!0,ve.minPrimarySize=Y[8],er(()=>s=!1)),!f&&le[0]&512&&(f=!0,ve.minSecondarySize=Y[9],er(()=>f=!1)),!v&&le[0]&128&&(v=!0,ve.splitterSize=Y[7],er(()=>v=!1)),c.$set(ve),(!w||le[0]&2048)&&zo(u,"height",Y[11]+"px"),(!w||le[0]&1024)&&zo(u,"width",Y[10]+"px")},i(Y){w||(Ze(n),Ze(c.$$.fragment,Y),w=!0)},o(Y){at(n),at(c.$$.fragment,Y),w=!1},d(Y){Y&&de(t),F[r].d(),e[24](null),Y&&de(o),Y&&de(u),e[28](null),Ut(c),E=!1,L()}}}function pE(e,t,r){let n,o,u,{$$slots:c={},$$scope:s}=t,{map:f}=t,{isMenuShown:v=!1}=t,{initialSidebarWidth:w=380}=t,{minSidebarWidth:E="300px"}=t,{minMapWidth:L="50%"}=t,{height:C=0}=t,{width:F=0}=t,{sidebarOnLeft:B=!0}=t,G,H=0,Z=0,ee,Y="0px",le=B?E:L,ce=B?L:E,{position:ve="top-left"}=t;function pe(){}pe.prototype.onAdd=function(We){return this.map=We,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",G.addEventListener("click",()=>{r(0,v=!v)}),this.controlContainer.appendChild(G),this.controlContainer},pe.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let Ne=null;jf(async()=>{r(21,Ne=new pe),be()});const Ve=()=>{f&&(f.triggerRepaint(),f.resize())},be=()=>{if(ee){if(v===!0)if(n)B?(ee.setPercent(100),r(9,ce="0px")):(ee.setPercent(0),r(8,le="0px")),r(7,Y="0px");else{if(B){r(8,le=E),r(9,ce=L);const We=w/H*100;ee.setPercent(We)}else{r(9,ce=E),r(8,le=L);const We=(H-w)/H*100;ee.setPercent(We)}r(7,Y="10px")}else B?(r(8,le="0px"),ee.setPercent(0)):(r(9,ce="0px"),ee.setPercent(100)),r(7,Y="0px");Ve()}},Ce=()=>{be()},Oe=()=>{Ve()},nt=()=>{r(0,v=!1)};function mt(){r(2,H=window.innerWidth),r(3,Z=window.innerHeight)}function ht(We){Ft[We?"unshift":"push"](()=>{G=We,r(5,G)})}function He(We){le=We,r(8,le)}function ut(We){ce=We,r(9,ce)}function bt(We){Y=We,r(7,Y)}function Xe(We){Ft[We?"unshift":"push"](()=>{ee=We,r(6,ee)})}return e.$$set=We=>{"map"in We&&r(14,f=We.map),"isMenuShown"in We&&r(0,v=We.isMenuShown),"initialSidebarWidth"in We&&r(15,w=We.initialSidebarWidth),"minSidebarWidth"in We&&r(16,E=We.minSidebarWidth),"minMapWidth"in We&&r(17,L=We.minMapWidth),"height"in We&&r(18,C=We.height),"width"in We&&r(19,F=We.width),"sidebarOnLeft"in We&&r(1,B=We.sidebarOnLeft),"position"in We&&r(20,ve=We.position),"$$scope"in We&&r(29,s=We.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4&&r(4,n=H<768),e.$$.dirty[0]&16&&be(),e.$$.dirty[0]&262152&&r(11,o=C>0?C:Z),e.$$.dirty[0]&524292&&r(10,u=F>0?F:H),e.$$.dirty[0]&8,e.$$.dirty[0]&4,e.$$.dirty[0]&3162112&&f&&Ne!==null&&f.hasControl(Ne)===!1&&f.addControl(Ne,ve),e.$$.dirty[0]&1&&Ce()},[v,B,H,Z,n,G,ee,Y,le,ce,u,o,Oe,nt,f,w,E,L,C,F,ve,Ne,c,mt,ht,He,ut,bt,Xe,s]}class dE extends Pn{constructor(t){super(),Mn(this,t,pE,hE,Cn,{map:14,isMenuShown:0,initialSidebarWidth:15,minSidebarWidth:16,minMapWidth:17,height:18,width:19,sidebarOnLeft:1,position:20},null,[-1,-1])}}var mE=8,gE={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},yE={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},vE=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],_E={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},bE={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},wE={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},xE={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},kE={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},AE={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},EE={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},SE=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],CE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},IE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},LE={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},TE={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},PE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},ME={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},DE={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0",android:"10.0.0",ios:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},zE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},NE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},RE={type:"array",value:"*",doc:"A filter selects specific features from a layer."},OE={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},FE={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},BE={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},jE={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},UE={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},qE={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},VE={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},$E={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},GE={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},HE={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0",android:"10.0.0",ios:"10.0.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},WE={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},ZE={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},XE={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carre projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},YE={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},JE=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],KE={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},QE={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},eS={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},tS={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rS={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},nS={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},iS={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},oS={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},aS={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0 is directly above, at zenith, and 90 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0 is directly above, at zenith, and 90 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},sS={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},lS={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},uS={$version:mE,$root:gE,sources:yE,source:vE,source_vector:_E,source_raster:bE,source_raster_dem:wE,source_geojson:xE,source_video:kE,source_image:AE,layer:EE,layout:SE,layout_background:CE,layout_sky:IE,layout_fill:LE,layout_circle:TE,layout_heatmap:PE,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0",android:"10.7.0",ios:"10.7.0"}},"property-type":"constant"}},layout_line:ME,layout_symbol:DE,layout_raster:zE,layout_hillshade:NE,filter:RE,filter_symbol:OE,filter_fill:FE,filter_line:BE,filter_circle:jE,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:UE,filter_operator:qE,geometry_type:VE,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:$E,expression:GE,expression_name:HE,fog:WE,light:ZE,projection:XE,terrain:YE,paint:JE,paint_fill:KE,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.",requires:["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:QE,paint_circle:eS,paint_heatmap:tS,paint_symbol:rS,paint_raster:nS,paint_hillshade:iS,paint_background:oS,paint_sky:aS,transition:sS,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:lS},dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ug={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,o=e&&!e.nodeType&&e,u=typeof dm=="object"&&dm;(u.global===u||u.window===u||u.self===u)&&(r=u);var c,s=2147483647,f=36,v=1,w=26,E=38,L=700,C=72,F=128,B="-",G=/^xn--/,H=/[^\x20-\x7E]/,Z=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Y=f-v,le=Math.floor,ce=String.fromCharCode,ve;function pe(Xe){throw RangeError(ee[Xe])}function Ne(Xe,We){for(var ke=Xe.length,Re=[];ke--;)Re[ke]=We(Xe[ke]);return Re}function Ve(Xe,We){var ke=Xe.split("@"),Re="";ke.length>1&&(Re=ke[0]+"@",Xe=ke[1]),Xe=Xe.replace(Z,".");var Pe=Xe.split("."),dt=Ne(Pe,We).join(".");return Re+dt}function be(Xe){for(var We=[],ke=0,Re=Xe.length,Pe,dt;ke<Re;)Pe=Xe.charCodeAt(ke++),Pe>=55296&&Pe<=56319&&ke<Re?(dt=Xe.charCodeAt(ke++),(dt&64512)==56320?We.push(((Pe&1023)<<10)+(dt&1023)+65536):(We.push(Pe),ke--)):We.push(Pe);return We}function Ce(Xe){return Ne(Xe,function(We){var ke="";return We>65535&&(We-=65536,ke+=ce(We>>>10&1023|55296),We=56320|We&1023),ke+=ce(We),ke}).join("")}function Oe(Xe){return Xe-48<10?Xe-22:Xe-65<26?Xe-65:Xe-97<26?Xe-97:f}function nt(Xe,We){return Xe+22+75*(Xe<26)-((We!=0)<<5)}function mt(Xe,We,ke){var Re=0;for(Xe=ke?le(Xe/L):Xe>>1,Xe+=le(Xe/We);Xe>Y*w>>1;Re+=f)Xe=le(Xe/Y);return le(Re+(Y+1)*Xe/(Xe+E))}function ht(Xe){var We=[],ke=Xe.length,Re,Pe=0,dt=F,Et=C,Pt,Kt,$t,br,Gt,Rr,Mr,Kr,Ct;for(Pt=Xe.lastIndexOf(B),Pt<0&&(Pt=0),Kt=0;Kt<Pt;++Kt)Xe.charCodeAt(Kt)>=128&&pe("not-basic"),We.push(Xe.charCodeAt(Kt));for($t=Pt>0?Pt+1:0;$t<ke;){for(br=Pe,Gt=1,Rr=f;$t>=ke&&pe("invalid-input"),Mr=Oe(Xe.charCodeAt($t++)),(Mr>=f||Mr>le((s-Pe)/Gt))&&pe("overflow"),Pe+=Mr*Gt,Kr=Rr<=Et?v:Rr>=Et+w?w:Rr-Et,!(Mr<Kr);Rr+=f)Ct=f-Kr,Gt>le(s/Ct)&&pe("overflow"),Gt*=Ct;Re=We.length+1,Et=mt(Pe-br,Re,br==0),le(Pe/Re)>s-dt&&pe("overflow"),dt+=le(Pe/Re),Pe%=Re,We.splice(Pe++,0,dt)}return Ce(We)}function He(Xe){var We,ke,Re,Pe,dt,Et,Pt,Kt,$t,br,Gt,Rr=[],Mr,Kr,Ct,pt;for(Xe=be(Xe),Mr=Xe.length,We=F,ke=0,dt=C,Et=0;Et<Mr;++Et)Gt=Xe[Et],Gt<128&&Rr.push(ce(Gt));for(Re=Pe=Rr.length,Pe&&Rr.push(B);Re<Mr;){for(Pt=s,Et=0;Et<Mr;++Et)Gt=Xe[Et],Gt>=We&&Gt<Pt&&(Pt=Gt);for(Kr=Re+1,Pt-We>le((s-ke)/Kr)&&pe("overflow"),ke+=(Pt-We)*Kr,We=Pt,Et=0;Et<Mr;++Et)if(Gt=Xe[Et],Gt<We&&++ke>s&&pe("overflow"),Gt==We){for(Kt=ke,$t=f;br=$t<=dt?v:$t>=dt+w?w:$t-dt,!(Kt<br);$t+=f)pt=Kt-br,Ct=f-br,Rr.push(ce(nt(br+pt%Ct,0))),Kt=le(pt/Ct);Rr.push(ce(nt(Kt,0))),dt=mt(ke,Kr,Re==Pe),ke=0,++Re}++ke,++We}return Rr.join("")}function ut(Xe){return Ve(Xe,function(We){return G.test(We)?ht(We.slice(4).toLowerCase()):We})}function bt(Xe){return Ve(Xe,function(We){return H.test(We)?"xn--"+He(We):We})}if(c={version:"1.3.2",ucs2:{decode:be,encode:Ce},decode:ht,encode:He,toASCII:bt,toUnicode:ut},n&&o)if(e.exports==n)o.exports=c;else for(ve in c)c.hasOwnProperty(ve)&&(n[ve]=c[ve]);else r.punycode=c})(dm)})(Ug,Ug.exports);var cS={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},ad={};function fS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var hS=function(e,t,r,n){t=t||"&",r=r||"=";var o={};if(typeof e!="string"||e.length===0)return o;var u=/\+/g;e=e.split(t);var c=1e3;n&&typeof n.maxKeys=="number"&&(c=n.maxKeys);var s=e.length;c>0&&s>c&&(s=c);for(var f=0;f<s;++f){var v=e[f].replace(u,"%20"),w=v.indexOf(r),E,L,C,F;w>=0?(E=v.substr(0,w),L=v.substr(w+1)):(E=v,L=""),C=decodeURIComponent(E),F=decodeURIComponent(L),fS(o,C)?Array.isArray(o[C])?o[C].push(F):o[C]=[o[C],F]:o[C]=F}return o},zp=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},pS=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var u=encodeURIComponent(zp(o))+r;return Array.isArray(e[o])?e[o].map(function(c){return u+encodeURIComponent(zp(c))}).join(t):u+encodeURIComponent(zp(e[o]))}).join(t):n?encodeURIComponent(zp(n))+r+encodeURIComponent(zp(e)):""};ad.decode=ad.parse=hS;ad.encode=ad.stringify=pS;var dS=Ug.exports,nf=cS;function uf(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var mS=/^([a-z0-9.+-]+:)/i,gS=/:[0-9]*$/,yS=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vS=["<",">",'"',"`"," ","\r",`
`,"	"],_S=["{","}","|","\\","^","`"].concat(vS),qg=["'"].concat(_S),zb=["%","/","?",";","#"].concat(qg),Nb=["/","?","#"],bS=255,Rb=/^[+a-z0-9A-Z_-]{0,63}$/,wS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xS={javascript:!0,"javascript:":!0},Vg={javascript:!0,"javascript:":!0},Yh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},$g=ad;function kS(e,t,r){if(e&&nf.isObject(e)&&e instanceof uf)return e;var n=new uf;return n.parse(e,t,r),n}uf.prototype.parse=function(e,t,r){if(!nf.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",u=e.split(o),c=/\\/g;u[0]=u[0].replace(c,"/"),e=u.join(o);var s=e;if(s=s.trim(),!r&&e.split("#").length===1){var f=yS.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=$g.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=mS.exec(s);if(v){v=v[0];var w=v.toLowerCase();this.protocol=w,s=s.substr(v.length)}if(r||v||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=s.substr(0,2)==="//";E&&!(v&&Vg[v])&&(s=s.substr(2),this.slashes=!0)}if(!Vg[v]&&(E||v&&!Yh[v])){for(var L=-1,C=0;C<Nb.length;C++){var F=s.indexOf(Nb[C]);F!==-1&&(L===-1||F<L)&&(L=F)}var B,G;L===-1?G=s.lastIndexOf("@"):G=s.lastIndexOf("@",L),G!==-1&&(B=s.slice(0,G),s=s.slice(G+1),this.auth=decodeURIComponent(B)),L=-1;for(var C=0;C<zb.length;C++){var F=s.indexOf(zb[C]);F!==-1&&(L===-1||F<L)&&(L=F)}L===-1&&(L=s.length),this.host=s.slice(0,L),s=s.slice(L),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var Z=this.hostname.split(/\./),C=0,ee=Z.length;C<ee;C++){var Y=Z[C];if(Y&&!Y.match(Rb)){for(var le="",ce=0,ve=Y.length;ce<ve;ce++)Y.charCodeAt(ce)>127?le+="x":le+=Y[ce];if(!le.match(Rb)){var pe=Z.slice(0,C),Ne=Z.slice(C+1),Ve=Y.match(wS);Ve&&(pe.push(Ve[1]),Ne.unshift(Ve[2])),Ne.length&&(s="/"+Ne.join(".")+s),this.hostname=pe.join(".");break}}}this.hostname.length>bS?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=dS.toASCII(this.hostname));var be=this.port?":"+this.port:"",Ce=this.hostname||"";this.host=Ce+be,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!xS[w])for(var C=0,ee=qg.length;C<ee;C++){var Oe=qg[C];if(s.indexOf(Oe)!==-1){var nt=encodeURIComponent(Oe);nt===Oe&&(nt=escape(Oe)),s=s.split(Oe).join(nt)}}var mt=s.indexOf("#");mt!==-1&&(this.hash=s.substr(mt),s=s.slice(0,mt));var ht=s.indexOf("?");if(ht!==-1?(this.search=s.substr(ht),this.query=s.substr(ht+1),t&&(this.query=$g.parse(this.query)),s=s.slice(0,ht)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Yh[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var be=this.pathname||"",He=this.search||"";this.path=be+He}return this.href=this.format(),this};uf.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,u="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&nf.isObject(this.query)&&Object.keys(this.query).length&&(u=$g.stringify(this.query));var c=this.search||u&&"?"+u||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Yh[t])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),c&&c.charAt(0)!=="?"&&(c="?"+c),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),c=c.replace("#","%23"),t+o+r+c+n};uf.prototype.resolve=function(e){return this.resolveObject(kS(e,!1,!0)).format()};uf.prototype.resolveObject=function(e){if(nf.isString(e)){var t=new uf;t.parse(e,!1,!0),e=t}for(var r=new uf,n=Object.keys(this),o=0;o<n.length;o++){var u=n[o];r[u]=this[u]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),s=0;s<c.length;s++){var f=c[s];f!=="protocol"&&(r[f]=e[f])}return Yh[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Yh[e.protocol]){for(var v=Object.keys(e),w=0;w<v.length;w++){var E=v[w];r[E]=e[E]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Vg[e.protocol]){for(var ee=(e.pathname||"").split("/");ee.length&&!(e.host=ee.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),ee[0]!==""&&ee.unshift(""),ee.length<2&&ee.unshift(""),r.pathname=ee.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var L=r.pathname||"",C=r.search||"";r.path=L+C}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var F=r.pathname&&r.pathname.charAt(0)==="/",B=e.host||e.pathname&&e.pathname.charAt(0)==="/",G=B||F||r.host&&e.pathname,H=G,Z=r.pathname&&r.pathname.split("/")||[],ee=e.pathname&&e.pathname.split("/")||[],Y=r.protocol&&!Yh[r.protocol];if(Y&&(r.hostname="",r.port=null,r.host&&(Z[0]===""?Z[0]=r.host:Z.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(ee[0]===""?ee[0]=e.host:ee.unshift(e.host)),e.host=null),G=G&&(ee[0]===""||Z[0]==="")),B)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,Z=ee;else if(ee.length)Z||(Z=[]),Z.pop(),Z=Z.concat(ee),r.search=e.search,r.query=e.query;else if(!nf.isNullOrUndefined(e.search)){if(Y){r.hostname=r.host=Z.shift();var le=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;le&&(r.auth=le.shift(),r.host=r.hostname=le.shift())}return r.search=e.search,r.query=e.query,(!nf.isNull(r.pathname)||!nf.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!Z.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var ce=Z.slice(-1)[0],ve=(r.host||e.host||Z.length>1)&&(ce==="."||ce==="..")||ce==="",pe=0,Ne=Z.length;Ne>=0;Ne--)ce=Z[Ne],ce==="."?Z.splice(Ne,1):ce===".."?(Z.splice(Ne,1),pe++):pe&&(Z.splice(Ne,1),pe--);if(!G&&!H)for(;pe--;pe)Z.unshift("..");G&&Z[0]!==""&&(!Z[0]||Z[0].charAt(0)!=="/")&&Z.unshift(""),ve&&Z.join("/").substr(-1)!=="/"&&Z.push("");var Ve=Z[0]===""||Z[0]&&Z[0].charAt(0)==="/";if(Y){r.hostname=r.host=Ve?"":Z.length?Z.shift():"";var le=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;le&&(r.auth=le.shift(),r.host=r.hostname=le.shift())}return G=G||r.host&&Z.length,G&&!Ve&&Z.unshift(""),Z.length?r.pathname=Z.join("/"):(r.pathname=null,r.path=null),(!nf.isNull(r.pathname)||!nf.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};uf.prototype.parseHost=function(){var e=this.host,t=gS.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};function y6(e,...t){for(const r of t)for(const n in r)e[n]=r[n];return e}class AS extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}var z0=AS;class By{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[n,o]of r)this.bindings[n]=o}concat(t){return new By(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}var ES=By;const l2={kind:"null"},Gn={kind:"number"},Io={kind:"string"},wo={kind:"boolean"},cf={kind:"color"},Jh={kind:"object"},xo={kind:"value"},SS={kind:"error"},u2={kind:"collator"},c2={kind:"formatted"},Ad={kind:"resolvedImage"};function $c(e,t){return{kind:"array",itemType:e,N:t}}function ts(e){if(e.kind==="array"){const t=ts(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const CS=[l2,Gn,Io,wo,cf,c2,Jh,$c(xo),Ad];function sd(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!sd(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const r of CS)if(!sd(r,t))return null}}return`Expected ${ts(e)} but found ${ts(t)} instead.`}function jy(e,t){return t.some(r=>r.kind===e.kind)}function ld(e,t){return t.some(r=>r==="null"?e===null:r==="array"?Array.isArray(e):r==="object"?e&&!Array.isArray(e)&&typeof e=="object":r===typeof e)}var IS={},v6,Ob={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Hp(e){return e=Math.round(e),e<0?0:e>255?255:e}function Fb(e){return e<0?0:e>1?1:e}function mm(e){return e[e.length-1]==="%"?Hp(parseFloat(e)/100*255):Hp(parseInt(e))}function a1(e){return e[e.length-1]==="%"?Fb(parseFloat(e)/100):Fb(parseFloat(e))}function gm(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function LS(e){var t=e.replace(/ /g,"").toLowerCase();if(t in Ob)return Ob[t].slice();if(t[0]==="#"){if(t.length===4){var r=parseInt(t.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(t.length===7){var r=parseInt(t.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=t.indexOf("("),o=t.indexOf(")");if(n!==-1&&o+1===t.length){var u=t.substr(0,n),c=t.substr(n+1,o-(n+1)).split(","),s=1;switch(u){case"rgba":if(c.length!==4)return null;s=a1(c.pop());case"rgb":return c.length!==3?null:[mm(c[0]),mm(c[1]),mm(c[2]),s];case"hsla":if(c.length!==4)return null;s=a1(c.pop());case"hsl":if(c.length!==3)return null;var f=(parseFloat(c[0])%360+360)%360/360,v=a1(c[1]),w=a1(c[2]),E=w<=.5?w*(v+1):w+v-w*v,L=w*2-E;return[Hp(gm(L,E,f+1/3)*255),Hp(gm(L,E,f)*255),Hp(gm(L,E,f-1/3)*255),s];default:return null}}return null}try{v6=IS.parseCSSColor=LS}catch{}class lc{constructor(t,r,n,o=1){this.r=t,this.g=r,this.b=n,this.a=o}static parse(t){if(!t)return;if(t instanceof lc)return t;if(typeof t!="string")return;const r=v6(t);if(r)return new lc(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}toString(){const[t,r,n,o]=this.toArray();return`rgba(${Math.round(t)},${Math.round(r)},${Math.round(n)},${o})`}toArray(){const{r:t,g:r,b:n,a:o}=this;return o===0?[0,0,0,0]:[t*255/o,r*255/o,n*255/o,o]}toArray01(){const{r:t,g:r,b:n,a:o}=this;return o===0?[0,0,0,0]:[t/o,r/o,n/o,o]}toArray01PremultipliedAlpha(){const{r:t,g:r,b:n,a:o}=this;return[t,r,n,o]}}lc.black=new lc(0,0,0,1);lc.white=new lc(1,1,1,1);lc.transparent=new lc(0,0,0,0);lc.red=new lc(1,0,0,1);lc.blue=new lc(0,0,1,1);var ql=lc;class Uy{constructor(t,r,n){t?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Gg{constructor(t,r,n,o,u){this.text=t.normalize?t.normalize():t,this.image=r,this.scale=n,this.fontStack=o,this.textColor=u}}class g0{constructor(t){this.sections=t}static fromString(t){return new g0([new Gg(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof g0?t:g0.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const r of this.sections){if(r.image){t.push(["image",r.image.name]);continue}t.push(r.text);const n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}return t}}class mf{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new mf({name:t,available:!1}):null}serialize(){return["image",this.name]}}function _6(e,t,r,n){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function N1(e){if(e===null)return!0;if(typeof e=="string")return!0;if(typeof e=="boolean")return!0;if(typeof e=="number")return!0;if(e instanceof ql)return!0;if(e instanceof Uy)return!0;if(e instanceof g0)return!0;if(e instanceof mf)return!0;if(Array.isArray(e)){for(const t of e)if(!N1(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!N1(e[t]))return!1;return!0}else return!1}function rl(e){if(e===null)return l2;if(typeof e=="string")return Io;if(typeof e=="boolean")return wo;if(typeof e=="number")return Gn;if(e instanceof ql)return cf;if(e instanceof Uy)return u2;if(e instanceof g0)return c2;if(e instanceof mf)return Ad;if(Array.isArray(e)){const t=e.length;let r;for(const n of e){const o=rl(n);if(!r)r=o;else{if(r===o)continue;r=xo;break}}return $c(r||xo,t)}else return Jh}function Wp(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ql||e instanceof g0||e instanceof mf?e.toString():JSON.stringify(e)}class qy{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!N1(t[1]))return r.error("invalid value");const n=t[1];let o=rl(n);const u=r.expectedType;return o.kind==="array"&&o.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(o=u),new qy(o,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ql?["rgba"].concat(this.value.toArray()):this.value instanceof g0?this.value.serialize():this.value}}var R1=qy;class TS{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}var Vl=TS;const ym={string:Io,number:Gn,boolean:wo,object:Jh};class Vy{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=1,o;const u=t[0];if(u==="array"){let s;if(t.length>2){const v=t[1];if(typeof v!="string"||!(v in ym)||v==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=ym[v],n++}else s=xo;let f;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);f=t[2],n++}o=$c(s,f)}else o=ym[u];const c=[];for(;n<t.length;n++){const s=r.parse(t[n],n,xo);if(!s)return null;c.push(s)}return new Vy(o,c)}evaluate(t){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(t);if(sd(this.type,rl(n))){if(r===this.args.length-1)throw new Vl(`Expected value to be of type ${ts(this.type)}, but found ${ts(rl(n))} instead.`)}else return n}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,r=[t.kind];if(t.kind==="array"){const n=t.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);const o=t.N;(typeof o=="number"||this.args.length>1)&&r.push(o)}}return r.concat(this.args.map(n=>n.serialize()))}}var sf=Vy;class f2{constructor(t){this.type=c2,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const o=[];let u=!1;for(let c=1;c<=t.length-1;++c){const s=t[c];if(u&&typeof s=="object"&&!Array.isArray(s)){u=!1;let f=null;if(s["font-scale"]&&(f=r.parse(s["font-scale"],1,Gn),!f))return null;let v=null;if(s["text-font"]&&(v=r.parse(s["text-font"],1,$c(Io)),!v))return null;let w=null;if(s["text-color"]&&(w=r.parse(s["text-color"],1,cf),!w))return null;const E=o[o.length-1];E.scale=f,E.font=v,E.textColor=w}else{const f=r.parse(t[c],1,xo);if(!f)return null;const v=f.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,o.push({content:f,scale:null,font:null,textColor:null})}}return new f2(o)}evaluate(t){const r=n=>{const o=n.content.evaluate(t);return rl(o)===Ad?new Gg("",o,null,null,null):new Gg(Wp(o),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)};return new g0(this.sections.map(r))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const r of this.sections){t.push(r.content.serialize());const n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t}}class h2{constructor(t){this.type=Ad,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const n=r.parse(t[1],1,Io);return n?new h2(n):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),n=mf.fromString(r);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(r)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const PS={"to-boolean":wo,"to-color":cf,"to-number":Gn,"to-string":Io};class $y{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const n=t[0];if((n==="to-boolean"||n==="to-string")&&t.length!==2)return r.error("Expected one argument.");const o=PS[n],u=[];for(let c=1;c<t.length;c++){const s=r.parse(t[c],c,xo);if(!s)return null;u.push(s)}return new $y(o,u)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let r,n;for(const o of this.args){if(r=o.evaluate(t),n=null,r instanceof ql)return r;if(typeof r=="string"){const u=t.parseColor(r);if(u)return u}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=_6(r[0],r[1],r[2],r[3]),!n))return new ql(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Vl(n||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}else if(this.type.kind==="number"){let r=null;for(const n of this.args){if(r=n.evaluate(t),r===null)return 0;const o=Number(r);if(!isNaN(o))return o}throw new Vl(`Could not convert ${JSON.stringify(r)} to number.`)}else return this.type.kind==="formatted"?g0.fromString(Wp(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?mf.fromString(Wp(this.args[0].evaluate(t))):Wp(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new f2([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new h2(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(r=>{t.push(r.serialize())}),t}}var jh=$y;const MS=["Unknown","Point","LineString","Polygon"];class DS{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?MS[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:n,y:o}=this.featureTileCoord,u=n*r-t[0],c=o*r-t[1],s=this.featureDistanceData.bearing[0],f=this.featureDistanceData.bearing[1];return s*u+f*c}return 0}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=ql.parse(t)),r}}var b6=DS;class Uh{constructor(t,r,n,o){this.name=t,this.type=r,this._evaluate=n,this.args=o}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,r){const n=t[0],o=Uh.definitions[n];if(!o)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(o)?o[0]:o.type,c=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,s=c.filter(([v])=>!Array.isArray(v)||v.length===t.length-1);let f=null;for(const[v,w]of s){f=new E6(r.registry,r.path,null,r.scope);const E=[];let L=!1;for(let C=1;C<t.length;C++){const F=t[C],B=Array.isArray(v)?v[C-1]:v.type,G=f.parse(F,1+E.length,B);if(!G){L=!0;break}E.push(G)}if(!L){if(Array.isArray(v)&&v.length!==E.length){f.error(`Expected ${v.length} arguments, but found ${E.length} instead.`);continue}for(let C=0;C<E.length;C++){const F=Array.isArray(v)?v[C]:v.type,B=E[C];f.concat(C+1).checkSubtype(F,B.type)}if(f.errors.length===0)return new Uh(n,u,w,E)}}if(s.length===1)r.errors.push(...f.errors);else{const w=(s.length?s:c).map(([L])=>zS(L)).join(" | "),E=[];for(let L=1;L<t.length;L++){const C=r.parse(t[L],1+E.length);if(!C)return null;E.push(ts(C.type))}r.error(`Expected arguments of type ${w}, but found (${E.join(", ")}) instead.`)}return null}static register(t,r){Uh.definitions=r;for(const n in r)t[n]=Uh}}function zS(e){return Array.isArray(e)?`(${e.map(ts).join(", ")})`:`(${ts(e.type)}...)`}var yp=Uh;class p2{constructor(t,r,n){this.type=u2,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const n=t[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const o=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,wo);if(!o)return null;const u=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,wo);if(!u)return null;let c=null;return n.locale&&(c=r.parse(n.locale,1,Io),!c)?null:new p2(o,u,c)}evaluate(t){return new Uy(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Tf=8192;function Gy(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function NS(e){return(180+e)/360}function RS(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function O1(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function OS(e,t){const r=NS(e[0]),n=RS(e[1]),o=Math.pow(2,t.z);return[Math.round(r*o*Tf),Math.round(n*o*Tf)]}function FS(e,t,r){const n=e[0]-t[0],o=e[1]-t[1],u=e[0]-r[0],c=e[1]-r[1];return n*c-u*o===0&&n*u<=0&&o*c<=0}function BS(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function Hy(e,t){let r=!1;for(let n=0,o=t.length;n<o;n++){const u=t[n];for(let c=0,s=u.length;c<s-1;c++){if(FS(e,u[c],u[c+1]))return!1;BS(e,u[c],u[c+1])&&(r=!r)}}return r}function jS(e,t){for(let r=0;r<t.length;r++)if(Hy(e,t[r]))return!0;return!1}function US(e,t){return e[0]*t[1]-e[1]*t[0]}function Bb(e,t,r,n){const o=e[0]-r[0],u=e[1]-r[1],c=t[0]-r[0],s=t[1]-r[1],f=n[0]-r[0],v=n[1]-r[1],w=o*v-f*u,E=c*v-f*s;return w>0&&E<0||w<0&&E>0}function qS(e,t,r,n){const o=[t[0]-e[0],t[1]-e[1]],u=[n[0]-r[0],n[1]-r[1]];return US(u,o)===0?!1:!!(Bb(e,t,r,n)&&Bb(r,n,e,t))}function VS(e,t,r){for(const n of r)for(let o=0;o<n.length-1;++o)if(qS(e,t,n[o],n[o+1]))return!0;return!1}function w6(e,t){for(let r=0;r<e.length;++r)if(!Hy(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(VS(e[r],e[r+1],t))return!1;return!0}function $S(e,t){for(let r=0;r<t.length;r++)if(w6(e,t[r]))return!0;return!1}function Wy(e,t,r){const n=[];for(let o=0;o<e.length;o++){const u=[];for(let c=0;c<e[o].length;c++){const s=OS(e[o][c],r);Gy(t,s),u.push(s)}n.push(u)}return n}function x6(e,t,r){const n=[];for(let o=0;o<e.length;o++){const u=Wy(e[o],t,r);n.push(u)}return n}function k6(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const o=n*.5;let u=e[0]-r[0]>o?-n:r[0]-e[0]>o?n:0;u===0&&(u=e[0]-r[2]>o?-n:r[2]-e[0]>o?n:0),e[0]+=u}Gy(t,e)}function GS(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function jb(e,t,r,n){const o=Math.pow(2,n.z)*Tf,u=[n.x*Tf,n.y*Tf],c=[];if(!e)return c;for(const s of e)for(const f of s){const v=[f.x+u[0],f.y+u[1]];k6(v,t,r,o),c.push(v)}return c}function Ub(e,t,r,n){const o=Math.pow(2,n.z)*Tf,u=[n.x*Tf,n.y*Tf],c=[];if(!e)return c;for(const s of e){const f=[];for(const v of s){const w=[v.x+u[0],v.y+u[1]];Gy(t,w),f.push(w)}c.push(f)}if(t[2]-t[0]<=o/2){GS(t);for(const s of c)for(const f of s)k6(f,t,r,o)}return c}function HS(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if(t.type==="Polygon"){const u=Wy(t.coordinates,n,o),c=jb(e.geometry(),r,n,o);if(!O1(r,n))return!1;for(const s of c)if(!Hy(s,u))return!1}if(t.type==="MultiPolygon"){const u=x6(t.coordinates,n,o),c=jb(e.geometry(),r,n,o);if(!O1(r,n))return!1;for(const s of c)if(!jS(s,u))return!1}return!0}function WS(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if(t.type==="Polygon"){const u=Wy(t.coordinates,n,o),c=Ub(e.geometry(),r,n,o);if(!O1(r,n))return!1;for(const s of c)if(!w6(s,u))return!1}if(t.type==="MultiPolygon"){const u=x6(t.coordinates,n,o),c=Ub(e.geometry(),r,n,o);if(!O1(r,n))return!1;for(const s of c)if(!$S(s,u))return!1}return!0}class Zp{constructor(t,r){this.type=wo,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(N1(t[1])){const n=t[1];if(n.type==="FeatureCollection")for(let o=0;o<n.features.length;++o){const u=n.features[o].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Zp(n,n.features[o].geometry)}else if(n.type==="Feature"){const o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new Zp(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Zp(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return HS(t,this.geometries);if(t.geometryType()==="LineString")return WS(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Zy=Zp;function Xy(e){if(e instanceof yp){if(e.name==="get"&&e.args.length===1)return!1;if(e.name==="feature-state")return!1;if(e.name==="has"&&e.args.length===1)return!1;if(e.name==="properties"||e.name==="geometry-type"||e.name==="id")return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Zy)return!1;let t=!0;return e.eachChild(r=>{t&&!Xy(r)&&(t=!1)}),t}function Yy(e){if(e instanceof yp&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(r=>{t&&!Yy(r)&&(t=!1)}),t}function Jy(e,t){if(e instanceof yp&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(n=>{r&&!Jy(n,t)&&(r=!1)}),r}class Ky{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=t[1];return r.scope.has(n)?new Ky(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var A6=Ky;class Qy{constructor(t,r=[],n,o=new ES,u=[]){this.registry=t,this.path=r,this.key=r.map(c=>`[${c}]`).join(""),this.scope=o,this.errors=u,this.expectedType=n}parse(t,r,n,o,u={}){return r?this.concat(r,n,o)._parse(t,u):this._parse(t,u)}_parse(t,r){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function n(o,u,c){return c==="assert"?new sf(u,[o]):c==="coerce"?new jh(u,[o]):o}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=t[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[o];if(u){let c=u.parse(t,this);if(!c)return null;if(this.expectedType){const s=this.expectedType,f=c.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&f.kind==="value")c=n(c,s,r.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))c=n(c,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,f))return null}if(!(c instanceof R1)&&c.type.kind!=="resolvedImage"&&Hg(c)){const s=new b6;try{c=new R1(c.type,c.evaluate(s))}catch(f){return this.error(f.message),null}}return c}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,r,n){const o=typeof t=="number"?this.path.concat(t):this.path,u=n?this.scope.concat(n):this.scope;return new Qy(this.registry,o,r||null,u,this.errors)}error(t,...r){const n=`${this.key}${r.map(o=>`[${o}]`).join("")}`;this.errors.push(new z0(n,t))}checkSubtype(t,r){const n=sd(t,r);return n&&this.error(n),n}}var E6=Qy;function Hg(e){if(e instanceof A6)return Hg(e.boundExpression);if(e instanceof yp&&e.name==="error")return!1;if(e instanceof p2)return!1;if(e instanceof Zy)return!1;const t=e instanceof jh||e instanceof sf;let r=!0;return e.eachChild(n=>{t?r=r&&Hg(n):r=r&&n instanceof R1}),r?Xy(e)&&Jy(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function d2(e,t){const r=e.length-1;let n=0,o=r,u=0,c,s;for(;n<=o;)if(u=Math.floor((n+o)/2),c=e[u],s=e[u+1],c<=t){if(u===r||t<s)return u;n=u+1}else if(c>t)o=u-1;else throw new Vl("Input is not a number.");return 0}class ev{constructor(t,r,n){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[o,u]of n)this.labels.push(o),this.outputs.push(u)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");const n=r.parse(t[1],1,Gn);if(!n)return null;const o=[];let u=null;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(let c=1;c<t.length;c+=2){const s=c===1?-1/0:t[c],f=t[c+1],v=c,w=c+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(o.length&&o[o.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const E=r.parse(f,w,u);if(!E)return null;u=u||E.type,o.push([s,E])}return new ev(u,n,o)}evaluate(t){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);const o=this.input.evaluate(t);if(o<=r[0])return n[0].evaluate(t);const u=r.length;if(o>=r[u-1])return n[u-1].evaluate(t);const c=d2(r,o);return n[c].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&t.push(this.labels[r]),t.push(this.outputs[r].serialize());return t}}var S6=ev,ZS=C6;function C6(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}C6.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var o=this.sampleCurveX(r)-e;if(Math.abs(o)<t)return r;var u=this.sampleCurveDerivativeX(r);if(Math.abs(u)<1e-6)break;r=r-o/u}var c=0,s=1;for(r=e,n=0;n<20&&(o=this.sampleCurveX(r),!(Math.abs(o-e)<t));n++)e>o?c=r:s=r,r=(s-c)*.5+c;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};function Lc(e,t,r){return e*(1-r)+t*r}function XS(e,t,r){return new ql(Lc(e.r,t.r,r),Lc(e.g,t.g,r),Lc(e.b,t.b,r),Lc(e.a,t.a,r))}function YS(e,t,r){return e.map((n,o)=>Lc(n,t[o],r))}var I6=Object.freeze({__proto__:null,number:Lc,color:XS,array:YS});const L6=.95047,T6=1,P6=1.08883,M6=4/29,Kh=6/29,D6=3*Kh*Kh,JS=Kh*Kh*Kh,KS=Math.PI/180,QS=180/Math.PI;function vm(e){return e>JS?Math.pow(e,1/3):e/D6+M6}function _m(e){return e>Kh?e*e*e:D6*(e-M6)}function bm(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function wm(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function z6(e){const t=wm(e.r),r=wm(e.g),n=wm(e.b),o=vm((.4124564*t+.3575761*r+.1804375*n)/L6),u=vm((.2126729*t+.7151522*r+.072175*n)/T6),c=vm((.0193339*t+.119192*r+.9503041*n)/P6);return{l:116*u-16,a:500*(o-u),b:200*(u-c),alpha:e.a}}function N6(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=T6*_m(t),r=L6*_m(r),n=P6*_m(n),new ql(bm(3.2404542*r-1.5371385*t-.4985314*n),bm(-.969266*r+1.8760108*t+.041556*n),bm(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function eC(e,t,r){return{l:Lc(e.l,t.l,r),a:Lc(e.a,t.a,r),b:Lc(e.b,t.b,r),alpha:Lc(e.alpha,t.alpha,r)}}function tC(e){const{l:t,a:r,b:n}=z6(e),o=Math.atan2(n,r)*QS;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}}function rC(e){const t=e.h*KS,r=e.c,n=e.l;return N6({l:n,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function nC(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function iC(e,t,r){return{h:nC(e.h,t.h,r),c:Lc(e.c,t.c,r),l:Lc(e.l,t.l,r),alpha:Lc(e.alpha,t.alpha,r)}}const jp={forward:z6,reverse:N6,interpolate:eC},Up={forward:tC,reverse:rC,interpolate:iC};var R6=Object.freeze({__proto__:null,lab:jp,hcl:Up});class F1{constructor(t,r,n,o,u){this.type=t,this.operator=r,this.interpolation=n,this.input=o,this.labels=[],this.outputs=[];for(const[c,s]of u)this.labels.push(c),this.outputs.push(s)}static interpolationFactor(t,r,n,o){let u=0;if(t.name==="exponential")u=xm(r,t.base,n,o);else if(t.name==="linear")u=xm(r,1,n,o);else if(t.name==="cubic-bezier"){const c=t.controlPoints;u=new ZS(c[0],c[1],c[2],c[3]).solve(xm(r,1,n,o))}return u}static parse(t,r){let[n,o,u,...c]=t;if(!Array.isArray(o)||o.length===0)return r.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){const v=o[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:v}}else if(o[0]==="cubic-bezier"){const v=o.slice(1);if(v.length!==4||v.some(w=>typeof w!="number"||w<0||w>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:v}}else return r.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(u=r.parse(u,2,Gn),!u)return null;const s=[];let f=null;n==="interpolate-hcl"||n==="interpolate-lab"?f=cf:r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);for(let v=0;v<c.length;v+=2){const w=c[v],E=c[v+1],L=v+3,C=v+4;if(typeof w!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(s.length&&s[s.length-1][0]>=w)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const F=r.parse(E,C,f);if(!F)return null;f=f||F.type,s.push([w,F])}return f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N=="number")?r.error(`Type ${ts(f)} is not interpolatable.`):new F1(f,n,o,u,s)}evaluate(t){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);const o=this.input.evaluate(t);if(o<=r[0])return n[0].evaluate(t);const u=r.length;if(o>=r[u-1])return n[u-1].evaluate(t);const c=d2(r,o),s=r[c],f=r[c+1],v=F1.interpolationFactor(this.interpolation,o,s,f),w=n[c].evaluate(t),E=n[c+1].evaluate(t);return this.operator==="interpolate"?I6[this.type.kind.toLowerCase()](w,E,v):this.operator==="interpolate-hcl"?Up.reverse(Up.interpolate(Up.forward(w),Up.forward(E),v)):jp.reverse(jp.interpolate(jp.forward(w),jp.forward(E),v))}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;this.interpolation.name==="linear"?t=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?t=["linear"]:t=["exponential",this.interpolation.base]:t=["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r}}function xm(e,t,r,n){const o=n-r,u=e-r;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}var ff=F1;class B1{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let n=null;const o=r.expectedType;o&&o.kind!=="value"&&(n=o);const u=[];for(const s of t.slice(1)){const f=r.parse(s,1+u.length,n,void 0,{typeAnnotation:"omit"});if(!f)return null;n=n||f.type,u.push(f)}return o&&u.some(s=>sd(o,s.type))?new B1(xo,u):new B1(n,u)}evaluate(t){let r=null,n=0,o;for(const u of this.args){if(n++,r=u.evaluate(t),r&&r instanceof mf&&!r.available&&(o||(o=r),r=null,n===this.args.length))return o;if(r!==null)break}return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var O6=B1;class tv{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let u=1;u<t.length-1;u+=2){const c=t[u];if(typeof c!="string")return r.error(`Expected string, but found ${typeof c} instead.`,u);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);const s=r.parse(t[u+1],u+1);if(!s)return null;n.push([c,s])}const o=r.parse(t[t.length-1],t.length-1,r.expectedType,n);return o?new tv(n,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[r,n]of this.bindings)t.push(r,n.serialize());return t.push(this.result.serialize()),t}}var F6=tv;class rv{constructor(t,r,n){this.type=t,this.index=r,this.input=n}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,Gn),o=r.parse(t[2],2,$c(r.expectedType||xo));if(!n||!o)return null;const u=o.type;return new rv(u.itemType,n,o)}evaluate(t){const r=this.index.evaluate(t),n=this.input.evaluate(t);if(r<0)throw new Vl(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new Vl(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new Vl(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var oC=rv;class nv{constructor(t,r){this.type=wo,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,xo);return!n||!o?null:jy(n.type,[wo,Io,Gn,l2,xo])?new nv(n,o):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ts(n.type)} instead`)}evaluate(t){const r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(n==null)return!1;if(!ld(r,["boolean","string","number","null"]))throw new Vl(`Expected first argument to be of type boolean, string, number or null, but found ${ts(rl(r))} instead.`);if(!ld(n,["string","array"]))throw new Vl(`Expected second argument to be of type array or string, but found ${ts(rl(n))} instead.`);return n.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var aC=nv;class j1{constructor(t,r,n){this.type=Gn,this.needle=t,this.haystack=r,this.fromIndex=n}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,xo);if(!n||!o)return null;if(!jy(n.type,[wo,Io,Gn,l2,xo]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ts(n.type)} instead`);if(t.length===4){const u=r.parse(t[3],3,Gn);return u?new j1(n,o,u):null}else return new j1(n,o)}evaluate(t){const r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!ld(r,["boolean","string","number","null"]))throw new Vl(`Expected first argument to be of type boolean, string, number or null, but found ${ts(rl(r))} instead.`);if(!ld(n,["string","array"]))throw new Vl(`Expected second argument to be of type array or string, but found ${ts(rl(n))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(t);return n.indexOf(r,o)}return n.indexOf(r)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var sC=j1;class iv{constructor(t,r,n,o,u,c){this.inputType=t,this.type=r,this.input=n,this.cases=o,this.outputs=u,this.otherwise=c}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return r.error("Expected an even number of arguments.");let n,o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const u={},c=[];for(let v=2;v<t.length-1;v+=2){let w=t[v];const E=t[v+1];Array.isArray(w)||(w=[w]);const L=r.concat(v);if(w.length===0)return L.error("Expected at least one branch label.");for(const F of w){if(typeof F!="number"&&typeof F!="string")return L.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return L.error("Numeric branch labels must be integer values.");if(!n)n=rl(F);else if(L.checkSubtype(n,rl(F)))return null;if(typeof u[String(F)]<"u")return L.error("Branch labels must be unique.");u[String(F)]=c.length}const C=r.parse(E,v,o);if(!C)return null;o=o||C.type,c.push(C)}const s=r.parse(t[1],1,xo);if(!s)return null;const f=r.parse(t[t.length-1],t.length-1,o);return!f||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new iv(n,o,s,u,c,f)}evaluate(t){const r=this.input.evaluate(t);return(rl(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),n=[],o={};for(const c of r){const s=o[this.cases[c]];s===void 0?(o[this.cases[c]]=n.length,n.push([this.cases[c],[c]])):n[s][1].push(c)}const u=c=>this.inputType.kind==="number"?Number(c):c;for(const[c,s]of n)s.length===1?t.push(u(s[0])):t.push(s.map(u)),t.push(this.outputs[c].serialize());return t.push(this.otherwise.serialize()),t}}var lC=iv;class ov{constructor(t,r,n){this.type=t,this.branches=r,this.otherwise=n}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const o=[];for(let c=1;c<t.length-1;c+=2){const s=r.parse(t[c],c,wo);if(!s)return null;const f=r.parse(t[c+1],c+1,n);if(!f)return null;o.push([s,f]),n=n||f.type}const u=r.parse(t[t.length-1],t.length-1,n);return u?new ov(n,o,u):null}evaluate(t){for(const[r,n]of this.branches)if(r.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,n]of this.branches)t(r),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var uC=ov;class U1{constructor(t,r,n,o){this.type=t,this.input=r,this.beginIndex=n,this.endIndex=o}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,Gn);if(!n||!o)return null;if(!jy(n.type,[$c(xo),Io,xo]))return r.error(`Expected first argument to be of type array or string, but found ${ts(n.type)} instead`);if(t.length===4){const u=r.parse(t[3],3,Gn);return u?new U1(n.type,n,o,u):null}else return new U1(n.type,n,o)}evaluate(t){const r=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!ld(r,["string","array"]))throw new Vl(`Expected first argument to be of type array or string, but found ${ts(rl(r))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(t);return r.slice(n,o)}return r.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var cC=U1;function qb(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function fC(e,t,r){return t===r}function hC(e,t,r){return t!==r}function pC(e,t,r){return t<r}function dC(e,t,r){return t>r}function mC(e,t,r){return t<=r}function gC(e,t,r){return t>=r}function B6(e,t,r,n){return n.compare(t,r)===0}function yC(e,t,r,n){return!B6(e,t,r,n)}function vC(e,t,r,n){return n.compare(t,r)<0}function _C(e,t,r,n){return n.compare(t,r)>0}function bC(e,t,r,n){return n.compare(t,r)<=0}function wC(e,t,r,n){return n.compare(t,r)>=0}function vp(e,t,r){const n=e!=="=="&&e!=="!=";return class j6{constructor(u,c,s){this.type=wo,this.lhs=u,this.rhs=c,this.collator=s,this.hasUntypedArgument=u.type.kind==="value"||c.type.kind==="value"}static parse(u,c){if(u.length!==3&&u.length!==4)return c.error("Expected two or three arguments.");const s=u[0];let f=c.parse(u[1],1,xo);if(!f)return null;if(!qb(s,f.type))return c.concat(1).error(`"${s}" comparisons are not supported for type '${ts(f.type)}'.`);let v=c.parse(u[2],2,xo);if(!v)return null;if(!qb(s,v.type))return c.concat(2).error(`"${s}" comparisons are not supported for type '${ts(v.type)}'.`);if(f.type.kind!==v.type.kind&&f.type.kind!=="value"&&v.type.kind!=="value")return c.error(`Cannot compare types '${ts(f.type)}' and '${ts(v.type)}'.`);n&&(f.type.kind==="value"&&v.type.kind!=="value"?f=new sf(v.type,[f]):f.type.kind!=="value"&&v.type.kind==="value"&&(v=new sf(f.type,[v])));let w=null;if(u.length===4){if(f.type.kind!=="string"&&v.type.kind!=="string"&&f.type.kind!=="value"&&v.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(w=c.parse(u[3],3,u2),!w)return null}return new j6(f,v,w)}evaluate(u){const c=this.lhs.evaluate(u),s=this.rhs.evaluate(u);if(n&&this.hasUntypedArgument){const f=rl(c),v=rl(s);if(f.kind!==v.kind||!(f.kind==="string"||f.kind==="number"))throw new Vl(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${f.kind}, ${v.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const f=rl(c),v=rl(s);if(f.kind!=="string"||v.kind!=="string")return t(u,c,s)}return this.collator?r(u,c,s,this.collator.evaluate(u)):t(u,c,s)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[e];return this.eachChild(c=>{u.push(c.serialize())}),u}}}const xC=vp("==",fC,B6),kC=vp("!=",hC,yC),AC=vp("<",pC,vC),EC=vp(">",dC,_C),SC=vp("<=",mC,bC),CC=vp(">=",gC,wC);class av{constructor(t,r,n,o,u,c){this.type=Io,this.number=t,this.locale=r,this.currency=n,this.unit=o,this.minFractionDigits=u,this.maxFractionDigits=c}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const n=r.parse(t[1],1,Gn);if(!n)return null;const o=t[2];if(typeof o!="object"||Array.isArray(o))return r.error("NumberFormat options argument must be an object.");let u=null;if(o.locale&&(u=r.parse(o.locale,1,Io),!u))return null;let c=null;if(o.currency&&(c=r.parse(o.currency,1,Io),!c))return null;let s=null;if(o.unit&&(s=r.parse(o.unit,1,Io),!s))return null;let f=null;if(o["min-fraction-digits"]&&(f=r.parse(o["min-fraction-digits"],1,Gn),!f))return null;let v=null;return o["max-fraction-digits"]&&(v=r.parse(o["max-fraction-digits"],1,Gn),!v)?null:new av(n,u,c,s,f,v)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class sv{constructor(t){this.type=Gn,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=r.parse(t[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${ts(n.type)} instead.`):new sv(n):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new Vl(`Expected value to be of type string or array, but found ${ts(rl(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var IC=sv;const U6={"==":xC,"!=":kC,">":EC,"<":AC,">=":CC,"<=":SC,array:sf,at:oC,boolean:sf,case:uC,coalesce:O6,collator:p2,format:f2,image:h2,in:aC,"index-of":sC,interpolate:ff,"interpolate-hcl":ff,"interpolate-lab":ff,length:IC,let:F6,literal:R1,match:lC,number:sf,"number-format":av,object:sf,slice:cC,step:S6,string:sf,"to-boolean":jh,"to-color":jh,"to-number":jh,"to-string":jh,var:A6,within:Zy};function Vb(e,[t,r,n,o]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const u=o?o.evaluate(e):1,c=_6(t,r,n,u);if(c)throw new Vl(c);return new ql(t/255*u,r/255*u,n/255*u,u)}function $b(e,t){return e in t}function km(e,t){const r=t[e];return typeof r>"u"?null:r}function LC(e,t,r,n){for(;r<=n;){const o=r+n>>1;if(t[o]===e)return!0;t[o]>e?n=o-1:r=o+1}return!1}function Xf(e){return{type:e}}yp.register(U6,{error:[SS,[Io],(e,[t])=>{throw new Vl(t.evaluate(e))}],typeof:[Io,[xo],(e,[t])=>ts(rl(t.evaluate(e)))],"to-rgba":[$c(Gn,4),[cf],(e,[t])=>t.evaluate(e).toArray()],rgb:[cf,[Gn,Gn,Gn],Vb],rgba:[cf,[Gn,Gn,Gn,Gn],Vb],has:{type:wo,overloads:[[[Io],(e,[t])=>$b(t.evaluate(e),e.properties())],[[Io,Jh],(e,[t,r])=>$b(t.evaluate(e),r.evaluate(e))]]},get:{type:xo,overloads:[[[Io],(e,[t])=>km(t.evaluate(e),e.properties())],[[Io,Jh],(e,[t,r])=>km(t.evaluate(e),r.evaluate(e))]]},"feature-state":[xo,[Io],(e,[t])=>km(t.evaluate(e),e.featureState||{})],properties:[Jh,[],e=>e.properties()],"geometry-type":[Io,[],e=>e.geometryType()],id:[xo,[],e=>e.id()],zoom:[Gn,[],e=>e.globals.zoom],pitch:[Gn,[],e=>e.globals.pitch||0],"distance-from-center":[Gn,[],e=>e.distanceFromCenter()],"heatmap-density":[Gn,[],e=>e.globals.heatmapDensity||0],"line-progress":[Gn,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[Gn,[],e=>e.globals.skyRadialProgress||0],accumulated:[xo,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[Gn,Xf(Gn),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[Gn,Xf(Gn),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:Gn,overloads:[[[Gn,Gn],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[Gn],(e,[t])=>-t.evaluate(e)]]},"/":[Gn,[Gn,Gn],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[Gn,[Gn,Gn],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[Gn,[],()=>Math.LN2],pi:[Gn,[],()=>Math.PI],e:[Gn,[],()=>Math.E],"^":[Gn,[Gn,Gn],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[Gn,[Gn],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Gn,[Gn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Gn,[Gn],(e,[t])=>Math.log(t.evaluate(e))],log2:[Gn,[Gn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Gn,[Gn],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Gn,[Gn],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Gn,[Gn],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Gn,[Gn],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Gn,[Gn],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Gn,[Gn],(e,[t])=>Math.atan(t.evaluate(e))],min:[Gn,Xf(Gn),(e,t)=>Math.min(...t.map(r=>r.evaluate(e)))],max:[Gn,Xf(Gn),(e,t)=>Math.max(...t.map(r=>r.evaluate(e)))],abs:[Gn,[Gn],(e,[t])=>Math.abs(t.evaluate(e))],round:[Gn,[Gn],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Gn,[Gn],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Gn,[Gn],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[wo,[Io,xo],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[wo,[xo],(e,[t])=>e.id()===t.value],"filter-type-==":[wo,[Io],(e,[t])=>e.geometryType()===t.value],"filter-<":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[wo,[xo],(e,[t])=>t.value in e.properties()],"filter-has-id":[wo,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[wo,[$c(Io)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[wo,[$c(xo)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[wo,[Io,$c(xo)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[wo,[Io,$c(xo)],(e,[t,r])=>LC(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:wo,overloads:[[[wo,wo],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Xf(wo),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:wo,overloads:[[[wo,wo],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Xf(wo),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[wo,[wo],(e,[t])=>!t.evaluate(e)],"is-supported-script":[wo,[Io],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return r?r(t.evaluate(e)):!0}],upcase:[Io,[Io],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Io,[Io],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Io,Xf(xo),(e,t)=>t.map(r=>Wp(r.evaluate(e))).join("")],"resolved-locale":[Io,[u2],(e,[t])=>t.evaluate(e).resolvedLocale()]});var q6=U6;function Wg(e){return{result:"success",value:e}}function Nh(e){return{result:"error",value:e}}function TC(e){return e["property-type"]==="data-driven"}function PC(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function V6(e){return!!e.expression&&e.expression.interpolated}function lv(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function uv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function MC(e){return e}function cv(e,t){const r=t.type==="color",n=e.stops&&typeof e.stops[0][0]=="object",o=n||e.property!==void 0,u=n||!o,c=e.type||(V6(t)?"exponential":"interval");if(r&&(e=y6({},e),e.stops&&(e.stops=e.stops.map(w=>[w[0],ql.parse(w[1])])),e.default?e.default=ql.parse(e.default):e.default=ql.parse(t.default)),e.colorSpace&&e.colorSpace!=="rgb"&&!R6[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let s,f,v;if(c==="exponential")s=Gb;else if(c==="interval")s=zC;else if(c==="categorical"){s=DC,f=Object.create(null);for(const w of e.stops)f[w[0]]=w[1];v=typeof e.stops[0][0]}else if(c==="identity")s=NC;else throw new Error(`Unknown function type "${c}"`);if(n){const w={},E=[];for(let F=0;F<e.stops.length;F++){const B=e.stops[F],G=B[0].zoom;w[G]===void 0&&(w[G]={zoom:G,type:e.type,property:e.property,default:e.default,stops:[]},E.push(G)),w[G].stops.push([B[0].value,B[1]])}const L=[];for(const F of E)L.push([w[F].zoom,cv(w[F],t)]);const C={name:"linear"};return{kind:"composite",interpolationType:C,interpolationFactor:ff.interpolationFactor.bind(void 0,C),zoomStops:L.map(F=>F[0]),evaluate({zoom:F},B){return Gb({stops:L,base:e.base},t,F).evaluate(F,B)}}}else if(u){const w=c==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:ff.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map(E=>E[0]),evaluate:({zoom:E})=>s(e,t,E,f,v)}}else return{kind:"source",evaluate(w,E){const L=E&&E.properties?E.properties[e.property]:void 0;return L===void 0?Ed(e.default,t.default):s(e,t,L,f,v)}}}function Ed(e,t,r){if(e!==void 0)return e;if(t!==void 0)return t;if(r!==void 0)return r}function DC(e,t,r,n,o){const u=typeof r===o?n[r]:void 0;return Ed(u,e.default,t.default)}function zC(e,t,r){if(lv(r)!=="number")return Ed(e.default,t.default);const n=e.stops.length;if(n===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const o=d2(e.stops.map(u=>u[0]),r);return e.stops[o][1]}function Gb(e,t,r){const n=e.base!==void 0?e.base:1;if(lv(r)!=="number")return Ed(e.default,t.default);const o=e.stops.length;if(o===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];const u=d2(e.stops.map(w=>w[0]),r),c=RC(r,n,e.stops[u][0],e.stops[u+1][0]),s=e.stops[u][1],f=e.stops[u+1][1];let v=I6[t.type]||MC;if(e.colorSpace&&e.colorSpace!=="rgb"){const w=R6[e.colorSpace];v=(E,L)=>w.reverse(w.interpolate(w.forward(E),w.forward(L),c))}return typeof s.evaluate=="function"?{evaluate(...w){const E=s.evaluate.apply(void 0,w),L=f.evaluate.apply(void 0,w);if(!(E===void 0||L===void 0))return v(E,L,c)}}:v(s,f,c)}function NC(e,t,r){return t.type==="color"?r=ql.parse(r):t.type==="formatted"?r=g0.fromString(r.toString()):t.type==="resolvedImage"?r=mf.fromString(r.toString()):lv(r)!==t.type&&(t.type!=="enum"||!t.values[r])&&(r=void 0),Ed(r,e.default,t.default)}function RC(e,t,r,n){const o=n-r,u=e-r;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}class $6{constructor(t,r){this.expression=t,this._warningHistory={},this._evaluator=new b6,this._defaultValue=r?BC(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,n,o,u,c,s,f){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=f||null,this.expression.evaluate(this._evaluator)}evaluate(t,r,n,o,u,c,s,f){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=f||null;try{const v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!==v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Vl(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(v)} instead.`);return v}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console<"u"&&console.warn(v.message)),this._defaultValue}}}function G6(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in q6}function H6(e,t){const r=new E6(q6,[],t?FC(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Wg(new $6(n,t)):Nh(r.errors)}class Zg{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Yy(r.expression)}evaluateWithoutErrorHandling(t,r,n,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,o,u,c)}evaluate(t,r,n,o,u,c){return this._styleExpression.evaluate(t,r,n,o,u,c)}}class Xg{constructor(t,r,n,o){this.kind=t,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Yy(r.expression),this.interpolationType=o}evaluateWithoutErrorHandling(t,r,n,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,o,u,c)}evaluate(t,r,n,o,u,c){return this._styleExpression.evaluate(t,r,n,o,u,c)}interpolationFactor(t,r,n){return this.interpolationType?ff.interpolationFactor(this.interpolationType,t,r,n):0}}function W6(e,t){if(e=H6(e,t),e.result==="error")return e;const r=e.value.expression,n=Xy(r);if(!n&&!TC(t))return Nh([new z0("","data expressions not supported")]);const o=Jy(r,["zoom","pitch","distance-from-center"]);if(!o&&!PC(t))return Nh([new z0("","zoom expressions not supported")]);const u=S1(r);if(!u&&!o)return Nh([new z0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof z0)return Nh([u]);if(u instanceof ff&&!V6(t))return Nh([new z0("",'"interpolate" expressions cannot be used with this property')]);if(!u)return Wg(n?new Zg("constant",e.value):new Zg("source",e.value));const c=u instanceof ff?u.interpolation:void 0;return Wg(n?new Xg("camera",e.value,u.labels,c):new Xg("composite",e.value,u.labels,c))}class m2{constructor(t,r){this._parameters=t,this._specification=r,y6(this,cv(this._parameters,this._specification))}static deserialize(t){return new m2(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function OC(e,t){if(uv(e))return new m2(e,t);if(G6(e)){const r=W6(e,t);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value}else{let r=e;return typeof e=="string"&&t.type==="color"&&(r=ql.parse(e)),{kind:"constant",evaluate:()=>r}}}function S1(e){let t=null;if(e instanceof F6)t=S1(e.result);else if(e instanceof O6){for(const r of e.args)if(t=S1(r),t)break}else(e instanceof S6||e instanceof ff)&&e.input instanceof yp&&e.input.name==="zoom"&&(t=e);return t instanceof z0||e.eachChild(r=>{const n=S1(r);n instanceof z0?t=n:!t&&n?t=new z0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new z0("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function FC(e){const t={color:cf,string:Io,number:Gn,enum:Io,boolean:wo,formatted:c2,resolvedImage:Ad};return e.type==="array"?$c(t[e.value]||xo,e.length):t[e.type]}function BC(e){return e.type==="color"&&(uv(e.default)||Array.isArray(e.default))?new ql(0,0,0,0):e.type==="color"?ql.parse(e.default)||null:e.default===void 0?null:e.default}function ud(e){return typeof e=="object"?["literal",e]:e}function jC(e,t){let r=e.stops;if(!r)return UC(e,t);const n=r&&typeof r[0][0]=="object",o=n||e.property!==void 0,u=n||!o;return r=r.map(c=>!o&&t.tokens&&typeof c[1]=="string"?[c[0],GC(c[1])]:[c[0],ud(c[1])]),n?qC(e,t,r):u?$C(e,t,r):Yg(e,t,r)}function UC(e,t){const r=["get",e.property];if(e.default===void 0)return t.type==="string"?["string",r]:r;if(t.type==="enum")return["match",r,Object.keys(t.values),r,e.default];{const n=[t.type==="color"?"to-color":t.type,r,ud(e.default)];return t.type==="array"&&n.splice(1,0,t.value,t.length||null),n}}function fv(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function qC(e,t,r){const n={},o={},u=[];for(let s=0;s<r.length;s++){const f=r[s],v=f[0].zoom;n[v]===void 0&&(n[v]={zoom:v,type:e.type,property:e.property,default:e.default},o[v]=[],u.push(v)),o[v].push([f[0].value,f[1]])}if(pv({},t)==="exponential"){const s=[fv(e),["linear"],["zoom"]];for(const f of u){const v=Yg(n[f],t,o[f]);Qh(s,f,v,!1)}return s}else{const s=["step",["zoom"]];for(const f of u){const v=Yg(n[f],t,o[f]);Qh(s,f,v,!0)}return hv(s),s}}function VC(e,t){if(e!==void 0)return e;if(t!==void 0)return t}function Hb(e,t){const r=ud(VC(e.default,t.default));return r===void 0&&t.type==="resolvedImage"?"":r}function Yg(e,t,r){const n=pv(e,t),o=["get",e.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){const u=["case"];for(const c of r)u.push(["==",o,c[0]],c[1]);return u.push(Hb(e,t)),u}else if(n==="categorical"){const u=["match",o];for(const c of r)Qh(u,c[0],c[1],!1);return u.push(Hb(e,t)),u}else if(n==="interval"){const u=["step",["number",o]];for(const c of r)Qh(u,c[0],c[1],!0);return hv(u),e.default===void 0?u:["case",["==",["typeof",o],"number"],u,ud(e.default)]}else if(n==="exponential"){const u=e.base!==void 0?e.base:1,c=[fv(e),u===1?["linear"]:["exponential",u],["number",o]];for(const s of r)Qh(c,s[0],s[1],!1);return e.default===void 0?c:["case",["==",["typeof",o],"number"],c,ud(e.default)]}else throw new Error(`Unknown property function type ${n}`)}function $C(e,t,r,n=["zoom"]){const o=pv(e,t);let u,c=!1;if(o==="interval")u=["step",n],c=!0;else if(o==="exponential"){const s=e.base!==void 0?e.base:1;u=[fv(e),s===1?["linear"]:["exponential",s],n]}else throw new Error(`Unknown zoom function type "${o}"`);for(const s of r)Qh(u,s[0],s[1],c);return hv(u),u}function hv(e){e[0]==="step"&&e.length===3&&(e.push(0),e.push(e[3]))}function Qh(e,t,r,n){e.length>3&&t===e[e.length-2]||(n&&e.length===2||e.push(t),e.push(r))}function pv(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function GC(e){const t=["concat"],r=/{([^{}]+)}/g;let n=0;for(let o=r.exec(e);o!==null;o=r.exec(e)){const u=e.slice(n,r.lastIndex-o[0].length);n=r.lastIndex,u.length>0&&t.push(u),t.push(["get",o[1]])}if(t.length===1)return e;if(n<e.length)t.push(e.slice(n));else if(t.length===2)return["to-string",t[1]];return t}function Z6(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Z6(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function HC(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var WC={};(function(e){var t=function(){var r=function(G,H,Z,ee){for(Z=Z||{},ee=G.length;ee--;Z[G[ee]]=H);return Z},n=[1,12],o=[1,13],u=[1,9],c=[1,10],s=[1,11],f=[1,14],v=[1,15],w=[14,18,22,24],E=[18,22],L=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(H,Z,ee,Y,le,ce,ve){var pe=ce.length-1;switch(le){case 1:this.$=new String(H.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(H),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=ce[pe-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=ce[pe-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[ce[pe-2],ce[pe]];break;case 16:this.$={},this.$[ce[pe][0]]=ce[pe][1];break;case 17:this.$=ce[pe-2],ce[pe-2][ce[pe][0]]=ce[pe][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[ce[pe]];break;case 21:this.$=ce[pe-2],ce[pe-2].push(ce[pe]);break}},table:[{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:s,12:1,13:2,15:7,16:8,17:f,23:v},{1:[3]},{14:[1,16]},r(w,[2,7]),r(w,[2,8]),r(w,[2,9]),r(w,[2,10]),r(w,[2,11]),r(w,[2,12]),r(w,[2,3]),r(w,[2,4]),r(w,[2,5]),r([14,18,21,22,24],[2,1]),r(w,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:23,15:7,16:8,17:f,23:v,24:[1,21],25:22},{1:[2,6]},r(w,[2,13]),{18:[1,24],22:[1,25]},r(E,[2,16]),{21:[1,26]},r(w,[2,18]),{22:[1,28],24:[1,27]},r(L,[2,20]),r(w,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:30,15:7,16:8,17:f,23:v},r(w,[2,19]),{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:s,13:31,15:7,16:8,17:f,23:v},r(E,[2,17]),r(E,[2,15]),r(L,[2,21])],defaultActions:{16:[2,6]},parseError:function(H,Z){if(Z.recoverable)this.trace(H);else throw new Error(H)},parse:function(H){var Z=this,ee=[0],Y=[null],le=[],ce=this.table,ve="",pe=0,Ne=0,Ve=2,be=1,Ce=le.slice.call(arguments,1),Oe=Object.create(this.lexer),nt={yy:{}};for(var mt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mt)&&(nt.yy[mt]=this.yy[mt]);Oe.setInput(H,nt.yy),nt.yy.lexer=Oe,nt.yy.parser=this,typeof Oe.yylloc>"u"&&(Oe.yylloc={});var ht=Oe.yylloc;le.push(ht);var He=Oe.options&&Oe.options.ranges;typeof nt.yy.parseError=="function"?this.parseError=nt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var $t;return $t=Oe.lex()||be,typeof $t!="number"&&($t=Z.symbols_[$t]||$t),$t}for(var bt,Xe,We,ke,Re={},Pe,dt,Et,Pt;;){if(Xe=ee[ee.length-1],this.defaultActions[Xe]?We=this.defaultActions[Xe]:((bt===null||typeof bt>"u")&&(bt=ut()),We=ce[Xe]&&ce[Xe][bt]),typeof We>"u"||!We.length||!We[0]){var Kt="";Pt=[];for(Pe in ce[Xe])this.terminals_[Pe]&&Pe>Ve&&Pt.push("'"+this.terminals_[Pe]+"'");Oe.showPosition?Kt="Parse error on line "+(pe+1)+`:
`+Oe.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[bt]||bt)+"'":Kt="Parse error on line "+(pe+1)+": Unexpected "+(bt==be?"end of input":"'"+(this.terminals_[bt]||bt)+"'"),this.parseError(Kt,{text:Oe.match,token:this.terminals_[bt]||bt,line:Oe.yylineno,loc:ht,expected:Pt})}if(We[0]instanceof Array&&We.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+bt);switch(We[0]){case 1:ee.push(bt),Y.push(Oe.yytext),le.push(Oe.yylloc),ee.push(We[1]),bt=null,Ne=Oe.yyleng,ve=Oe.yytext,pe=Oe.yylineno,ht=Oe.yylloc;break;case 2:if(dt=this.productions_[We[1]][1],Re.$=Y[Y.length-dt],Re._$={first_line:le[le.length-(dt||1)].first_line,last_line:le[le.length-1].last_line,first_column:le[le.length-(dt||1)].first_column,last_column:le[le.length-1].last_column},He&&(Re._$.range=[le[le.length-(dt||1)].range[0],le[le.length-1].range[1]]),ke=this.performAction.apply(Re,[ve,Ne,pe,nt.yy,We[1],Y,le].concat(Ce)),typeof ke<"u")return ke;dt&&(ee=ee.slice(0,-1*dt*2),Y=Y.slice(0,-1*dt),le=le.slice(0,-1*dt)),ee.push(this.productions_[We[1]][0]),Y.push(Re.$),le.push(Re._$),Et=ce[ee[ee.length-2]][ee[ee.length-1]],ee.push(Et);break;case 3:return!0}}return!0}},F=function(){var G={EOF:1,parseError:function(Z,ee){if(this.yy.parser)this.yy.parser.parseError(Z,ee);else throw new Error(Z)},setInput:function(H,Z){return this.yy=Z||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var H=this._input[0];this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H;var Z=H.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},unput:function(H){var Z=H.length,ee=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var Y=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ee.length-1&&(this.yylineno-=ee.length-1);var le=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ee?(ee.length===Y.length?this.yylloc.first_column:0)+Y[Y.length-ee.length].length-ee[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[le[0],le[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(H){this.unput(this.match.slice(H))},pastInput:function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var H=this.pastInput(),Z=new Array(H.length+1).join("-");return H+this.upcomingInput()+`
`+Z+"^"},test_match:function(H,Z){var ee,Y,le;if(this.options.backtrack_lexer&&(le={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(le.yylloc.range=this.yylloc.range.slice(0))),Y=H[0].match(/(?:\r\n?|\n).*/g),Y&&(this.yylineno+=Y.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Y?Y[Y.length-1].length-Y[Y.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],ee=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ee)return ee;if(this._backtrack){for(var ce in le)this[ce]=le[ce];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var H,Z,ee,Y;this._more||(this.yytext="",this.match="");for(var le=this._currentRules(),ce=0;ce<le.length;ce++)if(ee=this._input.match(this.rules[le[ce]]),ee&&(!Z||ee[0].length>Z[0].length)){if(Z=ee,Y=ce,this.options.backtrack_lexer){if(H=this.test_match(ee,le[ce]),H!==!1)return H;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(H=this.test_match(Z,le[Y]),H!==!1?H:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Z=this.next();return Z||this.lex()},begin:function(Z){this.conditionStack.push(Z)},popState:function(){var Z=this.conditionStack.length-1;return Z>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Z){return Z=this.conditionStack.length-1-Math.abs(Z||0),Z>=0?this.conditionStack[Z]:"INITIAL"},pushState:function(Z){this.begin(Z)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Z,ee,Y,le){switch(Y){case 0:break;case 1:return 6;case 2:return ee.yytext=ee.yytext.substr(1,ee.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return G}();C.lexer=F;function B(){this.yy={}}return B.prototype=C,C.Parser=B,new B}();typeof HC<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})})(WC);const ZC={StyleExpression:$6,isExpression:G6,isExpressionFilter:Z6,createExpression:H6,createPropertyExpression:W6,normalizePropertyExpression:OC,ZoomConstantExpression:Zg,ZoomDependentExpression:Xg,StylePropertyFunction:m2},XC={convertFunction:jC,createFunction:cv,isFunction:uv};function YC(e){var t=e.expr,r=e.layer,n=Math.min(t(r,"paint","circle-radius"),8),o=Math.min(t(r,"paint","circle-stroke-width"),4),u=t(r,"paint","circle-color"),c=t(r,"paint","circle-opacity"),s=t(r,"paint","circle-stroke-color"),f=t(r,"paint","circle-stroke-opacity"),v=n-o/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+t(r,"paint","circle-blur")*v+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:c,r:v}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:n,"stroke-width":o,stroke:s}}]}}function JC(e){var t=e.expr,r=e.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,e.image)(t(r,"paint","fill-pattern"))+")",backgroundColor:t(r,"paint","fill-color"),opacity:t(r,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function KC(e){var t=e.layer,r=e.expr,n=(0,e.image)(r(t,"paint","line-pattern")),o={stroke:n?"url(#img1)":r(t,"paint","line-color"),strokeWidth:Math.max(2,Math.min(r(t,"paint","line-width"),8)),strokeOpacity:r(t,"paint","line-opacity"),strokeDasharray:r(t,"paint","line-dasharray")},u=o.strokeWidth,c="stroke: "+o.stroke+";";return o.strokeOpacity&&(c+="stroke-opacity: "+o.strokeOpacity+";"),o.strokeDasharray&&(c+="stroke-dasharray: "+o.strokeDasharray+";"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:o.strokeWidth,height:o.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:n,x:0,y:0,width:o.strokeWidth,height:o.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:c,d:"M0 20 L 20 0"}}]}}function QC(e){return function(s){var f=s.image,v=(0,s.expr)(s.layer,"layout","icon-image");if(!v)return null;var w=f(v);return w?{element:"div",attributes:{style:{backgroundImage:"url("+w+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(e)||(o=(r=(t=e).expr)(n=t.layer,"paint","text-color"),u=r(n,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:c="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:r(n,"paint","text-halo-color"),"stroke-width":2*r(n,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:c,fill:"white"}},{element:"path",attributes:{key:"l3",d:c,fill:o,opacity:u}}]});var t,r,n,o,u,c}var eI=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function tI(e){var t,r=e.sprite,n=e.layer,o={circle:YC,symbol:QC,line:KC,fill:JC}[n.type],u=(t=e.zoom,function(c,s,f){var v=function(F){var B=eI.find(function(G){return F.startsWith(G[0])});return B?B[1]||B[0]:null}(f),w=uS[s+"_"+v][f];if(!c[s])return w.default;var E=c[s][f];if(E===void 0)return w.default;if(typeof E=="object"){var L;if(Array.isArray(E)){if(w.type==="array")return E;L=ZC.createExpression(E).value}else L=XC.createFunction(E,w);if(!L.evaluate)return null;var C=L.evaluate({zoom:t},{});return C?C.name||C:null}return E});return o?o({layer:n,expr:u,image:function(c){if(r&&r.json){var s=r.json[c];if(s)return f=r.image,w=(v=s).x,E=v.y,L=v.width,C=v.height,(F=document.createElement("canvas")).width=2*L,F.height=2*C,F.getContext("2d").drawImage(f,2*w,2*E,2*L,2*C,0,0,2*L,2*C),F.toDataURL()}var f,v,w,E,L,C,F;return null}}):null}var Jg={},rI={get exports(){return Jg},set exports(e){Jg=e}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(r,n){e.exports=n()})(Hc,function(){for(var r=function(ue,xe,$e){return xe===void 0&&(xe=0),$e===void 0&&($e=1),ue<xe?xe:ue>$e?$e:ue},n=r,o=function(ue){ue._clipped=!1,ue._unclipped=ue.slice(0);for(var xe=0;xe<=3;xe++)xe<3?((ue[xe]<0||ue[xe]>255)&&(ue._clipped=!0),ue[xe]=n(ue[xe],0,255)):xe===3&&(ue[xe]=n(ue[xe],0,1));return ue},u={},c=0,s=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];c<s.length;c+=1){var f=s[c];u["[object "+f+"]"]=f.toLowerCase()}var v=function(ue){return u[Object.prototype.toString.call(ue)]||"object"},w=v,E=function(ue,xe){return xe===void 0&&(xe=null),ue.length>=3?Array.prototype.slice.call(ue):w(ue[0])=="object"&&xe?xe.split("").filter(function($e){return ue[0][$e]!==void 0}).map(function($e){return ue[0][$e]}):ue[0]},L=v,C=function(ue){if(ue.length<2)return null;var xe=ue.length-1;return L(ue[xe])=="string"?ue[xe].toLowerCase():null},F=Math.PI,B={clip_rgb:o,limit:r,type:v,unpack:E,last:C,PI:F,TWOPI:F*2,PITHIRD:F/3,DEG2RAD:F/180,RAD2DEG:180/F},G={format:{},autodetect:[]},H=B.last,Z=B.clip_rgb,ee=B.type,Y=G,le=function(){for(var xe=[],$e=arguments.length;$e--;)xe[$e]=arguments[$e];var kt=this;if(ee(xe[0])==="object"&&xe[0].constructor&&xe[0].constructor===this.constructor)return xe[0];var nr=H(xe),sr=!1;if(!nr){sr=!0,Y.sorted||(Y.autodetect=Y.autodetect.sort(function(yn,ei){return ei.p-yn.p}),Y.sorted=!0);for(var Zt=0,_r=Y.autodetect;Zt<_r.length;Zt+=1){var Cr=_r[Zt];if(nr=Cr.test.apply(Cr,xe),nr)break}}if(Y.format[nr]){var on=Y.format[nr].apply(null,sr?xe:xe.slice(0,-1));kt._rgb=Z(on)}else throw new Error("unknown format: "+xe);kt._rgb.length===3&&kt._rgb.push(1)};le.prototype.toString=function(){return ee(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var ce=le,ve=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(ve.Color,[null].concat(ue)))};ve.Color=ce,ve.version="2.4.2";var pe=ve,Ne=B.unpack,Ve=Math.max,be=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Ne(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2];kt=kt/255,nr=nr/255,sr=sr/255;var Zt=1-Ve(kt,Ve(nr,sr)),_r=Zt<1?1/(1-Zt):0,Cr=(1-kt-Zt)*_r,on=(1-nr-Zt)*_r,yn=(1-sr-Zt)*_r;return[Cr,on,yn,Zt]},Ce=be,Oe=B.unpack,nt=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=Oe(ue,"cmyk");var $e=ue[0],kt=ue[1],nr=ue[2],sr=ue[3],Zt=ue.length>4?ue[4]:1;return sr===1?[0,0,0,Zt]:[$e>=1?0:255*(1-$e)*(1-sr),kt>=1?0:255*(1-kt)*(1-sr),nr>=1?0:255*(1-nr)*(1-sr),Zt]},mt=nt,ht=pe,He=ce,ut=G,bt=B.unpack,Xe=B.type,We=Ce;He.prototype.cmyk=function(){return We(this._rgb)},ht.cmyk=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(He,[null].concat(ue,["cmyk"])))},ut.format.cmyk=mt,ut.autodetect.push({p:2,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=bt(ue,"cmyk"),Xe(ue)==="array"&&ue.length===4)return"cmyk"}});var ke=B.unpack,Re=B.last,Pe=function(ue){return Math.round(ue*100)/100},dt=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=ke(ue,"hsla"),kt=Re(ue)||"lsa";return $e[0]=Pe($e[0]||0),$e[1]=Pe($e[1]*100)+"%",$e[2]=Pe($e[2]*100)+"%",kt==="hsla"||$e.length>3&&$e[3]<1?($e[3]=$e.length>3?$e[3]:1,kt="hsla"):$e.length=3,kt+"("+$e.join(",")+")"},Et=dt,Pt=B.unpack,Kt=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=Pt(ue,"rgba");var $e=ue[0],kt=ue[1],nr=ue[2];$e/=255,kt/=255,nr/=255;var sr=Math.min($e,kt,nr),Zt=Math.max($e,kt,nr),_r=(Zt+sr)/2,Cr,on;return Zt===sr?(Cr=0,on=Number.NaN):Cr=_r<.5?(Zt-sr)/(Zt+sr):(Zt-sr)/(2-Zt-sr),$e==Zt?on=(kt-nr)/(Zt-sr):kt==Zt?on=2+(nr-$e)/(Zt-sr):nr==Zt&&(on=4+($e-kt)/(Zt-sr)),on*=60,on<0&&(on+=360),ue.length>3&&ue[3]!==void 0?[on,Cr,_r,ue[3]]:[on,Cr,_r]},$t=Kt,br=B.unpack,Gt=B.last,Rr=Et,Mr=$t,Kr=Math.round,Ct=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=br(ue,"rgba"),kt=Gt(ue)||"rgb";return kt.substr(0,3)=="hsl"?Rr(Mr($e),kt):($e[0]=Kr($e[0]),$e[1]=Kr($e[1]),$e[2]=Kr($e[2]),(kt==="rgba"||$e.length>3&&$e[3]<1)&&($e[3]=$e.length>3?$e[3]:1,kt="rgba"),kt+"("+$e.slice(0,kt==="rgb"?3:4).join(",")+")")},pt=Ct,Dr=B.unpack,ln=Math.round,Wt=function(){for(var ue,xe=[],$e=arguments.length;$e--;)xe[$e]=arguments[$e];xe=Dr(xe,"hsl");var kt=xe[0],nr=xe[1],sr=xe[2],Zt,_r,Cr;if(nr===0)Zt=_r=Cr=sr*255;else{var on=[0,0,0],yn=[0,0,0],ei=sr<.5?sr*(1+nr):sr+nr-sr*nr,_n=2*sr-ei,ti=kt/360;on[0]=ti+1/3,on[1]=ti,on[2]=ti-1/3;for(var ui=0;ui<3;ui++)on[ui]<0&&(on[ui]+=1),on[ui]>1&&(on[ui]-=1),6*on[ui]<1?yn[ui]=_n+(ei-_n)*6*on[ui]:2*on[ui]<1?yn[ui]=ei:3*on[ui]<2?yn[ui]=_n+(ei-_n)*(2/3-on[ui])*6:yn[ui]=_n;ue=[ln(yn[0]*255),ln(yn[1]*255),ln(yn[2]*255)],Zt=ue[0],_r=ue[1],Cr=ue[2]}return xe.length>3?[Zt,_r,Cr,xe[3]]:[Zt,_r,Cr,1]},Ur=Wt,dn=Ur,tn=G,Bn=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Jn=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ai=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,_i=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,hi=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,yr=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Vr=Math.round,wi=function(ue){ue=ue.toLowerCase().trim();var xe;if(tn.format.named)try{return tn.format.named(ue)}catch{}if(xe=ue.match(Bn)){for(var $e=xe.slice(1,4),kt=0;kt<3;kt++)$e[kt]=+$e[kt];return $e[3]=1,$e}if(xe=ue.match(Jn)){for(var nr=xe.slice(1,5),sr=0;sr<4;sr++)nr[sr]=+nr[sr];return nr}if(xe=ue.match(ai)){for(var Zt=xe.slice(1,4),_r=0;_r<3;_r++)Zt[_r]=Vr(Zt[_r]*2.55);return Zt[3]=1,Zt}if(xe=ue.match(_i)){for(var Cr=xe.slice(1,5),on=0;on<3;on++)Cr[on]=Vr(Cr[on]*2.55);return Cr[3]=+Cr[3],Cr}if(xe=ue.match(hi)){var yn=xe.slice(1,4);yn[1]*=.01,yn[2]*=.01;var ei=dn(yn);return ei[3]=1,ei}if(xe=ue.match(yr)){var _n=xe.slice(1,4);_n[1]*=.01,_n[2]*=.01;var ti=dn(_n);return ti[3]=+xe[4],ti}};wi.test=function(ue){return Bn.test(ue)||Jn.test(ue)||ai.test(ue)||_i.test(ue)||hi.test(ue)||yr.test(ue)};var xn=wi,si=pe,fr=ce,or=G,Yr=B.type,un=pt,Or=xn;fr.prototype.css=function(ue){return un(this._rgb,ue)},si.css=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(fr,[null].concat(ue,["css"])))},or.format.css=Or,or.autodetect.push({p:5,test:function(ue){for(var xe=[],$e=arguments.length-1;$e-- >0;)xe[$e]=arguments[$e+1];if(!xe.length&&Yr(ue)==="string"&&Or.test(ue))return"css"}});var pn=ce,Qn=pe,ci=G,Ro=B.unpack;ci.format.gl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Ro(ue,"rgba");return $e[0]*=255,$e[1]*=255,$e[2]*=255,$e},Qn.gl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(pn,[null].concat(ue,["gl"])))},pn.prototype.gl=function(){var ue=this._rgb;return[ue[0]/255,ue[1]/255,ue[2]/255,ue[3]]};var gi=B.unpack,co=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=gi(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=Math.min(kt,nr,sr),_r=Math.max(kt,nr,sr),Cr=_r-Zt,on=Cr*100/255,yn=Zt/(255-Cr)*100,ei;return Cr===0?ei=Number.NaN:(kt===_r&&(ei=(nr-sr)/Cr),nr===_r&&(ei=2+(sr-kt)/Cr),sr===_r&&(ei=4+(kt-nr)/Cr),ei*=60,ei<0&&(ei+=360)),[ei,on,yn]},li=co,no=B.unpack,yo=Math.floor,pi=function(){for(var ue,xe,$e,kt,nr,sr,Zt=[],_r=arguments.length;_r--;)Zt[_r]=arguments[_r];Zt=no(Zt,"hcg");var Cr=Zt[0],on=Zt[1],yn=Zt[2],ei,_n,ti;yn=yn*255;var ui=on*255;if(on===0)ei=_n=ti=yn;else{Cr===360&&(Cr=0),Cr>360&&(Cr-=360),Cr<0&&(Cr+=360),Cr/=60;var Hi=yo(Cr),so=Cr-Hi,_o=yn*(1-on),Uo=_o+ui*(1-so),Ta=_o+ui*so,ja=_o+ui;switch(Hi){case 0:ue=[ja,Ta,_o],ei=ue[0],_n=ue[1],ti=ue[2];break;case 1:xe=[Uo,ja,_o],ei=xe[0],_n=xe[1],ti=xe[2];break;case 2:$e=[_o,ja,Ta],ei=$e[0],_n=$e[1],ti=$e[2];break;case 3:kt=[_o,Uo,ja],ei=kt[0],_n=kt[1],ti=kt[2];break;case 4:nr=[Ta,_o,ja],ei=nr[0],_n=nr[1],ti=nr[2];break;case 5:sr=[ja,_o,Uo],ei=sr[0],_n=sr[1],ti=sr[2];break}}return[ei,_n,ti,Zt.length>3?Zt[3]:1]},Li=pi,Yo=B.unpack,vn=B.type,ze=pe,Ea=ce,ha=G,ra=li;Ea.prototype.hcg=function(){return ra(this._rgb)},ze.hcg=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(Ea,[null].concat(ue,["hcg"])))},ha.format.hcg=Li,ha.autodetect.push({p:1,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Yo(ue,"hcg"),vn(ue)==="array"&&ue.length===3)return"hcg"}});var we=B.unpack,_e=B.last,De=Math.round,ot=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=we(ue,"rgba"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=$e[3],_r=_e(ue)||"auto";Zt===void 0&&(Zt=1),_r==="auto"&&(_r=Zt<1?"rgba":"rgb"),kt=De(kt),nr=De(nr),sr=De(sr);var Cr=kt<<16|nr<<8|sr,on="000000"+Cr.toString(16);on=on.substr(on.length-6);var yn="0"+De(Zt*255).toString(16);switch(yn=yn.substr(yn.length-2),_r.toLowerCase()){case"rgba":return"#"+on+yn;case"argb":return"#"+yn+on;default:return"#"+on}},lt=ot,Rt=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Fe=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ht=function(ue){if(ue.match(Rt)){(ue.length===4||ue.length===7)&&(ue=ue.substr(1)),ue.length===3&&(ue=ue.split(""),ue=ue[0]+ue[0]+ue[1]+ue[1]+ue[2]+ue[2]);var xe=parseInt(ue,16),$e=xe>>16,kt=xe>>8&255,nr=xe&255;return[$e,kt,nr,1]}if(ue.match(Fe)){(ue.length===5||ue.length===9)&&(ue=ue.substr(1)),ue.length===4&&(ue=ue.split(""),ue=ue[0]+ue[0]+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]);var sr=parseInt(ue,16),Zt=sr>>24&255,_r=sr>>16&255,Cr=sr>>8&255,on=Math.round((sr&255)/255*100)/100;return[Zt,_r,Cr,on]}throw new Error("unknown hex color: "+ue)},Nt=Ht,ir=pe,Br=ce,nn=B.type,Fr=G,Hn=lt;Br.prototype.hex=function(ue){return Hn(this._rgb,ue)},ir.hex=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(Br,[null].concat(ue,["hex"])))},Fr.format.hex=Nt,Fr.autodetect.push({p:4,test:function(ue){for(var xe=[],$e=arguments.length-1;$e-- >0;)xe[$e]=arguments[$e+1];if(!xe.length&&nn(ue)==="string"&&[3,4,5,6,7,8,9].indexOf(ue.length)>=0)return"hex"}});var Yn=B.unpack,sn=B.TWOPI,yi=Math.min,Ai=Math.sqrt,Yi=Math.acos,Ii=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Yn(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2];kt/=255,nr/=255,sr/=255;var Zt,_r=yi(kt,nr,sr),Cr=(kt+nr+sr)/3,on=Cr>0?1-_r/Cr:0;return on===0?Zt=NaN:(Zt=(kt-nr+(kt-sr))/2,Zt/=Ai((kt-nr)*(kt-nr)+(kt-sr)*(nr-sr)),Zt=Yi(Zt),sr>nr&&(Zt=sn-Zt),Zt/=sn),[Zt*360,on,Cr]},Vi=Ii,io=B.unpack,ko=B.limit,Jo=B.TWOPI,So=B.PITHIRD,Ko=Math.cos,Gl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=io(ue,"hsi");var $e=ue[0],kt=ue[1],nr=ue[2],sr,Zt,_r;return isNaN($e)&&($e=0),isNaN(kt)&&(kt=0),$e>360&&($e-=360),$e<0&&($e+=360),$e/=360,$e<1/3?(_r=(1-kt)/3,sr=(1+kt*Ko(Jo*$e)/Ko(So-Jo*$e))/3,Zt=1-(_r+sr)):$e<2/3?($e-=1/3,sr=(1-kt)/3,Zt=(1+kt*Ko(Jo*$e)/Ko(So-Jo*$e))/3,_r=1-(sr+Zt)):($e-=2/3,Zt=(1-kt)/3,_r=(1+kt*Ko(Jo*$e)/Ko(So-Jo*$e))/3,sr=1-(Zt+_r)),sr=ko(nr*sr*3),Zt=ko(nr*Zt*3),_r=ko(nr*_r*3),[sr*255,Zt*255,_r*255,ue.length>3?ue[3]:1]},na=Gl,Ao=B.unpack,_l=B.type,bl=pe,vs=ce,Hl=G,_s=Vi;vs.prototype.hsi=function(){return _s(this._rgb)},bl.hsi=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(vs,[null].concat(ue,["hsi"])))},Hl.format.hsi=na,Hl.autodetect.push({p:2,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Ao(ue,"hsi"),_l(ue)==="array"&&ue.length===3)return"hsi"}});var Vu=B.unpack,$a=B.type,wl=pe,Wl=ce,$u=G,Gu=$t;Wl.prototype.hsl=function(){return Gu(this._rgb)},wl.hsl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(Wl,[null].concat(ue,["hsl"])))},$u.format.hsl=Ur,$u.autodetect.push({p:2,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Vu(ue,"hsl"),$a(ue)==="array"&&ue.length===3)return"hsl"}});var nl=B.unpack,us=Math.min,Ds=Math.max,xl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=nl(ue,"rgb");var $e=ue[0],kt=ue[1],nr=ue[2],sr=us($e,kt,nr),Zt=Ds($e,kt,nr),_r=Zt-sr,Cr,on,yn;return yn=Zt/255,Zt===0?(Cr=Number.NaN,on=0):(on=_r/Zt,$e===Zt&&(Cr=(kt-nr)/_r),kt===Zt&&(Cr=2+(nr-$e)/_r),nr===Zt&&(Cr=4+($e-kt)/_r),Cr*=60,Cr<0&&(Cr+=360)),[Cr,on,yn]},gu=xl,kl=B.unpack,yu=Math.floor,bs=function(){for(var ue,xe,$e,kt,nr,sr,Zt=[],_r=arguments.length;_r--;)Zt[_r]=arguments[_r];Zt=kl(Zt,"hsv");var Cr=Zt[0],on=Zt[1],yn=Zt[2],ei,_n,ti;if(yn*=255,on===0)ei=_n=ti=yn;else{Cr===360&&(Cr=0),Cr>360&&(Cr-=360),Cr<0&&(Cr+=360),Cr/=60;var ui=yu(Cr),Hi=Cr-ui,so=yn*(1-on),_o=yn*(1-on*Hi),Uo=yn*(1-on*(1-Hi));switch(ui){case 0:ue=[yn,Uo,so],ei=ue[0],_n=ue[1],ti=ue[2];break;case 1:xe=[_o,yn,so],ei=xe[0],_n=xe[1],ti=xe[2];break;case 2:$e=[so,yn,Uo],ei=$e[0],_n=$e[1],ti=$e[2];break;case 3:kt=[so,_o,yn],ei=kt[0],_n=kt[1],ti=kt[2];break;case 4:nr=[Uo,so,yn],ei=nr[0],_n=nr[1],ti=nr[2];break;case 5:sr=[yn,so,_o],ei=sr[0],_n=sr[1],ti=sr[2];break}}return[ei,_n,ti,Zt.length>3?Zt[3]:1]},ws=bs,Oo=B.unpack,il=B.type,R=pe,W=ce,ae=G,Ae=gu;W.prototype.hsv=function(){return Ae(this._rgb)},R.hsv=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(W,[null].concat(ue,["hsv"])))},ae.format.hsv=ws,ae.autodetect.push({p:2,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Oo(ue,"hsv"),il(ue)==="array"&&ue.length===3)return"hsv"}});var Ye={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},yt=Ye,Mt=B.unpack,Tt=Math.pow,wr=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Mt(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=ar(kt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2],yn=116*Cr-16;return[yn<0?0:yn,500*(_r-Cr),200*(Cr-on)]},mr=function(ue){return(ue/=255)<=.04045?ue/12.92:Tt((ue+.055)/1.055,2.4)},vr=function(ue){return ue>yt.t3?Tt(ue,1/3):ue/yt.t2+yt.t0},ar=function(ue,xe,$e){ue=mr(ue),xe=mr(xe),$e=mr($e);var kt=vr((.4124564*ue+.3575761*xe+.1804375*$e)/yt.Xn),nr=vr((.2126729*ue+.7151522*xe+.072175*$e)/yt.Yn),sr=vr((.0193339*ue+.119192*xe+.9503041*$e)/yt.Zn);return[kt,nr,sr]},$r=wr,cn=Ye,Ln=B.unpack,tt=Math.pow,m=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=Ln(ue,"lab");var $e=ue[0],kt=ue[1],nr=ue[2],sr,Zt,_r,Cr,on,yn;return Zt=($e+16)/116,sr=isNaN(kt)?Zt:Zt+kt/500,_r=isNaN(nr)?Zt:Zt-nr/200,Zt=cn.Yn*h(Zt),sr=cn.Xn*h(sr),_r=cn.Zn*h(_r),Cr=Pr(3.2404542*sr-1.5371385*Zt-.4985314*_r),on=Pr(-.969266*sr+1.8760108*Zt+.041556*_r),yn=Pr(.0556434*sr-.2040259*Zt+1.0572252*_r),[Cr,on,yn,ue.length>3?ue[3]:1]},Pr=function(ue){return 255*(ue<=.00304?12.92*ue:1.055*tt(ue,1/2.4)-.055)},h=function(ue){return ue>cn.t1?ue*ue*ue:cn.t2*(ue-cn.t0)},T=m,kn=B.unpack,ii=B.type,Lo=pe,K=ce,Ri=G,xs=$r;K.prototype.lab=function(){return xs(this._rgb)},Lo.lab=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(K,[null].concat(ue,["lab"])))},Ri.format.lab=T,Ri.autodetect.push({p:2,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=kn(ue,"lab"),ii(ue)==="array"&&ue.length===3)return"lab"}});var Ws=B.unpack,Mc=B.RAD2DEG,Al=Math.sqrt,Xa=Math.atan2,hc=Math.round,vu=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Ws(ue,"lab"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=Al(nr*nr+sr*sr),_r=(Xa(sr,nr)*Mc+360)%360;return hc(Zt*1e4)===0&&(_r=Number.NaN),[kt,Zt,_r]},Dc=vu,_u=B.unpack,Qc=$r,Hu=Dc,bu=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=_u(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=Qc(kt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2];return Hu(_r,Cr,on)},wu=bu,Zl=B.unpack,xu=B.DEG2RAD,qn=Math.sin,jn=Math.cos,Wu=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Zl(ue,"lch"),kt=$e[0],nr=$e[1],sr=$e[2];return isNaN(sr)&&(sr=0),sr=sr*xu,[kt,jn(sr)*nr,qn(sr)*nr]},zs=Wu,ks=B.unpack,Xl=zs,As=T,To=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=ks(ue,"lch");var $e=ue[0],kt=ue[1],nr=ue[2],sr=Xl($e,kt,nr),Zt=sr[0],_r=sr[1],Cr=sr[2],on=As(Zt,_r,Cr),yn=on[0],ei=on[1],_n=on[2];return[yn,ei,_n,ue.length>3?ue[3]:1]},te=To,Te=B.unpack,gt=te,qt=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Te(ue,"hcl").reverse();return gt.apply(void 0,$e)},ur=qt,Xr=B.unpack,gn=B.type,Kn=pe,xi=ce,Oi=G,Ji=wu;xi.prototype.lch=function(){return Ji(this._rgb)},xi.prototype.hcl=function(){return Ji(this._rgb).reverse()},Kn.lch=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(xi,[null].concat(ue,["lch"])))},Kn.hcl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(xi,[null].concat(ue,["hcl"])))},Oi.format.lch=te,Oi.format.hcl=ur,["lch","hcl"].forEach(function(ue){return Oi.autodetect.push({p:2,test:function(){for(var xe=[],$e=arguments.length;$e--;)xe[$e]=arguments[$e];if(xe=Xr(xe,ue),gn(xe)==="array"&&xe.length===3)return ue}})});var fo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Vo=fo,Qo=ce,ea=G,Da=B.type,aa=Vo,$i=Nt,za=lt;Qo.prototype.name=function(){for(var ue=za(this._rgb,"rgb"),xe=0,$e=Object.keys(aa);xe<$e.length;xe+=1){var kt=$e[xe];if(aa[kt]===ue)return kt.toLowerCase()}return ue},ea.format.named=function(ue){if(ue=ue.toLowerCase(),aa[ue])return $i(aa[ue]);throw new Error("unknown color name: "+ue)},ea.autodetect.push({p:5,test:function(ue){for(var xe=[],$e=arguments.length-1;$e-- >0;)xe[$e]=arguments[$e+1];if(!xe.length&&Da(ue)==="string"&&aa[ue.toLowerCase()])return"named"}});var Sa=B.unpack,Yl=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Sa(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2];return(kt<<16)+(nr<<8)+sr},El=Yl,Zu=B.type,Ns=function(ue){if(Zu(ue)=="number"&&ue>=0&&ue<=16777215){var xe=ue>>16,$e=ue>>8&255,kt=ue&255;return[xe,$e,kt,1]}throw new Error("unknown num color: "+ue)},Sl=Ns,ol=pe,ku=ce,Na=G,Au=B.type,Jl=El;ku.prototype.num=function(){return Jl(this._rgb)},ol.num=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(ku,[null].concat(ue,["num"])))},Na.format.num=Sl,Na.autodetect.push({p:5,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue.length===1&&Au(ue[0])==="number"&&ue[0]>=0&&ue[0]<=16777215)return"num"}});var Zs=pe,Cl=ce,Ra=G,Kl=B.unpack,Xs=B.type,Il=Math.round;Cl.prototype.rgb=function(ue){return ue===void 0&&(ue=!0),ue===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Il)},Cl.prototype.rgba=function(ue){return ue===void 0&&(ue=!0),this._rgb.slice(0,4).map(function(xe,$e){return $e<3?ue===!1?xe:Il(xe):xe})},Zs.rgb=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(Cl,[null].concat(ue,["rgb"])))},Ra.format.rgb=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Kl(ue,"rgba");return $e[3]===void 0&&($e[3]=1),$e},Ra.autodetect.push({p:3,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Kl(ue,"rgba"),Xs(ue)==="array"&&(ue.length===3||ue.length===4&&Xs(ue[3])=="number"&&ue[3]>=0&&ue[3]<=1))return"rgb"}});var is=Math.log,Ll=function(ue){var xe=ue/100,$e,kt,nr;return xe<66?($e=255,kt=xe<6?0:-155.25485562709179-.44596950469579133*(kt=xe-2)+104.49216199393888*is(kt),nr=xe<20?0:-254.76935184120902+.8274096064007395*(nr=xe-10)+115.67994401066147*is(nr)):($e=351.97690566805693+.114206453784165*($e=xe-55)-40.25366309332127*is($e),kt=325.4494125711974+.07943456536662342*(kt=xe-50)-28.0852963507957*is(kt),nr=255),[$e,kt,nr,1]},pc=Ll,zc=pc,Tl=B.unpack,Ga=Math.round,Rs=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];for(var $e=Tl(ue,"rgb"),kt=$e[0],nr=$e[2],sr=1e3,Zt=4e4,_r=.4,Cr;Zt-sr>_r;){Cr=(Zt+sr)*.5;var on=zc(Cr);on[2]/on[0]>=nr/kt?Zt=Cr:sr=Cr}return Ga(Cr)},Os=Rs,Ya=pe,sa=ce,Fs=G,la=Os;sa.prototype.temp=sa.prototype.kelvin=sa.prototype.temperature=function(){return la(this._rgb)},Ya.temp=Ya.kelvin=Ya.temperature=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(sa,[null].concat(ue,["temp"])))},Fs.format.temp=Fs.format.kelvin=Fs.format.temperature=pc;var Xu=B.unpack,cs=Math.cbrt,fs=Math.pow,oo=Math.sign,Es=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Xu(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=[Ql(kt/255),Ql(nr/255),Ql(sr/255)],_r=Zt[0],Cr=Zt[1],on=Zt[2],yn=cs(.4122214708*_r+.5363325363*Cr+.0514459929*on),ei=cs(.2119034982*_r+.6806995451*Cr+.1073969566*on),_n=cs(.0883024619*_r+.2817188376*Cr+.6299787005*on);return[.2104542553*yn+.793617785*ei-.0040720468*_n,1.9779984951*yn-2.428592205*ei+.4505937099*_n,.0259040371*yn+.7827717662*ei-.808675766*_n]},al=Es;function Ql(ue){var xe=Math.abs(ue);return xe<.04045?ue/12.92:(oo(ue)||1)*fs((xe+.055)/1.055,2.4)}var Eu=B.unpack,Ca=Math.pow,Pl=Math.sign,ba=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=Eu(ue,"lab");var $e=ue[0],kt=ue[1],nr=ue[2],sr=Ca($e+.3963377774*kt+.2158037573*nr,3),Zt=Ca($e-.1055613458*kt-.0638541728*nr,3),_r=Ca($e-.0894841775*kt-1.291485548*nr,3);return[255*Fo(4.0767416621*sr-3.3077115913*Zt+.2309699292*_r),255*Fo(-1.2684380046*sr+2.6097574011*Zt-.3413193965*_r),255*Fo(-.0041960863*sr-.7034186147*Zt+1.707614701*_r),ue.length>3?ue[3]:1]},Dn=ba;function Fo(ue){var xe=Math.abs(ue);return xe>.0031308?(Pl(ue)||1)*(1.055*Ca(xe,1/2.4)-.055):ue*12.92}var Ki=B.unpack,Bo=B.type,ga=pe,An=ce,Ss=G,Yu=al;An.prototype.oklab=function(){return Yu(this._rgb)},ga.oklab=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(An,[null].concat(ue,["oklab"])))},Ss.format.oklab=Dn,Ss.autodetect.push({p:3,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=Ki(ue,"oklab"),Bo(ue)==="array"&&ue.length===3)return"oklab"}});var Ju=B.unpack,Nc=al,e0=Dc,t0=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];var $e=Ju(ue,"rgb"),kt=$e[0],nr=$e[1],sr=$e[2],Zt=Nc(kt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2];return e0(_r,Cr,on)},w0=t0,Mi=B.unpack,Rc=zs,dc=Dn,ua=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];ue=Mi(ue,"lch");var $e=ue[0],kt=ue[1],nr=ue[2],sr=Rc($e,kt,nr),Zt=sr[0],_r=sr[1],Cr=sr[2],on=dc(Zt,_r,Cr),yn=on[0],ei=on[1],_n=on[2];return[yn,ei,_n,ue.length>3?ue[3]:1]},os=ua,ia=B.unpack,Ys=B.type,mc=pe,eu=ce,tu=G,ru=w0;eu.prototype.oklch=function(){return ru(this._rgb)},mc.oklch=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];return new(Function.prototype.bind.apply(eu,[null].concat(ue,["oklch"])))},tu.format.oklch=os,tu.autodetect.push({p:3,test:function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];if(ue=ia(ue,"oklch"),Ys(ue)==="array"&&ue.length===3)return"oklch"}});var ho=ce,Cs=B.type;ho.prototype.alpha=function(ue,xe){return xe===void 0&&(xe=!1),ue!==void 0&&Cs(ue)==="number"?xe?(this._rgb[3]=ue,this):new ho([this._rgb[0],this._rgb[1],this._rgb[2],ue],"rgb"):this._rgb[3]};var Ho=ce;Ho.prototype.clipped=function(){return this._rgb._clipped||!1};var Is=ce,Su=Ye;Is.prototype.darken=function(ue){ue===void 0&&(ue=1);var xe=this,$e=xe.lab();return $e[0]-=Su.Kn*ue,new Is($e,"lab").alpha(xe.alpha(),!0)},Is.prototype.brighten=function(ue){return ue===void 0&&(ue=1),this.darken(-ue)},Is.prototype.darker=Is.prototype.darken,Is.prototype.brighter=Is.prototype.brighten;var Oc=ce;Oc.prototype.get=function(ue){var xe=ue.split("."),$e=xe[0],kt=xe[1],nr=this[$e]();if(kt){var sr=$e.indexOf(kt)-($e.substr(0,2)==="ok"?2:0);if(sr>-1)return nr[sr];throw new Error("unknown channel "+kt+" in mode "+$e)}else return nr};var Cu=ce,sl=B.type,x0=Math.pow,ll=1e-7,gc=20;Cu.prototype.luminance=function(ue){if(ue!==void 0&&sl(ue)==="number"){if(ue===0)return new Cu([0,0,0,this._rgb[3]],"rgb");if(ue===1)return new Cu([255,255,255,this._rgb[3]],"rgb");var xe=this.luminance(),$e="rgb",kt=gc,nr=function(Zt,_r){var Cr=Zt.interpolate(_r,.5,$e),on=Cr.luminance();return Math.abs(ue-on)<ll||!kt--?Cr:on>ue?nr(Zt,Cr):nr(Cr,_r)},sr=(xe>ue?nr(new Cu([0,0,0]),this):nr(this,new Cu([255,255,255]))).rgb();return new Cu(sr.concat([this._rgb[3]]))}return oi.apply(void 0,this._rgb.slice(0,3))};var oi=function(ue,xe,$e){return ue=vi(ue),xe=vi(xe),$e=vi($e),.2126*ue+.7152*xe+.0722*$e},vi=function(ue){return ue/=255,ue<=.03928?ue/12.92:x0((ue+.055)/1.055,2.4)},Oa={},Ku=ce,wa=B.type,jo=Oa,Ml=function(ue,xe,$e){$e===void 0&&($e=.5);for(var kt=[],nr=arguments.length-3;nr-- >0;)kt[nr]=arguments[nr+3];var sr=kt[0]||"lrgb";if(!jo[sr]&&!kt.length&&(sr=Object.keys(jo)[0]),!jo[sr])throw new Error("interpolation mode "+sr+" is not defined");return wa(ue)!=="object"&&(ue=new Ku(ue)),wa(xe)!=="object"&&(xe=new Ku(xe)),jo[sr](ue,xe,$e).alpha(ue.alpha()+$e*(xe.alpha()-ue.alpha()))},Js=ce,r0=Ml;Js.prototype.mix=Js.prototype.interpolate=function(ue,xe){xe===void 0&&(xe=.5);for(var $e=[],kt=arguments.length-2;kt-- >0;)$e[kt]=arguments[kt+2];return r0.apply(void 0,[this,ue,xe].concat($e))};var Dl=ce;Dl.prototype.premultiply=function(ue){ue===void 0&&(ue=!1);var xe=this._rgb,$e=xe[3];return ue?(this._rgb=[xe[0]*$e,xe[1]*$e,xe[2]*$e,$e],this):new Dl([xe[0]*$e,xe[1]*$e,xe[2]*$e,$e],"rgb")};var ca=ce,xa=Ye;ca.prototype.saturate=function(ue){ue===void 0&&(ue=1);var xe=this,$e=xe.lch();return $e[1]+=xa.Kn*ue,$e[1]<0&&($e[1]=0),new ca($e,"lch").alpha(xe.alpha(),!0)},ca.prototype.desaturate=function(ue){return ue===void 0&&(ue=1),this.saturate(-ue)};var Fc=ce,as=B.type;Fc.prototype.set=function(ue,xe,$e){$e===void 0&&($e=!1);var kt=ue.split("."),nr=kt[0],sr=kt[1],Zt=this[nr]();if(sr){var _r=nr.indexOf(sr)-(nr.substr(0,2)==="ok"?2:0);if(_r>-1){if(as(xe)=="string")switch(xe.charAt(0)){case"+":Zt[_r]+=+xe;break;case"-":Zt[_r]+=+xe;break;case"*":Zt[_r]*=+xe.substr(1);break;case"/":Zt[_r]/=+xe.substr(1);break;default:Zt[_r]=+xe}else if(as(xe)==="number")Zt[_r]=xe;else throw new Error("unsupported value for Color.set");var Cr=new Fc(Zt,nr);return $e?(this._rgb=Cr._rgb,this):Cr}throw new Error("unknown channel "+sr+" in mode "+nr)}else return Zt};var M=ce,d=function(ue,xe,$e){var kt=ue._rgb,nr=xe._rgb;return new M(kt[0]+$e*(nr[0]-kt[0]),kt[1]+$e*(nr[1]-kt[1]),kt[2]+$e*(nr[2]-kt[2]),"rgb")};Oa.rgb=d;var k=ce,I=Math.sqrt,D=Math.pow,q=function(ue,xe,$e){var kt=ue._rgb,nr=kt[0],sr=kt[1],Zt=kt[2],_r=xe._rgb,Cr=_r[0],on=_r[1],yn=_r[2];return new k(I(D(nr,2)*(1-$e)+D(Cr,2)*$e),I(D(sr,2)*(1-$e)+D(on,2)*$e),I(D(Zt,2)*(1-$e)+D(yn,2)*$e),"rgb")};Oa.lrgb=q;var J=ce,oe=function(ue,xe,$e){var kt=ue.lab(),nr=xe.lab();return new J(kt[0]+$e*(nr[0]-kt[0]),kt[1]+$e*(nr[1]-kt[1]),kt[2]+$e*(nr[2]-kt[2]),"lab")};Oa.lab=oe;var se=ce,ge=function(ue,xe,$e,kt){var nr,sr,Zt,_r;kt==="hsl"?(Zt=ue.hsl(),_r=xe.hsl()):kt==="hsv"?(Zt=ue.hsv(),_r=xe.hsv()):kt==="hcg"?(Zt=ue.hcg(),_r=xe.hcg()):kt==="hsi"?(Zt=ue.hsi(),_r=xe.hsi()):kt==="lch"||kt==="hcl"?(kt="hcl",Zt=ue.hcl(),_r=xe.hcl()):kt==="oklch"&&(Zt=ue.oklch().reverse(),_r=xe.oklch().reverse());var Cr,on,yn,ei,_n,ti;(kt.substr(0,1)==="h"||kt==="oklch")&&(nr=Zt,Cr=nr[0],yn=nr[1],_n=nr[2],sr=_r,on=sr[0],ei=sr[1],ti=sr[2]);var ui,Hi,so,_o;return!isNaN(Cr)&&!isNaN(on)?(on>Cr&&on-Cr>180?_o=on-(Cr+360):on<Cr&&Cr-on>180?_o=on+360-Cr:_o=on-Cr,Hi=Cr+$e*_o):isNaN(Cr)?isNaN(on)?Hi=Number.NaN:(Hi=on,(_n==1||_n==0)&&kt!="hsv"&&(ui=ei)):(Hi=Cr,(ti==1||ti==0)&&kt!="hsv"&&(ui=yn)),ui===void 0&&(ui=yn+$e*(ei-yn)),so=_n+$e*(ti-_n),kt==="oklch"?new se([so,ui,Hi],kt):new se([Hi,ui,so],kt)},Se=ge,Ue=function(ue,xe,$e){return Se(ue,xe,$e,"lch")};Oa.lch=Ue,Oa.hcl=Ue;var Je=ce,St=function(ue,xe,$e){var kt=ue.num(),nr=xe.num();return new Je(kt+$e*(nr-kt),"num")};Oa.num=St;var vt=ge,xt=function(ue,xe,$e){return vt(ue,xe,$e,"hcg")};Oa.hcg=xt;var tr=ge,cr=function(ue,xe,$e){return tr(ue,xe,$e,"hsi")};Oa.hsi=cr;var Ar=ge,Dt=function(ue,xe,$e){return Ar(ue,xe,$e,"hsl")};Oa.hsl=Dt;var Lr=ge,Ir=function(ue,xe,$e){return Lr(ue,xe,$e,"hsv")};Oa.hsv=Ir;var Zr=ce,Gr=function(ue,xe,$e){var kt=ue.oklab(),nr=xe.oklab();return new Zr(kt[0]+$e*(nr[0]-kt[0]),kt[1]+$e*(nr[1]-kt[1]),kt[2]+$e*(nr[2]-kt[2]),"oklab")};Oa.oklab=Gr;var mn=ge,qr=function(ue,xe,$e){return mn(ue,xe,$e,"oklch")};Oa.oklch=qr;var zn=ce,En=B.clip_rgb,Vn=Math.pow,Ti=Math.sqrt,Di=Math.PI,N=Math.cos,$=Math.sin,re=Math.atan2,fe=function(ue,xe,$e){xe===void 0&&(xe="lrgb"),$e===void 0&&($e=null);var kt=ue.length;$e||($e=Array.from(new Array(kt)).map(function(){return 1}));var nr=kt/$e.reduce(function(Hi,so){return Hi+so});if($e.forEach(function(Hi,so){$e[so]*=nr}),ue=ue.map(function(Hi){return new zn(Hi)}),xe==="lrgb")return Le(ue,$e);for(var sr=ue.shift(),Zt=sr.get(xe),_r=[],Cr=0,on=0,yn=0;yn<Zt.length;yn++)if(Zt[yn]=(Zt[yn]||0)*$e[0],_r.push(isNaN(Zt[yn])?0:$e[0]),xe.charAt(yn)==="h"&&!isNaN(Zt[yn])){var ei=Zt[yn]/180*Di;Cr+=N(ei)*$e[0],on+=$(ei)*$e[0]}var _n=sr.alpha()*$e[0];ue.forEach(function(Hi,so){var _o=Hi.get(xe);_n+=Hi.alpha()*$e[so+1];for(var Uo=0;Uo<Zt.length;Uo++)if(!isNaN(_o[Uo]))if(_r[Uo]+=$e[so+1],xe.charAt(Uo)==="h"){var Ta=_o[Uo]/180*Di;Cr+=N(Ta)*$e[so+1],on+=$(Ta)*$e[so+1]}else Zt[Uo]+=_o[Uo]*$e[so+1]});for(var ti=0;ti<Zt.length;ti++)if(xe.charAt(ti)==="h"){for(var ui=re(on/_r[ti],Cr/_r[ti])/Di*180;ui<0;)ui+=360;for(;ui>=360;)ui-=360;Zt[ti]=ui}else Zt[ti]=Zt[ti]/_r[ti];return _n/=kt,new zn(Zt,xe).alpha(_n>.99999?1:_n,!0)},Le=function(ue,xe){for(var $e=ue.length,kt=[0,0,0,0],nr=0;nr<ue.length;nr++){var sr=ue[nr],Zt=xe[nr]/$e,_r=sr._rgb;kt[0]+=Vn(_r[0],2)*Zt,kt[1]+=Vn(_r[1],2)*Zt,kt[2]+=Vn(_r[2],2)*Zt,kt[3]+=_r[3]*Zt}return kt[0]=Ti(kt[0]),kt[1]=Ti(kt[1]),kt[2]=Ti(kt[2]),kt[3]>.9999999&&(kt[3]=1),new zn(En(kt))},Be=pe,qe=B.type,Ke=Math.pow,it=function(ue){var xe="rgb",$e=Be("#ccc"),kt=0,nr=[0,1],sr=[],Zt=[0,0],_r=!1,Cr=[],on=!1,yn=0,ei=1,_n=!1,ti={},ui=!0,Hi=1,so=function(bn){if(bn=bn||["#fff","#000"],bn&&qe(bn)==="string"&&Be.brewer&&Be.brewer[bn.toLowerCase()]&&(bn=Be.brewer[bn.toLowerCase()]),qe(bn)==="array"){bn.length===1&&(bn=[bn[0],bn[0]]),bn=bn.slice(0);for(var bi=0;bi<bn.length;bi++)bn[bi]=Be(bn[bi]);sr.length=0;for(var lo=0;lo<bn.length;lo++)sr.push(lo/(bn.length-1))}return ta(),Cr=bn},_o=function(bn){if(_r!=null){for(var bi=_r.length-1,lo=0;lo<bi&&bn>=_r[lo];)lo++;return lo-1}return 0},Uo=function(bn){return bn},Ta=function(bn){return bn},ja=function(bn,bi){var lo,Wi;if(bi==null&&(bi=!1),isNaN(bn)||bn===null)return $e;if(bi)Wi=bn;else if(_r&&_r.length>2){var Ka=_o(bn);Wi=Ka/(_r.length-2)}else ei!==yn?Wi=(bn-yn)/(ei-yn):Wi=1;Wi=Ta(Wi),bi||(Wi=Uo(Wi)),Hi!==1&&(Wi=Ke(Wi,Hi)),Wi=Zt[0]+Wi*(1-Zt[0]-Zt[1]),Wi=Math.min(1,Math.max(0,Wi));var Pi=Math.floor(Wi*1e4);if(ui&&ti[Pi])lo=ti[Pi];else{if(qe(Cr)==="array")for(var uo=0;uo<sr.length;uo++){var Do=sr[uo];if(Wi<=Do){lo=Cr[uo];break}if(Wi>=Do&&uo===sr.length-1){lo=Cr[uo];break}if(Wi>Do&&Wi<sr[uo+1]){Wi=(Wi-Do)/(sr[uo+1]-Do),lo=Be.interpolate(Cr[uo],Cr[uo+1],Wi,xe);break}}else qe(Cr)==="function"&&(lo=Cr(Wi));ui&&(ti[Pi]=lo)}return lo},ta=function(){return ti={}};so(ue);var eo=function(bn){var bi=Be(ja(bn));return on&&bi[on]?bi[on]():bi};return eo.classes=function(bn){if(bn!=null){if(qe(bn)==="array")_r=bn,nr=[bn[0],bn[bn.length-1]];else{var bi=Be.analyze(nr);bn===0?_r=[bi.min,bi.max]:_r=Be.limits(bi,"e",bn)}return eo}return _r},eo.domain=function(bn){if(!arguments.length)return nr;yn=bn[0],ei=bn[bn.length-1],sr=[];var bi=Cr.length;if(bn.length===bi&&yn!==ei)for(var lo=0,Wi=Array.from(bn);lo<Wi.length;lo+=1){var Ka=Wi[lo];sr.push((Ka-yn)/(ei-yn))}else{for(var Pi=0;Pi<bi;Pi++)sr.push(Pi/(bi-1));if(bn.length>2){var uo=bn.map(function(qo,Go){return Go/(bn.length-1)}),Do=bn.map(function(qo){return(qo-yn)/(ei-yn)});Do.every(function(qo,Go){return uo[Go]===qo})||(Ta=function(qo){if(qo<=0||qo>=1)return qo;for(var Go=0;qo>=Do[Go+1];)Go++;var Vs=(qo-Do[Go])/(Do[Go+1]-Do[Go]),xc=uo[Go]+Vs*(uo[Go+1]-uo[Go]);return xc})}}return nr=[yn,ei],eo},eo.mode=function(bn){return arguments.length?(xe=bn,ta(),eo):xe},eo.range=function(bn,bi){return so(bn),eo},eo.out=function(bn){return on=bn,eo},eo.spread=function(bn){return arguments.length?(kt=bn,eo):kt},eo.correctLightness=function(bn){return bn==null&&(bn=!0),_n=bn,ta(),_n?Uo=function(bi){for(var lo=ja(0,!0).lab()[0],Wi=ja(1,!0).lab()[0],Ka=lo>Wi,Pi=ja(bi,!0).lab()[0],uo=lo+(Wi-lo)*bi,Do=Pi-uo,qo=0,Go=1,Vs=20;Math.abs(Do)>.01&&Vs-- >0;)(function(){return Ka&&(Do*=-1),Do<0?(qo=bi,bi+=(Go-bi)*.5):(Go=bi,bi+=(qo-bi)*.5),Pi=ja(bi,!0).lab()[0],Do=Pi-uo})();return bi}:Uo=function(bi){return bi},eo},eo.padding=function(bn){return bn!=null?(qe(bn)==="number"&&(bn=[bn,bn]),Zt=bn,eo):Zt},eo.colors=function(bn,bi){arguments.length<2&&(bi="hex");var lo=[];if(arguments.length===0)lo=Cr.slice(0);else if(bn===1)lo=[eo(.5)];else if(bn>1){var Wi=nr[0],Ka=nr[1]-Wi;lo=_t(0,bn,!1).map(function(Go){return eo(Wi+Go/(bn-1)*Ka)})}else{ue=[];var Pi=[];if(_r&&_r.length>2)for(var uo=1,Do=_r.length,qo=1<=Do;qo?uo<Do:uo>Do;qo?uo++:uo--)Pi.push((_r[uo-1]+_r[uo])*.5);else Pi=nr;lo=Pi.map(function(Go){return eo(Go)})}return Be[bi]&&(lo=lo.map(function(Go){return Go[bi]()})),lo},eo.cache=function(bn){return bn!=null?(ui=bn,eo):ui},eo.gamma=function(bn){return bn!=null?(Hi=bn,eo):Hi},eo.nodata=function(bn){return bn!=null?($e=Be(bn),eo):$e},eo};function _t(ue,xe,$e){for(var kt=[],nr=ue<xe,sr=$e?nr?xe+1:xe-1:xe,Zt=ue;nr?Zt<sr:Zt>sr;nr?Zt++:Zt--)kt.push(Zt);return kt}var rr=ce,Er=it,kr=function(ue){for(var xe=[1,1],$e=1;$e<ue;$e++){for(var kt=[1],nr=1;nr<=xe.length;nr++)kt[nr]=(xe[nr]||0)+xe[nr-1];xe=kt}return xe},hr=function(ue){var xe,$e,kt,nr,sr,Zt,_r;if(ue=ue.map(function(_n){return new rr(_n)}),ue.length===2)xe=ue.map(function(_n){return _n.lab()}),sr=xe[0],Zt=xe[1],nr=function(_n){var ti=[0,1,2].map(function(ui){return sr[ui]+_n*(Zt[ui]-sr[ui])});return new rr(ti,"lab")};else if(ue.length===3)$e=ue.map(function(_n){return _n.lab()}),sr=$e[0],Zt=$e[1],_r=$e[2],nr=function(_n){var ti=[0,1,2].map(function(ui){return(1-_n)*(1-_n)*sr[ui]+2*(1-_n)*_n*Zt[ui]+_n*_n*_r[ui]});return new rr(ti,"lab")};else if(ue.length===4){var Cr;kt=ue.map(function(_n){return _n.lab()}),sr=kt[0],Zt=kt[1],_r=kt[2],Cr=kt[3],nr=function(_n){var ti=[0,1,2].map(function(ui){return(1-_n)*(1-_n)*(1-_n)*sr[ui]+3*(1-_n)*(1-_n)*_n*Zt[ui]+3*(1-_n)*_n*_n*_r[ui]+_n*_n*_n*Cr[ui]});return new rr(ti,"lab")}}else if(ue.length>=5){var on,yn,ei;on=ue.map(function(_n){return _n.lab()}),ei=ue.length-1,yn=kr(ei),nr=function(_n){var ti=1-_n,ui=[0,1,2].map(function(Hi){return on.reduce(function(so,_o,Uo){return so+yn[Uo]*Math.pow(ti,ei-Uo)*Math.pow(_n,Uo)*_o[Hi]},0)});return new rr(ui,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return nr},fn=function(ue){var xe=hr(ue);return xe.scale=function(){return Er(xe)},xe},zr=pe,zt=function(ue,xe,$e){if(!zt[$e])throw new Error("unknown blend mode "+$e);return zt[$e](ue,xe)},Xt=function(ue){return function(xe,$e){var kt=zr($e).rgb(),nr=zr(xe).rgb();return zr.rgb(ue(kt,nr))}},Hr=function(ue){return function(xe,$e){var kt=[];return kt[0]=ue(xe[0],$e[0]),kt[1]=ue(xe[1],$e[1]),kt[2]=ue(xe[2],$e[2]),kt}},en=function(ue){return ue},Wr=function(ue,xe){return ue*xe/255},On=function(ue,xe){return ue>xe?xe:ue},In=function(ue,xe){return ue>xe?ue:xe},Ci=function(ue,xe){return 255*(1-(1-ue/255)*(1-xe/255))},Fn=function(ue,xe){return xe<128?2*ue*xe/255:255*(1-2*(1-ue/255)*(1-xe/255))},Co=function(ue,xe){return 255*(1-(1-xe/255)/(ue/255))},Po=function(ue,xe){return ue===255?255:(ue=255*(xe/255)/(1-ue/255),ue>255?255:ue)};zt.normal=Xt(Hr(en)),zt.multiply=Xt(Hr(Wr)),zt.screen=Xt(Hr(Ci)),zt.overlay=Xt(Hr(Fn)),zt.darken=Xt(Hr(On)),zt.lighten=Xt(Hr(In)),zt.dodge=Xt(Hr(Po)),zt.burn=Xt(Hr(Co));for(var ao=zt,Gi=B.type,Eo=B.clip_rgb,Mo=B.TWOPI,Qi=Math.pow,Fa=Math.sin,Fi=Math.cos,pa=pe,Ha=function(ue,xe,$e,kt,nr){ue===void 0&&(ue=300),xe===void 0&&(xe=-1.5),$e===void 0&&($e=1),kt===void 0&&(kt=1),nr===void 0&&(nr=[0,1]);var sr=0,Zt;Gi(nr)==="array"?Zt=nr[1]-nr[0]:(Zt=0,nr=[nr,nr]);var _r=function(Cr){var on=Mo*((ue+120)/360+xe*Cr),yn=Qi(nr[0]+Zt*Cr,kt),ei=sr!==0?$e[0]+Cr*sr:$e,_n=ei*yn*(1-yn)/2,ti=Fi(on),ui=Fa(on),Hi=yn+_n*(-.14861*ti+1.78277*ui),so=yn+_n*(-.29227*ti-.90649*ui),_o=yn+_n*(1.97294*ti);return pa(Eo([Hi*255,so*255,_o*255,1]))};return _r.start=function(Cr){return Cr==null?ue:(ue=Cr,_r)},_r.rotations=function(Cr){return Cr==null?xe:(xe=Cr,_r)},_r.gamma=function(Cr){return Cr==null?kt:(kt=Cr,_r)},_r.hue=function(Cr){return Cr==null?$e:($e=Cr,Gi($e)==="array"?(sr=$e[1]-$e[0],sr===0&&($e=$e[1])):sr=0,_r)},_r.lightness=function(Cr){return Cr==null?nr:(Gi(Cr)==="array"?(nr=Cr,Zt=Cr[1]-Cr[0]):(nr=[Cr,Cr],Zt=0),_r)},_r.scale=function(){return pa.scale(_r)},_r.hue($e),_r},vo=ce,ya="0123456789abcdef",Ba=Math.floor,Wa=Math.random,Wo=function(){for(var ue="#",xe=0;xe<6;xe++)ue+=ya.charAt(Ba(Wa()*16));return new vo(ue,"hex")},ss=v,Bs=Math.log,$o=Math.pow,Ia=Math.floor,nu=Math.abs,js=function(ue,xe){xe===void 0&&(xe=null);var $e={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return ss(ue)==="object"&&(ue=Object.values(ue)),ue.forEach(function(kt){xe&&ss(kt)==="object"&&(kt=kt[xe]),kt!=null&&!isNaN(kt)&&($e.values.push(kt),$e.sum+=kt,kt<$e.min&&($e.min=kt),kt>$e.max&&($e.max=kt),$e.count+=1)}),$e.domain=[$e.min,$e.max],$e.limits=function(kt,nr){return Ks($e,kt,nr)},$e},Ks=function(ue,xe,$e){xe===void 0&&(xe="equal"),$e===void 0&&($e=7),ss(ue)=="array"&&(ue=js(ue));var kt=ue.min,nr=ue.max,sr=ue.values.sort(function(gf,I0){return gf-I0});if($e===1)return[kt,nr];var Zt=[];if(xe.substr(0,1)==="c"&&(Zt.push(kt),Zt.push(nr)),xe.substr(0,1)==="e"){Zt.push(kt);for(var _r=1;_r<$e;_r++)Zt.push(kt+_r/$e*(nr-kt));Zt.push(nr)}else if(xe.substr(0,1)==="l"){if(kt<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Cr=Math.LOG10E*Bs(kt),on=Math.LOG10E*Bs(nr);Zt.push(kt);for(var yn=1;yn<$e;yn++)Zt.push($o(10,Cr+yn/$e*(on-Cr)));Zt.push(nr)}else if(xe.substr(0,1)==="q"){Zt.push(kt);for(var ei=1;ei<$e;ei++){var _n=(sr.length-1)*ei/$e,ti=Ia(_n);if(ti===_n)Zt.push(sr[ti]);else{var ui=_n-ti;Zt.push(sr[ti]*(1-ui)+sr[ti+1]*ui)}}Zt.push(nr)}else if(xe.substr(0,1)==="k"){var Hi,so=sr.length,_o=new Array(so),Uo=new Array($e),Ta=!0,ja=0,ta=null;ta=[],ta.push(kt);for(var eo=1;eo<$e;eo++)ta.push(kt+eo/$e*(nr-kt));for(ta.push(nr);Ta;){for(var bn=0;bn<$e;bn++)Uo[bn]=0;for(var bi=0;bi<so;bi++)for(var lo=sr[bi],Wi=Number.MAX_VALUE,Ka=void 0,Pi=0;Pi<$e;Pi++){var uo=nu(ta[Pi]-lo);uo<Wi&&(Wi=uo,Ka=Pi),Uo[Ka]++,_o[bi]=Ka}for(var Do=new Array($e),qo=0;qo<$e;qo++)Do[qo]=null;for(var Go=0;Go<so;Go++)Hi=_o[Go],Do[Hi]===null?Do[Hi]=sr[Go]:Do[Hi]+=sr[Go];for(var Vs=0;Vs<$e;Vs++)Do[Vs]*=1/Uo[Vs];Ta=!1;for(var xc=0;xc<$e;xc++)if(Do[xc]!==ta[xc]){Ta=!0;break}ta=Do,ja++,ja>200&&(Ta=!1)}for(var kc={},ec=0;ec<$e;ec++)kc[ec]=[];for(var jc=0;jc<so;jc++)Hi=_o[jc],kc[Hi].push(sr[jc]);for(var Nl=[],o0=0;o0<$e;o0++)Nl.push(kc[o0][0]),Nl.push(kc[o0][kc[o0].length-1]);Nl=Nl.sort(function(gf,I0){return gf-I0}),Zt.push(Nl[0]);for(var C0=1;C0<Nl.length;C0+=2){var Iu=Nl[C0];!isNaN(Iu)&&Zt.indexOf(Iu)===-1&&Zt.push(Iu)}}return Zt},Qs={analyze:js,limits:Ks},da=ce,k0=function(ue,xe){ue=new da(ue),xe=new da(xe);var $e=ue.luminance(),kt=xe.luminance();return $e>kt?($e+.05)/(kt+.05):(kt+.05)/($e+.05)},H0=ce,zl=Math.sqrt,fa=Math.pow,yc=Math.min,A0=Math.max,Us=Math.atan2,qs=Math.abs,iu=Math.cos,Qu=Math.sin,E0=Math.exp,vc=Math.PI,_c=function(ue,xe,$e,kt,nr){$e===void 0&&($e=1),kt===void 0&&(kt=1),nr===void 0&&(nr=1);var sr=function(Iu){return 360*Iu/(2*vc)},Zt=function(Iu){return 2*vc*Iu/360};ue=new H0(ue),xe=new H0(xe);var _r=Array.from(ue.lab()),Cr=_r[0],on=_r[1],yn=_r[2],ei=Array.from(xe.lab()),_n=ei[0],ti=ei[1],ui=ei[2],Hi=(Cr+_n)/2,so=zl(fa(on,2)+fa(yn,2)),_o=zl(fa(ti,2)+fa(ui,2)),Uo=(so+_o)/2,Ta=.5*(1-zl(fa(Uo,7)/(fa(Uo,7)+fa(25,7)))),ja=on*(1+Ta),ta=ti*(1+Ta),eo=zl(fa(ja,2)+fa(yn,2)),bn=zl(fa(ta,2)+fa(ui,2)),bi=(eo+bn)/2,lo=sr(Us(yn,ja)),Wi=sr(Us(ui,ta)),Ka=lo>=0?lo:lo+360,Pi=Wi>=0?Wi:Wi+360,uo=qs(Ka-Pi)>180?(Ka+Pi+360)/2:(Ka+Pi)/2,Do=1-.17*iu(Zt(uo-30))+.24*iu(Zt(2*uo))+.32*iu(Zt(3*uo+6))-.2*iu(Zt(4*uo-63)),qo=Pi-Ka;qo=qs(qo)<=180?qo:Pi<=Ka?qo+360:qo-360,qo=2*zl(eo*bn)*Qu(Zt(qo)/2);var Go=_n-Cr,Vs=bn-eo,xc=1+.015*fa(Hi-50,2)/zl(20+fa(Hi-50,2)),kc=1+.045*bi,ec=1+.015*bi*Do,jc=30*E0(-fa((uo-275)/25,2)),Nl=2*zl(fa(bi,7)/(fa(bi,7)+fa(25,7))),o0=-Nl*Qu(2*Zt(jc)),C0=zl(fa(Go/($e*xc),2)+fa(Vs/(kt*kc),2)+fa(qo/(nr*ec),2)+o0*(Vs/(kt*kc))*(qo/(nr*ec)));return A0(0,yc(100,C0))},bc=ce,wc=function(ue,xe,$e){$e===void 0&&($e="lab"),ue=new bc(ue),xe=new bc(xe);var kt=ue.get($e),nr=xe.get($e),sr=0;for(var Zt in kt){var _r=(kt[Zt]||0)-(nr[Zt]||0);sr+=_r*_r}return Math.sqrt(sr)},Bc=ce,hs=function(){for(var ue=[],xe=arguments.length;xe--;)ue[xe]=arguments[xe];try{return new(Function.prototype.bind.apply(Bc,[null].concat(ue))),!0}catch{return!1}},Ja=pe,La=it,ou={cool:function(){return La([Ja.hsl(180,1,.9),Ja.hsl(250,.7,.4)])},hot:function(){return La(["#000","#f00","#ff0","#fff"]).mode("rgb")}},n0={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ul=0,W0=Object.keys(n0);ul<W0.length;ul+=1){var S0=W0[ul];n0[S0.toLowerCase()]=n0[S0]}var i0=n0,va=pe;va.average=fe,va.bezier=fn,va.blend=ao,va.cubehelix=Ha,va.mix=va.interpolate=Ml,va.random=Wo,va.scale=it,va.analyze=Qs.analyze,va.contrast=k0,va.deltaE=_c,va.distance=wc,va.limits=Qs.limits,va.valid=hs,va.scales=ou,va.colors=Vo,va.brewer=i0;var Z0=va;return Z0})})(rI);const ap=Jg,dv=e=>{if(e&&Array.isArray(e)){if(e[0]==="rgb")e=ap(e.splice(1,3)).css();else if(e[0]==="rgba")e=ap(e.splice(1,4)).css();else if(e[0]==="match"){const t=e[e.length-1];e=dv(t)}}return e};function nI(e){let t,r=e[0].innerHTML+"";return{c(){t=ct("div"),this.h()},l(n){t=ft(n,"DIV",{class:!0});var o=wt(t);o.forEach(de),this.h()},h(){ye(t,"class","legend svelte-1dizgfa")},m(n,o){It(n,t,o),t.innerHTML=r},p(n,[o]){o&1&&r!==(r=n[0].innerHTML+"")&&(t.innerHTML=r)},i:Xn,o:Xn,d(n){n&&de(t)}}}function iI(e,t,r){let{map:n}=t,{layer:o}=t,{spriteLoader:u}=t,c=document.createElement("div");const s=v=>{let w=new Blob([v],{type:"image/svg+xml"}),E=URL.createObjectURL(w),L=document.createElement("img");return L.src=E,L.addEventListener("load",()=>URL.revokeObjectURL(E),{once:!0}),L.height=24,L.width=24,L},f=async()=>{const v=n.getZoom(),w=tI({zoom:v,layer:o});if(r(0,c.innerText="",c),w){let L,C,F;switch(w.element){case"div":if(w.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(w.attributes.style.backgroundImage)){var E=document.createElement("img");E.src=w.attributes.style.backgroundImage.replace("url(","").replace(")",""),E.alt=o.id,E.style.cssText="height: 24px;",c.appendChild(E)}L=document.createElement("div"),L.style.height="24px",L.style.width="50px",L.style.backgroundColor=w.attributes.style.backgroundColor,L.style.backgroundPosition=w.attributes.style.backgroundPosition,L.style.backgroundSize=w.attributes.style.backgroundSize,L.style.backgroundRepeat=w.attributes.style.backgroundRepeat,L.style.opacity=w.attributes.style.opacity,c.appendChild(L);break;case"svg":if(u&&(F=u.getIconDataUrl(o),F)){const B=document.createElement("img");B.src=F,B.alt=o.id,B.style.cssText="height: 24px;",c.appendChild(B);break}C=document.createElementNS("http://www.w3.org/2000/svg","svg"),C.style.cssText="height: 24px;",C.setAttributeNS(null,"version","1.1"),Object.keys(w.attributes).forEach(B=>{C.setAttribute(B,w.attributes[B]);let G=document.createElementNS("http://www.w3.org/2000/svg","g");w.children.forEach(H=>{var Z=document.createElementNS("http://www.w3.org/2000/svg",H.element);Object.keys(H.attributes).forEach(ee=>{Z.setAttributeNS(null,ee,H.attributes[ee])}),G.appendChild(Z)}),C.appendChild(G)}),c.appendChild(C);break;default:console.log(w.element);return}}else if(o.type==="hillshade"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 32c12.5 0 24.1 6.4 30.7 17L503.4 394.4c5.6 8.9 8.6 19.2 8.6 29.7c0 30.9-25 55.9-55.9 55.9H55.9C25 480 0 455 0 424.1c0-10.5 3-20.8 8.6-29.7L225.2 49c6.6-10.6 18.3-17 30.8-17zm65 192L256 120.4 176.9 246.5 208 288l48-64h65z"/></svg>');c.appendChild(C)}else if(o.type==="fill-extrusion"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M243.583 91.6027L323.695 138.384C326.575 140.026 326.68 144.583 323.695 146.225L228.503 201.854C225.623 203.55 222.22 203.444 219.549 201.854L124.357 146.225C121.425 144.636 121.373 139.973 124.357 138.384L204.417 91.6027V0L0 119.417V358.252L78.3843 312.477V218.914C78.3319 215.576 82.2066 213.192 85.0865 214.993L180.279 270.622C183.159 272.318 184.782 275.338 184.782 278.464V389.669C184.834 393.007 180.959 395.391 178.079 393.589L97.9673 346.808L19.583 392.583L224 512L428.417 392.583L350.033 346.808L269.921 393.589C267.093 395.338 263.114 393.06 263.218 389.669V278.464C263.218 275.126 265.051 272.159 267.721 270.622L362.914 214.993C365.741 213.245 369.72 215.47 369.616 218.914V312.477L448 358.252V119.417L243.583 0V91.6027Z"/></svg>');c.appendChild(C)}else if(o.type==="raster"){const C=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zm48 0c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"/></svg>');c.appendChild(C)}else if(o.type==="heatmap"){const L=n.getPaintProperty(o.id,"heatmap-color");if(L&&L[0]==="interpolate"){const C=[];for(let H=4;H<L.length;H=H+2)C.push(L[H]);const B=`height: calc(1px * 24); width: calc(2px * 12); background: linear-gradient(90deg, ${ap.scale(C).mode("lrgb").padding([.25,0]).domain([1,100]).colors(C.length,"rgba")});`,G=document.createElement("div");G.style.cssText=B,c.appendChild(G)}else{const F=s('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zm0-160c-53 0-96-43-96-96s43-96 96-96s96 43 96 96s-43 96-96 96z"/></svg>');c.appendChild(F)}}else{const L=n.getPaintProperty(o.id,"background-color"),C=dv(L)??"#000000",F=n.getPaintProperty(o.id,"background-opacity")??1,B=document.createElement("div");B.style.height="24px",B.style.width="50px",B.style.backgroundColor=C,B.style.opacity=`${F}`,c.appendChild(B)}};return n.on("moveend",f),n.on("zoom",f),e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer),"spriteLoader"in v&&r(3,u=v.spriteLoader)},e.$$.update=()=>{e.$$.dirty&4&&f()},[c,n,o,u]}class X6 extends Pn{constructor(t){super(),Mn(this,t,iI,nI,Cn,{map:1,layer:2,spriteLoader:3})}}var Y6={};Object.defineProperty(Y6,"__esModule",{value:!0});function oI(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)navigator!==null&&(e=navigator.msMaxTouchPoints>0);else{var t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&t.media==="(pointer:coarse)")e=!!t.matches;else if("orientation"in window)e=!0;else{var r=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}}return e}var aI=Y6.isMobile=oI(),sI=typeof global=="object"&&global&&global.Object===Object&&global;const lI=sI;var uI=typeof self=="object"&&self&&self.Object===Object&&self,cI=lI||uI||Function("return this")();const J6=cI;var fI=J6.Symbol;const q1=fI;var K6=Object.prototype,hI=K6.hasOwnProperty,pI=K6.toString,Np=q1?q1.toStringTag:void 0;function dI(e){var t=hI.call(e,Np),r=e[Np];try{e[Np]=void 0;var n=!0}catch{}var o=pI.call(e);return n&&(t?e[Np]=r:delete e[Np]),o}var mI=Object.prototype,gI=mI.toString;function yI(e){return gI.call(e)}var vI="[object Null]",_I="[object Undefined]",Wb=q1?q1.toStringTag:void 0;function bI(e){return e==null?e===void 0?_I:vI:Wb&&Wb in Object(e)?dI(e):yI(e)}function wI(e){return e!=null&&typeof e=="object"}var xI="[object Symbol]";function kI(e){return typeof e=="symbol"||wI(e)&&bI(e)==xI}var AI=/\s/;function EI(e){for(var t=e.length;t--&&AI.test(e.charAt(t)););return t}var SI=/^\s+/;function CI(e){return e&&e.slice(0,EI(e)+1).replace(SI,"")}function Kg(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zb=0/0,II=/^[-+]0x[0-9a-f]+$/i,LI=/^0b[01]+$/i,TI=/^0o[0-7]+$/i,PI=parseInt;function Xb(e){if(typeof e=="number")return e;if(kI(e))return Zb;if(Kg(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Kg(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=CI(e);var r=LI.test(e);return r||TI.test(e)?PI(e.slice(2),r?2:8):II.test(e)?Zb:+e}var MI=function(){return J6.Date.now()};const Am=MI;var DI="Expected a function",zI=Math.max,NI=Math.min;function mv(e,t,r){var n,o,u,c,s,f,v=0,w=!1,E=!1,L=!0;if(typeof e!="function")throw new TypeError(DI);t=Xb(t)||0,Kg(r)&&(w=!!r.leading,E="maxWait"in r,u=E?zI(Xb(r.maxWait)||0,t):u,L="trailing"in r?!!r.trailing:L);function C(ce){var ve=n,pe=o;return n=o=void 0,v=ce,c=e.apply(pe,ve),c}function F(ce){return v=ce,s=setTimeout(H,t),w?C(ce):c}function B(ce){var ve=ce-f,pe=ce-v,Ne=t-ve;return E?NI(Ne,u-pe):Ne}function G(ce){var ve=ce-f,pe=ce-v;return f===void 0||ve>=t||ve<0||E&&pe>=u}function H(){var ce=Am();if(G(ce))return Z(ce);s=setTimeout(H,B(ce))}function Z(ce){return s=void 0,L&&n?C(ce):(n=o=void 0,c)}function ee(){s!==void 0&&clearTimeout(s),v=0,n=f=o=s=void 0}function Y(){return s===void 0?c:Z(Am())}function le(){var ce=Am(),ve=G(ce);if(n=arguments,o=this,f=ce,ve){if(s===void 0)return F(f);if(E)return clearTimeout(s),s=setTimeout(H,t),C(f)}return s===void 0&&(s=setTimeout(H,t)),c}return le.cancel=ee,le.flush=Y,le}function Yb(e){return Object.prototype.toString.call(e)==="[object Date]"}function Qg(e,t,r,n){if(typeof r=="number"||Yb(r)){const o=n-r,u=(r-t)/(e.dt||1/60),c=e.opts.stiffness*o,s=e.opts.damping*u,f=(c-s)*e.inv_mass,v=(u+f)*e.dt;return Math.abs(v)<e.opts.precision&&Math.abs(o)<e.opts.precision?n:(e.settled=!1,Yb(r)?new Date(r.getTime()+v):r+v)}else{if(Array.isArray(r))return r.map((o,u)=>Qg(e,t[u],r[u],n[u]));if(typeof r=="object"){const o={};for(const u in r)o[u]=Qg(e,t[u],r[u],n[u]);return o}else throw new Error(`Cannot spring ${typeof r} values`)}}function RI(e,t={}){const r=df(e),{stiffness:n=.15,damping:o=.8,precision:u=.01}=t;let c,s,f,v=e,w=e,E=1,L=0,C=!1;function F(G,H={}){w=G;const Z=f={};return e==null||H.hard||B.stiffness>=1&&B.damping>=1?(C=!0,c=N_(),v=G,r.set(e=w),Promise.resolve()):(H.soft&&(L=1/((H.soft===!0?.5:+H.soft)*60),E=0),s||(c=N_(),C=!1,s=DA(ee=>{if(C)return C=!1,s=null,!1;E=Math.min(E+L,1);const Y={inv_mass:E,opts:B,settled:!0,dt:(ee-c)*60/1e3},le=Qg(Y,v,e,w);return c=ee,v=e,r.set(e=le),Y.settled&&(s=null),!Y.settled})),new Promise(ee=>{s.promise.then(()=>{Z===f&&ee()})}))}const B={set:F,update:(G,H)=>F(G(w,e),H),subscribe:r.subscribe,stiffness:n,damping:o,precision:u};return B}function Jb(e,t,r){const n=e.slice();return n[28]=t[r],n[30]=r,n}function Kb(e){let t,r,n,o,u=(e[6]==="label"||e[7]==="label")&&Qb(e);return{c(){t=ct("span"),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0,style:!0});var s=wt(t);u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","pip first"),ye(t,"style",r=e[14]+": 0%;"),ni(t,"selected",e[18](e[0])),ni(t,"in-range",e[17](e[0]))},m(c,s){It(c,t,s),u&&u.m(t,null),n||(o=[Qr(t,"click",function(){y0(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}),Qr(t,"touchend",Ul(function(){y0(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}))],n=!0)},p(c,s){e=c,e[6]==="label"||e[7]==="label"?u?u.p(e,s):(u=Qb(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null),s&16384&&r!==(r=e[14]+": 0%;")&&ye(t,"style",r),s&262145&&ni(t,"selected",e[18](e[0])),s&131073&&ni(t,"in-range",e[17](e[0]))},d(c){c&&de(t),u&&u.d(),n=!1,oa(o)}}}function Qb(e){let t,r=e[12](e[16](e[0]),0,0)+"",n,o=e[10]&&e5(e),u=e[11]&&t5(e);return{c(){t=ct("span"),o&&o.c(),n=Nn(r),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);o&&o.l(s),n=Rn(s,r),u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","pipVal")},m(c,s){It(c,t,s),o&&o.m(t,null),Qe(t,n),u&&u.m(t,null)},p(c,s){c[10]?o?o.p(c,s):(o=e5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s&69633&&r!==(r=c[12](c[16](c[0]),0,0)+"")&&No(n,r),c[11]?u?u.p(c,s):(u=t5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&de(t),o&&o.d(),u&&u.d()}}}function e5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[10]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[10]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-prefix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&1024&&No(r,n[10])},d(n){n&&de(t)}}}function t5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[11]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[11]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-suffix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&2048&&No(r,n[11])},d(n){n&&de(t)}}}function r5(e){let t,r=Array(e[20]+1),n=[];for(let o=0;o<r.length;o+=1)n[o]=s5(Jb(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Xi()},l(o){for(let u=0;u<n.length;u+=1)n[u].l(o);t=Xi()},m(o,u){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(o,u);It(o,t,u)},p(o,u){if(u&4120131){r=Array(o[20]+1);let c;for(c=0;c<r.length;c+=1){const s=Jb(o,r,c);n[c]?n[c].p(s,u):(n[c]=s5(s),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){ys(n,o),o&&de(t)}}}function n5(e){let t,r,n,o,u,c=(e[6]==="label"||e[9]==="label")&&i5(e);return{c(){t=ct("span"),c&&c.c(),r=pr(),this.h()},l(s){t=ft(s,"SPAN",{class:!0,style:!0});var f=wt(t);c&&c.l(f),r=dr(f),f.forEach(de),this.h()},h(){ye(t,"class","pip"),ye(t,"style",n=e[14]+": "+e[15](e[19](e[30]))+"%;"),ni(t,"selected",e[18](e[19](e[30]))),ni(t,"in-range",e[17](e[19](e[30])))},m(s,f){It(s,t,f),c&&c.m(t,null),Qe(t,r),o||(u=[Qr(t,"click",function(){y0(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}),Qr(t,"touchend",Ul(function(){y0(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}))],o=!0)},p(s,f){e=s,e[6]==="label"||e[9]==="label"?c?c.p(e,f):(c=i5(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),f&573440&&n!==(n=e[14]+": "+e[15](e[19](e[30]))+"%;")&&ye(t,"style",n),f&786432&&ni(t,"selected",e[18](e[19](e[30]))),f&655360&&ni(t,"in-range",e[17](e[19](e[30])))},d(s){s&&de(t),c&&c.d(),o=!1,oa(u)}}}function i5(e){let t,r=e[12](e[19](e[30]),e[30],e[15](e[19](e[30])))+"",n,o=e[10]&&o5(e),u=e[11]&&a5(e);return{c(){t=ct("span"),o&&o.c(),n=Nn(r),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);o&&o.l(s),n=Rn(s,r),u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","pipVal")},m(c,s){It(c,t,s),o&&o.m(t,null),Qe(t,n),u&&u.m(t,null)},p(c,s){c[10]?o?o.p(c,s):(o=o5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s&561152&&r!==(r=c[12](c[19](c[30]),c[30],c[15](c[19](c[30])))+"")&&No(n,r),c[11]?u?u.p(c,s):(u=a5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&de(t),o&&o.d(),u&&u.d()}}}function o5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[10]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[10]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-prefix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&1024&&No(r,n[10])},d(n){n&&de(t)}}}function a5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[11]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[11]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-suffix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&2048&&No(r,n[11])},d(n){n&&de(t)}}}function s5(e){let t=e[19](e[30])!==e[0]&&e[19](e[30])!==e[1],r,n=t&&n5(e);return{c(){n&&n.c(),r=Xi()},l(o){n&&n.l(o),r=Xi()},m(o,u){n&&n.m(o,u),It(o,r,u)},p(o,u){u&524291&&(t=o[19](o[30])!==o[0]&&o[19](o[30])!==o[1]),t?n?n.p(o,u):(n=n5(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(o){n&&n.d(o),o&&de(r)}}}function l5(e){let t,r,n,o,u=(e[6]==="label"||e[8]==="label")&&u5(e);return{c(){t=ct("span"),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0,style:!0});var s=wt(t);u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","pip last"),ye(t,"style",r=e[14]+": 100%;"),ni(t,"selected",e[18](e[1])),ni(t,"in-range",e[17](e[1]))},m(c,s){It(c,t,s),u&&u.m(t,null),n||(o=[Qr(t,"click",function(){y0(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}),Qr(t,"touchend",Ul(function(){y0(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}))],n=!0)},p(c,s){e=c,e[6]==="label"||e[8]==="label"?u?u.p(e,s):(u=u5(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null),s&16384&&r!==(r=e[14]+": 100%;")&&ye(t,"style",r),s&262146&&ni(t,"selected",e[18](e[1])),s&131074&&ni(t,"in-range",e[17](e[1]))},d(c){c&&de(t),u&&u.d(),n=!1,oa(o)}}}function u5(e){let t,r=e[12](e[16](e[1]),e[20],100)+"",n,o=e[10]&&c5(e),u=e[11]&&f5(e);return{c(){t=ct("span"),o&&o.c(),n=Nn(r),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);o&&o.l(s),n=Rn(s,r),u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","pipVal")},m(c,s){It(c,t,s),o&&o.m(t,null),Qe(t,n),u&&u.m(t,null)},p(c,s){c[10]?o?o.p(c,s):(o=c5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s&1118210&&r!==(r=c[12](c[16](c[1]),c[20],100)+"")&&No(n,r),c[11]?u?u.p(c,s):(u=f5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&de(t),o&&o.d(),u&&u.d()}}}function c5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[10]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[10]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-prefix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&1024&&No(r,n[10])},d(n){n&&de(t)}}}function f5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[11]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[11]),o.forEach(de),this.h()},h(){ye(t,"class","pipVal-suffix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&2048&&No(r,n[11])},d(n){n&&de(t)}}}function OI(e){let t,r,n,o=(e[6]&&e[7]!==!1||e[7])&&Kb(e),u=(e[6]&&e[9]!==!1||e[9])&&r5(e),c=(e[6]&&e[8]!==!1||e[8])&&l5(e);return{c(){t=ct("div"),o&&o.c(),r=pr(),u&&u.c(),n=pr(),c&&c.c(),this.h()},l(s){t=ft(s,"DIV",{class:!0});var f=wt(t);o&&o.l(f),r=dr(f),u&&u.l(f),n=dr(f),c&&c.l(f),f.forEach(de),this.h()},h(){ye(t,"class","rangePips"),ni(t,"disabled",e[5]),ni(t,"hoverable",e[4]),ni(t,"vertical",e[2]),ni(t,"reversed",e[3]),ni(t,"focus",e[13])},m(s,f){It(s,t,f),o&&o.m(t,null),Qe(t,r),u&&u.m(t,null),Qe(t,n),c&&c.m(t,null)},p(s,[f]){s[6]&&s[7]!==!1||s[7]?o?o.p(s,f):(o=Kb(s),o.c(),o.m(t,r)):o&&(o.d(1),o=null),s[6]&&s[9]!==!1||s[9]?u?u.p(s,f):(u=r5(s),u.c(),u.m(t,n)):u&&(u.d(1),u=null),s[6]&&s[8]!==!1||s[8]?c?c.p(s,f):(c=l5(s),c.c(),c.m(t,null)):c&&(c.d(1),c=null),f&32&&ni(t,"disabled",s[5]),f&16&&ni(t,"hoverable",s[4]),f&4&&ni(t,"vertical",s[2]),f&8&&ni(t,"reversed",s[3]),f&8192&&ni(t,"focus",s[13])},i:Xn,o:Xn,d(s){s&&de(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function FI(e,t,r){let n,o,u,c,s,{range:f=!1}=t,{min:v=0}=t,{max:w=100}=t,{step:E=1}=t,{values:L=[(w+v)/2]}=t,{vertical:C=!1}=t,{reversed:F=!1}=t,{hoverable:B=!0}=t,{disabled:G=!1}=t,{pipstep:H=void 0}=t,{all:Z=!0}=t,{first:ee=void 0}=t,{last:Y=void 0}=t,{rest:le=void 0}=t,{prefix:ce=""}=t,{suffix:ve=""}=t,{formatter:pe=(mt,ht)=>mt}=t,{focus:Ne=void 0}=t,{orientationStart:Ve=void 0}=t,{percentOf:be=void 0}=t,{moveHandle:Ce=void 0}=t,{fixFloat:Oe=void 0}=t;function nt(mt){G||Ce(void 0,mt)}return e.$$set=mt=>{"range"in mt&&r(22,f=mt.range),"min"in mt&&r(0,v=mt.min),"max"in mt&&r(1,w=mt.max),"step"in mt&&r(23,E=mt.step),"values"in mt&&r(24,L=mt.values),"vertical"in mt&&r(2,C=mt.vertical),"reversed"in mt&&r(3,F=mt.reversed),"hoverable"in mt&&r(4,B=mt.hoverable),"disabled"in mt&&r(5,G=mt.disabled),"pipstep"in mt&&r(25,H=mt.pipstep),"all"in mt&&r(6,Z=mt.all),"first"in mt&&r(7,ee=mt.first),"last"in mt&&r(8,Y=mt.last),"rest"in mt&&r(9,le=mt.rest),"prefix"in mt&&r(10,ce=mt.prefix),"suffix"in mt&&r(11,ve=mt.suffix),"formatter"in mt&&r(12,pe=mt.formatter),"focus"in mt&&r(13,Ne=mt.focus),"orientationStart"in mt&&r(14,Ve=mt.orientationStart),"percentOf"in mt&&r(15,be=mt.percentOf),"moveHandle"in mt&&r(26,Ce=mt.moveHandle),"fixFloat"in mt&&r(16,Oe=mt.fixFloat)},e.$$.update=()=>{e.$$.dirty&41943047&&r(27,n=H||((w-v)/E>=(C?50:100)?(w-v)/(C?10:20):1)),e.$$.dirty&142606339&&r(20,o=parseInt((w-v)/(E*n),10)),e.$$.dirty&142671873&&r(19,u=function(mt){return Oe(v+mt*E*n)}),e.$$.dirty&16842752&&r(18,c=function(mt){return L.some(ht=>Oe(ht)===Oe(mt))}),e.$$.dirty&20971520&&r(17,s=function(mt){if(f==="min")return L[0]>mt;if(f==="max")return L[0]<mt;if(f)return L[0]<mt&&L[1]>mt})},[v,w,C,F,B,G,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Oe,s,c,u,o,nt,f,E,L,H,Ce,n]}class BI extends Pn{constructor(t){super(),Mn(this,t,FI,OI,Cn,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function h5(e,t,r){const n=e.slice();return n[64]=t[r],n[66]=r,n}function p5(e){let t,r=e[21](e[64],e[66],e[23](e[64]))+"",n,o=e[18]&&d5(e),u=e[19]&&m5(e);return{c(){t=ct("span"),o&&o.c(),n=Nn(r),u&&u.c(),this.h()},l(c){t=ft(c,"SPAN",{class:!0});var s=wt(t);o&&o.l(s),n=Rn(s,r),u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","rangeFloat")},m(c,s){It(c,t,s),o&&o.m(t,null),Qe(t,n),u&&u.m(t,null)},p(c,s){c[18]?o?o.p(c,s):(o=d5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),s[0]&10485761&&r!==(r=c[21](c[64],c[66],c[23](c[64]))+"")&&No(n,r),c[19]?u?u.p(c,s):(u=m5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&de(t),o&&o.d(),u&&u.d()}}}function d5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[18]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[18]),o.forEach(de),this.h()},h(){ye(t,"class","rangeFloat-prefix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o[0]&262144&&No(r,n[18])},d(n){n&&de(t)}}}function m5(e){let t,r;return{c(){t=ct("span"),r=Nn(e[19]),this.h()},l(n){t=ft(n,"SPAN",{class:!0});var o=wt(t);r=Rn(o,e[19]),o.forEach(de),this.h()},h(){ye(t,"class","rangeFloat-suffix")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o[0]&524288&&No(r,n[19])},d(n){n&&de(t)}}}function g5(e){let t,r,n,o,u,c,s,f,v,w,E,L,C=e[7]&&p5(e);return{c(){t=ct("span"),r=ct("span"),n=pr(),C&&C.c(),this.h()},l(F){t=ft(F,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var B=wt(t);r=ft(B,"SPAN",{class:!0}),wt(r).forEach(de),n=dr(B),C&&C.l(B),B.forEach(de),this.h()},h(){ye(r,"class","rangeNub"),ye(t,"role","slider"),ye(t,"class","rangeHandle"),ye(t,"data-handle",e[66]),ye(t,"style",o=e[28]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";"),ye(t,"aria-valuemin",u=e[2]===!0&&e[66]===1?e[0][0]:e[3]),ye(t,"aria-valuemax",c=e[2]===!0&&e[66]===0?e[0][1]:e[4]),ye(t,"aria-valuenow",s=e[64]),ye(t,"aria-valuetext",f=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19])),ye(t,"aria-orientation",v=e[6]?"vertical":"horizontal"),ye(t,"aria-disabled",e[10]),ye(t,"disabled",e[10]),ye(t,"tabindex",w=e[10]?-1:0),ni(t,"active",e[24]&&e[26]===e[66]),ni(t,"press",e[25]&&e[26]===e[66])},m(F,B){It(F,t,B),Qe(t,r),Qe(t,n),C&&C.m(t,null),E||(L=[Qr(t,"blur",e[34]),Qr(t,"focus",e[35]),Qr(t,"keydown",e[36])],E=!0)},p(F,B){F[7]?C?C.p(F,B):(C=p5(F),C.c(),C.m(t,null)):C&&(C.d(1),C=null),B[0]&872415232&&o!==(o=F[28]+": "+F[29][F[66]]+"%; z-index: "+(F[26]===F[66]?3:2)+";")&&ye(t,"style",o),B[0]&13&&u!==(u=F[2]===!0&&F[66]===1?F[0][0]:F[3])&&ye(t,"aria-valuemin",u),B[0]&21&&c!==(c=F[2]===!0&&F[66]===0?F[0][1]:F[4])&&ye(t,"aria-valuemax",c),B[0]&1&&s!==(s=F[64])&&ye(t,"aria-valuenow",s),B[0]&11272193&&f!==(f=""+(F[18]+F[21](F[64],F[66],F[23](F[64]))+F[19]))&&ye(t,"aria-valuetext",f),B[0]&64&&v!==(v=F[6]?"vertical":"horizontal")&&ye(t,"aria-orientation",v),B[0]&1024&&ye(t,"aria-disabled",F[10]),B[0]&1024&&ye(t,"disabled",F[10]),B[0]&1024&&w!==(w=F[10]?-1:0)&&ye(t,"tabindex",w),B[0]&83886080&&ni(t,"active",F[24]&&F[26]===F[66]),B[0]&100663296&&ni(t,"press",F[25]&&F[26]===F[66])},d(F){F&&de(t),C&&C.d(),E=!1,oa(L)}}}function y5(e){let t,r;return{c(){t=ct("span"),this.h()},l(n){t=ft(n,"SPAN",{class:!0,style:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"class","rangeBar"),ye(t,"style",r=e[28]+": "+e[32](e[29])+"%; "+e[27]+": "+e[33](e[29])+"%;")},m(n,o){It(n,t,o)},p(n,o){o[0]&939524096&&r!==(r=n[28]+": "+n[32](n[29])+"%; "+n[27]+": "+n[33](n[29])+"%;")&&ye(t,"style",r)},d(n){n&&de(t)}}}function v5(e){let t,r;return t=new BI({props:{values:e[0],min:e[3],max:e[4],step:e[5],range:e[2],vertical:e[6],reversed:e[8],orientationStart:e[28],hoverable:e[9],disabled:e[10],all:e[13],first:e[14],last:e[15],rest:e[16],pipstep:e[12],prefix:e[18],suffix:e[19],formatter:e[20],focus:e[24],percentOf:e[23],moveHandle:e[31],fixFloat:e[30]}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p(n,o){const u={};o[0]&1&&(u.values=n[0]),o[0]&8&&(u.min=n[3]),o[0]&16&&(u.max=n[4]),o[0]&32&&(u.step=n[5]),o[0]&4&&(u.range=n[2]),o[0]&64&&(u.vertical=n[6]),o[0]&256&&(u.reversed=n[8]),o[0]&268435456&&(u.orientationStart=n[28]),o[0]&512&&(u.hoverable=n[9]),o[0]&1024&&(u.disabled=n[10]),o[0]&8192&&(u.all=n[13]),o[0]&16384&&(u.first=n[14]),o[0]&32768&&(u.last=n[15]),o[0]&65536&&(u.rest=n[16]),o[0]&4096&&(u.pipstep=n[12]),o[0]&262144&&(u.prefix=n[18]),o[0]&524288&&(u.suffix=n[19]),o[0]&1048576&&(u.formatter=n[20]),o[0]&16777216&&(u.focus=n[24]),o[0]&8388608&&(u.percentOf=n[23]),t.$set(u)},i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function jI(e){let t,r,n,o,u,c,s=e[0],f=[];for(let E=0;E<s.length;E+=1)f[E]=g5(h5(e,s,E));let v=e[2]&&y5(e),w=e[11]&&v5(e);return{c(){t=ct("div");for(let E=0;E<f.length;E+=1)f[E].c();r=pr(),v&&v.c(),n=pr(),w&&w.c(),this.h()},l(E){t=ft(E,"DIV",{id:!0,class:!0});var L=wt(t);for(let C=0;C<f.length;C+=1)f[C].l(L);r=dr(L),v&&v.l(L),n=dr(L),w&&w.l(L),L.forEach(de),this.h()},h(){ye(t,"id",e[17]),ye(t,"class","rangeSlider"),ni(t,"range",e[2]),ni(t,"disabled",e[10]),ni(t,"hoverable",e[9]),ni(t,"vertical",e[6]),ni(t,"reversed",e[8]),ni(t,"focus",e[24]),ni(t,"min",e[2]==="min"),ni(t,"max",e[2]==="max"),ni(t,"pips",e[11]),ni(t,"pip-labels",e[13]==="label"||e[14]==="label"||e[15]==="label"||e[16]==="label")},m(E,L){It(E,t,L);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(t,null);Qe(t,r),v&&v.m(t,null),Qe(t,n),w&&w.m(t,null),e[50](t),o=!0,u||(c=[Qr(window,"mousedown",e[39]),Qr(window,"touchstart",e[39]),Qr(window,"mousemove",e[40]),Qr(window,"touchmove",e[40]),Qr(window,"mouseup",e[41]),Qr(window,"touchend",e[42]),Qr(window,"keydown",e[43]),Qr(t,"mousedown",e[37]),Qr(t,"mouseup",e[38]),Qr(t,"touchstart",Ul(e[37])),Qr(t,"touchend",Ul(e[38]))],u=!0)},p(E,L){if(L[0]&934020317|L[1]&56){s=E[0];let C;for(C=0;C<s.length;C+=1){const F=h5(E,s,C);f[C]?f[C].p(F,L):(f[C]=g5(F),f[C].c(),f[C].m(t,r))}for(;C<f.length;C+=1)f[C].d(1);f.length=s.length}E[2]?v?v.p(E,L):(v=y5(E),v.c(),v.m(t,n)):v&&(v.d(1),v=null),E[11]?w?(w.p(E,L),L[0]&2048&&Ze(w,1)):(w=v5(E),w.c(),Ze(w,1),w.m(t,null)):w&&(Ui(),at(w,1,1,()=>{w=null}),qi()),(!o||L[0]&131072)&&ye(t,"id",E[17]),(!o||L[0]&4)&&ni(t,"range",E[2]),(!o||L[0]&1024)&&ni(t,"disabled",E[10]),(!o||L[0]&512)&&ni(t,"hoverable",E[9]),(!o||L[0]&64)&&ni(t,"vertical",E[6]),(!o||L[0]&256)&&ni(t,"reversed",E[8]),(!o||L[0]&16777216)&&ni(t,"focus",E[24]),(!o||L[0]&4)&&ni(t,"min",E[2]==="min"),(!o||L[0]&4)&&ni(t,"max",E[2]==="max"),(!o||L[0]&2048)&&ni(t,"pips",E[11]),(!o||L[0]&122880)&&ni(t,"pip-labels",E[13]==="label"||E[14]==="label"||E[15]==="label"||E[16]==="label")},i(E){o||(Ze(w),o=!0)},o(E){at(w),o=!1},d(E){E&&de(t),ys(f,E),v&&v.d(),w&&w.d(),e[50](null),u=!1,oa(c)}}}function _5(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function Em(e){return e.type.includes("touch")?e.touches[0]:e}function UI(e,t,r){let n,o,u,c,s,f,v=Xn,w=()=>(v(),v=zA($t,fr=>r(29,f=fr)),$t);e.$$.on_destroy.push(()=>v());let{slider:E=void 0}=t,{range:L=!1}=t,{pushy:C=!1}=t,{min:F=0}=t,{max:B=100}=t,{step:G=1}=t,{values:H=[(B+F)/2]}=t,{vertical:Z=!1}=t,{float:ee=!1}=t,{reversed:Y=!1}=t,{hoverable:le=!0}=t,{disabled:ce=!1}=t,{pips:ve=!1}=t,{pipstep:pe=void 0}=t,{all:Ne=void 0}=t,{first:Ve=void 0}=t,{last:be=void 0}=t,{rest:Ce=void 0}=t,{id:Oe=void 0}=t,{prefix:nt=""}=t,{suffix:mt=""}=t,{formatter:ht=(fr,or,Yr)=>fr}=t,{handleFormatter:He=ht}=t,{precision:ut=2}=t,{springValues:bt={stiffness:.15,damping:.4}}=t;const Xe=gp();let We=0,ke=!1,Re=!1,Pe=!1,dt=!1,Et=H.length-1,Pt,Kt,$t;const br=fr=>parseFloat(fr.toFixed(ut));function Gt(fr){const or=E.querySelectorAll(".handle"),Yr=Array.prototype.includes.call(or,fr),un=Array.prototype.some.call(or,Or=>Or.contains(fr));return Yr||un}function Rr(fr){return L==="min"||L==="max"?fr.slice(0,1):L?fr.slice(0,2):fr}function Mr(){return E.getBoundingClientRect()}function Kr(fr){const or=Mr();let Yr=0,un=0,Or=0;Z?(Yr=fr.clientY-or.top,un=Yr/or.height*100,un=Y?un:100-un):(Yr=fr.clientX-or.left,un=Yr/or.width*100,un=Y?100-un:un),Or=(B-F)/100*un+F;let pn;return L===!0&&H[0]===H[1]?Or>H[1]?1:0:(pn=H.indexOf([...H].sort((Qn,ci)=>Math.abs(Or-Qn)-Math.abs(Or-ci))[0]),pn)}function Ct(fr){const or=Mr();let Yr=0,un=0,Or=0;Z?(Yr=fr.clientY-or.top,un=Yr/or.height*100,un=Y?un:100-un):(Yr=fr.clientX-or.left,un=Yr/or.width*100,un=Y?100-un:un),Or=(B-F)/100*un+F,pt(Et,Or)}function pt(fr,or){return or=u(or),typeof fr>"u"&&(fr=Et),L&&(fr===0&&or>H[1]?C?r(0,H[1]=or,H):or=H[1]:fr===1&&or<H[0]&&(C?r(0,H[0]=or,H):or=H[0])),H[fr]!==or&&r(0,H[fr]=or,H),Kt!==or&&(xn(),Kt=or),or}function Dr(fr){return L==="min"?0:fr[0]}function ln(fr){return L==="max"?0:L==="min"?100-fr[0]:100-fr[1]}function Wt(fr){dt&&(r(24,ke=!1),Re=!1,r(25,Pe=!1))}function Ur(fr){ce||(r(26,Et=_5(fr.target)),r(24,ke=!0))}function dn(fr){if(!ce){const or=_5(fr.target);let Yr=fr.ctrlKey||fr.metaKey||fr.shiftKey?G*10:G,un=!1;switch(fr.key){case"PageDown":Yr*=10;case"ArrowRight":case"ArrowUp":pt(or,H[or]+Yr),un=!0;break;case"PageUp":Yr*=10;case"ArrowLeft":case"ArrowDown":pt(or,H[or]-Yr),un=!0;break;case"Home":pt(or,F),un=!0;break;case"End":pt(or,B),un=!0;break}un&&(fr.preventDefault(),fr.stopPropagation())}}function tn(fr){if(!ce){const or=fr.target,Yr=Em(fr);r(24,ke=!0),Re=!0,r(25,Pe=!0),r(26,Et=Kr(Yr)),Pt=Kt=u(H[Et]),Vr(),fr.type==="touchstart"&&!or.matches(".pipVal")&&Ct(Yr)}}function Bn(fr){fr.type==="touchend"&&wi(),r(25,Pe=!1)}function Jn(fr){dt=!1,ke&&fr.target!==E&&!E.contains(fr.target)&&r(24,ke=!1)}function ai(fr){ce||Re&&Ct(Em(fr))}function _i(fr){if(!ce){const or=fr.target;Re&&((or===E||E.contains(or))&&(r(24,ke=!0),!Gt(or)&&!or.matches(".pipVal")&&Ct(Em(fr))),wi())}Re=!1,r(25,Pe=!1)}function hi(fr){Re=!1,r(25,Pe=!1)}function yr(fr){ce||(fr.target===E||E.contains(fr.target))&&(dt=!0)}function Vr(){!ce&&Xe("start",{activeHandle:Et,value:Pt,values:H.map(fr=>u(fr))})}function wi(){!ce&&Xe("stop",{activeHandle:Et,startValue:Pt,value:H[Et],values:H.map(fr=>u(fr))})}function xn(){!ce&&Xe("change",{activeHandle:Et,startValue:Pt,previousValue:typeof Kt>"u"?Pt:Kt,value:H[Et],values:H.map(fr=>u(fr))})}function si(fr){Ft[fr?"unshift":"push"](()=>{E=fr,r(1,E)})}return e.$$set=fr=>{"slider"in fr&&r(1,E=fr.slider),"range"in fr&&r(2,L=fr.range),"pushy"in fr&&r(44,C=fr.pushy),"min"in fr&&r(3,F=fr.min),"max"in fr&&r(4,B=fr.max),"step"in fr&&r(5,G=fr.step),"values"in fr&&r(0,H=fr.values),"vertical"in fr&&r(6,Z=fr.vertical),"float"in fr&&r(7,ee=fr.float),"reversed"in fr&&r(8,Y=fr.reversed),"hoverable"in fr&&r(9,le=fr.hoverable),"disabled"in fr&&r(10,ce=fr.disabled),"pips"in fr&&r(11,ve=fr.pips),"pipstep"in fr&&r(12,pe=fr.pipstep),"all"in fr&&r(13,Ne=fr.all),"first"in fr&&r(14,Ve=fr.first),"last"in fr&&r(15,be=fr.last),"rest"in fr&&r(16,Ce=fr.rest),"id"in fr&&r(17,Oe=fr.id),"prefix"in fr&&r(18,nt=fr.prefix),"suffix"in fr&&r(19,mt=fr.suffix),"formatter"in fr&&r(20,ht=fr.formatter),"handleFormatter"in fr&&r(21,He=fr.handleFormatter),"precision"in fr&&r(45,ut=fr.precision),"springValues"in fr&&r(46,bt=fr.springValues)},e.$$.update=()=>{e.$$.dirty[0]&24&&r(49,o=function(fr){return fr<=F?F:fr>=B?B:fr}),e.$$.dirty[0]&56|e.$$.dirty[1]&262144&&r(48,u=function(fr){if(fr<=F)return br(F);if(fr>=B)return br(B);let or=(fr-F)%G,Yr=fr-or;return Math.abs(or)*2>=G&&(Yr+=or>0?G:-G),Yr=o(Yr),br(Yr)}),e.$$.dirty[0]&24&&r(23,n=function(fr){let or=(fr-F)/(B-F)*100;return isNaN(or)||or<=0?0:or>=100?100:br(or)}),e.$$.dirty[0]&12582937|e.$$.dirty[1]&229376&&(Array.isArray(H)||(r(0,H=[(B+F)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),r(0,H=Rr(H.map(fr=>u(fr)))),We!==H.length?w(r(22,$t=RI(H.map(fr=>n(fr)),bt))):$t.set(H.map(fr=>n(fr))),r(47,We=H.length)),e.$$.dirty[0]&320&&r(28,c=Z?Y?"top":"bottom":Y?"right":"left"),e.$$.dirty[0]&320&&r(27,s=Z?Y?"bottom":"top":Y?"left":"right")},[H,E,L,F,B,G,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,$t,n,ke,Pe,Et,s,c,f,br,pt,Dr,ln,Wt,Ur,dn,tn,Bn,Jn,ai,_i,hi,yr,C,ut,bt,We,u,o,si]}class qI extends Pn{constructor(t){super(),Mn(this,t,UI,jI,Cn,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function VI(e){let t,r,n,o,u,c,s;function f(C){e[6](C)}function v(C){e[7](C)}function w(C){e[8](C)}function E(C){e[9](C)}let L={float:!0,pips:!0,first:"label",last:"label",rest:!1,suffix:e[3]};return e[4]!==void 0&&(L.values=e[4]),e[0]!==void 0&&(L.min=e[0]),e[1]!==void 0&&(L.max=e[1]),e[2]!==void 0&&(L.step=e[2]),r=new qI({props:L}),Ft.push(()=>Jt(r,"values",f)),Ft.push(()=>Jt(r,"min",v)),Ft.push(()=>Jt(r,"max",w)),Ft.push(()=>Jt(r,"step",E)),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(C){t=ft(C,"DIV",{class:!0});var F=wt(t);Yt(r.$$.fragment,F),F.forEach(de),this.h()},h(){ye(t,"class","range-slider svelte-1k93vzh")},m(C,F){It(C,t,F),jt(r,t,null),s=!0},p(C,[F]){const B={};F&8&&(B.suffix=C[3]),!n&&F&16&&(n=!0,B.values=C[4],er(()=>n=!1)),!o&&F&1&&(o=!0,B.min=C[0],er(()=>o=!1)),!u&&F&2&&(u=!0,B.max=C[1],er(()=>u=!1)),!c&&F&4&&(c=!0,B.step=C[2],er(()=>c=!1)),r.$set(B)},i(C){s||(Ze(r.$$.fragment,C),s=!0)},o(C){at(r.$$.fragment,C),s=!1},d(C){C&&de(t),Ut(r)}}}function $I(e,t,r){let{value:n}=t,{min:o}=t,{max:u}=t,{unit:c}=t,{step:s=1}=t,f=c==="%"?[n*100]:[n];const v=()=>{c==="%"?r(5,n=f[0]/100):r(5,n=f[0])};function w(F){f=F,r(4,f)}function E(F){o=F,r(0,o)}function L(F){u=F,r(1,u)}function C(F){s=F,r(2,s)}return e.$$set=F=>{"value"in F&&r(5,n=F.value),"min"in F&&r(0,o=F.min),"max"in F&&r(1,u=F.max),"unit"in F&&r(3,c=F.unit),"step"in F&&r(2,s=F.step)},e.$$.update=()=>{e.$$.dirty&16&&v()},[o,u,s,c,f,n,w,E,L,C]}let ns=class extends Pn{constructor(t){super(),Mn(this,t,$I,VI,Cn,{value:5,min:0,max:1,unit:3,step:2})}};function GI(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"%"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function HI(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{const v=n==null?void 0:n.getStyle().layers.find(E=>E.id===o.id);let w;switch(v==null?void 0:v.type){case"background":w=n.getPaintProperty(o.id,"background-opacity");break;case"raster":w=n.getPaintProperty(o.id,"raster-opacity");break;case"symbol":w=n.getPaintProperty(o.id,"icon-opacity");break;case"line":w=n.getPaintProperty(o.id,"line-opacity");break;case"fill":w=n.getPaintProperty(o.id,"fill-opacity");break;case"circle":w=n.getPaintProperty(o.id,"circle-opacity");break;case"heatmap":w=n.getPaintProperty(o.id,"heatmap-opacity");break;case"fill-extrusion":w=n.getPaintProperty(o.id,"fill-extrusion-opacity");break}return w||(w=1),w})();const s=mv(()=>{if(!c)return;const v=n==null?void 0:n.getStyle().layers.find(w=>w.id===o.id);switch(v==null?void 0:v.type){case"background":n.setPaintProperty(o.id,"background-opacity",c);break;case"raster":n.setPaintProperty(o.id,"raster-opacity",c);break;case"symbol":n.setPaintProperty(o.id,"icon-opacity",c),n.setPaintProperty(o.id,"text-opacity",c);break;case"line":n.setPaintProperty(o.id,"line-opacity",c);break;case"fill":n.setPaintProperty(o.id,"fill-opacity",c);break;case"circle":n.setPaintProperty(o.id,"circle-opacity",c);break;case"heatmap":n.setPaintProperty(o.id,"heatmap-opacity",c);break;case"fill-extrusion":n.setPaintProperty(o.id,"fill-extrusion-opacity",c);break}},100);function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class Uf extends Pn{constructor(t){super(),Mn(this,t,HI,GI,Cn,{map:1,layer:2})}}var WI={grad:.9,turn:360,rad:360/(2*Math.PI)},ef=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},gl=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Wc=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},Q6=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},b5=function(e){return{r:Wc(e.r,0,255),g:Wc(e.g,0,255),b:Wc(e.b,0,255),a:Wc(e.a)}},Sm=function(e){return{r:gl(e.r),g:gl(e.g),b:gl(e.b),a:gl(e.a,3)}},ZI=/^#([0-9a-f]{3,8})$/i,s1=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},e8=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,u=Math.max(t,r,n),c=u-Math.min(t,r,n),s=c?u===t?(r-n)/c:u===r?2+(n-t)/c:4+(t-r)/c:0;return{h:60*(s<0?s+6:s),s:u?c/u*100:0,v:u/255*100,a:o}},t8=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var u=Math.floor(t),c=n*(1-r),s=n*(1-(t-u)*r),f=n*(1-(1-t+u)*r),v=u%6;return{r:255*[n,s,c,c,f,n][v],g:255*[f,n,n,s,c,c][v],b:255*[c,c,f,n,n,s][v],a:o}},w5=function(e){return{h:Q6(e.h),s:Wc(e.s,0,100),l:Wc(e.l,0,100),a:Wc(e.a)}},x5=function(e){return{h:gl(e.h),s:gl(e.s),l:gl(e.l),a:gl(e.a,3)}},k5=function(e){return t8((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},Xp=function(e){return{h:(t=e8(e)).h,s:(o=(200-(r=t.s))*(n=t.v)/100)>0&&o<200?r*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,r,n,o},XI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ey={string:[[function(e){var t=ZI.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?gl(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?gl(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=JI.exec(e)||KI.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:b5({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=XI.exec(e)||YI.exec(e);if(!t)return null;var r,n,o=w5({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(WI[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return k5(o)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,o=e.a,u=o===void 0?1:o;return ef(t)&&ef(r)&&ef(n)?b5({r:Number(t),g:Number(r),b:Number(n),a:Number(u)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,o=e.a,u=o===void 0?1:o;if(!ef(t)||!ef(r)||!ef(n))return null;var c=w5({h:Number(t),s:Number(r),l:Number(n),a:Number(u)});return k5(c)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,o=e.a,u=o===void 0?1:o;if(!ef(t)||!ef(r)||!ef(n))return null;var c=function(s){return{h:Q6(s.h),s:Wc(s.s,0,100),v:Wc(s.v,0,100),a:Wc(s.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(u)});return t8(c)},"hsv"]]},A5=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},QI=function(e){return typeof e=="string"?A5(e.trim(),ey.string):typeof e=="object"&&e!==null?A5(e,ey.object):[null,void 0]},Cm=function(e,t){var r=Xp(e);return{h:r.h,s:Wc(r.s+100*t,0,100),l:r.l,a:r.a}},Im=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},E5=function(e,t){var r=Xp(e);return{h:r.h,s:r.s,l:Wc(r.l+100*t,0,100),a:r.a}},ty=function(){function e(t){this.parsed=QI(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return gl(Im(this.rgba),2)},e.prototype.isDark=function(){return Im(this.rgba)<.5},e.prototype.isLight=function(){return Im(this.rgba)>=.5},e.prototype.toHex=function(){return t=Sm(this.rgba),r=t.r,n=t.g,o=t.b,c=(u=t.a)<1?s1(gl(255*u)):"","#"+s1(r)+s1(n)+s1(o)+c;var t,r,n,o,u,c},e.prototype.toRgb=function(){return Sm(this.rgba)},e.prototype.toRgbString=function(){return t=Sm(this.rgba),r=t.r,n=t.g,o=t.b,(u=t.a)<1?"rgba("+r+", "+n+", "+o+", "+u+")":"rgb("+r+", "+n+", "+o+")";var t,r,n,o,u},e.prototype.toHsl=function(){return x5(Xp(this.rgba))},e.prototype.toHslString=function(){return t=x5(Xp(this.rgba)),r=t.h,n=t.s,o=t.l,(u=t.a)<1?"hsla("+r+", "+n+"%, "+o+"%, "+u+")":"hsl("+r+", "+n+"%, "+o+"%)";var t,r,n,o,u},e.prototype.toHsv=function(){return t=e8(this.rgba),{h:gl(t.h),s:gl(t.s),v:gl(t.v),a:gl(t.a,3)};var t},e.prototype.invert=function(){return zu({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),zu(Cm(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),zu(Cm(this.rgba,-t))},e.prototype.grayscale=function(){return zu(Cm(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),zu(E5(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),zu(E5(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?zu({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):gl(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=Xp(this.rgba);return typeof t=="number"?zu({h:t,s:r.s,l:r.l,a:r.a}):gl(r.h)},e.prototype.isEqual=function(t){return this.toHex()===zu(t).toHex()},e}(),zu=function(e){return e instanceof ty?e:new ty(e)},S5=[],eL=function(e){e.forEach(function(t){S5.indexOf(t)<0&&(t(ty,ey),S5.push(t))})},Lm=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Tm=function(e){return .2126*Lm(e.r)+.7152*Lm(e.g)+.0722*Lm(e.b)};function tL(e){e.prototype.luminance=function(){return t=Tm(this.rgba),(r=2)===void 0&&(r=0),n===void 0&&(n=Math.pow(10,r)),Math.round(n*t)/n+0;var t,r,n},e.prototype.contrast=function(t){t===void 0&&(t="#FFF");var r,n,o,u,c,s,f,v=t instanceof e?t:new e(t);return u=this.rgba,c=v.toRgb(),s=Tm(u),f=Tm(c),r=s>f?(s+.05)/(f+.05):(f+.05)/(s+.05),(n=2)===void 0&&(n=0),o===void 0&&(o=Math.pow(10,n)),Math.floor(o*r)/o+0},e.prototype.isReadable=function(t,r){return t===void 0&&(t="#FFF"),r===void 0&&(r={}),this.contrast(t)>=(s=(c=(n=r).size)===void 0?"normal":c,(u=(o=n.level)===void 0?"AA":o)==="AAA"&&s==="normal"?7:u==="AA"&&s==="large"?3:4.5);var n,o,u,c,s}}const lf=df({ArrowLeft:0,ArrowUp:0,ArrowRight:0,ArrowDown:0}),gv=FA(lf,e=>({...e,ArrowV:e.ArrowUp+e.ArrowDown,ArrowH:e.ArrowLeft+e.ArrowRight,ArrowVH:e.ArrowUp+e.ArrowDown+e.ArrowLeft+e.ArrowRight}));function yv(e,t=.001,r=.01){const u=Math.min(1,Math.max(1,e-50)/50);return t+(r-t)/2*(1-Math.cos(Math.PI*u))}const{window:Rp}=Py;function rL(e){let t,r,n,o,u,c;var s=e[2].pickerIndicator;function f(v){return{props:{pos:v[9],isDark:v[5],hex:zu({h:v[3],s:v[0],v:v[1],a:1}).toHex()}}}return s&&(r=rs(s,f(e))),{c(){t=ct("div"),r&&Bt(r.$$.fragment),this.h()},l(v){t=ft(v,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var w=wt(t);r&&Yt(r.$$.fragment,w),w.forEach(de),this.h()},h(){var v,w;ye(t,"class","picker svelte-uiwgvv"),ye(t,"tabindex","0"),zo(t,"--color-bg",e[8]),ye(t,"aria-label","saturation and brightness picker (arrow keyboard navigation)"),ye(t,"aria-valuemin",0),ye(t,"aria-valuemax",100),ye(t,"aria-valuetext",n="saturation "+((v=e[9].x)==null?void 0:v.toFixed())+"%, brightness "+((w=e[9].y)==null?void 0:w.toFixed())+"%")},m(v,w){It(v,t,w),r&&jt(r,t,null),e[18](t),o=!0,u||(c=[Qr(t,"mousedown",ip(Ul(e[10]))),Qr(t,"touchstart",e[16]),Qr(t,"touchmove",ip(Ul(e[16]))),Qr(t,"touchend",e[16])],u=!0)},p(v,w){var L,C;const E={};if(w&512&&(E.pos=v[9]),w&32&&(E.isDark=v[5]),w&11&&(E.hex=zu({h:v[3],s:v[0],v:v[1],a:1}).toHex()),w&4&&s!==(s=v[2].pickerIndicator)){if(r){Ui();const F=r;at(F.$$.fragment,1,0,()=>{Ut(F,1)}),qi()}s?(r=rs(s,f(v)),Bt(r.$$.fragment),Ze(r.$$.fragment,1),jt(r,t,null)):r=null}else s&&r.$set(E);(!o||w&256)&&zo(t,"--color-bg",v[8]),(!o||w&512&&n!==(n="saturation "+((L=v[9].x)==null?void 0:L.toFixed())+"%, brightness "+((C=v[9].y)==null?void 0:C.toFixed())+"%"))&&ye(t,"aria-valuetext",n)},i(v){o||(r&&Ze(r.$$.fragment,v),o=!0)},o(v){r&&at(r.$$.fragment,v),o=!1},d(v){v&&de(t),r&&Ut(r),e[18](null),u=!1,oa(c)}}}function nL(e){let t,r,n,o,u;var c=e[2].pickerWrapper;function s(f){return{props:{focused:f[7],toRight:f[4],$$slots:{default:[rL]},$$scope:{ctx:f}}}}return c&&(t=rs(c,s(e))),{c(){t&&Bt(t.$$.fragment),r=Xi()},l(f){t&&Yt(t.$$.fragment,f),r=Xi()},m(f,v){t&&jt(t,f,v),It(f,r,v),n=!0,o||(u=[Qr(Rp,"mouseup",e[11]),Qr(Rp,"mousedown",e[13]),Qr(Rp,"mousemove",e[12]),Qr(Rp,"keyup",e[14]),Qr(Rp,"keydown",e[15])],o=!0)},p(f,[v]){const w={};if(v&128&&(w.focused=f[7]),v&16&&(w.toRight=f[4]),v&67109743&&(w.$$scope={dirty:v,ctx:f}),v&4&&c!==(c=f[2].pickerWrapper)){if(t){Ui();const E=t;at(E.$$.fragment,1,0,()=>{Ut(E,1)}),qi()}c?(t=rs(c,s(f)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(f){n||(t&&Ze(t.$$.fragment,f),n=!0)},o(f){t&&at(t.$$.fragment,f),n=!1},d(f){f&&de(r),t&&Ut(t,f),o=!1,oa(u)}}}function C5(e,t,r){return Math.min(Math.max(t,e),r)}function iL(e,t,r){let n,o;vl(e,lf,Oe=>r(22,n=Oe)),vl(e,gv,Oe=>r(23,o=Oe));let{components:u}=t,{h:c}=t,{s}=t,{v:f}=t,{isOpen:v}=t,{toRight:w}=t,{isDark:E}=t,L,C=!1,F=!1,B,G,H,Z={x:100,y:0};function ee(Oe){let nt={x:Oe.offsetX,y:Oe.offsetY},mt=L.getBoundingClientRect().width,ht=L.getBoundingClientRect().height;r(0,s=C5(nt.x/mt,0,1)*100),r(1,f=C5((ht-nt.y)/ht,0,1)*100)}function Y(Oe){Oe.button===0&&(C=!0,ee(Oe))}function le(){C=!1}function ce(Oe){C&&ee({offsetX:Math.max(0,Math.min(L.getBoundingClientRect().width,Oe.clientX-L.getBoundingClientRect().left)),offsetY:Math.max(0,Math.min(L.getBoundingClientRect().height,Oe.clientY-L.getBoundingClientRect().top))})}function ve(Oe){Oe.target.isSameNode(L)||r(7,F=!1)}function pe(Oe){var nt;Oe.key==="Tab"&&r(7,F=!!((nt=document.activeElement)!=null&&nt.isSameNode(L))),!Oe.repeat&&F&&Ve()}function Ne(Oe){F&&o.ArrowVH&&(Oe.preventDefault(),Oe.repeat||Ve())}function Ve(){o.ArrowVH?B||(G=0,B=window.setInterval(()=>{let Oe=yv(++G);r(0,s=Math.min(100,Math.max(0,s+(n.ArrowRight-n.ArrowLeft)*Oe*100))),r(1,f=Math.min(100,Math.max(0,f+(n.ArrowUp-n.ArrowDown)*Oe*100)))},10)):B&&(clearInterval(B),B=void 0)}function be(Oe){Oe.preventDefault(),ee({offsetX:Oe.changedTouches[0].clientX-L.getBoundingClientRect().left,offsetY:Oe.changedTouches[0].clientY-L.getBoundingClientRect().top})}function Ce(Oe){Ft[Oe?"unshift":"push"](()=>{L=Oe,r(6,L)})}return e.$$set=Oe=>{"components"in Oe&&r(2,u=Oe.components),"h"in Oe&&r(3,c=Oe.h),"s"in Oe&&r(0,s=Oe.s),"v"in Oe&&r(1,f=Oe.v),"isOpen"in Oe&&r(17,v=Oe.isOpen),"toRight"in Oe&&r(4,w=Oe.toRight),"isDark"in Oe&&r(5,E=Oe.isDark)},e.$$.update=()=>{e.$$.dirty&8&&typeof c=="number"&&r(8,H=zu({h:c,s:100,v:100,a:1}).toHex()),e.$$.dirty&67&&typeof s=="number"&&typeof f=="number"&&L&&r(9,Z={x:s,y:100-f})},[s,f,u,c,w,E,L,F,H,Z,Y,le,ce,ve,pe,Ne,be,v,Ce]}class oL extends Pn{constructor(t){super(),Mn(this,t,iL,nL,Cn,{components:2,h:3,s:0,v:1,isOpen:17,toRight:4,isDark:5})}}const{window:l1}=Py;function aL(e){let t,r,n,o,u,c;var s=e[1].sliderIndicator;function f(v){return{props:{pos:v[4],toRight:v[2]}}}return s&&(r=rs(s,f(e))),{c(){t=ct("div"),r&&Bt(r.$$.fragment),this.h()},l(v){t=ft(v,"DIV",{class:!0,tabindex:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0});var w=wt(t);r&&Yt(r.$$.fragment,w),w.forEach(de),this.h()},h(){ye(t,"class","slider svelte-14nweqy"),ye(t,"tabindex","0"),ye(t,"aria-label","hue picker (arrow keyboard navigation)"),ye(t,"aria-valuemin",0),ye(t,"aria-valuemax",360),ye(t,"aria-valuenow",n=Math.round(e[0])),ni(t,"to-right",e[2])},m(v,w){It(v,t,w),r&&jt(r,t,null),e[12](t),o=!0,u||(c=[Qr(t,"mousedown",ip(Ul(e[6]))),Qr(t,"touchstart",e[11]),Qr(t,"touchmove",ip(Ul(e[11]))),Qr(t,"touchend",e[11])],u=!0)},p(v,w){const E={};if(w&16&&(E.pos=v[4]),w&4&&(E.toRight=v[2]),w&2&&s!==(s=v[1].sliderIndicator)){if(r){Ui();const L=r;at(L.$$.fragment,1,0,()=>{Ut(L,1)}),qi()}s?(r=rs(s,f(v)),Bt(r.$$.fragment),Ze(r.$$.fragment,1),jt(r,t,null)):r=null}else s&&r.$set(E);(!o||w&1&&n!==(n=Math.round(v[0])))&&ye(t,"aria-valuenow",n),(!o||w&4)&&ni(t,"to-right",v[2])},i(v){o||(r&&Ze(r.$$.fragment,v),o=!0)},o(v){r&&at(r.$$.fragment,v),o=!1},d(v){v&&de(t),r&&Ut(r),e[12](null),u=!1,oa(c)}}}function sL(e){let t,r,n,o,u;var c=e[1].sliderWrapper;function s(f){return{props:{focused:f[5],toRight:f[2],$$slots:{default:[aL]},$$scope:{ctx:f}}}}return c&&(t=rs(c,s(e))),{c(){t&&Bt(t.$$.fragment),r=Xi()},l(f){t&&Yt(t.$$.fragment,f),r=Xi()},m(f,v){t&&jt(t,f,v),It(f,r,v),n=!0,o||(u=[Qr(l1,"mouseup",e[7]),Qr(l1,"mousemove",e[8]),Qr(l1,"keyup",e[9]),Qr(l1,"keydown",e[10])],o=!0)},p(f,[v]){const w={};if(v&32&&(w.focused=f[5]),v&4&&(w.toRight=f[2]),v&1048607&&(w.$$scope={dirty:v,ctx:f}),v&2&&c!==(c=f[1].sliderWrapper)){if(t){Ui();const E=t;at(E.$$.fragment,1,0,()=>{Ut(E,1)}),qi()}c?(t=rs(c,s(f)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(f){n||(t&&Ze(t.$$.fragment,f),n=!0)},o(f){t&&at(t.$$.fragment,f),n=!1},d(f){f&&de(r),t&&Ut(t,f),o=!1,oa(u)}}}function lL(e,t,r){let n,o;vl(e,lf,ve=>r(16,n=ve)),vl(e,gv,ve=>r(17,o=ve));let{components:u}=t,{toRight:c}=t,s,f=!1,{h:v}=t,w=0,E=!1,L,C;function F(ve){const pe=c?s.getBoundingClientRect().width:s.getBoundingClientRect().height,Ne=Math.max(0,Math.min(pe,ve));r(0,v=Ne/pe*360)}function B(ve){ve.button===0&&(f=!0,F(c?ve.offsetX:ve.offsetY))}function G(){f=!1}function H(ve){f&&F(c?ve.clientX-s.getBoundingClientRect().left:ve.clientY-s.getBoundingClientRect().top)}function Z(ve){var pe;ve.key==="Tab"&&r(5,E=!!((pe=document.activeElement)!=null&&pe.isSameNode(s))),!ve.repeat&&E&&Y()}function ee(ve){E&&o.ArrowVH&&(ve.preventDefault(),ve.repeat||Y())}function Y(){o.ArrowVH?L||(C=0,L=window.setInterval(()=>{const ve=yv(++C),pe=c?n.ArrowRight-n.ArrowLeft:n.ArrowDown-n.ArrowUp;r(0,v=Math.min(360,Math.max(0,v+pe*360*ve)))},10)):L&&(clearInterval(L),L=void 0)}function le(ve){ve.preventDefault(),F(c?ve.changedTouches[0].clientX-s.getBoundingClientRect().left:ve.changedTouches[0].clientY-s.getBoundingClientRect().top)}function ce(ve){Ft[ve?"unshift":"push"](()=>{s=ve,r(3,s)})}return e.$$set=ve=>{"components"in ve&&r(1,u=ve.components),"toRight"in ve&&r(2,c=ve.toRight),"h"in ve&&r(0,v=ve.h)},e.$$.update=()=>{e.$$.dirty&9&&typeof v=="number"&&s&&r(4,w=100*v/360)},[v,u,c,s,w,E,B,G,H,Z,ee,le,ce]}class uL extends Pn{constructor(t){super(),Mn(this,t,lL,sL,Cn,{components:1,toRight:2,h:0})}}const{window:u1}=Py;function cL(e){let t,r,n,o,u,c,s;var f=e[0].alphaIndicator;function v(w){return{props:{pos:w[5],toRight:w[2]}}}return f&&(r=rs(f,v(e))),{c(){t=ct("div"),r&&Bt(r.$$.fragment),this.h()},l(w){t=ft(w,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0});var E=wt(t);r&&Yt(r.$$.fragment,E),E.forEach(de),this.h()},h(){var w,E;ye(t,"class","alpha svelte-f2vq53"),ye(t,"tabindex","0"),zo(t,"--alpha-color",(w=e[1])==null?void 0:w.substring(0,7)),ye(t,"aria-label","transparency picker (arrow keyboard navigation)"),ye(t,"aria-valuemin",0),ye(t,"aria-valuemax",100),ye(t,"aria-valuenow",n=Math.round(e[5])),ye(t,"aria-valuetext",o=((E=e[5])==null?void 0:E.toFixed())+"%"),ni(t,"to-right",e[2])},m(w,E){It(w,t,E),r&&jt(r,t,null),e[14](t),u=!0,c||(s=[Qr(t,"mousedown",ip(Ul(e[6]))),Qr(t,"touchstart",e[11]),Qr(t,"touchmove",ip(Ul(e[11]))),Qr(t,"touchend",e[11])],c=!0)},p(w,E){var C,F;const L={};if(E&32&&(L.pos=w[5]),E&4&&(L.toRight=w[2]),E&1&&f!==(f=w[0].alphaIndicator)){if(r){Ui();const B=r;at(B.$$.fragment,1,0,()=>{Ut(B,1)}),qi()}f?(r=rs(f,v(w)),Bt(r.$$.fragment),Ze(r.$$.fragment,1),jt(r,t,null)):r=null}else f&&r.$set(L);(!u||E&2)&&zo(t,"--alpha-color",(C=w[1])==null?void 0:C.substring(0,7)),(!u||E&32&&n!==(n=Math.round(w[5])))&&ye(t,"aria-valuenow",n),(!u||E&32&&o!==(o=((F=w[5])==null?void 0:F.toFixed())+"%"))&&ye(t,"aria-valuetext",o),(!u||E&4)&&ni(t,"to-right",w[2])},i(w){u||(r&&Ze(r.$$.fragment,w),u=!0)},o(w){r&&at(r.$$.fragment,w),u=!1},d(w){w&&de(t),r&&Ut(r),e[14](null),c=!1,oa(s)}}}function fL(e){let t,r,n,o,u;var c=e[0].alphaWrapper;function s(f){return{props:{focused:f[4],toRight:f[2],$$slots:{default:[cL]},$$scope:{ctx:f}}}}return c&&(t=rs(c,s(e))),{c(){t&&Bt(t.$$.fragment),r=Xi()},l(f){t&&Yt(t.$$.fragment,f),r=Xi()},m(f,v){t&&jt(t,f,v),It(f,r,v),n=!0,o||(u=[Qr(u1,"mouseup",e[7]),Qr(u1,"mousemove",e[8]),Qr(u1,"keyup",e[9]),Qr(u1,"keydown",e[10])],o=!0)},p(f,[v]){const w={};if(v&16&&(w.focused=f[4]),v&4&&(w.toRight=f[2]),v&4194351&&(w.$$scope={dirty:v,ctx:f}),v&1&&c!==(c=f[0].alphaWrapper)){if(t){Ui();const E=t;at(E.$$.fragment,1,0,()=>{Ut(E,1)}),qi()}c?(t=rs(c,s(f)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(f){n||(t&&Ze(t.$$.fragment,f),n=!0)},o(f){t&&at(t.$$.fragment,f),n=!1},d(f){f&&de(r),t&&Ut(t,f),o=!1,oa(u)}}}function hL(e,t,r){let n,o;vl(e,lf,Ne=>r(18,n=Ne)),vl(e,gv,Ne=>r(19,o=Ne));let{components:u}=t,{isOpen:c}=t,{a:s=1}=t,{hex:f}=t,{toRight:v}=t,w,E=!1,L=!1,C,F,B;function G(Ne){const Ve=v?w.getBoundingClientRect().width:w.getBoundingClientRect().height,be=Math.max(0,Math.min(Ve,Ne));r(12,s=be/Ve)}function H(Ne){Ne.button===0&&(E=!0,G(v?Ne.offsetX:Ne.offsetY))}function Z(){E=!1}function ee(Ne){E&&G(v?Ne.clientX-w.getBoundingClientRect().left:Ne.clientY-w.getBoundingClientRect().top)}function Y(Ne){var Ve;Ne.key==="Tab"&&r(4,L=!!((Ve=document.activeElement)!=null&&Ve.isSameNode(w))),!Ne.repeat&&L&&ce()}function le(Ne){L&&o.ArrowVH&&(Ne.preventDefault(),Ne.repeat||ce())}function ce(){o.ArrowVH?C||(F=0,C=window.setInterval(()=>{const Ne=yv(++F),Ve=v?n.ArrowRight-n.ArrowLeft:n.ArrowDown-n.ArrowUp;r(12,s=Math.min(1,Math.max(0,s+Ve*Ne)))},10)):C&&(clearInterval(C),C=void 0)}function ve(Ne){Ne.preventDefault(),G(v?Ne.changedTouches[0].clientX-w.getBoundingClientRect().left:Ne.changedTouches[0].clientY-w.getBoundingClientRect().top)}function pe(Ne){Ft[Ne?"unshift":"push"](()=>{w=Ne,r(3,w)})}return e.$$set=Ne=>{"components"in Ne&&r(0,u=Ne.components),"isOpen"in Ne&&r(13,c=Ne.isOpen),"a"in Ne&&r(12,s=Ne.a),"hex"in Ne&&r(1,f=Ne.hex),"toRight"in Ne&&r(2,v=Ne.toRight)},e.$$.update=()=>{e.$$.dirty&4104&&typeof s=="number"&&w&&r(5,B=100*s)},[u,f,v,w,L,B,H,Z,ee,Y,le,ve,s,c,pe]}class pL extends Pn{constructor(t){super(),Mn(this,t,hL,fL,Cn,{components:0,isOpen:13,a:12,hex:1,toRight:2})}}function dL(e){let t,r,n,o,u,c,s,f,v,w=e[2]&&I5(e);return{c(){t=ct("div"),r=ct("input"),n=pr(),o=ct("input"),u=pr(),c=ct("input"),s=pr(),w&&w.c(),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);r=ft(L,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),n=dr(L),o=ft(L,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),u=dr(L),c=ft(L,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),s=dr(L),w&&w.l(L),L.forEach(de),this.h()},h(){ye(r,"aria-label","hue chanel color"),r.value=e[8],ye(r,"type","number"),ye(r,"min","0"),ye(r,"max","360"),ye(r,"class","svelte-11z4jba"),ye(o,"aria-label","saturation chanel color"),o.value=e[7],ye(o,"type","number"),ye(o,"min","0"),ye(o,"max","100"),ye(o,"class","svelte-11z4jba"),ye(c,"aria-label","brightness chanel color"),c.value=e[6],ye(c,"type","number"),ye(c,"min","0"),ye(c,"max","100"),ye(c,"class","svelte-11z4jba"),ye(t,"class","input-container svelte-11z4jba")},m(E,L){It(E,t,L),Qe(t,r),Qe(t,n),Qe(t,o),Qe(t,u),Qe(t,c),Qe(t,s),w&&w.m(t,null),f||(v=[Qr(r,"input",e[12]("h")),Qr(o,"input",e[12]("s")),Qr(c,"input",e[12]("v"))],f=!0)},p(E,L){L&256&&r.value!==E[8]&&(r.value=E[8]),L&128&&o.value!==E[7]&&(o.value=E[7]),L&64&&c.value!==E[6]&&(c.value=E[6]),E[2]?w?w.p(E,L):(w=I5(E),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(E){E&&de(t),w&&w.d(),f=!1,oa(v)}}}function mL(e){let t,r,n,o,u,c,s,f,v,w,E,L,C=e[2]&&L5(e);return{c(){t=ct("div"),r=ct("input"),o=pr(),u=ct("input"),s=pr(),f=ct("input"),w=pr(),C&&C.c(),this.h()},l(F){t=ft(F,"DIV",{class:!0});var B=wt(t);r=ft(B,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),o=dr(B),u=ft(B,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),s=dr(B),f=ft(B,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),w=dr(B),C&&C.l(B),B.forEach(de),this.h()},h(){ye(r,"aria-label","red chanel color"),r.value=n=e[0].r,ye(r,"type","number"),ye(r,"min","0"),ye(r,"max","255"),ye(r,"class","svelte-11z4jba"),ye(u,"aria-label","green chanel color"),u.value=c=e[0].g,ye(u,"type","number"),ye(u,"min","0"),ye(u,"max","255"),ye(u,"class","svelte-11z4jba"),ye(f,"aria-label","blue chanel color"),f.value=v=e[0].b,ye(f,"type","number"),ye(f,"min","0"),ye(f,"max","255"),ye(f,"class","svelte-11z4jba"),ye(t,"class","input-container svelte-11z4jba")},m(F,B){It(F,t,B),Qe(t,r),Qe(t,o),Qe(t,u),Qe(t,s),Qe(t,f),Qe(t,w),C&&C.m(t,null),E||(L=[Qr(r,"input",e[11]("r")),Qr(u,"input",e[11]("g")),Qr(f,"input",e[11]("b"))],E=!0)},p(F,B){B&1&&n!==(n=F[0].r)&&r.value!==n&&(r.value=n),B&1&&c!==(c=F[0].g)&&u.value!==c&&(u.value=c),B&1&&v!==(v=F[0].b)&&f.value!==v&&(f.value=v),F[2]?C?C.p(F,B):(C=L5(F),C.c(),C.m(t,null)):C&&(C.d(1),C=null)},d(F){F&&de(t),C&&C.d(),E=!1,oa(L)}}}function gL(e){let t,r,n,o,u,c=e[2]&&T5(e);return{c(){t=ct("div"),r=ct("input"),n=pr(),c&&c.c(),this.h()},l(s){t=ft(s,"DIV",{class:!0});var f=wt(t);r=ft(f,"INPUT",{style:!0,class:!0}),n=dr(f),c&&c.l(f),f.forEach(de),this.h()},h(){r.value=e[1],zo(r,"flex","3"),ye(r,"class","svelte-11z4jba"),ye(t,"class","input-container svelte-11z4jba")},m(s,f){It(s,t,f),Qe(t,r),Qe(t,n),c&&c.m(t,null),o||(u=Qr(r,"input",e[10]),o=!0)},p(s,f){f&2&&r.value!==s[1]&&(r.value=s[1]),s[2]?c?c.p(s,f):(c=T5(s),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(s){s&&de(t),c&&c.d(),o=!1,u()}}}function I5(e){let t,r,n;return{c(){t=ct("input"),this.h()},l(o){t=ft(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ye(t,"aria-label","transparency chanel color"),t.value=e[5],ye(t,"type","number"),ye(t,"min","0"),ye(t,"max","1"),ye(t,"step","0.01"),ye(t,"class","svelte-11z4jba")},m(o,u){It(o,t,u),r||(n=Qr(t,"input",e[12]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&de(t),r=!1,n()}}}function L5(e){let t,r,n;return{c(){t=ct("input"),this.h()},l(o){t=ft(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ye(t,"aria-label","transparency chanel color"),t.value=e[5],ye(t,"type","number"),ye(t,"min","0"),ye(t,"max","1"),ye(t,"step","0.01"),ye(t,"class","svelte-11z4jba")},m(o,u){It(o,t,u),r||(n=Qr(t,"input",e[11]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&de(t),r=!1,n()}}}function T5(e){let t,r,n;return{c(){t=ct("input"),this.h()},l(o){t=ft(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ye(t,"aria-label","hexadecimal color"),t.value=e[5],ye(t,"type","number"),ye(t,"min","0"),ye(t,"max","1"),ye(t,"step","0.01"),ye(t,"class","svelte-11z4jba")},m(o,u){It(o,t,u),r||(n=Qr(t,"input",e[11]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&de(t),r=!1,n()}}}function P5(e){let t,r=e[9][e[4]]+"",n,o,u,c;return{c(){t=ct("button"),n=Nn(r),this.h()},l(s){t=ft(s,"BUTTON",{"aria-label":!0,class:!0});var f=wt(t);n=Rn(f,r),f.forEach(de),this.h()},h(){ye(t,"aria-label",o="change inputs to "+e[9][(e[4]+1)%3]),ye(t,"class","svelte-11z4jba")},m(s,f){It(s,t,f),Qe(t,n),u||(c=Qr(t,"click",e[14]),u=!0)},p(s,f){f&16&&r!==(r=s[9][s[4]]+"")&&No(n,r),f&16&&o!==(o="change inputs to "+s[9][(s[4]+1)%3])&&ye(t,"aria-label",o)},d(s){s&&de(t),u=!1,c()}}}function yL(e){let t,r;function n(s,f){return s[4]===0?gL:s[4]===1?mL:dL}let o=n(e),u=o(e),c=e[3]&&P5(e);return{c(){t=ct("div"),u.c(),r=pr(),c&&c.c(),this.h()},l(s){t=ft(s,"DIV",{class:!0});var f=wt(t);u.l(f),r=dr(f),c&&c.l(f),f.forEach(de),this.h()},h(){ye(t,"class","text-input svelte-11z4jba")},m(s,f){It(s,t,f),u.m(t,null),Qe(t,r),c&&c.m(t,null)},p(s,[f]){o===(o=n(s))&&u?u.p(s,f):(u.d(1),u=o(s),u&&(u.c(),u.m(t,r))),s[3]?c?c.p(s,f):(c=P5(s),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:Xn,o:Xn,d(s){s&&de(t),u.d(),c&&c.d()}}}const vL=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function _L(e,t,r){let n,o,u,c,{isAlpha:s}=t,{rgb:f}=t,{hsv:v}=t,{hex:w}=t,{canChangeMode:E}=t;const L=["HEX","RGB","HSV"];let C=0;function F(Z){const ee=Z.target;vL.test(ee.value)&&r(1,w=ee.value)}function B(Z){return function(ee){r(0,f={...f,[Z]:parseFloat(ee.target.value)})}}function G(Z){return function(ee){r(13,v={...v,[Z]:parseFloat(ee.target.value)})}}const H=()=>r(4,C=(C+1)%3);return e.$$set=Z=>{"isAlpha"in Z&&r(2,s=Z.isAlpha),"rgb"in Z&&r(0,f=Z.rgb),"hsv"in Z&&r(13,v=Z.hsv),"hex"in Z&&r(1,w=Z.hex),"canChangeMode"in Z&&r(3,E=Z.canChangeMode)},e.$$.update=()=>{e.$$.dirty&8192&&r(8,n=Math.round(v.h)),e.$$.dirty&8192&&r(7,o=Math.round(v.s)),e.$$.dirty&8192&&r(6,u=Math.round(v.v)),e.$$.dirty&8192&&r(5,c=v.a===void 0?1:Math.round(v.a*100)/100)},[f,w,s,E,C,c,u,o,n,L,F,B,G,v,H]}class bL extends Pn{constructor(t){super(),Mn(this,t,_L,yL,Cn,{isAlpha:2,rgb:0,hsv:13,hex:1,canChangeMode:3})}}function wL(e){let t,r;return{c(){t=ct("div"),this.h()},l(n){t=ft(n,"DIV",{class:!0,style:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"class","slider-indicator svelte-htgglv"),ye(t,"style",r=`top: calc(${e[0]/200*186}% + 2px);`)},m(n,o){It(n,t,o)},p(n,[o]){o&1&&r!==(r=`top: calc(${n[0]/200*186}% + 2px);`)&&ye(t,"style",r)},i:Xn,o:Xn,d(n){n&&de(t)}}}function xL(e,t,r){let{pos:n}=t,{toRight:o}=t;return e.$$set=u=>{"pos"in u&&r(0,n=u.pos),"toRight"in u&&r(1,o=u.toRight)},[n,o]}let M5=class extends Pn{constructor(t){super(),Mn(this,t,xL,wL,Cn,{pos:0,toRight:1})}};function kL(e){let t,r;return{c(){t=ct("div"),this.h()},l(n){t=ft(n,"DIV",{class:!0,style:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"class","picker-indicator svelte-1nw247x"),ye(t,"style",r=`left: calc(${e[0].x/200*186}% + 2px); top: calc(${e[0].y/200*186}% + 2px); box-shadow: 0 0 4px ${e[1]?"white":"black"};`)},m(n,o){It(n,t,o)},p(n,[o]){o&3&&r!==(r=`left: calc(${n[0].x/200*186}% + 2px); top: calc(${n[0].y/200*186}% + 2px); box-shadow: 0 0 4px ${n[1]?"white":"black"};`)&&ye(t,"style",r)},i:Xn,o:Xn,d(n){n&&de(t)}}}function AL(e,t,r){let{pos:n}=t,{hex:o}=t,{isDark:u}=t;return e.$$set=c=>{"pos"in c&&r(0,n=c.pos),"hex"in c&&r(2,o=c.hex),"isDark"in c&&r(1,u=c.isDark)},[n,u,o]}let EL=class extends Pn{constructor(t){super(),Mn(this,t,AL,kL,Cn,{pos:0,hex:2,isDark:1})}};function SL(e){let t,r;return{c:Xn,l:Xn,m(n,o){t||(r=[Qr(window,"keyup",e[0]),Qr(window,"keydown",e[1])],t=!0)},p:Xn,i:Xn,o:Xn,d(n){t=!1,oa(r)}}}function CL(e,t,r){let n;vl(e,lf,c=>r(2,n=c));function o(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(ch(lf,n[c.key]=0,n),lf.set(n))}function u(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(c.repeat||(ch(lf,n[c.key]=1,n),lf.set(n)))}return[o,u]}class IL extends Pn{constructor(t){super(),Mn(this,t,CL,SL,Cn,{})}}function LL(e){let t,r;const n=e[3].default,o=Bu(n,e,e[2],null);return{c(){t=ct("div"),o&&o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);o&&o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","picker-wrapper svelte-1isc651"),ni(t,"focused",e[0])},m(u,c){It(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&ju(o,n,u,u[2],r?qu(n,u[2],c,null):Uu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Ze(o,u),r=!0)},o(u){at(o,u),r=!1},d(u){u&&de(t),o&&o.d(u)}}}function TL(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,n]}let PL=class extends Pn{constructor(t){super(),Mn(this,t,TL,LL,Cn,{focused:0,toRight:1})}};function ML(e){let t,r;const n=e[3].default,o=Bu(n,e,e[2],null);return{c(){t=ct("div"),o&&o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);o&&o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","slider-wrapper svelte-1udewng"),ni(t,"focused",e[0])},m(u,c){It(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&ju(o,n,u,u[2],r?qu(n,u[2],c,null):Uu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Ze(o,u),r=!0)},o(u){at(o,u),r=!1},d(u){u&&de(t),o&&o.d(u)}}}function DL(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,n]}let D5=class extends Pn{constructor(t){super(),Mn(this,t,DL,ML,Cn,{focused:0,toRight:1})}};function zL(e){let t,r,n,o,u,c,s,f,v,w,E;return{c(){t=ct("label"),r=ct("div"),n=ct("input"),o=pr(),u=ct("div"),c=pr(),s=ct("div"),f=pr(),v=Nn(e[2]),this.h()},l(L){t=ft(L,"LABEL",{class:!0});var C=wt(t);r=ft(C,"DIV",{class:!0});var F=wt(r);n=ft(F,"INPUT",{type:!0,"aria-haspopup":!0,class:!0}),o=dr(F),u=ft(F,"DIV",{class:!0}),wt(u).forEach(de),c=dr(F),s=ft(F,"DIV",{class:!0,style:!0}),wt(s).forEach(de),F.forEach(de),f=dr(C),v=Rn(C,e[2]),C.forEach(de),this.h()},h(){ye(n,"type","color"),n.value=e[1],ye(n,"aria-haspopup","dialog"),ye(n,"class","svelte-2ybi8r"),ye(u,"class","alpha svelte-2ybi8r"),ye(s,"class","color svelte-2ybi8r"),zo(s,"background",e[1]),ye(r,"class","container svelte-2ybi8r"),ye(t,"class","svelte-2ybi8r")},m(L,C){It(L,t,C),Qe(t,r),Qe(r,n),Qe(r,o),Qe(r,u),Qe(r,c),Qe(r,s),Qe(t,f),Qe(t,v),e[4](t),w||(E=[Qr(n,"click",Ul(NL)),Qr(n,"mousedown",Ul(RL)),Qr(t,"click",Ul(OL)),Qr(t,"mousedown",Ul(FL))],w=!0)},p(L,[C]){C&2&&(n.value=L[1]),C&2&&zo(s,"background",L[1]),C&4&&No(v,L[2])},i:Xn,o:Xn,d(L){L&&de(t),e[4](null),w=!1,oa(E)}}}const NL=()=>{},RL=()=>{},OL=()=>{},FL=()=>{};function BL(e,t,r){let{labelWrapper:n}=t,{hex:o}=t,{label:u}=t,{isOpen:c}=t;function s(f){Ft[f?"unshift":"push"](()=>{n=f,r(0,n)})}return e.$$set=f=>{"labelWrapper"in f&&r(0,n=f.labelWrapper),"hex"in f&&r(1,o=f.hex),"label"in f&&r(2,u=f.label),"isOpen"in f&&r(3,c=f.isOpen)},[n,o,u,c,s]}class jL extends Pn{constructor(t){super(),Mn(this,t,BL,zL,Cn,{labelWrapper:0,hex:1,label:2,isOpen:3})}}function UL(e){let t,r,n;const o=e[5].default,u=Bu(o,e,e[4],null);return{c(){t=ct("div"),u&&u.c(),this.h()},l(c){t=ft(c,"DIV",{class:!0,role:!0,"aria-label":!0});var s=wt(t);u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","wrapper svelte-160vdtq"),ye(t,"role",r=e[2]?"dialog":void 0),ye(t,"aria-label","color picker"),ni(t,"isOpen",e[1]),ni(t,"isPopup",e[2])},m(c,s){It(c,t,s),u&&u.m(t,null),e[6](t),n=!0},p(c,[s]){u&&u.p&&(!n||s&16)&&ju(u,o,c,c[4],n?qu(o,c[4],s,null):Uu(c[4]),null),(!n||s&4&&r!==(r=c[2]?"dialog":void 0))&&ye(t,"role",r),(!n||s&2)&&ni(t,"isOpen",c[1]),(!n||s&4)&&ni(t,"isPopup",c[2])},i(c){n||(Ze(u,c),n=!0)},o(c){at(u,c),n=!1},d(c){c&&de(t),u&&u.d(c),e[6](null)}}}function qL(e,t,r){let{$$slots:n={},$$scope:o}=t,{wrapper:u}=t,{isOpen:c}=t,{isPopup:s}=t,{toRight:f}=t;function v(w){Ft[w?"unshift":"push"](()=>{u=w,r(0,u)})}return e.$$set=w=>{"wrapper"in w&&r(0,u=w.wrapper),"isOpen"in w&&r(1,c=w.isOpen),"isPopup"in w&&r(2,s=w.isPopup),"toRight"in w&&r(3,f=w.toRight),"$$scope"in w&&r(4,o=w.$$scope)},[u,c,s,f,o,n,v]}let VL=class extends Pn{constructor(t){super(),Mn(this,t,qL,UL,Cn,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}};function z5(e,t,r){const n=e.slice();return n[9]=t[r].contrast,n[10]=t[r].hex,n[11]=t[r].placeholder,n[12]=t[r].reverse,n[13]=t[r].size,n}function N5(e){let t,r,n;var o=e[0].a11ySingleNotice;function u(c){return{props:{contrast:c[9],textColor:c[12]?c[10]:c[1],bgColor:c[12]?c[1]:c[10],placeholder:c[11],size:c[13]}}}return o&&(t=rs(o,u(e))),{c(){t&&Bt(t.$$.fragment),r=Xi()},l(c){t&&Yt(t.$$.fragment,c),r=Xi()},m(c,s){t&&jt(t,c,s),It(c,r,s),n=!0},p(c,s){const f={};if(s&16&&(f.contrast=c[9]),s&18&&(f.textColor=c[12]?c[10]:c[1]),s&18&&(f.bgColor=c[12]?c[1]:c[10]),s&16&&(f.placeholder=c[11]),s&16&&(f.size=c[13]),s&1&&o!==(o=c[0].a11ySingleNotice)){if(t){Ui();const v=t;at(v.$$.fragment,1,0,()=>{Ut(v,1)}),qi()}o?(t=rs(o,u(c)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,r.parentNode,r)):t=null}else o&&t.$set(f)},i(c){n||(t&&Ze(t.$$.fragment,c),n=!0)},o(c){t&&at(t.$$.fragment,c),n=!1},d(c){c&&de(r),t&&Ut(t,c)}}}function R5(e){let t;return{c(){t=ct("span"),this.h()},l(r){t=ft(r,"SPAN",{class:!0});var n=wt(t);n.forEach(de),this.h()},h(){ye(t,"class","svelte-1s4dluu")},m(r,n){It(r,t,n),t.innerHTML=e[2]},p(r,n){n&4&&(t.innerHTML=r[2])},d(r){r&&de(t)}}}function $L(e){let t,r,n,o,u,c,s,f,v;var w=e[0].a11ySummary;function E(G){return{props:{a11yColors:G[4],hex:G[1]}}}w&&(n=rs(w,E(e)));let L=e[4],C=[];for(let G=0;G<L.length;G+=1)C[G]=N5(z5(e,L,G));const F=G=>at(C[G],1,1,()=>{C[G]=null});let B=e[2]&&R5(e);return{c(){t=ct("details"),r=ct("summary"),n&&Bt(n.$$.fragment),u=pr(),c=ct("div");for(let G=0;G<C.length;G+=1)C[G].c();s=pr(),B&&B.c(),this.h()},l(G){t=ft(G,"DETAILS",{class:!0});var H=wt(t);r=ft(H,"SUMMARY",{tabindex:!0,class:!0});var Z=wt(r);n&&Yt(n.$$.fragment,Z),Z.forEach(de),u=dr(H),c=ft(H,"DIV",{class:!0});var ee=wt(c);for(let Y=0;Y<C.length;Y+=1)C[Y].l(ee);s=dr(ee),B&&B.l(ee),ee.forEach(de),H.forEach(de),this.h()},h(){ye(r,"tabindex",o=e[5]?-1:void 0),ye(r,"class","svelte-1s4dluu"),ye(c,"class","svelte-1s4dluu"),ye(t,"class",f="a11y-notice "+(e[5]?"not-closable":"")+" svelte-1s4dluu"),t.open=e[3]},m(G,H){It(G,t,H),Qe(t,r),n&&jt(n,r,null),Qe(t,u),Qe(t,c);for(let Z=0;Z<C.length;Z+=1)C[Z]&&C[Z].m(c,null);Qe(c,s),B&&B.m(c,null),v=!0},p(G,[H]){const Z={};if(H&16&&(Z.a11yColors=G[4]),H&2&&(Z.hex=G[1]),H&1&&w!==(w=G[0].a11ySummary)){if(n){Ui();const ee=n;at(ee.$$.fragment,1,0,()=>{Ut(ee,1)}),qi()}w?(n=rs(w,E(G)),Bt(n.$$.fragment),Ze(n.$$.fragment,1),jt(n,r,null)):n=null}else w&&n.$set(Z);if((!v||H&32&&o!==(o=G[5]?-1:void 0))&&ye(r,"tabindex",o),H&19){L=G[4];let ee;for(ee=0;ee<L.length;ee+=1){const Y=z5(G,L,ee);C[ee]?(C[ee].p(Y,H),Ze(C[ee],1)):(C[ee]=N5(Y),C[ee].c(),Ze(C[ee],1),C[ee].m(c,s))}for(Ui(),ee=L.length;ee<C.length;ee+=1)F(ee);qi()}G[2]?B?B.p(G,H):(B=R5(G),B.c(),B.m(c,null)):B&&(B.d(1),B=null),(!v||H&32&&f!==(f="a11y-notice "+(G[5]?"not-closable":"")+" svelte-1s4dluu"))&&ye(t,"class",f),(!v||H&8)&&(t.open=G[3])},i(G){if(!v){n&&Ze(n.$$.fragment,G);for(let H=0;H<L.length;H+=1)Ze(C[H]);v=!0}},o(G){n&&at(n.$$.fragment,G),C=C.filter(Boolean);for(let H=0;H<C.length;H+=1)at(C[H]);v=!1},d(G){G&&de(t),n&&Ut(n),ys(C,G),B&&B.d()}}}function GL(e,t,r){let n,o,{components:u}=t,{a11yColors:c}=t,{hex:s}=t,{color:f}=t,{a11yGuidelines:v}=t,{isA11yOpen:w}=t,{isA11yClosable:E}=t;return e.$$set=L=>{"components"in L&&r(0,u=L.components),"a11yColors"in L&&r(6,c=L.a11yColors),"hex"in L&&r(1,s=L.hex),"color"in L&&r(7,f=L.color),"a11yGuidelines"in L&&r(2,v=L.a11yGuidelines),"isA11yOpen"in L&&r(3,w=L.isA11yOpen),"isA11yClosable"in L&&r(8,E=L.isA11yClosable)},e.$$.update=()=>{e.$$.dirty&264&&r(5,n=w&&!E),e.$$.dirty&192&&r(4,o=c.map(L=>({...L,contrast:f==null?void 0:f.contrast(L.hex)})))},[u,s,v,w,o,n,c,f,E]}class HL extends Pn{constructor(t){super(),Mn(this,t,GL,$L,Cn,{components:0,a11yColors:6,hex:1,color:7,a11yGuidelines:2,isA11yOpen:3,isA11yClosable:8})}}function WL(e){let t,r,n=(e[2]||"Lorem Ipsum")+"",o,u,c,s,f,v,w=(e[3]>=10?e[3].toFixed(1):e[3])+"",E,L,C,F,B,G,H;return{c(){t=ct("div"),r=ct("p"),o=Nn(n),c=pr(),s=ct("div"),f=ct("p"),v=Nn("contrast: "),E=Nn(w),L=pr(),C=ct("span"),F=Nn("AA"),B=pr(),G=ct("span"),H=Nn("AAA"),this.h()},l(Z){t=ft(Z,"DIV",{class:!0});var ee=wt(t);r=ft(ee,"P",{class:!0,style:!0});var Y=wt(r);o=Rn(Y,n),Y.forEach(de),c=dr(ee),s=ft(ee,"DIV",{class:!0});var le=wt(s);f=ft(le,"P",{class:!0});var ce=wt(f);v=Rn(ce,"contrast: "),E=Rn(ce,w),ce.forEach(de),L=dr(le),C=ft(le,"SPAN",{class:!0});var ve=wt(C);F=Rn(ve,"AA"),ve.forEach(de),B=dr(le),G=ft(le,"SPAN",{class:!0});var pe=wt(G);H=Rn(pe,"AAA"),pe.forEach(de),le.forEach(de),ee.forEach(de),this.h()},h(){ye(r,"class",u="lorem "+(e[4]==="large"&&"large")+" svelte-obnxge"),zo(r,"color",e[0]),zo(r,"background-color",e[1]),ye(f,"class","svelte-obnxge"),ye(C,"class","grade svelte-obnxge"),ni(C,"grade-ok",e[3]>(e[4]==="large"?3:4.5)),ye(G,"class","grade svelte-obnxge"),ni(G,"grade-ok",e[3]>(e[4]==="large"?4.5:7)),ye(s,"class","score svelte-obnxge"),ye(t,"class","a11y-single-notice svelte-obnxge")},m(Z,ee){It(Z,t,ee),Qe(t,r),Qe(r,o),Qe(t,c),Qe(t,s),Qe(s,f),Qe(f,v),Qe(f,E),Qe(s,L),Qe(s,C),Qe(C,F),Qe(s,B),Qe(s,G),Qe(G,H)},p(Z,[ee]){ee&4&&n!==(n=(Z[2]||"Lorem Ipsum")+"")&&No(o,n),ee&16&&u!==(u="lorem "+(Z[4]==="large"&&"large")+" svelte-obnxge")&&ye(r,"class",u),ee&1&&zo(r,"color",Z[0]),ee&2&&zo(r,"background-color",Z[1]),ee&8&&w!==(w=(Z[3]>=10?Z[3].toFixed(1):Z[3])+"")&&No(E,w),ee&24&&ni(C,"grade-ok",Z[3]>(Z[4]==="large"?3:4.5)),ee&24&&ni(G,"grade-ok",Z[3]>(Z[4]==="large"?4.5:7))},i:Xn,o:Xn,d(Z){Z&&de(t)}}}function ZL(e,t,r){let{textColor:n}=t,{bgColor:o}=t,{placeholder:u=void 0}=t,{contrast:c=1}=t,{size:s=void 0}=t;return e.$$set=f=>{"textColor"in f&&r(0,n=f.textColor),"bgColor"in f&&r(1,o=f.bgColor),"placeholder"in f&&r(2,u=f.placeholder),"contrast"in f&&r(3,c=f.contrast),"size"in f&&r(4,s=f.size)},[n,o,u,c,s]}class XL extends Pn{constructor(t){super(),Mn(this,t,ZL,WL,Cn,{textColor:0,bgColor:1,placeholder:2,contrast:3,size:4})}}function YL(e){let t;return{c(){t=Nn(e[0])},l(r){t=Rn(r,e[0])},m(r,n){It(r,t,n)},p(r,[n]){n&1&&No(t,r[0])},i:Xn,o:Xn,d(r){r&&de(t)}}}function JL({contrast:e,size:t}){return e?t==="large"?e<3?2:e<4.5?1:0:e<4.5?2:e<7?1:0:1}function KL(e,t,r){let n,o,{a11yColors:u}=t,{hex:c}=t;return e.$$set=s=>{"a11yColors"in s&&r(1,u=s.a11yColors),"hex"in s&&r(2,c=s.hex)},e.$$.update=()=>{e.$$.dirty&2&&r(3,n=u.map(JL).reduce((s,f)=>s+f)),e.$$.dirty&8&&r(0,o=n?` ${n} contrast grade${n&&"s"} fail`:"Contrast grade information")},[o,u,c,n]}class QL extends Pn{constructor(t){super(),Mn(this,t,KL,YL,Cn,{a11yColors:1,hex:2})}}function eT(e){let t;return{c(){t=ct("input"),this.h()},l(r){t=ft(r,"INPUT",{type:!0}),this.h()},h(){ye(t,"type","hidden"),t.value=e[2]},m(r,n){It(r,t,n)},p(r,n){n[0]&4&&(t.value=r[2])},i:Xn,o:Xn,d(r){r&&de(t)}}}function tT(e){let t,r,n,o,u;function c(w){e[25](w)}function s(w){e[26](w)}var f=e[21]().input;function v(w){let E={hex:w[2],label:w[6]};return w[19]!==void 0&&(E.labelWrapper=w[19]),w[3]!==void 0&&(E.isOpen=w[3]),{props:E}}return f&&(t=rs(f,v(e)),Ft.push(()=>Jt(t,"labelWrapper",c)),Ft.push(()=>Jt(t,"isOpen",s))),{c(){t&&Bt(t.$$.fragment),o=Xi()},l(w){t&&Yt(t.$$.fragment,w),o=Xi()},m(w,E){t&&jt(t,w,E),It(w,o,E),u=!0},p(w,E){const L={};if(E[0]&4&&(L.hex=w[2]),E[0]&64&&(L.label=w[6]),!r&&E[0]&524288&&(r=!0,L.labelWrapper=w[19],er(()=>r=!1)),!n&&E[0]&8&&(n=!0,L.isOpen=w[3],er(()=>n=!1)),f!==(f=w[21]().input)){if(t){Ui();const C=t;at(C.$$.fragment,1,0,()=>{Ut(C,1)}),qi()}f?(t=rs(f,v(w)),Ft.push(()=>Jt(t,"labelWrapper",c)),Ft.push(()=>Jt(t,"isOpen",s)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,o.parentNode,o)):t=null}else f&&t.$set(L)},i(w){u||(t&&Ze(t.$$.fragment,w),u=!0)},o(w){t&&at(t.$$.fragment,w),u=!1},d(w){w&&de(o),t&&Ut(t,w)}}}function O5(e){let t,r,n,o;function u(f){e[31](f)}function c(f){e[32](f)}let s={components:e[21](),hex:e[2],toRight:e[17]};return e[1].a!==void 0&&(s.a=e[1].a),e[3]!==void 0&&(s.isOpen=e[3]),t=new pL({props:s}),Ft.push(()=>Jt(t,"a",u)),Ft.push(()=>Jt(t,"isOpen",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};v[0]&4&&(w.hex=f[2]),v[0]&131072&&(w.toRight=f[17]),!r&&v[0]&2&&(r=!0,w.a=f[1].a,er(()=>r=!1)),!n&&v[0]&8&&(n=!0,w.isOpen=f[3],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function F5(e){let t,r,n,o,u,c;function s(L){e[33](L)}function f(L){e[34](L)}function v(L){e[35](L)}var w=e[21]().textInput;function E(L){let C={isAlpha:L[7],canChangeMode:L[10]};return L[2]!==void 0&&(C.hex=L[2]),L[0]!==void 0&&(C.rgb=L[0]),L[1]!==void 0&&(C.hsv=L[1]),{props:C}}return w&&(t=rs(w,E(e)),Ft.push(()=>Jt(t,"hex",s)),Ft.push(()=>Jt(t,"rgb",f)),Ft.push(()=>Jt(t,"hsv",v))),{c(){t&&Bt(t.$$.fragment),u=Xi()},l(L){t&&Yt(t.$$.fragment,L),u=Xi()},m(L,C){t&&jt(t,L,C),It(L,u,C),c=!0},p(L,C){const F={};if(C[0]&128&&(F.isAlpha=L[7]),C[0]&1024&&(F.canChangeMode=L[10]),!r&&C[0]&4&&(r=!0,F.hex=L[2],er(()=>r=!1)),!n&&C[0]&1&&(n=!0,F.rgb=L[0],er(()=>n=!1)),!o&&C[0]&2&&(o=!0,F.hsv=L[1],er(()=>o=!1)),w!==(w=L[21]().textInput)){if(t){Ui();const B=t;at(B.$$.fragment,1,0,()=>{Ut(B,1)}),qi()}w?(t=rs(w,E(L)),Ft.push(()=>Jt(t,"hex",s)),Ft.push(()=>Jt(t,"rgb",f)),Ft.push(()=>Jt(t,"hsv",v)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,u.parentNode,u)):t=null}else w&&t.$set(F)},i(L){c||(t&&Ze(t.$$.fragment,L),c=!0)},o(L){t&&at(t.$$.fragment,L),c=!1},d(L){L&&de(u),t&&Ut(t,L)}}}function B5(e){let t,r,n;var o=e[21]().a11yNotice;function u(c){return{props:{components:c[21](),a11yColors:c[12],color:c[4],hex:c[2],a11yGuidelines:c[13],isA11yOpen:c[14],isA11yClosable:c[15]}}}return o&&(t=rs(o,u(e))),{c(){t&&Bt(t.$$.fragment),r=Xi()},l(c){t&&Yt(t.$$.fragment,c),r=Xi()},m(c,s){t&&jt(t,c,s),It(c,r,s),n=!0},p(c,s){const f={};if(s[0]&4096&&(f.a11yColors=c[12]),s[0]&16&&(f.color=c[4]),s[0]&4&&(f.hex=c[2]),s[0]&8192&&(f.a11yGuidelines=c[13]),s[0]&16384&&(f.isA11yOpen=c[14]),s[0]&32768&&(f.isA11yClosable=c[15]),o!==(o=c[21]().a11yNotice)){if(t){Ui();const v=t;at(v.$$.fragment,1,0,()=>{Ut(v,1)}),qi()}o?(t=rs(o,u(c)),Bt(t.$$.fragment),Ze(t.$$.fragment,1),jt(t,r.parentNode,r)):t=null}else o&&t.$set(f)},i(c){n||(t&&Ze(t.$$.fragment,c),n=!0)},o(c){t&&at(t.$$.fragment,c),n=!1},d(c){c&&de(r),t&&Ut(t,c)}}}function rT(e){let t,r,n,o,u,c,s,f,v,w,E,L;function C(ce){e[27](ce)}function F(ce){e[28](ce)}function B(ce){e[29](ce)}let G={components:e[21](),h:e[1].h,toRight:e[17],isDark:e[5]};e[1].s!==void 0&&(G.s=e[1].s),e[1].v!==void 0&&(G.v=e[1].v),e[3]!==void 0&&(G.isOpen=e[3]),t=new oL({props:G}),Ft.push(()=>Jt(t,"s",C)),Ft.push(()=>Jt(t,"v",F)),Ft.push(()=>Jt(t,"isOpen",B));function H(ce){e[30](ce)}let Z={components:e[21](),toRight:e[17]};e[1].h!==void 0&&(Z.h=e[1].h),c=new uL({props:Z}),Ft.push(()=>Jt(c,"h",H));let ee=e[7]&&O5(e),Y=e[9]&&F5(e),le=e[11]&&B5(e);return{c(){Bt(t.$$.fragment),u=pr(),Bt(c.$$.fragment),f=pr(),ee&&ee.c(),v=pr(),Y&&Y.c(),w=pr(),le&&le.c(),E=Xi()},l(ce){Yt(t.$$.fragment,ce),u=dr(ce),Yt(c.$$.fragment,ce),f=dr(ce),ee&&ee.l(ce),v=dr(ce),Y&&Y.l(ce),w=dr(ce),le&&le.l(ce),E=Xi()},m(ce,ve){jt(t,ce,ve),It(ce,u,ve),jt(c,ce,ve),It(ce,f,ve),ee&&ee.m(ce,ve),It(ce,v,ve),Y&&Y.m(ce,ve),It(ce,w,ve),le&&le.m(ce,ve),It(ce,E,ve),L=!0},p(ce,ve){const pe={};ve[0]&2&&(pe.h=ce[1].h),ve[0]&131072&&(pe.toRight=ce[17]),ve[0]&32&&(pe.isDark=ce[5]),!r&&ve[0]&2&&(r=!0,pe.s=ce[1].s,er(()=>r=!1)),!n&&ve[0]&2&&(n=!0,pe.v=ce[1].v,er(()=>n=!1)),!o&&ve[0]&8&&(o=!0,pe.isOpen=ce[3],er(()=>o=!1)),t.$set(pe);const Ne={};ve[0]&131072&&(Ne.toRight=ce[17]),!s&&ve[0]&2&&(s=!0,Ne.h=ce[1].h,er(()=>s=!1)),c.$set(Ne),ce[7]?ee?(ee.p(ce,ve),ve[0]&128&&Ze(ee,1)):(ee=O5(ce),ee.c(),Ze(ee,1),ee.m(v.parentNode,v)):ee&&(Ui(),at(ee,1,1,()=>{ee=null}),qi()),ce[9]?Y?(Y.p(ce,ve),ve[0]&512&&Ze(Y,1)):(Y=F5(ce),Y.c(),Ze(Y,1),Y.m(w.parentNode,w)):Y&&(Ui(),at(Y,1,1,()=>{Y=null}),qi()),ce[11]?le?(le.p(ce,ve),ve[0]&2048&&Ze(le,1)):(le=B5(ce),le.c(),Ze(le,1),le.m(E.parentNode,E)):le&&(Ui(),at(le,1,1,()=>{le=null}),qi())},i(ce){L||(Ze(t.$$.fragment,ce),Ze(c.$$.fragment,ce),Ze(ee),Ze(Y),Ze(le),L=!0)},o(ce){at(t.$$.fragment,ce),at(c.$$.fragment,ce),at(ee),at(Y),at(le),L=!1},d(ce){Ut(t,ce),ce&&de(u),Ut(c,ce),ce&&de(f),ee&&ee.d(ce),ce&&de(v),Y&&Y.d(ce),ce&&de(w),le&&le.d(ce),ce&&de(E)}}}function nT(e){let t,r,n,o,u,c,s,f,v,w,E;t=new IL({});const L=[tT,eT],C=[];function F(Z,ee){return Z[8]?0:1}o=F(e),u=C[o]=L[o](e);function B(Z){e[36](Z)}var G=e[21]().wrapper;function H(Z){let ee={isOpen:Z[3],isPopup:Z[16],toRight:Z[17],$$slots:{default:[rT]},$$scope:{ctx:Z}};return Z[20]!==void 0&&(ee.wrapper=Z[20]),{props:ee}}return G&&(s=rs(G,H(e)),Ft.push(()=>Jt(s,"wrapper",B))),{c(){Bt(t.$$.fragment),r=pr(),n=ct("span"),u.c(),c=pr(),s&&Bt(s.$$.fragment),this.h()},l(Z){Yt(t.$$.fragment,Z),r=dr(Z),n=ft(Z,"SPAN",{class:!0});var ee=wt(n);u.l(ee),c=dr(ee),s&&Yt(s.$$.fragment,ee),ee.forEach(de),this.h()},h(){ye(n,"class","color-picker svelte-7ntk55")},m(Z,ee){jt(t,Z,ee),It(Z,r,ee),It(Z,n,ee),C[o].m(n,null),Qe(n,c),s&&jt(s,n,null),e[37](n),v=!0,w||(E=[Qr(window,"mousedown",e[22]),Qr(window,"keyup",e[23])],w=!0)},p(Z,ee){let Y=o;o=F(Z),o===Y?C[o].p(Z,ee):(Ui(),at(C[Y],1,1,()=>{C[Y]=null}),qi(),u=C[o],u?u.p(Z,ee):(u=C[o]=L[o](Z),u.c()),Ze(u,1),u.m(n,c));const le={};if(ee[0]&8&&(le.isOpen=Z[3]),ee[0]&65536&&(le.isPopup=Z[16]),ee[0]&131072&&(le.toRight=Z[17]),ee[0]&196287|ee[1]&8192&&(le.$$scope={dirty:ee,ctx:Z}),!f&&ee[0]&1048576&&(f=!0,le.wrapper=Z[20],er(()=>f=!1)),G!==(G=Z[21]().wrapper)){if(s){Ui();const ce=s;at(ce.$$.fragment,1,0,()=>{Ut(ce,1)}),qi()}G?(s=rs(G,H(Z)),Ft.push(()=>Jt(s,"wrapper",B)),Bt(s.$$.fragment),Ze(s.$$.fragment,1),jt(s,n,null)):s=null}else G&&s.$set(le)},i(Z){v||(Ze(t.$$.fragment,Z),Ze(u),s&&Ze(s.$$.fragment,Z),v=!0)},o(Z){at(t.$$.fragment,Z),at(u),s&&at(s.$$.fragment,Z),v=!1},d(Z){Ut(t,Z),Z&&de(r),Z&&de(n),C[o].d(),s&&Ut(s),e[37](null),w=!1,oa(E)}}}function iT(e,t,r){eL([tL]);let{components:n={}}=t;const o=gp();let{label:u="Choose a color"}=t,{isAlpha:c=!0}=t,{isInput:s=!0}=t,{isTextInput:f=!0}=t,{canChangeMode:v=!0}=t,{isA11y:w=!1}=t,{a11yColors:E=[{hex:"#ffffff"}]}=t,{a11yGuidelines:L='<p style="margin: 0; font-size: 12px;">Learn more at <a href="https://webaim.org/articles/contrast/" target="_blank">WebAIM contrast guide</a></p>'}=t,{isA11yOpen:C=!1}=t,{isA11yClosable:F=!0}=t,{isPopup:B=s}=t,{isOpen:G=!s}=t,{toRight:H=!1}=t,{rgb:Z={r:255,g:0,b:0,a:1}}=t,{hsv:ee={h:0,s:100,v:100,a:1}}=t,{hex:Y="#ff0000"}=t,{color:le=void 0}=t,{isDark:ce=!1}=t,ve={r:255,g:0,b:0,a:1},pe={h:0,s:100,v:100,a:1},Ne="#ff0000",Ve;const be={sliderIndicator:M5,pickerIndicator:EL,alphaIndicator:M5,pickerWrapper:PL,sliderWrapper:D5,alphaWrapper:D5,textInput:bL,a11yNotice:HL,a11ySingleNotice:XL,a11ySummary:QL,input:jL,wrapper:VL};function Ce(){return{...be,...n}}let Oe,nt;function mt({target:Gt}){s&&(Oe.contains(Gt)||Oe.isSameNode(Gt)?r(3,G=!G):G&&!nt.contains(Gt)&&r(3,G=!1))}function ht(Gt){Gt.key==="Tab"&&r(3,G=Ve==null?void 0:Ve.contains(document.activeElement))}function He(){ee.h===pe.h&&ee.s===pe.s&&ee.v===pe.v&&ee.a===pe.a&&Z.r===ve.r&&Z.g===ve.g&&Z.b===ve.b&&Z.a===ve.a&&Y===Ne||(ee.a===void 0&&r(1,ee.a=1,ee),pe.a===void 0&&(pe.a=1),Z.a===void 0&&r(0,Z.a=1,Z),ve.a===void 0&&(ve.a=1),(Y==null?void 0:Y.substring(7))==="ff"&&r(2,Y=Y.substring(0,7)),(Y==null?void 0:Y.substring(7))==="ff"&&r(2,Y=Y.substring(0,7)),ee.h!==pe.h||ee.s!==pe.s||ee.v!==pe.v||ee.a!==pe.a?(r(4,le=zu(ee)),r(0,Z=le.toRgb()),r(2,Y=le.toHex())):Z.r!==ve.r||Z.g!==ve.g||Z.b!==ve.b||Z.a!==ve.a?(r(4,le=zu(Z)),r(2,Y=le.toHex()),r(1,ee=le.toHsv())):Y!==Ne&&(r(4,le=zu(Y)),r(0,Z=le.toRgb()),r(1,ee=le.toHsv())),le&&r(5,ce=le.isDark()),pe=Object.assign({},ee),ve=Object.assign({},Z),Ne=Y,o("input",{color:le,hsv:ee,rgb:Z,hex:Y}))}function ut(Gt){Oe=Gt,r(19,Oe)}function bt(Gt){G=Gt,r(3,G)}function Xe(Gt){e.$$.not_equal(ee.s,Gt)&&(ee.s=Gt,r(1,ee))}function We(Gt){e.$$.not_equal(ee.v,Gt)&&(ee.v=Gt,r(1,ee))}function ke(Gt){G=Gt,r(3,G)}function Re(Gt){e.$$.not_equal(ee.h,Gt)&&(ee.h=Gt,r(1,ee))}function Pe(Gt){e.$$.not_equal(ee.a,Gt)&&(ee.a=Gt,r(1,ee))}function dt(Gt){G=Gt,r(3,G)}function Et(Gt){Y=Gt,r(2,Y)}function Pt(Gt){Z=Gt,r(0,Z)}function Kt(Gt){ee=Gt,r(1,ee)}function $t(Gt){nt=Gt,r(20,nt)}function br(Gt){Ft[Gt?"unshift":"push"](()=>{Ve=Gt,r(18,Ve)})}return e.$$set=Gt=>{"components"in Gt&&r(24,n=Gt.components),"label"in Gt&&r(6,u=Gt.label),"isAlpha"in Gt&&r(7,c=Gt.isAlpha),"isInput"in Gt&&r(8,s=Gt.isInput),"isTextInput"in Gt&&r(9,f=Gt.isTextInput),"canChangeMode"in Gt&&r(10,v=Gt.canChangeMode),"isA11y"in Gt&&r(11,w=Gt.isA11y),"a11yColors"in Gt&&r(12,E=Gt.a11yColors),"a11yGuidelines"in Gt&&r(13,L=Gt.a11yGuidelines),"isA11yOpen"in Gt&&r(14,C=Gt.isA11yOpen),"isA11yClosable"in Gt&&r(15,F=Gt.isA11yClosable),"isPopup"in Gt&&r(16,B=Gt.isPopup),"isOpen"in Gt&&r(3,G=Gt.isOpen),"toRight"in Gt&&r(17,H=Gt.toRight),"rgb"in Gt&&r(0,Z=Gt.rgb),"hsv"in Gt&&r(1,ee=Gt.hsv),"hex"in Gt&&r(2,Y=Gt.hex),"color"in Gt&&r(4,le=Gt.color),"isDark"in Gt&&r(5,ce=Gt.isDark)},e.$$.update=()=>{e.$$.dirty[0]&7&&(ee||Z||Y)&&He()},[Z,ee,Y,G,le,ce,u,c,s,f,v,w,E,L,C,F,B,H,Ve,Oe,nt,Ce,mt,ht,n,ut,bt,Xe,We,ke,Re,Pe,dt,Et,Pt,Kt,$t,br]}class oT extends Pn{constructor(t){super(),Mn(this,t,iT,nT,Cn,{components:24,label:6,isAlpha:7,isInput:8,isTextInput:9,canChangeMode:10,isA11y:11,a11yColors:12,a11yGuidelines:13,isA11yOpen:14,isA11yClosable:15,isPopup:16,isOpen:3,toRight:17,rgb:0,hsv:1,hex:2,color:4,isDark:5},null,[-1,-1])}}function aT(e){let t,r;return{c(){t=ct("div"),this.h()},l(n){t=ft(n,"DIV",{class:!0,style:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"class","picker-indicator svelte-1nw247x"),ye(t,"style",r=`left: calc(${e[0].x/260*246}% + 2px); top: calc(${e[0].y/160*149}% + 2px); box-shadow: 0 0 4px ${e[1]?"white":"black"};`)},m(n,o){It(n,t,o)},p(n,[o]){o&3&&r!==(r=`left: calc(${n[0].x/260*246}% + 2px); top: calc(${n[0].y/160*149}% + 2px); box-shadow: 0 0 4px ${n[1]?"white":"black"};`)&&ye(t,"style",r)},i:Xn,o:Xn,d(n){n&&de(t)}}}function sT(e,t,r){let{pos:n}=t,{hex:o}=t,{isDark:u}=t;return e.$$set=c=>{"pos"in c&&r(0,n=c.pos),"hex"in c&&r(2,o=c.hex),"isDark"in c&&r(1,u=c.isDark)},[n,u,o]}class lT extends Pn{constructor(t){super(),Mn(this,t,sT,aT,Cn,{pos:0,hex:2,isDark:1})}}function uT(e){let t,r;const n=e[3].default,o=Bu(n,e,e[2],null);return{c(){t=ct("div"),o&&o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);o&&o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","picker-wrapper svelte-1vd0r8g"),ni(t,"focused",e[0])},m(u,c){It(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&ju(o,n,u,u[2],r?qu(n,u[2],c,null):Uu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Ze(o,u),r=!0)},o(u){at(o,u),r=!1},d(u){u&&de(t),o&&o.d(u)}}}function cT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,n]}class fT extends Pn{constructor(t){super(),Mn(this,t,cT,uT,Cn,{focused:0,toRight:1})}}function hT(e){let t,r;return{c(){t=ct("div"),this.h()},l(n){t=ft(n,"DIV",{class:!0,style:!0}),wt(t).forEach(de),this.h()},h(){ye(t,"class","slider-indicator svelte-hspaza"),ye(t,"style",r=`left: calc(${e[0]/200*192}% + 2px);`)},m(n,o){It(n,t,o)},p(n,[o]){o&1&&r!==(r=`left: calc(${n[0]/200*192}% + 2px);`)&&ye(t,"style",r)},i:Xn,o:Xn,d(n){n&&de(t)}}}function pT(e,t,r){let{pos:n}=t,{toRight:o}=t;return e.$$set=u=>{"pos"in u&&r(0,n=u.pos),"toRight"in u&&r(1,o=u.toRight)},[n,o]}class j5 extends Pn{constructor(t){super(),Mn(this,t,pT,hT,Cn,{pos:0,toRight:1})}}function dT(e){let t,r;const n=e[3].default,o=Bu(n,e,e[2],null);return{c(){t=ct("div"),o&&o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0});var c=wt(t);o&&o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","slider-wrapper svelte-1ujhhhp"),ni(t,"focused",e[0])},m(u,c){It(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&ju(o,n,u,u[2],r?qu(n,u[2],c,null):Uu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Ze(o,u),r=!0)},o(u){at(o,u),r=!1},d(u){u&&de(t),o&&o.d(u)}}}function mT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=s=>{"focused"in s&&r(0,u=s.focused),"toRight"in s&&r(1,c=s.toRight),"$$scope"in s&&r(2,o=s.$$scope)},[u,c,o,n]}class U5 extends Pn{constructor(t){super(),Mn(this,t,mT,dT,Cn,{focused:0,toRight:1})}}function gT(e){let t,r,n;const o=e[5].default,u=Bu(o,e,e[4],null);return{c(){t=ct("div"),u&&u.c(),this.h()},l(c){t=ft(c,"DIV",{class:!0,role:!0,"aria-label":!0});var s=wt(t);u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","wrapper svelte-17dre7j"),ye(t,"role",r=e[2]?"dialog":void 0),ye(t,"aria-label","color picker"),ni(t,"isOpen",e[1]),ni(t,"isPopup",e[2])},m(c,s){It(c,t,s),u&&u.m(t,null),e[6](t),n=!0},p(c,[s]){u&&u.p&&(!n||s&16)&&ju(u,o,c,c[4],n?qu(o,c[4],s,null):Uu(c[4]),null),(!n||s&4&&r!==(r=c[2]?"dialog":void 0))&&ye(t,"role",r),(!n||s&2)&&ni(t,"isOpen",c[1]),(!n||s&4)&&ni(t,"isPopup",c[2])},i(c){n||(Ze(u,c),n=!0)},o(c){at(u,c),n=!1},d(c){c&&de(t),u&&u.d(c),e[6](null)}}}function yT(e,t,r){let{$$slots:n={},$$scope:o}=t,{wrapper:u}=t,{isOpen:c}=t,{isPopup:s}=t,{toRight:f}=t;function v(w){Ft[w?"unshift":"push"](()=>{u=w,r(0,u)})}return e.$$set=w=>{"wrapper"in w&&r(0,u=w.wrapper),"isOpen"in w&&r(1,c=w.isOpen),"isPopup"in w&&r(2,s=w.isPopup),"toRight"in w&&r(3,f=w.toRight),"$$scope"in w&&r(4,o=w.$$scope)},[u,c,s,f,o,n,v]}class vT extends Pn{constructor(t){super(),Mn(this,t,yT,gT,Cn,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}}const _T={sliderIndicator:j5,pickerIndicator:lT,alphaIndicator:j5,pickerWrapper:fT,sliderWrapper:U5,alphaWrapper:U5,wrapper:vT};var ac="top",Xc="bottom",Yc="right",sc="left",vv="auto",Sd=[ac,Xc,Yc,sc],sp="start",cd="end",bT="clippingParents",r8="viewport",Op="popper",wT="reference",q5=Sd.reduce(function(e,t){return e.concat([t+"-"+sp,t+"-"+cd])},[]),n8=[].concat(Sd,[vv]).reduce(function(e,t){return e.concat([t,t+"-"+sp,t+"-"+cd])},[]),xT="beforeRead",kT="read",AT="afterRead",ET="beforeMain",ST="main",CT="afterMain",IT="beforeWrite",LT="write",TT="afterWrite",PT=[xT,kT,AT,ET,ST,CT,IT,LT,TT];function $0(e){return e?(e.nodeName||"").toLowerCase():null}function Kc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fh(e){var t=Kc(e).Element;return e instanceof t||e instanceof Element}function Zc(e){var t=Kc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function _v(e){if(typeof ShadowRoot>"u")return!1;var t=Kc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function MT(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},o=t.attributes[r]||{},u=t.elements[r];!Zc(u)||!$0(u)||(Object.assign(u.style,n),Object.keys(o).forEach(function(c){var s=o[c];s===!1?u.removeAttribute(c):u.setAttribute(c,s===!0?"":s)}))})}function DT(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],u=t.attributes[n]||{},c=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=c.reduce(function(f,v){return f[v]="",f},{});!Zc(o)||!$0(o)||(Object.assign(o.style,s),Object.keys(u).forEach(function(f){o.removeAttribute(f)}))})}}const i8={name:"applyStyles",enabled:!0,phase:"write",fn:MT,effect:DT,requires:["computeStyles"]};function j0(e){return e.split("-")[0]}var sh=Math.max,V1=Math.min,lp=Math.round;function ry(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function o8(){return!/^((?!chrome|android).)*safari/i.test(ry())}function up(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),o=1,u=1;t&&Zc(e)&&(o=e.offsetWidth>0&&lp(n.width)/e.offsetWidth||1,u=e.offsetHeight>0&&lp(n.height)/e.offsetHeight||1);var c=fh(e)?Kc(e):window,s=c.visualViewport,f=!o8()&&r,v=(n.left+(f&&s?s.offsetLeft:0))/o,w=(n.top+(f&&s?s.offsetTop:0))/u,E=n.width/o,L=n.height/u;return{width:E,height:L,top:w,right:v+E,bottom:w+L,left:v,x:v,y:w}}function bv(e){var t=up(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function a8(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&_v(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function hf(e){return Kc(e).getComputedStyle(e)}function zT(e){return["table","td","th"].indexOf($0(e))>=0}function qf(e){return((fh(e)?e.ownerDocument:e.document)||window.document).documentElement}function g2(e){return $0(e)==="html"?e:e.assignedSlot||e.parentNode||(_v(e)?e.host:null)||qf(e)}function V5(e){return!Zc(e)||hf(e).position==="fixed"?null:e.offsetParent}function NT(e){var t=/firefox/i.test(ry()),r=/Trident/i.test(ry());if(r&&Zc(e)){var n=hf(e);if(n.position==="fixed")return null}var o=g2(e);for(_v(o)&&(o=o.host);Zc(o)&&["html","body"].indexOf($0(o))<0;){var u=hf(o);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return o;o=o.parentNode}return null}function Cd(e){for(var t=Kc(e),r=V5(e);r&&zT(r)&&hf(r).position==="static";)r=V5(r);return r&&($0(r)==="html"||$0(r)==="body"&&hf(r).position==="static")?t:r||NT(e)||t}function wv(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yp(e,t,r){return sh(e,V1(t,r))}function RT(e,t,r){var n=Yp(e,t,r);return n>r?r:n}function s8(){return{top:0,right:0,bottom:0,left:0}}function l8(e){return Object.assign({},s8(),e)}function u8(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var OT=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,l8(typeof t!="number"?t:u8(t,Sd))};function FT(e){var t,r=e.state,n=e.name,o=e.options,u=r.elements.arrow,c=r.modifiersData.popperOffsets,s=j0(r.placement),f=wv(s),v=[sc,Yc].indexOf(s)>=0,w=v?"height":"width";if(!(!u||!c)){var E=OT(o.padding,r),L=bv(u),C=f==="y"?ac:sc,F=f==="y"?Xc:Yc,B=r.rects.reference[w]+r.rects.reference[f]-c[f]-r.rects.popper[w],G=c[f]-r.rects.reference[f],H=Cd(u),Z=H?f==="y"?H.clientHeight||0:H.clientWidth||0:0,ee=B/2-G/2,Y=E[C],le=Z-L[w]-E[F],ce=Z/2-L[w]/2+ee,ve=Yp(Y,ce,le),pe=f;r.modifiersData[n]=(t={},t[pe]=ve,t.centerOffset=ve-ce,t)}}function BT(e){var t=e.state,r=e.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||a8(t.elements.popper,o)&&(t.elements.arrow=o))}const jT={name:"arrow",enabled:!0,phase:"main",fn:FT,effect:BT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cp(e){return e.split("-")[1]}var UT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qT(e){var t=e.x,r=e.y,n=window,o=n.devicePixelRatio||1;return{x:lp(t*o)/o||0,y:lp(r*o)/o||0}}function $5(e){var t,r=e.popper,n=e.popperRect,o=e.placement,u=e.variation,c=e.offsets,s=e.position,f=e.gpuAcceleration,v=e.adaptive,w=e.roundOffsets,E=e.isFixed,L=c.x,C=L===void 0?0:L,F=c.y,B=F===void 0?0:F,G=typeof w=="function"?w({x:C,y:B}):{x:C,y:B};C=G.x,B=G.y;var H=c.hasOwnProperty("x"),Z=c.hasOwnProperty("y"),ee=sc,Y=ac,le=window;if(v){var ce=Cd(r),ve="clientHeight",pe="clientWidth";if(ce===Kc(r)&&(ce=qf(r),hf(ce).position!=="static"&&s==="absolute"&&(ve="scrollHeight",pe="scrollWidth")),ce=ce,o===ac||(o===sc||o===Yc)&&u===cd){Y=Xc;var Ne=E&&ce===le&&le.visualViewport?le.visualViewport.height:ce[ve];B-=Ne-n.height,B*=f?1:-1}if(o===sc||(o===ac||o===Xc)&&u===cd){ee=Yc;var Ve=E&&ce===le&&le.visualViewport?le.visualViewport.width:ce[pe];C-=Ve-n.width,C*=f?1:-1}}var be=Object.assign({position:s},v&&UT),Ce=w===!0?qT({x:C,y:B}):{x:C,y:B};if(C=Ce.x,B=Ce.y,f){var Oe;return Object.assign({},be,(Oe={},Oe[Y]=Z?"0":"",Oe[ee]=H?"0":"",Oe.transform=(le.devicePixelRatio||1)<=1?"translate("+C+"px, "+B+"px)":"translate3d("+C+"px, "+B+"px, 0)",Oe))}return Object.assign({},be,(t={},t[Y]=Z?B+"px":"",t[ee]=H?C+"px":"",t.transform="",t))}function VT(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=n===void 0?!0:n,u=r.adaptive,c=u===void 0?!0:u,s=r.roundOffsets,f=s===void 0?!0:s,v={placement:j0(t.placement),variation:cp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,$5(Object.assign({},v,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,$5(Object.assign({},v,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const $T={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:VT,data:{}};var c1={passive:!0};function GT(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,u=o===void 0?!0:o,c=n.resize,s=c===void 0?!0:c,f=Kc(t.elements.popper),v=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&v.forEach(function(w){w.addEventListener("scroll",r.update,c1)}),s&&f.addEventListener("resize",r.update,c1),function(){u&&v.forEach(function(w){w.removeEventListener("scroll",r.update,c1)}),s&&f.removeEventListener("resize",r.update,c1)}}const HT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:GT,data:{}};var WT={left:"right",right:"left",bottom:"top",top:"bottom"};function C1(e){return e.replace(/left|right|bottom|top/g,function(t){return WT[t]})}var ZT={start:"end",end:"start"};function G5(e){return e.replace(/start|end/g,function(t){return ZT[t]})}function xv(e){var t=Kc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function kv(e){return up(qf(e)).left+xv(e).scrollLeft}function XT(e,t){var r=Kc(e),n=qf(e),o=r.visualViewport,u=n.clientWidth,c=n.clientHeight,s=0,f=0;if(o){u=o.width,c=o.height;var v=o8();(v||!v&&t==="fixed")&&(s=o.offsetLeft,f=o.offsetTop)}return{width:u,height:c,x:s+kv(e),y:f}}function YT(e){var t,r=qf(e),n=xv(e),o=(t=e.ownerDocument)==null?void 0:t.body,u=sh(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=sh(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-n.scrollLeft+kv(e),f=-n.scrollTop;return hf(o||r).direction==="rtl"&&(s+=sh(r.clientWidth,o?o.clientWidth:0)-u),{width:u,height:c,x:s,y:f}}function Av(e){var t=hf(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function c8(e){return["html","body","#document"].indexOf($0(e))>=0?e.ownerDocument.body:Zc(e)&&Av(e)?e:c8(g2(e))}function Jp(e,t){var r;t===void 0&&(t=[]);var n=c8(e),o=n===((r=e.ownerDocument)==null?void 0:r.body),u=Kc(n),c=o?[u].concat(u.visualViewport||[],Av(n)?n:[]):n,s=t.concat(c);return o?s:s.concat(Jp(g2(c)))}function ny(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function JT(e,t){var r=up(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function H5(e,t,r){return t===r8?ny(XT(e,r)):fh(t)?JT(t,r):ny(YT(qf(e)))}function KT(e){var t=Jp(g2(e)),r=["absolute","fixed"].indexOf(hf(e).position)>=0,n=r&&Zc(e)?Cd(e):e;return fh(n)?t.filter(function(o){return fh(o)&&a8(o,n)&&$0(o)!=="body"}):[]}function QT(e,t,r,n){var o=t==="clippingParents"?KT(e):[].concat(t),u=[].concat(o,[r]),c=u[0],s=u.reduce(function(f,v){var w=H5(e,v,n);return f.top=sh(w.top,f.top),f.right=V1(w.right,f.right),f.bottom=V1(w.bottom,f.bottom),f.left=sh(w.left,f.left),f},H5(e,c,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function f8(e){var t=e.reference,r=e.element,n=e.placement,o=n?j0(n):null,u=n?cp(n):null,c=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,f;switch(o){case ac:f={x:c,y:t.y-r.height};break;case Xc:f={x:c,y:t.y+t.height};break;case Yc:f={x:t.x+t.width,y:s};break;case sc:f={x:t.x-r.width,y:s};break;default:f={x:t.x,y:t.y}}var v=o?wv(o):null;if(v!=null){var w=v==="y"?"height":"width";switch(u){case sp:f[v]=f[v]-(t[w]/2-r[w]/2);break;case cd:f[v]=f[v]+(t[w]/2-r[w]/2);break}}return f}function fd(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=n===void 0?e.placement:n,u=r.strategy,c=u===void 0?e.strategy:u,s=r.boundary,f=s===void 0?bT:s,v=r.rootBoundary,w=v===void 0?r8:v,E=r.elementContext,L=E===void 0?Op:E,C=r.altBoundary,F=C===void 0?!1:C,B=r.padding,G=B===void 0?0:B,H=l8(typeof G!="number"?G:u8(G,Sd)),Z=L===Op?wT:Op,ee=e.rects.popper,Y=e.elements[F?Z:L],le=QT(fh(Y)?Y:Y.contextElement||qf(e.elements.popper),f,w,c),ce=up(e.elements.reference),ve=f8({reference:ce,element:ee,strategy:"absolute",placement:o}),pe=ny(Object.assign({},ee,ve)),Ne=L===Op?pe:ce,Ve={top:le.top-Ne.top+H.top,bottom:Ne.bottom-le.bottom+H.bottom,left:le.left-Ne.left+H.left,right:Ne.right-le.right+H.right},be=e.modifiersData.offset;if(L===Op&&be){var Ce=be[o];Object.keys(Ve).forEach(function(Oe){var nt=[Yc,Xc].indexOf(Oe)>=0?1:-1,mt=[ac,Xc].indexOf(Oe)>=0?"y":"x";Ve[Oe]+=Ce[mt]*nt})}return Ve}function eP(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=r.boundary,u=r.rootBoundary,c=r.padding,s=r.flipVariations,f=r.allowedAutoPlacements,v=f===void 0?n8:f,w=cp(n),E=w?s?q5:q5.filter(function(F){return cp(F)===w}):Sd,L=E.filter(function(F){return v.indexOf(F)>=0});L.length===0&&(L=E);var C=L.reduce(function(F,B){return F[B]=fd(e,{placement:B,boundary:o,rootBoundary:u,padding:c})[j0(B)],F},{});return Object.keys(C).sort(function(F,B){return C[F]-C[B]})}function tP(e){if(j0(e)===vv)return[];var t=C1(e);return[G5(e),t,G5(t)]}function rP(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,s=c===void 0?!0:c,f=r.fallbackPlacements,v=r.padding,w=r.boundary,E=r.rootBoundary,L=r.altBoundary,C=r.flipVariations,F=C===void 0?!0:C,B=r.allowedAutoPlacements,G=t.options.placement,H=j0(G),Z=H===G,ee=f||(Z||!F?[C1(G)]:tP(G)),Y=[G].concat(ee).reduce(function(Pe,dt){return Pe.concat(j0(dt)===vv?eP(t,{placement:dt,boundary:w,rootBoundary:E,padding:v,flipVariations:F,allowedAutoPlacements:B}):dt)},[]),le=t.rects.reference,ce=t.rects.popper,ve=new Map,pe=!0,Ne=Y[0],Ve=0;Ve<Y.length;Ve++){var be=Y[Ve],Ce=j0(be),Oe=cp(be)===sp,nt=[ac,Xc].indexOf(Ce)>=0,mt=nt?"width":"height",ht=fd(t,{placement:be,boundary:w,rootBoundary:E,altBoundary:L,padding:v}),He=nt?Oe?Yc:sc:Oe?Xc:ac;le[mt]>ce[mt]&&(He=C1(He));var ut=C1(He),bt=[];if(u&&bt.push(ht[Ce]<=0),s&&bt.push(ht[He]<=0,ht[ut]<=0),bt.every(function(Pe){return Pe})){Ne=be,pe=!1;break}ve.set(be,bt)}if(pe)for(var Xe=F?3:1,We=function(dt){var Et=Y.find(function(Pt){var Kt=ve.get(Pt);if(Kt)return Kt.slice(0,dt).every(function($t){return $t})});if(Et)return Ne=Et,"break"},ke=Xe;ke>0;ke--){var Re=We(ke);if(Re==="break")break}t.placement!==Ne&&(t.modifiersData[n]._skip=!0,t.placement=Ne,t.reset=!0)}}const nP={name:"flip",enabled:!0,phase:"main",fn:rP,requiresIfExists:["offset"],data:{_skip:!1}};function W5(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Z5(e){return[ac,Yc,Xc,sc].some(function(t){return e[t]>=0})}function iP(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,u=t.modifiersData.preventOverflow,c=fd(t,{elementContext:"reference"}),s=fd(t,{altBoundary:!0}),f=W5(c,n),v=W5(s,o,u),w=Z5(f),E=Z5(v);t.modifiersData[r]={referenceClippingOffsets:f,popperEscapeOffsets:v,isReferenceHidden:w,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":E})}const oP={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iP};function aP(e,t,r){var n=j0(e),o=[sc,ac].indexOf(n)>=0?-1:1,u=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,c=u[0],s=u[1];return c=c||0,s=(s||0)*o,[sc,Yc].indexOf(n)>=0?{x:s,y:c}:{x:c,y:s}}function sP(e){var t=e.state,r=e.options,n=e.name,o=r.offset,u=o===void 0?[0,0]:o,c=n8.reduce(function(w,E){return w[E]=aP(E,t.rects,u),w},{}),s=c[t.placement],f=s.x,v=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=v),t.modifiersData[n]=c}const lP={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sP};function uP(e){var t=e.state,r=e.name;t.modifiersData[r]=f8({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const cP={name:"popperOffsets",enabled:!0,phase:"read",fn:uP,data:{}};function fP(e){return e==="x"?"y":"x"}function hP(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,s=c===void 0?!1:c,f=r.boundary,v=r.rootBoundary,w=r.altBoundary,E=r.padding,L=r.tether,C=L===void 0?!0:L,F=r.tetherOffset,B=F===void 0?0:F,G=fd(t,{boundary:f,rootBoundary:v,padding:E,altBoundary:w}),H=j0(t.placement),Z=cp(t.placement),ee=!Z,Y=wv(H),le=fP(Y),ce=t.modifiersData.popperOffsets,ve=t.rects.reference,pe=t.rects.popper,Ne=typeof B=="function"?B(Object.assign({},t.rects,{placement:t.placement})):B,Ve=typeof Ne=="number"?{mainAxis:Ne,altAxis:Ne}:Object.assign({mainAxis:0,altAxis:0},Ne),be=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ce={x:0,y:0};if(ce){if(u){var Oe,nt=Y==="y"?ac:sc,mt=Y==="y"?Xc:Yc,ht=Y==="y"?"height":"width",He=ce[Y],ut=He+G[nt],bt=He-G[mt],Xe=C?-pe[ht]/2:0,We=Z===sp?ve[ht]:pe[ht],ke=Z===sp?-pe[ht]:-ve[ht],Re=t.elements.arrow,Pe=C&&Re?bv(Re):{width:0,height:0},dt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:s8(),Et=dt[nt],Pt=dt[mt],Kt=Yp(0,ve[ht],Pe[ht]),$t=ee?ve[ht]/2-Xe-Kt-Et-Ve.mainAxis:We-Kt-Et-Ve.mainAxis,br=ee?-ve[ht]/2+Xe+Kt+Pt+Ve.mainAxis:ke+Kt+Pt+Ve.mainAxis,Gt=t.elements.arrow&&Cd(t.elements.arrow),Rr=Gt?Y==="y"?Gt.clientTop||0:Gt.clientLeft||0:0,Mr=(Oe=be==null?void 0:be[Y])!=null?Oe:0,Kr=He+$t-Mr-Rr,Ct=He+br-Mr,pt=Yp(C?V1(ut,Kr):ut,He,C?sh(bt,Ct):bt);ce[Y]=pt,Ce[Y]=pt-He}if(s){var Dr,ln=Y==="x"?ac:sc,Wt=Y==="x"?Xc:Yc,Ur=ce[le],dn=le==="y"?"height":"width",tn=Ur+G[ln],Bn=Ur-G[Wt],Jn=[ac,sc].indexOf(H)!==-1,ai=(Dr=be==null?void 0:be[le])!=null?Dr:0,_i=Jn?tn:Ur-ve[dn]-pe[dn]-ai+Ve.altAxis,hi=Jn?Ur+ve[dn]+pe[dn]-ai-Ve.altAxis:Bn,yr=C&&Jn?RT(_i,Ur,hi):Yp(C?_i:tn,Ur,C?hi:Bn);ce[le]=yr,Ce[le]=yr-Ur}t.modifiersData[n]=Ce}}const pP={name:"preventOverflow",enabled:!0,phase:"main",fn:hP,requiresIfExists:["offset"]};function dP(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function mP(e){return e===Kc(e)||!Zc(e)?xv(e):dP(e)}function gP(e){var t=e.getBoundingClientRect(),r=lp(t.width)/e.offsetWidth||1,n=lp(t.height)/e.offsetHeight||1;return r!==1||n!==1}function yP(e,t,r){r===void 0&&(r=!1);var n=Zc(t),o=Zc(t)&&gP(t),u=qf(t),c=up(e,o,r),s={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(n||!n&&!r)&&(($0(t)!=="body"||Av(u))&&(s=mP(t)),Zc(t)?(f=up(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):u&&(f.x=kv(u))),{x:c.left+s.scrollLeft-f.x,y:c.top+s.scrollTop-f.y,width:c.width,height:c.height}}function vP(e){var t=new Map,r=new Set,n=[];e.forEach(function(u){t.set(u.name,u)});function o(u){r.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(s){if(!r.has(s)){var f=t.get(s);f&&o(f)}}),n.push(u)}return e.forEach(function(u){r.has(u.name)||o(u)}),n}function _P(e){var t=vP(e);return PT.reduce(function(r,n){return r.concat(t.filter(function(o){return o.phase===n}))},[])}function bP(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function wP(e){var t=e.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var X5={placement:"bottom",modifiers:[],strategy:"absolute"};function Y5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function xP(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,o=t.defaultOptions,u=o===void 0?X5:o;return function(s,f,v){v===void 0&&(v=u);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},X5,u),modifiersData:{},elements:{reference:s,popper:f},attributes:{},styles:{}},E=[],L=!1,C={state:w,setOptions:function(H){var Z=typeof H=="function"?H(w.options):H;B(),w.options=Object.assign({},u,w.options,Z),w.scrollParents={reference:fh(s)?Jp(s):s.contextElement?Jp(s.contextElement):[],popper:Jp(f)};var ee=_P(wP([].concat(n,w.options.modifiers)));return w.orderedModifiers=ee.filter(function(Y){return Y.enabled}),F(),C.update()},forceUpdate:function(){if(!L){var H=w.elements,Z=H.reference,ee=H.popper;if(Y5(Z,ee)){w.rects={reference:yP(Z,Cd(ee),w.options.strategy==="fixed"),popper:bv(ee)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(Ve){return w.modifiersData[Ve.name]=Object.assign({},Ve.data)});for(var Y=0;Y<w.orderedModifiers.length;Y++){if(w.reset===!0){w.reset=!1,Y=-1;continue}var le=w.orderedModifiers[Y],ce=le.fn,ve=le.options,pe=ve===void 0?{}:ve,Ne=le.name;typeof ce=="function"&&(w=ce({state:w,options:pe,name:Ne,instance:C})||w)}}}},update:bP(function(){return new Promise(function(G){C.forceUpdate(),G(w)})}),destroy:function(){B(),L=!0}};if(!Y5(s,f))return C;C.setOptions(v).then(function(G){!L&&v.onFirstUpdate&&v.onFirstUpdate(G)});function F(){w.orderedModifiers.forEach(function(G){var H=G.name,Z=G.options,ee=Z===void 0?{}:Z,Y=G.effect;if(typeof Y=="function"){var le=Y({state:w,name:H,instance:C,options:ee}),ce=function(){};E.push(le||ce)}})}function B(){E.forEach(function(G){return G()}),E=[]}return C}}var kP=[HT,cP,$T,i8,lP,nP,pP,jT,oP],h8=xP({defaultModifiers:kP});function AP(e){let t=null,r,n,o=e;const u=()=>{r!==void 0&&n!==void 0&&(t=h8(r,n,o))},c=()=>{t!==null&&(t.destroy(),t=null)},s=w=>"subscribe"in w?(f(w),{}):(r=w,u(),{destroy(){c()}}),f=w=>{const E=w.subscribe(L=>{r===void 0?(r=L,u()):(Object.assign(r,L),t==null||t.update())});My(E)};return[s,(w,E)=>(n=w,o={...e,...E},u(),{update(L){o={...e,...L},t==null||t.setOptions(o)},destroy(){c()}}),()=>t]}var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});var p8=Ev.clickOutside=void 0;function EP(e,t){var r=function(n){return e&&!e.contains(n.target)&&!n.defaultPrevented&&t()};return document.addEventListener("click",r,!0),{destroy:function(){document.removeEventListener("click",r,!0)}}}p8=Ev.clickOutside=EP;function J5(e){let t,r;return{c(){t=ct("p"),r=Nn(e[1]),this.h()},l(n){t=ft(n,"P",{class:!0});var o=wt(t);r=Rn(o,e[1]),o.forEach(de),this.h()},h(){ye(t,"class","label svelte-18w7g2m")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&2&&No(r,n[1])},d(n){n&&de(t)}}}function K5(e){let t,r,n,o,u,c,s;function f(w){e[10](w)}let v={components:_T,isPopup:!0,isInput:!1,isTextInput:!1,isAlpha:!0,toRight:!0,isOpen:!0};return e[3]!==void 0&&(v.rgb=e[3]),r=new oT({props:v}),Ft.push(()=>Jt(r,"rgb",f)),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(w){t=ft(w,"DIV",{id:!0,class:!0});var E=wt(t);Yt(r.$$.fragment,E),E.forEach(de),this.h()},h(){ye(t,"id","tooltip"),ye(t,"class","svelte-18w7g2m")},m(w,E){It(w,t,E),jt(r,t,null),u=!0,c||(s=[uh(e[6].call(null,t,e[7])),uh(o=p8.call(null,t,e[11]))],c=!0)},p(w,E){const L={};!n&&E&8&&(n=!0,L.rgb=w[3],er(()=>n=!1)),r.$set(L),o&&y0(o.update)&&E&16&&o.update.call(null,w[11])},i(w){u||(Ze(r.$$.fragment,w),u=!0)},o(w){at(r.$$.fragment,w),u=!1},d(w){w&&de(t),Ut(r),c=!1,oa(s)}}}function SP(e){let t,r,n,o,u,c,s,f,v=!e[2]&&J5(e),w=e[4]&&K5(e);return{c(){t=ct("span"),r=ct("div"),n=pr(),v&&v.c(),o=pr(),w&&w.c(),u=Xi(),this.h()},l(E){t=ft(E,"SPAN",{class:!0,role:!0,tabindex:!0});var L=wt(t);r=ft(L,"DIV",{class:!0,title:!0,style:!0}),wt(r).forEach(de),n=dr(L),v&&v.l(L),L.forEach(de),o=dr(E),w&&w.l(E),u=Xi(),this.h()},h(){ye(r,"class","color-palette svelte-18w7g2m"),ye(r,"title",e[0]),zo(r,"background",e[0]),ye(t,"class","paletter-control svelte-18w7g2m"),ye(t,"role","button"),ye(t,"tabindex","0")},m(E,L){It(E,t,L),Qe(t,r),Qe(t,n),v&&v.m(t,null),It(E,o,L),w&&w.m(E,L),It(E,u,L),c=!0,s||(f=[Qr(t,"click",e[9]),Qr(t,"keydown",e[8]),uh(e[5].call(null,t))],s=!0)},p(E,[L]){(!c||L&1)&&ye(r,"title",E[0]),(!c||L&1)&&zo(r,"background",E[0]),E[2]?v&&(v.d(1),v=null):v?v.p(E,L):(v=J5(E),v.c(),v.m(t,null)),E[4]?w?(w.p(E,L),L&16&&Ze(w,1)):(w=K5(E),w.c(),Ze(w,1),w.m(u.parentNode,u)):w&&(Ui(),at(w,1,1,()=>{w=null}),qi())},i(E){c||(Ze(w),c=!0)},o(E){at(w),c=!1},d(E){E&&de(t),v&&v.d(),E&&de(o),w&&w.d(E),E&&de(u),s=!1,oa(f)}}}function CP(e,t,r){let{color:n}=t,{label:o="Choose a color"}=t,{hideLabel:u=!1}=t,c,s=!1;const f=gp(),[v,w]=AP({placement:"bottom",strategy:"fixed"}),E={modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{mainAxis:!0}}]},L=()=>{const Z=ap(n),ee=Z.rgb();r(3,c={r:ee[0],g:ee[1],b:ee[2],a:Z.alpha()})},C=()=>{c&&(r(0,n=ap([c.r,c.g,c.b,c.a]).css()),f("change",{color:n}))},F=Z=>{Z.key==="Enter"&&r(4,s=!s)},B=()=>r(4,s=!s);function G(Z){c=Z,r(3,c)}const H=()=>r(4,s=!1);return e.$$set=Z=>{"color"in Z&&r(0,n=Z.color),"label"in Z&&r(1,o=Z.label),"hideLabel"in Z&&r(2,u=Z.hideLabel)},e.$$.update=()=>{e.$$.dirty&1&&L(),e.$$.dirty&8&&C()},[n,o,u,c,s,v,w,E,F,B,G,H]}class d8 extends Pn{constructor(t){super(),Mn(this,t,CP,SP,Cn,{color:0,label:1,hideLabel:2})}}function IP(e){let t,r,n;function o(c){e[5](c)}let u={};return e[0]!==void 0&&(u.color=e[0]),t=new d8({props:u}),Ft.push(()=>Jt(t,"color",o)),t.$on("change",e[1]),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.color=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function LP(e,t,r){let{map:n}=t,{layer:o}=t,{propertyName:u}=t,s=(()=>{let w=n.getPaintProperty(o.id,u);return w=dv(w),w||(w="#000000"),w})();const f=mv(w=>{r(0,s=w.detail.color),n.setPaintProperty(o.id,u,s);const E=n.getStyle().layers.find(L=>L.id===o.id);E&&r(2,o=E)},100);function v(w){s=w,r(0,s)}return e.$$set=w=>{"map"in w&&r(3,n=w.map),"layer"in w&&r(2,o=w.layer),"propertyName"in w&&r(4,u=w.propertyName)},[s,f,o,n,u,v]}class cc extends Pn{constructor(t){super(),Mn(this,t,LP,IP,Cn,{map:3,layer:2,propertyName:4})}}function TP(e){let t,r,n;return r=new go({props:{icon:p7,size:e[0]}}),{c(){t=ct("a"),Bt(r.$$.fragment),this.h()},l(o){t=ft(o,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var u=wt(t);Yt(r.$$.fragment,u),u.forEach(de),this.h()},h(){ye(t,"class","help svelte-big87s"),ye(t,"href",e[1]),ye(t,"target","_blank"),ye(t,"rel","noreferrer"),ye(t,"role","button")},m(o,u){It(o,t,u),jt(r,t,null),n=!0},p(o,[u]){const c={};u&1&&(c.size=o[0]),r.$set(c),(!n||u&2)&&ye(t,"href",o[1])},i(o){n||(Ze(r.$$.fragment,o),n=!0)},o(o){at(r.$$.fragment,o),n=!1},d(o){o&&de(t),Ut(r)}}}const Pm="https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/";function PP(e,t,r){let{type:n=void 0}=t,{layerType:o}=t,{property:u=void 0}=t,{size:c="sm"}=t,s;return e.$$set=f=>{"type"in f&&r(2,n=f.type),"layerType"in f&&r(3,o=f.layerType),"property"in f&&r(4,u=f.property),"size"in f&&r(0,c=f.size)},e.$$.update=()=>{e.$$.dirty&28&&(n&&o&&u?r(1,s=`${Pm}#${n}-${o}-${u}`):o&&!n&&!u?r(1,s=`${Pm}#${o}`):r(1,s=Pm))},[c,s,n,o,u]}class m8 extends Pn{constructor(t){super(),Mn(this,t,PP,TP,Cn,{type:2,layerType:3,property:4,size:0})}}function Q5(e){let t,r,n,o,u;function c(w){e[4](w)}function s(w){e[5](w)}function f(w){e[6](w)}let v={};return e[0].type!==void 0&&(v.type=e[0].type),e[0].layerType!==void 0&&(v.layerType=e[0].layerType),e[0].property!==void 0&&(v.property=e[0].property),t=new m8({props:v}),Ft.push(()=>Jt(t,"type",c)),Ft.push(()=>Jt(t,"layerType",s)),Ft.push(()=>Jt(t,"property",f)),{c(){Bt(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){jt(t,w,E),u=!0},p(w,E){const L={};!r&&E&1&&(r=!0,L.type=w[0].type,er(()=>r=!1)),!n&&E&1&&(n=!0,L.layerType=w[0].layerType,er(()=>n=!1)),!o&&E&1&&(o=!0,L.property=w[0].property,er(()=>o=!1)),t.$set(L)},i(w){u||(Ze(t.$$.fragment,w),u=!0)},o(w){at(t.$$.fragment,w),u=!1},d(w){Ut(t,w)}}}function MP(e){let t,r,n,o,u,c,s,f=e[0]&&Q5(e);const v=e[3].default,w=Bu(v,e,e[2],null);return{c(){t=ct("div"),r=ct("label"),n=Nn(e[1]),o=pr(),f&&f.c(),u=pr(),c=ct("div"),w&&w.c(),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);r=ft(L,"LABEL",{class:!0});var C=wt(r);n=Rn(C,e[1]),o=dr(C),f&&f.l(C),C.forEach(de),u=dr(L),c=ft(L,"DIV",{class:!0});var F=wt(c);w&&w.l(F),F.forEach(de),L.forEach(de),this.h()},h(){ye(r,"class","label is-normal svelte-1ffgjvp"),ye(c,"class","control svelte-1ffgjvp"),ye(t,"class","field svelte-1ffgjvp")},m(E,L){It(E,t,L),Qe(t,r),Qe(r,n),Qe(r,o),f&&f.m(r,null),Qe(t,u),Qe(t,c),w&&w.m(c,null),s=!0},p(E,[L]){(!s||L&2)&&No(n,E[1]),E[0]?f?(f.p(E,L),L&1&&Ze(f,1)):(f=Q5(E),f.c(),Ze(f,1),f.m(r,null)):f&&(Ui(),at(f,1,1,()=>{f=null}),qi()),w&&w.p&&(!s||L&4)&&ju(w,v,E,E[2],s?qu(v,E[2],L,null):Uu(E[2]),null)},i(E){s||(Ze(f),Ze(w,E),s=!0)},o(E){at(f),at(w,E),s=!1},d(E){E&&de(t),f&&f.d(),w&&w.d(E)}}}function DP(e,t,r){let{$$slots:n={},$$scope:o}=t,{title:u}=t,{help:c=void 0}=t;function s(w){e.$$.not_equal(c.type,w)&&(c.type=w,r(0,c))}function f(w){e.$$.not_equal(c.layerType,w)&&(c.layerType=w,r(0,c))}function v(w){e.$$.not_equal(c.property,w)&&(c.property=w,r(0,c))}return e.$$set=w=>{"title"in w&&r(1,u=w.title),"help"in w&&r(0,c=w.help),"$$scope"in w&&r(2,o=w.$$scope)},[c,u,o,n,s,f,v]}class Zi extends Pn{constructor(t){super(),Mn(this,t,DP,MP,Cn,{title:1,help:0})}}function zP(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function NP(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={propertyName:"background-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function RP(e){let t,r,n,o;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"background",property:"background-opacity"},$$slots:{default:[zP]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Background color",help:{type:"paint",layerType:"background",property:"background-color"},$$slots:{default:[NP]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment)},l(u){Yt(t.$$.fragment,u),r=dr(u),Yt(n.$$.fragment,u)},m(u,c){jt(t,u,c),It(u,r,c),jt(n,u,c),o=!0},p(u,[c]){const s={};c&67&&(s.$$scope={dirty:c,ctx:u}),t.$set(s);const f={};c&67&&(f.$$scope={dirty:c,ctx:u}),n.$set(f)},i(u){o||(Ze(t.$$.fragment,u),Ze(n.$$.fragment,u),o=!0)},o(u){at(t.$$.fragment,u),at(n.$$.fragment,u),o=!1},d(u){Ut(t,u),u&&de(r),Ut(n,u)}}}function OP(e,t,r){let{map:n}=t,{layer:o}=t;function u(v){n=v,r(0,n)}function c(v){o=v,r(1,o)}function s(v){n=v,r(0,n)}function f(v){o=v,r(1,o)}return e.$$set=v=>{"map"in v&&r(0,n=v.map),"layer"in v&&r(1,o=v.layer)},[n,o,u,c,s,f]}class FP extends Pn{constructor(t){super(),Mn(this,t,OP,RP,Cn,{map:0,layer:1})}}function BP(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function jP(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={propertyName:"fill-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function UP(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={propertyName:"fill-outline-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function qP(e){let t,r,n,o,u,c;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"fill",property:"fill-opacity"},$$slots:{default:[BP]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Fill color",help:{type:"paint",layerType:"fill",property:"fill-color"},$$slots:{default:[jP]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Fill outline color",help:{type:"paint",layerType:"fill",property:"fill-outline-color"},$$slots:{default:[UP]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment)},l(s){Yt(t.$$.fragment,s),r=dr(s),Yt(n.$$.fragment,s),o=dr(s),Yt(u.$$.fragment,s)},m(s,f){jt(t,s,f),It(s,r,f),jt(n,s,f),It(s,o,f),jt(u,s,f),c=!0},p(s,[f]){const v={};f&259&&(v.$$scope={dirty:f,ctx:s}),t.$set(v);const w={};f&259&&(w.$$scope={dirty:f,ctx:s}),n.$set(w);const E={};f&259&&(E.$$scope={dirty:f,ctx:s}),u.$set(E)},i(s){c||(Ze(t.$$.fragment,s),Ze(n.$$.fragment,s),Ze(u.$$.fragment,s),c=!0)},o(s){at(t.$$.fragment,s),at(n.$$.fragment,s),at(u.$$.fragment,s),c=!1},d(s){Ut(t,s),s&&de(r),Ut(n,s),s&&de(o),Ut(u,s)}}}function VP(e,t,r){let{map:n}=t,{layer:o}=t;function u(E){n=E,r(0,n)}function c(E){o=E,r(1,o)}function s(E){n=E,r(0,n)}function f(E){o=E,r(1,o)}function v(E){n=E,r(0,n)}function w(E){o=E,r(1,o)}return e.$$set=E=>{"map"in E&&r(0,n=E.map),"layer"in E&&r(1,o=E.layer)},[n,o,u,c,s,f,v,w]}class $P extends Pn{constructor(t){super(),Mn(this,t,VP,qP,Cn,{map:0,layer:1})}}function GP(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function HP(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"line-width");return v||(v=1),v})();const s=()=>{c&&(n==null||n.setPaintProperty(o.id,"line-width",c))};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class WP extends Pn{constructor(t){super(),Mn(this,t,HP,GP,Cn,{map:1,layer:2})}}function ZP(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function XP(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"line-blur");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"line-blur",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class YP extends Pn{constructor(t){super(),Mn(this,t,XP,ZP,Cn,{map:1,layer:2})}}function e4(e,t,r){const n=e.slice();return n[3]=t[r],n}function t4(e){let t,r,n,o=e[3].title+"",u,c,s,f,v;function w(){return e[2](e[3])}return{c(){t=ct("p"),r=ct("button"),n=ct("span"),u=Nn(o),s=pr(),this.h()},l(E){t=ft(E,"P",{class:!0});var L=wt(t);r=ft(L,"BUTTON",{class:!0});var C=wt(r);n=ft(C,"SPAN",{class:!0});var F=wt(n);u=Rn(F,o),F.forEach(de),C.forEach(de),s=dr(L),L.forEach(de),this.h()},h(){ye(n,"class","svelte-1n4j3zv"),ye(r,"class",c=`button is-small ${JSON.stringify(e[3].value)==JSON.stringify(e[0])?"is-info is-light is-active":""} svelte-1n4j3zv`),ye(t,"class","control svelte-1n4j3zv")},m(E,L){It(E,t,L),Qe(t,r),Qe(r,n),Qe(n,u),Qe(t,s),f||(v=Qr(r,"click",w),f=!0)},p(E,L){e=E,L&2&&o!==(o=e[3].title+"")&&No(u,o),L&3&&c!==(c=`button is-small ${JSON.stringify(e[3].value)==JSON.stringify(e[0])?"is-info is-light is-active":""} svelte-1n4j3zv`)&&ye(r,"class",c)},d(E){E&&de(t),f=!1,v()}}}function r4(e){let t,r=e[1],n=[];for(let o=0;o<r.length;o+=1)n[o]=t4(e4(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=Xi()},l(o){for(let u=0;u<n.length;u+=1)n[u].l(o);t=Xi()},m(o,u){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(o,u);It(o,t,u)},p(o,u){if(u&3){r=o[1];let c;for(c=0;c<r.length;c+=1){const s=e4(o,r,c);n[c]?n[c].p(s,u):(n[c]=t4(s),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){ys(n,o),o&&de(t)}}}function JP(e){let t,r=e[0],n=r4(e);return{c(){t=ct("p"),n.c(),this.h()},l(o){t=ft(o,"P",{class:!0});var u=wt(t);n.l(u),u.forEach(de),this.h()},h(){ye(t,"class","buttons svelte-1n4j3zv")},m(o,u){It(o,t,u),n.m(t,null)},p(o,[u]){u&1&&Cn(r,r=o[0])?(n.d(1),n=r4(o),n.c(),n.m(t,null)):n.p(o,u)},i:Xn,o:Xn,d(o){o&&de(t),n.d(o)}}}function KP(e,t,r){let{options:n}=t,{selectedValue:o}=t;const u=c=>{r(0,o=JSON.parse(JSON.stringify(c.value)))};return e.$$set=c=>{"options"in c&&r(1,n=c.options),"selectedValue"in c&&r(0,o=c.selectedValue)},[o,n,u]}class y2 extends Pn{constructor(t){super(),Mn(this,t,KP,JP,Cn,{options:1,selectedValue:0})}}function QP(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[1]!==void 0&&(s.options=e[1]),e[0]!==void 0&&(s.selectedValue=e[0]),t=new y2({props:s}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,[v]){const w={};!r&&v&2&&(r=!0,w.options=f[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function eM(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"Solid",value:""},{title:" dash",value:[10,4]},{title:" dash dot",value:[10,3,2,3]},{title:" dot",value:[1,1]}],s=(()=>{let E=n.getPaintProperty(o.id,"line-dasharray");return E||(E=u[0].value),E})();const f=()=>{s?n==null||n.setPaintProperty(o.id,"line-dasharray",s):n==null||n.setPaintProperty(o.id,"line-dasharray",void 0);const E=n.getStyle().layers.find(L=>L.id===o.id);E&&r(2,o=E)};function v(E){u=E,r(1,u)}function w(E){s=E,r(0,s)}return e.$$set=E=>{"map"in E&&r(3,n=E.map),"layer"in E&&r(2,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&f()},[s,u,o,n,v,w]}class tM extends Pn{constructor(t){super(),Mn(this,t,eM,QP,Cn,{map:3,layer:2})}}function rM(e){let t,r,n,o,u=e[0]?"Delete heatmap":"Create heatmap",c,s,f;return{c(){t=ct("div"),r=ct("input"),n=pr(),o=ct("label"),c=Nn(u),this.h()},l(v){t=ft(v,"DIV",{class:!0});var w=wt(t);r=ft(w,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=dr(w),o=ft(w,"LABEL",{class:!0,for:!0});var E=wt(o);c=Rn(E,u),E.forEach(de),w.forEach(de),this.h()},h(){ye(r,"id","heatmapToggle"),ye(r,"type","checkbox"),ye(r,"name","heatmapToggle"),ye(r,"class","switch svelte-46p5i7"),ye(o,"class","switch-label svelte-46p5i7"),ye(o,"for","heatmapToggle"),ye(t,"class","field")},m(v,w){It(v,t,w),Qe(t,r),r.checked=e[0],Qe(t,n),Qe(t,o),Qe(o,c),s||(f=Qr(r,"change",e[3]),s=!0)},p(v,[w]){w&1&&(r.checked=v[0]),w&1&&u!==(u=v[0]?"Delete heatmap":"Create heatmap")&&No(c,u)},i:Xn,o:Xn,d(v){v&&de(t),s=!1,f()}}}function nM(e,t,r){let{map:n}=t,{layer:o}=t,u=`${o.id} heatmap`,c=!!n.getLayer(u);const s=()=>{if(n.getLayer(u))return;const w=o,E={id:u,type:"heatmap",source:w.source,"source-layer":w["source-layer"],layout:{visibility:"visible"},paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"heatmap-intensity":1,"heatmap-opacity":1,"heatmap-radius":30,"heatmap-weight":1}};E.minzoom=w.maxzoom??0,E.maxzoom=w.maxzoom??24,n.addLayer(E,w.id)},f=()=>{n.getLayer(u)&&n.removeLayer(u)};function v(){c=this.checked,r(0,c)}return e.$$set=w=>{"map"in w&&r(1,n=w.map),"layer"in w&&r(2,o=w.layer)},e.$$.update=()=>{e.$$.dirty&1&&c===!0&&s(),e.$$.dirty&1&&(c||f())},[c,n,o,v]}class g8 extends Pn{constructor(t){super(),Mn(this,t,nM,rM,Cn,{map:1,layer:2})}}function iM(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new g8({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function oM(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function aM(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={propertyName:"line-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function sM(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new WP({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function lM(e){let t,r,n,o;function u(f){e[10](f)}function c(f){e[11](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new tM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function uM(e){let t,r,n,o;function u(f){e[12](f)}function c(f){e[13](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new YP({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function cM(e){let t,r,n,o,u,c,s,f,v,w,E,L;return t=new Zi({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[iM]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"line",property:"line-opacity"},$$slots:{default:[oM]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Line color",help:{type:"paint",layerType:"line",property:"line-color"},$$slots:{default:[aM]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Line width",help:{type:"paint",layerType:"line",property:"line-width"},$$slots:{default:[sM]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Line pattern",help:{type:"paint",layerType:"line",property:"line-dasharray"},$$slots:{default:[lM]},$$scope:{ctx:e}}}),E=new Zi({props:{title:"Line blur",help:{type:"paint",layerType:"line",property:"line-blur"},$$slots:{default:[uM]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment),w=pr(),Bt(E.$$.fragment)},l(C){Yt(t.$$.fragment,C),r=dr(C),Yt(n.$$.fragment,C),o=dr(C),Yt(u.$$.fragment,C),c=dr(C),Yt(s.$$.fragment,C),f=dr(C),Yt(v.$$.fragment,C),w=dr(C),Yt(E.$$.fragment,C)},m(C,F){jt(t,C,F),It(C,r,F),jt(n,C,F),It(C,o,F),jt(u,C,F),It(C,c,F),jt(s,C,F),It(C,f,F),jt(v,C,F),It(C,w,F),jt(E,C,F),L=!0},p(C,[F]){const B={};F&16387&&(B.$$scope={dirty:F,ctx:C}),t.$set(B);const G={};F&16387&&(G.$$scope={dirty:F,ctx:C}),n.$set(G);const H={};F&16387&&(H.$$scope={dirty:F,ctx:C}),u.$set(H);const Z={};F&16387&&(Z.$$scope={dirty:F,ctx:C}),s.$set(Z);const ee={};F&16387&&(ee.$$scope={dirty:F,ctx:C}),v.$set(ee);const Y={};F&16387&&(Y.$$scope={dirty:F,ctx:C}),E.$set(Y)},i(C){L||(Ze(t.$$.fragment,C),Ze(n.$$.fragment,C),Ze(u.$$.fragment,C),Ze(s.$$.fragment,C),Ze(v.$$.fragment,C),Ze(E.$$.fragment,C),L=!0)},o(C){at(t.$$.fragment,C),at(n.$$.fragment,C),at(u.$$.fragment,C),at(s.$$.fragment,C),at(v.$$.fragment,C),at(E.$$.fragment,C),L=!1},d(C){Ut(t,C),C&&de(r),Ut(n,C),C&&de(o),Ut(u,C),C&&de(c),Ut(s,C),C&&de(f),Ut(v,C),C&&de(w),Ut(E,C)}}}function fM(e,t,r){let{map:n}=t,{layer:o}=t;function u(H){n=H,r(0,n)}function c(H){o=H,r(1,o)}function s(H){n=H,r(0,n)}function f(H){o=H,r(1,o)}function v(H){n=H,r(0,n)}function w(H){o=H,r(1,o)}function E(H){n=H,r(0,n)}function L(H){o=H,r(1,o)}function C(H){n=H,r(0,n)}function F(H){o=H,r(1,o)}function B(H){n=H,r(0,n)}function G(H){o=H,r(1,o)}return e.$$set=H=>{"map"in H&&r(0,n=H.map),"layer"in H&&r(1,o=H.layer)},[n,o,u,c,s,f,v,w,E,L,C,F,B,G]}class hM extends Pn{constructor(t){super(),Mn(this,t,fM,cM,Cn,{map:0,layer:1})}}function pM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function dM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"circle-radius");return v||(v=5),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"circle-radius",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class mM extends Pn{constructor(t){super(),Mn(this,t,dM,pM,Cn,{map:1,layer:2})}}function gM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function yM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"circle-stroke-width");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"circle-stroke-width",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class vM extends Pn{constructor(t){super(),Mn(this,t,yM,gM,Cn,{map:1,layer:2})}}function _M(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function bM(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new mM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function wM(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={propertyName:"circle-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function xM(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new vM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function kM(e){let t,r,n,o;function u(f){e[10](f)}function c(f){e[11](f)}let s={propertyName:"circle-stroke-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function AM(e){let t,r,n,o,u,c,s,f,v,w;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"circle",property:"circle-opacity"},$$slots:{default:[_M]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Circle radius",help:{type:"paint",layerType:"circle",property:"circle-radius"},$$slots:{default:[bM]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Circle color",help:{type:"paint",layerType:"circle",property:"circle-color"},$$slots:{default:[wM]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Circle stroke width",help:{type:"paint",layerType:"circle",property:"circle-stroke-width"},$$slots:{default:[xM]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Circle stroke color",help:{type:"paint",layerType:"circle",property:"circle-stroke-color"},$$slots:{default:[kM]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=dr(E),Yt(n.$$.fragment,E),o=dr(E),Yt(u.$$.fragment,E),c=dr(E),Yt(s.$$.fragment,E),f=dr(E),Yt(v.$$.fragment,E)},m(E,L){jt(t,E,L),It(E,r,L),jt(n,E,L),It(E,o,L),jt(u,E,L),It(E,c,L),jt(s,E,L),It(E,f,L),jt(v,E,L),w=!0},p(E,[L]){const C={};L&4099&&(C.$$scope={dirty:L,ctx:E}),t.$set(C);const F={};L&4099&&(F.$$scope={dirty:L,ctx:E}),n.$set(F);const B={};L&4099&&(B.$$scope={dirty:L,ctx:E}),u.$set(B);const G={};L&4099&&(G.$$scope={dirty:L,ctx:E}),s.$set(G);const H={};L&4099&&(H.$$scope={dirty:L,ctx:E}),v.$set(H)},i(E){w||(Ze(t.$$.fragment,E),Ze(n.$$.fragment,E),Ze(u.$$.fragment,E),Ze(s.$$.fragment,E),Ze(v.$$.fragment,E),w=!0)},o(E){at(t.$$.fragment,E),at(n.$$.fragment,E),at(u.$$.fragment,E),at(s.$$.fragment,E),at(v.$$.fragment,E),w=!1},d(E){Ut(t,E),E&&de(r),Ut(n,E),E&&de(o),Ut(u,E),E&&de(c),Ut(s,E),E&&de(f),Ut(v,E)}}}function EM(e,t,r){let{map:n}=t,{layer:o}=t;function u(B){n=B,r(0,n)}function c(B){o=B,r(1,o)}function s(B){n=B,r(0,n)}function f(B){o=B,r(1,o)}function v(B){n=B,r(0,n)}function w(B){o=B,r(1,o)}function E(B){n=B,r(0,n)}function L(B){o=B,r(1,o)}function C(B){n=B,r(0,n)}function F(B){o=B,r(1,o)}return e.$$set=B=>{"map"in B&&r(0,n=B.map),"layer"in B&&r(1,o=B.layer)},[n,o,u,c,s,f,v,w,E,L,C,F]}class SM extends Pn{constructor(t){super(),Mn(this,t,EM,AM,Cn,{map:0,layer:1})}}function CM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function IM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"icon-halo-width");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"icon-halo-width",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class LM extends Pn{constructor(t){super(),Mn(this,t,IM,CM,Cn,{map:1,layer:2})}}function TM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function PM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"icon-halo-blur");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"icon-halo-blur",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class MM extends Pn{constructor(t){super(),Mn(this,t,PM,TM,Cn,{map:1,layer:2})}}function DM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function zM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"icon-size");return v||(v=1),v})();const s=()=>{c&&(n==null||n.setLayoutProperty(o.id,"icon-size",c))};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class NM extends Pn{constructor(t){super(),Mn(this,t,zM,DM,Cn,{map:1,layer:2})}}function RM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function OM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"text-halo-width");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"text-halo-width",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class FM extends Pn{constructor(t){super(),Mn(this,t,OM,RM,Cn,{map:1,layer:2})}}function BM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function jM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"text-halo-blur");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"text-halo-blur",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class UM extends Pn{constructor(t){super(),Mn(this,t,jM,BM,Cn,{map:1,layer:2})}}function qM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:64,step:.1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function VM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"text-size");return v||(v=16),v})();const s=()=>{c&&(n==null||n.setLayoutProperty(o.id,"text-size",c))};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class $M extends Pn{constructor(t){super(),Mn(this,t,VM,qM,Cn,{map:1,layer:2})}}function GM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function HM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"text-rotate");return v||(v=0),v})();const s=()=>{n==null||n.setLayoutProperty(o.id,"text-rotate",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class WM extends Pn{constructor(t){super(),Mn(this,t,HM,GM,Cn,{map:1,layer:2})}}function ZM(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[1]!==void 0&&(s.options=e[1]),e[0]!==void 0&&(s.selectedValue=e[0]),t=new y2({props:s}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,[v]){const w={};!r&&v&2&&(r=!0,w.options=f[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function XM(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"Never",value:"never"},{title:"always",value:"always"},{title:"Cooperative",value:"cooperative"}],s=(()=>{let E=n.getLayoutProperty(o.id,"icon-overlap");return E||(E=u[0].value),E})();const f=()=>{n==null||n.setLayoutProperty(o.id,"icon-overlap",s)};function v(E){u=E,r(1,u)}function w(E){s=E,r(0,s)}return e.$$set=E=>{"map"in E&&r(2,n=E.map),"layer"in E&&r(3,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&f()},[s,u,n,o,v,w]}class YM extends Pn{constructor(t){super(),Mn(this,t,XM,ZM,Cn,{map:2,layer:3})}}function JM(e){let t,r,n,o;function u(f){e[5](f)}function c(f){e[6](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new g8({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function KM(e){let t,r,n,o;function u(f){e[7](f)}function c(f){e[8](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function QM(e){var v;let t,r,n,o,u=(v=e[2])==null?void 0:v.isSdf(e[1]),c,s;t=new Zi({props:{title:"Icon size",help:{type:"layout",layerType:"symbol",property:"icon-size"},$$slots:{default:[eD]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Icon overlap",help:{type:"layout",layerType:"symbol",property:"icon-overlap"},$$slots:{default:[tD]},$$scope:{ctx:e}}});let f=u&&n4(e);return{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),f&&f.c(),c=Xi()},l(w){Yt(t.$$.fragment,w),r=dr(w),Yt(n.$$.fragment,w),o=dr(w),f&&f.l(w),c=Xi()},m(w,E){jt(t,w,E),It(w,r,E),jt(n,w,E),It(w,o,E),f&&f.m(w,E),It(w,c,E),s=!0},p(w,E){var F;const L={};E[0]&3|E[1]&4&&(L.$$scope={dirty:E,ctx:w}),t.$set(L);const C={};E[0]&3|E[1]&4&&(C.$$scope={dirty:E,ctx:w}),n.$set(C),E[0]&6&&(u=(F=w[2])==null?void 0:F.isSdf(w[1])),u?f?(f.p(w,E),E[0]&6&&Ze(f,1)):(f=n4(w),f.c(),Ze(f,1),f.m(c.parentNode,c)):f&&(Ui(),at(f,1,1,()=>{f=null}),qi())},i(w){s||(Ze(t.$$.fragment,w),Ze(n.$$.fragment,w),Ze(f),s=!0)},o(w){at(t.$$.fragment,w),at(n.$$.fragment,w),at(f),s=!1},d(w){Ut(t,w),w&&de(r),Ut(n,w),w&&de(o),f&&f.d(w),w&&de(c)}}}function eD(e){let t,r,n,o;function u(f){e[9](f)}function c(f){e[10](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new NM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function tD(e){let t,r,n,o;function u(f){e[11](f)}function c(f){e[12](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new YM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function n4(e){let t,r,n,o,u,c,s,f;return t=new Zi({props:{title:"Icon color",help:{type:"paint",layerType:"symbol",property:"icon-color"},$$slots:{default:[rD]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Icon halo color",help:{type:"paint",layerType:"symbol",property:"icon-halo-color"},$$slots:{default:[nD]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Icon halo width",help:{type:"paint",layerType:"symbol",property:"icon-halo-width"},$$slots:{default:[iD]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Icon halo blur",help:{type:"paint",layerType:"symbol",property:"icon-halo-blur"},$$slots:{default:[oD]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment)},l(v){Yt(t.$$.fragment,v),r=dr(v),Yt(n.$$.fragment,v),o=dr(v),Yt(u.$$.fragment,v),c=dr(v),Yt(s.$$.fragment,v)},m(v,w){jt(t,v,w),It(v,r,w),jt(n,v,w),It(v,o,w),jt(u,v,w),It(v,c,w),jt(s,v,w),f=!0},p(v,w){const E={};w[0]&3|w[1]&4&&(E.$$scope={dirty:w,ctx:v}),t.$set(E);const L={};w[0]&3|w[1]&4&&(L.$$scope={dirty:w,ctx:v}),n.$set(L);const C={};w[0]&3|w[1]&4&&(C.$$scope={dirty:w,ctx:v}),u.$set(C);const F={};w[0]&3|w[1]&4&&(F.$$scope={dirty:w,ctx:v}),s.$set(F)},i(v){f||(Ze(t.$$.fragment,v),Ze(n.$$.fragment,v),Ze(u.$$.fragment,v),Ze(s.$$.fragment,v),f=!0)},o(v){at(t.$$.fragment,v),at(n.$$.fragment,v),at(u.$$.fragment,v),at(s.$$.fragment,v),f=!1},d(v){Ut(t,v),v&&de(r),Ut(n,v),v&&de(o),Ut(u,v),v&&de(c),Ut(s,v)}}}function rD(e){let t,r,n,o;function u(f){e[13](f)}function c(f){e[14](f)}let s={propertyName:"icon-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function nD(e){let t,r,n,o;function u(f){e[15](f)}function c(f){e[16](f)}let s={propertyName:"icon-halo-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function iD(e){let t,r,n,o;function u(f){e[17](f)}function c(f){e[18](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new LM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function oD(e){let t,r,n,o;function u(f){e[19](f)}function c(f){e[20](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new MM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function aD(e){let t,r,n,o,u,c,s,f,v,w,E,L;return t=new Zi({props:{title:"Text size",help:{type:"layout",layerType:"symbol",property:"text-size"},$$slots:{default:[sD]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Text color",help:{type:"paint",layerType:"symbol",property:"text-color"},$$slots:{default:[lD]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Text rotate",help:{type:"layout",layerType:"symbol",property:"text-rotate"},$$slots:{default:[uD]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Text halo color",help:{type:"paint",layerType:"symbol",property:"text-halo-color"},$$slots:{default:[cD]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Text halo width",help:{type:"paint",layerType:"symbol",property:"text-halo-width"},$$slots:{default:[fD]},$$scope:{ctx:e}}}),E=new Zi({props:{title:"Text halo blur",help:{type:"paint",layerType:"symbol",property:"text-halo-blur"},$$slots:{default:[hD]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment),w=pr(),Bt(E.$$.fragment)},l(C){Yt(t.$$.fragment,C),r=dr(C),Yt(n.$$.fragment,C),o=dr(C),Yt(u.$$.fragment,C),c=dr(C),Yt(s.$$.fragment,C),f=dr(C),Yt(v.$$.fragment,C),w=dr(C),Yt(E.$$.fragment,C)},m(C,F){jt(t,C,F),It(C,r,F),jt(n,C,F),It(C,o,F),jt(u,C,F),It(C,c,F),jt(s,C,F),It(C,f,F),jt(v,C,F),It(C,w,F),jt(E,C,F),L=!0},p(C,F){const B={};F[0]&3|F[1]&4&&(B.$$scope={dirty:F,ctx:C}),t.$set(B);const G={};F[0]&3|F[1]&4&&(G.$$scope={dirty:F,ctx:C}),n.$set(G);const H={};F[0]&3|F[1]&4&&(H.$$scope={dirty:F,ctx:C}),u.$set(H);const Z={};F[0]&3|F[1]&4&&(Z.$$scope={dirty:F,ctx:C}),s.$set(Z);const ee={};F[0]&3|F[1]&4&&(ee.$$scope={dirty:F,ctx:C}),v.$set(ee);const Y={};F[0]&3|F[1]&4&&(Y.$$scope={dirty:F,ctx:C}),E.$set(Y)},i(C){L||(Ze(t.$$.fragment,C),Ze(n.$$.fragment,C),Ze(u.$$.fragment,C),Ze(s.$$.fragment,C),Ze(v.$$.fragment,C),Ze(E.$$.fragment,C),L=!0)},o(C){at(t.$$.fragment,C),at(n.$$.fragment,C),at(u.$$.fragment,C),at(s.$$.fragment,C),at(v.$$.fragment,C),at(E.$$.fragment,C),L=!1},d(C){Ut(t,C),C&&de(r),Ut(n,C),C&&de(o),Ut(u,C),C&&de(c),Ut(s,C),C&&de(f),Ut(v,C),C&&de(w),Ut(E,C)}}}function sD(e){let t,r,n,o;function u(f){e[21](f)}function c(f){e[22](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new $M({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function lD(e){let t,r,n,o;function u(f){e[23](f)}function c(f){e[24](f)}let s={propertyName:"text-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function uD(e){let t,r,n,o;function u(f){e[25](f)}function c(f){e[26](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new WM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function cD(e){let t,r,n,o;function u(f){e[27](f)}function c(f){e[28](f)}let s={propertyName:"text-halo-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function fD(e){let t,r,n,o;function u(f){e[29](f)}function c(f){e[30](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new FM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function hD(e){let t,r,n,o;function u(f){e[31](f)}function c(f){e[32](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new UM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function pD(e){let t,r,n,o,u,c,s;t=new Zi({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[JM]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"symbol",property:"icon-opacity"},$$slots:{default:[KM]},$$scope:{ctx:e}}});let f=e[3]&&QM(e),v=e[4]&&aD(e);return{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),f&&f.c(),u=pr(),v&&v.c(),c=Xi()},l(w){Yt(t.$$.fragment,w),r=dr(w),Yt(n.$$.fragment,w),o=dr(w),f&&f.l(w),u=dr(w),v&&v.l(w),c=Xi()},m(w,E){jt(t,w,E),It(w,r,E),jt(n,w,E),It(w,o,E),f&&f.m(w,E),It(w,u,E),v&&v.m(w,E),It(w,c,E),s=!0},p(w,E){const L={};E[0]&3|E[1]&4&&(L.$$scope={dirty:E,ctx:w}),t.$set(L);const C={};E[0]&3|E[1]&4&&(C.$$scope={dirty:E,ctx:w}),n.$set(C),w[3]&&f.p(w,E),w[4]&&v.p(w,E)},i(w){s||(Ze(t.$$.fragment,w),Ze(n.$$.fragment,w),Ze(f),Ze(v),s=!0)},o(w){at(t.$$.fragment,w),at(n.$$.fragment,w),at(f),at(v),s=!1},d(w){Ut(t,w),w&&de(r),Ut(n,w),w&&de(o),f&&f.d(w),w&&de(u),v&&v.d(w),w&&de(c)}}}function dD(e,t,r){let{map:n}=t,{layer:o}=t,{spriteLoader:u}=t,c=n.getLayoutProperty(o.id,"icon-image"),s=n.getLayoutProperty(o.id,"text-field");function f(Xe){n=Xe,r(0,n)}function v(Xe){o=Xe,r(1,o)}function w(Xe){n=Xe,r(0,n)}function E(Xe){o=Xe,r(1,o)}function L(Xe){n=Xe,r(0,n)}function C(Xe){o=Xe,r(1,o)}function F(Xe){n=Xe,r(0,n)}function B(Xe){o=Xe,r(1,o)}function G(Xe){n=Xe,r(0,n)}function H(Xe){o=Xe,r(1,o)}function Z(Xe){n=Xe,r(0,n)}function ee(Xe){o=Xe,r(1,o)}function Y(Xe){n=Xe,r(0,n)}function le(Xe){o=Xe,r(1,o)}function ce(Xe){n=Xe,r(0,n)}function ve(Xe){o=Xe,r(1,o)}function pe(Xe){n=Xe,r(0,n)}function Ne(Xe){o=Xe,r(1,o)}function Ve(Xe){n=Xe,r(0,n)}function be(Xe){o=Xe,r(1,o)}function Ce(Xe){n=Xe,r(0,n)}function Oe(Xe){o=Xe,r(1,o)}function nt(Xe){n=Xe,r(0,n)}function mt(Xe){o=Xe,r(1,o)}function ht(Xe){n=Xe,r(0,n)}function He(Xe){o=Xe,r(1,o)}function ut(Xe){n=Xe,r(0,n)}function bt(Xe){o=Xe,r(1,o)}return e.$$set=Xe=>{"map"in Xe&&r(0,n=Xe.map),"layer"in Xe&&r(1,o=Xe.layer),"spriteLoader"in Xe&&r(2,u=Xe.spriteLoader)},[n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt]}class mD extends Pn{constructor(t){super(),Mn(this,t,dD,pD,Cn,{map:0,layer:1,spriteLoader:2},null,[-1,-1])}}function gD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"m"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function yD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"fill-extrusion-height");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"fill-extrusion-height",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class vD extends Pn{constructor(t){super(),Mn(this,t,yD,gD,Cn,{map:1,layer:2})}}function _D(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"m"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function bD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"fill-extrusion-base");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"fill-extrusion-base",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class wD extends Pn{constructor(t){super(),Mn(this,t,bD,_D,Cn,{map:1,layer:2})}}function xD(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function kD(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={propertyName:"fill-extrusion-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function AD(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new vD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function ED(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new wD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function SD(e){let t,r,n,o,u,c,s,f;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-opacity"},$$slots:{default:[xD]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Fill extrusion color",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-color"},$$slots:{default:[kD]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Fill extrusion height",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-height"},$$slots:{default:[AD]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Fill extrusion base",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-base"},$$slots:{default:[ED]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment)},l(v){Yt(t.$$.fragment,v),r=dr(v),Yt(n.$$.fragment,v),o=dr(v),Yt(u.$$.fragment,v),c=dr(v),Yt(s.$$.fragment,v)},m(v,w){jt(t,v,w),It(v,r,w),jt(n,v,w),It(v,o,w),jt(u,v,w),It(v,c,w),jt(s,v,w),f=!0},p(v,[w]){const E={};w&1027&&(E.$$scope={dirty:w,ctx:v}),t.$set(E);const L={};w&1027&&(L.$$scope={dirty:w,ctx:v}),n.$set(L);const C={};w&1027&&(C.$$scope={dirty:w,ctx:v}),u.$set(C);const F={};w&1027&&(F.$$scope={dirty:w,ctx:v}),s.$set(F)},i(v){f||(Ze(t.$$.fragment,v),Ze(n.$$.fragment,v),Ze(u.$$.fragment,v),Ze(s.$$.fragment,v),f=!0)},o(v){at(t.$$.fragment,v),at(n.$$.fragment,v),at(u.$$.fragment,v),at(s.$$.fragment,v),f=!1},d(v){Ut(t,v),v&&de(r),Ut(n,v),v&&de(o),Ut(u,v),v&&de(c),Ut(s,v)}}}function CD(e,t,r){let{map:n}=t,{layer:o}=t;function u(C){n=C,r(0,n)}function c(C){o=C,r(1,o)}function s(C){n=C,r(0,n)}function f(C){o=C,r(1,o)}function v(C){n=C,r(0,n)}function w(C){o=C,r(1,o)}function E(C){n=C,r(0,n)}function L(C){o=C,r(1,o)}return e.$$set=C=>{"map"in C&&r(0,n=C.map),"layer"in C&&r(1,o=C.layer)},[n,o,u,c,s,f,v,w,E,L]}class ID extends Pn{constructor(t){super(),Mn(this,t,CD,SD,Cn,{map:0,layer:1})}}function LD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"%"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function TD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"hillshade-exaggeration");return v||(v=.5),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"hillshade-exaggeration",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class PD extends Pn{constructor(t){super(),Mn(this,t,TD,LD,Cn,{map:1,layer:2})}}function MD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function DD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"hillshade-illumination-direction");return v||(v=335),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"hillshade-illumination-direction",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class zD extends Pn{constructor(t){super(),Mn(this,t,DD,MD,Cn,{map:1,layer:2})}}function ND(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new PD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function RD(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={propertyName:"hillshade-accent-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function OD(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={propertyName:"hillshade-highlight-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function FD(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new zD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function BD(e){let t,r,n,o;function u(f){e[10](f)}function c(f){e[11](f)}let s={propertyName:"hillshade-shadow-color"};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new cc({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function jD(e){let t,r,n,o,u,c,s,f,v,w;return t=new Zi({props:{title:"Hillshade exaggeration",help:{type:"paint",layerType:"hillshade",property:"hillshade-exaggeration"},$$slots:{default:[ND]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Hillshade accent color",help:{type:"paint",layerType:"hillshade",property:"hillshade-accent-color"},$$slots:{default:[RD]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Hillshade highlight color",help:{type:"paint",layerType:"hillshade",property:"hillshade-highlight-color"},$$slots:{default:[OD]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Hillshade illumination direction",help:{type:"paint",layerType:"hillshade",property:"hillshade-illumination-direction"},$$slots:{default:[FD]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Hillshade shadow color",help:{type:"paint",layerType:"hillshade",property:"hillshade-shadow-color"},$$slots:{default:[BD]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=dr(E),Yt(n.$$.fragment,E),o=dr(E),Yt(u.$$.fragment,E),c=dr(E),Yt(s.$$.fragment,E),f=dr(E),Yt(v.$$.fragment,E)},m(E,L){jt(t,E,L),It(E,r,L),jt(n,E,L),It(E,o,L),jt(u,E,L),It(E,c,L),jt(s,E,L),It(E,f,L),jt(v,E,L),w=!0},p(E,[L]){const C={};L&4099&&(C.$$scope={dirty:L,ctx:E}),t.$set(C);const F={};L&4099&&(F.$$scope={dirty:L,ctx:E}),n.$set(F);const B={};L&4099&&(B.$$scope={dirty:L,ctx:E}),u.$set(B);const G={};L&4099&&(G.$$scope={dirty:L,ctx:E}),s.$set(G);const H={};L&4099&&(H.$$scope={dirty:L,ctx:E}),v.$set(H)},i(E){w||(Ze(t.$$.fragment,E),Ze(n.$$.fragment,E),Ze(u.$$.fragment,E),Ze(s.$$.fragment,E),Ze(v.$$.fragment,E),w=!0)},o(E){at(t.$$.fragment,E),at(n.$$.fragment,E),at(u.$$.fragment,E),at(s.$$.fragment,E),at(v.$$.fragment,E),w=!1},d(E){Ut(t,E),E&&de(r),Ut(n,E),E&&de(o),Ut(u,E),E&&de(c),Ut(s,E),E&&de(f),Ut(v,E)}}}function UD(e,t,r){let{map:n}=t,{layer:o}=t;function u(B){n=B,r(0,n)}function c(B){o=B,r(1,o)}function s(B){n=B,r(0,n)}function f(B){o=B,r(1,o)}function v(B){n=B,r(0,n)}function w(B){o=B,r(1,o)}function E(B){n=B,r(0,n)}function L(B){o=B,r(1,o)}function C(B){n=B,r(0,n)}function F(B){o=B,r(1,o)}return e.$$set=B=>{"map"in B&&r(0,n=B.map),"layer"in B&&r(1,o=B.layer)},[n,o,u,c,s,f,v,w,E,L,C,F]}class qD extends Pn{constructor(t){super(),Mn(this,t,UD,jD,Cn,{map:0,layer:1})}}function VD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function $D(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-brightness-max");return v||(v=1),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"raster-brightness-max",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class GD extends Pn{constructor(t){super(),Mn(this,t,$D,VD,Cn,{map:1,layer:2})}}function HD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function WD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-brightness-min");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"raster-brightness-min",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class ZD extends Pn{constructor(t){super(),Mn(this,t,WD,HD,Cn,{map:1,layer:2})}}function XD(e){let t,r,n;function o(c){e[3](c)}let u={min:-1,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function YD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-contrast");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"raster-contrast",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class JD extends Pn{constructor(t){super(),Mn(this,t,YD,XD,Cn,{map:1,layer:2})}}function KD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function QD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-hue-rotate");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"raster-hue-rotate",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class ez extends Pn{constructor(t){super(),Mn(this,t,QD,KD,Cn,{map:1,layer:2})}}function tz(e){let t,r,n;function o(c){e[3](c)}let u={min:-1,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function rz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-saturation");return v||(v=0),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"raster-saturation",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class nz extends Pn{constructor(t){super(),Mn(this,t,rz,tz,Cn,{map:1,layer:2})}}function iz(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[1]!==void 0&&(s.options=e[1]),e[0]!==void 0&&(s.selectedValue=e[0]),t=new y2({props:s}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,[v]){const w={};!r&&v&2&&(r=!0,w.options=f[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function oz(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"linear",value:"linear"},{title:"nearest",value:"nearest"}],s=(()=>{let E=n.getPaintProperty(o.id,"raster-resampling");return E||(E=u[0].value),E})();const f=()=>{n==null||n.setPaintProperty(o.id,"raster-resampling",s)};function v(E){u=E,r(1,u)}function w(E){s=E,r(0,s)}return e.$$set=E=>{"map"in E&&r(2,n=E.map),"layer"in E&&r(3,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&f()},[s,u,n,o,v,w]}class az extends Pn{constructor(t){super(),Mn(this,t,oz,iz,Cn,{map:2,layer:3})}}function sz(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function lz(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new GD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function uz(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new ZD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function cz(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new JD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function fz(e){let t,r,n,o;function u(f){e[10](f)}function c(f){e[11](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new ez({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function hz(e){let t,r,n,o;function u(f){e[12](f)}function c(f){e[13](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new az({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function pz(e){let t,r,n,o;function u(f){e[14](f)}function c(f){e[15](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new nz({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function dz(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"raster",property:"raster-opacity"},$$slots:{default:[sz]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Raster brightness max",help:{type:"paint",layerType:"raster",property:"raster-brightness-max"},$$slots:{default:[lz]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Raster brightness min",help:{type:"paint",layerType:"raster",property:"raster-brightness-min"},$$slots:{default:[uz]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Raster contrast",help:{type:"paint",layerType:"raster",property:"raster-contrast"},$$slots:{default:[cz]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Raster hue rotate",help:{type:"paint",layerType:"raster",property:"raster-hue-rotate"},$$slots:{default:[fz]},$$scope:{ctx:e}}}),E=new Zi({props:{title:"Raster resampling",help:{type:"paint",layerType:"raster",property:"raster-resampling"},$$slots:{default:[hz]},$$scope:{ctx:e}}}),C=new Zi({props:{title:"Raster saturation",help:{type:"paint",layerType:"raster",property:"raster-saturation"},$$slots:{default:[pz]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment),w=pr(),Bt(E.$$.fragment),L=pr(),Bt(C.$$.fragment)},l(B){Yt(t.$$.fragment,B),r=dr(B),Yt(n.$$.fragment,B),o=dr(B),Yt(u.$$.fragment,B),c=dr(B),Yt(s.$$.fragment,B),f=dr(B),Yt(v.$$.fragment,B),w=dr(B),Yt(E.$$.fragment,B),L=dr(B),Yt(C.$$.fragment,B)},m(B,G){jt(t,B,G),It(B,r,G),jt(n,B,G),It(B,o,G),jt(u,B,G),It(B,c,G),jt(s,B,G),It(B,f,G),jt(v,B,G),It(B,w,G),jt(E,B,G),It(B,L,G),jt(C,B,G),F=!0},p(B,[G]){const H={};G&65539&&(H.$$scope={dirty:G,ctx:B}),t.$set(H);const Z={};G&65539&&(Z.$$scope={dirty:G,ctx:B}),n.$set(Z);const ee={};G&65539&&(ee.$$scope={dirty:G,ctx:B}),u.$set(ee);const Y={};G&65539&&(Y.$$scope={dirty:G,ctx:B}),s.$set(Y);const le={};G&65539&&(le.$$scope={dirty:G,ctx:B}),v.$set(le);const ce={};G&65539&&(ce.$$scope={dirty:G,ctx:B}),E.$set(ce);const ve={};G&65539&&(ve.$$scope={dirty:G,ctx:B}),C.$set(ve)},i(B){F||(Ze(t.$$.fragment,B),Ze(n.$$.fragment,B),Ze(u.$$.fragment,B),Ze(s.$$.fragment,B),Ze(v.$$.fragment,B),Ze(E.$$.fragment,B),Ze(C.$$.fragment,B),F=!0)},o(B){at(t.$$.fragment,B),at(n.$$.fragment,B),at(u.$$.fragment,B),at(s.$$.fragment,B),at(v.$$.fragment,B),at(E.$$.fragment,B),at(C.$$.fragment,B),F=!1},d(B){Ut(t,B),B&&de(r),Ut(n,B),B&&de(o),Ut(u,B),B&&de(c),Ut(s,B),B&&de(f),Ut(v,B),B&&de(w),Ut(E,B),B&&de(L),Ut(C,B)}}}function mz(e,t,r){let{map:n}=t,{layer:o}=t;function u(ee){n=ee,r(0,n)}function c(ee){o=ee,r(1,o)}function s(ee){n=ee,r(0,n)}function f(ee){o=ee,r(1,o)}function v(ee){n=ee,r(0,n)}function w(ee){o=ee,r(1,o)}function E(ee){n=ee,r(0,n)}function L(ee){o=ee,r(1,o)}function C(ee){n=ee,r(0,n)}function F(ee){o=ee,r(1,o)}function B(ee){n=ee,r(0,n)}function G(ee){o=ee,r(1,o)}function H(ee){n=ee,r(0,n)}function Z(ee){o=ee,r(1,o)}return e.$$set=ee=>{"map"in ee&&r(0,n=ee.map),"layer"in ee&&r(1,o=ee.layer)},[n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z]}class gz extends Pn{constructor(t){super(),Mn(this,t,mz,dz,Cn,{map:0,layer:1})}}function yz(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function vz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-intensity");return v||(v=1),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"heatmap-intensity",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class _z extends Pn{constructor(t){super(),Mn(this,t,vz,yz,Cn,{map:1,layer:2})}}function bz(e){let t,r,n;function o(c){e[3](c)}let u={min:1,max:100,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function wz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-radius");return v||(v=30),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"heatmap-radius",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class xz extends Pn{constructor(t){super(),Mn(this,t,wz,bz,Cn,{map:1,layer:2})}}function kz(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,[s]){const f={};!r&&s&1&&(r=!0,f.value=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function Az(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-weight");return v||(v=30),v})();const s=()=>{n==null||n.setPaintProperty(o.id,"heatmap-weight",c)};function f(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&s()},[c,n,o,f]}class Ez extends Pn{constructor(t){super(),Mn(this,t,Az,kz,Cn,{map:1,layer:2})}}function i4(e,t,r){const n=e.slice();return n[11]=t[r],n[12]=t,n[13]=r,n}function o4(e){let t,r,n,o,u,c;function s(E){e[6](E,e[11])}function f(E){e[7](E,e[11])}function v(){return e[8](e[13])}let w={};return e[11].color!==void 0&&(w.color=e[11].color),e[11].value!==void 0&&(w.label=e[11].value),r=new d8({props:w}),Ft.push(()=>Jt(r,"color",s)),Ft.push(()=>Jt(r,"label",f)),r.$on("change",v),{c(){t=ct("div"),Bt(r.$$.fragment),u=pr(),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);Yt(r.$$.fragment,L),u=dr(L),L.forEach(de),this.h()},h(){ye(t,"class","row svelte-zzq0ed")},m(E,L){It(E,t,L),jt(r,t,null),Qe(t,u),c=!0},p(E,L){e=E;const C={};!n&&L&2&&(n=!0,C.color=e[11].color,er(()=>n=!1)),!o&&L&2&&(o=!0,C.label=e[11].value,er(()=>o=!1)),r.$set(C)},i(E){c||(Ze(r.$$.fragment,E),c=!0)},o(E){at(r.$$.fragment,E),c=!1},d(E){E&&de(t),Ut(r)}}}function Sz(e){let t,r,n,o,u,c,s=e[1],f=[];for(let w=0;w<s.length;w+=1)f[w]=o4(i4(e,s,w));const v=w=>at(f[w],1,1,()=>{f[w]=null});return{c(){t=ct("p"),r=Nn("Rendered by "),n=Nn(e[0]),o=pr(),u=ct("div");for(let w=0;w<f.length;w+=1)f[w].c();this.h()},l(w){t=ft(w,"P",{class:!0});var E=wt(t);r=Rn(E,"Rendered by "),n=Rn(E,e[0]),E.forEach(de),o=dr(w),u=ft(w,"DIV",{class:!0});var L=wt(u);for(let C=0;C<f.length;C+=1)f[C].l(L);L.forEach(de),this.h()},h(){ye(t,"class","description svelte-zzq0ed"),ye(u,"class","color-table svelte-zzq0ed")},m(w,E){It(w,t,E),Qe(t,r),Qe(t,n),It(w,o,E),It(w,u,E);for(let L=0;L<f.length;L+=1)f[L]&&f[L].m(u,null);c=!0},p(w,[E]){if((!c||E&1)&&No(n,w[0]),E&6){s=w[1];let L;for(L=0;L<s.length;L+=1){const C=i4(w,s,L);f[L]?(f[L].p(C,E),Ze(f[L],1)):(f[L]=o4(C),f[L].c(),Ze(f[L],1),f[L].m(u,null))}for(Ui(),L=s.length;L<f.length;L+=1)v(L);qi()}},i(w){if(!c){for(let E=0;E<s.length;E+=1)Ze(f[E]);c=!0}},o(w){f=f.filter(Boolean);for(let E=0;E<f.length;E+=1)at(f[E]);c=!1},d(w){w&&de(t),w&&de(o),w&&de(u),ys(f,w)}}}const a4=3;function Cz(e,t,r){let{map:n}=t,{layer:o}=t,u,c=[],f=(()=>{let F=n.getPaintProperty(o.id,"heatmap-color");if(F||(F=["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"]),F&&F.length>0&&F[0]!=="interpolate")throw Error("invalid color values");const B=F[2];r(0,u=B[0].replace("-"," ")),r(1,c=[]);for(let G=a4;G<F.length-1;G=G+2){const H=F[G],Z=F[G+1],ee=ap(Z);c.push({color:ee.css(),value:`${H}`})}return F})();const v=()=>{n==null||n.setPaintProperty(o.id,"heatmap-color",f)},w=mv(F=>{const B=c[F];r(5,f[a4+(F+1)*2-1]=B.color,f)},100);function E(F,B){e.$$.not_equal(B.color,F)&&(B.color=F,r(1,c))}function L(F,B){e.$$.not_equal(B.value,F)&&(B.value=F,r(1,c))}const C=F=>w(F);return e.$$set=F=>{"map"in F&&r(3,n=F.map),"layer"in F&&r(4,o=F.layer)},e.$$.update=()=>{e.$$.dirty&32&&v()},[u,c,w,n,o,f,E,L,C]}class Iz extends Pn{constructor(t){super(),Mn(this,t,Cz,Sz,Cn,{map:3,layer:4})}}function Lz(e){let t,r,n,o;function u(f){e[2](f)}function c(f){e[3](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Uf({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function Tz(e){let t,r,n,o;function u(f){e[4](f)}function c(f){e[5](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Iz({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function Pz(e){let t,r,n,o;function u(f){e[6](f)}function c(f){e[7](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new _z({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function Mz(e){let t,r,n,o;function u(f){e[8](f)}function c(f){e[9](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new xz({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function Dz(e){let t,r,n,o;function u(f){e[10](f)}function c(f){e[11](f)}let s={};return e[0]!==void 0&&(s.map=e[0]),e[1]!==void 0&&(s.layer=e[1]),t=new Ez({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v&1&&(r=!0,w.map=f[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=f[1],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function zz(e){let t,r,n,o,u,c,s,f,v,w;return t=new Zi({props:{title:"Opacity",help:{type:"paint",layerType:"heatmap",property:"heatmap-opacity"},$$slots:{default:[Lz]},$$scope:{ctx:e}}}),n=new Zi({props:{title:"Heatmap color",help:{type:"paint",layerType:"heatmap",property:"heatmap-color"},$$slots:{default:[Tz]},$$scope:{ctx:e}}}),u=new Zi({props:{title:"Heatmap intensity",help:{type:"paint",layerType:"heatmap",property:"heatmap-intensity"},$$slots:{default:[Pz]},$$scope:{ctx:e}}}),s=new Zi({props:{title:"Heatmap radius",help:{type:"paint",layerType:"heatmap",property:"heatmap-radius"},$$slots:{default:[Mz]},$$scope:{ctx:e}}}),v=new Zi({props:{title:"Heatmap weight",help:{type:"paint",layerType:"heatmap",property:"heatmap-weight"},$$slots:{default:[Dz]},$$scope:{ctx:e}}}),{c(){Bt(t.$$.fragment),r=pr(),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),c=pr(),Bt(s.$$.fragment),f=pr(),Bt(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=dr(E),Yt(n.$$.fragment,E),o=dr(E),Yt(u.$$.fragment,E),c=dr(E),Yt(s.$$.fragment,E),f=dr(E),Yt(v.$$.fragment,E)},m(E,L){jt(t,E,L),It(E,r,L),jt(n,E,L),It(E,o,L),jt(u,E,L),It(E,c,L),jt(s,E,L),It(E,f,L),jt(v,E,L),w=!0},p(E,[L]){const C={};L&4099&&(C.$$scope={dirty:L,ctx:E}),t.$set(C);const F={};L&4099&&(F.$$scope={dirty:L,ctx:E}),n.$set(F);const B={};L&4099&&(B.$$scope={dirty:L,ctx:E}),u.$set(B);const G={};L&4099&&(G.$$scope={dirty:L,ctx:E}),s.$set(G);const H={};L&4099&&(H.$$scope={dirty:L,ctx:E}),v.$set(H)},i(E){w||(Ze(t.$$.fragment,E),Ze(n.$$.fragment,E),Ze(u.$$.fragment,E),Ze(s.$$.fragment,E),Ze(v.$$.fragment,E),w=!0)},o(E){at(t.$$.fragment,E),at(n.$$.fragment,E),at(u.$$.fragment,E),at(s.$$.fragment,E),at(v.$$.fragment,E),w=!1},d(E){Ut(t,E),E&&de(r),Ut(n,E),E&&de(o),Ut(u,E),E&&de(c),Ut(s,E),E&&de(f),Ut(v,E)}}}function Nz(e,t,r){let{map:n}=t,{layer:o}=t;function u(B){n=B,r(0,n)}function c(B){o=B,r(1,o)}function s(B){n=B,r(0,n)}function f(B){o=B,r(1,o)}function v(B){n=B,r(0,n)}function w(B){o=B,r(1,o)}function E(B){n=B,r(0,n)}function L(B){o=B,r(1,o)}function C(B){n=B,r(0,n)}function F(B){o=B,r(1,o)}return e.$$set=B=>{"map"in B&&r(0,n=B.map),"layer"in B&&r(1,o=B.layer)},[n,o,u,c,s,f,v,w,E,L,C,F]}class Rz extends Pn{constructor(t){super(),Mn(this,t,Nz,zz,Cn,{map:0,layer:1})}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function y8(e){return typeof e>"u"||e===null}function Oz(e){return typeof e=="object"&&e!==null}function Fz(e){return Array.isArray(e)?e:y8(e)?[]:[e]}function Bz(e,t){var r,n,o,u;if(t)for(u=Object.keys(t),r=0,n=u.length;r<n;r+=1)o=u[r],e[o]=t[o];return e}function jz(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Uz(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var qz=y8,Vz=Oz,$z=Fz,Gz=jz,Hz=Uz,Wz=Bz,tl={isNothing:qz,isObject:Vz,toArray:$z,repeat:Gz,isNegativeZero:Hz,extend:Wz};function v8(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function hd(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=v8(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}hd.prototype=Object.create(Error.prototype);hd.prototype.constructor=hd;hd.prototype.toString=function(t){return this.name+": "+v8(this,t)};var Nu=hd;function Mm(e,t,r,n,o){var u="",c="",s=Math.floor(o/2)-1;return n-t>s&&(u=" ... ",t=n-s+u.length),r-n>s&&(c=" ...",r=n+s-c.length),{str:u+e.slice(t,r).replace(/\t/g,"")+c,pos:n-t+u.length}}function Dm(e,t){return tl.repeat(" ",t-e.length)+e}function Zz(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],u,c=-1;u=r.exec(e.buffer);)o.push(u.index),n.push(u.index+u[0].length),e.position<=u.index&&c<0&&(c=n.length-2);c<0&&(c=n.length-1);var s="",f,v,w=Math.min(e.line+t.linesAfter,o.length).toString().length,E=t.maxLength-(t.indent+w+3);for(f=1;f<=t.linesBefore&&!(c-f<0);f++)v=Mm(e.buffer,n[c-f],o[c-f],e.position-(n[c]-n[c-f]),E),s=tl.repeat(" ",t.indent)+Dm((e.line-f+1).toString(),w)+" | "+v.str+`
`+s;for(v=Mm(e.buffer,n[c],o[c],e.position,E),s+=tl.repeat(" ",t.indent)+Dm((e.line+1).toString(),w)+" | "+v.str+`
`,s+=tl.repeat("-",t.indent+w+3+v.pos)+`^
`,f=1;f<=t.linesAfter&&!(c+f>=o.length);f++)v=Mm(e.buffer,n[c+f],o[c+f],e.position-(n[c]-n[c+f]),E),s+=tl.repeat(" ",t.indent)+Dm((e.line+f+1).toString(),w)+" | "+v.str+`
`;return s.replace(/\n$/,"")}var Xz=Zz,Yz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Jz=["scalar","sequence","mapping"];function Kz(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Qz(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Yz.indexOf(r)===-1)throw new Nu('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Kz(t.styleAliases||null),Jz.indexOf(this.kind)===-1)throw new Nu('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $l=Qz;function s4(e,t){var r=[];return e[t].forEach(function(n){var o=r.length;r.forEach(function(u,c){u.tag===n.tag&&u.kind===n.kind&&u.multi===n.multi&&(o=c)}),r[o]=n}),r}function eN(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function iy(e){return this.extend(e)}iy.prototype.extend=function(t){var r=[],n=[];if(t instanceof $l)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Nu("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(u){if(!(u instanceof $l))throw new Nu("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new Nu("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new Nu("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(u){if(!(u instanceof $l))throw new Nu("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(iy.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=s4(o,"implicit"),o.compiledExplicit=s4(o,"explicit"),o.compiledTypeMap=eN(o.compiledImplicit,o.compiledExplicit),o};var _8=iy,b8=new $l("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),w8=new $l("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),x8=new $l("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),k8=new _8({explicit:[b8,w8,x8]});function tN(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function rN(){return null}function nN(e){return e===null}var A8=new $l("tag:yaml.org,2002:null",{kind:"scalar",resolve:tN,construct:rN,predicate:nN,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iN(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function oN(e){return e==="true"||e==="True"||e==="TRUE"}function aN(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var E8=new $l("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iN,construct:oN,predicate:aN,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function sN(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function lN(e){return 48<=e&&e<=55}function uN(e){return 48<=e&&e<=57}function cN(e){if(e===null)return!1;var t=e.length,r=0,n=!1,o;if(!t)return!1;if(o=e[r],(o==="-"||o==="+")&&(o=e[++r]),o==="0"){if(r+1===t)return!0;if(o=e[++r],o==="b"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!sN(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!lN(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<t;r++)if(o=e[r],o!=="_"){if(!uN(e.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}function fN(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function hN(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!tl.isNegativeZero(e)}var S8=new $l("tag:yaml.org,2002:int",{kind:"scalar",resolve:cN,construct:fN,predicate:hN,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),pN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function dN(e){return!(e===null||!pN.test(e)||e[e.length-1]==="_")}function mN(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var gN=/^[-+]?[0-9]+e/;function yN(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(tl.isNegativeZero(e))return"-0.0";return r=e.toString(10),gN.test(r)?r.replace("e",".e"):r}function vN(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||tl.isNegativeZero(e))}var C8=new $l("tag:yaml.org,2002:float",{kind:"scalar",resolve:dN,construct:mN,predicate:vN,represent:yN,defaultStyle:"lowercase"}),I8=k8.extend({implicit:[A8,E8,S8,C8]}),L8=I8,T8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),P8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function _N(e){return e===null?!1:T8.exec(e)!==null||P8.exec(e)!==null}function bN(e){var t,r,n,o,u,c,s,f=0,v=null,w,E,L;if(t=T8.exec(e),t===null&&(t=P8.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(u=+t[4],c=+t[5],s=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(w=+t[10],E=+(t[11]||0),v=(w*60+E)*6e4,t[9]==="-"&&(v=-v)),L=new Date(Date.UTC(r,n,o,u,c,s,f)),v&&L.setTime(L.getTime()-v),L}function wN(e){return e.toISOString()}var M8=new $l("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:_N,construct:bN,instanceOf:Date,represent:wN});function xN(e){return e==="<<"||e===null}var D8=new $l("tag:yaml.org,2002:merge",{kind:"scalar",resolve:xN}),Sv=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function kN(e){if(e===null)return!1;var t,r,n=0,o=e.length,u=Sv;for(r=0;r<o;r++)if(t=u.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function AN(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,u=Sv,c=0,s=[];for(t=0;t<o;t++)t%4===0&&t&&(s.push(c>>16&255),s.push(c>>8&255),s.push(c&255)),c=c<<6|u.indexOf(n.charAt(t));return r=o%4*6,r===0?(s.push(c>>16&255),s.push(c>>8&255),s.push(c&255)):r===18?(s.push(c>>10&255),s.push(c>>2&255)):r===12&&s.push(c>>4&255),new Uint8Array(s)}function EN(e){var t="",r=0,n,o,u=e.length,c=Sv;for(n=0;n<u;n++)n%3===0&&n&&(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]),r=(r<<8)+e[n];return o=u%3,o===0?(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]):o===2?(t+=c[r>>10&63],t+=c[r>>4&63],t+=c[r<<2&63],t+=c[64]):o===1&&(t+=c[r>>2&63],t+=c[r<<4&63],t+=c[64],t+=c[64]),t}function SN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var z8=new $l("tag:yaml.org,2002:binary",{kind:"scalar",resolve:kN,construct:AN,predicate:SN,represent:EN}),CN=Object.prototype.hasOwnProperty,IN=Object.prototype.toString;function LN(e){if(e===null)return!0;var t=[],r,n,o,u,c,s=e;for(r=0,n=s.length;r<n;r+=1){if(o=s[r],c=!1,IN.call(o)!=="[object Object]")return!1;for(u in o)if(CN.call(o,u))if(!c)c=!0;else return!1;if(!c)return!1;if(t.indexOf(u)===-1)t.push(u);else return!1}return!0}function TN(e){return e!==null?e:[]}var N8=new $l("tag:yaml.org,2002:omap",{kind:"sequence",resolve:LN,construct:TN}),PN=Object.prototype.toString;function MN(e){if(e===null)return!0;var t,r,n,o,u,c=e;for(u=new Array(c.length),t=0,r=c.length;t<r;t+=1){if(n=c[t],PN.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;u[t]=[o[0],n[o[0]]]}return!0}function DN(e){if(e===null)return[];var t,r,n,o,u,c=e;for(u=new Array(c.length),t=0,r=c.length;t<r;t+=1)n=c[t],o=Object.keys(n),u[t]=[o[0],n[o[0]]];return u}var R8=new $l("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:MN,construct:DN}),zN=Object.prototype.hasOwnProperty;function NN(e){if(e===null)return!0;var t,r=e;for(t in r)if(zN.call(r,t)&&r[t]!==null)return!1;return!0}function RN(e){return e!==null?e:{}}var O8=new $l("tag:yaml.org,2002:set",{kind:"mapping",resolve:NN,construct:RN}),Cv=L8.extend({implicit:[M8,D8],explicit:[z8,N8,R8,O8]}),Of=Object.prototype.hasOwnProperty,$1=1,F8=2,B8=3,G1=4,zm=1,ON=2,l4=3,FN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,BN=/[\x85\u2028\u2029]/,jN=/[,\[\]\{\}]/,j8=/^(?:!|!!|![a-z\-]+!)$/i,U8=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function u4(e){return Object.prototype.toString.call(e)}function U0(e){return e===10||e===13}function lh(e){return e===9||e===32}function ic(e){return e===9||e===32||e===10||e===13}function qh(e){return e===44||e===91||e===93||e===123||e===125}function UN(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function qN(e){return e===120?2:e===117?4:e===85?8:0}function VN(e){return 48<=e&&e<=57?e-48:-1}function c4(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function $N(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var q8=new Array(256),V8=new Array(256);for(var Sh=0;Sh<256;Sh++)q8[Sh]=c4(Sh)?1:0,V8[Sh]=c4(Sh);function GN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Cv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $8(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Xz(r),new Nu(t,r)}function zi(e,t){throw $8(e,t)}function H1(e,t){e.onWarning&&e.onWarning.call(null,$8(e,t))}var f4={YAML:function(t,r,n){var o,u,c;t.version!==null&&zi(t,"duplication of %YAML directive"),n.length!==1&&zi(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&zi(t,"ill-formed argument of the YAML directive"),u=parseInt(o[1],10),c=parseInt(o[2],10),u!==1&&zi(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=c<2,c!==1&&c!==2&&H1(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var o,u;n.length!==2&&zi(t,"TAG directive accepts exactly two arguments"),o=n[0],u=n[1],j8.test(o)||zi(t,"ill-formed tag handle (first argument) of the TAG directive"),Of.call(t.tagMap,o)&&zi(t,'there is a previously declared suffix for "'+o+'" tag handle'),U8.test(u)||zi(t,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{zi(t,"tag prefix is malformed: "+u)}t.tagMap[o]=u}};function Pf(e,t,r,n){var o,u,c,s;if(t<r){if(s=e.input.slice(t,r),n)for(o=0,u=s.length;o<u;o+=1)c=s.charCodeAt(o),c===9||32<=c&&c<=1114111||zi(e,"expected valid JSON character");else FN.test(s)&&zi(e,"the stream contains non-printable characters");e.result+=s}}function h4(e,t,r,n){var o,u,c,s;for(tl.isObject(r)||zi(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),c=0,s=o.length;c<s;c+=1)u=o[c],Of.call(t,u)||(t[u]=r[u],n[u]=!0)}function Vh(e,t,r,n,o,u,c,s,f){var v,w;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),v=0,w=o.length;v<w;v+=1)Array.isArray(o[v])&&zi(e,"nested arrays are not supported inside keys"),typeof o=="object"&&u4(o[v])==="[object Object]"&&(o[v]="[object Object]");if(typeof o=="object"&&u4(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(v=0,w=u.length;v<w;v+=1)h4(e,t,u[v],r);else h4(e,t,u,r);else!e.json&&!Of.call(r,o)&&Of.call(t,o)&&(e.line=c||e.line,e.lineStart=s||e.lineStart,e.position=f||e.position,zi(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:u}):t[o]=u,delete r[o];return t}function Iv(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):zi(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Hs(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);o!==0;){for(;lh(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(U0(o))for(Iv(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&H1(e,"deficient indentation"),n}function v2(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ic(r)))}function Lv(e,t){t===1?e.result+=" ":t>1&&(e.result+=tl.repeat(`
`,t-1))}function HN(e,t,r){var n,o,u,c,s,f,v,w,E=e.kind,L=e.result,C;if(C=e.input.charCodeAt(e.position),ic(C)||qh(C)||C===35||C===38||C===42||C===33||C===124||C===62||C===39||C===34||C===37||C===64||C===96||(C===63||C===45)&&(o=e.input.charCodeAt(e.position+1),ic(o)||r&&qh(o)))return!1;for(e.kind="scalar",e.result="",u=c=e.position,s=!1;C!==0;){if(C===58){if(o=e.input.charCodeAt(e.position+1),ic(o)||r&&qh(o))break}else if(C===35){if(n=e.input.charCodeAt(e.position-1),ic(n))break}else{if(e.position===e.lineStart&&v2(e)||r&&qh(C))break;if(U0(C))if(f=e.line,v=e.lineStart,w=e.lineIndent,Hs(e,!1,-1),e.lineIndent>=t){s=!0,C=e.input.charCodeAt(e.position);continue}else{e.position=c,e.line=f,e.lineStart=v,e.lineIndent=w;break}}s&&(Pf(e,u,c,!1),Lv(e,e.line-f),u=c=e.position,s=!1),lh(C)||(c=e.position+1),C=e.input.charCodeAt(++e.position)}return Pf(e,u,c,!1),e.result?!0:(e.kind=E,e.result=L,!1)}function WN(e,t){var r,n,o;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Pf(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,o=e.position;else return!0;else U0(r)?(Pf(e,n,o,!0),Lv(e,Hs(e,!1,t)),n=o=e.position):e.position===e.lineStart&&v2(e)?zi(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);zi(e,"unexpected end of the stream within a single quoted scalar")}function ZN(e,t){var r,n,o,u,c,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Pf(e,r,e.position,!0),e.position++,!0;if(s===92){if(Pf(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),U0(s))Hs(e,!1,t);else if(s<256&&q8[s])e.result+=V8[s],e.position++;else if((c=qN(s))>0){for(o=c,u=0;o>0;o--)s=e.input.charCodeAt(++e.position),(c=UN(s))>=0?u=(u<<4)+c:zi(e,"expected hexadecimal character");e.result+=$N(u),e.position++}else zi(e,"unknown escape sequence");r=n=e.position}else U0(s)?(Pf(e,r,n,!0),Lv(e,Hs(e,!1,t)),r=n=e.position):e.position===e.lineStart&&v2(e)?zi(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}zi(e,"unexpected end of the stream within a double quoted scalar")}function XN(e,t){var r=!0,n,o,u,c=e.tag,s,f=e.anchor,v,w,E,L,C,F=Object.create(null),B,G,H,Z;if(Z=e.input.charCodeAt(e.position),Z===91)w=93,C=!1,s=[];else if(Z===123)w=125,C=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),Z=e.input.charCodeAt(++e.position);Z!==0;){if(Hs(e,!0,t),Z=e.input.charCodeAt(e.position),Z===w)return e.position++,e.tag=c,e.anchor=f,e.kind=C?"mapping":"sequence",e.result=s,!0;r?Z===44&&zi(e,"expected the node content, but found ','"):zi(e,"missed comma between flow collection entries"),G=B=H=null,E=L=!1,Z===63&&(v=e.input.charCodeAt(e.position+1),ic(v)&&(E=L=!0,e.position++,Hs(e,!0,t))),n=e.line,o=e.lineStart,u=e.position,fp(e,t,$1,!1,!0),G=e.tag,B=e.result,Hs(e,!0,t),Z=e.input.charCodeAt(e.position),(L||e.line===n)&&Z===58&&(E=!0,Z=e.input.charCodeAt(++e.position),Hs(e,!0,t),fp(e,t,$1,!1,!0),H=e.result),C?Vh(e,s,F,G,B,H,n,o,u):E?s.push(Vh(e,null,F,G,B,H,n,o,u)):s.push(B),Hs(e,!0,t),Z=e.input.charCodeAt(e.position),Z===44?(r=!0,Z=e.input.charCodeAt(++e.position)):r=!1}zi(e,"unexpected end of the stream within a flow collection")}function YN(e,t){var r,n,o=zm,u=!1,c=!1,s=t,f=0,v=!1,w,E;if(E=e.input.charCodeAt(e.position),E===124)n=!1;else if(E===62)n=!0;else return!1;for(e.kind="scalar",e.result="";E!==0;)if(E=e.input.charCodeAt(++e.position),E===43||E===45)zm===o?o=E===43?l4:ON:zi(e,"repeat of a chomping mode identifier");else if((w=VN(E))>=0)w===0?zi(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?zi(e,"repeat of an indentation width identifier"):(s=t+w-1,c=!0);else break;if(lh(E)){do E=e.input.charCodeAt(++e.position);while(lh(E));if(E===35)do E=e.input.charCodeAt(++e.position);while(!U0(E)&&E!==0)}for(;E!==0;){for(Iv(e),e.lineIndent=0,E=e.input.charCodeAt(e.position);(!c||e.lineIndent<s)&&E===32;)e.lineIndent++,E=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>s&&(s=e.lineIndent),U0(E)){f++;continue}if(e.lineIndent<s){o===l4?e.result+=tl.repeat(`
`,u?1+f:f):o===zm&&u&&(e.result+=`
`);break}for(n?lh(E)?(v=!0,e.result+=tl.repeat(`
`,u?1+f:f)):v?(v=!1,e.result+=tl.repeat(`
`,f+1)):f===0?u&&(e.result+=" "):e.result+=tl.repeat(`
`,f):e.result+=tl.repeat(`
`,u?1+f:f),u=!0,c=!0,f=0,r=e.position;!U0(E)&&E!==0;)E=e.input.charCodeAt(++e.position);Pf(e,r,e.position,!1)}return!0}function p4(e,t){var r,n=e.tag,o=e.anchor,u=[],c,s=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,zi(e,"tab characters must not be used in indentation")),!(f!==45||(c=e.input.charCodeAt(e.position+1),!ic(c))));){if(s=!0,e.position++,Hs(e,!0,-1)&&e.lineIndent<=t){u.push(null),f=e.input.charCodeAt(e.position);continue}if(r=e.line,fp(e,t,B8,!1,!0),u.push(e.result),Hs(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&f!==0)zi(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=n,e.anchor=o,e.kind="sequence",e.result=u,!0):!1}function JN(e,t,r){var n,o,u,c,s,f,v=e.tag,w=e.anchor,E={},L=Object.create(null),C=null,F=null,B=null,G=!1,H=!1,Z;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=E),Z=e.input.charCodeAt(e.position);Z!==0;){if(!G&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,zi(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),u=e.line,(Z===63||Z===58)&&ic(n))Z===63?(G&&(Vh(e,E,L,C,F,null,c,s,f),C=F=B=null),H=!0,G=!0,o=!0):G?(G=!1,o=!0):zi(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,Z=n;else{if(c=e.line,s=e.lineStart,f=e.position,!fp(e,r,F8,!1,!0))break;if(e.line===u){for(Z=e.input.charCodeAt(e.position);lh(Z);)Z=e.input.charCodeAt(++e.position);if(Z===58)Z=e.input.charCodeAt(++e.position),ic(Z)||zi(e,"a whitespace character is expected after the key-value separator within a block mapping"),G&&(Vh(e,E,L,C,F,null,c,s,f),C=F=B=null),H=!0,G=!1,o=!1,C=e.tag,F=e.result;else if(H)zi(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=v,e.anchor=w,!0}else if(H)zi(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=v,e.anchor=w,!0}if((e.line===u||e.lineIndent>t)&&(G&&(c=e.line,s=e.lineStart,f=e.position),fp(e,t,G1,!0,o)&&(G?F=e.result:B=e.result),G||(Vh(e,E,L,C,F,B,c,s,f),C=F=B=null),Hs(e,!0,-1),Z=e.input.charCodeAt(e.position)),(e.line===u||e.lineIndent>t)&&Z!==0)zi(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return G&&Vh(e,E,L,C,F,null,c,s,f),H&&(e.tag=v,e.anchor=w,e.kind="mapping",e.result=E),H}function KN(e){var t,r=!1,n=!1,o,u,c;if(c=e.input.charCodeAt(e.position),c!==33)return!1;if(e.tag!==null&&zi(e,"duplication of a tag property"),c=e.input.charCodeAt(++e.position),c===60?(r=!0,c=e.input.charCodeAt(++e.position)):c===33?(n=!0,o="!!",c=e.input.charCodeAt(++e.position)):o="!",t=e.position,r){do c=e.input.charCodeAt(++e.position);while(c!==0&&c!==62);e.position<e.length?(u=e.input.slice(t,e.position),c=e.input.charCodeAt(++e.position)):zi(e,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!ic(c);)c===33&&(n?zi(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),j8.test(o)||zi(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),c=e.input.charCodeAt(++e.position);u=e.input.slice(t,e.position),jN.test(u)&&zi(e,"tag suffix cannot contain flow indicator characters")}u&&!U8.test(u)&&zi(e,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{zi(e,"tag name is malformed: "+u)}return r?e.tag=u:Of.call(e.tagMap,o)?e.tag=e.tagMap[o]+u:o==="!"?e.tag="!"+u:o==="!!"?e.tag="tag:yaml.org,2002:"+u:zi(e,'undeclared tag handle "'+o+'"'),!0}function QN(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&zi(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ic(r)&&!qh(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&zi(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function eR(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!ic(n)&&!qh(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&zi(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Of.call(e.anchorMap,r)||zi(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Hs(e,!0,-1),!0}function fp(e,t,r,n,o){var u,c,s,f=1,v=!1,w=!1,E,L,C,F,B,G;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,u=c=s=G1===r||B8===r,n&&Hs(e,!0,-1)&&(v=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;KN(e)||QN(e);)Hs(e,!0,-1)?(v=!0,s=u,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):s=!1;if(s&&(s=v||o),(f===1||G1===r)&&($1===r||F8===r?B=t:B=t+1,G=e.position-e.lineStart,f===1?s&&(p4(e,G)||JN(e,G,B))||XN(e,B)?w=!0:(c&&YN(e,B)||WN(e,B)||ZN(e,B)?w=!0:eR(e)?(w=!0,(e.tag!==null||e.anchor!==null)&&zi(e,"alias node should not have any properties")):HN(e,B,$1===r)&&(w=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(w=s&&p4(e,G))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&zi(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),E=0,L=e.implicitTypes.length;E<L;E+=1)if(F=e.implicitTypes[E],F.resolve(e.result)){e.result=F.construct(e.result),e.tag=F.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Of.call(e.typeMap[e.kind||"fallback"],e.tag))F=e.typeMap[e.kind||"fallback"][e.tag];else for(F=null,C=e.typeMap.multi[e.kind||"fallback"],E=0,L=C.length;E<L;E+=1)if(e.tag.slice(0,C[E].tag.length)===C[E].tag){F=C[E];break}F||zi(e,"unknown tag !<"+e.tag+">"),e.result!==null&&F.kind!==e.kind&&zi(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+F.kind+'", not "'+e.kind+'"'),F.resolve(e.result,e.tag)?(e.result=F.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):zi(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||w}function tR(e){var t=e.position,r,n,o,u=!1,c;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(c=e.input.charCodeAt(e.position))!==0&&(Hs(e,!0,-1),c=e.input.charCodeAt(e.position),!(e.lineIndent>0||c!==37));){for(u=!0,c=e.input.charCodeAt(++e.position),r=e.position;c!==0&&!ic(c);)c=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),o=[],n.length<1&&zi(e,"directive name must not be less than one character in length");c!==0;){for(;lh(c);)c=e.input.charCodeAt(++e.position);if(c===35){do c=e.input.charCodeAt(++e.position);while(c!==0&&!U0(c));break}if(U0(c))break;for(r=e.position;c!==0&&!ic(c);)c=e.input.charCodeAt(++e.position);o.push(e.input.slice(r,e.position))}c!==0&&Iv(e),Of.call(f4,n)?f4[n](e,n,o):H1(e,'unknown document directive "'+n+'"')}if(Hs(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Hs(e,!0,-1)):u&&zi(e,"directives end mark is expected"),fp(e,e.lineIndent-1,G1,!1,!0),Hs(e,!0,-1),e.checkLineBreaks&&BN.test(e.input.slice(t,e.position))&&H1(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&v2(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Hs(e,!0,-1));return}if(e.position<e.length-1)zi(e,"end of the stream or a document separator is expected");else return}function G8(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new GN(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,zi(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)tR(r);return r.documents}function rR(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=G8(e,r);if(typeof t!="function")return n;for(var o=0,u=n.length;o<u;o+=1)t(n[o])}function nR(e,t){var r=G8(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Nu("expected a single document in the stream, but found more")}}var iR=rR,oR=nR,H8={loadAll:iR,load:oR},W8=Object.prototype.toString,Z8=Object.prototype.hasOwnProperty,Tv=65279,aR=9,pd=10,sR=13,lR=32,uR=33,cR=34,oy=35,fR=37,hR=38,pR=39,dR=42,X8=44,mR=45,W1=58,gR=61,yR=62,vR=63,_R=64,Y8=91,J8=93,bR=96,K8=123,wR=124,Q8=125,du={};du[0]="\\0";du[7]="\\a";du[8]="\\b";du[9]="\\t";du[10]="\\n";du[11]="\\v";du[12]="\\f";du[13]="\\r";du[27]="\\e";du[34]='\\"';du[92]="\\\\";du[133]="\\N";du[160]="\\_";du[8232]="\\L";du[8233]="\\P";var xR=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],kR=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function AR(e,t){var r,n,o,u,c,s,f;if(t===null)return{};for(r={},n=Object.keys(t),o=0,u=n.length;o<u;o+=1)c=n[o],s=String(t[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),f=e.compiledTypeMap.fallback[c],f&&Z8.call(f.styleAliases,s)&&(s=f.styleAliases[s]),r[c]=s;return r}function ER(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Nu("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+tl.repeat("0",n-t.length)+t}var SR=1,dd=2;function CR(e){this.schema=e.schema||Cv,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=tl.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=AR(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?dd:SR,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function d4(e,t){for(var r=tl.repeat(" ",t),n=0,o=-1,u="",c,s=e.length;n<s;)o=e.indexOf(`
`,n),o===-1?(c=e.slice(n),n=s):(c=e.slice(n,o+1),n=o+1),c.length&&c!==`
`&&(u+=r),u+=c;return u}function ay(e,t){return`
`+tl.repeat(" ",e.indent*t)}function IR(e,t){var r,n,o;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(o=e.implicitTypes[r],o.resolve(t))return!0;return!1}function Z1(e){return e===lR||e===aR}function md(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Tv||65536<=e&&e<=1114111}function m4(e){return md(e)&&e!==Tv&&e!==sR&&e!==pd}function g4(e,t,r){var n=m4(e),o=n&&!Z1(e);return(r?n:n&&e!==X8&&e!==Y8&&e!==J8&&e!==K8&&e!==Q8)&&e!==oy&&!(t===W1&&!o)||m4(t)&&!Z1(t)&&e===oy||t===W1&&o}function LR(e){return md(e)&&e!==Tv&&!Z1(e)&&e!==mR&&e!==vR&&e!==W1&&e!==X8&&e!==Y8&&e!==J8&&e!==K8&&e!==Q8&&e!==oy&&e!==hR&&e!==dR&&e!==uR&&e!==wR&&e!==gR&&e!==yR&&e!==pR&&e!==cR&&e!==fR&&e!==_R&&e!==bR}function TR(e){return!Z1(e)&&e!==W1}function qp(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function ex(e){var t=/^\n* /;return t.test(e)}var tx=1,sy=2,rx=3,nx=4,Rh=5;function PR(e,t,r,n,o,u,c,s){var f,v=0,w=null,E=!1,L=!1,C=n!==-1,F=-1,B=LR(qp(e,0))&&TR(qp(e,e.length-1));if(t||c)for(f=0;f<e.length;v>=65536?f+=2:f++){if(v=qp(e,f),!md(v))return Rh;B=B&&g4(v,w,s),w=v}else{for(f=0;f<e.length;v>=65536?f+=2:f++){if(v=qp(e,f),v===pd)E=!0,C&&(L=L||f-F-1>n&&e[F+1]!==" ",F=f);else if(!md(v))return Rh;B=B&&g4(v,w,s),w=v}L=L||C&&f-F-1>n&&e[F+1]!==" "}return!E&&!L?B&&!c&&!o(e)?tx:u===dd?Rh:sy:r>9&&ex(e)?Rh:c?u===dd?Rh:sy:L?nx:rx}function MR(e,t,r,n,o){e.dump=function(){if(t.length===0)return e.quotingType===dd?'""':"''";if(!e.noCompatMode&&(xR.indexOf(t)!==-1||kR.test(t)))return e.quotingType===dd?'"'+t+'"':"'"+t+"'";var u=e.indent*Math.max(1,r),c=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-u),s=n||e.flowLevel>-1&&r>=e.flowLevel;function f(v){return IR(e,v)}switch(PR(t,s,e.indent,c,f,e.quotingType,e.forceQuotes&&!n,o)){case tx:return t;case sy:return"'"+t.replace(/'/g,"''")+"'";case rx:return"|"+y4(t,e.indent)+v4(d4(t,u));case nx:return">"+y4(t,e.indent)+v4(d4(DR(t,c),u));case Rh:return'"'+zR(t)+'"';default:throw new Nu("impossible error: invalid scalar style")}}()}function y4(e,t){var r=ex(e)?String(t):"",n=e[e.length-1]===`
`,o=n&&(e[e.length-2]===`
`||e===`
`),u=o?"+":n?"":"-";return r+u+`
`}function v4(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function DR(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var v=e.indexOf(`
`);return v=v!==-1?v:e.length,r.lastIndex=v,_4(e.slice(0,v),t)}(),o=e[0]===`
`||e[0]===" ",u,c;c=r.exec(e);){var s=c[1],f=c[2];u=f[0]===" ",n+=s+(!o&&!u&&f!==""?`
`:"")+_4(f,t),o=u}return n}function _4(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,o=0,u,c=0,s=0,f="";n=r.exec(e);)s=n.index,s-o>t&&(u=c>o?c:s,f+=`
`+e.slice(o,u),o=u+1),c=s;return f+=`
`,e.length-o>t&&c>o?f+=e.slice(o,c)+`
`+e.slice(c+1):f+=e.slice(o),f.slice(1)}function zR(e){for(var t="",r=0,n,o=0;o<e.length;r>=65536?o+=2:o++)r=qp(e,o),n=du[r],!n&&md(r)?(t+=e[o],r>=65536&&(t+=e[o+1])):t+=n||ER(r);return t}function NR(e,t,r){var n="",o=e.tag,u,c,s;for(u=0,c=r.length;u<c;u+=1)s=r[u],e.replacer&&(s=e.replacer.call(r,String(u),s)),(pf(e,t,s,!1,!1)||typeof s>"u"&&pf(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}function b4(e,t,r,n){var o="",u=e.tag,c,s,f;for(c=0,s=r.length;c<s;c+=1)f=r[c],e.replacer&&(f=e.replacer.call(r,String(c),f)),(pf(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&pf(e,t+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=ay(e,t)),e.dump&&pd===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=u,e.dump=o||"[]"}function RR(e,t,r){var n="",o=e.tag,u=Object.keys(r),c,s,f,v,w;for(c=0,s=u.length;c<s;c+=1)w="",n!==""&&(w+=", "),e.condenseFlow&&(w+='"'),f=u[c],v=r[f],e.replacer&&(v=e.replacer.call(r,f,v)),pf(e,t,f,!1,!1)&&(e.dump.length>1024&&(w+="? "),w+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pf(e,t,v,!1,!1)&&(w+=e.dump,n+=w));e.tag=o,e.dump="{"+n+"}"}function OR(e,t,r,n){var o="",u=e.tag,c=Object.keys(r),s,f,v,w,E,L;if(e.sortKeys===!0)c.sort();else if(typeof e.sortKeys=="function")c.sort(e.sortKeys);else if(e.sortKeys)throw new Nu("sortKeys must be a boolean or a function");for(s=0,f=c.length;s<f;s+=1)L="",(!n||o!=="")&&(L+=ay(e,t)),v=c[s],w=r[v],e.replacer&&(w=e.replacer.call(r,v,w)),pf(e,t+1,v,!0,!0,!0)&&(E=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,E&&(e.dump&&pd===e.dump.charCodeAt(0)?L+="?":L+="? "),L+=e.dump,E&&(L+=ay(e,t)),pf(e,t+1,w,!0,E)&&(e.dump&&pd===e.dump.charCodeAt(0)?L+=":":L+=": ",L+=e.dump,o+=L));e.tag=u,e.dump=o||"{}"}function w4(e,t,r){var n,o,u,c,s,f;for(o=r?e.explicitTypes:e.implicitTypes,u=0,c=o.length;u<c;u+=1)if(s=o[u],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(r?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(f=e.styleMap[s.tag]||s.defaultStyle,W8.call(s.represent)==="[object Function]")n=s.represent(t,f);else if(Z8.call(s.represent,f))n=s.represent[f](t,f);else throw new Nu("!<"+s.tag+'> tag resolver accepts not "'+f+'" style');e.dump=n}return!0}return!1}function pf(e,t,r,n,o,u,c){e.tag=null,e.dump=r,w4(e,r,!1)||w4(e,r,!0);var s=W8.call(e.dump),f=n,v;n&&(n=e.flowLevel<0||e.flowLevel>t);var w=s==="[object Object]"||s==="[object Array]",E,L;if(w&&(E=e.duplicates.indexOf(r),L=E!==-1),(e.tag!==null&&e.tag!=="?"||L||e.indent!==2&&t>0)&&(o=!1),L&&e.usedDuplicates[E])e.dump="*ref_"+E;else{if(w&&L&&!e.usedDuplicates[E]&&(e.usedDuplicates[E]=!0),s==="[object Object]")n&&Object.keys(e.dump).length!==0?(OR(e,t,e.dump,o),L&&(e.dump="&ref_"+E+e.dump)):(RR(e,t,e.dump),L&&(e.dump="&ref_"+E+" "+e.dump));else if(s==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!c&&t>0?b4(e,t-1,e.dump,o):b4(e,t,e.dump,o),L&&(e.dump="&ref_"+E+e.dump)):(NR(e,t,e.dump),L&&(e.dump="&ref_"+E+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&MR(e,e.dump,t,u,f);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Nu("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(v=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?v="!"+v:v.slice(0,18)==="tag:yaml.org,2002:"?v="!!"+v.slice(18):v="!<"+v+">",e.dump=v+" "+e.dump)}return!0}function FR(e,t){var r=[],n=[],o,u;for(ly(e,r,n),o=0,u=n.length;o<u;o+=1)t.duplicates.push(r[n[o]]);t.usedDuplicates=new Array(u)}function ly(e,t,r){var n,o,u;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(t.push(e),Array.isArray(e))for(o=0,u=e.length;o<u;o+=1)ly(e[o],t,r);else for(n=Object.keys(e),o=0,u=n.length;o<u;o+=1)ly(e[n[o]],t,r)}function BR(e,t){t=t||{};var r=new CR(t);r.noRefs||FR(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),pf(r,0,n,!0,!0)?r.dump+`
`:""}var jR=BR,UR={dump:jR};function Pv(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var qR=$l,VR=_8,$R=k8,GR=I8,HR=L8,WR=Cv,ZR=H8.load,XR=H8.loadAll,YR=UR.dump,JR=Nu,KR={binary:z8,float:C8,map:x8,null:A8,pairs:R8,set:O8,timestamp:M8,bool:E8,int:S8,merge:D8,omap:N8,seq:w8,str:b8},QR=Pv("safeLoad","load"),eO=Pv("safeLoadAll","loadAll"),tO=Pv("safeDump","dump"),f1={Type:qR,Schema:VR,FAILSAFE_SCHEMA:$R,JSON_SCHEMA:GR,CORE_SCHEMA:HR,DEFAULT_SCHEMA:WR,load:ZR,loadAll:XR,dump:YR,YAMLException:JR,types:KR,safeLoad:QR,safeLoadAll:eO,safeDump:tO};function rO(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y;n=new go({props:{icon:g7,size:"2x"}});function le(pe){e[7](pe)}function ce(pe){e[8](pe)}let ve={};return e[1]!==void 0&&(ve.options=e[1]),e[0]!==void 0&&(ve.selectedValue=e[0]),u=new y2({props:ve}),Ft.push(()=>Jt(u,"options",le)),Ft.push(()=>Jt(u,"selectedValue",ce)),{c(){t=ct("div"),r=ct("span"),Bt(n.$$.fragment),o=pr(),Bt(u.$$.fragment),f=pr(),v=ct("p"),w=Nn("Paint editor"),E=pr(),L=ct("textarea"),C=pr(),F=ct("p"),B=Nn("Layout editor"),G=pr(),H=ct("textarea"),this.h()},l(pe){t=ft(pe,"DIV",{class:!0});var Ne=wt(t);r=ft(Ne,"SPAN",{role:!0,class:!0,"data-tooltip":!0});var Ve=wt(r);Yt(n.$$.fragment,Ve),Ve.forEach(de),o=dr(Ne),Yt(u.$$.fragment,Ne),Ne.forEach(de),f=dr(pe),v=ft(pe,"P",{class:!0});var be=wt(v);w=Rn(be,"Paint editor"),be.forEach(de),E=dr(pe),L=ft(pe,"TEXTAREA",{class:!0}),wt(L).forEach(de),C=dr(pe),F=ft(pe,"P",{class:!0});var Ce=wt(F);B=Rn(Ce,"Layout editor"),Ce.forEach(de),G=dr(pe),H=ft(pe,"TEXTAREA",{class:!0}),wt(H).forEach(de),this.h()},h(){ye(r,"role","button"),ye(r,"class","menu-button has-tooltip-bottom has-tooltip-arrow svelte-jokktb"),ye(r,"data-tooltip","Apply to map"),ye(t,"class","menu-buttons svelte-jokktb"),ye(v,"class","editor-title svelte-jokktb"),ye(L,"class","manual-editor svelte-jokktb"),ye(F,"class","editor-title svelte-jokktb"),ye(H,"class","manual-editor svelte-jokktb")},m(pe,Ne){It(pe,t,Ne),Qe(t,r),jt(n,r,null),Qe(t,o),jt(u,t,null),It(pe,f,Ne),It(pe,v,Ne),Qe(v,w),It(pe,E,Ne),It(pe,L,Ne),R0(L,e[3]),It(pe,C,Ne),It(pe,F,Ne),Qe(F,B),It(pe,G,Ne),It(pe,H,Ne),R0(H,e[2]),Z=!0,ee||(Y=[Qr(r,"click",e[4]),Qr(L,"input",e[9]),Qr(H,"input",e[10])],ee=!0)},p(pe,[Ne]){const Ve={};!c&&Ne&2&&(c=!0,Ve.options=pe[1],er(()=>c=!1)),!s&&Ne&1&&(s=!0,Ve.selectedValue=pe[0],er(()=>s=!1)),u.$set(Ve),Ne&8&&R0(L,pe[3]),Ne&4&&R0(H,pe[2])},i(pe){Z||(Ze(n.$$.fragment,pe),Ze(u.$$.fragment,pe),Z=!0)},o(pe){at(n.$$.fragment,pe),at(u.$$.fragment,pe),Z=!1},d(pe){pe&&de(t),Ut(n),Ut(u),pe&&de(f),pe&&de(v),pe&&de(E),pe&&de(L),pe&&de(C),pe&&de(F),pe&&de(G),pe&&de(H),ee=!1,oa(Y)}}}function nO(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"YAML",value:"yaml"},{title:"JSON",value:"json"}],{selectedFormat:c}=t,s="",f="";jf(()=>{r(2,s=v("layout")),r(3,f=v("paint"))});const v=Z=>c==="yaml"?f1.dump(o[Z]):JSON.stringify(o[Z],null,4),w=Z=>{let ee=f;if(Z==="layout"&&(ee=s),!ee)return"";let Y="";return c==="yaml"?Y=f1.dump(JSON.parse(ee)):Y=JSON.stringify(f1.load(ee),null,4),Y},E=Z=>{let ee,Y=s;return Z==="paint"&&(Y=f),c==="yaml"?ee=f1.load(Y):ee=JSON.parse(Y),ee},L=()=>{const Z=E("layout");if(Z){const Y=Object.keys(Z);for(const le of Y)n.setLayoutProperty(o.id,le,Z[le])}r(5,o.layout=Z,o);const ee=E("paint");if(ee){const Y=Object.keys(ee);for(const le of Y)n.setPaintProperty(o.id,le,ee[le])}r(5,o.paint=ee,o)},C=()=>{r(2,s=w("layout")),r(3,f=w("paint"))};function F(Z){u=Z,r(1,u)}function B(Z){c=Z,r(0,c)}function G(){f=this.value,r(3,f)}function H(){s=this.value,r(2,s)}return e.$$set=Z=>{"map"in Z&&r(6,n=Z.map),"layer"in Z&&r(5,o=Z.layer),"selectedFormat"in Z&&r(0,c=Z.selectedFormat)},e.$$.update=()=>{e.$$.dirty&1&&C()},[c,u,s,f,L,o,n,F,B,G,H]}class iO extends Pn{constructor(t){super(),Mn(this,t,nO,rO,Cn,{map:6,layer:5,selectedFormat:0})}}var oO="tippy-box",ix="tippy-content",aO="tippy-backdrop",ox="tippy-arrow",ax="tippy-svg-arrow",Qf={passive:!0,capture:!0},sx=function(){return document.body};function Nm(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function Mv(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function lx(e,t){return typeof e=="function"?e.apply(void 0,t):e}function x4(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function sO(e){return e.split(/\s+/).filter(Boolean)}function Oh(e){return[].concat(e)}function k4(e,t){e.indexOf(t)===-1&&e.push(t)}function lO(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function uO(e){return e.split("-")[0]}function X1(e){return[].slice.call(e)}function A4(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function Kp(){return document.createElement("div")}function _2(e){return["Element","Fragment"].some(function(t){return Mv(e,t)})}function cO(e){return Mv(e,"NodeList")}function fO(e){return Mv(e,"MouseEvent")}function hO(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function pO(e){return _2(e)?[e]:cO(e)?X1(e):Array.isArray(e)?e:X1(document.querySelectorAll(e))}function Rm(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function E4(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function dO(e){var t,r=Oh(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function mO(e,t){var r=t.clientX,n=t.clientY;return e.every(function(o){var u=o.popperRect,c=o.popperState,s=o.props,f=s.interactiveBorder,v=uO(c.placement),w=c.modifiersData.offset;if(!w)return!0;var E=v==="bottom"?w.top.y:0,L=v==="top"?w.bottom.y:0,C=v==="right"?w.left.x:0,F=v==="left"?w.right.x:0,B=u.top-n+E>f,G=n-u.bottom-L>f,H=u.left-r+C>f,Z=r-u.right-F>f;return B||G||H||Z})}function Om(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[n](o,r)})}function S4(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var D0={isTouch:!1},C4=0;function gO(){D0.isTouch||(D0.isTouch=!0,window.performance&&document.addEventListener("mousemove",ux))}function ux(){var e=performance.now();e-C4<20&&(D0.isTouch=!1,document.removeEventListener("mousemove",ux)),C4=e}function yO(){var e=document.activeElement;if(hO(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function vO(){document.addEventListener("touchstart",gO,Qf),window.addEventListener("blur",yO)}var _O=typeof window<"u"&&typeof document<"u",bO=_O?!!window.msCrypto:!1,wO={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},xO={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},m0=Object.assign({appendTo:sx,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},wO,xO),kO=Object.keys(m0),AO=function(t){var r=Object.keys(t);r.forEach(function(n){m0[n]=t[n]})};function cx(e){var t=e.plugins||[],r=t.reduce(function(n,o){var u=o.name,c=o.defaultValue;if(u){var s;n[u]=e[u]!==void 0?e[u]:(s=m0[u])!=null?s:c}return n},{});return Object.assign({},e,r)}function EO(e,t){var r=t?Object.keys(cx(Object.assign({},m0,{plugins:t}))):kO,n=r.reduce(function(o,u){var c=(e.getAttribute("data-tippy-"+u)||"").trim();if(!c)return o;if(u==="content")o[u]=c;else try{o[u]=JSON.parse(c)}catch{o[u]=c}return o},{});return n}function I4(e,t){var r=Object.assign({},t,{content:lx(t.content,[e])},t.ignoreAttributes?{}:EO(e,t.plugins));return r.aria=Object.assign({},m0.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var SO=function(){return"innerHTML"};function uy(e,t){e[SO()]=t}function L4(e){var t=Kp();return e===!0?t.className=ox:(t.className=ax,_2(e)?t.appendChild(e):uy(t,e)),t}function T4(e,t){_2(t.content)?(uy(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?uy(e,t.content):e.textContent=t.content)}function cy(e){var t=e.firstElementChild,r=X1(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(ix)}),arrow:r.find(function(n){return n.classList.contains(ox)||n.classList.contains(ax)}),backdrop:r.find(function(n){return n.classList.contains(aO)})}}function fx(e){var t=Kp(),r=Kp();r.className=oO,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Kp();n.className=ix,n.setAttribute("data-state","hidden"),T4(n,e.props),t.appendChild(r),r.appendChild(n),o(e.props,e.props);function o(u,c){var s=cy(t),f=s.box,v=s.content,w=s.arrow;c.theme?f.setAttribute("data-theme",c.theme):f.removeAttribute("data-theme"),typeof c.animation=="string"?f.setAttribute("data-animation",c.animation):f.removeAttribute("data-animation"),c.inertia?f.setAttribute("data-inertia",""):f.removeAttribute("data-inertia"),f.style.maxWidth=typeof c.maxWidth=="number"?c.maxWidth+"px":c.maxWidth,c.role?f.setAttribute("role",c.role):f.removeAttribute("role"),(u.content!==c.content||u.allowHTML!==c.allowHTML)&&T4(v,e.props),c.arrow?w?u.arrow!==c.arrow&&(f.removeChild(w),f.appendChild(L4(c.arrow))):f.appendChild(L4(c.arrow)):w&&f.removeChild(w)}return{popper:t,onUpdate:o}}fx.$$tippy=!0;var CO=1,h1=[],Fm=[];function IO(e,t){var r=I4(e,Object.assign({},m0,cx(A4(t)))),n,o,u,c=!1,s=!1,f=!1,v=!1,w,E,L,C=[],F=x4(Kr,r.interactiveDebounce),B,G=CO++,H=null,Z=lO(r.plugins),ee={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},Y={id:G,reference:e,popper:Kp(),popperInstance:H,props:r,state:ee,plugins:Z,clearDelayTimeouts:_i,setProps:hi,setContent:yr,show:Vr,hide:wi,hideWithInteractivity:xn,enable:Jn,disable:ai,unmount:si,destroy:fr};if(!r.render)return Y;var le=r.render(Y),ce=le.popper,ve=le.onUpdate;ce.setAttribute("data-tippy-root",""),ce.id="tippy-"+Y.id,Y.popper=ce,e._tippy=Y,ce._tippy=Y;var pe=Z.map(function(or){return or.fn(Y)}),Ne=e.hasAttribute("aria-expanded");return Gt(),Xe(),He(),ut("onCreate",[Y]),r.showOnCreate&&tn(),ce.addEventListener("mouseenter",function(){Y.props.interactive&&Y.state.isVisible&&Y.clearDelayTimeouts()}),ce.addEventListener("mouseleave",function(){Y.props.interactive&&Y.props.trigger.indexOf("mouseenter")>=0&&nt().addEventListener("mousemove",F)}),Y;function Ve(){var or=Y.props.touch;return Array.isArray(or)?or:[or,0]}function be(){return Ve()[0]==="hold"}function Ce(){var or;return!!((or=Y.props.render)!=null&&or.$$tippy)}function Oe(){return B||e}function nt(){var or=Oe().parentNode;return or?dO(or):document}function mt(){return cy(ce)}function ht(or){return Y.state.isMounted&&!Y.state.isVisible||D0.isTouch||w&&w.type==="focus"?0:Nm(Y.props.delay,or?0:1,m0.delay)}function He(or){or===void 0&&(or=!1),ce.style.pointerEvents=Y.props.interactive&&!or?"":"none",ce.style.zIndex=""+Y.props.zIndex}function ut(or,Yr,un){if(un===void 0&&(un=!0),pe.forEach(function(pn){pn[or]&&pn[or].apply(pn,Yr)}),un){var Or;(Or=Y.props)[or].apply(Or,Yr)}}function bt(){var or=Y.props.aria;if(or.content){var Yr="aria-"+or.content,un=ce.id,Or=Oh(Y.props.triggerTarget||e);Or.forEach(function(pn){var Qn=pn.getAttribute(Yr);if(Y.state.isVisible)pn.setAttribute(Yr,Qn?Qn+" "+un:un);else{var ci=Qn&&Qn.replace(un,"").trim();ci?pn.setAttribute(Yr,ci):pn.removeAttribute(Yr)}})}}function Xe(){if(!(Ne||!Y.props.aria.expanded)){var or=Oh(Y.props.triggerTarget||e);or.forEach(function(Yr){Y.props.interactive?Yr.setAttribute("aria-expanded",Y.state.isVisible&&Yr===Oe()?"true":"false"):Yr.removeAttribute("aria-expanded")})}}function We(){nt().removeEventListener("mousemove",F),h1=h1.filter(function(or){return or!==F})}function ke(or){if(!(D0.isTouch&&(f||or.type==="mousedown"))){var Yr=or.composedPath&&or.composedPath()[0]||or.target;if(!(Y.props.interactive&&S4(ce,Yr))){if(Oh(Y.props.triggerTarget||e).some(function(un){return S4(un,Yr)})){if(D0.isTouch||Y.state.isVisible&&Y.props.trigger.indexOf("click")>=0)return}else ut("onClickOutside",[Y,or]);Y.props.hideOnClick===!0&&(Y.clearDelayTimeouts(),Y.hide(),s=!0,setTimeout(function(){s=!1}),Y.state.isMounted||Et())}}}function Re(){f=!0}function Pe(){f=!1}function dt(){var or=nt();or.addEventListener("mousedown",ke,!0),or.addEventListener("touchend",ke,Qf),or.addEventListener("touchstart",Pe,Qf),or.addEventListener("touchmove",Re,Qf)}function Et(){var or=nt();or.removeEventListener("mousedown",ke,!0),or.removeEventListener("touchend",ke,Qf),or.removeEventListener("touchstart",Pe,Qf),or.removeEventListener("touchmove",Re,Qf)}function Pt(or,Yr){$t(or,function(){!Y.state.isVisible&&ce.parentNode&&ce.parentNode.contains(ce)&&Yr()})}function Kt(or,Yr){$t(or,Yr)}function $t(or,Yr){var un=mt().box;function Or(pn){pn.target===un&&(Om(un,"remove",Or),Yr())}if(or===0)return Yr();Om(un,"remove",E),Om(un,"add",Or),E=Or}function br(or,Yr,un){un===void 0&&(un=!1);var Or=Oh(Y.props.triggerTarget||e);Or.forEach(function(pn){pn.addEventListener(or,Yr,un),C.push({node:pn,eventType:or,handler:Yr,options:un})})}function Gt(){be()&&(br("touchstart",Mr,{passive:!0}),br("touchend",Ct,{passive:!0})),sO(Y.props.trigger).forEach(function(or){if(or!=="manual")switch(br(or,Mr),or){case"mouseenter":br("mouseleave",Ct);break;case"focus":br(bO?"focusout":"blur",pt);break;case"focusin":br("focusout",pt);break}})}function Rr(){C.forEach(function(or){var Yr=or.node,un=or.eventType,Or=or.handler,pn=or.options;Yr.removeEventListener(un,Or,pn)}),C=[]}function Mr(or){var Yr,un=!1;if(!(!Y.state.isEnabled||Dr(or)||s)){var Or=((Yr=w)==null?void 0:Yr.type)==="focus";w=or,B=or.currentTarget,Xe(),!Y.state.isVisible&&fO(or)&&h1.forEach(function(pn){return pn(or)}),or.type==="click"&&(Y.props.trigger.indexOf("mouseenter")<0||c)&&Y.props.hideOnClick!==!1&&Y.state.isVisible?un=!0:tn(or),or.type==="click"&&(c=!un),un&&!Or&&Bn(or)}}function Kr(or){var Yr=or.target,un=Oe().contains(Yr)||ce.contains(Yr);if(!(or.type==="mousemove"&&un)){var Or=dn().concat(ce).map(function(pn){var Qn,ci=pn._tippy,Ro=(Qn=ci.popperInstance)==null?void 0:Qn.state;return Ro?{popperRect:pn.getBoundingClientRect(),popperState:Ro,props:r}:null}).filter(Boolean);mO(Or,or)&&(We(),Bn(or))}}function Ct(or){var Yr=Dr(or)||Y.props.trigger.indexOf("click")>=0&&c;if(!Yr){if(Y.props.interactive){Y.hideWithInteractivity(or);return}Bn(or)}}function pt(or){Y.props.trigger.indexOf("focusin")<0&&or.target!==Oe()||Y.props.interactive&&or.relatedTarget&&ce.contains(or.relatedTarget)||Bn(or)}function Dr(or){return D0.isTouch?be()!==or.type.indexOf("touch")>=0:!1}function ln(){Wt();var or=Y.props,Yr=or.popperOptions,un=or.placement,Or=or.offset,pn=or.getReferenceClientRect,Qn=or.moveTransition,ci=Ce()?cy(ce).arrow:null,Ro=pn?{getBoundingClientRect:pn,contextElement:pn.contextElement||Oe()}:e,gi={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(no){var yo=no.state;if(Ce()){var pi=mt(),Li=pi.box;["placement","reference-hidden","escaped"].forEach(function(Yo){Yo==="placement"?Li.setAttribute("data-placement",yo.placement):yo.attributes.popper["data-popper-"+Yo]?Li.setAttribute("data-"+Yo,""):Li.removeAttribute("data-"+Yo)}),yo.attributes.popper={}}}},co=[{name:"offset",options:{offset:Or}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Qn}},gi];Ce()&&ci&&co.push({name:"arrow",options:{element:ci,padding:3}}),co.push.apply(co,(Yr==null?void 0:Yr.modifiers)||[]),Y.popperInstance=h8(Ro,ce,Object.assign({},Yr,{placement:un,onFirstUpdate:L,modifiers:co}))}function Wt(){Y.popperInstance&&(Y.popperInstance.destroy(),Y.popperInstance=null)}function Ur(){var or=Y.props.appendTo,Yr,un=Oe();Y.props.interactive&&or===sx||or==="parent"?Yr=un.parentNode:Yr=lx(or,[un]),Yr.contains(ce)||Yr.appendChild(ce),Y.state.isMounted=!0,ln()}function dn(){return X1(ce.querySelectorAll("[data-tippy-root]"))}function tn(or){Y.clearDelayTimeouts(),or&&ut("onTrigger",[Y,or]),dt();var Yr=ht(!0),un=Ve(),Or=un[0],pn=un[1];D0.isTouch&&Or==="hold"&&pn&&(Yr=pn),Yr?n=setTimeout(function(){Y.show()},Yr):Y.show()}function Bn(or){if(Y.clearDelayTimeouts(),ut("onUntrigger",[Y,or]),!Y.state.isVisible){Et();return}if(!(Y.props.trigger.indexOf("mouseenter")>=0&&Y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(or.type)>=0&&c)){var Yr=ht(!1);Yr?o=setTimeout(function(){Y.state.isVisible&&Y.hide()},Yr):u=requestAnimationFrame(function(){Y.hide()})}}function Jn(){Y.state.isEnabled=!0}function ai(){Y.hide(),Y.state.isEnabled=!1}function _i(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(u)}function hi(or){if(!Y.state.isDestroyed){ut("onBeforeUpdate",[Y,or]),Rr();var Yr=Y.props,un=I4(e,Object.assign({},Yr,A4(or),{ignoreAttributes:!0}));Y.props=un,Gt(),Yr.interactiveDebounce!==un.interactiveDebounce&&(We(),F=x4(Kr,un.interactiveDebounce)),Yr.triggerTarget&&!un.triggerTarget?Oh(Yr.triggerTarget).forEach(function(Or){Or.removeAttribute("aria-expanded")}):un.triggerTarget&&e.removeAttribute("aria-expanded"),Xe(),He(),ve&&ve(Yr,un),Y.popperInstance&&(ln(),dn().forEach(function(Or){requestAnimationFrame(Or._tippy.popperInstance.forceUpdate)})),ut("onAfterUpdate",[Y,or])}}function yr(or){Y.setProps({content:or})}function Vr(){var or=Y.state.isVisible,Yr=Y.state.isDestroyed,un=!Y.state.isEnabled,Or=D0.isTouch&&!Y.props.touch,pn=Nm(Y.props.duration,0,m0.duration);if(!(or||Yr||un||Or)&&!Oe().hasAttribute("disabled")&&(ut("onShow",[Y],!1),Y.props.onShow(Y)!==!1)){if(Y.state.isVisible=!0,Ce()&&(ce.style.visibility="visible"),He(),dt(),Y.state.isMounted||(ce.style.transition="none"),Ce()){var Qn=mt(),ci=Qn.box,Ro=Qn.content;Rm([ci,Ro],0)}L=function(){var co;if(!(!Y.state.isVisible||v)){if(v=!0,ce.offsetHeight,ce.style.transition=Y.props.moveTransition,Ce()&&Y.props.animation){var li=mt(),no=li.box,yo=li.content;Rm([no,yo],pn),E4([no,yo],"visible")}bt(),Xe(),k4(Fm,Y),(co=Y.popperInstance)==null||co.forceUpdate(),ut("onMount",[Y]),Y.props.animation&&Ce()&&Kt(pn,function(){Y.state.isShown=!0,ut("onShown",[Y])})}},Ur()}}function wi(){var or=!Y.state.isVisible,Yr=Y.state.isDestroyed,un=!Y.state.isEnabled,Or=Nm(Y.props.duration,1,m0.duration);if(!(or||Yr||un)&&(ut("onHide",[Y],!1),Y.props.onHide(Y)!==!1)){if(Y.state.isVisible=!1,Y.state.isShown=!1,v=!1,c=!1,Ce()&&(ce.style.visibility="hidden"),We(),Et(),He(!0),Ce()){var pn=mt(),Qn=pn.box,ci=pn.content;Y.props.animation&&(Rm([Qn,ci],Or),E4([Qn,ci],"hidden"))}bt(),Xe(),Y.props.animation?Ce()&&Pt(Or,Y.unmount):Y.unmount()}}function xn(or){nt().addEventListener("mousemove",F),k4(h1,F),F(or)}function si(){Y.state.isVisible&&Y.hide(),Y.state.isMounted&&(Wt(),dn().forEach(function(or){or._tippy.unmount()}),ce.parentNode&&ce.parentNode.removeChild(ce),Fm=Fm.filter(function(or){return or!==Y}),Y.state.isMounted=!1,ut("onHidden",[Y]))}function fr(){Y.state.isDestroyed||(Y.clearDelayTimeouts(),Y.unmount(),Rr(),delete e._tippy,Y.state.isDestroyed=!0,ut("onDestroy",[Y]))}}function Id(e,t){t===void 0&&(t={});var r=m0.plugins.concat(t.plugins||[]);vO();var n=Object.assign({},t,{plugins:r}),o=pO(e),u=o.reduce(function(c,s){var f=s&&IO(s,n);return f&&c.push(f),c},[]);return _2(e)?u[0]:u}Id.defaultProps=m0;Id.setDefaultProps=AO;Id.currentInput=D0;Object.assign({},i8,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});Id.setDefaultProps({render:fx});const LO=(e,t)=>{const{destroy:r,setProps:n}=Id(e,t);return{destroy:r,update:n}},TO=e=>(t,r)=>LO(t,{...r,...e}),PO=e=>{let t={arrow:!0,theme:"light",trigger:"click",hideOnClick:"toggle",interactive:!0,onShow(n){var o;(o=n.popper.querySelector(".close"))==null||o.addEventListener("click",()=>{n.hide()})},onHide(n){var o;(o=n.popper.querySelector(".close"))==null||o.removeEventListener("click",()=>{n.hide()})},onClickOutside(n){n.hide()}};return e&&(t=Object.assign(t,e)),TO(t)};const hx=e=>e.replace(/[_-]/g," ").replace(/\.[^/.]+$/,"");function MO(e){let t,r,n,o;function u(f){e[31](f)}function c(f){e[32](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new Rz({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function DO(e){let t,r,n,o;function u(f){e[29](f)}function c(f){e[30](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new gz({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function zO(e){let t,r,n,o;function u(f){e[27](f)}function c(f){e[28](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new qD({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function NO(e){let t,r,n,o;function u(f){e[25](f)}function c(f){e[26](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new ID({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function RO(e){let t,r,n,o;function u(f){e[23](f)}function c(f){e[24](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new SM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function OO(e){let t,r,n,o,u;function c(w){e[20](w)}function s(w){e[21](w)}function f(w){e[22](w)}let v={};return e[1]!==void 0&&(v.map=e[1]),e[0]!==void 0&&(v.layer=e[0]),e[2]!==void 0&&(v.spriteLoader=e[2]),t=new mD({props:v}),Ft.push(()=>Jt(t,"map",c)),Ft.push(()=>Jt(t,"layer",s)),Ft.push(()=>Jt(t,"spriteLoader",f)),{c(){Bt(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){jt(t,w,E),u=!0},p(w,E){const L={};!r&&E[0]&2&&(r=!0,L.map=w[1],er(()=>r=!1)),!n&&E[0]&1&&(n=!0,L.layer=w[0],er(()=>n=!1)),!o&&E[0]&4&&(o=!0,L.spriteLoader=w[2],er(()=>o=!1)),t.$set(L)},i(w){u||(Ze(t.$$.fragment,w),u=!0)},o(w){at(t.$$.fragment,w),u=!1},d(w){Ut(t,w)}}}function FO(e){let t,r,n,o;function u(f){e[18](f)}function c(f){e[19](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new hM({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function BO(e){let t,r,n,o;function u(f){e[16](f)}function c(f){e[17](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new $P({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function jO(e){let t,r,n,o;function u(f){e[14](f)}function c(f){e[15](f)}let s={};return e[1]!==void 0&&(s.map=e[1]),e[0]!==void 0&&(s.layer=e[0]),t=new FP({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,v){const w={};!r&&v[0]&2&&(r=!0,w.map=f[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=f[0],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function UO(e){let t,r,n,o,u;function c(w){e[11](w)}function s(w){e[12](w)}function f(w){e[13](w)}let v={};return e[1]!==void 0&&(v.map=e[1]),e[0]!==void 0&&(v.layer=e[0]),e[3]!==void 0&&(v.selectedFormat=e[3]),t=new iO({props:v}),Ft.push(()=>Jt(t,"map",c)),Ft.push(()=>Jt(t,"layer",s)),Ft.push(()=>Jt(t,"selectedFormat",f)),{c(){Bt(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){jt(t,w,E),u=!0},p(w,E){const L={};!r&&E[0]&2&&(r=!0,L.map=w[1],er(()=>r=!1)),!n&&E[0]&1&&(n=!0,L.layer=w[0],er(()=>n=!1)),!o&&E[0]&8&&(o=!0,L.selectedFormat=w[3],er(()=>o=!1)),t.$set(L)},i(w){u||(Ze(t.$$.fragment,w),u=!0)},o(w){at(t.$$.fragment,w),u=!1},d(w){Ut(t,w)}}}function qO(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt;r=new go({props:{icon:u7,size:"lg"}}),f=new X6({props:{map:e[1],layer:e[0],spriteLoader:e[2]}}),B=new go({props:{icon:n7,size:"lg"}});function ht(We){e[10](We)}let He={size:"lg"};e[0].type!==void 0&&(He.layerType=e[0].type),Z=new m8({props:He}),Ft.push(()=>Jt(Z,"layerType",ht)),ce=new go({props:{icon:Ry,size:"lg",color:"#1c1c1c"}});const ut=[UO,jO,BO,FO,OO,RO,NO,zO,DO,MO],bt=[];function Xe(We,ke){return We[4]?0:We[0].type==="background"?1:We[0].type==="fill"?2:We[0].type==="line"?3:We[0].type==="symbol"?4:We[0].type==="circle"?5:We[0].type==="fill-extrusion"?6:We[0].type==="hillshade"?7:We[0].type==="raster"?8:We[0].type==="heatmap"?9:-1}return~(Ne=Xe(e))&&(Ve=bt[Ne]=ut[Ne](e)),{c(){t=ct("div"),Bt(r.$$.fragment),o=pr(),u=ct("div"),c=ct("div"),s=ct("div"),Bt(f.$$.fragment),v=pr(),w=ct("div"),E=Nn(e[6]),L=pr(),C=ct("div"),F=ct("span"),Bt(B.$$.fragment),G=pr(),H=ct("div"),Bt(Z.$$.fragment),Y=pr(),le=ct("div"),Bt(ce.$$.fragment),ve=pr(),pe=ct("div"),Ve&&Ve.c(),be=pr(),Ce=ct("div"),this.h()},l(We){t=ft(We,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var ke=wt(t);Yt(r.$$.fragment,ke),ke.forEach(de),o=dr(We),u=ft(We,"DIV",{class:!0});var Re=wt(u);c=ft(Re,"DIV",{class:!0});var Pe=wt(c);s=ft(Pe,"DIV",{class:!0});var dt=wt(s);Yt(f.$$.fragment,dt),dt.forEach(de),v=dr(Pe),w=ft(Pe,"DIV",{class:!0});var Et=wt(w);E=Rn(Et,e[6]),Et.forEach(de),Pe.forEach(de),L=dr(Re),C=ft(Re,"DIV",{class:!0});var Pt=wt(C);F=ft(Pt,"SPAN",{role:!0,class:!0,"data-tooltip":!0});var Kt=wt(F);Yt(B.$$.fragment,Kt),Kt.forEach(de),G=dr(Pt),H=ft(Pt,"DIV",{class:!0});var $t=wt(H);Yt(Z.$$.fragment,$t),$t.forEach(de),Y=dr(Pt),le=ft(Pt,"DIV",{role:!0,class:!0,"data-tooltip":!0});var br=wt(le);Yt(ce.$$.fragment,br),br.forEach(de),Pt.forEach(de),ve=dr(Re),pe=ft(Re,"DIV",{class:!0});var Gt=wt(pe);Ve&&Ve.l(Gt),Gt.forEach(de),be=dr(Re),Ce=ft(Re,"DIV",{id:!0,"data-popper-arrow":!0}),wt(Ce).forEach(de),Re.forEach(de),this.h()},h(){ye(t,"tabindex","0"),ye(t,"role","button"),ye(t,"class","palette-button has-tooltip-left has-tooltip-arrow svelte-1p7qduj"),ye(t,"data-tooltip","Change layer style"),ye(s,"class","legend svelte-1p7qduj"),ye(w,"class","layer-name svelte-1p7qduj"),ye(c,"class","title svelte-1p7qduj"),ye(F,"role","button"),ye(F,"class","manual-edit-button has-tooltip-right has-tooltip-arrow svelte-1p7qduj"),ye(F,"data-tooltip","Manual editor"),ye(H,"class","help-button svelte-1p7qduj"),ye(le,"role","button"),ye(le,"class","close has-tooltip-bottom has-tooltip-arrow svelte-1p7qduj"),ye(le,"data-tooltip","Close popup"),ye(C,"class","header-buttons svelte-1p7qduj"),ye(pe,"class","editor-contents svelte-1p7qduj"),ye(Ce,"id","arrow"),ye(Ce,"data-popper-arrow",""),ye(u,"class","tooltip svelte-1p7qduj")},m(We,ke){It(We,t,ke),jt(r,t,null),It(We,o,ke),It(We,u,ke),Qe(u,c),Qe(c,s),jt(f,s,null),Qe(c,v),Qe(c,w),Qe(w,E),Qe(u,L),Qe(u,C),Qe(C,F),jt(B,F,null),Qe(C,G),Qe(C,H),jt(Z,H,null),Qe(C,Y),Qe(C,le),jt(ce,le,null),Qe(u,ve),Qe(u,pe),~Ne&&bt[Ne].m(pe,null),Qe(u,be),Qe(u,Ce),e[33](u),Oe=!0,nt||(mt=[uh(n=e[7].call(null,t,{content:e[5]})),Qr(F,"click",e[9])],nt=!0)},p(We,ke){n&&y0(n.update)&&ke[0]&32&&n.update.call(null,{content:We[5]});const Re={};ke[0]&2&&(Re.map=We[1]),ke[0]&1&&(Re.layer=We[0]),ke[0]&4&&(Re.spriteLoader=We[2]),f.$set(Re),(!Oe||ke[0]&64)&&No(E,We[6]);const Pe={};!ee&&ke[0]&1&&(ee=!0,Pe.layerType=We[0].type,er(()=>ee=!1)),Z.$set(Pe);let dt=Ne;Ne=Xe(We),Ne===dt?~Ne&&bt[Ne].p(We,ke):(Ve&&(Ui(),at(bt[dt],1,1,()=>{bt[dt]=null}),qi()),~Ne?(Ve=bt[Ne],Ve?Ve.p(We,ke):(Ve=bt[Ne]=ut[Ne](We),Ve.c()),Ze(Ve,1),Ve.m(pe,null)):Ve=null)},i(We){Oe||(Ze(r.$$.fragment,We),Ze(f.$$.fragment,We),Ze(B.$$.fragment,We),Ze(Z.$$.fragment,We),Ze(ce.$$.fragment,We),Ze(Ve),Oe=!0)},o(We){at(r.$$.fragment,We),at(f.$$.fragment,We),at(B.$$.fragment,We),at(Z.$$.fragment,We),at(ce.$$.fragment,We),at(Ve),Oe=!1},d(We){We&&de(t),Ut(r),We&&de(o),We&&de(u),Ut(f),Ut(B),Ut(Z),Ut(ce),~Ne&&bt[Ne].d(),e[33](null),nt=!1,oa(mt)}}}function VO(e,t,r){let n,{map:o}=t,{layer:u}=t,{spriteLoader:c}=t,{relativeLayers:s}=t,f=!1,{selectedFormat:v}=t;const w=PO({placement:"left",trigger:"click",appendTo:document.body});let E;const L=()=>r(4,f=!f);function C(We){e.$$.not_equal(u.type,We)&&(u.type=We,r(0,u))}function F(We){o=We,r(1,o)}function B(We){u=We,r(0,u)}function G(We){v=We,r(3,v)}function H(We){o=We,r(1,o)}function Z(We){u=We,r(0,u)}function ee(We){o=We,r(1,o)}function Y(We){u=We,r(0,u)}function le(We){o=We,r(1,o)}function ce(We){u=We,r(0,u)}function ve(We){o=We,r(1,o)}function pe(We){u=We,r(0,u)}function Ne(We){c=We,r(2,c)}function Ve(We){o=We,r(1,o)}function be(We){u=We,r(0,u)}function Ce(We){o=We,r(1,o)}function Oe(We){u=We,r(0,u)}function nt(We){o=We,r(1,o)}function mt(We){u=We,r(0,u)}function ht(We){o=We,r(1,o)}function He(We){u=We,r(0,u)}function ut(We){o=We,r(1,o)}function bt(We){u=We,r(0,u)}function Xe(We){Ft[We?"unshift":"push"](()=>{E=We,r(5,E)})}return e.$$set=We=>{"map"in We&&r(1,o=We.map),"layer"in We&&r(0,u=We.layer),"spriteLoader"in We&&r(2,c=We.spriteLoader),"relativeLayers"in We&&r(8,s=We.relativeLayers),"selectedFormat"in We&&r(3,v=We.selectedFormat)},e.$$.update=()=>{e.$$.dirty[0]&257&&r(6,n=s&&s[u.id]?s[u.id]:hx(u.id))},[u,o,c,v,f,E,n,w,s,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt,Xe]}class $O extends Pn{constructor(t){super(),Mn(this,t,VO,qO,Cn,{map:1,layer:0,spriteLoader:2,relativeLayers:8,selectedFormat:3},null,[-1,-1])}}function P4(e){let t,r,n;return r=new go({props:{icon:w7}}),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(o){t=ft(o,"DIV",{class:!0,"data-tooltip":!0});var u=wt(t);Yt(r.$$.fragment,u),u.forEach(de),this.h()},h(){ye(t,"class","draggable-icon has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ye(t,"data-tooltip",(aI?"Long press & drag":"Drag")+" to change order")},m(o,u){It(o,t,u),jt(r,t,null),n=!0},p:Xn,i(o){n||(Ze(r.$$.fragment,o),n=!0)},o(o){at(r.$$.fragment,o),n=!1},d(o){o&&de(t),Ut(r)}}}function M4(e){let t,r,n=!e[5]&&D4(e);return{c(){n&&n.c(),t=Xi()},l(o){n&&n.l(o),t=Xi()},m(o,u){n&&n.m(o,u),It(o,t,u),r=!0},p(o,u){o[5]?n&&(Ui(),at(n,1,1,()=>{n=null}),qi()):n?(n.p(o,u),u&32&&Ze(n,1)):(n=D4(o),n.c(),Ze(n,1),n.m(t.parentNode,t))},i(o){r||(Ze(n),r=!0)},o(o){at(n),r=!1},d(o){n&&n.d(o),o&&de(t)}}}function D4(e){let t,r,n,o,u,c,s;const f=[HO,GO],v=[];function w(E,L){return E[8]?0:1}return r=w(e),n=v[r]=f[r](e),{c(){t=ct("div"),n.c(),this.h()},l(E){t=ft(E,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var L=wt(t);n.l(L),L.forEach(de),this.h()},h(){ye(t,"tabindex","0"),ye(t,"role","button"),ye(t,"class","visible-button has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ye(t,"data-tooltip",o=(e[8]?"Hide":"Show")+" layer")},m(E,L){It(E,t,L),v[r].m(t,null),u=!0,c||(s=[Qr(t,"click",e[19]),Qr(t,"keydown",e[12])],c=!0)},p(E,L){let C=r;r=w(E),r===C?v[r].p(E,L):(Ui(),at(v[C],1,1,()=>{v[C]=null}),qi(),n=v[r],n?n.p(E,L):(n=v[r]=f[r](E),n.c()),Ze(n,1),n.m(t,null)),(!u||L&256&&o!==(o=(E[8]?"Hide":"Show")+" layer"))&&ye(t,"data-tooltip",o)},i(E){u||(Ze(n),u=!0)},o(E){at(n),u=!1},d(E){E&&de(t),v[r].d(),c=!1,oa(s)}}}function GO(e){let t,r;return t=new go({props:{icon:o7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function HO(e){let t,r;return t=new go({props:{icon:m7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function WO(e){let t,r,n,o,u,c,s;function f(F){e[20](F)}function v(F){e[21](F)}function w(F){e[22](F)}function E(F){e[23](F)}function L(F){e[24](F)}let C={};return e[2]!==void 0&&(C.map=e[2]),e[0]!==void 0&&(C.layer=e[0]),e[3]!==void 0&&(C.spriteLoader=e[3]),e[4]!==void 0&&(C.selectedFormat=e[4]),e[1]!==void 0&&(C.relativeLayers=e[1]),t=new $O({props:C}),Ft.push(()=>Jt(t,"map",f)),Ft.push(()=>Jt(t,"layer",v)),Ft.push(()=>Jt(t,"spriteLoader",w)),Ft.push(()=>Jt(t,"selectedFormat",E)),Ft.push(()=>Jt(t,"relativeLayers",L)),{c(){Bt(t.$$.fragment)},l(F){Yt(t.$$.fragment,F)},m(F,B){jt(t,F,B),s=!0},p(F,B){const G={};!r&&B&4&&(r=!0,G.map=F[2],er(()=>r=!1)),!n&&B&1&&(n=!0,G.layer=F[0],er(()=>n=!1)),!o&&B&8&&(o=!0,G.spriteLoader=F[3],er(()=>o=!1)),!u&&B&16&&(u=!0,G.selectedFormat=F[4],er(()=>u=!1)),!c&&B&2&&(c=!0,G.relativeLayers=F[1],er(()=>c=!1)),t.$set(G)},i(F){s||(Ze(t.$$.fragment,F),s=!0)},o(F){at(t.$$.fragment,F),s=!1},d(F){Ut(t,F)}}}function ZO(e){let t,r=e[13]()+1+"",n,o,u=e[14]()+"",c,s,f,v,w,E=!e[9]&&z4(e),L=!e[10]&&N4(e);return{c(){t=ct("div"),n=Nn(r),o=Nn("/"),c=Nn(u),s=pr(),f=ct("div"),E&&E.c(),v=pr(),L&&L.c(),this.h()},l(C){t=ft(C,"DIV",{class:!0});var F=wt(t);n=Rn(F,r),o=Rn(F,"/"),c=Rn(F,u),F.forEach(de),s=dr(C),f=ft(C,"DIV",{class:!0});var B=wt(f);E&&E.l(B),v=dr(B),L&&L.l(B),B.forEach(de),this.h()},h(){ye(t,"class","layer-position svelte-5bmqob"),ye(f,"class","layer-order svelte-5bmqob")},m(C,F){It(C,t,F),Qe(t,n),Qe(t,o),Qe(t,c),It(C,s,F),It(C,f,F),E&&E.m(f,null),Qe(f,v),L&&L.m(f,null),w=!0},p(C,F){C[9]?E&&(Ui(),at(E,1,1,()=>{E=null}),qi()):E?(E.p(C,F),F&512&&Ze(E,1)):(E=z4(C),E.c(),Ze(E,1),E.m(f,v)),C[10]?L&&(Ui(),at(L,1,1,()=>{L=null}),qi()):L?(L.p(C,F),F&1024&&Ze(L,1)):(L=N4(C),L.c(),Ze(L,1),L.m(f,null))},i(C){w||(Ze(E),Ze(L),w=!0)},o(C){at(E),at(L),w=!1},d(C){C&&de(t),C&&de(s),C&&de(f),E&&E.d(),L&&L.d()}}}function z4(e){let t,r,n,o,u;return r=new go({props:{icon:y7,size:"lg"}}),{c(){t=ct("span"),Bt(r.$$.fragment),this.h()},l(c){t=ft(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var s=wt(t);Yt(r.$$.fragment,s),s.forEach(de),this.h()},h(){ye(t,"tabindex","0"),ye(t,"role","button"),ye(t,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ye(t,"data-tooltip","Bring backward in map")},m(c,s){It(c,t,s),jt(r,t,null),n=!0,o||(u=[Qr(t,"click",e[15]),Qr(t,"keydown",e[16])],o=!0)},p:Xn,i(c){n||(Ze(r.$$.fragment,c),n=!0)},o(c){at(r.$$.fragment,c),n=!1},d(c){c&&de(t),Ut(r),o=!1,oa(u)}}}function N4(e){let t,r,n,o,u;return r=new go({props:{icon:e7,size:"lg"}}),{c(){t=ct("span"),Bt(r.$$.fragment),this.h()},l(c){t=ft(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var s=wt(t);Yt(r.$$.fragment,s),s.forEach(de),this.h()},h(){ye(t,"tabindex","0"),ye(t,"role","button"),ye(t,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ye(t,"data-tooltip","Bring forward in map")},m(c,s){It(c,t,s),jt(r,t,null),n=!0,o||(u=[Qr(t,"click",e[17]),Qr(t,"keydown",e[18])],o=!0)},p:Xn,i(c){n||(Ze(r.$$.fragment,c),n=!0)},o(c){at(r.$$.fragment,c),n=!1},d(c){c&&de(t),Ut(r),o=!1,oa(u)}}}function XO(e){let t,r,n,o,u,c,s,f,v,w,E,L,C=e[5]&&P4(),F=!e[6]&&M4(e);u=new X6({props:{map:e[2],layer:e[0],spriteLoader:e[3]}});const B=[ZO,WO],G=[];function H(Z,ee){return Z[5]?0:Z[7]===!0?1:-1}return~(w=H(e))&&(E=G[w]=B[w](e)),{c(){t=ct("div"),C&&C.c(),r=pr(),F&&F.c(),n=pr(),o=ct("div"),Bt(u.$$.fragment),c=pr(),s=ct("div"),f=Nn(e[11]),v=pr(),E&&E.c(),this.h()},l(Z){t=ft(Z,"DIV",{class:!0,style:!0});var ee=wt(t);C&&C.l(ee),r=dr(ee),F&&F.l(ee),n=dr(ee),o=ft(ee,"DIV",{class:!0});var Y=wt(o);Yt(u.$$.fragment,Y),Y.forEach(de),c=dr(ee),s=ft(ee,"DIV",{class:!0});var le=wt(s);f=Rn(le,e[11]),le.forEach(de),v=dr(ee),E&&E.l(ee),ee.forEach(de),this.h()},h(){ye(o,"class","legend svelte-5bmqob"),ye(s,"class","layer-name svelte-5bmqob"),ye(t,"class","layer-container svelte-5bmqob"),zo(t,"cursor",e[5]?"grab":"default")},m(Z,ee){It(Z,t,ee),C&&C.m(t,null),Qe(t,r),F&&F.m(t,null),Qe(t,n),Qe(t,o),jt(u,o,null),Qe(t,c),Qe(t,s),Qe(s,f),Qe(t,v),~w&&G[w].m(t,null),L=!0},p(Z,[ee]){Z[5]?C?(C.p(Z,ee),ee&32&&Ze(C,1)):(C=P4(),C.c(),Ze(C,1),C.m(t,r)):C&&(Ui(),at(C,1,1,()=>{C=null}),qi()),Z[6]?F&&(Ui(),at(F,1,1,()=>{F=null}),qi()):F?(F.p(Z,ee),ee&64&&Ze(F,1)):(F=M4(Z),F.c(),Ze(F,1),F.m(t,n));const Y={};ee&4&&(Y.map=Z[2]),ee&1&&(Y.layer=Z[0]),ee&8&&(Y.spriteLoader=Z[3]),u.$set(Y),(!L||ee&2048)&&No(f,Z[11]);let le=w;w=H(Z),w===le?~w&&G[w].p(Z,ee):(E&&(Ui(),at(G[le],1,1,()=>{G[le]=null}),qi()),~w?(E=G[w],E?E.p(Z,ee):(E=G[w]=B[w](Z),E.c()),Ze(E,1),E.m(t,null)):E=null),(!L||ee&32)&&zo(t,"cursor",Z[5]?"grab":"default")},i(Z){L||(Ze(C),Ze(F),Ze(u.$$.fragment,Z),Ze(E),L=!0)},o(Z){at(C),at(F),at(u.$$.fragment,Z),at(E),L=!1},d(Z){Z&&de(t),C&&C.d(),F&&F.d(),Ut(u),~w&&G[w].d()}}}function YO(e,t,r){let n;const o=gp();let{map:u}=t,{layer:c}=t,{spriteLoader:s}=t,{relativeLayers:f={}}=t,{enableLayerOrder:v=!1}=t,{disableVisibleButton:w=!1}=t,{enableEditing:E=!0}=t,{selectedFormat:L}=t,F=u.getLayer(c.id).visibility!=="none";const B=()=>{const He=F===!0?"visible":"none";u.setLayoutProperty(c.id,"visibility",He),o("visibilityChanged",{layer:c,visibility:He})},G=He=>{He.key==="Enter"&&B()},H=()=>{var bt;const He=(bt=u==null?void 0:u.getStyle())==null?void 0:bt.layers;return He==null?void 0:He.findIndex(Xe=>Xe.id===c.id)},Z=()=>{var He;return(He=u==null?void 0:u.getStyle())==null?void 0:He.layers.length},ee=()=>H()===0,Y=()=>{var bt;const He=(bt=u==null?void 0:u.getStyle())==null?void 0:bt.layers;return H()===He.length-1};let le=ee(),ce=Y();const ve=()=>{var Xe;const He=H(),bt=((Xe=u==null?void 0:u.getStyle())==null?void 0:Xe.layers)[He-1].id;u.moveLayer(c.id,bt),r(9,le=ee()),r(10,ce=Y()),o("layerOrderChanged")},pe=He=>{He.key==="Enter"&&ve()},Ne=()=>{var Xe;const He=H(),bt=((Xe=u==null?void 0:u.getStyle())==null?void 0:Xe.layers)[He+1].id;u.moveLayer(bt,c.id),r(9,le=ee()),r(10,ce=Y()),o("layerOrderChanged")},Ve=He=>{He.key==="Enter"&&Ne()},be=()=>r(8,F=!F);function Ce(He){u=He,r(2,u)}function Oe(He){c=He,r(0,c)}function nt(He){s=He,r(3,s)}function mt(He){L=He,r(4,L)}function ht(He){f=He,r(1,f)}return e.$$set=He=>{"map"in He&&r(2,u=He.map),"layer"in He&&r(0,c=He.layer),"spriteLoader"in He&&r(3,s=He.spriteLoader),"relativeLayers"in He&&r(1,f=He.relativeLayers),"enableLayerOrder"in He&&r(5,v=He.enableLayerOrder),"disableVisibleButton"in He&&r(6,w=He.disableVisibleButton),"enableEditing"in He&&r(7,E=He.enableEditing),"selectedFormat"in He&&r(4,L=He.selectedFormat)},e.$$.update=()=>{e.$$.dirty&256&&B(),e.$$.dirty&3&&r(11,n=f&&f[c.id]?f[c.id]:hx(c.id))},[c,f,u,s,L,v,w,E,F,le,ce,n,G,H,Z,ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht]}class JO extends Pn{constructor(t){super(),Mn(this,t,YO,XO,Cn,{map:2,layer:0,spriteLoader:3,relativeLayers:1,enableLayerOrder:5,disableVisibleButton:6,enableEditing:7,selectedFormat:4})}}class KO{constructor(t){Bi(this,"spriteUrl");Bi(this,"sprite");this.spriteUrl=t}async load(){const t=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:t[0],json:t[1]},this.sprite}loadImage(t){let r=!1;const n=new Promise((o,u)=>{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{r||o(c)},c.onerror=s=>{r||u(s)},c.src=t});return n.cancel=()=>{r=!0},n}async fetchUrl(t){return(await fetch(t)).json()}getIconDataUrl(t){var n;let r;if(t.layout&&t.layout["icon-image"]){let o=t.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(n=this.sprite)!=null&&n.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u&&(r=this.extractPartOfImage(this.sprite.image,u))}}return r}extractPartOfImage(t,r){const o=document.createElement("canvas");return o.width=r.width*1,o.height=r.height*1,o.getContext("2d").drawImage(t,r.x*1,r.y*1,r.width*1,r.height*1,0,0,r.width*1,r.height*1),o.toDataURL()}isSdf(t){var n;let r=!1;if(t.layout&&t.layout["icon-image"]){let o=t.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(n=this.sprite)!=null&&n.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u!=null&&u.sdf&&(r=u==null?void 0:u.sdf)}}return r}}const R4=df({}),QO=(e,t,r)=>r.indexOf(e)===t;function O4(e,t,r){const n=e.slice();return n[36]=t[r],n[38]=r,n}function F4(e){let t=e[6],r,n,o=V4(e);return{c(){o.c(),r=Xi()},l(u){o.l(u),r=Xi()},m(u,c){o.m(u,c),It(u,r,c),n=!0},p(u,c){c[0]&64&&Cn(t,t=u[6])?(Ui(),at(o,1,1,Xn),qi(),o=V4(u),o.c(),Ze(o,1),o.m(r.parentNode,r)):o.p(u,c)},i(u){n||(Ze(o),n=!0)},o(u){at(o),n=!1},d(u){u&&de(r),o.d(u)}}}function B4(e){let t,r,n,o,u,c,s,f,v,w;function E(ee){e[20](ee)}function L(ee){e[21](ee)}function C(ee){e[22](ee)}function F(ee){e[23](ee)}let B={map:e[4],layer:e[36],spriteLoader:e[8],relativeLayers:e[5]};e[0]!==void 0&&(B.enableLayerOrder=e[0]),e[1]!==void 0&&(B.disableVisibleButton=e[1]),e[2]!==void 0&&(B.enableEditing=e[2]),e[3]!==void 0&&(B.selectedFormat=e[3]),n=new JO({props:B}),Ft.push(()=>Jt(n,"enableLayerOrder",E)),Ft.push(()=>Jt(n,"disableVisibleButton",L)),Ft.push(()=>Jt(n,"enableEditing",C)),Ft.push(()=>Jt(n,"selectedFormat",F)),n.$on("visibilityChanged",e[11]),n.$on("layerOrderChanged",e[12]);function G(...ee){return e[24](e[38],...ee)}function H(...ee){return e[25](e[38],e[36],...ee)}function Z(){return e[27](e[38])}return{c(){t=ct("div"),r=ct("li"),Bt(n.$$.fragment),this.h()},l(ee){t=ft(ee,"DIV",{class:!0,draggable:!0});var Y=wt(t);r=ft(Y,"LI",{class:!0});var le=wt(r);Yt(n.$$.fragment,le),le.forEach(de),Y.forEach(de),this.h()},h(){ye(r,"class","legend-panel-block svelte-11ej6jy"),ye(t,"class","list-item svelte-11ej6jy"),ye(t,"draggable",e[0]),ni(t,"is-active",e[7]===e[38])},m(ee,Y){It(ee,t,Y),Qe(t,r),jt(n,r,null),f=!0,v||(w=[Qr(t,"dragstart",G),Qr(t,"drop",Ul(H)),Qr(t,"dragover",e[26]),Qr(t,"dragenter",Z)],v=!0)},p(ee,Y){e=ee;const le={};Y[0]&16&&(le.map=e[4]),Y[0]&512&&(le.layer=e[36]),Y[0]&256&&(le.spriteLoader=e[8]),Y[0]&32&&(le.relativeLayers=e[5]),!o&&Y[0]&1&&(o=!0,le.enableLayerOrder=e[0],er(()=>o=!1)),!u&&Y[0]&2&&(u=!0,le.disableVisibleButton=e[1],er(()=>u=!1)),!c&&Y[0]&4&&(c=!0,le.enableEditing=e[2],er(()=>c=!1)),!s&&Y[0]&8&&(s=!0,le.selectedFormat=e[3],er(()=>s=!1)),n.$set(le),(!f||Y[0]&1)&&ye(t,"draggable",e[0]),(!f||Y[0]&640)&&ni(t,"is-active",e[7]===e[38])},i(ee){f||(Ze(n.$$.fragment,ee),f=!0)},o(ee){at(n.$$.fragment,ee),f=!1},d(ee){ee&&de(t),Ut(n),v=!1,oa(w)}}}function j4(e,t){let r,n=t[17](t[36].id),o,u,c=n&&B4(t);return{key:e,first:null,c(){r=Xi(),c&&c.c(),o=Xi(),this.h()},l(s){r=Xi(),c&&c.l(s),o=Xi(),this.h()},h(){this.first=r},m(s,f){It(s,r,f),c&&c.m(s,f),It(s,o,f),u=!0},p(s,f){t=s,f[0]&512&&(n=t[17](t[36].id)),n?c?(c.p(t,f),f[0]&512&&Ze(c,1)):(c=B4(t),c.c(),Ze(c,1),c.m(o.parentNode,o)):c&&(Ui(),at(c,1,1,()=>{c=null}),qi())},i(s){u||(Ze(c),u=!0)},o(s){at(c),u=!1},d(s){s&&de(r),c&&c.d(s),s&&de(o)}}}function U4(e){let t,r,n,o=e[10]&&q4();return{c(){t=ct("div"),o&&o.c(),this.h()},l(u){t=ft(u,"DIV",{class:!0,style:!0,draggable:!0});var c=wt(t);o&&o.l(c),c.forEach(de),this.h()},h(){ye(t,"class","list-item svelte-11ej6jy"),zo(t,"height","40px"),ye(t,"draggable",!1),ni(t,"is-active",e[7]===e[16]())},m(u,c){It(u,t,c),o&&o.m(t,null),r||(n=[Qr(t,"drop",Ul(e[28])),Qr(t,"dragover",e[29]),Qr(t,"dragenter",e[30])],r=!0)},p(u,c){u[10]?o||(o=q4(),o.c(),o.m(t,null)):o&&(o.d(1),o=null),c[0]&65664&&ni(t,"is-active",u[7]===u[16]())},d(u){u&&de(t),o&&o.d(),r=!1,oa(n)}}}function q4(e){let t,r;return{c(){t=ct("div"),r=Nn("Drag to the last"),this.h()},l(n){t=ft(n,"DIV",{class:!0});var o=wt(t);r=Rn(o,"Drag to the last"),o.forEach(de),this.h()},h(){ye(t,"class","last-drop-area svelte-11ej6jy")},m(n,o){It(n,t,o),Qe(t,r)},d(n){n&&de(t)}}}function V4(e){let t=[],r=new Map,n,o,u,c=e[9];const s=v=>v[36].id;for(let v=0;v<c.length;v+=1){let w=O4(e,c,v),E=s(w);r.set(E,t[v]=j4(E,w))}let f=e[0]&&U4(e);return{c(){for(let v=0;v<t.length;v+=1)t[v].c();n=pr(),f&&f.c(),o=Xi()},l(v){for(let w=0;w<t.length;w+=1)t[w].l(v);n=dr(v),f&&f.l(v),o=Xi()},m(v,w){for(let E=0;E<t.length;E+=1)t[E]&&t[E].m(v,w);It(v,n,w),f&&f.m(v,w),It(v,o,w),u=!0},p(v,w){w[0]&195519&&(c=v[9],Ui(),t=NA(t,w,s,1,v,c,r,n.parentNode,RA,j4,n,O4),qi()),v[0]?f?f.p(v,w):(f=U4(v),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(v){if(!u){for(let w=0;w<c.length;w+=1)Ze(t[w]);u=!0}},o(v){for(let w=0;w<t.length;w+=1)at(t[w]);u=!1},d(v){for(let w=0;w<t.length;w+=1)t[w].d(v);v&&de(n),f&&f.d(v),v&&de(o)}}}function eF(e){let t,r,n=e[8]&&F4(e);return{c(){t=ct("ul"),n&&n.c(),this.h()},l(o){t=ft(o,"UL",{class:!0});var u=wt(t);n&&n.l(u),u.forEach(de),this.h()},h(){ye(t,"class","legend-panel svelte-11ej6jy")},m(o,u){It(o,t,u),n&&n.m(t,null),r=!0},p(o,u){o[8]?n?(n.p(o,u),u[0]&256&&Ze(n,1)):(n=F4(o),n.c(),Ze(n,1),n.m(t,null)):n&&(Ui(),at(n,1,1,()=>{n=null}),qi())},i(o){r||(Ze(n),r=!0)},o(o){at(n),r=!1},d(o){o&&de(t),n&&n.d()}}}function tF(e,t,r){let n,o,u;vl(e,R4,Re=>r(32,u=Re));let{map:c}=t,{onlyRendered:s=!0}=t,{onlyRelative:f=!0}=t,{enableLayerOrder:v=!1}=t,{disableVisibleButton:w=!1}=t,{enableEditing:E=!0}=t,L,C,F=!1,{defaultEditorFormat:B="yaml"}=t,G={},{relativeLayers:H={}}=t;const Z=(Re=!0)=>{if(!c||!L)return;const Pe=L.sprite;Pe&&(c.isStyleLoaded()?Re===!0?(r(8,C=new KO(Pe)),C.load().then(ee)):ee():setTimeout(Z,500))},ee=()=>{if(!c||!L)return;G={};const Re=c.getStyle().layers;if(s===!0){Object.keys(u).forEach(Pt=>{G[Pt]=u[Pt]});const dt=c.queryRenderedFeatures().map(Pt=>Pt.layer.id).filter(QO),Et=c.getZoom();Re.forEach(Pt=>{const Kt=Pt.minzoom??0,$t=Pt.maxzoom??24;(dt.indexOf(Pt.id)!==-1||["heatmap","hillshade"].includes(Pt.type)&&Et>=Kt&&Et<=$t)&&(G[Pt.id]=Pt)})}else Re.forEach(Pe=>{G[Pe.id]=Pe});r(9,o=[...Re])},Y=Re=>{const Pe=Re.detail.layer;Re.detail.visibility==="none"?ch(R4,u[Pe.id]=Pe,u):u[Pe.id]&&delete u[Pe.id]},le=()=>{r(9,o=c.getStyle().layers),Z(!1)},ce=(Re,Pe,dt)=>{Re.dataTransfer.dropEffect="move";const Et=parseInt(Re.dataTransfer.getData("text/plain")),Pt=o;Et<=Pe?(Pt.splice(Pe+1,0,Pt[Et]),Pt.splice(Et,1)):(Pt.splice(Pe,0,Pt[Et]),Pt.splice(Et+1,1)),r(9,o=Pt),r(7,F=void 0);const Kt=o[Pe];if(dt!=null&&dt.id)c.moveLayer(Kt.id,dt.id);else{const $t=c.getStyle().layers[Et];c.moveLayer($t.id)}le()},ve=(Re,Pe)=>{Re.dataTransfer.effectAllowed="move",Re.dataTransfer.dropEffect="move";const dt=Pe;Re.dataTransfer.setData("text/plain",dt)},pe=Re=>{Re.preventDefault(),Re.dataTransfer.dropEffect="move"},Ne=()=>{let Re=0;return o==null||o.forEach((Pe,dt)=>{s===!0?G[Pe.id]&&(f===!0?H[Pe.id]&&(Re=dt):Re=dt):f===!0?H[Pe.id]&&(Re=dt):Re=dt}),Re+1},Ve=Re=>{let Pe=!1;return(H[Re]||Re.indexOf("heatmap")>0&&H[Re.replace("heatmap","").trim()])&&(Pe=!0),Pe},be=Re=>{let Pe=!1;return s===!0?G[Re]&&(f===!0?Ve(Re)&&(Pe=!0):Pe=!0):f===!0?Ve(Re)&&(Pe=!0):Pe=!0,Pe};function Ce(Re){v=Re,r(0,v)}function Oe(Re){w=Re,r(1,w)}function nt(Re){E=Re,r(2,E)}function mt(Re){B=Re,r(3,B)}const ht=(Re,Pe)=>ve(Pe,Re),He=(Re,Pe,dt)=>ce(dt,Re,Pe),ut=Re=>pe(Re),bt=Re=>{r(7,F=Re)},Xe=Re=>ce(Re,Ne()),We=Re=>pe(Re),ke=()=>{r(7,F=Ne())};return e.$$set=Re=>{"map"in Re&&r(4,c=Re.map),"onlyRendered"in Re&&r(19,s=Re.onlyRendered),"onlyRelative"in Re&&r(18,f=Re.onlyRelative),"enableLayerOrder"in Re&&r(0,v=Re.enableLayerOrder),"disableVisibleButton"in Re&&r(1,w=Re.disableVisibleButton),"enableEditing"in Re&&r(2,E=Re.enableEditing),"defaultEditorFormat"in Re&&r(3,B=Re.defaultEditorFormat),"relativeLayers"in Re&&r(5,H=Re.relativeLayers)},e.$$.update=()=>{e.$$.dirty[0]&128&&r(10,n=F===Ne()),e.$$.dirty[0]&48&&(c&&(c.on("moveend",ee),c.on("styledata",ee),c.on("load",()=>{r(6,L=c.getStyle())}),c.on("style:change",Z)),H&&Object.keys(H).length===0&&r(18,f=!1)),e.$$.dirty[0]&64&&r(9,o=L?L.layers:[]),e.$$.dirty[0]&524288&&ee(),e.$$.dirty[0]&262144&&ee(),e.$$.dirty[0]&64&&Z()},[v,w,E,B,c,H,L,F,C,o,n,Y,le,ce,ve,pe,Ne,be,f,s,Ce,Oe,nt,mt,ht,He,ut,bt,Xe,We,ke]}class rF extends Pn{constructor(t){super(),Mn(this,t,tF,eF,Cn,{map:4,onlyRendered:19,onlyRelative:18,enableLayerOrder:0,disableVisibleButton:1,enableEditing:2,defaultEditorFormat:3,relativeLayers:5},null,[-1,-1])}}function $4(e){let t,r,n,o,u,c,s,f,v,w,E;const L=[iF,nF],C=[];function F(B,G){return B[2]?0:1}return u=F(e),c=C[u]=L[u](e),{c(){t=ct("div"),r=ct("input"),n=pr(),o=ct("label"),c.c(),this.h()},l(B){t=ft(B,"DIV",{class:!0,"data-tooltip":!0});var G=wt(t);r=ft(G,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=dr(G),o=ft(G,"LABEL",{class:!0,for:!0});var H=wt(o);c.l(H),H.forEach(de),G.forEach(de),this.h()},h(){ye(r,"id","layerorder"),ye(r,"type","checkbox"),ye(r,"name","relative_tab"),r.checked=e[2],ye(r,"class","svelte-1dgwvyy"),ye(o,"class","tab_item layer-order-tab svelte-1dgwvyy"),ye(o,"for","layerorder"),yl(()=>e[8].call(o)),ye(t,"class","has-tooltip-bottom svelte-1dgwvyy"),ye(t,"data-tooltip",f=(e[2]?"Disable":"Enable")+" changing layer ordering")},m(B,G){It(B,t,G),Qe(t,r),Qe(t,n),Qe(t,o),C[u].m(o,null),s=Fh(o,e[8].bind(o)),v=!0,w||(E=Qr(r,"click",e[7]),w=!0)},p(B,G){(!v||G&4)&&(r.checked=B[2]);let H=u;u=F(B),u===H?C[u].p(B,G):(Ui(),at(C[H],1,1,()=>{C[H]=null}),qi(),c=C[u],c?c.p(B,G):(c=C[u]=L[u](B),c.c()),Ze(c,1),c.m(o,null)),(!v||G&4&&f!==(f=(B[2]?"Disable":"Enable")+" changing layer ordering"))&&ye(t,"data-tooltip",f)},i(B){v||(Ze(c),v=!0)},o(B){at(c),v=!1},d(B){B&&de(t),C[u].d(),s(),w=!1,E()}}}function nF(e){let t,r;return t=new go({props:{icon:I7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function iF(e){let t,r;return t=new go({props:{icon:t7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function oF(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B=e[3]&&$4(e);return{c(){t=ct("div"),r=ct("input"),n=pr(),o=ct("label"),u=Nn("Show rendered"),c=pr(),s=ct("input"),f=pr(),v=ct("label"),w=Nn("Show related"),E=pr(),B&&B.c(),this.h()},l(G){t=ft(G,"DIV",{class:!0});var H=wt(t);r=ft(H,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=dr(H),o=ft(H,"LABEL",{class:!0,for:!0,style:!0});var Z=wt(o);u=Rn(Z,"Show rendered"),Z.forEach(de),c=dr(H),s=ft(H,"INPUT",{id:!0,type:!0,name:!0,class:!0}),f=dr(H),v=ft(H,"LABEL",{class:!0,for:!0,style:!0});var ee=wt(v);w=Rn(ee,"Show related"),ee.forEach(de),E=dr(H),B&&B.l(H),H.forEach(de),this.h()},h(){ye(r,"id","rendered"),ye(r,"type","checkbox"),ye(r,"name","rendered_tab"),r.checked=e[0],ye(r,"class","svelte-1dgwvyy"),ye(o,"class","tab_item svelte-1dgwvyy"),ye(o,"for","rendered"),zo(o,"width","calc((100% - "+e[4]+"px - 10px)/2)"),ye(s,"id","relative"),ye(s,"type","checkbox"),ye(s,"name","relative_tab"),s.checked=e[1],ye(s,"class","svelte-1dgwvyy"),ye(v,"class","tab_item svelte-1dgwvyy"),ye(v,"for","relative"),zo(v,"width","calc((100% - "+e[4]+"px - 10px)/2)"),ye(t,"class","tabs svelte-1dgwvyy")},m(G,H){It(G,t,H),Qe(t,r),Qe(t,n),Qe(t,o),Qe(o,u),Qe(t,c),Qe(t,s),Qe(t,f),Qe(t,v),Qe(v,w),Qe(t,E),B&&B.m(t,null),L=!0,C||(F=[Qr(r,"click",e[5]),Qr(s,"click",e[6])],C=!0)},p(G,[H]){(!L||H&1)&&(r.checked=G[0]),(!L||H&16)&&zo(o,"width","calc((100% - "+G[4]+"px - 10px)/2)"),(!L||H&2)&&(s.checked=G[1]),(!L||H&16)&&zo(v,"width","calc((100% - "+G[4]+"px - 10px)/2)"),G[3]?B?(B.p(G,H),H&8&&Ze(B,1)):(B=$4(G),B.c(),Ze(B,1),B.m(t,null)):B&&(Ui(),at(B,1,1,()=>{B=null}),qi())},i(G){L||(Ze(B),L=!0)},o(G){at(B),L=!1},d(G){G&&de(t),B&&B.d(),C=!1,oa(F)}}}function aF(e,t,r){let{onlyRendered:n=!0}=t,{onlyRelative:o=!0}=t,{enableLayerOrder:u=!1}=t,{isLayerOrderShown:c=!1}=t,s=0;const f=()=>r(0,n=!n),v=()=>r(1,o=!o),w=()=>r(2,u=!u);function E(){s=this.clientWidth,r(4,s)}return e.$$set=L=>{"onlyRendered"in L&&r(0,n=L.onlyRendered),"onlyRelative"in L&&r(1,o=L.onlyRelative),"enableLayerOrder"in L&&r(2,u=L.enableLayerOrder),"isLayerOrderShown"in L&&r(3,c=L.isLayerOrderShown)},[n,o,u,c,s,f,v,w,E]}class sF extends Pn{constructor(t){super(),Mn(this,t,aF,oF,Cn,{onlyRendered:0,onlyRelative:1,enableLayerOrder:2,isLayerOrderShown:3})}}class px{constructor(){Bi(this,"STYLE_PATHNAME","style")}getUrl(){const t=window.location,r=new URL(t.href);return r.hash=t.hash,r}updateUrl(t){history.replaceState("","",t.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(t){const r=this.getUrl();r.searchParams.set(this.STYLE_PATHNAME,t),this.updateUrl(r)}delete(){const t=this.getUrl();t.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(t)}getMatchedStyleByTitle(t,r){for(const n of t)if(n.title===r)return n}getMatchedStyleByUrl(t,r){for(const n of t)if(n.uri===r)return n}getInitialStyle(t){const r=t[0],n=this.get();let o=r;if(n){const u=this.getMatchedStyleByTitle(t,n);u&&(o=u)}else this.set(o.title);return o}}function G4(e,t,r){const n=e.slice();return n[8]=t[r],n}function H4(e){let t,r=e[8].title+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[8].uri,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&1&&r!==(r=u[8].title+"")&&No(n,r),c&1&&o!==(o=u[8].uri)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function lF(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=H4(G4(e,o,c));return{c(){t=ct("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=ft(c,"SELECT",{class:!0});var s=wt(t);for(let f=0;f<u.length;f+=1)u[f].l(s);s.forEach(de),this.h()},h(){ye(t,"class","style-select svelte-1t35gnv"),e[1]===void 0&&yl(()=>e[4].call(t))},m(c,s){It(c,t,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);gs(t,e[1],!0),r||(n=Qr(t,"change",e[4]),r=!0)},p(c,[s]){if(s&1){o=c[0];let f;for(f=0;f<o.length;f+=1){const v=G4(c,o,f);u[f]?u[f].p(v,s):(u[f]=H4(v),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}s&3&&gs(t,c[1])},i:Xn,o:Xn,d(c){c&&de(t),ys(u,c),r=!1,n()}}}function uF(e,t,r){let{map:n}=t,{styles:o}=t,{selectedStyle:u}=t;const c=gp();let s=u.uri;const f=()=>{n&&s!==u.uri&&(n.setStyle(s),n.on("styledata",()=>{const E=new px,L=E.getMatchedStyleByUrl(o,s);L?(E.set(L.title),r(2,u=L)):E.delete(),c("change")}))},v=()=>{s!==u.uri&&r(1,s=u.uri)};function w(){s=d0(this),r(1,s),r(0,o)}return e.$$set=E=>{"map"in E&&r(3,n=E.map),"styles"in E&&r(0,o=E.styles),"selectedStyle"in E&&r(2,u=E.selectedStyle)},e.$$.update=()=>{e.$$.dirty&2&&f(),e.$$.dirty&4&&v()},[o,s,u,n,w]}class cF extends Pn{constructor(t){super(),Mn(this,t,uF,lF,Cn,{map:3,styles:0,selectedStyle:2})}}function W4(e,t,r){var n,o,u,c,s;t==null&&(t=100);function f(){var w=Date.now()-c;w<t&&w>=0?n=setTimeout(f,t-w):(n=null,r||(s=e.apply(u,o),u=o=null))}var v=function(){u=this,o=arguments,c=Date.now();var w=r&&!n;return n||(n=setTimeout(f,t)),w&&(s=e.apply(u,o),u=o=null),s};return v.clear=function(){n&&(clearTimeout(n),n=null)},v.flush=function(){n&&(s=e.apply(u,o),u=o=null,clearTimeout(n),n=null)},v}W4.debounce=W4;function fF(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y;function le(ut){e[9](ut)}function ce(ut){e[10](ut)}function ve(ut){e[11](ut)}let pe={};e[5]!==void 0&&(pe.map=e[5]),e[6]!==void 0&&(pe.selectedStyle=e[6]),e[0].styles!==void 0&&(pe.styles=e[0].styles),n=new cF({props:pe}),Ft.push(()=>Jt(n,"map",le)),Ft.push(()=>Jt(n,"selectedStyle",ce)),Ft.push(()=>Jt(n,"styles",ve)),n.$on("change",e[7]);function Ne(ut){e[12](ut)}function Ve(ut){e[13](ut)}function be(ut){e[14](ut)}let Ce={isLayerOrderShown:!0};e[1]!==void 0&&(Ce.onlyRendered=e[1]),e[2]!==void 0&&(Ce.onlyRelative=e[2]),e[3]!==void 0&&(Ce.enableLayerOrder=e[3]),v=new sF({props:Ce}),Ft.push(()=>Jt(v,"onlyRendered",Ne)),Ft.push(()=>Jt(v,"onlyRelative",Ve)),Ft.push(()=>Jt(v,"enableLayerOrder",be));function Oe(ut){e[15](ut)}function nt(ut){e[16](ut)}function mt(ut){e[17](ut)}function ht(ut){e[18](ut)}let He={relativeLayers:e[4],disableVisibleButton:!1};return e[5]!==void 0&&(He.map=e[5]),e[1]!==void 0&&(He.onlyRendered=e[1]),e[2]!==void 0&&(He.onlyRelative=e[2]),e[3]!==void 0&&(He.enableLayerOrder=e[3]),B=new rF({props:He}),Ft.push(()=>Jt(B,"map",Oe)),Ft.push(()=>Jt(B,"onlyRendered",nt)),Ft.push(()=>Jt(B,"onlyRelative",mt)),Ft.push(()=>Jt(B,"enableLayerOrder",ht)),{c(){t=ct("div"),r=ct("div"),Bt(n.$$.fragment),s=pr(),f=ct("div"),Bt(v.$$.fragment),C=pr(),F=ct("div"),Bt(B.$$.fragment),this.h()},l(ut){t=ft(ut,"DIV",{class:!0});var bt=wt(t);r=ft(bt,"DIV",{class:!0});var Xe=wt(r);Yt(n.$$.fragment,Xe),Xe.forEach(de),s=dr(bt),f=ft(bt,"DIV",{class:!0});var We=wt(f);Yt(v.$$.fragment,We),We.forEach(de),C=dr(bt),F=ft(bt,"DIV",{class:!0});var ke=wt(F);Yt(B.$$.fragment,ke),ke.forEach(de),bt.forEach(de),this.h()},h(){ye(r,"class","style-header svelte-1b1i5r2"),ye(f,"class","legend-header m-1 svelte-1b1i5r2"),ye(F,"class","legend-content svelte-1b1i5r2"),ye(t,"class","primary-container svelte-1b1i5r2")},m(ut,bt){It(ut,t,bt),Qe(t,r),jt(n,r,null),Qe(t,s),Qe(t,f),jt(v,f,null),Qe(t,C),Qe(t,F),jt(B,F,null),Y=!0},p(ut,[bt]){const Xe={};!o&&bt&32&&(o=!0,Xe.map=ut[5],er(()=>o=!1)),!u&&bt&64&&(u=!0,Xe.selectedStyle=ut[6],er(()=>u=!1)),!c&&bt&1&&(c=!0,Xe.styles=ut[0].styles,er(()=>c=!1)),n.$set(Xe);const We={};!w&&bt&2&&(w=!0,We.onlyRendered=ut[1],er(()=>w=!1)),!E&&bt&4&&(E=!0,We.onlyRelative=ut[2],er(()=>E=!1)),!L&&bt&8&&(L=!0,We.enableLayerOrder=ut[3],er(()=>L=!1)),v.$set(We);const ke={};bt&16&&(ke.relativeLayers=ut[4]),!G&&bt&32&&(G=!0,ke.map=ut[5],er(()=>G=!1)),!H&&bt&2&&(H=!0,ke.onlyRendered=ut[1],er(()=>H=!1)),!Z&&bt&4&&(Z=!0,ke.onlyRelative=ut[2],er(()=>Z=!1)),!ee&&bt&8&&(ee=!0,ke.enableLayerOrder=ut[3],er(()=>ee=!1)),B.$set(ke)},i(ut){Y||(Ze(n.$$.fragment,ut),Ze(v.$$.fragment,ut),Ze(B.$$.fragment,ut),Y=!0)},o(ut){at(n.$$.fragment,ut),at(v.$$.fragment,ut),at(B.$$.fragment,ut),Y=!1},d(ut){ut&&de(t),Ut(n),Ut(v),Ut(B)}}}function hF(e,t,r){let n,o;vl(e,nc,le=>r(5,n=le)),vl(e,nd,le=>r(6,o=le));let u=!0,c=!0,s=!1,f={},{isLayersTabVisible:v=!1}=t;ji.legend&&ji.legend.targets&&(f=ji.legend.targets);const w=()=>{n&&n.fire("style:change")};function E(le){n=le,nc.set(n)}function L(le){o=le,nd.set(o)}function C(le){e.$$.not_equal(ji.styles,le)&&(ji.styles=le,r(0,ji))}function F(le){u=le,r(1,u)}function B(le){c=le,r(2,c)}function G(le){s=le,r(3,s)}function H(le){n=le,nc.set(n)}function Z(le){u=le,r(1,u)}function ee(le){c=le,r(2,c)}function Y(le){s=le,r(3,s)}return e.$$set=le=>{"isLayersTabVisible"in le&&r(8,v=le.isLayersTabVisible)},[ji,u,c,s,f,n,o,w,v,E,L,C,F,B,G,H,Z,ee,Y]}class pF extends Pn{constructor(t){super(),Mn(this,t,hF,fF,Cn,{isLayersTabVisible:8})}}var fy={},dF={get exports(){return fy},set exports(e){fy=e}},Y1={},mF={get exports(){return Y1},set exports(e){Y1=e}},dx=function(t,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return t.apply(r,o)}},gF=dx,gh=Object.prototype.toString;function Dv(e){return gh.call(e)==="[object Array]"}function hy(e){return typeof e>"u"}function yF(e){return e!==null&&!hy(e)&&e.constructor!==null&&!hy(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function vF(e){return gh.call(e)==="[object ArrayBuffer]"}function _F(e){return typeof FormData<"u"&&e instanceof FormData}function bF(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function wF(e){return typeof e=="string"}function xF(e){return typeof e=="number"}function mx(e){return e!==null&&typeof e=="object"}function I1(e){if(gh.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function kF(e){return gh.call(e)==="[object Date]"}function AF(e){return gh.call(e)==="[object File]"}function EF(e){return gh.call(e)==="[object Blob]"}function gx(e){return gh.call(e)==="[object Function]"}function SF(e){return mx(e)&&gx(e.pipe)}function CF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function IF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function LF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function zv(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Dv(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function py(){var e={};function t(o,u){I1(e[u])&&I1(o)?e[u]=py(e[u],o):I1(o)?e[u]=py({},o):Dv(o)?e[u]=o.slice():e[u]=o}for(var r=0,n=arguments.length;r<n;r++)zv(arguments[r],t);return e}function TF(e,t,r){return zv(t,function(o,u){r&&typeof o=="function"?e[u]=gF(o,r):e[u]=o}),e}function PF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Pc={isArray:Dv,isArrayBuffer:vF,isBuffer:yF,isFormData:_F,isArrayBufferView:bF,isString:wF,isNumber:xF,isObject:mx,isPlainObject:I1,isUndefined:hy,isDate:kF,isFile:AF,isBlob:EF,isFunction:gx,isStream:SF,isURLSearchParams:CF,isStandardBrowserEnv:LF,forEach:zv,merge:py,extend:TF,trim:IF,stripBOM:PF},Ch=Pc;function Z4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var yx=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(Ch.isURLSearchParams(r))o=r.toString();else{var u=[];Ch.forEach(r,function(f,v){f===null||typeof f>"u"||(Ch.isArray(f)?v=v+"[]":f=[f],Ch.forEach(f,function(E){Ch.isDate(E)?E=E.toISOString():Ch.isObject(E)&&(E=JSON.stringify(E)),u.push(Z4(v)+"="+Z4(E))}))}),o=u.join("&")}if(o){var c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t},MF=Pc;function b2(){this.handlers=[]}b2.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};b2.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};b2.prototype.forEach=function(t){MF.forEach(this.handlers,function(n){n!==null&&t(n)})};var DF=b2,zF=Pc,NF=function(t,r){zF.forEach(t,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[u])})},vx=function(t,r,n,o,u){return t.config=r,n&&(t.code=n),t.request=o,t.response=u,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Bm,X4;function _x(){if(X4)return Bm;X4=1;var e=vx;return Bm=function(r,n,o,u,c){var s=new Error(r);return e(s,n,o,u,c)},Bm}var jm,Y4;function RF(){if(Y4)return jm;Y4=1;var e=_x();return jm=function(r,n,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):n(e("Request failed with status code "+o.status,o.config,null,o.request,o))},jm}var Um,J4;function OF(){if(J4)return Um;J4=1;var e=Pc;return Um=e.isStandardBrowserEnv()?function(){return{write:function(n,o,u,c,s,f){var v=[];v.push(n+"="+encodeURIComponent(o)),e.isNumber(u)&&v.push("expires="+new Date(u).toGMTString()),e.isString(c)&&v.push("path="+c),e.isString(s)&&v.push("domain="+s),f===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Um}var qm,K4;function FF(){return K4||(K4=1,qm=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),qm}var Vm,Q4;function BF(){return Q4||(Q4=1,Vm=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),Vm}var $m,e3;function jF(){if(e3)return $m;e3=1;var e=FF(),t=BF();return $m=function(n,o){return n&&!e(o)?t(n,o):o},$m}var Gm,t3;function UF(){if(t3)return Gm;t3=1;var e=Pc,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Gm=function(n){var o={},u,c,s;return n&&e.forEach(n.split(`
`),function(v){if(s=v.indexOf(":"),u=e.trim(v.substr(0,s)).toLowerCase(),c=e.trim(v.substr(s+1)),u){if(o[u]&&t.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([c]):o[u]=o[u]?o[u]+", "+c:c}}),o},Gm}var Hm,r3;function qF(){if(r3)return Hm;r3=1;var e=Pc;return Hm=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function u(c){var s=c;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=u(window.location.href),function(s){var f=e.isString(s)?u(s):s;return f.protocol===o.protocol&&f.host===o.host}}():function(){return function(){return!0}}(),Hm}var Wm,n3;function i3(){if(n3)return Wm;n3=1;var e=Pc,t=RF(),r=OF(),n=yx,o=jF(),u=UF(),c=qF(),s=_x();return Wm=function(v){return new Promise(function(E,L){var C=v.data,F=v.headers,B=v.responseType;e.isFormData(C)&&delete F["Content-Type"];var G=new XMLHttpRequest;if(v.auth){var H=v.auth.username||"",Z=v.auth.password?unescape(encodeURIComponent(v.auth.password)):"";F.Authorization="Basic "+btoa(H+":"+Z)}var ee=o(v.baseURL,v.url);G.open(v.method.toUpperCase(),n(ee,v.params,v.paramsSerializer),!0),G.timeout=v.timeout;function Y(){if(G){var ce="getAllResponseHeaders"in G?u(G.getAllResponseHeaders()):null,ve=!B||B==="text"||B==="json"?G.responseText:G.response,pe={data:ve,status:G.status,statusText:G.statusText,headers:ce,config:v,request:G};t(E,L,pe),G=null}}if("onloadend"in G?G.onloadend=Y:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(Y)},G.onabort=function(){G&&(L(s("Request aborted",v,"ECONNABORTED",G)),G=null)},G.onerror=function(){L(s("Network Error",v,null,G)),G=null},G.ontimeout=function(){var ve="timeout of "+v.timeout+"ms exceeded";v.timeoutErrorMessage&&(ve=v.timeoutErrorMessage),L(s(ve,v,v.transitional&&v.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",G)),G=null},e.isStandardBrowserEnv()){var le=(v.withCredentials||c(ee))&&v.xsrfCookieName?r.read(v.xsrfCookieName):void 0;le&&(F[v.xsrfHeaderName]=le)}"setRequestHeader"in G&&e.forEach(F,function(ve,pe){typeof C>"u"&&pe.toLowerCase()==="content-type"?delete F[pe]:G.setRequestHeader(pe,ve)}),e.isUndefined(v.withCredentials)||(G.withCredentials=!!v.withCredentials),B&&B!=="json"&&(G.responseType=v.responseType),typeof v.onDownloadProgress=="function"&&G.addEventListener("progress",v.onDownloadProgress),typeof v.onUploadProgress=="function"&&G.upload&&G.upload.addEventListener("progress",v.onUploadProgress),v.cancelToken&&v.cancelToken.promise.then(function(ve){G&&(G.abort(),L(ve),G=null)}),C||(C=null),G.send(C)})},Wm}var jl=Pc,o3=NF,VF=vx,$F={"Content-Type":"application/x-www-form-urlencoded"};function a3(e,t){!jl.isUndefined(e)&&jl.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function GF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=i3()),e}function HF(e,t,r){if(jl.isString(e))try{return(t||JSON.parse)(e),jl.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var w2={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:GF(),transformRequest:[function(t,r){return o3(r,"Accept"),o3(r,"Content-Type"),jl.isFormData(t)||jl.isArrayBuffer(t)||jl.isBuffer(t)||jl.isStream(t)||jl.isFile(t)||jl.isBlob(t)?t:jl.isArrayBufferView(t)?t.buffer:jl.isURLSearchParams(t)?(a3(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):jl.isObject(t)||r&&r["Content-Type"]==="application/json"?(a3(r,"application/json"),HF(t)):t}],transformResponse:[function(t){var r=this.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||o&&jl.isString(t)&&t.length)try{return JSON.parse(t)}catch(c){if(u)throw c.name==="SyntaxError"?VF(c,this,"E_JSON_PARSE"):c}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};w2.headers={common:{Accept:"application/json, text/plain, */*"}};jl.forEach(["delete","get","head"],function(t){w2.headers[t]={}});jl.forEach(["post","put","patch"],function(t){w2.headers[t]=jl.merge($F)});var Nv=w2,WF=Pc,ZF=Nv,XF=function(t,r,n){var o=this||ZF;return WF.forEach(n,function(c){t=c.call(o,t,r)}),t},Zm,s3;function bx(){return s3||(s3=1,Zm=function(t){return!!(t&&t.__CANCEL__)}),Zm}var l3=Pc,Xm=XF,YF=bx(),JF=Nv;function Ym(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var KF=function(t){Ym(t),t.headers=t.headers||{},t.data=Xm.call(t,t.data,t.headers,t.transformRequest),t.headers=l3.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),l3.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||JF.adapter;return r(t).then(function(o){return Ym(t),o.data=Xm.call(t,o.data,o.headers,t.transformResponse),o},function(o){return YF(o)||(Ym(t),o&&o.response&&(o.response.data=Xm.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},hu=Pc,wx=function(t,r){r=r||{};var n={},o=["url","method","data"],u=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function f(L,C){return hu.isPlainObject(L)&&hu.isPlainObject(C)?hu.merge(L,C):hu.isPlainObject(C)?hu.merge({},C):hu.isArray(C)?C.slice():C}function v(L){hu.isUndefined(r[L])?hu.isUndefined(t[L])||(n[L]=f(void 0,t[L])):n[L]=f(t[L],r[L])}hu.forEach(o,function(C){hu.isUndefined(r[C])||(n[C]=f(void 0,r[C]))}),hu.forEach(u,v),hu.forEach(c,function(C){hu.isUndefined(r[C])?hu.isUndefined(t[C])||(n[C]=f(void 0,t[C])):n[C]=f(void 0,r[C])}),hu.forEach(s,function(C){C in r?n[C]=f(t[C],r[C]):C in t&&(n[C]=f(void 0,t[C]))});var w=o.concat(u).concat(c).concat(s),E=Object.keys(t).concat(Object.keys(r)).filter(function(C){return w.indexOf(C)===-1});return hu.forEach(E,v),n};const QF="axios",eB="0.21.4",tB="Promise based HTTP client for the browser and node.js",rB="index.js",nB={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},iB={type:"git",url:"https://github.com/axios/axios.git"},oB=["xhr","http","ajax","promise","node"],aB="Matt Zabriskie",sB="MIT",lB={url:"https://github.com/axios/axios/issues"},uB="https://axios-http.com",cB={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},fB={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},hB="dist/axios.min.js",pB="dist/axios.min.js",dB="./index.d.ts",mB={"follow-redirects":"^1.14.0"},gB=[{path:"./dist/axios.min.js",threshold:"5kB"}],yB={name:QF,version:eB,description:tB,main:rB,scripts:nB,repository:iB,keywords:oB,author:aB,license:sB,bugs:lB,homepage:uB,devDependencies:cB,browser:fB,jsdelivr:hB,unpkg:pB,typings:dB,dependencies:mB,bundlesize:gB};var xx=yB,Rv={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Rv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var u3={},vB=xx.version.split(".");function kx(e,t){for(var r=t?t.split("."):vB,n=e.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}Rv.transitional=function(t,r,n){var o=r&&kx(r);function u(c,s){return"[Axios v"+xx.version+"] Transitional option '"+c+"'"+s+(n?". "+n:"")}return function(c,s,f){if(t===!1)throw new Error(u(s," has been removed in "+r));return o&&!u3[s]&&(u3[s]=!0,console.warn(u(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(c,s,f):!0}};function _B(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var u=n[o],c=t[u];if(c){var s=e[u],f=s===void 0||c(s,u,e);if(f!==!0)throw new TypeError("option "+u+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+u)}}var bB={isOlderVersion:kx,assertOptions:_B,validators:Rv},Ax=Pc,wB=yx,c3=DF,f3=KF,x2=wx,Ex=bB,Ih=Ex.validators;function Ld(e){this.defaults=e,this.interceptors={request:new c3,response:new c3}}Ld.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=x2(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Ex.assertOptions(r,{silentJSONParsing:Ih.transitional(Ih.boolean,"1.0.0"),forcedJSONParsing:Ih.transitional(Ih.boolean,"1.0.0"),clarifyTimeoutError:Ih.transitional(Ih.boolean,"1.0.0")},!1);var n=[],o=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(t)===!1||(o=o&&L.synchronous,n.unshift(L.fulfilled,L.rejected))});var u=[];this.interceptors.response.forEach(function(L){u.push(L.fulfilled,L.rejected)});var c;if(!o){var s=[f3,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(u),c=Promise.resolve(t);s.length;)c=c.then(s.shift(),s.shift());return c}for(var f=t;n.length;){var v=n.shift(),w=n.shift();try{f=v(f)}catch(E){w(E);break}}try{c=f3(f)}catch(E){return Promise.reject(E)}for(;u.length;)c=c.then(u.shift(),u.shift());return c};Ld.prototype.getUri=function(t){return t=x2(this.defaults,t),wB(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Ax.forEach(["delete","get","head","options"],function(t){Ld.prototype[t]=function(r,n){return this.request(x2(n||{},{method:t,url:r,data:(n||{}).data}))}});Ax.forEach(["post","put","patch"],function(t){Ld.prototype[t]=function(r,n,o){return this.request(x2(o||{},{method:t,url:r,data:n}))}});var xB=Ld,Jm,h3;function Sx(){if(h3)return Jm;h3=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Jm=e,Jm}var Km,p3;function kB(){if(p3)return Km;p3=1;var e=Sx();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(c){n=c});var o=this;r(function(c){o.reason||(o.reason=new e(c),n(o.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var n,o=new t(function(c){n=c});return{token:o,cancel:n}},Km=t,Km}var Qm,d3;function AB(){return d3||(d3=1,Qm=function(t){return function(n){return t.apply(null,n)}}),Qm}var eg,m3;function EB(){return m3||(m3=1,eg=function(t){return typeof t=="object"&&t.isAxiosError===!0}),eg}var g3=Pc,SB=dx,L1=xB,CB=wx,IB=Nv;function Cx(e){var t=new L1(e),r=SB(L1.prototype.request,t);return g3.extend(r,L1.prototype,t),g3.extend(r,t),r}var v0=Cx(IB);v0.Axios=L1;v0.create=function(t){return Cx(CB(v0.defaults,t))};v0.Cancel=Sx();v0.CancelToken=kB();v0.isCancel=bx();v0.all=function(t){return Promise.all(t)};v0.spread=AB();v0.isAxiosError=EB();mF.exports=v0;Y1.default=v0;(function(e){e.exports=Y1})(dF);const LB=BA(fy),dy=";base64,",TB=e=>e.indexOf(dy)>-1,PB=e=>{const t=e.indexOf(dy)+dy.length,r=e.substring(t),n=window.atob(r),o=n.length,u=new Uint8Array(new ArrayBuffer(o));for(let c=0;c<o;c++)u[c]=n.charCodeAt(c);return u};async function MB(){const e=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],t=n=>new Promise((o,u)=>{var c=document.createElement("img");c.onerror=s=>o(!1),c.onload=()=>o(!0),c.src=n});return(await Promise.all(e.map(t))).every(n=>!!n)}class DB extends Error{}async function Ix(e){return new Promise((t,r)=>{const n=new XMLHttpRequest;n.open("GET",e),n.responseType="arraybuffer";const o=()=>{r(new DB(`failed to load binary data, code "${n.status}" from "${e}"`))};n.onerror=o,n.onreadystatechange=()=>{n.readyState==4&&(n.status==200?t(new Uint8Array(n.response)):o())},n.send()})}function zB(){var e=typeof e<"u"?e:{},t=function(){function R(){}function W(mr,vr){return function(){mr.apply(vr,arguments)}}function ae(mr){if(!(this instanceof ae))throw new TypeError("Promises must be constructed via new");if(typeof mr!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],wr(mr,this)}function Ae(mr,vr){for(;mr._state===3;)mr=mr._value;if(mr._state===0){mr._deferreds.push(vr);return}mr._handled=!0,ae._immediateFn(function(){var ar=mr._state===1?vr.onFulfilled:vr.onRejected;if(ar===null){(mr._state===1?Ye:yt)(vr.promise,mr._value);return}var $r;try{$r=ar(mr._value)}catch(cn){yt(vr.promise,cn);return}Ye(vr.promise,$r)})}function Ye(mr,vr){try{if(vr===mr)throw new TypeError("A promise cannot be resolved with itself.");if(vr&&(typeof vr=="object"||typeof vr=="function")){var ar=vr.then;if(vr instanceof ae){mr._state=3,mr._value=vr,Mt(mr);return}else if(typeof ar=="function"){wr(W(ar,vr),mr);return}}mr._state=1,mr._value=vr,Mt(mr)}catch($r){yt(mr,$r)}}function yt(mr,vr){mr._state=2,mr._value=vr,Mt(mr)}function Mt(mr){mr._state===2&&mr._deferreds.length===0&&ae._immediateFn(function(){mr._handled||ae._unhandledRejectionFn(mr._value)});for(var vr=0,ar=mr._deferreds.length;vr<ar;vr++)Ae(mr,mr._deferreds[vr]);mr._deferreds=null}function Tt(mr,vr,ar){this.onFulfilled=typeof mr=="function"?mr:null,this.onRejected=typeof vr=="function"?vr:null,this.promise=ar}function wr(mr,vr){var ar=!1;try{mr(function($r){ar||(ar=!0,Ye(vr,$r))},function($r){ar||(ar=!0,yt(vr,$r))})}catch($r){if(ar)return;ar=!0,yt(vr,$r)}}return ae.prototype.catch=function(mr){return this.then(null,mr)},ae.prototype.then=function(mr,vr){var ar=new this.constructor(R);return Ae(this,new Tt(mr,vr,ar)),ar},ae.all=function(mr){return new ae(function(vr,ar){if(!Array.isArray(mr))return ar(new TypeError("Promise.all accepts an array"));var $r=Array.prototype.slice.call(mr);if($r.length===0)return vr([]);var cn=$r.length;function Ln(m,Pr){try{if(Pr&&(typeof Pr=="object"||typeof Pr=="function")){var h=Pr.then;if(typeof h=="function"){h.call(Pr,function(T){Ln(m,T)},ar);return}}$r[m]=Pr,--cn===0&&vr($r)}catch(T){ar(T)}}for(var tt=0;tt<$r.length;tt++)Ln(tt,$r[tt])})},ae.resolve=function(mr){return mr&&typeof mr=="object"&&mr.constructor===ae?mr:new ae(function(vr){vr(mr)})},ae.reject=function(mr){return new ae(function(vr,ar){ar(mr)})},ae.race=function(mr){return new ae(function(vr,ar){if(!Array.isArray(mr))return ar(new TypeError("Promise.race accepts an array"));for(var $r=0,cn=mr.length;$r<cn;$r++)ae.resolve(mr[$r]).then(vr,ar)})},ae._immediateFn=typeof setImmediate=="function"&&function(mr){setImmediate(mr)}||function(mr){setTimeout(mr,0)},ae._unhandledRejectionFn=function(vr){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",vr)},ae}(),r={},n;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var o=!0,u="";function c(R){return e.locateFile?e.locateFile(R,u):u+R}var s,f,v;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",s=function(W){try{var ae=new XMLHttpRequest;return ae.open("GET",W,!1),ae.send(null),ae.responseText}catch(Ye){var Ae=wl(W);if(Ae)return _s(Ae);throw Ye}},f=function(W,ae,Ae){var Ye=new XMLHttpRequest;Ye.open("GET",W,!0),Ye.responseType="arraybuffer",Ye.onload=function(){if(Ye.status==200||Ye.status==0&&Ye.response){ae(Ye.response);return}var Mt=wl(W);if(Mt){ae(Mt.buffer);return}Ae()},Ye.onerror=Ae,Ye.send(null)};var w=e.print||console.log.bind(console),E=e.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);r=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit;var L=16;function C(R,W){return W||(W=L),Math.ceil(R/W)*W}function F(R){F.shown||(F.shown={}),F.shown[R]||(F.shown[R]=1,E(R))}var B=0,G=function(R){B=R},H=function(){return B},Z;e.wasmBinary&&(Z=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime;var ee={Memory:function(R){this.buffer=new ArrayBuffer(R.initial*65536),this.grow=function(W){var ae=bs(W);return ae}},Table:function(R){var W=new Array(R.initial);return W.set=function(ae,Ae){W[ae]=Ae},W.get=function(ae){return W[ae]},W},Module:function(R){},Instance:function(R,W){this.exports=function(Ae,Ye,yt){function Mt(ar,$r,cn){var Ln=$r.memory,tt=yt,m=new ar.Int8Array(cn),Pr=new ar.Int16Array(cn),h=new ar.Int32Array(cn),T=new ar.Uint8Array(cn),kn=new ar.Uint16Array(cn),ii=new ar.Uint32Array(cn);new ar.Float32Array(cn);var Lo=new ar.Float64Array(cn),K=ar.Math.imul;ar.Math.fround,ar.Math.abs;var Ri=ar.Math.clz32;ar.Math.min,ar.Math.max,ar.Math.floor,ar.Math.ceil,ar.Math.sqrt;var xs=$r.abort;ar.NaN,ar.Infinity;var Ws=$r.SDL_Init,Mc=$r.SDL_SetVideoMode,Al=$r.SDL_CreateRGBSurface,Xa=$r.SDL_LockSurface,hc=$r.SDL_UnlockSurface,vu=$r.SDL_UpperBlit,Dc=$r.SDL_Flip,_u=$r.SDL_FreeSurface,Qc=$r.fd_close,Hu=$r.fd_write,bu=$r.emscripten_resize_heap,wu=$r.emscripten_memcpy_big,Zl=$r.setTempRet0,xu=$r.fd_seek,qn=5255072,jn=0;function Wu(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;g=h[a>>2],ne=h[a+4>>2],l=h[i+2264>>2],m[l+823|0]=129,m[l+807|0]=129,m[l+791|0]=129,m[l+775|0]=129,m[l+759|0]=129,m[l+743|0]=129,m[l+727|0]=129,m[l+711|0]=129,m[l+695|0]=129,m[l+679|0]=129,m[l+663|0]=129,m[l+647|0]=129,m[l+631|0]=129,m[l+615|0]=129,m[l+599|0]=129,m[l+583|0]=129,m[l+519|0]=129,m[l+487|0]=129,m[l+455|0]=129,m[l+423|0]=129,m[l+391|0]=129,m[l+359|0]=129,m[l+327|0]=129,m[l+295|0]=129,m[l+263|0]=129,m[l+231|0]=129,m[l+199|0]=129,m[l+167|0]=129,m[l+135|0]=129,m[l+103|0]=129,m[l+71|0]=129,m[l+39|0]=129;e:{if((ne|0)>=1){m[l+551|0]=129,m[l+567|0]=129,m[l+7|0]=129;break e}m[l+7|0]=2139062143,m[l+8|0]=8355711,m[l+9|0]=32639,m[l+10|0]=127,m[l+11|0]=2139062143,m[l+12|0]=8355711,m[l+13|0]=32639,m[l+14|0]=127,m[l+551|0]=2139062143,m[l+552|0]=8355711,m[l+553|0]=32639,m[l+554|0]=127,m[l+555|0]=2139062143,m[l+556|0]=8355711,m[l+557|0]=32639,m[l+558|0]=127,m[l+567|0]=2139062143,m[l+568|0]=8355711,m[l+569|0]=32639,m[l+570|0]=127,m[l+571|0]=2139062143,m[l+572|0]=8355711,m[l+573|0]=32639,m[l+574|0]=127,m[l+20|0]=2139062143,m[l+21|0]=8355711,m[l+22|0]=32639,m[l+23|0]=127,m[l+24|0]=2139062143,m[l+25|0]=8355711,m[l+26|0]=32639,m[l+27|0]=127,m[l+15|0]=2139062143,m[l+16|0]=8355711,m[l+17|0]=32639,m[l+18|0]=127,m[l+19|0]=2139062143,m[l+20|0]=8355711,m[l+21|0]=32639,m[l+22|0]=127,m[l+559|0]=127,m[l+575|0]=127}if(h[i+288>>2]>=1)for(Ie=l+600|0,je=l+584|0,me=l+40|0,At=ne?5:6,Qt=g<<3,lr=g<<4,Nr=l+520|0,Sr=l+8|0,st=l+24|0,Lt=!ne<<2,Jr=(ne|0)<1;;){A=h[a+16>>2],X&&(g=T[l+20|0]|T[l+21|0]<<8|(T[l+22|0]<<16|T[l+23|0]<<24),m[l+4|0]=g,m[l+5|0]=g>>>8,m[l+6|0]=g>>>16,m[l+7|0]=g>>>24,g=T[l+52|0]|T[l+53|0]<<8|(T[l+54|0]<<16|T[l+55|0]<<24),m[l+36|0]=g,m[l+37|0]=g>>>8,m[l+38|0]=g>>>16,m[l+39|0]=g>>>24,g=T[l+84|0]|T[l+85|0]<<8|(T[l+86|0]<<16|T[l+87|0]<<24),m[l+68|0]=g,m[l+69|0]=g>>>8,m[l+70|0]=g>>>16,m[l+71|0]=g>>>24,g=T[l+116|0]|T[l+117|0]<<8|(T[l+118|0]<<16|T[l+119|0]<<24),m[l+100|0]=g,m[l+101|0]=g>>>8,m[l+102|0]=g>>>16,m[l+103|0]=g>>>24,g=T[l+148|0]|T[l+149|0]<<8|(T[l+150|0]<<16|T[l+151|0]<<24),m[l+132|0]=g,m[l+133|0]=g>>>8,m[l+134|0]=g>>>16,m[l+135|0]=g>>>24,g=T[l+180|0]|T[l+181|0]<<8|(T[l+182|0]<<16|T[l+183|0]<<24),m[l+164|0]=g,m[l+165|0]=g>>>8,m[l+166|0]=g>>>16,m[l+167|0]=g>>>24,g=T[l+212|0]|T[l+213|0]<<8|(T[l+214|0]<<16|T[l+215|0]<<24),m[l+196|0]=g,m[l+197|0]=g>>>8,m[l+198|0]=g>>>16,m[l+199|0]=g>>>24,g=T[l+244|0]|T[l+245|0]<<8|(T[l+246|0]<<16|T[l+247|0]<<24),m[l+228|0]=g,m[l+229|0]=g>>>8,m[l+230|0]=g>>>16,m[l+231|0]=g>>>24,g=T[l+276|0]|T[l+277|0]<<8|(T[l+278|0]<<16|T[l+279|0]<<24),m[l+260|0]=g,m[l+261|0]=g>>>8,m[l+262|0]=g>>>16,m[l+263|0]=g>>>24,g=T[l+308|0]|T[l+309|0]<<8|(T[l+310|0]<<16|T[l+311|0]<<24),m[l+292|0]=g,m[l+293|0]=g>>>8,m[l+294|0]=g>>>16,m[l+295|0]=g>>>24,g=T[l+340|0]|T[l+341|0]<<8|(T[l+342|0]<<16|T[l+343|0]<<24),m[l+324|0]=g,m[l+325|0]=g>>>8,m[l+326|0]=g>>>16,m[l+327|0]=g>>>24,g=T[l+372|0]|T[l+373|0]<<8|(T[l+374|0]<<16|T[l+375|0]<<24),m[l+356|0]=g,m[l+357|0]=g>>>8,m[l+358|0]=g>>>16,m[l+359|0]=g>>>24,g=T[l+404|0]|T[l+405|0]<<8|(T[l+406|0]<<16|T[l+407|0]<<24),m[l+388|0]=g,m[l+389|0]=g>>>8,m[l+390|0]=g>>>16,m[l+391|0]=g>>>24,g=T[l+436|0]|T[l+437|0]<<8|(T[l+438|0]<<16|T[l+439|0]<<24),m[l+420|0]=g,m[l+421|0]=g>>>8,m[l+422|0]=g>>>16,m[l+423|0]=g>>>24,g=T[l+468|0]|T[l+469|0]<<8|(T[l+470|0]<<16|T[l+471|0]<<24),m[l+452|0]=g,m[l+453|0]=g>>>8,m[l+454|0]=g>>>16,m[l+455|0]=g>>>24,g=T[l+500|0]|T[l+501|0]<<8|(T[l+502|0]<<16|T[l+503|0]<<24),m[l+484|0]=g,m[l+485|0]=g>>>8,m[l+486|0]=g>>>16,m[l+487|0]=g>>>24,g=T[l+532|0]|T[l+533|0]<<8|(T[l+534|0]<<16|T[l+535|0]<<24),m[l+516|0]=g,m[l+517|0]=g>>>8,m[l+518|0]=g>>>16,m[l+519|0]=g>>>24,g=T[l+556|0]|T[l+557|0]<<8|(T[l+558|0]<<16|T[l+559|0]<<24),m[l+548|0]=g,m[l+549|0]=g>>>8,m[l+550|0]=g>>>16,m[l+551|0]=g>>>24,g=T[l+572|0]|T[l+573|0]<<8|(T[l+574|0]<<16|T[l+575|0]<<24),m[l+564|0]=g,m[l+565|0]=g>>>8,m[l+566|0]=g>>>16,m[l+567|0]=g>>>24,g=T[l+588|0]|T[l+589|0]<<8|(T[l+590|0]<<16|T[l+591|0]<<24),m[l+580|0]=g,m[l+581|0]=g>>>8,m[l+582|0]=g>>>16,m[l+583|0]=g>>>24,g=T[l+604|0]|T[l+605|0]<<8|(T[l+606|0]<<16|T[l+607|0]<<24),m[l+596|0]=g,m[l+597|0]=g>>>8,m[l+598|0]=g>>>16,m[l+599|0]=g>>>24,g=T[l+620|0]|T[l+621|0]<<8|(T[l+622|0]<<16|T[l+623|0]<<24),m[l+612|0]=g,m[l+613|0]=g>>>8,m[l+614|0]=g>>>16,m[l+615|0]=g>>>24,g=T[l+636|0]|T[l+637|0]<<8|(T[l+638|0]<<16|T[l+639|0]<<24),m[l+628|0]=g,m[l+629|0]=g>>>8,m[l+630|0]=g>>>16,m[l+631|0]=g>>>24,g=T[l+652|0]|T[l+653|0]<<8|(T[l+654|0]<<16|T[l+655|0]<<24),m[l+644|0]=g,m[l+645|0]=g>>>8,m[l+646|0]=g>>>16,m[l+647|0]=g>>>24,g=T[l+668|0]|T[l+669|0]<<8|(T[l+670|0]<<16|T[l+671|0]<<24),m[l+660|0]=g,m[l+661|0]=g>>>8,m[l+662|0]=g>>>16,m[l+663|0]=g>>>24,g=T[l+684|0]|T[l+685|0]<<8|(T[l+686|0]<<16|T[l+687|0]<<24),m[l+676|0]=g,m[l+677|0]=g>>>8,m[l+678|0]=g>>>16,m[l+679|0]=g>>>24,g=T[l+700|0]|T[l+701|0]<<8|(T[l+702|0]<<16|T[l+703|0]<<24),m[l+692|0]=g,m[l+693|0]=g>>>8,m[l+694|0]=g>>>16,m[l+695|0]=g>>>24,g=T[l+716|0]|T[l+717|0]<<8|(T[l+718|0]<<16|T[l+719|0]<<24),m[l+708|0]=g,m[l+709|0]=g>>>8,m[l+710|0]=g>>>16,m[l+711|0]=g>>>24,g=T[l+732|0]|T[l+733|0]<<8|(T[l+734|0]<<16|T[l+735|0]<<24),m[l+724|0]=g,m[l+725|0]=g>>>8,m[l+726|0]=g>>>16,m[l+727|0]=g>>>24,g=T[l+748|0]|T[l+749|0]<<8|(T[l+750|0]<<16|T[l+751|0]<<24),m[l+740|0]=g,m[l+741|0]=g>>>8,m[l+742|0]=g>>>16,m[l+743|0]=g>>>24,g=T[l+764|0]|T[l+765|0]<<8|(T[l+766|0]<<16|T[l+767|0]<<24),m[l+756|0]=g,m[l+757|0]=g>>>8,m[l+758|0]=g>>>16,m[l+759|0]=g>>>24,g=T[l+780|0]|T[l+781|0]<<8|(T[l+782|0]<<16|T[l+783|0]<<24),m[l+772|0]=g,m[l+773|0]=g>>>8,m[l+774|0]=g>>>16,m[l+775|0]=g>>>24,g=T[l+796|0]|T[l+797|0]<<8|(T[l+798|0]<<16|T[l+799|0]<<24),m[l+788|0]=g,m[l+789|0]=g>>>8,m[l+790|0]=g>>>16,m[l+791|0]=g>>>24,g=T[l+812|0]|T[l+813|0]<<8|(T[l+814|0]<<16|T[l+815|0]<<24),m[l+804|0]=g,m[l+805|0]=g>>>8,m[l+806|0]=g>>>16,m[l+807|0]=g>>>24,g=T[l+828|0]|T[l+829|0]<<8|(T[l+830|0]<<16|T[l+831|0]<<24),m[l+820|0]=g,m[l+821|0]=g>>>8,m[l+822|0]=g>>>16,m[l+823|0]=g>>>24),g=h[i+2252>>2]+(X<<5)|0,x=A+K(X,800)|0,P=h[x+788>>2];e:{t:{r:{n:{if(!Jr){if(U=T[g+4|0]|T[g+5|0]<<8|(T[g+6|0]<<16|T[g+7|0]<<24),b=Sr,j=T[g|0]|T[g+1|0]<<8|(T[g+2|0]<<16|T[g+3|0]<<24),m[b|0]=j,m[b+1|0]=j>>>8,m[b+2|0]=j>>>16,m[b+3|0]=j>>>24,m[b+4|0]=U,m[b+5|0]=U>>>8,m[b+6|0]=U>>>16,m[b+7|0]=U>>>24,U=T[g+12|0]|T[g+13|0]<<8|(T[g+14|0]<<16|T[g+15|0]<<24),j=T[g+8|0]|T[g+9|0]<<8|(T[g+10|0]<<16|T[g+11|0]<<24),m[b+8|0]=j,m[b+9|0]=j>>>8,m[b+10|0]=j>>>16,m[b+11|0]=j>>>24,m[b+12|0]=U,m[b+13|0]=U>>>8,m[b+14|0]=U>>>16,m[b+15|0]=U>>>24,b=T[g+20|0]|T[g+21|0]<<8|(T[g+22|0]<<16|T[g+23|0]<<24),U=T[g+16|0]|T[g+17|0]<<8|(T[g+18|0]<<16|T[g+19|0]<<24),m[l+552|0]=U,m[l+553|0]=U>>>8,m[l+554|0]=U>>>16,m[l+555|0]=U>>>24,m[l+556|0]=b,m[l+557|0]=b>>>8,m[l+558|0]=b>>>16,m[l+559|0]=b>>>24,b=T[g+28|0]|T[g+29|0]<<8|(T[g+30|0]<<16|T[g+31|0]<<24),A=T[g+24|0]|T[g+25|0]<<8|(T[g+26|0]<<16|T[g+27|0]<<24),m[l+568|0]=A,m[l+569|0]=A>>>8,m[l+570|0]=A>>>16,m[l+571|0]=A>>>24,m[l+572|0]=b,m[l+573|0]=b>>>8,m[l+574|0]=b>>>16,m[l+575|0]=b>>>24,T[x+768|0])break n;break t}if(!T[x+768|0])break t;A=h[st>>2];break r}if((X|0)>=(h[i+288>>2]+-1|0)){A=T[g+15|0],h[st>>2]=K(A,16843009),A=A|A<<8,A=A<<16|A;break r}A=T[g+32|0]|T[g+33|0]<<8|(T[g+34|0]<<16|T[g+35|0]<<24),h[st>>2]=A}for(h[l+280>>2]=A,h[l+408>>2]=A,h[l+152>>2]=A,A=0;;){b=kn[(A<<1)+4880>>1]+me|0,tt[h[(T[(x+A|0)+769|0]<<2)+10736>>2]](b),U=x+(A<<5)|0;r:{n:switch((P>>>30|0)+-1|0){case 2:tt[h[2703]](U,b,0);break r;case 1:tt[h[2704]](U,b);break r;case 0:break n;default:break r}tt[h[2706]](U,b)}if(P=P<<2,A=A+1|0,(A|0)==16)break}j=X?Lt:At;break e}if(A=T[x+769|0],j=X?Lt:At,tt[h[((A||j)<<2)+10704>>2]](me),A=0,!P)break e;for(;;){b=x+(A<<5)|0,U=kn[(A<<1)+4880>>1]+me|0;t:{r:switch((P>>>30|0)+-1|0){case 2:tt[h[2703]](b,U,0);break t;case 1:tt[h[2704]](b,U);break t;case 0:break r;default:break t}tt[h[2706]](b,U)}if(P=P<<2,A=A+1|0,(A|0)==16)break}}A=h[x+792>>2],b=T[x+785|0],b=((b||j)<<2)+10784|0,tt[h[b>>2]](je),tt[h[b>>2]](Ie);e:{if(!(A&255))break e;if(b=x+512|0,A&170){tt[h[2705]](b,je);break e}tt[h[2707]](b,je)}e:{if(!(A&65280))break e;if(b=x+640|0,A&43520){tt[h[2705]](b,Ie);break e}tt[h[2707]](b,Ie)}for((ne|0)<(h[i+292>>2]+-1|0)&&(A=Nr,b=T[A+4|0]|T[A+5|0]<<8|(T[A+6|0]<<16|T[A+7|0]<<24),x=T[A|0]|T[A+1|0]<<8|(T[A+2|0]<<16|T[A+3|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,b=T[A+12|0]|T[A+13|0]<<8|(T[A+14|0]<<16|T[A+15|0]<<24),A=T[A+8|0]|T[A+9|0]<<8|(T[A+10|0]<<16|T[A+11|0]<<24),m[g+8|0]=A,m[g+9|0]=A>>>8,m[g+10|0]=A>>>16,m[g+11|0]=A>>>24,m[g+12|0]=b,m[g+13|0]=b>>>8,m[g+14|0]=b>>>16,m[g+15|0]=b>>>24,A=T[l+812|0]|T[l+813|0]<<8|(T[l+814|0]<<16|T[l+815|0]<<24),b=T[l+808|0]|T[l+809|0]<<8|(T[l+810|0]<<16|T[l+811|0]<<24),m[g+16|0]=b,m[g+17|0]=b>>>8,m[g+18|0]=b>>>16,m[g+19|0]=b>>>24,m[g+20|0]=A,m[g+21|0]=A>>>8,m[g+22|0]=A>>>16,m[g+23|0]=A>>>24,A=T[l+828|0]|T[l+829|0]<<8|(T[l+830|0]<<16|T[l+831|0]<<24),b=T[l+824|0]|T[l+825|0]<<8|(T[l+826|0]<<16|T[l+827|0]<<24),m[g+24|0]=b,m[g+25|0]=b>>>8,m[g+26|0]=b>>>16,m[g+27|0]=b>>>24,m[g+28|0]=A,m[g+29|0]=A>>>8,m[g+30|0]=A>>>16,m[g+31|0]=A>>>24),hn=h[i+2284>>2],U=h[i+2272>>2],j=h[i+2276>>2],g=me,x=T[g+4|0]|T[g+5|0]<<8|(T[g+6|0]<<16|T[g+7|0]<<24),b=(h[i+2268>>2]+(X<<4)|0)+K(h[i+2280>>2],lr)|0,P=T[g|0]|T[g+1|0]<<8|(T[g+2|0]<<16|T[g+3|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[g+12|0]|T[g+13|0]<<8|(T[g+14|0]<<16|T[g+15|0]<<24),g=T[g+8|0]|T[g+9|0]<<8|(T[g+10|0]<<16|T[g+11|0]<<24),m[b+8|0]=g,m[b+9|0]=g>>>8,m[b+10|0]=g>>>16,m[b+11|0]=g>>>24,m[b+12|0]=x,m[b+13|0]=x>>>8,m[b+14|0]=x>>>16,m[b+15|0]=x>>>24,g=X<<3,Sn=g+j|0,di=g+U|0,A=1;x=(A<<5)+me|0,U=T[x+4|0]|T[x+5|0]<<8|(T[x+6|0]<<16|T[x+7|0]<<24),g=b+K(h[i+2280>>2],A)|0,j=T[x|0]|T[x+1|0]<<8|(T[x+2|0]<<16|T[x+3|0]<<24),m[g|0]=j,m[g+1|0]=j>>>8,m[g+2|0]=j>>>16,m[g+3|0]=j>>>24,m[g+4|0]=U,m[g+5|0]=U>>>8,m[g+6|0]=U>>>16,m[g+7|0]=U>>>24,P=T[x+12|0]|T[x+13|0]<<8|(T[x+14|0]<<16|T[x+15|0]<<24),x=T[x+8|0]|T[x+9|0]<<8|(T[x+10|0]<<16|T[x+11|0]<<24),m[g+8|0]=x,m[g+9|0]=x>>>8,m[g+10|0]=x>>>16,m[g+11|0]=x>>>24,m[g+12|0]=P,m[g+13|0]=P>>>8,m[g+14|0]=P>>>16,m[g+15|0]=P>>>24,A=A+1|0,(A|0)!=16;);if(b=T[l+588|0]|T[l+589|0]<<8|(T[l+590|0]<<16|T[l+591|0]<<24),P=K(Qt,hn),g=P+di|0,x=T[l+584|0]|T[l+585|0]<<8|(T[l+586|0]<<16|T[l+587|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,A=P+Sn|0,b=A,x=T[l+604|0]|T[l+605|0]<<8|(T[l+606|0]<<16|T[l+607|0]<<24),P=T[l+600|0]|T[l+601|0]<<8|(T[l+602|0]<<16|T[l+603|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+620|0]|T[l+621|0]<<8|(T[l+622|0]<<16|T[l+623|0]<<24),b=g+h[i+2284>>2]|0,P=T[l+616|0]|T[l+617|0]<<8|(T[l+618|0]<<16|T[l+619|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+636|0]|T[l+637|0]<<8|(T[l+638|0]<<16|T[l+639|0]<<24),b=A+h[i+2284>>2]|0,P=T[l+632|0]|T[l+633|0]<<8|(T[l+634|0]<<16|T[l+635|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+652|0]|T[l+653|0]<<8|(T[l+654|0]<<16|T[l+655|0]<<24),b=g+(h[i+2284>>2]<<1)|0,P=T[l+648|0]|T[l+649|0]<<8|(T[l+650|0]<<16|T[l+651|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+668|0]|T[l+669|0]<<8|(T[l+670|0]<<16|T[l+671|0]<<24),b=A+(h[i+2284>>2]<<1)|0,P=T[l+664|0]|T[l+665|0]<<8|(T[l+666|0]<<16|T[l+667|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+684|0]|T[l+685|0]<<8|(T[l+686|0]<<16|T[l+687|0]<<24),b=g+K(h[i+2284>>2],3)|0,P=T[l+680|0]|T[l+681|0]<<8|(T[l+682|0]<<16|T[l+683|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+700|0]|T[l+701|0]<<8|(T[l+702|0]<<16|T[l+703|0]<<24),b=A+K(h[i+2284>>2],3)|0,P=T[l+696|0]|T[l+697|0]<<8|(T[l+698|0]<<16|T[l+699|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+716|0]|T[l+717|0]<<8|(T[l+718|0]<<16|T[l+719|0]<<24),b=g+(h[i+2284>>2]<<2)|0,P=T[l+712|0]|T[l+713|0]<<8|(T[l+714|0]<<16|T[l+715|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+732|0]|T[l+733|0]<<8|(T[l+734|0]<<16|T[l+735|0]<<24),b=A+(h[i+2284>>2]<<2)|0,P=T[l+728|0]|T[l+729|0]<<8|(T[l+730|0]<<16|T[l+731|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+748|0]|T[l+749|0]<<8|(T[l+750|0]<<16|T[l+751|0]<<24),b=g+K(h[i+2284>>2],5)|0,P=T[l+744|0]|T[l+745|0]<<8|(T[l+746|0]<<16|T[l+747|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+764|0]|T[l+765|0]<<8|(T[l+766|0]<<16|T[l+767|0]<<24),b=A+K(h[i+2284>>2],5)|0,P=T[l+760|0]|T[l+761|0]<<8|(T[l+762|0]<<16|T[l+763|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+780|0]|T[l+781|0]<<8|(T[l+782|0]<<16|T[l+783|0]<<24),b=g+K(h[i+2284>>2],6)|0,P=T[l+776|0]|T[l+777|0]<<8|(T[l+778|0]<<16|T[l+779|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=T[l+796|0]|T[l+797|0]<<8|(T[l+798|0]<<16|T[l+799|0]<<24),b=A+K(h[i+2284>>2],6)|0,P=T[l+792|0]|T[l+793|0]<<8|(T[l+794|0]<<16|T[l+795|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,b=T[l+812|0]|T[l+813|0]<<8|(T[l+814|0]<<16|T[l+815|0]<<24),g=g+K(h[i+2284>>2],7)|0,x=T[l+808|0]|T[l+809|0]<<8|(T[l+810|0]<<16|T[l+811|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,g=A+K(h[i+2284>>2],7)|0,A=T[l+828|0]|T[l+829|0]<<8|(T[l+830|0]<<16|T[l+831|0]<<24),b=T[l+824|0]|T[l+825|0]<<8|(T[l+826|0]<<16|T[l+827|0]<<24),m[g|0]=b,m[g+1|0]=b>>>8,m[g+2|0]=b>>>16,m[g+3|0]=b>>>24,m[g+4|0]=A,m[g+5|0]=A>>>8,m[g+6|0]=A>>>16,m[g+7|0]=A>>>24,X=X+1|0,!((X|0)<h[i+288>>2]))break}}function zs(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;me=qn-16|0,qn=me;e:{t:{r:{n:{o:{l:{i:{u:{a:{s:{h:{c:{if(i>>>0<=244){if(A=h[2884],P=i>>>0<11?16:i+11&-8,a=P>>>3|0,i=A>>>a|0,i&3){g=a+((i^-1)&1)|0,a=g<<3,b=h[a+11584>>2],i=b+8|0,l=h[b+8>>2],a=a+11576|0;f:{if((l|0)==(a|0)){Ie=11536,je=ta(-2,g)&A,h[Ie>>2]=je;break f}h[l+12>>2]=a,h[a+8>>2]=l}a=g<<3,h[b+4>>2]=a|3,a=a+b|0,h[a+4>>2]=h[a+4>>2]|1;break e}if(ne=h[2886],P>>>0<=ne>>>0)break c;if(i){l=i<<a,i=2<<a,i=l&(0-i|i),a=(0-i&i)+-1|0,i=a>>>12&16,l=i,a=a>>>i|0,i=a>>>5&8,l=l|i,a=a>>>i|0,i=a>>>2&4,l=l|i,a=a>>>i|0,i=a>>>1&2,l=l|i,a=a>>>i|0,i=a>>>1&1,l=(l|i)+(a>>>i|0)|0,i=l<<3,x=h[i+11584>>2],a=h[x+8>>2],i=i+11576|0;f:{if((a|0)==(i|0)){A=ta(-2,l)&A,h[2884]=A;break f}h[a+12>>2]=i,h[i+8>>2]=a}if(i=x+8|0,h[x+4>>2]=P|3,g=x+P|0,a=l<<3,b=a-P|0,h[g+4>>2]=b|1,h[a+x>>2]=b,ne){a=ne>>>3|0,l=(a<<3)+11576|0,P=h[2889],a=1<<a;f:{if(!(a&A)){h[2884]=a|A,a=l;break f}a=h[l+8>>2]}h[l+8>>2]=P,h[a+12>>2]=P,h[P+12>>2]=l,h[P+8>>2]=a}h[2889]=g,h[2886]=b;break e}if(U=h[2885],!U)break c;for(a=(U&0-U)+-1|0,i=a>>>12&16,l=i,a=a>>>i|0,i=a>>>5&8,l=l|i,a=a>>>i|0,i=a>>>2&4,l=l|i,a=a>>>i|0,i=a>>>1&2,l=l|i,a=a>>>i|0,i=a>>>1&1,a=h[((l|i)+(a>>>i|0)<<2)+11840>>2],b=(h[a+4>>2]&-8)-P|0,l=a;;){f:{if(i=h[l+16>>2],!i&&(i=h[l+20>>2],!i))break f;l=(h[i+4>>2]&-8)-P|0,g=l>>>0<b>>>0,b=g?l:b,a=g?i:a,l=i;continue}break}if(j=a+P|0,j>>>0<=a>>>0)break h;if(X=h[a+24>>2],g=h[a+12>>2],(g|0)!=(a|0)){i=h[a+8>>2],h[i+12>>2]=g,h[g+8>>2]=i;break t}if(l=a+20|0,i=h[l>>2],!i){if(i=h[a+16>>2],!i)break s;l=a+16|0}for(;x=l,g=i,l=i+20|0,i=h[l>>2],!(!i&&(l=g+16|0,i=h[g+16>>2],!i)););h[x>>2]=0;break t}if(P=-1,i>>>0>4294967231||(i=i+11|0,P=i&-8,U=h[2885],!U))break c;i=i>>>8|0,x=0;f:{if(!i||(x=31,P>>>0>16777215))break f;a=i+1048320>>>16&8,i=i<<a,b=i+520192>>>16&4,i=i<<b,l=i+245760>>>16&2,i=(i<<l>>>15|0)-(l|(a|b))|0,x=(i<<1|P>>>i+21&1)+28|0}b=0-P|0,l=h[(x<<2)+11840>>2];f:{p:{d:{if(!l){i=0;break d}for(i=0,a=P<<((x|0)==31?0:25-(x>>>1|0)|0);;){m:{if(A=(h[l+4>>2]&-8)-P|0,A>>>0>=b>>>0||(g=l,b=A,b))break m;b=0,i=l;break p}if(A=h[l+20>>2],l=h[((a>>>29&4)+l|0)+16>>2],i=A?(A|0)==(l|0)?i:A:i,a=a<<1,!l)break}}if(!(i|g)){if(i=2<<x,i=(0-i|i)&U,!i)break c;a=(i&0-i)+-1|0,i=a>>>12&16,l=i,a=a>>>i|0,i=a>>>5&8,l=l|i,a=a>>>i|0,i=a>>>2&4,l=l|i,a=a>>>i|0,i=a>>>1&2,l=l|i,a=a>>>i|0,i=a>>>1&1,i=h[((l|i)+(a>>>i|0)<<2)+11840>>2]}if(!i)break f}for(;a=(h[i+4>>2]&-8)-P|0,l=a>>>0<b>>>0,b=l?a:b,g=l?i:g,a=h[i+16>>2],a?i=a:i=h[i+20>>2],!!i;);}if(!g|b>>>0>=h[2886]-P>>>0)break c;if(x=g+P|0,x>>>0<=g>>>0)break h;if(j=h[g+24>>2],a=h[g+12>>2],(g|0)!=(a|0)){i=h[g+8>>2],h[i+12>>2]=a,h[a+8>>2]=i;break r}if(l=g+20|0,i=h[l>>2],!i){if(i=h[g+16>>2],!i)break a;l=g+16|0}for(;A=l,a=i,l=i+20|0,i=h[l>>2],!(!i&&(l=a+16|0,i=h[a+16>>2],!i)););h[A>>2]=0;break r}if(l=h[2886],l>>>0>=P>>>0){g=h[2889],a=l-P|0;c:{if(a>>>0>=16){h[2886]=a,i=g+P|0,h[2889]=i,h[i+4>>2]=a|1,h[l+g>>2]=a,h[g+4>>2]=P|3;break c}h[2889]=0,h[2886]=0,h[g+4>>2]=l|3,i=l+g|0,h[i+4>>2]=h[i+4>>2]|1}i=g+8|0;break e}if(U=h[2887],U>>>0>P>>>0){a=U-P|0,h[2887]=a,l=h[2890],i=l+P|0,h[2890]=i,h[i+4>>2]=a|1,h[l+4>>2]=P|3,i=l+8|0;break e}if(i=0,j=P+47|0,a=j,h[3002]?l=h[3004]:(h[3005]=-1,h[3006]=-1,h[3003]=4096,h[3004]=4096,h[3002]=me+12&-16^1431655768,h[3007]=0,h[2995]=0,l=4096),x=a+l|0,A=0-l|0,l=x&A,l>>>0<=P>>>0||(b=h[2994],b&&(g=h[2992],a=g+l|0,a>>>0<=g>>>0|a>>>0>b>>>0)))break e;if(T[11980]&4)break l;c:{f:{if(g=h[2890],g)for(i=11984;;){if(a=h[i>>2],a+h[i+4>>2]>>>0>g>>>0&&a>>>0<=g>>>0)break f;if(i=h[i+8>>2],!i)break}if(a=qs(0),(a|0)==-1||(A=l,g=h[3003],i=g+-1|0,i&a&&(A=(l-a|0)+(i+a&0-g)|0),A>>>0<=P>>>0|A>>>0>2147483646)||(b=h[2994],b&&(g=h[2992],i=g+A|0,i>>>0<=g>>>0|i>>>0>b>>>0)))break i;if(i=qs(A),(a|0)!=(i|0))break c;break o}if(A=A&x-U,A>>>0>2147483646)break i;if(a=qs(A),(a|0)==(h[i>>2]+h[i+4>>2]|0))break u;i=a}if(!((i|0)==-1|P+48>>>0<=A>>>0)){if(a=h[3004],a=a+(j-A|0)&0-a,a>>>0>2147483646){a=i;break o}if((qs(a)|0)!=-1){A=a+A|0,a=i;break o}qs(0-A|0);break i}if(a=i,(i|0)!=-1)break o;break i}xs()}g=0;break t}a=0;break r}if((a|0)!=-1)break o}h[2995]=h[2995]|4}if(l>>>0>2147483646||(a=qs(l),i=qs(0),a>>>0>=i>>>0|(a|0)==-1|(i|0)==-1)||(A=i-a|0,A>>>0<=P+40>>>0))break n}i=h[2992]+A|0,h[2992]=i,i>>>0>ii[2993]&&(h[2993]=i);o:{l:{i:{if(b=h[2890],b){for(i=11984;;){if(g=h[i>>2],l=h[i+4>>2],(g+l|0)==(a|0))break i;if(i=h[i+8>>2],!i)break}break l}for(i=h[2888],a>>>0>=i>>>0&&i||(h[2888]=a),i=0,h[2997]=A,h[2996]=a,h[2892]=-1,h[2893]=h[3002],h[2999]=0;g=i<<3,l=g+11576|0,h[g+11584>>2]=l,h[g+11588>>2]=l,i=i+1|0,(i|0)!=32;);g=A+-40|0,i=a+8&7?-8-a&7:0,l=g-i|0,h[2887]=l,i=i+a|0,h[2890]=i,h[i+4>>2]=l|1,h[(a+g|0)+4>>2]=40,h[2891]=h[3006];break o}if(T[i+12|0]&8|a>>>0<=b>>>0|g>>>0>b>>>0)break l;h[i+4>>2]=l+A,i=b+8&7?-8-b&7:0,l=i+b|0,h[2890]=l,a=h[2887]+A|0,i=a-i|0,h[2887]=i,h[l+4>>2]=i|1,h[(a+b|0)+4>>2]=40,h[2891]=h[3006];break o}g=h[2888],a>>>0<g>>>0&&(h[2888]=a,g=0),l=a+A|0,i=11984;l:{i:{u:{a:{s:{h:{for(;;){if((l|0)!=h[i>>2]){if(i=h[i+8>>2],i)continue;break h}break}if(!(T[i+12|0]&8))break s}for(i=11984;;){if(l=h[i>>2],l>>>0<=b>>>0&&(x=l+h[i+4>>2]|0,x>>>0>b>>>0))break a;i=h[i+8>>2]}}if(h[i>>2]=a,h[i+4>>2]=h[i+4>>2]+A,U=(a+8&7?-8-a&7:0)+a|0,h[U+4>>2]=P|3,a=l+(l+8&7?-8-l&7:0)|0,i=(a-U|0)-P|0,x=P+U|0,(a|0)==(b|0)){h[2890]=x,i=h[2887]+i|0,h[2887]=i,h[x+4>>2]=i|1;break i}if(h[2889]==(a|0)){h[2889]=x,i=h[2886]+i|0,h[2886]=i,h[x+4>>2]=i|1,h[i+x>>2]=i;break i}if(l=h[a+4>>2],(l&3)==1){j=l&-8;s:{if(l>>>0<=255){if(b=h[a+8>>2],l=l>>>3|0,g=h[a+12>>2],(g|0)==(b|0)){Ie=11536,je=h[2884]&ta(-2,l),h[Ie>>2]=je;break s}h[b+12>>2]=g,h[g+8>>2]=b;break s}X=h[a+24>>2],A=h[a+12>>2];h:{if((A|0)!=(a|0)){l=h[a+8>>2],h[l+12>>2]=A,h[A+8>>2]=l;break h}c:{if(b=a+20|0,P=h[b>>2],P||(b=a+16|0,P=h[b>>2],P))break c;A=0;break h}for(;l=b,A=P,b=A+20|0,P=h[b>>2],!(!P&&(b=A+16|0,P=h[A+16>>2],!P)););h[l>>2]=0}if(!X)break s;g=h[a+28>>2],l=(g<<2)+11840|0;h:{if(h[l>>2]==(a|0)){if(h[l>>2]=A,A)break h;Ie=11540,je=h[2885]&ta(-2,g),h[Ie>>2]=je;break s}if(h[X+(h[X+16>>2]==(a|0)?16:20)>>2]=A,!A)break s}if(h[A+24>>2]=X,l=h[a+16>>2],l&&(h[A+16>>2]=l,h[l+24>>2]=A),l=h[a+20>>2],!l)break s;h[A+20>>2]=l,h[l+24>>2]=A}a=a+j|0,i=i+j|0}if(h[a+4>>2]=h[a+4>>2]&-2,h[x+4>>2]=i|1,h[i+x>>2]=i,i>>>0<=255){i=i>>>3|0,a=(i<<3)+11576|0,l=h[2884],i=1<<i;s:{if(!(l&i)){h[2884]=i|l,i=a;break s}i=h[a+8>>2]}h[a+8>>2]=x,h[i+12>>2]=x,h[x+12>>2]=a,h[x+8>>2]=i;break i}a=x,g=i>>>8|0,l=0;s:{if(!g||(l=31,i>>>0>16777215))break s;l=g,g=g+1048320>>>16&8,l=l<<g,A=l+520192>>>16&4,l=l<<A,b=l+245760>>>16&2,l=(l<<b>>>15|0)-(b|(g|A))|0,l=(l<<1|i>>>l+21&1)+28|0}h[a+28>>2]=l,h[x+16>>2]=0,h[x+20>>2]=0,A=(l<<2)+11840|0,g=h[2885],a=1<<l;s:{if(!(g&a)){h[2885]=a|g,h[A>>2]=x,h[x+24>>2]=A;break s}for(b=i<<((l|0)==31?0:25-(l>>>1|0)|0),a=h[A>>2];;){if(l=a,(h[a+4>>2]&-8)==(i|0))break u;if(a=b>>>29|0,b=b<<1,g=(l+(a&4)|0)+16|0,a=h[g>>2],!a)break}h[g>>2]=x,h[x+24>>2]=l}h[x+12>>2]=x,h[x+8>>2]=x;break i}for(g=A+-40|0,i=a+8&7?-8-a&7:0,l=g-i|0,h[2887]=l,i=i+a|0,h[2890]=i,h[i+4>>2]=l|1,h[(a+g|0)+4>>2]=40,h[2891]=h[3006],i=(x+(x+-39&7?39-x&7:0)|0)+-47|0,l=i>>>0<b+16>>>0?b:i,h[l+4>>2]=27,i=h[2999],h[l+16>>2]=h[2998],h[l+20>>2]=i,i=h[2997],h[l+8>>2]=h[2996],h[l+12>>2]=i,h[2998]=l+8,h[2997]=A,h[2996]=a,h[2999]=0,i=l+24|0;h[i+4>>2]=7,a=i+8|0,i=i+4|0,x>>>0>a>>>0;);if((l|0)==(b|0))break o;if(h[l+4>>2]=h[l+4>>2]&-2,x=l-b|0,h[b+4>>2]=x|1,h[l>>2]=x,x>>>0<=255){i=x>>>3|0,a=(i<<3)+11576|0,l=h[2884],i=1<<i;a:{if(!(l&i)){h[2884]=i|l,i=a;break a}i=h[a+8>>2]}h[a+8>>2]=b,h[i+12>>2]=b,h[b+12>>2]=a,h[b+8>>2]=i;break o}h[b+16>>2]=0,h[b+20>>2]=0,i=b,l=x>>>8|0,a=0;a:{if(!l||(a=31,x>>>0>16777215))break a;a=l,l=l+1048320>>>16&8,a=a<<l,A=a+520192>>>16&4,a=a<<A,g=a+245760>>>16&2,a=(a<<g>>>15|0)-(g|(l|A))|0,a=(a<<1|x>>>a+21&1)+28|0}h[i+28>>2]=a,g=(a<<2)+11840|0,l=h[2885],i=1<<a;a:{if(!(l&i)){h[2885]=i|l,h[g>>2]=b,h[b+24>>2]=g;break a}for(i=x<<((a|0)==31?0:25-(a>>>1|0)|0),a=h[g>>2];;){if(l=a,(x|0)==(h[a+4>>2]&-8))break l;if(a=i>>>29|0,i=i<<1,g=(l+(a&4)|0)+16|0,a=h[g>>2],!a)break}h[g>>2]=b,h[b+24>>2]=l}h[b+12>>2]=b,h[b+8>>2]=b;break o}i=h[l+8>>2],h[i+12>>2]=x,h[l+8>>2]=x,h[x+24>>2]=0,h[x+12>>2]=l,h[x+8>>2]=i}i=U+8|0;break e}i=h[l+8>>2],h[i+12>>2]=b,h[l+8>>2]=b,h[b+24>>2]=0,h[b+12>>2]=l,h[b+8>>2]=i}if(i=h[2887],i>>>0<=P>>>0)break n;a=i-P|0,h[2887]=a,l=h[2890],i=l+P|0,h[2890]=i,h[i+4>>2]=a|1,h[l+4>>2]=P|3,i=l+8|0;break e}h[2865]=48,i=0;break e}r:{if(!j)break r;l=h[g+28>>2],i=(l<<2)+11840|0;n:{if(h[i>>2]==(g|0)){if(h[i>>2]=a,a)break n;U=ta(-2,l)&U,h[2885]=U;break r}if(h[j+(h[j+16>>2]==(g|0)?16:20)>>2]=a,!a)break r}if(h[a+24>>2]=j,i=h[g+16>>2],i&&(h[a+16>>2]=i,h[i+24>>2]=a),i=h[g+20>>2],!i)break r;h[a+20>>2]=i,h[i+24>>2]=a}r:{if(b>>>0<=15){i=b+P|0,h[g+4>>2]=i|3,i=i+g|0,h[i+4>>2]=h[i+4>>2]|1;break r}if(h[g+4>>2]=P|3,h[x+4>>2]=b|1,h[b+x>>2]=b,b>>>0<=255){i=b>>>3|0,a=(i<<3)+11576|0,l=h[2884],i=1<<i;n:{if(!(l&i)){h[2884]=i|l,i=a;break n}i=h[a+8>>2]}h[a+8>>2]=x,h[i+12>>2]=x,h[x+12>>2]=a,h[x+8>>2]=i;break r}i=x,l=b>>>8|0,a=0;n:{if(!l||(a=31,b>>>0>16777215))break n;a=l,l=l+1048320>>>16&8,a=a<<l,P=a+520192>>>16&4,a=a<<P,A=a+245760>>>16&2,a=(a<<A>>>15|0)-(A|(l|P))|0,a=(a<<1|b>>>a+21&1)+28|0}h[i+28>>2]=a,h[x+16>>2]=0,h[x+20>>2]=0,l=(a<<2)+11840|0;n:{i=1<<a;o:{if(!(i&U)){h[2885]=i|U,h[l>>2]=x,h[x+24>>2]=l;break o}for(i=b<<((a|0)==31?0:25-(a>>>1|0)|0),P=h[l>>2];;){if(a=P,(h[a+4>>2]&-8)==(b|0))break n;if(l=i>>>29|0,i=i<<1,l=(a+(l&4)|0)+16|0,P=h[l>>2],!P)break}h[l>>2]=x,h[x+24>>2]=a}h[x+12>>2]=x,h[x+8>>2]=x;break r}i=h[a+8>>2],h[i+12>>2]=x,h[a+8>>2]=x,h[x+24>>2]=0,h[x+12>>2]=a,h[x+8>>2]=i}i=g+8|0;break e}t:{if(!X)break t;l=h[a+28>>2],i=(l<<2)+11840|0;r:{if(h[i>>2]==(a|0)){if(h[i>>2]=g,g)break r;Ie=11540,je=ta(-2,l)&U,h[Ie>>2]=je;break t}if(h[(h[X+16>>2]==(a|0)?16:20)+X>>2]=g,!g)break t}if(h[g+24>>2]=X,i=h[a+16>>2],i&&(h[g+16>>2]=i,h[i+24>>2]=g),i=h[a+20>>2],!i)break t;h[g+20>>2]=i,h[i+24>>2]=g}t:{if(b>>>0<=15){i=b+P|0,h[a+4>>2]=i|3,i=i+a|0,h[i+4>>2]=h[i+4>>2]|1;break t}if(h[a+4>>2]=P|3,h[j+4>>2]=b|1,h[b+j>>2]=b,ne){i=ne>>>3|0,l=(i<<3)+11576|0,g=h[2889],i=1<<i;r:{if(!(i&A)){h[2884]=i|A,i=l;break r}i=h[l+8>>2]}h[l+8>>2]=g,h[i+12>>2]=g,h[g+12>>2]=l,h[g+8>>2]=i}h[2889]=j,h[2886]=b}i=a+8|0}return qn=me+16|0,i|0}function ks(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0;if(h[a+288>>2]>=1)for(Jr=a+2248|0;;){if(j=h[a+2244>>2],ne=h[a+2304>>2],x=0,h[a+108>>2]){P=h[i+4>>2],b=T[a+904|0],g=h[i+8>>2];e:{if((g|0)>-1)break e;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,g=g+24|0,h[i+8>>2]=g,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=h[i+8>>2]}A=i,X=g,x=h[i>>2],U=x>>>g|0,b=K(b,P)>>>8|0;e:{if(U>>>0>b>>>0){x=((b^-1)<<g)+x|0,h[i>>2]=x,P=P-b|0;break e}P=b+1|0}l=Ri(P)^24,g=X-l|0,h[A+8>>2]=g,A=(P<<l)+-1|0,h[i+4>>2]=A;e:{if(U>>>0<=b>>>0){P=T[a+905|0];t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){b=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=x;break t}Fi(i),x=h[i>>2],g=h[i+8>>2]}b=x>>>g|0,l=K(A,P)>>>8|0;t:{if(b>>>0>l>>>0){h[i>>2]=((l^-1)<<g)+x,A=A-l|0;break t}A=l+1|0}x=b>>>0>l>>>0,l=Ri(A)^24,g=g-l|0,l=A<<l;break e}P=T[a+906|0];t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){b=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=x;break t}Fi(i),x=h[i>>2],g=h[i+8>>2]}l=g,U=l,b=K(A,P)>>>8|0;t:{if(x>>>l>>>0>b>>>0){h[i>>2]=((b^-1)<<g)+x,x=3,A=A-b|0;break t}x=2,A=b+1|0}l=Ri(A)^24,g=U-l|0,l=A<<l}h[i+8>>2]=g,h[i+4>>2]=l+-1}ne=ne+K(me,800)|0,m[ne+798|0]=x;e:{if(!h[a+2236>>2]){g=h[i+8>>2],P=h[i+4>>2];break e}b=h[i+4>>2],x=T[a+2240|0],g=h[i+8>>2];t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,g=g+24|0,h[i+8>>2]=g,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),g=h[i+8>>2]}A=i,X=g,P=h[i>>2],U=P>>>g|0,x=K(b,x)>>>8|0;t:{if(U>>>0>x>>>0){h[i>>2]=P+((x^-1)<<g),b=b-x|0;break t}b=x+1|0}l=Ri(b)^24,g=X-l|0,h[A+8>>2]=g,P=(b<<l)+-1|0,h[i+4>>2]=P,m[ne+797|0]=U>>>0>x>>>0}e:{if((g|0)>-1)break e;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,g=g+24|0,h[i+8>>2]=g,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=h[i+8>>2]}j=j+(me<<2)|0,A=i,X=g,x=h[i>>2],b=K(P,145)>>>8|0,U=x>>>g>>>0<=b>>>0;e:{if(!U){x=((b^-1)<<g)+x|0,h[i>>2]=x,b=P-b|0;break e}b=b+1|0}l=Ri(b)^24,g=X-l|0,h[A+8>>2]=g,P=(b<<l)+-1|0,h[i+4>>2]=P,m[ne+768|0]=U;e:{if(!U){t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=x;break t}Fi(i),x=h[i>>2],g=h[i+8>>2]}A=i,X=g,b=K(P,156)>>>8|0,U=x>>>g>>>0<=b>>>0;t:{if(!U){x=((b^-1)<<g)+x|0,h[i>>2]=x,b=P-b|0;break t}b=b+1|0}l=Ri(b)^24,g=X-l|0,h[A+8>>2]=g,A=(b<<l)+-1|0,h[i+4>>2]=A;t:{if(!U){r:{if((g|0)>-1)break r;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){b=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=x;break r}Fi(i),x=h[i>>2],g=h[i+8>>2]}l=g,P=l,b=A>>>1&16777215;r:{if(x>>>l>>>0>b>>>0){h[i>>2]=((b^-1)<<g)+x,x=1,A=A-b|0;break r}x=3,A=b+1|0}l=Ri(A)^24,g=P-l|0,l=A<<l;break t}r:{if((g|0)>-1)break r;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){b=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=x;break r}Fi(i),x=h[i>>2],g=h[i+8>>2]}l=g,P=l,b=K(A,163)>>>8|0;r:{if(x>>>l>>>0>b>>>0){h[i>>2]=((b^-1)<<g)+x,x=2,A=A-b|0;break r}x=0,A=b+1|0}l=Ri(A)^24,g=P-l|0,l=A<<l}h[i+8>>2]=g,h[i+4>>2]=l+-1,m[ne+769|0]=x,l=K(x,16843009),m[j|0]=l,m[j+1|0]=l>>>8,m[j+2|0]=l>>>16,m[j+3|0]=l>>>24,g=Jr,m[g|0]=l,m[g+1|0]=l>>>8,m[g+2|0]=l>>>16,m[g+3|0]=l>>>24;break e}for(A=ne+769|0,Ie=0;;){for(Lt=(a+Ie|0)+2248|0,g=T[Lt|0],je=0;;){Qt=K(g,9),lr=j+je|0,Nr=K(T[lr|0],90),b=T[Qt+(Nr+3504|0)|0],U=h[i+4>>2],g=h[i+8>>2];t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){x=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,g=g+24|0,h[i+8>>2]=g,h[i>>2]=h[i>>2]<<24|(x>>>8&65280|(x<<8&16711680|x<<24))>>>8;break t}Fi(i),g=h[i+8>>2]}X=i,At=g,P=h[i>>2],st=P>>>g|0,b=K(b,U)>>>8|0;t:{if(st>>>0>b>>>0){P=((b^-1)<<g)+P|0,h[i>>2]=P,U=U-b|0;break t}U=b+1|0}if(l=Ri(U)^24,g=At-l|0,h[X+8>>2]=g,l=(U<<l)+-1|0,h[i+4>>2]=l,b=st>>>0>b>>>0,x=m[b+4416|0],41706>>>b&1)for(;;){st=T[((Nr+3504|0)+Qt|0)+x|0];t:{if((g|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){U=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=b+3,P=P<<24|(U>>>8&65280|(U<<8&16711680|U<<24))>>>8,h[i>>2]=P;break t}Fi(i),P=h[i>>2],g=h[i+8>>2]}b=x<<1,X=i,At=g,Sr=P>>>g|0,U=K(l,st)>>>8|0;t:{if(Sr>>>0>U>>>0){P=((U^-1)<<g)+P|0,h[i>>2]=P,l=l-U|0;break t}l=U+1|0}if(x=Ri(l)^24,g=At-x|0,h[X+8>>2]=g,l=(l<<x)+-1|0,h[i+4>>2]=l,b=b|Sr>>>0>U>>>0,x=m[b+4416|0],!(41706>>>b&1))break}if(g=0-x|0,m[lr|0]=g,je=je+1|0,(je|0)==4)break}if(l=A,A=T[j|0]|T[j+1|0]<<8|(T[j+2|0]<<16|T[j+3|0]<<24),m[l|0]=A,m[l+1|0]=A>>>8,m[l+2|0]=A>>>16,m[l+3|0]=A>>>24,m[Lt|0]=g,A=l+4|0,Ie=Ie+1|0,(Ie|0)==4)break}}P=h[i+4>>2],g=h[i+8>>2];e:{if((g|0)>-1)break e;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,g=g+24|0,h[i+8>>2]=g,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=h[i+8>>2]}A=i,U=g,x=h[i>>2],b=K(P,142)>>>8|0,j=x>>>g>>>0<=b>>>0;e:{if(!j){x=((b^-1)<<g)+x|0,h[i>>2]=x,b=P-b|0;break e}b=b+1|0}l=Ri(b)^24,g=U-l|0,h[A+8>>2]=g,P=(b<<l)+-1|0,h[i+4>>2]=P,l=0;e:{if(j)break e;t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=x;break t}Fi(i),x=h[i>>2],g=h[i+8>>2]}A=i,U=g,b=K(P,114)>>>8|0,j=x>>>g>>>0<=b>>>0;t:{if(!j){x=((b^-1)<<g)+x|0,h[i>>2]=x,b=P-b|0;break t}b=b+1|0}if(l=Ri(b)^24,g=U-l|0,h[A+8>>2]=g,b=(b<<l)+-1|0,h[i+4>>2]=b,l=2,j)break e;t:{if((g|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),g=g+24|0,h[i+8>>2]=g,h[i+12>>2]=l+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=x;break t}Fi(i),x=h[i>>2],g=h[i+8>>2]}l=K(b,183)>>>8|0;t:{if(x>>>g>>>0>l>>>0){h[i>>2]=((l^-1)<<g)+x,x=b-l|0,l=1;break t}x=l+1|0,l=3}b=g,g=Ri(x)^24,h[i+8>>2]=b-g,h[i+4>>2]=(x<<g)+-1}if(m[ne+785|0]=l,me=me+1|0,!((me|0)<h[a+288>>2]))break}return!h[a+36>>2]}function Xl(i,a,l,g,b,x){var A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,el=0,au=0,Uc=0,_f=0;di=i+124|0,A=h[i+112>>2],je=(A|0)/(l|0)|0,Ie=i+24|0,Ni=(K(l,g)<<2)+a|0,g=(A<<2)+a|0;e:{t:{st=K(l,b);r:{if((A|0)>=(st|0))break r;for(me=st<<2,Lt=A-K(l,je)|0,Ua=h[i+148>>2],st=0,Sn=h[i+120>>2],hn=(Sn|0)>0?di:0,el=h[i+56>>2]?je:16777216,au=Sn+280|0,Uc=a+me|0,ne=h[i+168>>2],A=h[i+152>>2],A&&(st=h[h[i+160>>2]+(K(h[i+156>>2],je>>A)+(Lt>>A)<<2)>>2]),Qt=ne+K(st,548)|0,_f=i+136|0,Sr=i- -64|0,st=g;;){(je|0)>=(el|0)&&(A=h[Ie+4>>2],h[Sr>>2]=h[Ie>>2],h[Sr+4>>2]=A,A=h[Ie+28>>2],h[Sr+24>>2]=h[Ie+24>>2],h[Sr+28>>2]=A,A=h[Ie+20>>2],h[Sr+16>>2]=h[Ie+16>>2],h[Sr+20>>2]=A,A=h[Ie+12>>2],h[Sr+8>>2]=h[Ie+8>>2],h[Sr+12>>2]=A,h[i+96>>2]=g-a>>2,h[i+120>>2]>=1&&I0(di,_f),el=je+8|0);n:{o:{l:{if(!(Lt&Ua)){A=h[i+168>>2],U=h[i+152>>2],ne=0;i:{if(!U)break i;ne=h[h[i+160>>2]+(K(h[i+156>>2],je>>U)+(Lt>>U)<<2)>>2]}Qt=A+K(ne,548)|0}if(h[Qt+28>>2]){j=h[Qt+24>>2];break l}h[i+44>>2]>=32&&ge(Ie);i:{if(h[Qt+32>>2]){A=h[i+28>>2],j=h[i+44>>2],P=j&63,U=P&31,At=h[i+24>>2],me=(((32<=(P&63)>>>0?A>>>U|0:((1<<U)-1&A)<<32-U|At>>>U)&63)<<3)+Qt|0,U=h[me+36>>2],ne=j+U|0,j=h[me+40>>2];u:{if((U|0)<=255){h[i+44>>2]=ne,h[g>>2]=j,j=0;break u}h[i+44>>2]=ne+-256}if(h[i+48>>2]|(h[i+44>>2]>64?h[i+40>>2]==h[i+36>>2]:0))break r;if(j)break i;break o}if(me=i,A=h[i+28>>2],j=h[i+44>>2],X=j&63,U=X&31,At=h[i+24>>2],P=h[Qt>>2]+(((32<=(X&63)>>>0?A>>>U|0:((1<<U)-1&A)<<32-U|At>>>U)&255)<<2)|0,U=T[P|0],U>>>0>=9&&(j=j+8|0,h[i+44>>2]=j,ne=(kn[P+2>>1]<<2)+P|0,lr=j&63,P=lr&31,P=ne+(((-1<<U+-8^-1)&(32<=(lr&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|At>>>P))<<2)|0,U=T[P|0]),h[me+44>>2]=(U&255)+j,h[i+48>>2])break r;j=kn[P+2>>1]}if(h[i+44>>2]>64&&h[i+40>>2]==h[i+36>>2])break r;if((j|0)<=255){if(h[Qt+20>>2]){j=h[Qt+24>>2]|j<<8;break l}if(me=i,P=h[i+44>>2],lr=P&63,ne=lr&31,X=h[Qt+4>>2]+(((32<=(lr&63)>>>0?A>>>ne|0:((1<<ne)-1&A)<<32-ne|At>>>ne)&255)<<2)|0,U=T[X|0],U>>>0>=9&&(P=P+8|0,h[i+44>>2]=P,ne=(kn[X+2>>1]<<2)+X|0,Jr=P&63,X=Jr&31,X=ne+(((-1<<U+-8^-1)&(32<=(Jr&63)>>>0?A>>>X|0:((1<<X)-1&A)<<32-X|At>>>X))<<2)|0,U=T[X|0]),P=(U&255)+P|0,h[me+44>>2]=P,lr=kn[X+2>>1],(P|0)>=32&&(ge(Ie),At=h[i+24>>2],P=h[i+44>>2],A=h[i+28>>2]),Jr=P&63,ne=Jr&31,X=h[Qt+8>>2]+(((32<=(Jr&63)>>>0?A>>>ne|0:((1<<ne)-1&A)<<32-ne|At>>>ne)&255)<<2)|0,U=T[X|0],U>>>0>=9&&(P=P+8|0,h[i+44>>2]=P,ne=(kn[X+2>>1]<<2)+X|0,Nr=P&63,X=Nr&31,X=ne+(((-1<<U+-8^-1)&(32<=Nr>>>0?A>>>X|0:((1<<X)-1&A)<<32-X|At>>>X))<<2)|0,U=T[X|0]),P=(U&255)+P|0,h[me+44>>2]=P,Jr=kn[X+2>>1],ne=i,Nr=P&63,me=Nr&31,X=h[Qt+12>>2]+(((32<=Nr>>>0?A>>>me|0:((1<<me)-1&A)<<32-me|At>>>me)&255)<<2)|0,U=T[X|0],U>>>0>=9&&(P=P+8|0,h[i+44>>2]=P,Nr=(kn[X+2>>1]<<2)+X|0,X=P&63,me=X&31,X=Nr+(((-1<<U+-8^-1)&(32<=(X&63)>>>0?A>>>me|0:((1<<me)-1&A)<<32-me|At>>>me))<<2)|0,U=T[X|0]),A=(U&255)+P|0,h[ne+44>>2]=A,h[i+48>>2]||(U=kn[X+2>>1],h[i+40>>2]==h[i+36>>2]&&(A|0)>=65))break r;j=Jr|(lr<<16|j<<8)|U<<24;break l}i:{u:{if((j|0)<=279){ne=j+-256|0,(j|0)>=260&&(A=j+-258>>1,ne=ho(Ie,A)+((ne&1|2)<<A)|0,At=h[Ie>>2],A=h[Ie+4>>2]),me=i,j=h[i+44>>2],lr=j&63,P=lr&31,P=h[Qt+16>>2]+(((32<=(lr&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|At>>>P)&255)<<2)|0,U=T[P|0],U>>>0>=9&&(j=j+8|0,h[i+44>>2]=j,Nr=(kn[P+2>>1]<<2)+P|0,X=j&63,P=X&31,P=Nr+(((-1<<U+-8^-1)&(32<=(X&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|At>>>P))<<2)|0,U=T[P|0]),A=(U&255)+j|0,h[me+44>>2]=A,j=kn[P+2>>1],(A|0)>=32&&ge(Ie),j>>>0>=4&&(A=j+-2>>1,j=ho(Ie,A)+((j&1|2)<<A)|0);a:{if((j+1|0)>=121){A=j+-119|0;break a}A=T[j+1264|0],A=(K(A>>>4|0,l)-(A&15)|0)+8|0,A=(A|0)>1?A:1}if(h[i+48>>2]|(h[i+44>>2]>64?h[i+40>>2]==h[i+36>>2]:0))break r;if(g-a>>2<(A|0)||(me=ne+1|0,Ni-g>>2<(me|0)))break t;if(P=g-(A<<2)|0,!(g&3|(me|0)<4|(A|0)>2)){a:{if((A|0)==1){j=h[P>>2],U=j,A=U,At=A;break a}A=h[P+4>>2],At=h[P>>2],j=At}a:{if(!(g&4)){ne=me,U=g;break a}h[g>>2]=j,At=Fd(At,A),A=jn,P=P+4|0,U=g+4|0}for(j=ne>>>1|0,X=j>>>0>1?j:1,j=0;lr=U+(j<<3)|0,h[lr>>2]=At,h[lr+4>>2]=A,j=j+1|0,(X|0)!=(j|0););if(!(ne&1))break i;A=X<<3,h[A+U>>2]=h[A+P>>2];break i}if((A|0)>=(me|0))break u;if(j=0,(me|0)<=0)break i;for(;A=j<<2,h[A+g>>2]=h[A+P>>2],A=(j|0)!=(ne|0),j=j+1|0,!!A;);break i}if((j|0)>=(au|0))break t;if(U=j+-280|0,A=h[hn>>2],st>>>0<g>>>0)for(;ne=h[st>>2],h[A+(K(ne,506832829)>>>h[hn+4>>2]<<2)>>2]=ne,st=st+4|0,st>>>0<g>>>0;);j=h[A+(U<<2)>>2];break l}oo(g,P,me<<2)}if(Lt=me+Lt|0,(Lt|0)>=(l|0))for(;Lt=Lt-l|0,A=je,je=A+1|0,je&15|(!x|(A|0)>=(b|0))||tt[x|0](i,je),(Lt|0)>=(l|0););if(ne=me<<2,Lt&Ua){A=h[i+168>>2],U=h[i+152>>2],me=0;i:{if(!U)break i;me=h[h[i+160>>2]+(K(h[i+156>>2],je>>U)+(Lt>>U)<<2)>>2]}Qt=A+K(me,548)|0}if(g=g+ne|0,(Sn|0)<1|st>>>0>=g>>>0)break n;for(A=h[hn>>2];U=h[st>>2],h[A+(K(U,506832829)>>>h[hn+4>>2]<<2)>>2]=U,st=st+4|0,st>>>0<g>>>0;);break n}h[g>>2]=j}if(A=g+4|0,Lt=Lt+1|0,(Lt|0)<(l|0)){g=A;break n}if(U=je+1|0,U&15|(!x|(je|0)>=(b|0))||tt[x|0](i,U),Lt=0,!((Sn|0)<1|st>>>0>=A>>>0)){for(ne=h[hn>>2];je=h[st>>2],h[ne+(K(je,506832829)>>>h[hn+4>>2]<<2)>>2]=je,me=st>>>0<g>>>0,je=st+4|0,st=je,!!me;);st=je}g=A,je=U}if(!(g>>>0<Uc>>>0))break}}A=i,l=1;r:{if(h[i+48>>2]||(l=0,h[i+40>>2]!=h[i+36>>2]))break r;l=h[i+44>>2]>64}if(h[A+48>>2]=l,!(!h[i+56>>2]|(!l|g>>>0>=Ni>>>0))){if(h[i>>2]=5,a=h[i+68>>2],h[Ie>>2]=h[i+64>>2],h[Ie+4>>2]=a,a=h[i+92>>2],h[Ie+24>>2]=h[i+88>>2],h[Ie+28>>2]=a,a=h[i+84>>2],h[Ie+16>>2]=h[i+80>>2],h[Ie+20>>2]=a,a=h[i+76>>2],h[Ie+8>>2]=h[i+72>>2],h[Ie+12>>2]=a,h[i+112>>2]=h[i+96>>2],a=1,h[i+120>>2]<1)break e;return I0(i+136|0,di),1}if(l)break t;return x&&tt[x|0](i,(je|0)>(b|0)?b:je),h[i>>2]=0,h[i+112>>2]=g-a>>2,1}h[i>>2]=3,a=0}return a}function As(i){i=i|0;var a=0,l=0;l=Ei(T[i+31|0],0,16843009,16843009),a=l,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,a=jn,m[i+36|0]=a,m[i+37|0]=a>>>8,m[i+38|0]=a>>>16,m[i+39|0]=a>>>24,m[i+40|0]=l,m[i+41|0]=l>>>8,m[i+42|0]=l>>>16,m[i+43|0]=l>>>24,m[i+44|0]=a,m[i+45|0]=a>>>8,m[i+46|0]=a>>>16,m[i+47|0]=a>>>24,l=Ei(T[i+63|0],0,16843009,16843009),a=l,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,a=jn,m[i+68|0]=a,m[i+69|0]=a>>>8,m[i+70|0]=a>>>16,m[i+71|0]=a>>>24,m[i+72|0]=l,m[i+73|0]=l>>>8,m[i+74|0]=l>>>16,m[i+75|0]=l>>>24,m[i+76|0]=a,m[i+77|0]=a>>>8,m[i+78|0]=a>>>16,m[i+79|0]=a>>>24,l=Ei(T[i+95|0],0,16843009,16843009),a=l,m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,a=jn,m[i+100|0]=a,m[i+101|0]=a>>>8,m[i+102|0]=a>>>16,m[i+103|0]=a>>>24,m[i+104|0]=l,m[i+105|0]=l>>>8,m[i+106|0]=l>>>16,m[i+107|0]=l>>>24,m[i+108|0]=a,m[i+109|0]=a>>>8,m[i+110|0]=a>>>16,m[i+111|0]=a>>>24,l=Ei(T[i+127|0],0,16843009,16843009),a=l,m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,a=jn,m[i+132|0]=a,m[i+133|0]=a>>>8,m[i+134|0]=a>>>16,m[i+135|0]=a>>>24,m[i+136|0]=l,m[i+137|0]=l>>>8,m[i+138|0]=l>>>16,m[i+139|0]=l>>>24,m[i+140|0]=a,m[i+141|0]=a>>>8,m[i+142|0]=a>>>16,m[i+143|0]=a>>>24,l=Ei(T[i+159|0],0,16843009,16843009),a=l,m[i+168|0]=a,m[i+169|0]=a>>>8,m[i+170|0]=a>>>16,m[i+171|0]=a>>>24,a=jn,m[i+172|0]=a,m[i+173|0]=a>>>8,m[i+174|0]=a>>>16,m[i+175|0]=a>>>24,m[i+160|0]=l,m[i+161|0]=l>>>8,m[i+162|0]=l>>>16,m[i+163|0]=l>>>24,m[i+164|0]=a,m[i+165|0]=a>>>8,m[i+166|0]=a>>>16,m[i+167|0]=a>>>24,l=Ei(T[i+-1|0],0,16843009,16843009),a=l,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,a=jn,m[i+4|0]=a,m[i+5|0]=a>>>8,m[i+6|0]=a>>>16,m[i+7|0]=a>>>24,m[i+8|0]=l,m[i+9|0]=l>>>8,m[i+10|0]=l>>>16,m[i+11|0]=l>>>24,m[i+12|0]=a,m[i+13|0]=a>>>8,m[i+14|0]=a>>>16,m[i+15|0]=a>>>24,l=Ei(T[i+191|0],0,16843009,16843009),a=l,m[i+200|0]=a,m[i+201|0]=a>>>8,m[i+202|0]=a>>>16,m[i+203|0]=a>>>24,a=jn,m[i+204|0]=a,m[i+205|0]=a>>>8,m[i+206|0]=a>>>16,m[i+207|0]=a>>>24,m[i+192|0]=l,m[i+193|0]=l>>>8,m[i+194|0]=l>>>16,m[i+195|0]=l>>>24,m[i+196|0]=a,m[i+197|0]=a>>>8,m[i+198|0]=a>>>16,m[i+199|0]=a>>>24,l=Ei(T[i+223|0],0,16843009,16843009),a=l,m[i+232|0]=a,m[i+233|0]=a>>>8,m[i+234|0]=a>>>16,m[i+235|0]=a>>>24,a=jn,m[i+236|0]=a,m[i+237|0]=a>>>8,m[i+238|0]=a>>>16,m[i+239|0]=a>>>24,m[i+224|0]=l,m[i+225|0]=l>>>8,m[i+226|0]=l>>>16,m[i+227|0]=l>>>24,m[i+228|0]=a,m[i+229|0]=a>>>8,m[i+230|0]=a>>>16,m[i+231|0]=a>>>24,l=Ei(T[i+255|0],0,16843009,16843009),a=l,m[i+264|0]=a,m[i+265|0]=a>>>8,m[i+266|0]=a>>>16,m[i+267|0]=a>>>24,a=jn,m[i+268|0]=a,m[i+269|0]=a>>>8,m[i+270|0]=a>>>16,m[i+271|0]=a>>>24,m[i+256|0]=l,m[i+257|0]=l>>>8,m[i+258|0]=l>>>16,m[i+259|0]=l>>>24,m[i+260|0]=a,m[i+261|0]=a>>>8,m[i+262|0]=a>>>16,m[i+263|0]=a>>>24,l=Ei(T[i+287|0],0,16843009,16843009),a=l,m[i+296|0]=a,m[i+297|0]=a>>>8,m[i+298|0]=a>>>16,m[i+299|0]=a>>>24,a=jn,m[i+300|0]=a,m[i+301|0]=a>>>8,m[i+302|0]=a>>>16,m[i+303|0]=a>>>24,m[i+288|0]=l,m[i+289|0]=l>>>8,m[i+290|0]=l>>>16,m[i+291|0]=l>>>24,m[i+292|0]=a,m[i+293|0]=a>>>8,m[i+294|0]=a>>>16,m[i+295|0]=a>>>24,l=Ei(T[i+319|0],0,16843009,16843009),a=l,m[i+328|0]=a,m[i+329|0]=a>>>8,m[i+330|0]=a>>>16,m[i+331|0]=a>>>24,a=jn,m[i+332|0]=a,m[i+333|0]=a>>>8,m[i+334|0]=a>>>16,m[i+335|0]=a>>>24,m[i+320|0]=l,m[i+321|0]=l>>>8,m[i+322|0]=l>>>16,m[i+323|0]=l>>>24,m[i+324|0]=a,m[i+325|0]=a>>>8,m[i+326|0]=a>>>16,m[i+327|0]=a>>>24,l=Ei(T[i+351|0],0,16843009,16843009),a=l,m[i+360|0]=a,m[i+361|0]=a>>>8,m[i+362|0]=a>>>16,m[i+363|0]=a>>>24,a=jn,m[i+364|0]=a,m[i+365|0]=a>>>8,m[i+366|0]=a>>>16,m[i+367|0]=a>>>24,m[i+352|0]=l,m[i+353|0]=l>>>8,m[i+354|0]=l>>>16,m[i+355|0]=l>>>24,m[i+356|0]=a,m[i+357|0]=a>>>8,m[i+358|0]=a>>>16,m[i+359|0]=a>>>24,l=Ei(T[i+383|0],0,16843009,16843009),a=l,m[i+392|0]=a,m[i+393|0]=a>>>8,m[i+394|0]=a>>>16,m[i+395|0]=a>>>24,a=jn,m[i+396|0]=a,m[i+397|0]=a>>>8,m[i+398|0]=a>>>16,m[i+399|0]=a>>>24,m[i+384|0]=l,m[i+385|0]=l>>>8,m[i+386|0]=l>>>16,m[i+387|0]=l>>>24,m[i+388|0]=a,m[i+389|0]=a>>>8,m[i+390|0]=a>>>16,m[i+391|0]=a>>>24,l=Ei(T[i+415|0],0,16843009,16843009),a=l,m[i+424|0]=a,m[i+425|0]=a>>>8,m[i+426|0]=a>>>16,m[i+427|0]=a>>>24,a=jn,m[i+428|0]=a,m[i+429|0]=a>>>8,m[i+430|0]=a>>>16,m[i+431|0]=a>>>24,m[i+416|0]=l,m[i+417|0]=l>>>8,m[i+418|0]=l>>>16,m[i+419|0]=l>>>24,m[i+420|0]=a,m[i+421|0]=a>>>8,m[i+422|0]=a>>>16,m[i+423|0]=a>>>24,l=Ei(T[i+447|0],0,16843009,16843009),a=l,m[i+456|0]=a,m[i+457|0]=a>>>8,m[i+458|0]=a>>>16,m[i+459|0]=a>>>24,a=jn,m[i+460|0]=a,m[i+461|0]=a>>>8,m[i+462|0]=a>>>16,m[i+463|0]=a>>>24,m[i+448|0]=l,m[i+449|0]=l>>>8,m[i+450|0]=l>>>16,m[i+451|0]=l>>>24,m[i+452|0]=a,m[i+453|0]=a>>>8,m[i+454|0]=a>>>16,m[i+455|0]=a>>>24,l=Ei(T[i+479|0],0,16843009,16843009),a=l,m[i+488|0]=a,m[i+489|0]=a>>>8,m[i+490|0]=a>>>16,m[i+491|0]=a>>>24,a=jn,m[i+492|0]=a,m[i+493|0]=a>>>8,m[i+494|0]=a>>>16,m[i+495|0]=a>>>24,m[i+480|0]=l,m[i+481|0]=l>>>8,m[i+482|0]=l>>>16,m[i+483|0]=l>>>24,m[i+484|0]=a,m[i+485|0]=a>>>8,m[i+486|0]=a>>>16,m[i+487|0]=a>>>24}function To(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;P=h[i+4>>2],x=T[a+3|0],l=h[i+8>>2];e:{if((l|0)>-1)break e;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){A=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),h[i+12>>2]=b+3,l=l+24|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),l=h[i+8>>2]}A=i,j=l,g=h[i>>2],U=g>>>l|0,x=K(x,P)>>>8|0;e:{if(U>>>0>x>>>0){g=((x^-1)<<l)+g|0,h[i>>2]=g,P=P-x|0;break e}P=x+1|0}b=Ri(P)^24,l=j-b|0,h[A+8>>2]=l,P=(P<<b)+-1|0,h[i+4>>2]=P;e:{if(U>>>0<=x>>>0){x=T[a+4|0];t:{if((l|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){A=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}A=i,j=l,x=K(x,P)>>>8|0,U=g>>>l>>>0<=x>>>0;t:{if(!U){g=((x^-1)<<l)+g|0,h[i>>2]=g,x=P-x|0;break t}x=x+1|0}if(b=Ri(x)^24,l=j-b|0,h[A+8>>2]=l,P=(x<<b)+-1|0,h[i+4>>2]=P,x=2,U)break e;A=T[a+5|0];t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,x=K(A,P)>>>8|0;t:{if(g>>>l>>>0>x>>>0){h[i>>2]=((x^-1)<<l)+g,A=4,l=P-x|0;break t}A=3,l=x+1|0}return a=Ri(l)^24,h[j+8>>2]=b-a,h[i+4>>2]=(l<<a)+-1,A}x=T[a+6|0];t:{if((l|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){A=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}A=i,j=l,U=g>>>l|0,x=K(x,P)>>>8|0;t:{if(U>>>0>x>>>0){g=((x^-1)<<l)+g|0,h[i>>2]=g,P=P-x|0;break t}P=x+1|0}if(b=Ri(P)^24,l=j-b|0,h[A+8>>2]=l,P=(P<<b)+-1|0,h[i+4>>2]=P,U>>>0<=x>>>0){A=T[a+7|0];t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,U=g>>>l|0,A=K(A,P)>>>8|0;t:{if(U>>>0>A>>>0){g=((A^-1)<<l)+g|0,h[i>>2]=g,x=P-A|0;break t}x=A+1|0}if(a=Ri(x)^24,l=b-a|0,h[j+8>>2]=l,P=(x<<a)+-1|0,h[i+4>>2]=P,U>>>0<=A>>>0){t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}a=K(P,159)>>>8|0;t:{if(g>>>l>>>0>a>>>0){h[i>>2]=((a^-1)<<l)+g,g=P-a|0,a=6;break t}g=a+1|0,a=5}return x=l,l=Ri(g)^24,h[i+8>>2]=x-l,h[i+4>>2]=(g<<l)+-1,a}t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,A=K(P,165)>>>8|0;t:{if(g>>>l>>>0>A>>>0){g=((A^-1)<<l)+g|0,h[i>>2]=g,x=9,A=P-A|0;break t}x=7,A=A+1|0}a=Ri(A)^24,l=b-a|0,h[j+8>>2]=l,P=(A<<a)+-1|0,h[i+4>>2]=P;t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,U=g>>>l|0,A=K(P,145)>>>8|0;t:{if(U>>>0>A>>>0){h[i>>2]=((A^-1)<<l)+g,l=P-A|0;break t}l=A+1|0}return a=Ri(l)^24,h[j+8>>2]=b-a,h[i+4>>2]=(l<<a)+-1,(U>>>0>A>>>0)+x|0}x=T[a+8|0];t:{if((l|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){A=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}A=i,j=l,X=g>>>l|0,U=K(x,P)>>>8|0;t:{if(X>>>0>U>>>0){g=((U^-1)<<l)+g|0,h[i>>2]=g,ne=10,x=P-U|0;break t}ne=9,x=U+1|0}b=Ri(x)^24,l=j-b|0,h[A+8>>2]=l,x=(x<<b)+-1|0,h[i+4>>2]=x,A=T[a+ne|0];t:{if((l|0)>-1)break t;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break t}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,P=g>>>l|0,A=K(A,x)>>>8|0;t:{if(P>>>0>A>>>0){g=((A^-1)<<l)+g|0,h[i>>2]=g,x=x-A|0;break t}x=A+1|0}a=Ri(x)^24,l=b-a|0,h[j+8>>2]=l,x=(x<<a)+-1|0,h[i+4>>2]=x,ne=(X>>>0>U>>>0)<<1|P>>>0>A>>>0,A=h[(ne<<2)+10160>>2],a=T[A|0];t:{if(!a){P=0;break t}for(P=0;;){U=a&255;r:{if((l|0)>-1)break r;if(a=h[i+12>>2],a>>>0<ii[i+20>>2]){b=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,h[i>>2]=g;break r}Fi(i),g=h[i>>2],l=h[i+8>>2]}j=i,b=l,X=g>>>l|0,U=K(x,U)>>>8|0;r:{if(X>>>0>U>>>0){g=((U^-1)<<l)+g|0,h[i>>2]=g,x=x-U|0;break r}x=U+1|0}if(a=Ri(x)^24,l=b-a|0,h[j+8>>2]=l,x=(x<<a)+-1|0,h[i+4>>2]=x,P=P<<1|X>>>0>U>>>0,a=T[A+1|0],A=A+1|0,!a)break}}x=(8<<ne|3)+P|0}return x}function te(i){i=i|0,m[i|0]=-2139062144,m[i+1|0]=8421504,m[i+2|0]=32896,m[i+3|0]=128,m[i+4|0]=-2139062144,m[i+5|0]=8421504,m[i+6|0]=32896,m[i+7|0]=128,m[i+32|0]=-2139062144,m[i+33|0]=8421504,m[i+34|0]=32896,m[i+35|0]=128,m[i+36|0]=-2139062144,m[i+37|0]=8421504,m[i+38|0]=32896,m[i+39|0]=128,m[i+64|0]=-2139062144,m[i+65|0]=8421504,m[i+66|0]=32896,m[i+67|0]=128,m[i+68|0]=-2139062144,m[i+69|0]=8421504,m[i+70|0]=32896,m[i+71|0]=128,m[i+96|0]=-2139062144,m[i+97|0]=8421504,m[i+98|0]=32896,m[i+99|0]=128,m[i+100|0]=-2139062144,m[i+101|0]=8421504,m[i+102|0]=32896,m[i+103|0]=128,m[i+128|0]=-2139062144,m[i+129|0]=8421504,m[i+130|0]=32896,m[i+131|0]=128,m[i+132|0]=-2139062144,m[i+133|0]=8421504,m[i+134|0]=32896,m[i+135|0]=128,m[i+160|0]=-2139062144,m[i+161|0]=8421504,m[i+162|0]=32896,m[i+163|0]=128,m[i+164|0]=-2139062144,m[i+165|0]=8421504,m[i+166|0]=32896,m[i+167|0]=128,m[i+192|0]=-2139062144,m[i+193|0]=8421504,m[i+194|0]=32896,m[i+195|0]=128,m[i+196|0]=-2139062144,m[i+197|0]=8421504,m[i+198|0]=32896,m[i+199|0]=128,m[i+224|0]=-2139062144,m[i+225|0]=8421504,m[i+226|0]=32896,m[i+227|0]=128,m[i+228|0]=-2139062144,m[i+229|0]=8421504,m[i+230|0]=32896,m[i+231|0]=128,m[i+256|0]=-2139062144,m[i+257|0]=8421504,m[i+258|0]=32896,m[i+259|0]=128,m[i+260|0]=-2139062144,m[i+261|0]=8421504,m[i+262|0]=32896,m[i+263|0]=128,m[i+8|0]=-2139062144,m[i+9|0]=8421504,m[i+10|0]=32896,m[i+11|0]=128,m[i+12|0]=-2139062144,m[i+13|0]=8421504,m[i+14|0]=32896,m[i+15|0]=128,m[i+40|0]=-2139062144,m[i+41|0]=8421504,m[i+42|0]=32896,m[i+43|0]=128,m[i+44|0]=-2139062144,m[i+45|0]=8421504,m[i+46|0]=32896,m[i+47|0]=128,m[i+72|0]=-2139062144,m[i+73|0]=8421504,m[i+74|0]=32896,m[i+75|0]=128,m[i+76|0]=-2139062144,m[i+77|0]=8421504,m[i+78|0]=32896,m[i+79|0]=128,m[i+104|0]=-2139062144,m[i+105|0]=8421504,m[i+106|0]=32896,m[i+107|0]=128,m[i+108|0]=-2139062144,m[i+109|0]=8421504,m[i+110|0]=32896,m[i+111|0]=128,m[i+136|0]=-2139062144,m[i+137|0]=8421504,m[i+138|0]=32896,m[i+139|0]=128,m[i+140|0]=-2139062144,m[i+141|0]=8421504,m[i+142|0]=32896,m[i+143|0]=128,m[i+168|0]=-2139062144,m[i+169|0]=8421504,m[i+170|0]=32896,m[i+171|0]=128,m[i+172|0]=-2139062144,m[i+173|0]=8421504,m[i+174|0]=32896,m[i+175|0]=128,m[i+200|0]=-2139062144,m[i+201|0]=8421504,m[i+202|0]=32896,m[i+203|0]=128,m[i+204|0]=-2139062144,m[i+205|0]=8421504,m[i+206|0]=32896,m[i+207|0]=128,m[i+232|0]=-2139062144,m[i+233|0]=8421504,m[i+234|0]=32896,m[i+235|0]=128,m[i+236|0]=-2139062144,m[i+237|0]=8421504,m[i+238|0]=32896,m[i+239|0]=128,m[i+264|0]=-2139062144,m[i+265|0]=8421504,m[i+266|0]=32896,m[i+267|0]=128,m[i+268|0]=-2139062144,m[i+269|0]=8421504,m[i+270|0]=32896,m[i+271|0]=128,m[i+296|0]=-2139062144,m[i+297|0]=8421504,m[i+298|0]=32896,m[i+299|0]=128,m[i+300|0]=-2139062144,m[i+301|0]=8421504,m[i+302|0]=32896,m[i+303|0]=128,m[i+288|0]=-2139062144,m[i+289|0]=8421504,m[i+290|0]=32896,m[i+291|0]=128,m[i+292|0]=-2139062144,m[i+293|0]=8421504,m[i+294|0]=32896,m[i+295|0]=128,m[i+328|0]=-2139062144,m[i+329|0]=8421504,m[i+330|0]=32896,m[i+331|0]=128,m[i+332|0]=-2139062144,m[i+333|0]=8421504,m[i+334|0]=32896,m[i+335|0]=128,m[i+320|0]=-2139062144,m[i+321|0]=8421504,m[i+322|0]=32896,m[i+323|0]=128,m[i+324|0]=-2139062144,m[i+325|0]=8421504,m[i+326|0]=32896,m[i+327|0]=128,m[i+360|0]=-2139062144,m[i+361|0]=8421504,m[i+362|0]=32896,m[i+363|0]=128,m[i+364|0]=-2139062144,m[i+365|0]=8421504,m[i+366|0]=32896,m[i+367|0]=128,m[i+352|0]=-2139062144,m[i+353|0]=8421504,m[i+354|0]=32896,m[i+355|0]=128,m[i+356|0]=-2139062144,m[i+357|0]=8421504,m[i+358|0]=32896,m[i+359|0]=128,m[i+392|0]=-2139062144,m[i+393|0]=8421504,m[i+394|0]=32896,m[i+395|0]=128,m[i+396|0]=-2139062144,m[i+397|0]=8421504,m[i+398|0]=32896,m[i+399|0]=128,m[i+384|0]=-2139062144,m[i+385|0]=8421504,m[i+386|0]=32896,m[i+387|0]=128,m[i+388|0]=-2139062144,m[i+389|0]=8421504,m[i+390|0]=32896,m[i+391|0]=128,m[i+424|0]=-2139062144,m[i+425|0]=8421504,m[i+426|0]=32896,m[i+427|0]=128,m[i+428|0]=-2139062144,m[i+429|0]=8421504,m[i+430|0]=32896,m[i+431|0]=128,m[i+416|0]=-2139062144,m[i+417|0]=8421504,m[i+418|0]=32896,m[i+419|0]=128,m[i+420|0]=-2139062144,m[i+421|0]=8421504,m[i+422|0]=32896,m[i+423|0]=128,m[i+456|0]=-2139062144,m[i+457|0]=8421504,m[i+458|0]=32896,m[i+459|0]=128,m[i+460|0]=-2139062144,m[i+461|0]=8421504,m[i+462|0]=32896,m[i+463|0]=128,m[i+448|0]=-2139062144,m[i+449|0]=8421504,m[i+450|0]=32896,m[i+451|0]=128,m[i+452|0]=-2139062144,m[i+453|0]=8421504,m[i+454|0]=32896,m[i+455|0]=128,m[i+488|0]=-2139062144,m[i+489|0]=8421504,m[i+490|0]=32896,m[i+491|0]=128,m[i+492|0]=-2139062144,m[i+493|0]=8421504,m[i+494|0]=32896,m[i+495|0]=128,m[i+480|0]=-2139062144,m[i+481|0]=8421504,m[i+482|0]=32896,m[i+483|0]=128,m[i+484|0]=-2139062144,m[i+485|0]=8421504,m[i+486|0]=32896,m[i+487|0]=128}function Te(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0;a=i,x=a+-32|0,g=x,b=T[g+4|0]|T[g+5|0]<<8|(T[g+6|0]<<16|T[g+7|0]<<24),i=T[g|0]|T[g+1|0]<<8|(T[g+2|0]<<16|T[g+3|0]<<24),l=i,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=b,m[a+5|0]=b>>>8,m[a+6|0]=b>>>16,m[a+7|0]=b>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=b,m[a+37|0]=b>>>8,m[a+38|0]=b>>>16,m[a+39|0]=b>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=b,m[a+69|0]=b>>>8,m[a+70|0]=b>>>16,m[a+71|0]=b>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=b,m[a+101|0]=b>>>8,m[a+102|0]=b>>>16,m[a+103|0]=b>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=b,m[a+133|0]=b>>>8,m[a+134|0]=b>>>16,m[a+135|0]=b>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=b,m[a+165|0]=b>>>8,m[a+166|0]=b>>>16,m[a+167|0]=b>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=b,m[a+197|0]=b>>>8,m[a+198|0]=b>>>16,m[a+199|0]=b>>>24,m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=b,m[a+229|0]=b>>>8,m[a+230|0]=b>>>16,m[a+231|0]=b>>>24,b=g+8|0,g=T[b+4|0]|T[b+5|0]<<8|(T[b+6|0]<<16|T[b+7|0]<<24),i=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),l=i,m[a+8|0]=l,m[a+9|0]=l>>>8,m[a+10|0]=l>>>16,m[a+11|0]=l>>>24,m[a+12|0]=g,m[a+13|0]=g>>>8,m[a+14|0]=g>>>16,m[a+15|0]=g>>>24,m[a+40|0]=l,m[a+41|0]=l>>>8,m[a+42|0]=l>>>16,m[a+43|0]=l>>>24,m[a+44|0]=g,m[a+45|0]=g>>>8,m[a+46|0]=g>>>16,m[a+47|0]=g>>>24,m[a+72|0]=l,m[a+73|0]=l>>>8,m[a+74|0]=l>>>16,m[a+75|0]=l>>>24,m[a+76|0]=g,m[a+77|0]=g>>>8,m[a+78|0]=g>>>16,m[a+79|0]=g>>>24,m[a+104|0]=l,m[a+105|0]=l>>>8,m[a+106|0]=l>>>16,m[a+107|0]=l>>>24,m[a+108|0]=g,m[a+109|0]=g>>>8,m[a+110|0]=g>>>16,m[a+111|0]=g>>>24,m[a+136|0]=l,m[a+137|0]=l>>>8,m[a+138|0]=l>>>16,m[a+139|0]=l>>>24,m[a+140|0]=g,m[a+141|0]=g>>>8,m[a+142|0]=g>>>16,m[a+143|0]=g>>>24,m[a+168|0]=l,m[a+169|0]=l>>>8,m[a+170|0]=l>>>16,m[a+171|0]=l>>>24,m[a+172|0]=g,m[a+173|0]=g>>>8,m[a+174|0]=g>>>16,m[a+175|0]=g>>>24,m[a+200|0]=l,m[a+201|0]=l>>>8,m[a+202|0]=l>>>16,m[a+203|0]=l>>>24,m[a+204|0]=g,m[a+205|0]=g>>>8,m[a+206|0]=g>>>16,m[a+207|0]=g>>>24,m[a+232|0]=l,m[a+233|0]=l>>>8,m[a+234|0]=l>>>16,m[a+235|0]=l>>>24,m[a+236|0]=g,m[a+237|0]=g>>>8,m[a+238|0]=g>>>16,m[a+239|0]=g>>>24,g=T[b+4|0]|T[b+5|0]<<8|(T[b+6|0]<<16|T[b+7|0]<<24),A=g,l=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),m[a+264|0]=l,m[a+265|0]=l>>>8,m[a+266|0]=l>>>16,m[a+267|0]=l>>>24,m[a+268|0]=g,m[a+269|0]=g>>>8,m[a+270|0]=g>>>16,m[a+271|0]=g>>>24,g=T[x+4|0]|T[x+5|0]<<8|(T[x+6|0]<<16|T[x+7|0]<<24),i=T[x|0]|T[x+1|0]<<8|(T[x+2|0]<<16|T[x+3|0]<<24),x=i,m[a+256|0]=x,m[a+257|0]=x>>>8,m[a+258|0]=x>>>16,m[a+259|0]=x>>>24,m[a+260|0]=g,m[a+261|0]=g>>>8,m[a+262|0]=g>>>16,m[a+263|0]=g>>>24,m[a+296|0]=l,m[a+297|0]=l>>>8,m[a+298|0]=l>>>16,m[a+299|0]=l>>>24,m[a+300|0]=A,m[a+301|0]=A>>>8,m[a+302|0]=A>>>16,m[a+303|0]=A>>>24,m[a+288|0]=x,m[a+289|0]=x>>>8,m[a+290|0]=x>>>16,m[a+291|0]=x>>>24,m[a+292|0]=g,m[a+293|0]=g>>>8,m[a+294|0]=g>>>16,m[a+295|0]=g>>>24,m[a+328|0]=l,m[a+329|0]=l>>>8,m[a+330|0]=l>>>16,m[a+331|0]=l>>>24,m[a+332|0]=A,m[a+333|0]=A>>>8,m[a+334|0]=A>>>16,m[a+335|0]=A>>>24,m[a+320|0]=x,m[a+321|0]=x>>>8,m[a+322|0]=x>>>16,m[a+323|0]=x>>>24,m[a+324|0]=g,m[a+325|0]=g>>>8,m[a+326|0]=g>>>16,m[a+327|0]=g>>>24,m[a+360|0]=l,m[a+361|0]=l>>>8,m[a+362|0]=l>>>16,m[a+363|0]=l>>>24,m[a+364|0]=A,m[a+365|0]=A>>>8,m[a+366|0]=A>>>16,m[a+367|0]=A>>>24,m[a+352|0]=x,m[a+353|0]=x>>>8,m[a+354|0]=x>>>16,m[a+355|0]=x>>>24,m[a+356|0]=g,m[a+357|0]=g>>>8,m[a+358|0]=g>>>16,m[a+359|0]=g>>>24,m[a+384|0]=x,m[a+385|0]=x>>>8,m[a+386|0]=x>>>16,m[a+387|0]=x>>>24,m[a+388|0]=g,m[a+389|0]=g>>>8,m[a+390|0]=g>>>16,m[a+391|0]=g>>>24,m[a+392|0]=l,m[a+393|0]=l>>>8,m[a+394|0]=l>>>16,m[a+395|0]=l>>>24,m[a+396|0]=A,m[a+397|0]=A>>>8,m[a+398|0]=A>>>16,m[a+399|0]=A>>>24,m[a+424|0]=l,m[a+425|0]=l>>>8,m[a+426|0]=l>>>16,m[a+427|0]=l>>>24,m[a+428|0]=A,m[a+429|0]=A>>>8,m[a+430|0]=A>>>16,m[a+431|0]=A>>>24,m[a+416|0]=x,m[a+417|0]=x>>>8,m[a+418|0]=x>>>16,m[a+419|0]=x>>>24,m[a+420|0]=g,m[a+421|0]=g>>>8,m[a+422|0]=g>>>16,m[a+423|0]=g>>>24,m[a+448|0]=x,m[a+449|0]=x>>>8,m[a+450|0]=x>>>16,m[a+451|0]=x>>>24,m[a+452|0]=g,m[a+453|0]=g>>>8,m[a+454|0]=g>>>16,m[a+455|0]=g>>>24,m[a+456|0]=l,m[a+457|0]=l>>>8,m[a+458|0]=l>>>16,m[a+459|0]=l>>>24,m[a+460|0]=A,m[a+461|0]=A>>>8,m[a+462|0]=A>>>16,m[a+463|0]=A>>>24,m[a+488|0]=l,m[a+489|0]=l>>>8,m[a+490|0]=l>>>16,m[a+491|0]=l>>>24,m[a+492|0]=A,m[a+493|0]=A>>>8,m[a+494|0]=A>>>16,m[a+495|0]=A>>>24,m[a+480|0]=x,m[a+481|0]=x>>>8,m[a+482|0]=x>>>16,m[a+483|0]=x>>>24,m[a+484|0]=g,m[a+485|0]=g>>>8,m[a+486|0]=g>>>16,m[a+487|0]=g>>>24}function gt(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0;x=qn-80|0,qn=x,h[x+76>>2]=a,lr=x+55|0,At=x+56|0,a=0;e:{t:for(;;){r:{if((Ie|0)<0)break r;if((a|0)>(2147483647-Ie|0)){h[2865]=61,Ie=-1;break r}Ie=a+Ie|0}r:{n:{o:{if(U=h[x+76>>2],a=U,A=T[a|0],A)for(;;){l:{A=A&255;i:{if(!A){A=a;break i}if((A|0)!=37)break l;for(A=a;;){if(T[a+1|0]!=37)break i;if(P=a+2|0,h[x+76>>2]=P,A=A+1|0,j=T[a+2|0],a=P,(j|0)!=37)break}}if(a=A-U|0,i&&yf(i,U,a),a)continue t;A=x,P=!$f(m[h[x+76>>2]+1|0]),a=h[x+76>>2];i:{if(!(P|T[a+2|0]!=36)){st=m[a+1|0]+-48|0,Lt=1,a=a+3|0;break i}st=-1,a=a+1|0}h[A+76>>2]=a,X=0,je=m[a|0],P=je+-32|0;i:{if(P>>>0>31){A=a;break i}if(A=a,P=1<<P,!(P&75913))break i;for(;;){if(A=a+1|0,h[x+76>>2]=A,X=P|X,je=m[a+1|0],P=je+-32|0,P>>>0>=32)break i;if(a=A,P=1<<P,!(P&75913))break}}i:{if((je|0)==42){P=x;u:{a:{if(!$f(m[A+1|0])||(a=h[x+76>>2],T[a+2|0]!=36))break a;h[((m[a+1|0]<<2)+b|0)+-192>>2]=10,ne=h[((m[a+1|0]<<3)+g|0)+-384>>2],Lt=1,a=a+3|0;break u}if(Lt)break o;Lt=0,ne=0,i&&(a=h[l>>2],h[l>>2]=a+4,ne=h[a>>2]),a=h[x+76>>2]+1|0}if(h[P+76>>2]=a,(ne|0)>-1)break i;ne=0-ne|0,X=X|8192;break i}if(ne=Ja(x+76|0),(ne|0)<0)break o;a=h[x+76>>2]}j=-1;i:{if(T[a|0]!=46)break i;if(T[a+1|0]==42){u:{if(!$f(m[a+2|0])||(a=h[x+76>>2],T[a+3|0]!=36))break u;h[((m[a+2|0]<<2)+b|0)+-192>>2]=10,j=h[((m[a+2|0]<<3)+g|0)+-384>>2],a=a+4|0,h[x+76>>2]=a;break i}if(Lt)break o;i?(a=h[l>>2],h[l>>2]=a+4,j=h[a>>2]):j=0,a=h[x+76>>2]+2|0,h[x+76>>2]=a;break i}h[x+76>>2]=a+1,j=Ja(x+76|0),a=h[x+76>>2]}for(A=0;;){if(Qt=A,me=-1,m[a|0]+-65>>>0>57)break e;if(je=a+1|0,h[x+76>>2]=je,A=m[a|0],a=je,A=T[(A+K(Qt,58)|0)+9599|0],!(A+-1>>>0<8))break}i:{u:{if((A|0)!=19){if(!A)break e;if((st|0)>=0){h[(st<<2)+b>>2]=A,a=(st<<3)+g|0,A=h[a+4>>2],h[x+64>>2]=h[a>>2],h[x+68>>2]=A;break u}if(!i)break r;tu(x- -64|0,A,l),je=h[x+76>>2];break i}if((st|0)>-1)break e}if(a=0,!i)continue t}P=X&-65537,A=X&8192?P:X,me=0,st=9644,X=At;i:{u:{a:{s:{h:{c:{f:{p:{d:{m:{v:{_:{b:{g:{w:{y:switch(a=m[je+-1|0],a=Qt&&(a&15)==3?a&-33:a,a+-88|0){case 11:break i;case 9:case 13:case 14:case 15:break u;case 27:break f;case 12:case 17:break m;case 23:break v;case 0:case 32:break _;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(a+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break h;case 1:case 3:break n;default:break y}if((a|0)==83)break c;break n}a=h[x+64>>2],U=h[x+68>>2],st=9644;break d}a=0;g:switch(Qt&255){case 0:h[h[x+64>>2]>>2]=Ie;continue t;case 1:h[h[x+64>>2]>>2]=Ie;continue t;case 2:A=h[x+64>>2],h[A>>2]=Ie,h[A+4>>2]=Ie>>31;continue t;case 3:Pr[h[x+64>>2]>>1]=Ie;continue t;case 4:m[h[x+64>>2]]=Ie;continue t;case 6:h[h[x+64>>2]>>2]=Ie;continue t;case 7:break g;default:continue t}A=h[x+64>>2],h[A>>2]=Ie,h[A+4>>2]=Ie>>31;continue t}j=j>>>0>8?j:8,A=A|8,a=120}if(U=i0(h[x+64>>2],h[x+68>>2],At,a&32),!(A&8)|!(h[x+64>>2]|h[x+68>>2]))break p;st=(a>>>4|0)+9644|0,me=2;break p}if(U=nr(h[x+64>>2],h[x+68>>2],At),!(A&8))break p;a=At-U|0,j=(j|0)>(a|0)?j:a+1|0;break p}if(P=h[x+68>>2],U=P,a=h[x+64>>2],(P|0)<-1||(P|0)<=-1){U=0-(U+(0<a>>>0)|0)|0,a=0-a|0,h[x+64>>2]=a,h[x+68>>2]=U,me=1,st=9644;break d}if(A&2048){me=1,st=9645;break d}me=A&1,st=me?9646:9644}U=Hr(a,U,At)}if(A=(j|0)>-1?A&-65537:A,a=h[x+64>>2],P=h[x+68>>2],!(!!(a|P)|j)){j=0,U=At;break n}a=!(a|P)+(At-U|0)|0,j=(j|0)>(a|0)?j:a;break n}a=h[x+64>>2],U=a||9654,a=Ar(U,j),X=a||j+U|0,A=P,j=a?a-U|0:j;break n}if(P=h[x+64>>2],j)break s;a=0,Wo(i,32,ne,0,A);break a}h[x+12>>2]=0,h[x+8>>2]=h[x+64>>2],h[x+64>>2]=x+8,j=-1,P=x+8|0}a=0;s:{for(;;){if(U=h[P>>2],!U)break s;if(U=zd(x+4|0,U),X=(U|0)<0,!(X|U>>>0>j-a>>>0)){if(P=P+4|0,a=a+U|0,j>>>0>a>>>0)continue;break s}break}if(me=-1,X)break e}if(Wo(i,32,ne,a,A),!a){a=0;break a}for(je=0,P=h[x+64>>2];;){if(U=h[P>>2],!U||(U=zd(x+4|0,U),je=U+je|0,(je|0)>(a|0)))break a;if(yf(i,x+4|0,U),P=P+4|0,!(je>>>0<a>>>0))break}}Wo(i,32,ne,a,A^8192),a=(ne|0)>(a|0)?ne:a;continue t}a=tt[0](i,Lo[x+64>>3],ne,j,A,a)|0;continue t}m[x+55|0]=h[x+64>>2],j=1,U=lr,A=P;break n}P=a+1|0,h[x+76>>2]=P,A=T[a+1|0],a=P}if(me=Ie,i)break e;if(!Lt)break r;for(a=1;;){if(i=h[(a<<2)+b>>2],i){if(tu((a<<3)+g|0,i,l),me=1,a=a+1|0,(a|0)!=10)continue;break e}break}if(me=1,a>>>0>=10)break e;for(;;){if(h[(a<<2)+b>>2])break o;if(a=a+1|0,(a|0)==10)break}break e}me=-1;break e}X=X-U|0,j=(j|0)<(X|0)?X:j,P=j+me|0,a=(ne|0)<(P|0)?P:ne,Wo(i,32,a,P,A),yf(i,st,me),Wo(i,48,a,P,A^65536),Wo(i,48,j,X,0),yf(i,U,X),Wo(i,32,a,P,A^8192);continue}break}me=0}return qn=x+80|0,me}function qt(i){i=i|0;var a=0,l=0;a=i,i=Ei((T[a+-17|0]+(T[a+-18|0]+(T[a+-19|0]+(T[a+-20|0]+(T[a+-21|0]+(T[a+-22|0]+(T[a+-23|0]+(T[a+-24|0]+(T[a+-25|0]+(T[a+-26|0]+(T[a+-27|0]+(T[a+-28|0]+(T[a+-29|0]+(T[a+-30|0]+(T[a+-32|0]+T[a+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,l=jn,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24,m[a+8|0]=i,m[a+9|0]=i>>>8,m[a+10|0]=i>>>16,m[a+11|0]=i>>>24,m[a+12|0]=l,m[a+13|0]=l>>>8,m[a+14|0]=l>>>16,m[a+15|0]=l>>>24,m[a+40|0]=i,m[a+41|0]=i>>>8,m[a+42|0]=i>>>16,m[a+43|0]=i>>>24,m[a+44|0]=l,m[a+45|0]=l>>>8,m[a+46|0]=l>>>16,m[a+47|0]=l>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a+72|0]=i,m[a+73|0]=i>>>8,m[a+74|0]=i>>>16,m[a+75|0]=i>>>24,m[a+76|0]=l,m[a+77|0]=l>>>8,m[a+78|0]=l>>>16,m[a+79|0]=l>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+104|0]=i,m[a+105|0]=i>>>8,m[a+106|0]=i>>>16,m[a+107|0]=i>>>24,m[a+108|0]=l,m[a+109|0]=l>>>8,m[a+110|0]=l>>>16,m[a+111|0]=l>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+136|0]=i,m[a+137|0]=i>>>8,m[a+138|0]=i>>>16,m[a+139|0]=i>>>24,m[a+140|0]=l,m[a+141|0]=l>>>8,m[a+142|0]=l>>>16,m[a+143|0]=l>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+168|0]=i,m[a+169|0]=i>>>8,m[a+170|0]=i>>>16,m[a+171|0]=i>>>24,m[a+172|0]=l,m[a+173|0]=l>>>8,m[a+174|0]=l>>>16,m[a+175|0]=l>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+200|0]=i,m[a+201|0]=i>>>8,m[a+202|0]=i>>>16,m[a+203|0]=i>>>24,m[a+204|0]=l,m[a+205|0]=l>>>8,m[a+206|0]=l>>>16,m[a+207|0]=l>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+232|0]=i,m[a+233|0]=i>>>8,m[a+234|0]=i>>>16,m[a+235|0]=i>>>24,m[a+236|0]=l,m[a+237|0]=l>>>8,m[a+238|0]=l>>>16,m[a+239|0]=l>>>24,m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+264|0]=i,m[a+265|0]=i>>>8,m[a+266|0]=i>>>16,m[a+267|0]=i>>>24,m[a+268|0]=l,m[a+269|0]=l>>>8,m[a+270|0]=l>>>16,m[a+271|0]=l>>>24,m[a+256|0]=i,m[a+257|0]=i>>>8,m[a+258|0]=i>>>16,m[a+259|0]=i>>>24,m[a+260|0]=l,m[a+261|0]=l>>>8,m[a+262|0]=l>>>16,m[a+263|0]=l>>>24,m[a+296|0]=i,m[a+297|0]=i>>>8,m[a+298|0]=i>>>16,m[a+299|0]=i>>>24,m[a+300|0]=l,m[a+301|0]=l>>>8,m[a+302|0]=l>>>16,m[a+303|0]=l>>>24,m[a+288|0]=i,m[a+289|0]=i>>>8,m[a+290|0]=i>>>16,m[a+291|0]=i>>>24,m[a+292|0]=l,m[a+293|0]=l>>>8,m[a+294|0]=l>>>16,m[a+295|0]=l>>>24,m[a+328|0]=i,m[a+329|0]=i>>>8,m[a+330|0]=i>>>16,m[a+331|0]=i>>>24,m[a+332|0]=l,m[a+333|0]=l>>>8,m[a+334|0]=l>>>16,m[a+335|0]=l>>>24,m[a+320|0]=i,m[a+321|0]=i>>>8,m[a+322|0]=i>>>16,m[a+323|0]=i>>>24,m[a+324|0]=l,m[a+325|0]=l>>>8,m[a+326|0]=l>>>16,m[a+327|0]=l>>>24,m[a+360|0]=i,m[a+361|0]=i>>>8,m[a+362|0]=i>>>16,m[a+363|0]=i>>>24,m[a+364|0]=l,m[a+365|0]=l>>>8,m[a+366|0]=l>>>16,m[a+367|0]=l>>>24,m[a+352|0]=i,m[a+353|0]=i>>>8,m[a+354|0]=i>>>16,m[a+355|0]=i>>>24,m[a+356|0]=l,m[a+357|0]=l>>>8,m[a+358|0]=l>>>16,m[a+359|0]=l>>>24,m[a+392|0]=i,m[a+393|0]=i>>>8,m[a+394|0]=i>>>16,m[a+395|0]=i>>>24,m[a+396|0]=l,m[a+397|0]=l>>>8,m[a+398|0]=l>>>16,m[a+399|0]=l>>>24,m[a+384|0]=i,m[a+385|0]=i>>>8,m[a+386|0]=i>>>16,m[a+387|0]=i>>>24,m[a+388|0]=l,m[a+389|0]=l>>>8,m[a+390|0]=l>>>16,m[a+391|0]=l>>>24,m[a+424|0]=i,m[a+425|0]=i>>>8,m[a+426|0]=i>>>16,m[a+427|0]=i>>>24,m[a+428|0]=l,m[a+429|0]=l>>>8,m[a+430|0]=l>>>16,m[a+431|0]=l>>>24,m[a+416|0]=i,m[a+417|0]=i>>>8,m[a+418|0]=i>>>16,m[a+419|0]=i>>>24,m[a+420|0]=l,m[a+421|0]=l>>>8,m[a+422|0]=l>>>16,m[a+423|0]=l>>>24,m[a+456|0]=i,m[a+457|0]=i>>>8,m[a+458|0]=i>>>16,m[a+459|0]=i>>>24,m[a+460|0]=l,m[a+461|0]=l>>>8,m[a+462|0]=l>>>16,m[a+463|0]=l>>>24,m[a+448|0]=i,m[a+449|0]=i>>>8,m[a+450|0]=i>>>16,m[a+451|0]=i>>>24,m[a+452|0]=l,m[a+453|0]=l>>>8,m[a+454|0]=l>>>16,m[a+455|0]=l>>>24,m[a+488|0]=i,m[a+489|0]=i>>>8,m[a+490|0]=i>>>16,m[a+491|0]=i>>>24,m[a+492|0]=l,m[a+493|0]=l>>>8,m[a+494|0]=l>>>16,m[a+495|0]=l>>>24,m[a+480|0]=i,m[a+481|0]=i>>>8,m[a+482|0]=i>>>16,m[a+483|0]=i>>>24,m[a+484|0]=l,m[a+485|0]=l>>>8,m[a+486|0]=l>>>16,m[a+487|0]=l>>>24}function ur(i){i=i|0;var a=0,l=0;a=i,i=Ei((T[a+479|0]+(T[a+447|0]+(T[a+415|0]+(T[a+383|0]+(T[a+351|0]+(T[a+319|0]+(T[a+287|0]+(T[a+255|0]+(T[a+223|0]+(T[a+191|0]+(T[a+159|0]+(T[a+127|0]+(T[a+95|0]+(T[a+63|0]+(T[a+-1|0]+T[a+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,l=jn,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24,m[a+8|0]=i,m[a+9|0]=i>>>8,m[a+10|0]=i>>>16,m[a+11|0]=i>>>24,m[a+12|0]=l,m[a+13|0]=l>>>8,m[a+14|0]=l>>>16,m[a+15|0]=l>>>24,m[a+40|0]=i,m[a+41|0]=i>>>8,m[a+42|0]=i>>>16,m[a+43|0]=i>>>24,m[a+44|0]=l,m[a+45|0]=l>>>8,m[a+46|0]=l>>>16,m[a+47|0]=l>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a+72|0]=i,m[a+73|0]=i>>>8,m[a+74|0]=i>>>16,m[a+75|0]=i>>>24,m[a+76|0]=l,m[a+77|0]=l>>>8,m[a+78|0]=l>>>16,m[a+79|0]=l>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+104|0]=i,m[a+105|0]=i>>>8,m[a+106|0]=i>>>16,m[a+107|0]=i>>>24,m[a+108|0]=l,m[a+109|0]=l>>>8,m[a+110|0]=l>>>16,m[a+111|0]=l>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+136|0]=i,m[a+137|0]=i>>>8,m[a+138|0]=i>>>16,m[a+139|0]=i>>>24,m[a+140|0]=l,m[a+141|0]=l>>>8,m[a+142|0]=l>>>16,m[a+143|0]=l>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+168|0]=i,m[a+169|0]=i>>>8,m[a+170|0]=i>>>16,m[a+171|0]=i>>>24,m[a+172|0]=l,m[a+173|0]=l>>>8,m[a+174|0]=l>>>16,m[a+175|0]=l>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+200|0]=i,m[a+201|0]=i>>>8,m[a+202|0]=i>>>16,m[a+203|0]=i>>>24,m[a+204|0]=l,m[a+205|0]=l>>>8,m[a+206|0]=l>>>16,m[a+207|0]=l>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+232|0]=i,m[a+233|0]=i>>>8,m[a+234|0]=i>>>16,m[a+235|0]=i>>>24,m[a+236|0]=l,m[a+237|0]=l>>>8,m[a+238|0]=l>>>16,m[a+239|0]=l>>>24,m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+264|0]=i,m[a+265|0]=i>>>8,m[a+266|0]=i>>>16,m[a+267|0]=i>>>24,m[a+268|0]=l,m[a+269|0]=l>>>8,m[a+270|0]=l>>>16,m[a+271|0]=l>>>24,m[a+256|0]=i,m[a+257|0]=i>>>8,m[a+258|0]=i>>>16,m[a+259|0]=i>>>24,m[a+260|0]=l,m[a+261|0]=l>>>8,m[a+262|0]=l>>>16,m[a+263|0]=l>>>24,m[a+296|0]=i,m[a+297|0]=i>>>8,m[a+298|0]=i>>>16,m[a+299|0]=i>>>24,m[a+300|0]=l,m[a+301|0]=l>>>8,m[a+302|0]=l>>>16,m[a+303|0]=l>>>24,m[a+288|0]=i,m[a+289|0]=i>>>8,m[a+290|0]=i>>>16,m[a+291|0]=i>>>24,m[a+292|0]=l,m[a+293|0]=l>>>8,m[a+294|0]=l>>>16,m[a+295|0]=l>>>24,m[a+328|0]=i,m[a+329|0]=i>>>8,m[a+330|0]=i>>>16,m[a+331|0]=i>>>24,m[a+332|0]=l,m[a+333|0]=l>>>8,m[a+334|0]=l>>>16,m[a+335|0]=l>>>24,m[a+320|0]=i,m[a+321|0]=i>>>8,m[a+322|0]=i>>>16,m[a+323|0]=i>>>24,m[a+324|0]=l,m[a+325|0]=l>>>8,m[a+326|0]=l>>>16,m[a+327|0]=l>>>24,m[a+360|0]=i,m[a+361|0]=i>>>8,m[a+362|0]=i>>>16,m[a+363|0]=i>>>24,m[a+364|0]=l,m[a+365|0]=l>>>8,m[a+366|0]=l>>>16,m[a+367|0]=l>>>24,m[a+352|0]=i,m[a+353|0]=i>>>8,m[a+354|0]=i>>>16,m[a+355|0]=i>>>24,m[a+356|0]=l,m[a+357|0]=l>>>8,m[a+358|0]=l>>>16,m[a+359|0]=l>>>24,m[a+392|0]=i,m[a+393|0]=i>>>8,m[a+394|0]=i>>>16,m[a+395|0]=i>>>24,m[a+396|0]=l,m[a+397|0]=l>>>8,m[a+398|0]=l>>>16,m[a+399|0]=l>>>24,m[a+384|0]=i,m[a+385|0]=i>>>8,m[a+386|0]=i>>>16,m[a+387|0]=i>>>24,m[a+388|0]=l,m[a+389|0]=l>>>8,m[a+390|0]=l>>>16,m[a+391|0]=l>>>24,m[a+424|0]=i,m[a+425|0]=i>>>8,m[a+426|0]=i>>>16,m[a+427|0]=i>>>24,m[a+428|0]=l,m[a+429|0]=l>>>8,m[a+430|0]=l>>>16,m[a+431|0]=l>>>24,m[a+416|0]=i,m[a+417|0]=i>>>8,m[a+418|0]=i>>>16,m[a+419|0]=i>>>24,m[a+420|0]=l,m[a+421|0]=l>>>8,m[a+422|0]=l>>>16,m[a+423|0]=l>>>24,m[a+456|0]=i,m[a+457|0]=i>>>8,m[a+458|0]=i>>>16,m[a+459|0]=i>>>24,m[a+460|0]=l,m[a+461|0]=l>>>8,m[a+462|0]=l>>>16,m[a+463|0]=l>>>24,m[a+448|0]=i,m[a+449|0]=i>>>8,m[a+450|0]=i>>>16,m[a+451|0]=i>>>24,m[a+452|0]=l,m[a+453|0]=l>>>8,m[a+454|0]=l>>>16,m[a+455|0]=l>>>24,m[a+488|0]=i,m[a+489|0]=i>>>8,m[a+490|0]=i>>>16,m[a+491|0]=i>>>24,m[a+492|0]=l,m[a+493|0]=l>>>8,m[a+494|0]=l>>>16,m[a+495|0]=l>>>24,m[a+480|0]=i,m[a+481|0]=i>>>8,m[a+482|0]=i>>>16,m[a+483|0]=i>>>24,m[a+484|0]=l,m[a+485|0]=l>>>8,m[a+486|0]=l>>>16,m[a+487|0]=l>>>24}function Xr(i){i=i|0;var a=0,l=0;for(l=16;l=T[(i+a|0)+-32|0]+(T[((a<<5)+i|0)+-1|0]+l|0)|0,a=a+1|0,(a|0)!=16;);a=i,i=Ei(l>>>5&255,0,16843009,16843009),l=i,m[a+8|0]=l,m[a+9|0]=l>>>8,m[a+10|0]=l>>>16,m[a+11|0]=l>>>24,i=jn,m[a+12|0]=i,m[a+13|0]=i>>>8,m[a+14|0]=i>>>16,m[a+15|0]=i>>>24,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=i,m[a+5|0]=i>>>8,m[a+6|0]=i>>>16,m[a+7|0]=i>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=i,m[a+37|0]=i>>>8,m[a+38|0]=i>>>16,m[a+39|0]=i>>>24,m[a+40|0]=l,m[a+41|0]=l>>>8,m[a+42|0]=l>>>16,m[a+43|0]=l>>>24,m[a+44|0]=i,m[a+45|0]=i>>>8,m[a+46|0]=i>>>16,m[a+47|0]=i>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=i,m[a+69|0]=i>>>8,m[a+70|0]=i>>>16,m[a+71|0]=i>>>24,m[a+72|0]=l,m[a+73|0]=l>>>8,m[a+74|0]=l>>>16,m[a+75|0]=l>>>24,m[a+76|0]=i,m[a+77|0]=i>>>8,m[a+78|0]=i>>>16,m[a+79|0]=i>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=i,m[a+101|0]=i>>>8,m[a+102|0]=i>>>16,m[a+103|0]=i>>>24,m[a+104|0]=l,m[a+105|0]=l>>>8,m[a+106|0]=l>>>16,m[a+107|0]=l>>>24,m[a+108|0]=i,m[a+109|0]=i>>>8,m[a+110|0]=i>>>16,m[a+111|0]=i>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=i,m[a+133|0]=i>>>8,m[a+134|0]=i>>>16,m[a+135|0]=i>>>24,m[a+136|0]=l,m[a+137|0]=l>>>8,m[a+138|0]=l>>>16,m[a+139|0]=l>>>24,m[a+140|0]=i,m[a+141|0]=i>>>8,m[a+142|0]=i>>>16,m[a+143|0]=i>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=i,m[a+165|0]=i>>>8,m[a+166|0]=i>>>16,m[a+167|0]=i>>>24,m[a+168|0]=l,m[a+169|0]=l>>>8,m[a+170|0]=l>>>16,m[a+171|0]=l>>>24,m[a+172|0]=i,m[a+173|0]=i>>>8,m[a+174|0]=i>>>16,m[a+175|0]=i>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=i,m[a+197|0]=i>>>8,m[a+198|0]=i>>>16,m[a+199|0]=i>>>24,m[a+200|0]=l,m[a+201|0]=l>>>8,m[a+202|0]=l>>>16,m[a+203|0]=l>>>24,m[a+204|0]=i,m[a+205|0]=i>>>8,m[a+206|0]=i>>>16,m[a+207|0]=i>>>24,m[a+232|0]=l,m[a+233|0]=l>>>8,m[a+234|0]=l>>>16,m[a+235|0]=l>>>24,m[a+236|0]=i,m[a+237|0]=i>>>8,m[a+238|0]=i>>>16,m[a+239|0]=i>>>24,m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=i,m[a+229|0]=i>>>8,m[a+230|0]=i>>>16,m[a+231|0]=i>>>24,m[a+264|0]=l,m[a+265|0]=l>>>8,m[a+266|0]=l>>>16,m[a+267|0]=l>>>24,m[a+268|0]=i,m[a+269|0]=i>>>8,m[a+270|0]=i>>>16,m[a+271|0]=i>>>24,m[a+256|0]=l,m[a+257|0]=l>>>8,m[a+258|0]=l>>>16,m[a+259|0]=l>>>24,m[a+260|0]=i,m[a+261|0]=i>>>8,m[a+262|0]=i>>>16,m[a+263|0]=i>>>24,m[a+296|0]=l,m[a+297|0]=l>>>8,m[a+298|0]=l>>>16,m[a+299|0]=l>>>24,m[a+300|0]=i,m[a+301|0]=i>>>8,m[a+302|0]=i>>>16,m[a+303|0]=i>>>24,m[a+288|0]=l,m[a+289|0]=l>>>8,m[a+290|0]=l>>>16,m[a+291|0]=l>>>24,m[a+292|0]=i,m[a+293|0]=i>>>8,m[a+294|0]=i>>>16,m[a+295|0]=i>>>24,m[a+328|0]=l,m[a+329|0]=l>>>8,m[a+330|0]=l>>>16,m[a+331|0]=l>>>24,m[a+332|0]=i,m[a+333|0]=i>>>8,m[a+334|0]=i>>>16,m[a+335|0]=i>>>24,m[a+320|0]=l,m[a+321|0]=l>>>8,m[a+322|0]=l>>>16,m[a+323|0]=l>>>24,m[a+324|0]=i,m[a+325|0]=i>>>8,m[a+326|0]=i>>>16,m[a+327|0]=i>>>24,m[a+360|0]=l,m[a+361|0]=l>>>8,m[a+362|0]=l>>>16,m[a+363|0]=l>>>24,m[a+364|0]=i,m[a+365|0]=i>>>8,m[a+366|0]=i>>>16,m[a+367|0]=i>>>24,m[a+352|0]=l,m[a+353|0]=l>>>8,m[a+354|0]=l>>>16,m[a+355|0]=l>>>24,m[a+356|0]=i,m[a+357|0]=i>>>8,m[a+358|0]=i>>>16,m[a+359|0]=i>>>24,m[a+392|0]=l,m[a+393|0]=l>>>8,m[a+394|0]=l>>>16,m[a+395|0]=l>>>24,m[a+396|0]=i,m[a+397|0]=i>>>8,m[a+398|0]=i>>>16,m[a+399|0]=i>>>24,m[a+384|0]=l,m[a+385|0]=l>>>8,m[a+386|0]=l>>>16,m[a+387|0]=l>>>24,m[a+388|0]=i,m[a+389|0]=i>>>8,m[a+390|0]=i>>>16,m[a+391|0]=i>>>24,m[a+424|0]=l,m[a+425|0]=l>>>8,m[a+426|0]=l>>>16,m[a+427|0]=l>>>24,m[a+428|0]=i,m[a+429|0]=i>>>8,m[a+430|0]=i>>>16,m[a+431|0]=i>>>24,m[a+416|0]=l,m[a+417|0]=l>>>8,m[a+418|0]=l>>>16,m[a+419|0]=l>>>24,m[a+420|0]=i,m[a+421|0]=i>>>8,m[a+422|0]=i>>>16,m[a+423|0]=i>>>24,m[a+456|0]=l,m[a+457|0]=l>>>8,m[a+458|0]=l>>>16,m[a+459|0]=l>>>24,m[a+460|0]=i,m[a+461|0]=i>>>8,m[a+462|0]=i>>>16,m[a+463|0]=i>>>24,m[a+448|0]=l,m[a+449|0]=l>>>8,m[a+450|0]=l>>>16,m[a+451|0]=l>>>24,m[a+452|0]=i,m[a+453|0]=i>>>8,m[a+454|0]=i>>>16,m[a+455|0]=i>>>24,m[a+488|0]=l,m[a+489|0]=l>>>8,m[a+490|0]=l>>>16,m[a+491|0]=l>>>24,m[a+492|0]=i,m[a+493|0]=i>>>8,m[a+494|0]=i>>>16,m[a+495|0]=i>>>24,m[a+480|0]=l,m[a+481|0]=l>>>8,m[a+482|0]=l>>>16,m[a+483|0]=l>>>24,m[a+484|0]=i,m[a+485|0]=i>>>8,m[a+486|0]=i>>>16,m[a+487|0]=i>>>24}function gn(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,el=0,au=0,Uc=0,_f=0;Qt=qn-16|0,qn=Qt,st=g+120|0,ne=g+24|0;e:{t:{r:{n:{o:{l:{i:{if(!l)break i;for(;;){if(!ho(ne,1))break i;if(x=h[g+176>>2],je=ho(ne,2),j=h[g+260>>2],P=1<<je,j&P)break l;h[g+260>>2]=P|j,x=K(x,20)+g|0,X=x+196|0,h[X>>2]=0,j=x+192|0,h[j>>2]=a,P=x+188|0,h[P>>2]=i,h[x+180>>2]=je,me=1,h[g+176>>2]=h[g+176>>2]+1;u:switch(je|0){case 0:case 1:if(Sr=x,x=ho(ne,3)+2|0,h[Sr+184>>2]=x,Sr=h[P>>2],P=-1<<x^-1,gn(Sr+P>>>x|0,P+h[j>>2]>>>x|0,0,g,X))continue;break l;case 3:A=ho(ne,8)+1|0,i=0;a:{if((A|0)>16||(i=1,(A|0)>4))break a;i=(A|0)>2?2:3}if(j=h[P>>2],P=x+184|0,h[P>>2]=i,!gn(A,1,0,g,X))break l;if(je=(j+(1<<i)|0)+-1|0,x=1<<(8>>>h[P>>2]),U=La(x,0,4),U){if(j=h[X>>2],h[U>>2]=h[j>>2],me=4,(A|0)>=2)for(P=A<<2,me=(P|0)>5?P:5,A=4;P=A+U|0,m[P|0]=T[P+-4|0]+T[A+j|0],A=A+1|0,(me|0)!=(A|0););P=x<<2,(P|0)>(me|0)&&ua(U+me|0,0,P-me|0),$i(h[X>>2]),h[X>>2]=U}i=je>>>i|0,me=(U|0)!=0;break;default:break u}if(!me)break}break l}i:{if(!ho(ne,1)||(lr=ho(ne,4),lr+-1>>>0<11))break i;h[g>>2]=3,A=0;break n}h[Qt+12>>2]=0;i:{u:{a:{if(!l){je=1,P=1;break a}if(je=1,P=1,!ho(ne,1))break a;if(Nr=1,x=ho(ne,3)+2|0,P=1<<x,j=(P+i|0)+-1>>>x|0,P=(a+P|0)+-1>>>x|0,!gn(j,P,0,g,Qt+12|0))break u;if(h[g+152>>2]=x,At=K(P,j),(At|0)>=1)for(A=0,P=h[Qt+12>>2];j=P+(A<<2)|0,x=T[j+1|0]|T[j+2|0]<<8,h[j>>2]=x,je=(x|0)<(je|0)?je:x+1|0,A=A+1|0,(At|0)!=(A|0););if(!((je|0)>1e3|(je|0)>(K(i,a)|0))){P=je;break a}if(Sn=La(je,0,4),!Sn){h[g>>2]=1,Sn=0;break u}if(ne=ua(Sn,255,je<<2),(At|0)<1){P=0;break a}for(A=0,X=h[Qt+12>>2],P=0;U=X+(A<<2)|0,j=ne+(h[U>>2]<<2)|0,x=h[j>>2],(x|0)==-1&&(h[j>>2]=P,x=P,P=x+1|0),h[U>>2]=x,A=A+1|0,(At|0)!=(A|0););}if(h[g+48>>2]){Nr=1;break u}if(Nr=1,_f=1<<lr,Uc=(lr|0)>0?_f+280|0:280,me=ul((Uc|0)>256?Uc:256,0,4),Jr=K(kn[(lr<<1)+1184>>1],P),Jr=La(Jr,Jr>>31,4),au=La(P,P>>31,548),!(!au|(!Jr|!me))){for(j=Jr;;){A=di;a:{s:{if(!Sn||(A=h[(di<<2)+Sn>>2],(A|0)!=-1))break s;if(Nr=1,!fs(Uc,g,me,0)||!fs(256,g,me,0)||!fs(256,g,me,0)||!fs(256,g,me,0))break i;if(fs(40,g,me,0))break a;break i}for(Ie=K(A,548)+au|0,Nr=1,Lt=0,Ni=0,hn=1,Ua=0;;){if(h[(Lt<<2)+Ie>>2]=j,At=kn[(Lt<<1)+1208>>1]+((lr|0)>0?Lt?0:_f:0)|0,x=fs(At,g,me,j),!x)break i;s:{if(!hn){hn=0;break s}if(!(Lt&2147483643))break s;hn=!T[j|0]}if(ne=x<<2,X=T[j|0],Lt>>>0<=3){if(A=h[me>>2],x=1,(At|0)>=2)for(;U=h[(x<<2)+me>>2],A=(U|0)>(A|0)?U:A,x=x+1|0,(At|0)!=(x|0););Ni=A+Ni|0}if(j=j+ne|0,Ua=X+Ua|0,Lt=Lt+1|0,(Lt|0)==5)break}h[Ie+28>>2]=0,h[Ie+20>>2]=hn;s:{if(!hn||(A=kn[h[Ie+8>>2]+2>>1]|kn[h[Ie+4>>2]+2>>1]<<16|kn[h[Ie+12>>2]+2>>1]<<24,h[Ie+24>>2]=A,Ua)||(x=kn[h[Ie>>2]+2>>1],x>>>0>255))break s;h[Ie+28>>2]=1,h[Ie+24>>2]=A|x<<8,h[Ie+32>>2]=0;break a}if(h[Ie+32>>2]=(Ni|0)<6,(Ni|0)>5)break a;for(Nr=Ie+12|0,hn=Ie+8|0,Ni=Ie+4|0,Ua=h[Ie>>2],A=0;;){X=(A<<3)+Ie|0,el=X+36|0,x=Ua+(A<<2)|0,U=kn[x>>1]|kn[x+2>>1]<<16,x=U>>>16|0;s:{if(x>>>0>=256){h[el>>2]=U&255|256,h[X+40>>2]=x;break s}U=U&255,h[el>>2]=U,Lt=X+40|0,At=x<<8,h[Lt>>2]=At,ne=A>>>U|0,x=h[Ni>>2]+(ne<<2)|0,X=T[x+2|0]|T[x+3|0]<<8,Sr=U,U=T[x|0],x=Sr+U|0,h[el>>2]=x,At=At|X<<16,h[Lt>>2]=At,ne=ne>>>U|0,X=h[hn>>2]+(ne<<2)|0,U=T[X+2|0]|T[X+3|0]<<8,Sr=x,x=T[X|0],X=Sr+x|0,h[el>>2]=X,U=U|At,h[Lt>>2]=U,ne=h[Nr>>2]+(ne>>>x<<2)|0,x=T[ne+2|0]|T[ne+3|0]<<8,h[el>>2]=X+T[ne|0],h[Lt>>2]=U|x<<24}if(A=A+1|0,(A|0)==64)break}}if(di=di+1|0,(di|0)==(je|0))break}di=h[Qt+12>>2],h[g+172>>2]=Jr,h[g+168>>2]=au,h[g+164>>2]=P,h[g+160>>2]=di,Nr=0;break i}h[g>>2]=1;break i}me=0}if($i(me),$i(Sn),!Nr)break o;$i(h[Qt+12>>2]),$i(Jr),Gf(au)}h[g>>2]=3,A=0;break n}o:{if((lr|0)>=1){if(h[g+120>>2]=1<<lr,Cr(g+124|0,lr))break o;h[g>>2]=1,A=0;break n}h[st>>2]=0}if(h[g+104>>2]=a,h[g+100>>2]=i,P=h[g+152>>2],h[g+148>>2]=P?-1<<P^-1:-1,h[g+156>>2]=((1<<P)+i|0)+-1>>>P,l){h[g+4>>2]=1,A=0;break r}if(A=La(Ei(i,i>>31,a,a>>31),jn,4),!A){h[g>>2]=1,A=0;break n}if(!Xl(g,A,i,a,a,0))break n;if(!h[g+48>>2])break r}$i(A),A=0;break t}if(b&&(h[b>>2]=A),h[g+112>>2]=0,A=1,l)break e}$i(h[g+160>>2]),$i(h[g+172>>2]),Gf(h[g+168>>2]),s0(g+124|0),s0(g+136|0),h[st+48>>2]=0,h[st+52>>2]=0,h[st+40>>2]=0,h[st+44>>2]=0,h[st+32>>2]=0,h[st+36>>2]=0,h[st+24>>2]=0,h[st+28>>2]=0,h[st+16>>2]=0,h[st+20>>2]=0,h[st+8>>2]=0,h[st+12>>2]=0,h[st>>2]=0,h[st+4>>2]=0}return qn=Qt+16|0,A}function Kn(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=T[i|0],X=T[l|0],me=T[g|0],Ie=T[b|0],At=T[x|0],m[A|0]=255,ne=K(ne,19077)>>>8|0,Ie=Ie|At<<16,X=X|me<<16,me=(Ie+K(X,3)|0)+131074|0,At=me>>>2&255,Lt=ne+(K(At,33050)>>>8|0)|0,j=Lt+-17685|0,m[A+3|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,me=me>>>18&255,Lt=ne+(K(me,26149)>>>8|0)|0,j=Lt+-14234|0,m[A+1|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,ne=ne-(K(At,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=ne+8708|0,m[A+2|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=T[a|0],m[P|0]=255,ne=K(ne,19077)>>>8|0,me=(K(Ie,3)+X|0)+131074|0,At=me>>>2&255,Lt=ne+(K(At,33050)>>>8|0)|0,j=Lt+-17685|0,m[P+3|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,me=me>>>18&255,Lt=ne+(K(me,26149)>>>8|0)|0,j=Lt+-14234|0,m[P+1|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,ne=ne-(K(At,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=ne+8708|0,m[P+2|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),Lt=U+-1|0;e:{if((U|0)<3){ne=Ie,me=X;break e}for(ne=Lt>>1,Ni=(ne|0)>1?ne:1,At=1;Sn=At<<1,lr=Sn+-1|0,je=T[lr+i|0],me=T[l+At|0],Qt=T[g+At|0],ne=T[b+At|0],hn=T[x+At|0],di=lr<<2,j=di+A|0,m[j|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ie+me|0,Qt=(ne+(hn+X|0)|0)+524296|0,je=K(je,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,Nr=hn+X|0,Sr=Nr>>>1&255,Jr=je+(K(Sr,33050)>>>8|0)|0,st=Jr+-17685|0,m[j+3|0]=st>>>0<16384?st>>>6|0:Jr>>>0<17685?0:255,Nr=Nr>>>17&255,Jr=je+(K(Nr,26149)>>>8|0)|0,st=Jr+-14234|0,m[j+1|0]=st>>>0<16384?st>>>6|0:Jr>>>0<14234?0:255,st=j,j=je-(K(Sr,6419)>>>8|0)-(K(Nr,13320)>>>8)|0,je=j+8708|0,m[st+2|0]=je>>>0<16384?je>>>6|0:(j|0)<-8708?0:255,je=T[i+Sn|0],Nr=At<<3,j=Nr+A|0,m[j|0]=255,Qt=Qt+(X+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>1&255,X=K(je,19077)>>>8|0,je=(K(Jr,33050)>>>8|0)+X|0,st=je+-17685|0,m[j+3|0]=st>>>0<16384?st>>>6|0:je>>>0<17685?0:255,je=Sr>>>17&255,Sr=X+(K(je,26149)>>>8|0)|0,st=Sr+-14234|0,m[j+1|0]=st>>>0<16384?st>>>6|0:Sr>>>0<14234?0:255,st=j,X=X-(K(Jr,6419)>>>8|0)-(K(je,13320)>>>8)|0,j=X+8708|0,m[st+2|0]=j>>>0<16384?j>>>6|0:(X|0)<-8708?0:255,a&&(j=T[a+lr|0],X=P+di|0,m[X|0]=255,lr=Ie+Qt|0,Qt=lr>>>1&255,Ie=K(j,19077)>>>8|0,j=(K(Qt,33050)>>>8|0)+Ie|0,je=j+-17685|0,m[X+3|0]=je>>>0<16384?je>>>6|0:j>>>0<17685?0:255,j=lr>>>17&255,lr=Ie+(K(j,26149)>>>8|0)|0,je=lr+-14234|0,m[X+1|0]=je>>>0<16384?je>>>6|0:lr>>>0<14234?0:255,st=X,X=Ie-(K(Qt,6419)>>>8|0)-(K(j,13320)>>>8)|0,Ie=X+8708|0,m[st+2|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255,Ie=T[a+Sn|0],X=P+Nr|0,m[X|0]=255,Ie=K(Ie,19077)>>>8|0,j=ne+hn|0,Sn=j>>>1&255,lr=Ie+(K(Sn,33050)>>>8|0)|0,Qt=lr+-17685|0,m[X+3|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,j=j>>>17&255,lr=Ie+(K(j,26149)>>>8|0)|0,Qt=lr+-14234|0,m[X+1|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,st=X,X=Ie-(K(Sn,6419)>>>8|0)-(K(j,13320)>>>8)|0,Ie=X+8708|0,m[st+2|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255),j=(At|0)!=(Ni|0),At=At+1|0,X=me,Ie=ne,!!j;);}e:{if(U&1||(l=T[i+Lt|0],g=Lt<<2,i=g+A|0,m[i|0]=255,l=K(l,19077)>>>8|0,b=(K(me,3)+ne|0)+131074|0,x=b>>>2&255,A=l+(K(x,33050)>>>8|0)|0,U=A+-17685|0,m[i+3|0]=U>>>0<16384?U>>>6|0:A>>>0<17685?0:255,b=b>>>18&255,A=l+(K(b,26149)>>>8|0)|0,U=A+-14234|0,m[i+1|0]=U>>>0<16384?U>>>6|0:A>>>0<14234?0:255,A=i,i=l-(K(x,6419)>>>8|0)-(K(b,13320)>>>8)|0,l=i+8708|0,m[A+2|0]=l>>>0<16384?l>>>6|0:(i|0)<-8708?0:255,!a))break e;a=T[a+Lt|0],i=g+P|0,m[i|0]=255,a=K(a,19077)>>>8|0,l=(K(ne,3)+me|0)+131074|0,g=l>>>2&255,b=a+(K(g,33050)>>>8|0)|0,x=b+-17685|0,m[i+3|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,l=l>>>18&255,b=a+(K(l,26149)>>>8|0)|0,x=b+-14234|0,m[i+1|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i,i=a-(K(g,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[b+2|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function xi(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=T[i|0],X=T[l|0],me=T[g|0],Ie=T[b|0],At=T[x|0],m[A+3|0]=255,ne=K(ne,19077)>>>8|0,Ie=Ie|At<<16,X=X|me<<16,me=(Ie+K(X,3)|0)+131074|0,At=me>>>2&255,Lt=ne+(K(At,33050)>>>8|0)|0,j=Lt+-17685|0,m[A+2|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,me=me>>>18&255,Lt=ne+(K(me,26149)>>>8|0)|0,j=Lt+-14234|0,m[A|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,ne=ne-(K(At,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=T[a|0],m[P+3|0]=255,ne=K(ne,19077)>>>8|0,me=(K(Ie,3)+X|0)+131074|0,At=me>>>2&255,Lt=ne+(K(At,33050)>>>8|0)|0,j=Lt+-17685|0,m[P+2|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,me=me>>>18&255,Lt=ne+(K(me,26149)>>>8|0)|0,j=Lt+-14234|0,m[P|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,ne=ne-(K(At,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),Lt=U+-1|0;e:{if((U|0)<3){ne=Ie,me=X;break e}for(ne=Lt>>1,Ni=(ne|0)>1?ne:1,At=1;Sn=At<<1,lr=Sn+-1|0,je=T[lr+i|0],me=T[l+At|0],Qt=T[g+At|0],ne=T[b+At|0],hn=T[x+At|0],di=lr<<2,j=di+A|0,m[j+3|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ie+me|0,Qt=(ne+(hn+X|0)|0)+524296|0,je=K(je,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,Nr=hn+X|0,Sr=Nr>>>1&255,Jr=je+(K(Sr,33050)>>>8|0)|0,st=Jr+-17685|0,m[j+2|0]=st>>>0<16384?st>>>6|0:Jr>>>0<17685?0:255,Nr=Nr>>>17&255,Jr=je+(K(Nr,26149)>>>8|0)|0,st=Jr+-14234|0,m[j|0]=st>>>0<16384?st>>>6|0:Jr>>>0<14234?0:255,st=j,j=je-(K(Sr,6419)>>>8|0)-(K(Nr,13320)>>>8)|0,je=j+8708|0,m[st+1|0]=je>>>0<16384?je>>>6|0:(j|0)<-8708?0:255,je=T[i+Sn|0],Nr=At<<3,j=Nr+A|0,m[j+3|0]=255,Qt=Qt+(X+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>1&255,X=K(je,19077)>>>8|0,je=(K(Jr,33050)>>>8|0)+X|0,st=je+-17685|0,m[j+2|0]=st>>>0<16384?st>>>6|0:je>>>0<17685?0:255,je=Sr>>>17&255,Sr=X+(K(je,26149)>>>8|0)|0,st=Sr+-14234|0,m[j|0]=st>>>0<16384?st>>>6|0:Sr>>>0<14234?0:255,st=j,X=X-(K(Jr,6419)>>>8|0)-(K(je,13320)>>>8)|0,j=X+8708|0,m[st+1|0]=j>>>0<16384?j>>>6|0:(X|0)<-8708?0:255,a&&(j=T[a+lr|0],X=P+di|0,m[X+3|0]=255,lr=Ie+Qt|0,Qt=lr>>>1&255,Ie=K(j,19077)>>>8|0,j=(K(Qt,33050)>>>8|0)+Ie|0,je=j+-17685|0,m[X+2|0]=je>>>0<16384?je>>>6|0:j>>>0<17685?0:255,j=lr>>>17&255,lr=Ie+(K(j,26149)>>>8|0)|0,je=lr+-14234|0,m[X|0]=je>>>0<16384?je>>>6|0:lr>>>0<14234?0:255,st=X,X=Ie-(K(Qt,6419)>>>8|0)-(K(j,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255,Ie=T[a+Sn|0],X=P+Nr|0,m[X+3|0]=255,Ie=K(Ie,19077)>>>8|0,j=ne+hn|0,Sn=j>>>1&255,lr=Ie+(K(Sn,33050)>>>8|0)|0,Qt=lr+-17685|0,m[X+2|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,j=j>>>17&255,lr=Ie+(K(j,26149)>>>8|0)|0,Qt=lr+-14234|0,m[X|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,st=X,X=Ie-(K(Sn,6419)>>>8|0)-(K(j,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255),j=(At|0)!=(Ni|0),At=At+1|0,X=me,Ie=ne,!!j;);}e:{if(U&1||(l=T[i+Lt|0],g=Lt<<2,i=g+A|0,m[i+3|0]=255,l=K(l,19077)>>>8|0,b=(K(me,3)+ne|0)+131074|0,x=b>>>2&255,A=l+(K(x,33050)>>>8|0)|0,U=A+-17685|0,m[i+2|0]=U>>>0<16384?U>>>6|0:A>>>0<17685?0:255,b=b>>>18&255,A=l+(K(b,26149)>>>8|0)|0,U=A+-14234|0,m[i|0]=U>>>0<16384?U>>>6|0:A>>>0<14234?0:255,A=i,i=l-(K(x,6419)>>>8|0)-(K(b,13320)>>>8)|0,l=i+8708|0,m[A+1|0]=l>>>0<16384?l>>>6|0:(i|0)<-8708?0:255,!a))break e;a=T[a+Lt|0],i=g+P|0,m[i+3|0]=255,a=K(a,19077)>>>8|0,l=(K(ne,3)+me|0)+131074|0,g=l>>>2&255,b=a+(K(g,33050)>>>8|0)|0,x=b+-17685|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,l=l>>>18&255,b=a+(K(l,26149)>>>8|0)|0,x=b+-14234|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i,i=a-(K(g,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Oi(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=T[i|0],X=T[l|0],me=T[g|0],Ie=T[b|0],At=T[x|0],m[A+3|0]=255,ne=K(ne,19077)>>>8|0,Ie=Ie|At<<16,X=X|me<<16,me=(Ie+K(X,3)|0)+131074|0,At=me>>>18&255,Lt=ne+(K(At,26149)>>>8|0)|0,j=Lt+-14234|0,m[A+2|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,me=me>>>2&255,Lt=ne+(K(me,33050)>>>8|0)|0,j=Lt+-17685|0,m[A|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(At,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=T[a|0],m[P+3|0]=255,ne=K(ne,19077)>>>8|0,me=(K(Ie,3)+X|0)+131074|0,At=me>>>18&255,Lt=ne+(K(At,26149)>>>8|0)|0,j=Lt+-14234|0,m[P+2|0]=j>>>0<16384?j>>>6|0:Lt>>>0<14234?0:255,me=me>>>2&255,Lt=ne+(K(me,33050)>>>8|0)|0,j=Lt+-17685|0,m[P|0]=j>>>0<16384?j>>>6|0:Lt>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(At,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),Lt=U+-1|0;e:{if((U|0)<3){ne=Ie,me=X;break e}for(ne=Lt>>1,Ni=(ne|0)>1?ne:1,At=1;Sn=At<<1,lr=Sn+-1|0,je=T[lr+i|0],me=T[l+At|0],Qt=T[g+At|0],ne=T[b+At|0],hn=T[x+At|0],di=lr<<2,j=di+A|0,m[j+3|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ie+me|0,Qt=(ne+(hn+X|0)|0)+524296|0,je=K(je,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,Nr=hn+X|0,Sr=Nr>>>17&255,Jr=je+(K(Sr,26149)>>>8|0)|0,st=Jr+-14234|0,m[j+2|0]=st>>>0<16384?st>>>6|0:Jr>>>0<14234?0:255,Nr=Nr>>>1&255,Jr=je+(K(Nr,33050)>>>8|0)|0,st=Jr+-17685|0,m[j|0]=st>>>0<16384?st>>>6|0:Jr>>>0<17685?0:255,st=j,j=je-(K(Nr,6419)>>>8|0)-(K(Sr,13320)>>>8)|0,je=j+8708|0,m[st+1|0]=je>>>0<16384?je>>>6|0:(j|0)<-8708?0:255,je=T[i+Sn|0],Nr=At<<3,j=Nr+A|0,m[j+3|0]=255,Qt=Qt+(X+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>17&255,X=K(je,19077)>>>8|0,je=(K(Jr,26149)>>>8|0)+X|0,st=je+-14234|0,m[j+2|0]=st>>>0<16384?st>>>6|0:je>>>0<14234?0:255,je=Sr>>>1&255,Sr=X+(K(je,33050)>>>8|0)|0,st=Sr+-17685|0,m[j|0]=st>>>0<16384?st>>>6|0:Sr>>>0<17685?0:255,st=j,X=X-(K(je,6419)>>>8|0)-(K(Jr,13320)>>>8)|0,j=X+8708|0,m[st+1|0]=j>>>0<16384?j>>>6|0:(X|0)<-8708?0:255,a&&(j=T[a+lr|0],X=P+di|0,m[X+3|0]=255,lr=Ie+Qt|0,Qt=lr>>>17&255,Ie=K(j,19077)>>>8|0,j=(K(Qt,26149)>>>8|0)+Ie|0,je=j+-14234|0,m[X+2|0]=je>>>0<16384?je>>>6|0:j>>>0<14234?0:255,j=lr>>>1&255,lr=Ie+(K(j,33050)>>>8|0)|0,je=lr+-17685|0,m[X|0]=je>>>0<16384?je>>>6|0:lr>>>0<17685?0:255,st=X,X=Ie-(K(j,6419)>>>8|0)-(K(Qt,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255,Ie=T[a+Sn|0],X=P+Nr|0,m[X+3|0]=255,Ie=K(Ie,19077)>>>8|0,j=ne+hn|0,Sn=j>>>17&255,lr=Ie+(K(Sn,26149)>>>8|0)|0,Qt=lr+-14234|0,m[X+2|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,j=j>>>1&255,lr=Ie+(K(j,33050)>>>8|0)|0,Qt=lr+-17685|0,m[X|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,st=X,X=Ie-(K(j,6419)>>>8|0)-(K(Sn,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255),j=(At|0)!=(Ni|0),At=At+1|0,X=me,Ie=ne,!!j;);}e:{if(U&1||(l=T[i+Lt|0],g=Lt<<2,i=g+A|0,m[i+3|0]=255,l=K(l,19077)>>>8|0,b=(K(me,3)+ne|0)+131074|0,x=b>>>18&255,A=l+(K(x,26149)>>>8|0)|0,U=A+-14234|0,m[i+2|0]=U>>>0<16384?U>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=l+(K(b,33050)>>>8|0)|0,U=A+-17685|0,m[i|0]=U>>>0<16384?U>>>6|0:A>>>0<17685?0:255,A=i,i=l-(K(b,6419)>>>8|0)-(K(x,13320)>>>8)|0,l=i+8708|0,m[A+1|0]=l>>>0<16384?l>>>6|0:(i|0)<-8708?0:255,!a))break e;a=T[a+Lt|0],i=g+P|0,m[i+3|0]=255,a=K(a,19077)>>>8|0,l=(K(ne,3)+me|0)+131074|0,g=l>>>18&255,b=a+(K(g,26149)>>>8|0)|0,x=b+-14234|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,l=l>>>2&255,b=a+(K(l,33050)>>>8|0)|0,x=b+-17685|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(K(l,6419)>>>8|0)-(K(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Ji(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;me=K(T[i|0],19077)>>>8|0,Ie=T[b|0]|T[x|0]<<16,j=T[l|0]|T[g|0]<<16,ne=(Ie+K(j,3)|0)+131074|0,At=ne>>>2&255,ne=ne>>>18|0,st=me-(K(At,6419)>>>8|0)-(K(ne,13320)>>>8)|0,X=st+8708|0,st=X>>>0<16384?X>>6:(st|0)<-8708?0:255,ne=me+(K(ne,26149)>>>8|0)|0,X=ne+-14234|0,m[A|0]=st>>>5|(X>>>0<16384?X>>>6|0:ne>>>0<14234?0:248)&248,me=me+(K(At,33050)>>>8|0)|0,ne=me+-17685|0,m[A+1|0]=st<<3&224|(ne>>>0<16384?ne>>>9|0:me>>>0<17685?0:31),a&&(me=K(T[a|0],19077)>>>8|0,ne=(K(Ie,3)+j|0)+131074|0,At=ne>>>2&255,ne=ne>>>18|0,st=me-(K(At,6419)>>>8|0)-(K(ne,13320)>>>8)|0,X=st+8708|0,st=X>>>0<16384?X>>6:(st|0)<-8708?0:255,ne=me+(K(ne,26149)>>>8|0)|0,X=ne+-14234|0,m[P|0]=st>>>5|(X>>>0<16384?X>>>6|0:ne>>>0<14234?0:248)&248,me=me+(K(At,33050)>>>8|0)|0,ne=me+-17685|0,m[P+1|0]=st<<3&224|(ne>>>0<16384?ne>>>9|0:me>>>0<17685?0:31)),st=U+-1|0;e:{if((U|0)<3){me=Ie,ne=j;break e}for(me=st>>1,Ni=(me|0)>1?me:1,At=1;me=T[b+At|0]|T[x+At|0]<<16,ne=T[l+At|0]|T[g+At|0]<<16,Sn=ne+Ie|0,X=(me+(Sn+j|0)|0)+524296|0,hn=At<<1,Lt=hn+-1|0,Sr=Lt<<1,Jr=Sr+A|0,je=K(T[i+Lt|0],19077)>>>8|0,Sn=X+(Sn<<1)>>>3|0,lr=Sn+j|0,di=lr>>>1&255,lr=lr>>>17|0,Nr=je-(K(di,6419)>>>8|0)-(K(lr,13320)>>>8)|0,Qt=Nr+8708|0,Nr=Qt>>>0<16384?Qt>>6:(Nr|0)<-8708?0:255,lr=je+(K(lr,26149)>>>8|0)|0,Qt=lr+-14234|0,m[Jr|0]=Nr>>>5|(Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:248)&248,Qt=Jr,je=je+(K(di,33050)>>>8|0)|0,Jr=je+-17685|0,m[Qt+1|0]=Nr<<3&224|(Jr>>>0<16384?Jr>>>9|0:je>>>0<17685?0:31),Jr=At<<2,lr=Jr+A|0,je=K(T[i+hn|0],19077)>>>8|0,X=X+(j+me<<1)>>>3|0,j=X+ne|0,di=j>>>1&255,j=j>>>17|0,Nr=je-(K(di,6419)>>>8|0)-(K(j,13320)>>>8)|0,Qt=Nr+8708|0,Nr=Qt>>>0<16384?Qt>>6:(Nr|0)<-8708?0:255,j=je+(K(j,26149)>>>8|0)|0,Qt=j+-14234|0,m[lr|0]=Nr>>>5|(Qt>>>0<16384?Qt>>>6|0:j>>>0<14234?0:248)&248,j=je+(K(di,33050)>>>8|0)|0,je=j+-17685|0,m[lr+1|0]=Nr<<3&224|(je>>>0<16384?je>>>9|0:j>>>0<17685?0:31),a&&(je=P+Sr|0,j=K(T[a+Lt|0],19077)>>>8|0,Ie=X+Ie|0,X=Ie>>>1&255,Ie=Ie>>>17|0,Lt=j-(K(X,6419)>>>8|0)-(K(Ie,13320)>>>8)|0,Sr=Lt+8708|0,Lt=Sr>>>0<16384?Sr>>6:(Lt|0)<-8708?0:255,Ie=j+(K(Ie,26149)>>>8|0)|0,Sr=Ie+-14234|0,m[je|0]=Lt>>>5|(Sr>>>0<16384?Sr>>>6|0:Ie>>>0<14234?0:248)&248,j=j+(K(X,33050)>>>8|0)|0,Ie=j+-17685|0,m[je+1|0]=Lt<<3&224|(Ie>>>0<16384?Ie>>>9|0:j>>>0<17685?0:31),Ie=P+Jr|0,j=K(T[a+hn|0],19077)>>>8|0,X=me+Sn|0,hn=X>>>1&255,X=X>>>17|0,Lt=j-(K(hn,6419)>>>8|0)-(K(X,13320)>>>8)|0,je=Lt+8708|0,Lt=je>>>0<16384?je>>6:(Lt|0)<-8708?0:255,X=j+(K(X,26149)>>>8|0)|0,je=X+-14234|0,m[Ie|0]=Lt>>>5|(je>>>0<16384?je>>>6|0:X>>>0<14234?0:248)&248,Qt=Ie,j=j+(K(hn,33050)>>>8|0)|0,Ie=j+-17685|0,m[Qt+1|0]=Lt<<3&224|(Ie>>>0<16384?Ie>>>9|0:j>>>0<17685?0:31)),X=(At|0)!=(Ni|0),At=At+1|0,j=ne,Ie=me,!!X;);}e:{if(U&1||(l=st<<1,g=l+A|0,i=K(T[i+st|0],19077)>>>8|0,b=(K(ne,3)+me|0)+131074|0,x=b>>>2&255,b=b>>>18|0,A=i-(K(x,6419)>>>8|0)-(K(b,13320)>>>8)|0,U=A+8708|0,A=U>>>0<16384?U>>6:(A|0)<-8708?0:255,b=i+(K(b,26149)>>>8|0)|0,U=b+-14234|0,m[g|0]=A>>>5|(U>>>0<16384?U>>>6|0:b>>>0<14234?0:248)&248,b=g,i=i+(K(x,33050)>>>8|0)|0,g=i+-17685|0,m[b+1|0]=A<<3&224|(g>>>0<16384?g>>>9|0:i>>>0<17685?0:31),!a))break e;l=l+P|0,i=K(T[a+st|0],19077)>>>8|0,a=(K(me,3)+ne|0)+131074|0,g=a>>>2&255,a=a>>>18|0,b=i-(K(g,6419)>>>8|0)-(K(a,13320)>>>8)|0,x=b+8708|0,b=x>>>0<16384?x>>6:(b|0)<-8708?0:255,a=i+(K(a,26149)>>>8|0)|0,x=a+-14234|0,m[l|0]=b>>>5|(x>>>0<16384?x>>>6|0:a>>>0<14234?0:248)&248,i=i+(K(g,33050)>>>8|0)|0,a=i+-17685|0,m[l+1|0]=b<<3&224|(a>>>0<16384?a>>>9|0:i>>>0<17685?0:31)}}function fo(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=K(T[i|0],19077)>>>8|0,me=T[b|0]|T[x|0]<<16,j=T[l|0]|T[g|0]<<16,Ie=(me+K(j,3)|0)+131074|0,st=Ie>>>2&255,At=ne+(K(st,33050)>>>8|0)|0,X=At+-17685|0,m[A+1|0]=(X>>>0<16384?X>>>6|0:At>>>0<17685?0:240)|15,Ie=Ie>>>18|0,st=ne-(K(st,6419)>>>8|0)-(K(Ie,13320)>>>8)|0,At=st+8708|0,ne=ne+(K(Ie,26149)>>>8|0)|0,Ie=ne+-14234|0,m[A|0]=(At>>>0<16384?At>>>10|0:(st|0)<-8708?0:15)|(Ie>>>0<16384?Ie>>>6|0:ne>>>0<14234?0:240)&240,a&&(ne=K(T[a|0],19077)>>>8|0,Ie=(K(me,3)+j|0)+131074|0,st=Ie>>>2&255,At=ne+(K(st,33050)>>>8|0)|0,X=At+-17685|0,m[P+1|0]=(X>>>0<16384?X>>>6|0:At>>>0<17685?0:240)|15,Ie=Ie>>>18|0,At=ne+(K(Ie,26149)>>>8|0)|0,X=At+-14234|0,ne=ne-(K(st,6419)>>>8|0)-(K(Ie,13320)>>>8)|0,Ie=ne+8708|0,m[P|0]=(X>>>0<16384?X>>>6|0:At>>>0<14234?0:240)&240|(Ie>>>0<16384?Ie>>>10|0:(ne|0)<-8708?0:15)),At=U+-1|0;e:{if((U|0)<3){ne=me,Ie=j;break e}for(ne=At>>1,Ni=(ne|0)>1?ne:1,st=1;ne=T[b+st|0]|T[x+st|0]<<16,Ie=T[l+st|0]|T[g+st|0]<<16,Lt=Ie+me|0,X=(ne+(Lt+j|0)|0)+524296|0,Sr=st<<1,Qt=Sr+-1|0,hn=Qt<<1,je=hn+A|0,di=X+(Lt<<1)>>>3|0,lr=di+j|0,Nr=lr>>>1&255,Lt=K(T[i+Qt|0],19077)>>>8|0,Sn=(K(Nr,33050)>>>8|0)+Lt|0,Jr=Sn+-17685|0,m[je+1|0]=(Jr>>>0<16384?Jr>>>6|0:Sn>>>0<17685?0:240)|15,Jr=je,je=lr>>>17|0,lr=Lt-(K(Nr,6419)>>>8|0)-(K(je,13320)>>>8)|0,Nr=lr+8708|0,Lt=Lt+(K(je,26149)>>>8|0)|0,je=Lt+-14234|0,m[Jr|0]=(Nr>>>0<16384?Nr>>>10|0:(lr|0)<-8708?0:15)|(je>>>0<16384?je>>>6|0:Lt>>>0<14234?0:240)&240,Lt=st<<2,je=Lt+A|0,X=X+(j+ne<<1)>>>3|0,lr=X+Ie|0,Nr=lr>>>1&255,j=K(T[i+Sr|0],19077)>>>8|0,Sn=(K(Nr,33050)>>>8|0)+j|0,Jr=Sn+-17685|0,m[je+1|0]=(Jr>>>0<16384?Jr>>>6|0:Sn>>>0<17685?0:240)|15,Jr=je,je=lr>>>17|0,lr=j-(K(Nr,6419)>>>8|0)-(K(je,13320)>>>8)|0,Nr=lr+8708|0,j=j+(K(je,26149)>>>8|0)|0,je=j+-14234|0,m[Jr|0]=(Nr>>>0<16384?Nr>>>10|0:(lr|0)<-8708?0:15)|(je>>>0<16384?je>>>6|0:j>>>0<14234?0:240)&240,a&&(hn=P+hn|0,j=K(T[a+Qt|0],19077)>>>8|0,me=X+me|0,X=me>>>1&255,Qt=j+(K(X,33050)>>>8|0)|0,je=Qt+-17685|0,m[hn+1|0]=(je>>>0<16384?je>>>6|0:Qt>>>0<17685?0:240)|15,je=hn,me=me>>>17|0,Qt=j+(K(me,26149)>>>8|0)|0,hn=Qt+-14234|0,j=j-(K(X,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=j+8708|0,m[je|0]=(hn>>>0<16384?hn>>>6|0:Qt>>>0<14234?0:240)&240|(me>>>0<16384?me>>>10|0:(j|0)<-8708?0:15),me=P+Lt|0,j=K(T[a+Sr|0],19077)>>>8|0,X=ne+di|0,Qt=X>>>1&255,Sr=j+(K(Qt,33050)>>>8|0)|0,Lt=Sr+-17685|0,m[me+1|0]=(Lt>>>0<16384?Lt>>>6|0:Sr>>>0<17685?0:240)|15,je=me,me=X>>>17|0,X=j+(K(me,26149)>>>8|0)|0,Sr=X+-14234|0,j=j-(K(Qt,6419)>>>8|0)-(K(me,13320)>>>8)|0,me=j+8708|0,m[je|0]=(Sr>>>0<16384?Sr>>>6|0:X>>>0<14234?0:240)&240|(me>>>0<16384?me>>>10|0:(j|0)<-8708?0:15)),X=(st|0)!=(Ni|0),st=st+1|0,j=Ie,me=ne,!!X;);}e:{if(U&1||(l=At<<1,g=l+A|0,i=K(T[i+At|0],19077)>>>8|0,b=(K(Ie,3)+ne|0)+131074|0,x=b>>>2&255,A=i+(K(x,33050)>>>8|0)|0,U=A+-17685|0,m[g+1|0]=(U>>>0<16384?U>>>6|0:A>>>0<17685?0:240)|15,U=g,g=b>>>18|0,b=i+(K(g,26149)>>>8|0)|0,A=b+-14234|0,i=i-(K(x,6419)>>>8|0)-(K(g,13320)>>>8)|0,g=i+8708|0,m[U|0]=(A>>>0<16384?A>>>6|0:b>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(i|0)<-8708?0:15),!a))break e;l=l+P|0,i=K(T[a+At|0],19077)>>>8|0,g=(K(ne,3)+Ie|0)+131074|0,b=g>>>2&255,a=i+(K(b,33050)>>>8|0)|0,x=a+-17685|0,m[l+1|0]=(x>>>0<16384?x>>>6|0:a>>>0<17685?0:240)|15,x=l,a=g>>>18|0,l=i+(K(a,26149)>>>8|0)|0,g=l+-14234|0,i=i-(K(b,6419)>>>8|0)-(K(a,13320)>>>8)|0,a=i+8708|0,m[x|0]=(g>>>0<16384?g>>>6|0:l>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(i|0)<-8708?0:15)}}function Vo(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=K(T[i|0],19077)>>>8|0,je=T[b|0]|T[x|0]<<16,X=T[l|0]|T[g|0]<<16,me=(je+K(X,3)|0)+131074|0,Lt=me>>>18|0,At=ne+(K(Lt,26149)>>>8|0)|0,j=At+-14234|0,m[A|0]=j>>>0<16384?j>>>6|0:At>>>0<14234?0:255,me=me>>>2&255,At=ne+(K(me,33050)>>>8|0)|0,j=At+-17685|0,m[A+2|0]=j>>>0<16384?j>>>6|0:At>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(Lt,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=K(T[a|0],19077)>>>8|0,me=(K(je,3)+X|0)+131074|0,Lt=me>>>18|0,At=ne+(K(Lt,26149)>>>8|0)|0,j=At+-14234|0,m[P|0]=j>>>0<16384?j>>>6|0:At>>>0<14234?0:255,me=me>>>2&255,At=ne+(K(me,33050)>>>8|0)|0,j=At+-17685|0,m[P+2|0]=j>>>0<16384?j>>>6|0:At>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(Lt,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),At=U+-1|0;e:{if((U|0)<3){ne=je,me=X;break e}for(ne=At>>1,Ni=(ne|0)>1?ne:1,Lt=1;ne=T[b+Lt|0]|T[x+Lt|0]<<16,me=T[l+Lt|0]|T[g+Lt|0]<<16,Qt=me+je|0,j=(ne+(Qt+X|0)|0)+524296|0,Jr=Lt<<1,lr=Jr+-1|0,hn=K(lr,3),Ie=hn+A|0,di=j+(Qt<<1)>>>3|0,Nr=di+X|0,Sn=Nr>>>17|0,Qt=K(T[i+lr|0],19077)>>>8|0,st=(K(Sn,26149)>>>8|0)+Qt|0,Sr=st+-14234|0,m[Ie|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<14234?0:255,Nr=Nr>>>1&255,st=Qt+(K(Nr,33050)>>>8|0)|0,Sr=st+-17685|0,m[Ie+2|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<17685?0:255,st=Ie,Ie=Qt-(K(Nr,6419)>>>8|0)-(K(Sn,13320)>>>8)|0,Qt=Ie+8708|0,m[st+1|0]=Qt>>>0<16384?Qt>>>6|0:(Ie|0)<-8708?0:255,Qt=K(Lt,6),Ie=Qt+A|0,j=j+(X+ne<<1)>>>3|0,Nr=j+me|0,Sn=Nr>>>1&255,X=K(T[i+Jr|0],19077)>>>8|0,st=(K(Sn,33050)>>>8|0)+X|0,Sr=st+-17685|0,m[Ie+2|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<17685?0:255,Nr=Nr>>>17|0,st=X+(K(Nr,26149)>>>8|0)|0,Sr=st+-14234|0,m[Ie|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<14234?0:255,st=Ie,X=X-(K(Sn,6419)>>>8|0)-(K(Nr,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255,a&&(X=P+hn|0,j=j+je|0,Ie=j>>>17|0,je=K(T[a+lr|0],19077)>>>8|0,lr=(K(Ie,26149)>>>8|0)+je|0,hn=lr+-14234|0,m[X|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<14234?0:255,j=j>>>1&255,lr=je+(K(j,33050)>>>8|0)|0,hn=lr+-17685|0,m[X+2|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<17685?0:255,st=X,X=je-(K(j,6419)>>>8|0)-(K(Ie,13320)>>>8)|0,je=X+8708|0,m[st+1|0]=je>>>0<16384?je>>>6|0:(X|0)<-8708?0:255,X=P+Qt|0,je=K(T[a+Jr|0],19077)>>>8|0,j=ne+di|0,lr=j>>>1&255,Jr=je+(K(lr,33050)>>>8|0)|0,Ie=Jr+-17685|0,m[X+2|0]=Ie>>>0<16384?Ie>>>6|0:Jr>>>0<17685?0:255,j=j>>>17|0,Jr=je+(K(j,26149)>>>8|0)|0,Ie=Jr+-14234|0,m[X|0]=Ie>>>0<16384?Ie>>>6|0:Jr>>>0<14234?0:255,Ie=X,X=je-(K(lr,6419)>>>8|0)-(K(j,13320)>>>8)|0,je=X+8708|0,m[Ie+1|0]=je>>>0<16384?je>>>6|0:(X|0)<-8708?0:255),j=(Lt|0)!=(Ni|0),Lt=Lt+1|0,X=me,je=ne,!!j;);}e:{if(U&1||(g=K(At,3),l=g+A|0,i=K(T[i+At|0],19077)>>>8|0,b=(K(me,3)+ne|0)+131074|0,x=b>>>18|0,A=i+(K(x,26149)>>>8|0)|0,U=A+-14234|0,m[l|0]=U>>>0<16384?U>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=i+(K(b,33050)>>>8|0)|0,U=A+-17685|0,m[l+2|0]=U>>>0<16384?U>>>6|0:A>>>0<17685?0:255,A=l,i=i-(K(b,6419)>>>8|0)-(K(x,13320)>>>8)|0,l=i+8708|0,m[A+1|0]=l>>>0<16384?l>>>6|0:(i|0)<-8708?0:255,!a))break e;i=g+P|0,a=K(T[a+At|0],19077)>>>8|0,l=(K(ne,3)+me|0)+131074|0,g=l>>>18|0,b=a+(K(g,26149)>>>8|0)|0,x=b+-14234|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,l=l>>>2&255,b=a+(K(l,33050)>>>8|0)|0,x=b+-17685|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(K(l,6419)>>>8|0)-(K(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Qo(i,a,l,g,b,x,A,P,U){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0;var j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=K(T[i|0],19077)>>>8|0,je=T[b|0]|T[x|0]<<16,X=T[l|0]|T[g|0]<<16,me=(je+K(X,3)|0)+131074|0,Lt=me>>>18|0,At=ne+(K(Lt,26149)>>>8|0)|0,j=At+-14234|0,m[A+2|0]=j>>>0<16384?j>>>6|0:At>>>0<14234?0:255,me=me>>>2&255,At=ne+(K(me,33050)>>>8|0)|0,j=At+-17685|0,m[A|0]=j>>>0<16384?j>>>6|0:At>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(Lt,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=K(T[a|0],19077)>>>8|0,me=(K(je,3)+X|0)+131074|0,Lt=me>>>18|0,At=ne+(K(Lt,26149)>>>8|0)|0,j=At+-14234|0,m[P+2|0]=j>>>0<16384?j>>>6|0:At>>>0<14234?0:255,me=me>>>2&255,At=ne+(K(me,33050)>>>8|0)|0,j=At+-17685|0,m[P|0]=j>>>0<16384?j>>>6|0:At>>>0<17685?0:255,ne=ne-(K(me,6419)>>>8|0)-(K(Lt,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),At=U+-1|0;e:{if((U|0)<3){ne=je,me=X;break e}for(ne=At>>1,Ni=(ne|0)>1?ne:1,Lt=1;ne=T[b+Lt|0]|T[x+Lt|0]<<16,me=T[l+Lt|0]|T[g+Lt|0]<<16,Qt=me+je|0,j=(ne+(Qt+X|0)|0)+524296|0,Jr=Lt<<1,lr=Jr+-1|0,hn=K(lr,3),Ie=hn+A|0,di=j+(Qt<<1)>>>3|0,Nr=di+X|0,Sn=Nr>>>17|0,Qt=K(T[i+lr|0],19077)>>>8|0,st=(K(Sn,26149)>>>8|0)+Qt|0,Sr=st+-14234|0,m[Ie+2|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<14234?0:255,Nr=Nr>>>1&255,st=Qt+(K(Nr,33050)>>>8|0)|0,Sr=st+-17685|0,m[Ie|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<17685?0:255,st=Ie,Ie=Qt-(K(Nr,6419)>>>8|0)-(K(Sn,13320)>>>8)|0,Qt=Ie+8708|0,m[st+1|0]=Qt>>>0<16384?Qt>>>6|0:(Ie|0)<-8708?0:255,Qt=K(Lt,6),Ie=Qt+A|0,j=j+(X+ne<<1)>>>3|0,Nr=j+me|0,Sn=Nr>>>17|0,X=K(T[i+Jr|0],19077)>>>8|0,st=(K(Sn,26149)>>>8|0)+X|0,Sr=st+-14234|0,m[Ie+2|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<14234?0:255,Nr=Nr>>>1&255,st=X+(K(Nr,33050)>>>8|0)|0,Sr=st+-17685|0,m[Ie|0]=Sr>>>0<16384?Sr>>>6|0:st>>>0<17685?0:255,st=Ie,X=X-(K(Nr,6419)>>>8|0)-(K(Sn,13320)>>>8)|0,Ie=X+8708|0,m[st+1|0]=Ie>>>0<16384?Ie>>>6|0:(X|0)<-8708?0:255,a&&(X=P+hn|0,j=j+je|0,Ie=j>>>17|0,je=K(T[a+lr|0],19077)>>>8|0,lr=(K(Ie,26149)>>>8|0)+je|0,hn=lr+-14234|0,m[X+2|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<14234?0:255,j=j>>>1&255,lr=je+(K(j,33050)>>>8|0)|0,hn=lr+-17685|0,m[X|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<17685?0:255,st=X,X=je-(K(j,6419)>>>8|0)-(K(Ie,13320)>>>8)|0,je=X+8708|0,m[st+1|0]=je>>>0<16384?je>>>6|0:(X|0)<-8708?0:255,X=P+Qt|0,je=K(T[a+Jr|0],19077)>>>8|0,j=ne+di|0,lr=j>>>17|0,Jr=je+(K(lr,26149)>>>8|0)|0,Ie=Jr+-14234|0,m[X+2|0]=Ie>>>0<16384?Ie>>>6|0:Jr>>>0<14234?0:255,j=j>>>1&255,Jr=je+(K(j,33050)>>>8|0)|0,Ie=Jr+-17685|0,m[X|0]=Ie>>>0<16384?Ie>>>6|0:Jr>>>0<17685?0:255,Ie=X,X=je-(K(j,6419)>>>8|0)-(K(lr,13320)>>>8)|0,je=X+8708|0,m[Ie+1|0]=je>>>0<16384?je>>>6|0:(X|0)<-8708?0:255),j=(Lt|0)!=(Ni|0),Lt=Lt+1|0,X=me,je=ne,!!j;);}e:{if(U&1||(g=K(At,3),l=g+A|0,i=K(T[i+At|0],19077)>>>8|0,b=(K(me,3)+ne|0)+131074|0,x=b>>>18|0,A=i+(K(x,26149)>>>8|0)|0,U=A+-14234|0,m[l+2|0]=U>>>0<16384?U>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=i+(K(b,33050)>>>8|0)|0,U=A+-17685|0,m[l|0]=U>>>0<16384?U>>>6|0:A>>>0<17685?0:255,A=l,i=i-(K(b,6419)>>>8|0)-(K(x,13320)>>>8)|0,l=i+8708|0,m[A+1|0]=l>>>0<16384?l>>>6|0:(i|0)<-8708?0:255,!a))break e;i=g+P|0,a=K(T[a+At|0],19077)>>>8|0,l=(K(ne,3)+me|0)+131074|0,g=l>>>18|0,b=a+(K(g,26149)>>>8|0)|0,x=b+-14234|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,l=l>>>2&255,b=a+(K(l,33050)>>>8|0)|0,x=b+-17685|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(K(l,6419)>>>8|0)-(K(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function ea(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0;e:{if(!i)break e;if(h[i>>2]=0,h[i+8>>2]=5010,!a){h[i>>2]=2,h[i+4>>2]=0,h[i+8>>2]=5013;break e}if(P=h[a+60>>2],P>>>0<=3){h[i>>2]=7,h[i+4>>2]=0,h[i+8>>2]=5050;break e}if(l=h[a+64>>2],b=T[l+1|0],x=T[l+2|0],g=T[l|0],A=g>>>4&1,m[i+42|0]=A,U=g>>>1&7,m[i+41|0]=U,j=(g^-1)&1,m[i+40|0]=j,g=(g|b<<8|x<<16)>>>5|0,h[i+44>>2]=g,U>>>0>=4){h[i>>2]=3,h[i+4>>2]=0,h[i+8>>2]=5068;break e}if(!A){h[i>>2]=4,h[i+4>>2]=0,h[i+8>>2]=5099;break e}if(b=P+-3|0,x=l+3|0,j){if(b>>>0<=6){h[i>>2]=7,h[i+4>>2]=0,h[i+8>>2]=5122;break e}if(!(T[l+5|0]==42&&!(T[x|0]!=157|T[l+4|0]!=1))){h[i>>2]=3,h[i+4>>2]=0,h[i+8>>2]=5150;break e}g=T[l+6|0]|T[l+7|0]<<8&16128,Pr[i+48>>1]=g,m[i+52|0]=T[l+7|0]>>>6,b=T[l+8|0]|T[l+9|0]<<8&16128,Pr[i+50>>1]=b,x=T[l+9|0],h[i+292>>2]=b+15>>>4,h[i+288>>2]=g+15>>>4,m[i+53|0]=x>>>6,h[a+84>>2]=0,h[a+4>>2]=b,h[a>>2]=g,h[a+100>>2]=b,h[a+96>>2]=g,h[a+92>>2]=0,h[a+88>>2]=b,h[a+80>>2]=g,h[a+72>>2]=0,h[a+76>>2]=0,h[a+16>>2]=b,h[a+12>>2]=g,a=i+904|0,Pr[a>>1]=-1,m[a+2|0]=-1,h[i+120>>2]=0,h[i+112>>2]=1,h[i+116>>2]=0,h[i+104>>2]=0,h[i+108>>2]=0,b=P+-10|0,x=l+10|0,g=h[i+44>>2]}t:{if(g>>>0>b>>>0){if(a=0,h[i>>2])break t;h[i>>2]=7,h[i+4>>2]=0,h[i+8>>2]=5164;break e}l=i+12|0,Ti(l,x,g),A=h[i+44>>2],T[i+40|0]&&(ne=i,me=Mi(l,1),m[ne+54|0]=me,ne=i,me=Mi(l,1),m[ne+55|0]=me),a=Mi(l,1),h[i+104>>2]=a;r:{if(a){if(ne=i,me=Mi(l,1),h[ne+108>>2]=me,Mi(l,1)&&(ne=i,me=Mi(l,1),h[ne+112>>2]=me,a=i,Mi(l,1)?g=ls(l,7):g=0,m[a+116|0]=g,a=i,Mi(l,1)?g=ls(l,7):g=0,m[a+117|0]=g,a=i,Mi(l,1)?g=ls(l,7):g=0,m[a+118|0]=g,a=i,Mi(l,1)?g=ls(l,7):g=0,m[a+119|0]=g,a=i,Mi(l,1)?g=ls(l,6):g=0,m[a+120|0]=g,a=i,Mi(l,1)?g=ls(l,6):g=0,m[a+121|0]=g,a=i,Mi(l,1)?g=ls(l,6):g=0,m[a+122|0]=g,a=i,Mi(l,1)?g=ls(l,6):g=0,m[a+123|0]=g),!h[i+108>>2])break r;a=i,Mi(l,1)?g=Mi(l,8):g=255,m[a+904|0]=g,a=i,Mi(l,1)?g=Mi(l,8):g=255,m[a+905|0]=g,a=i,g=255;n:{if(!Mi(l,1))break n;g=Mi(l,8)}m[a+906|0]=g;break r}h[i+108>>2]=0}if(h[i+36>>2]){if(a=0,h[i>>2])break t;h[i>>2]=3,h[i+4>>2]=0,h[i+8>>2]=5185;break e}ne=i,me=Mi(l,1),h[ne+56>>2]=me,ne=i,me=Mi(l,6),h[ne+60>>2]=me,ne=i- -64|0,me=Mi(l,3),h[ne>>2]=me,a=Mi(l,1),h[i+68>>2]=a;r:{if(!a||!Mi(l,1)||(Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+72>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+76>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+80>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+84>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+88>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+92>>2]=me),Mi(l,1)&&(ne=i,me=ls(l,6),h[ne+96>>2]=me),!Mi(l,1)))break r;ne=i,me=ls(l,6),h[ne+100>>2]=me}if(a=i,h[i+60>>2]?g=h[i+56>>2]?1:2:g=0,h[a+2308>>2]=g,h[i+36>>2]){if(a=0,h[i>>2])break t;h[i>>2]=3,h[i+4>>2]=0,h[i+8>>2]=5213;break e}j=Mi(l,2),P=-1<<j^-1,h[i+312>>2]=P,g=7;r:{if(a=b-A|0,U=K(P,3),a>>>0>=U>>>0){if(X=b+x|0,g=a-U|0,a=x+A|0,x=U+a|0,j)for(U=P>>>0>1?P:1,b=0;A=T[a|0]|T[a+1|0]<<8|T[a+2|0]<<16,A=A>>>0>g>>>0?g:A,Ti((K(b,28)+i|0)+316|0,x,A),g=g-A|0,x=x+A|0,a=a+3|0,b=b+1|0,(U|0)!=(b|0););if(Ti((K(P,28)+i|0)+316|0,x,g),g=5,x>>>0<X>>>0)break r}if(a=0,h[i>>2])break t;h[i>>2]=g,h[i+4>>2]=0,h[i+8>>2]=5240;break e}if(Eu(i),!T[i+40|0]){if(a=0,h[i>>2])break t;h[i>>2]=4,h[i+4>>2]=0,h[i+8>>2]=5264;break e}Mi(l,1),is(l,i),h[i+4>>2]=1,a=1}return a}return 0}function Da(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0;if(b=h[i+20>>2],h[b+108>>2]<(a|0)){e:{if(!h[i+132>>2]&&(fa(),!h[i+132>>2]))break e;me=h[b+100>>2],lr=K(me,h[b+104>>2]),U=h[b+112>>2],i=(U|0)/(me|0)|0,Qt=K(a,me);t:{r:{if((U|0)>=(Qt|0)){je=b+48|0;break r}j=U-K(i,me)|0,A=h[b+152>>2],x=0;n:{if(!A)break n;x=h[h[b+160>>2]+(K(h[b+156>>2],i>>A)+(j>>A)<<2)>>2]}if(je=b+48|0,h[je>>2])break r;for(Nr=h[b+148>>2],Sr=h[b+16>>2],st=b+24|0,Lt=h[b+168>>2]+K(x,548)|0;;){if(!(j&Nr)){l=h[b+168>>2],A=h[b+152>>2],x=0;n:{if(!A)break n;x=h[h[b+160>>2]+(K(h[b+156>>2],i>>A)+(j>>A)<<2)>>2]}Lt=l+K(x,548)|0}g=h[b+44>>2],(g|0)>=32&&(ge(st),g=h[b+44>>2]),X=b,x=h[st+4>>2],l=x,P=g&63,A=P&31,At=h[st>>2],l=h[Lt>>2]+(((32<=(P&63)>>>0?l>>>A|0:((1<<A)-1&l)<<32-A|At>>>A)&255)<<2)|0,A=T[l|0],A>>>0>=9&&(g=g+8|0,h[b+44>>2]=g,P=(kn[l+2>>1]<<2)+l|0,l=x,Ie=g&63,ne=Ie&31,l=P+(((-1<<A+-8^-1)&(32<=Ie>>>0?l>>>ne|0:((1<<ne)-1&l)<<32-ne|At>>>ne))<<2)|0,A=T[l|0]),P=(A&255)+g|0,h[X+44>>2]=P,l=kn[l+2>>1];n:{if(l>>>0<=255){if(m[U+Sr|0]=l,U=U+1|0,j=j+1|0,(j|0)<(me|0))break n;if(x=i+1|0,j=0,(i|0)>=(a|0)){i=x;break n}if(x&15){i=x;break n}M(b,x),i=x;break n}if(X=1,l>>>0>279)break t;A=l+-256|0,l>>>0>=260&&(x=l+-258>>1,A=ho(st,x)+((A&1|2)<<x)|0,At=h[b+24>>2],P=h[b+44>>2],x=h[b+28>>2]),ne=b,l=x,Ie=P&63,g=Ie&31,g=h[Lt+16>>2]+(((32<=Ie>>>0?l>>>g|0:((1<<g)-1&l)<<32-g|At>>>g)&255)<<2)|0,l=T[g|0],l>>>0>=9&&(P=P+8|0,h[b+44>>2]=P,Jr=(kn[g+2>>1]<<2)+g|0,Ie=P&63,g=Ie&31,g=Jr+(((-1<<l+-8^-1)&(32<=Ie>>>0?x>>>g|0:((1<<g)-1&x)<<32-g|At>>>g))<<2)|0,l=T[g|0]),x=(l&255)+P|0,h[ne+44>>2]=x,g=kn[g+2>>1],(x|0)>=32&&ge(st),x=A+1|0,g>>>0>=4&&(l=g+-2>>1,g=ho(st,l)+((g&1|2)<<l)|0);o:{if((g+1|0)>=121){l=g+-119|0;break o}l=T[g+1264|0],l=(K(l>>>4|0,me)-(l&15)|0)+8|0,l=(l|0)>1?l:1}if((lr-U|0)<(x|0)|(U|0)<(l|0))break t;g=U+Sr|0,P=g-l|0;o:{l:{if((x|0)<8)break l;i:{u:switch(l+-1|0){case 0:l=T[P|0],X=K(l,16843009);break i;case 1:l=T[P|0]|T[P+1|0]<<8,X=K(l,65537);break i;case 3:break u;default:break l}l=T[P|0]|T[P+1|0]<<8|(T[P+2|0]<<16|T[P+3|0]<<24),X=l}i:{u:{a:{if(g&3){if(m[g|0]=l,X=ta(X,24),P=P+1|0,g=g+1|0,g&3)break a;l=A>>>2|0;break u}A=x,l=A>>>2|0;break u}for(;m[g|0]=T[P|0],ne=A,A=A+-1|0,X=ta(X,24),P=P+1|0,g=g+1|0,!!(g&3););if(l=0,(ne|0)<5)break i;l=A>>2}for(ne=(l|0)>1?l:1,l=0;h[(l<<2)+g>>2]=X,l=l+1|0,(ne|0)!=(l|0););l=ne<<2}if((l|0)>=(A|0))break o;for(;m[l+g|0]=T[l+P|0],l=l+1|0,(A|0)!=(l|0););break o}if((l|0)<(x|0)){if(l=0,(x|0)<=0)break o;for(;m[l+g|0]=T[l+P|0],X=(l|0)!=(A|0),l=l+1|0,!!X;);break o}oo(g,P,x)}if(U=x+U|0,j=x+j|0,(j|0)>=(me|0))for(;j=j-me|0,x=i,i=x+1|0,i&15|(x|0)>=(a|0)||M(b,i),(j|0)>=(me|0););if(!(j&Nr)|(U|0)>=(Qt|0))break n;l=h[b+168>>2],A=h[b+152>>2],x=0;o:{if(!A)break o;x=h[h[b+160>>2]+(K(h[b+156>>2],i>>A)+(j>>A)<<2)>>2]}Lt=l+K(x,548)|0}if(h[je>>2]){h[je>>2]=1;break r}if(g=0,g=h[b+40>>2]==h[b+36>>2]?h[b+44>>2]>64:g,h[je>>2]=g,(U|0)>=(Qt|0))break r;if(g)break}}M(b,(i|0)>(a|0)?a:i),X=0}a=je,x=a,i=1;t:{if(h[a>>2]||(i=0,h[b+40>>2]!=h[b+36>>2]))break t;i=h[b+44>>2]>64}return h[x>>2]=i,!i|(lr|0)<=(U|0)&&!X?(h[b+112>>2]=U,1):(h[b>>2]=i?5:3,0)}i=Xl(b,h[b+16>>2],h[b+100>>2],h[b+104>>2],a,1)}else i=1;return i}function aa(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;lr=qn+-64|0,qn=lr,b=h[i+2280>>2],Sn=h[i+160>>2],At=h[i+2268>>2],x=h[i+2284>>2],Jr=T[h[i+2308>>2]+4863|0],l=Jr>>>1|0,Ie=h[i+2276>>2],Nr=h[i+2272>>2],Ni=h[i+308>>2],hn=h[i+164>>2],h[i+148>>2]==2&&Wu(i,i+160|0),A=K(b,Sn),di=K(b,Jr),g=K(x,Sn),Sr=K(l,x);e:{if(!h[i+168>>2]||(l=h[i+296>>2],(l|0)>=h[i+304>>2]))break e;for(je=h[i+164>>2];;){ne=h[i+172>>2]+(l<<2)|0,P=T[ne|0];t:{if(!P)break t;if(x=h[i+160>>2],j=h[i+2280>>2],U=(h[i+2268>>2]+(K(x,j)<<4)|0)+(l<<4)|0,h[i+2308>>2]==1){if((l|0)>=1&&tt[h[2717]](U,j,P+4|0),T[ne+2|0]&&tt[h[2719]](U,j,P),x=ne+2|0,(je|0)>=1&&tt[h[2716]](U,j,P+4|0),!T[x|0])break t;tt[h[2718]](U,j,P);break t}if(X=T[ne+1|0],Lt=h[i+2284>>2],b=K(Lt,x)<<3,x=l<<3,Qt=(b+h[i+2276>>2]|0)+x|0,st=x+(b+h[i+2272>>2]|0)|0,me=T[ne+3|0],(l|0)>=1&&(x=P+4|0,tt[h[2709]](U,j,x,X,me),tt[h[2711]](st,Qt,Lt,x,X,me)),T[ne+2|0]&&(tt[h[2713]](U,j,P,X,me),tt[h[2715]](st,Qt,Lt,P,X,me)),b=ne+2|0,(je|0)>=1&&(x=P+4|0,tt[h[2708]](U,j,x,X,me),tt[h[2710]](st,Qt,Lt,x,X,me)),!T[b|0])break t;tt[h[2712]](U,j,P,X,me),tt[h[2714]](st,Qt,Lt,P,X,me)}if(l=l+1|0,!((l|0)<h[i+304>>2]))break}}me=A<<4,st=At-di|0,j=g<<3,je=Ie-Sr|0,At=Nr-Sr|0;e:{if(!h[i+540>>2]||(U=h[i+296>>2],g=h[i+304>>2],(U|0)>=(g|0)))break e;for(X=i+552|0;;){if(l=h[i+176>>2]+K(U,800)|0,b=T[l+796|0],b>>>0>=4){for(Ie=l+796|0,ne=h[i+2284>>2],Lt=K(ne,h[i+160>>2])<<3,Nr=h[i+2276>>2],x=h[i+2272>>2],P=h[i+548>>2],A=h[i+544>>2],g=0;l=X+(A<<2)|0,Qt=h[l>>2]-h[X+(P<<2)>>2]|0,h[l>>2]=Qt&2147483647,l=h[i+544>>2]+1|0,A=(l|0)==55?0:l,h[i+544>>2]=A,l=h[i+548>>2]+1|0,P=(l|0)==55?0:l,h[i+548>>2]=P,m[g+lr|0]=K(b,Qt<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(b=U<<3,tt[h[2720]](lr,b+(x+Lt|0)|0,ne),x=T[Ie|0],P=h[i+548>>2],A=h[i+544>>2],g=0;l=X+(A<<2)|0,Ie=h[l>>2]-h[X+(P<<2)>>2]|0,h[l>>2]=Ie&2147483647,l=h[i+544>>2]+1|0,A=(l|0)==55?0:l,h[i+544>>2]=A,l=h[i+548>>2]+1|0,P=(l|0)==55?0:l,h[i+548>>2]=P,m[g+lr|0]=K(x,Ie<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);tt[h[2720]](lr,b+(Lt+Nr|0)|0,ne),g=h[i+304>>2]}if(U=U+1|0,!((U|0)<(g|0)))break}}st=me+st|0,x=j+je|0,Ie=j+At|0,Nr=Ni+-1|0;e:{t:{g=1;r:{if(!h[a+44>>2])break r;l=hn<<4,b=l+16|0;n:{if(hn){h[a+24>>2]=Ie,h[a+20>>2]=st,A=x,l=l-Jr|0;break n}h[a+20>>2]=me+h[i+2268>>2],h[a+24>>2]=j+h[i+2272>>2],A=j+h[i+2276>>2]|0,l=0}if(h[a+28>>2]=A,A=0,h[a+104>>2]=0,g=h[a+88>>2],b=b-((hn|0)>=(Nr|0)?0:Jr)|0,je=(b|0)>(g|0)?g:b,!(!h[i+2348>>2]|(je|0)<=(l|0))&&(A=Na(i,a,l,je-l|0),h[a+104>>2]=A,!A))break t;if(b=h[a+84>>2],(b|0)>(l|0)){g=b-l|0,h[a+20>>2]=h[a+20>>2]+K(g,h[i+2280>>2]),l=K(h[i+2284>>2],g>>1),h[a+24>>2]=l+h[a+24>>2],h[a+28>>2]=l+h[a+28>>2];n:{if(!A){A=0;break n}A=K(g,h[a>>2])+A|0,h[a+104>>2]=A}l=b}if(g=1,(je|0)<=(l|0))break r;At=h[a+76>>2],h[a+20>>2]=At+h[a+20>>2],g=At>>1,h[a+24>>2]=g+h[a+24>>2],h[a+28>>2]=g+h[a+28>>2],A&&(h[a+104>>2]=A+At),h[a+8>>2]=l-b,h[a+16>>2]=je-l,h[a+12>>2]=h[a+80>>2]-At,g=tt[h[a+44>>2]](a)|0}if(h[i+156>>2]!=(Sn+1|0)|(hn|0)>=(Nr|0))break e;oo(h[i+2268>>2]-di|0,st+(h[i+2280>>2]<<4)|0,di),a=0-Sr|0,oo(a+h[i+2272>>2]|0,Ie+(h[i+2284>>2]<<3)|0,Sr),oo(a+h[i+2276>>2]|0,x+(h[i+2284>>2]<<3)|0,Sr);break e}g=Pi(i,3,4912)}return qn=lr- -64|0,g|0}function $i(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0;e:{if(!i)break e;g=i+-8|0,l=h[i+-4>>2],i=l&-8,x=g+i|0;t:{if(l&1)break t;if(!(l&3)||(l=h[g>>2],g=g-l|0,g>>>0<ii[2888]))break e;if(i=i+l|0,h[2889]!=(g|0)){if(l>>>0<=255){if(b=h[g+8>>2],l=l>>>3|0,a=h[g+12>>2],(a|0)==(b|0)){U=11536,j=h[2884]&ta(-2,l),h[U>>2]=j;break t}h[b+12>>2]=a,h[a+8>>2]=b;break t}P=h[g+24>>2],l=h[g+12>>2];r:{if((l|0)!=(g|0)){a=h[g+8>>2],h[a+12>>2]=l,h[l+8>>2]=a;break r}n:{if(b=g+20|0,a=h[b>>2],a||(b=g+16|0,a=h[b>>2],a))break n;l=0;break r}for(;A=b,l=a,b=l+20|0,a=h[b>>2],!(!a&&(b=l+16|0,a=h[l+16>>2],!a)););h[A>>2]=0}if(!P)break t;b=h[g+28>>2],a=(b<<2)+11840|0;r:{if(h[a>>2]==(g|0)){if(h[a>>2]=l,l)break r;U=11540,j=h[2885]&ta(-2,b),h[U>>2]=j;break t}if(h[P+(h[P+16>>2]==(g|0)?16:20)>>2]=l,!l)break t}if(h[l+24>>2]=P,a=h[g+16>>2],a&&(h[l+16>>2]=a,h[a+24>>2]=l),a=h[g+20>>2],!a)break t;h[l+20>>2]=a,h[a+24>>2]=l;break t}if(l=h[x+4>>2],(l&3)!=3)break t;h[2886]=i,h[x+4>>2]=l&-2,h[g+4>>2]=i|1,h[i+g>>2]=i;return}if(x>>>0<=g>>>0||(l=h[x+4>>2],!(l&1)))break e;t:{if(!(l&2)){if((x|0)==h[2890]){if(h[2890]=g,i=h[2887]+i|0,h[2887]=i,h[g+4>>2]=i|1,h[2889]!=(g|0))break e;h[2886]=0,h[2889]=0;return}if((x|0)==h[2889]){h[2889]=g,i=h[2886]+i|0,h[2886]=i,h[g+4>>2]=i|1,h[i+g>>2]=i;return}i=(l&-8)+i|0;r:{if(l>>>0<=255){if(a=h[x+8>>2],l=l>>>3|0,b=h[x+12>>2],(a|0)==(b|0)){U=11536,j=h[2884]&ta(-2,l),h[U>>2]=j;break r}h[a+12>>2]=b,h[b+8>>2]=a;break r}P=h[x+24>>2],l=h[x+12>>2];n:{if((x|0)!=(l|0)){a=h[x+8>>2],h[a+12>>2]=l,h[l+8>>2]=a;break n}o:{if(b=x+20|0,a=h[b>>2],a||(b=x+16|0,a=h[b>>2],a))break o;l=0;break n}for(;A=b,l=a,b=l+20|0,a=h[b>>2],!(!a&&(b=l+16|0,a=h[l+16>>2],!a)););h[A>>2]=0}if(!P)break r;b=h[x+28>>2],a=(b<<2)+11840|0;n:{if((x|0)==h[a>>2]){if(h[a>>2]=l,l)break n;U=11540,j=h[2885]&ta(-2,b),h[U>>2]=j;break r}if(h[P+((x|0)==h[P+16>>2]?16:20)>>2]=l,!l)break r}if(h[l+24>>2]=P,a=h[x+16>>2],a&&(h[l+16>>2]=a,h[a+24>>2]=l),a=h[x+20>>2],!a)break r;h[l+20>>2]=a,h[a+24>>2]=l}if(h[g+4>>2]=i|1,h[i+g>>2]=i,h[2889]!=(g|0))break t;h[2886]=i;return}h[x+4>>2]=l&-2,h[g+4>>2]=i|1,h[i+g>>2]=i}if(i>>>0<=255){i=i>>>3|0,l=(i<<3)+11576|0,a=h[2884],i=1<<i;t:{if(!(a&i)){h[2884]=i|a,i=l;break t}i=h[l+8>>2]}h[l+8>>2]=g,h[i+12>>2]=g,h[g+12>>2]=l,h[g+8>>2]=i;return}h[g+16>>2]=0,h[g+20>>2]=0,x=g,b=i>>>8|0,a=0;t:{if(!b||(a=31,i>>>0>16777215))break t;l=b,b=b+1048320>>>16&8,a=l<<b,P=a+520192>>>16&4,a=a<<P,A=a+245760>>>16&2,a=(a<<A>>>15|0)-(A|(b|P))|0,a=(a<<1|i>>>a+21&1)+28|0}h[x+28>>2]=a,A=(a<<2)+11840|0;t:{r:{b=h[2885],l=1<<a;n:{if(!(b&l)){h[2885]=l|b,h[A>>2]=g,h[g+24>>2]=A;break n}for(b=i<<((a|0)==31?0:25-(a>>>1|0)|0),l=h[A>>2];;){if(a=l,(h[l+4>>2]&-8)==(i|0))break r;if(l=b>>>29|0,b=b<<1,A=(a+(l&4)|0)+16|0,l=h[A>>2],!l)break}h[A>>2]=g,h[g+24>>2]=a}h[g+12>>2]=g,h[g+8>>2]=g;break t}i=h[a+8>>2],h[i+12>>2]=g,h[a+8>>2]=g,h[g+24>>2]=0,h[g+12>>2]=a,h[g+8>>2]=i}if(i=h[2892]+-1|0,h[2892]=i,i)break e;for(g=11992;i=h[g>>2],g=i+8|0,!!i;);h[2892]=-1}}function za(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;P=qn-128|0,h[P+120>>2]=0,h[P+124>>2]=0,h[P+112>>2]=0,h[P+116>>2]=0,h[P+104>>2]=0,h[P+108>>2]=0,h[P+96>>2]=0,h[P+100>>2]=0,h[P+88>>2]=0,h[P+92>>2]=0,h[P+80>>2]=0,h[P+84>>2]=0,h[P+72>>2]=0,h[P+76>>2]=0,h[P+64>>2]=0,h[P+68>>2]=0;e:{if((g|0)>=1){for(;;){if(A=h[(x<<2)+l>>2],(A|0)>15)break e;if(A=(P- -64|0)+(A<<2)|0,h[A>>2]=h[A>>2]+1,x=x+1|0,(x|0)==(g|0))break}x=h[P+64>>2]}else x=0;if((x|0)==(g|0)||(h[P+4>>2]=0,x=h[P+68>>2],(x|0)>2)||(h[P+8>>2]=x,A=h[P+72>>2],(A|0)>4)||(x=x+A|0,h[P+12>>2]=x,A=h[P+76>>2],(A|0)>8)||(x=x+A|0,h[P+16>>2]=x,A=h[P+80>>2],(A|0)>16)||(x=x+A|0,h[P+20>>2]=x,A=h[P+84>>2],(A|0)>32)||(x=x+A|0,h[P+24>>2]=x,A=h[P+88>>2],(A|0)>64)||(x=x+A|0,h[P+28>>2]=x,A=h[P+92>>2],(A|0)>128)||(x=x+A|0,h[P+32>>2]=x,A=h[P+96>>2],(A|0)>256)||(x=x+A|0,h[P+36>>2]=x,A=h[P+100>>2],(A|0)>512)||(x=x+A|0,h[P+40>>2]=x,A=h[P+104>>2],(A|0)>1024)||(x=x+A|0,h[P+44>>2]=x,A=h[P+108>>2],(A|0)>2048)||(x=x+A|0,h[P+48>>2]=x,A=h[P+112>>2],(A|0)>4096)||(x=x+A|0,h[P+52>>2]=x,A=h[P+116>>2],(A|0)>8192)||(x=x+A|0,h[P+56>>2]=x,A=h[P+120>>2],(A|0)>16384))break e;if(h[P+60>>2]=x+A,x=0,(g|0)>0)for(;;){A=h[(x<<2)+l>>2];t:{if((A|0)<1)break t;if(b){U=P+(A<<2)|0,A=h[U>>2],h[U>>2]=A+1,Pr[(A<<1)+b>>1]=x;break t}A=P+(A<<2)|0,h[A>>2]=h[A>>2]+1}if(x=x+1|0,(x|0)==(g|0))break}if(A=1<<a,st=1,ne=h[P+60>>2],(ne|0)==1){if(!b)return A;for(l=kn[b>>1]<<16,x=A;a=x+-1|0,g=(a<<2)+i|0,Pr[g>>1]=l,Pr[g+2>>1]=l>>>16,g=(x|0)>1,x=a,!!g;);return A}Qt=1;t:{r:{if((a|0)<1)break r;for(Ie=2,x=1;;){if(je=st<<1,lr=(P- -64|0)+(x<<2)|0,g=h[lr>>2],st=je-g|0,(st|0)<0)break e;if(l=x,!(!i|(g|0)<1)){for(U=g+me|0,Nr=l&255,X=1<<l+-1;;){for(Sr=(j<<2)+i|0,g=Nr|kn[(me<<1)+b>>1]<<16,x=A;x=x-Ie|0,At=Sr+(x<<2)|0,Pr[At>>1]=g,Pr[At+2>>1]=g>>>16,(x|0)>0;);for(g=X;x=g,g=x>>>1|0,!!(x&j););if(j=x?x+(x+-1&j)|0:j,me=me+1|0,(U|0)==(me|0))break}h[lr>>2]=0,me=U}if(Qt=je+Qt|0,Ie=Ie<<1,x=l+1|0,(a|0)==(l|0))break}if((a|0)<=14)break r;je=A;break t}for(Sn=A+-1|0,U=a,X=-1,Ie=2,ne=i,je=A;;){if(Lt=0,lr=U,Jr=st<<1,U=U+1|0,At=(P- -64|0)+(U<<2)|0,l=h[At>>2],st=Jr-l|0,(st|0)<0)break e;if(!(!i|(l|0)<1))for(Sr=1<<lr,Lt=U-a|0,di=Lt&255,Nr=1<<Lt,x=X;;){X=j&Sn;r:{if((X|0)==(x|0)){X=x;break r}if(ne=(A<<2)+ne|0,A=Nr,x=Lt,(lr|0)<=13){x=U,g=x,l=Nr-l|0;n:{if((l|0)<1)break n;for(;;){if(g=15,x=x+1|0,(x|0)==15)break n;if(g=x,l=(l<<1)-h[(P- -64|0)+(x<<2)>>2]|0,!((l|0)>0))break}}x=g-a|0,A=1<<x}l=(X<<2)+i|0,m[l|0]=a+x,Pr[l+2>>1]=(ne-i>>>2|0)-X,je=A+je|0}for(g=(j>>>a<<2)+ne|0,l=di|kn[(me<<1)+b>>1]<<16,x=A;x=x-Ie|0,hn=g+(x<<2)|0,Pr[hn>>1]=l,Pr[hn+2>>1]=l>>>16,(x|0)>0;);for(g=Sr;x=g,g=x>>>1|0,!!(x&j););if(g=h[At>>2],l=g+-1|0,h[At>>2]=l,j=x?x+(x+-1&j)|0:j,me=me+1|0,x=X,!((g|0)>1))break}if(Qt=Qt+Jr|0,Ie=Ie<<1,(U|0)==15)break}ne=h[P+60>>2]}Lt=((ne<<1)+-1|0)==(Qt|0)?je:0}return Lt}function Sa(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;Lt=qn-32|0,qn=Lt,A=h[i+2256>>2],ne=h[i+2296>>2],Qt=A+(ne<<1)|0,st=h[i+2304>>2];e:{t:{if(h[i+2236>>2]&&(l=K(ne,800)+st|0,T[l+797|0]))break t;if(b=K(ne,800)+st|0,lr=T[b+798|0],U=3,g=ua(b,0,768),!T[g+768|0]){l=Lt,h[l+24>>2]=0,h[l+28>>2]=0,h[l+16>>2]=0,h[l+20>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,h[l>>2]=0,h[l+4>>2]=0,x=A+-1|0,U=A+(ne<<1)|0,j=tt[h[2661]](a,i+2032|0,T[x|0]+T[U+1|0]|0,((lr<<5)+i|0)+784|0,0,l)|0,l=(j|0)>0,m[x|0]=l,m[U+1|0]=l;r:{if((j|0)>=2){tt[h[2674]](Lt,g);break r}l=K(ne,800)+st|0,g=Pr[Lt>>1]+3>>>3|0,Pr[l+480>>1]=g,Pr[l+448>>1]=g,Pr[l+416>>1]=g,Pr[l+384>>1]=g,Pr[l+352>>1]=g,Pr[l+320>>1]=g,Pr[l+288>>1]=g,Pr[l+256>>1]=g,Pr[l+224>>1]=g,Pr[l+192>>1]=g,Pr[l+160>>1]=g,Pr[l+128>>1]=g,Pr[l+96>>1]=g,Pr[l+64>>1]=g,Pr[l+32>>1]=g,Pr[l>>1]=g}U=0,x=1}for(l=T[Qt|0]&15,g=((lr<<5)+i|0)+776|0,Sr=A+-2|0,A=T[Sr|0]&15,U=(K(U,68)+i|0)+1964|0;j=tt[h[2661]](a,U,(A&1)+(l&1)|0,g,x,b)|0,me=kn[b>>1],P=(j|0)>(x|0),X=l>>>1|0,l=tt[h[2661]](a,U,P+(X&1)|0,g,x,b+32|0)|0,Ie=kn[b+32>>1],je=(l|0)>(x|0),P=(X&126|P<<7)>>>1|0,X=tt[h[2661]](a,U,je+(P&1)|0,g,x,b- -64|0)|0,Jr=kn[b+64>>1],Nr=(X|0)>(x|0),je=(P|je<<7)>>>1|0,P=tt[h[2661]](a,U,Nr+(je&1)|0,g,x,b+96|0)|0,hn=(((l|0)>3?3:(l|0)<2?(Ie|0)!=0:2)|((j|0)>3?12:(j|0)<2?((me|0)!=0)<<2:8))<<4|hn<<8|((X|0)>3?12:(X|0)<2?((Jr|0)!=0)<<2:8)|((P|0)>3?3:(P|0)<2?kn[b+96>>1]!=0:2),j=(P|0)>(x|0),l=j<<3|(je|Nr<<7)>>>5,A=j<<7|(A&254)>>>1,b=b+128|0,At=At+1|0,(At|0)!=4;);for(U=i+2100|0,At=A>>>4|0,X=l&255,j=((lr<<5)+i|0)+792|0,A=0,l=1,x=0;g=x|4,me=T[Sr|0]>>>g|0,P=T[Qt|0]>>>g|0,g=tt[h[2661]](a,U,(me&1)+(P&1)|0,j,0,b)|0,je=kn[b>>1],Ie=(g|0)>0,P=tt[h[2661]](a,U,Ie+(P>>>1&1)|0,j,0,b+32|0)|0,Jr=kn[b+32>>1],me=tt[h[2661]](a,U,Ie+(me>>>1&1)|0,j,0,b- -64|0)|0,Nr=kn[b+64>>1],Sn=(me|0)>0,di=(P|0)>0,Ie=tt[h[2661]](a,U,Sn+di|0,j,0,b+96|0)|0,A=((((P|0)>3?3:(P|0)<2?(Jr|0)!=0:2)|((g|0)>3?12:(g|0)<2?((je|0)!=0)<<2:8))<<4|((me|0)>3?12:(me|0)<2?((Nr|0)!=0)<<2:8)|((Ie|0)>3?3:(Ie|0)<2?kn[b+96>>1]!=0:2))<<(x<<2)|A,g=(Ie|0)>0,At=(g<<5|di<<4)<<x|At,X=(g<<1|Sn)<<4<<x|X,b=b+128|0,g=l,l=0,x=2,!!g;);m[Qt|0]=X,m[Sr|0]=At,l=K(ne,800)+st|0,h[l+792>>2]=A,h[l+788>>2]=hn,m[l+796|0]=A&43690?0:h[((lr<<5)+i|0)+804>>2],x=(A|hn)!=0;break e}m[Qt|0]=0,m[A+-2|0]=0,T[l+768|0]||(m[(A+(ne<<1)|0)+1|0]=0,m[A+-1|0]=0),l=K(ne,800)+st|0,h[l+788>>2]=0,h[l+792>>2]=0,m[l+796|0]=0}return h[i+2308>>2]>=1&&(l=h[i+2260>>2]+(h[i+2296>>2]<<2)|0,g=i,i=K(ne,800)+st|0,i=h[((g+(T[i+798|0]<<3)|0)+(T[i+768|0]<<2)|0)+2312>>2],m[l|0]=i,m[l+1|0]=i>>>8,m[l+2|0]=i>>>16,m[l+3|0]=i>>>24,m[l+2|0]=T[l+2|0]|x),qn=Lt+32|0,!h[a+24>>2]}function Yl(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0;Ie=qn-16|0,qn=Ie,A=h[i+8>>2];e:{t:switch(h[i>>2]){case 2:tt[h[2733]](g,K(A,l-a|0),b);break e;case 0:r:{if(a){ne=A+-1|0,X=b,x=a;break r}if(x=h[g>>2],x=x+-16777216&-16711936|x&16711935,h[b>>2]=x,ne=A+-1|0,(A|0)>=2)for(X=b+4|0,j=g+4|0;me=U<<2,P=h[me+j>>2],x=(P&-16711936)+(x&-16711936)&-16711936|(P&16711935)+(x&16711935)&16711935,h[X+me>>2]=x,U=U+1|0,(ne|0)!=(U|0););x=A<<2,X=x+b|0,g=g+x|0,x=1}if(j=x,(j|0)<(l|0))for(x=h[i+4>>2],Lt=1<<x,Nr=Lt+-1|0,je=0-Lt|0,st=0-A|0,At=ne+Lt>>>x|0,me=h[i+16>>2]+(K(At,j>>x)<<2)|0;;){if(P=h[g>>2],ne=st<<2,x=h[ne+X>>2],h[X>>2]=(P&-16711936)+(x&-16711936)&-16711936|(P&16711935)+(x&16711935)&16711935,x=1,U=me,(A|0)>=2)for(;P=x<<2,lr=P+X|0,Sr=g+P|0,Qt=Lt+(x&je)|0,P=(Qt|0)>(A|0)?A:Qt,tt[h[(h[U>>2]>>>6&60)+10960>>2]](Sr,ne+lr|0,P-x|0,lr),U=U+4|0,x=P,(A|0)>(Qt|0););if(j=j+1|0,me=Nr&j?me:(At<<2)+me|0,x=A<<2,X=x+X|0,g=g+x|0,(l|0)==(j|0))break}if(h[i+12>>2]==(l|0))break e;i=A<<2,oo(b-i|0,(K(A,(a^-1)+l|0)<<2)+b|0,i);break e;case 1:if((l|0)<=(a|0))break e;for(x=h[i+4>>2],je=1<<x,st=A&0-je,At=A-st|0,ne=je+-1|0,U=ne+A>>>x|0,i=h[i+16>>2]+(K(U,a>>x)<<2)|0,X=(st|0)<1;;){m[Ie+10|0]=0,Pr[Ie+8>>1]=0,j=(A<<2)+g|0;r:{if(X){x=i;break r}for(me=(st<<2)+g|0,x=i;P=h[x>>2],m[Ie+8|0]=P,m[Ie+10|0]=P>>>16,m[Ie+9|0]=P>>>8,tt[h[2804]](Ie+8|0,g,je,b),x=x+4|0,P=je<<2,b=P+b|0,g=g+P|0,g>>>0<me>>>0;);}if(g>>>0<j>>>0&&(x=h[x>>2],m[Ie+8|0]=x,m[Ie+10|0]=x>>>16,m[Ie+9|0]=x>>>8,tt[h[2804]](Ie+8|0,g,At,b),x=At<<2,b=x+b|0,g=g+x|0),a=a+1|0,i=ne&a?i:(U<<2)+i|0,(a|0)==(l|0))break}break e;case 3:break t;default:break e}if(x=h[i+4>>2],!((g|0)!=(b|0)|(x|0)<1)){if(b=l-a|0,x=K(b,(A+(1<<x)|0)+-1>>>x|0)<<2,U=((K(b,A)<<2)+g|0)-x|0,b=Rc(U,g,x),X=h[i+16>>2],ne=h[i+8>>2],i=h[i+4>>2],j=8>>>i|0,(j|0)<=7){if((l|0)<=(a|0))break e;for(me=-1<<j^-1,P=-1<<i^-1,i=(ne|0)<1;;){if(x=0,b=0,!i)for(;x&P||(b=T[U+1|0],U=U+4|0),h[g>>2]=h[X+((b&me)<<2)>>2],b=b>>>j|0,g=g+4|0,x=x+1|0,(ne|0)!=(x|0););if(a=a+1|0,(l|0)==(a|0))break}break e}tt[h[2805]](b,X,g,a,l,ne);break e}if(X=h[i+16>>2],j=8>>>x|0,(j|0)<=7){if((l|0)<=(a|0))break e;for(me=-1<<j^-1,P=-1<<x^-1,i=(A|0)<1;;){if(U=0,x=0,!i)for(;U&P||(x=T[g+1|0],g=g+4|0),h[b>>2]=h[X+((x&me)<<2)>>2],x=x>>>j|0,b=b+4|0,U=U+1|0,(A|0)!=(U|0););if(a=a+1|0,(l|0)==(a|0))break}break e}tt[h[2805]](g,X,b,a,l,A)}qn=Ie+16|0}function El(i,a,l,g,b,x,A,P){var U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0;ne=qn-16|0,qn=ne,h[ne+12>>2]=0,h[ne+8>>2]=0,Jr=P?h[P+8>>2]:0;e:{if(!i){X=7;break e}if(a>>>0<12){X=7;break e}if(j=a,U=i,At=Bc(U,5463),!At){if(X=3,(T[i+8|0]|T[i+9|0]<<8|(T[i+10|0]<<16|T[i+11|0]<<24))!=1346520407||(je=T[i+4|0]|T[i+5|0]<<8|(T[i+6|0]<<16|T[i+7|0]<<24),je+-12>>>0>4294967274))break e;if(!(!Jr|je>>>0<=a+-8>>>0)){X=7;break e}if(j=a+-12|0,j>>>0<8){X=7;break e}U=i+12|0}st=Bc(U,5468);t:{if(st){X=0;break t}if(X=3,(T[U+4|0]|T[U+5|0]<<8|(T[U+6|0]<<16|T[U+7|0]<<24))!=10)break e;if(j>>>0<18){X=7;break e}if(me=1,Qt=(T[U+12|0]|T[U+13|0]<<8|T[U+14|0]<<16)+1|0,lr=(T[U+15|0]|T[U+16|0]<<8|T[U+17|0]<<16)+1|0,Ei(Qt,0,lr,0),At|jn)break e;X=T[U+8|0],j=j+-18|0,U=U+18|0,Nr=(X&2)>>>1|0}b&&(h[b>>2]=X>>>4&1),x&&(h[x>>2]=Nr),A&&(h[A>>2]=0),h[ne+8>>2]=lr,h[ne+12>>2]=Qt;t:{if(!P&&(x=0,!st&Nr))break t;x=0;r:{if(j>>>0<4)break r;n:{if(me|je|(T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24))!=1213221953&&st|At)break n;if(j>>>0<8)break r;for(Sr=22;;){if(X=3,Ie=T[U+4|0]|T[U+5|0]<<8|(T[U+6|0]<<16|T[U+7|0]<<24),Ie>>>0>4294967286||(Lt=Ie+9&-2,Sr=Lt+Sr|0,Sr>>>0>je>>>0&&!At))break e;if((T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24))==540561494|(T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24))==1278758998)break n;if(j>>>0<Lt>>>0)break r;if(me=(T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24))==1213221953,x=me?U+8|0:x,hn=me?Ie:hn,U=U+Lt|0,j=j-Lt|0,!(j>>>0>=8))break}break r}if(j>>>0<8)break r;Ie=T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24);n:{if(!((T[U|0]|T[U+1|0]<<8|(T[U+2|0]<<16|T[U+3|0]<<24))!=540561494&&(Ie|0)!=1278758998)){if(me=T[U+4|0]|T[U+5|0]<<8|(T[U+6|0]<<16|T[U+7|0]<<24),je>>>0>=12&&(X=3,me>>>0>je+-12>>>0))break e;if(j=j+-8|0,me>>>0>j>>>0&&Jr)break r;U=U+8|0,Ie=(Ie|0)==1278758998;break n}me=j,Ie=T[U|0]!=47|j>>>0<5?0:T[U+4|0]<32}if(X=3,me>>>0>4294967286)break e;Nr|!A||(h[A>>2]=Ie?2:1);n:{if(!Ie){if(j>>>0<10)break r;if(_t(U,j,me,ne+12|0,ne+8|0))break n;break e}if(j>>>0<5)break r;if(!Wr(U,j,ne+12|0,ne+8|0,b))break e}if(h[ne+12>>2]!=(Qt|0)|h[ne+8>>2]!=(lr|0)&&!st)break e;if(!P)break t;h[P+8>>2]=0,h[P+12>>2]=0,h[P+4>>2]=a,h[P>>2]=i,h[P+32>>2]=Ie,h[P+28>>2]=je,h[P+24>>2]=me,h[P+20>>2]=hn,h[P+16>>2]=x,h[P+12>>2]=U-i;break t}if(P){X=7;break e}if(X=7,st)break e}if(b&&(h[b>>2]=h[b>>2]|(x|0)!=0),l&&(h[l>>2]=h[ne+12>>2]),X=0,!g)break e;h[g>>2]=h[ne+8>>2]}return qn=ne+16|0,X}function Zu(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;e:{P=h[i+108>>2],l=a-P|0;t:{if((l|0)<1)break t;A=h[i+8>>2],Ie=h[A>>2],g=h[i+100>>2],j=h[i+16>>2]+(K(g,P)<<2)|0,U=h[i+20>>2],ne=h[i+176>>2];r:{if((ne|0)>=1){if(l=ne+-1|0,Yl((K(l,20)+i|0)+180|0,P,a,j,U),(ne|0)<2)break r;for(;g=l+-1|0,Yl((K(g,20)+i|0)+180|0,P,a,U,U),ne=(l|0)>1,l=g,!!ne;);break r}if((U|0)==(j|0))break r;oo(U,j,K(l,g)<<2)}if(P=h[A+84>>2],j=h[i+108>>2],ne=(P|0)>(j|0),g=h[A+88>>2],g=(g|0)<(a|0)?g:a,l=ne?P:j,(g|0)<=(l|0))break t;if(g=g-l|0,h[A+16>>2]=g,h[A+8>>2]=l-P,l=h[A+76>>2],b=h[A+80>>2]-l|0,h[A+12>>2]=b,je=Ie<<2,me=(l<<2)+(ne?U+K(je,P-j|0)|0:U)|0,l=h[i+12>>2],P=h[l>>2],P>>>0>10)break e;U=h[l+20>>2],st=h[l+16>>2]+K(U,h[i+116>>2])|0;r:{if(h[A+92>>2]){if((g|0)<1)break r;for(;;){Ie=g-X|0,ne=_n(h[i+268>>2],Ie),l=K(X,je)+me|0,Zt(l,je,h[h[i+268>>2]+44>>2],ne),X=wa(h[i+268>>2],Ie,l,je)+X|0,l=0,b=h[i+268>>2];n:{if(h[b+64>>2]>=h[b+56>>2])break n;for(ne=K(x,U)+st|0,j=h[b+52>>2],Ie=h[b+68>>2];;){if(h[b+24>>2]>0)break n;if(Gr(b),tt[h[2662]](Ie,j,1),Bo(Ie,j,P,ne+K(l,U)|0),l=l+1|0,!(h[b+64>>2]<h[b+56>>2]))break}}if(x=l+x|0,!((X|0)<(g|0)))break}break r}if((g|0)>=1)for(l=g;Bo(me,b,P,st),st=U+st|0,me=me+je|0,x=(l|0)>1,l=l+-1|0,!!x;);x=g}h[i+116>>2]=h[i+116>>2]+x}h[i+108>>2]=a;return}X=h[i+116>>2];e:{if(h[A+92>>2]){if((g|0)<1)break e;for(;;){l=g-st|0,x=_n(h[i+268>>2],l),Zt(me,je,h[h[i+268>>2]+44>>2],x),Ie=K(x,je),st=wa(h[i+268>>2],l,me,je)+st|0,P=0,A=h[i+268>>2];t:{if(h[A+64>>2]>=h[A+56>>2])break t;for(U=h[A+52>>2],j=h[A+68>>2],ne=j+3|0,l=X;;){if(h[A+24>>2]>0)break t;if(Gr(A),tt[h[2662]](j,U,1),b=h[i+12>>2],tt[h[2860]](j,h[b+16>>2]+K(h[b+32>>2],l)|0,U),x=l>>1,tt[h[2861]](j,h[b+20>>2]+K(x,h[b+36>>2])|0,h[b+24>>2]+K(x,h[b+40>>2])|0,U,(l^-1)&1),x=h[b+28>>2],x&&tt[h[2668]](ne,0,U,1,x+K(h[b+44>>2],l)|0,0)|0,P=P+1|0,l=l+1|0,!(h[A+64>>2]<h[A+56>>2]))break}}if(me=me+Ie|0,X=X+P|0,!((st|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(tt[h[2860]](me,h[l+16>>2]+K(h[l+32>>2],X)|0,b),x=X>>1,tt[h[2861]](me,h[l+20>>2]+K(x,h[l+36>>2])|0,h[l+24>>2]+K(x,h[l+40>>2])|0,b,(X^-1)&1),x=h[l+28>>2],x&&tt[h[2668]](me+3|0,0,b,1,x+K(h[l+44>>2],X)|0,0)|0,X=X+1|0,(g|0)<2)break e;g=g+-1|0,me=me+je|0,l=h[i+12>>2]}}h[i+116>>2]=X,h[i+108>>2]=a}function Ns(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;a=h[i+40>>2],g=h[h[a>>2]>>2],b=g+-1|0;e:{if(b>>>0<12&&(l=0,2077>>>(b&65535)&1))break e;l=g+-7>>>0>3}h[a+40>>2]=0,h[a+44>>2]=0,h[a+48>>2]=0,h[a+52>>2]=0;e:{if(!Ss(h[a+20>>2],i,l?12:11))break e;l|g+-7>>>0>3||Qs(),x=a+40|0;t:{r:{n:{o:{l:{if(h[i+92>>2]){if(l=h[a>>2],P=h[l>>2],A=P+-1|0,g>>>0<=10){if(A>>>0>=12||(b=0,!(2077>>>(A&65535)&1)))break n;break r}if(A>>>0>=12||(g=0,!(2077>>>(A&65535)&1)))break l;break o}i:{if(g>>>0<=10){if(nu(),h[a+44>>2]=6,!h[i+56>>2])break i;if(b=h[i+12>>2],A=b+1|0,b=La(1,0,(A&-2)+b|0),h[x>>2]=b,!b)break e;h[a+4>>2]=b,i=h[i+12>>2],h[a+44>>2]=7,i=i+b|0,h[a+8>>2]=i,h[a+12>>2]=i+(A>>1),Qs();break i}h[a+44>>2]=8}if(U=1,l)break e;i=9;i:switch(g+-5|0){default:i=g>>>0<11?10:11;break;case 0:case 5:break i}if(h[a+48>>2]=i,g>>>0>10)break e;break t}g=P+-7>>>0>3}if(P=h[i+100>>2],j=h[i+12>>2],X=h[i+16>>2],ne=x,b=h[i+96>>2],x=b+1|0,me=x&-2,Ie=me<<1,je=b<<1,st=(Ie+je<<2)+(g?0:b<<3)|0,A=La(1,0,st+(g?283:367)|0),h[ne>>2]=A,!A||(U=(A+st|0)+31&-32,h[a+24>>2]=U,h[a+32>>2]=U+168,h[a+28>>2]=U+84,h[a+36>>2]=g?0:U+252|0,sl(U,h[i+12>>2],h[i+16>>2],h[l+16>>2],b,P,h[l+32>>2],1,A),U=j+1>>1,j=X+1>>1,x=x>>1,X=P+1>>1,A=A+(je<<2)|0,sl(h[a+28>>2],U,j,h[l+20>>2],x,X,h[l+36>>2],1,A),sl(h[a+32>>2],U,j,h[l+24>>2],x,X,h[l+40>>2],1,A+(me<<2)|0),h[a+44>>2]=12,U=1,g))break e;sl(h[a+36>>2],h[i+12>>2],h[i+16>>2],h[l+28>>2],b,P,h[l+44>>2],1,A+(Ie<<2)|0),h[a+48>>2]=13;break t}b=P+-7>>>0>3}if(A=h[i+100>>2],j=h[i+12>>2],X=h[i+16>>2],l=h[i+96>>2],me=K(l,6),P=(b?me:l<<3)<<2,ne=x,Ie=K(l,3),je=l<<2,x=P+(b?Ie:je)|0,g=La(1,0,x+(b?283:367)|0),h[ne>>2]=g,!g||(U=1,x=(g+x|0)+31&-32,h[a+24>>2]=x,h[a+32>>2]=x+168,h[a+28>>2]=x+84,h[a+36>>2]=b?0:x+252|0,ne=x,x=g+P|0,sl(ne,h[i+12>>2],h[i+16>>2],x,l,A,0,1,g),P=j+1>>1,j=X+1>>1,X=l<<1,sl(h[a+28>>2],P,j,l+x|0,l,A,0,1,g+(X<<2)|0),sl(h[a+32>>2],P,j,x+X|0,l,A,0,1,g+(je<<2)|0),h[a+44>>2]=14,js(),b))break e;sl(h[a+36>>2],h[i+12>>2],h[i+16>>2],x+Ie|0,l,A,0,1,g+(me<<2)|0),h[a+48>>2]=15,i=16;r:switch(h[h[a>>2]>>2]+-5|0){default:i=17;break;case 0:case 5:break r}h[a+52>>2]=i}fa()}return U|0}function Sl(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,el=0,au=0;Jr=qn-256|0,qn=Jr,x=(b|0)/25|0;e:{if(!i|b>>>0>100|((a|0)<1|(l|0)<1)||(A=1,di=l+-1|0,je=a+-1|0,b=(x<<1|1)>(a|0)?je>>1:x,X=(b<<1|1)>(l|0)?di>>1:b,(X|0)<1)||(A=0,j=a<<1,x=X<<1,b=K(j,x+2|0),lr=La(1,0,(b+j|0)+4094|0),!lr))break e;for(Lt=0-X|0,x=x|1,me=(K(x,a)<<1)+lr|0,U=me-j|0,ua(U,0,j),st=ua(Jr,0,256),Sr=b+lr|0,Nr=K(x,x),hn=255,ne=255,x=i;;){for(A=0;b=T[A+x|0],m[b+st|0]=1,Ie=(P|0)<(b|0),P=Ie?b:P,Ni=Ie?b:Ni,Ie=(ne|0)>(b|0),ne=Ie?b:ne,hn=Ie?b:hn,A=A+1|0,(A|0)!=(a|0););if(x=g+x|0,At=At+1|0,(At|0)==(l|0))break}for(P=P-ne|0,Ie=262144/(Nr>>>0)|0,x=j+Sr|0,A=-1,ne=0,b=0;T[b+st|0]&&(ne=ne+1|0,(A|0)>=0&&(A=b-A|0,P=(A|0)<(P|0)?A:P),A=b),b=b+1|0,(b|0)!=256;);for(A=P<<2,st=K(P,12)>>2,P=A-st|0,Nr=x+2046|0,b=1;;){At=b<<1,Qt=At+Nr|0,x=b;t:{if((b|0)<=(st|0)||(x=0,(A|0)<=(b|0)))break t;x=(K(st,A-b|0)|0)/(P|0)|0}if(x=x>>>2|0,Pr[Qt>>1]=x,Pr[Nr-At>>1]=0-x,b=b+1|0,(b|0)==1024)break}if(Pr[Nr>>1]=0,!((ne|0)<3|(Lt|0)>=(l|0)))for(At=X^-1,ne=a-X|0,st=X+1|0,Ua=X+-1|0,el=(j-X|0)+-2|0,au=(je<<1)+me|0,A=lr,x=i;;){if(P=0,b=0,Qt=(a|0)<1,!Qt)for(;P=T[b+x|0]+(P&65535)|0,j=b<<1,je=P+kn[j+U>>1]|0,Sn=j+me|0,j=A+j|0,Pr[Sn>>1]=je-kn[j>>1],Pr[j>>1]=je,b=b+1|0,(b|0)!=(a|0););if(P=(Lt|0)<(di|0)?g+x|0:x,j=(Lt|0)>-1,je=(a<<1)+A|0,Sn=(je|0)==(me|0),(Lt|0)>=(X|0)){if(b=0,(X|0)>-1){for(;Pr[(b<<1)+Sr>>1]=K(Ie,kn[(X-b<<1)+me>>1]+kn[(b+Ua<<1)+me>>1]&65535)>>>16,U=(b|0)==(X|0),b=b+1|0,!U;);b=st}if((b|0)<(ne|0)){for(;Pr[(b<<1)+Sr>>1]=K(Ie,kn[(b+X<<1)+me>>1]-kn[(b+At<<1)+me>>1]&65535)>>>16,b=b+1|0,(ne|0)!=(b|0););b=ne}if((b|0)<(a|0))for(;Pr[(b<<1)+Sr>>1]=K(Ie,((kn[au>>1]<<1)-kn[(el-b<<1)+me>>1]|0)-kn[(b+At<<1)+me>>1]&65535)>>>16,b=b+1|0,(b|0)!=(a|0););if(b=0,!Qt)for(;Qt=i+b|0,U=T[Qt|0],(Ni|0)<=(U|0)|(hn|0)>=(U|0)||(U=U+Pr[(kn[(b<<1)+Sr>>1]-(U<<2)<<1)+Nr>>1]|0,U=(U|0)>0?U:0,m[Qt|0]=(U|0)<255?U:255),b=b+1|0,(b|0)!=(a|0););i=i+g|0}if(x=j?P:x,U=A,A=Sn?lr:je,Lt=Lt+1|0,(Lt|0)==(l|0))break}$i(lr),A=1}return qn=Jr+256|0,A}function ol(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;e:{if((b|0)<=15)for(Ie=h[(b<<2)+a>>2]+K(l,11)|0,l=h[i+8>>2],U=h[i+4>>2];;){A=T[Ie|0];t:{if((l|0)>-1)break t;if(ne=h[i+12>>2],ne>>>0<ii[i+20>>2]){P=T[ne|0]|T[ne+1|0]<<8|(T[ne+2|0]<<16|T[ne+3|0]<<24),h[i+12>>2]=ne+3,l=l+24|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<24|(P>>>8&65280|(P<<8&16711680|P<<24))>>>8;break t}Fi(i),l=h[i+8>>2]}me=i,P=l,j=h[i>>2],X=j>>>l|0,A=K(A,U)>>>8|0;t:{if(X>>>0>A>>>0){j=((A^-1)<<l)+j|0,h[i>>2]=j,U=U-A|0;break t}U=A+1|0}if(ne=Ri(U)^24,l=P-ne|0,h[me+8>>2]=l,U=(U<<ne)+-1|0,h[i+4>>2]=U,ne=b,me=b,X>>>0<=A>>>0)break e;for(;;){A=T[Ie+1|0];t:{if((l|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){P=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=b+3,j=j<<24|(P>>>8&65280|(P<<8&16711680|P<<24))>>>8,h[i>>2]=j;break t}Fi(i),j=h[i>>2],l=h[i+8>>2]}me=i,P=l,X=j>>>l|0,A=K(A,U)>>>8|0;t:{if(X>>>0>A>>>0){j=((A^-1)<<l)+j|0,h[i>>2]=j,U=U-A|0;break t}U=A+1|0}if(b=Ri(U)^24,l=P-b|0,h[me+8>>2]=l,U=(U<<b)+-1|0,h[i+4>>2]=U,b=ne+1|0,X>>>0<=A>>>0){if(me=16,(b|0)==16)break e;Ie=h[(b<<2)+a>>2],ne=b;continue}break}je=h[(b<<2)+a>>2],X=T[Ie+2|0];t:{if((l|0)>-1)break t;if(P=h[i+12>>2],P>>>0<ii[i+20>>2]){A=T[P|0]|T[P+1|0]<<8|(T[P+2|0]<<16|T[P+3|0]<<24),l=l+24|0,h[i+8>>2]=l,h[i+12>>2]=P+3,j=j<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=j;break t}Fi(i),j=h[i>>2],l=h[i+8>>2]}me=i,P=l,st=j>>>l|0,X=K(U,X)>>>8|0;t:{if(st>>>0>X>>>0){h[i>>2]=((X^-1)<<l)+j,l=U-X|0;break t}l=X+1|0}A=Ri(l)^24,P=P-A|0,h[me+8>>2]=P,h[i+4>>2]=(l<<A)+-1;t:{if(st>>>0<=X>>>0){j=1,Ie=je+11|0;break t}j=To(i,Ie),P=h[i+8>>2],Ie=je+22|0}t:{if((P|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,P=P+24|0,h[i+8>>2]=P,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),P=h[i+8>>2]}if(l=P+-1|0,h[i+8>>2]=l,U=h[i+4>>2],X=U>>>1|0,je=h[i>>2],A=X-(je>>>P|0)>>31,U=A+U|1,h[i+4>>2]=U,h[i>>2]=je-((A&X+1)<<P),Pr[(T[ne+5328|0]<<1)+x>>1]=K(h[(((ne|0)>0)<<2)+g>>2],(A^j)-A|0),!((ne|0)<15))break}me=16}return me|0}function ku(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;e:{if((b|0)<=15)for(Ie=h[(b<<2)+a>>2]+K(l,11)|0,P=h[i+8>>2],A=h[i+4>>2];;){j=T[Ie|0];t:{if((P|0)>-1)break t;if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){ne=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,P=P+24|0,h[i+8>>2]=P,h[i>>2]=h[i>>2]<<24|(ne>>>8&65280|(ne<<8&16711680|ne<<24))>>>8;break t}Fi(i),P=h[i+8>>2]}if(U=h[i>>2],l=K(A,j)>>>8|0,j=U>>>P>>>0<=l>>>0,j||(l=l+1|0,U=U-(l<<P)|0,h[i>>2]=U,l=A-l|0),l>>>0<=126&&(P=P-T[l+9056|0]|0,h[i+8>>2]=P,l=T[l+9184|0]),h[i+4>>2]=l,ne=b,A=b,j)break e;for(;;){j=T[Ie+1|0];t:{if((P|0)>-1)break t;if(b=h[i+12>>2],b>>>0<ii[i+20>>2]){A=T[b|0]|T[b+1|0]<<8|(T[b+2|0]<<16|T[b+3|0]<<24),P=P+24|0,h[i+8>>2]=P,h[i+12>>2]=b+3,U=U<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,h[i>>2]=U;break t}Fi(i),U=h[i>>2],P=h[i+8>>2]}X=U>>>P|0,A=K(l,j)>>>8|0;t:{if(X>>>0<=A>>>0){l=A;break t}b=A+1|0,U=U-(b<<P)|0,h[i>>2]=U,l=l-b|0}if(l>>>0<=126&&(P=P-T[l+9056|0]|0,h[i+8>>2]=P,l=T[l+9184|0]),h[i+4>>2]=l,b=ne+1|0,j=h[(b<<2)+a>>2],X>>>0<=A>>>0){if(A=16,ne=b,Ie=j,(b|0)!=16)continue;break e}break}me=T[Ie+2|0];t:{if((P|0)>-1)break t;if(A=h[i+12>>2],A>>>0<ii[i+20>>2]){X=T[A|0]|T[A+1|0]<<8|(T[A+2|0]<<16|T[A+3|0]<<24),P=P+24|0,h[i+8>>2]=P,h[i+12>>2]=A+3,U=U<<24|(X>>>8&65280|(X<<8&16711680|X<<24))>>>8,h[i>>2]=U;break t}Fi(i),U=h[i>>2],P=h[i+8>>2]}X=i,je=U>>>P|0,me=K(l,me)>>>8|0,A=me,je>>>0>A>>>0&&(A=me+1|0,h[i>>2]=U-(A<<P),A=l-A|0),A>>>0<=126&&(P=P-T[A+9056|0]|0,h[i+8>>2]=P,A=T[A+9184|0]),h[X+4>>2]=A;t:{if(je>>>0<=me>>>0){X=1,Ie=j+11|0;break t}X=To(i,Ie),P=h[i+8>>2],Ie=j+22|0}t:{if((P|0)>-1){l=P;break t}if(l=h[i+12>>2],l>>>0<ii[i+20>>2]){A=T[l|0]|T[l+1|0]<<8|(T[l+2|0]<<16|T[l+3|0]<<24),h[i+12>>2]=l+3,l=P+24|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),l=h[i+8>>2]}if(P=l+-1|0,h[i+8>>2]=P,A=h[i+4>>2],U=A>>>1|0,me=h[i>>2],j=U-(me>>>l|0)>>31,A=A+j|1,h[i+4>>2]=A,h[i>>2]=me-((j&U+1)<<l),Pr[(T[ne+5328|0]<<1)+x>>1]=K(h[(((ne|0)>0)<<2)+g>>2],(j^X)-j|0),!((ne|0)<15))break}A=16}return A|0}function Na(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;e:{if((l|0)<0|(g|0)<1||(U=h[a+88>>2],(l+g|0)>(U|0)))break e;X=h[a>>2];t:{r:{if(h[i+2356>>2])break r;x=h[i+2344>>2];n:{if(x)break n;if(b=ul(1,0,144),h[i+2344>>2]=b,!b)break e;if(b=h[a+88>>2],A=b,x=b>>31,b=h[a>>2],x=La(Ei(A,x,b,b>>31),jn,1),h[i+2360>>2]=x,!x||(h[i+2368>>2]=0,h[i+2364>>2]=x,A=h[i+2348>>2],P=h[i+2352>>2],b=h[i+2344>>2],n0(),h[b+136>>2]=x,h[b>>2]=h[a>>2],h[b+4>>2]=h[a+4>>2],P>>>0<2)||(x=T[A|0]&3,h[b+8>>2]=x,h[b+12>>2]=T[A|0]>>>2&3,j=T[A|0]>>>4&3,h[b+16>>2]=j,x>>>0>1|j>>>0>1|T[A|0]>63)||(x=P+-1|0,P=b+24|0,Od(P),Vs(0,P),h[b- -64>>2]=b,h[b+24>>2]=h[a>>2],h[b+28>>2]=h[a+4>>2],h[b+96>>2]=h[a+72>>2],h[b+100>>2]=h[a+76>>2],h[b+104>>2]=h[a+80>>2],h[b+108>>2]=h[a+84>>2],h[b+112>>2]=h[a+88>>2],h[b+8>>2]?b=Pl(b,A+1|0,x):b=x>>>0>=K(h[b+4>>2],h[b>>2])>>>0,!b))break t;if(x=h[i+2344>>2],h[x+16>>2]!=1){h[i+2372>>2]=0;break n}g=U-l|0}ne=h[x+112>>2];n:{if(!h[x+8>>2]){P=h[x>>2],A=K(P,l),b=A+h[i+2364>>2]|0,U=(A+h[i+2348>>2]|0)+1|0,A=h[i+2368>>2];o:{l:{if(j=h[x+12>>2],j){if((g|0)<1)break o;if(tt[h[(j<<2)+10912>>2]](A,U,b,P),j=1,(g|0)!=1)break l;A=b;break o}if(x=0,(g|0)<=0)break o;for(;A=b,b=oo(b,U,P),U=P+U|0,b=b+P|0,x=x+1|0,(x|0)!=(g|0););break o}for(;U=P+U|0,A=b+P|0,tt[h[(h[x+12>>2]<<2)+10912>>2]](b,U,A,P),b=A,j=j+1|0,(j|0)!=(g|0););}h[i+2368>>2]=A,g=l+g|0;break n}if(g=l+g|0,!Da(x,g))break t}n:{if((g|0)>=(ne|0)){h[i+2356>>2]=1;break n}if(!h[i+2356>>2])break r}if(g=h[i+2344>>2],g&&(_h(h[g+20>>2]),h[g+20>>2]=0,$i(g)),h[i+2344>>2]=0,g=h[i+2372>>2],(g|0)<1)break r;if(A=h[a+76>>2],b=h[a+84>>2],!Sl(A+(h[i+2364>>2]+K(b,X)|0)|0,h[a+80>>2]-A|0,h[a+88>>2]-b|0,X,g))break t}return h[i+2364>>2]+K(l,X)|0}$i(h[i+2360>>2]),h[i+2360>>2]=0,h[i+2364>>2]=0,a=h[i+2344>>2],a&&(_h(h[a+20>>2]),h[a+20>>2]=0,$i(a)),h[i+2344>>2]=0}return 0}function Au(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0;h[i+152>>2]=0,U=1;e:{t:{if(h[i+148>>2]>=1){if(!(tt[h[2558]](i+124|0)|0))break t;h[i+140>>2]=i+180,h[i+136>>2]=i,h[i+132>>2]=18,U=h[i+2308>>2]>0?3:2}h[i+156>>2]=U;break e}if(!Pi(i,1,4941))return 0}A=h[i+288>>2],X=A<<2,l=h[i+148>>2],j=h[i+2308>>2],me=(j|0)>0?K(X,(l|0)<1?1:2):0,Ie=A<<5,st=U<<4,At=K(Ie,(K(st+T[j+4863|0]|0,3)|0)/2|0),je=(A<<1)+2|0,Lt=K(K(A,(l|0)==2?2:1),800),x=0;e:{if(!h[i+2348>>2])break e;Qt=Ei(kn[i+50>>1],0,kn[i+48>>1],0),x=jn}lr=x,l=0,g=X,b=g+Ie|0,b>>>0<g>>>0&&(l=1),g=b,b=g+je|0,b>>>0<g>>>0&&(l=l+1|0),g=b,b=g+me|0,b>>>0<g>>>0&&(l=l+1|0),g=b,b=g+Lt|0,b>>>0<g>>>0&&(l=l+1|0),g=b,b=g+At|0,b>>>0<g>>>0&&(l=l+1|0),g=b,b=g+Qt|0,l=l+x|0,x=b,l=b>>>0<g>>>0?l+1|0:l,g=l,b=b+832|0,b>>>0<832&&(l=l+1|0);e:{if(!l&b>>>0>4294967264|l>>>0>0)break e;P=h[i+2288>>2];t:{r:{if(l=g,g=x+863|0,g>>>0<863&&(l=l+1|0),x=g,b=g,g=l,!l&b>>>0>ii[i+2292>>2]|l>>>0>0){if($i(P),h[i+2292>>2]=0,P=La(x,g,1),h[i+2288>>2]=P,!P)break r;h[i+2292>>2]=x,j=h[i+2308>>2]}h[i+2244>>2]=P,h[i+160>>2]=0,l=P+X|0,h[i+2252>>2]=l,l=l+Ie|0,ne=l+2|0,h[i+2256>>2]=ne,l=l+je|0,b=me?l:0,h[i+2260>>2]=b,h[i+172>>2]=b,l=l+me|0,g=h[i+148>>2],(j|0)<1|(g|0)<1||(h[i+172>>2]=b+(A<<2)),l=l+31&-32,h[i+2264>>2]=l,l=l+832|0,h[i+2304>>2]=l,h[i+176>>2]=l,(g|0)==2&&(h[i+176>>2]=l+K(A,800)),h[i+152>>2]=0,x=A<<3,h[i+2284>>2]=x,b=A<<4,h[i+2280>>2]=b,l=l+Lt|0,h[i+2364>>2]=Qt|lr?l+At|0:0,g=T[j+4863|0],l=l+K(g,b)|0,h[i+2268>>2]=l,g=K(x,g>>>1|0),l=g+(l+K(b,st)|0)|0,h[i+2272>>2]=l,h[i+2276>>2]=g+(l+(K(x,U)<<3)|0),ua(ne+-2|0,0,je),l=h[i+2256>>2]+-2|0,m[l|0]=0,m[l+1|0]=0,h[i+2296>>2]=0,h[i+2248>>2]=0,ua(h[i+2244>>2],0,X);break t}if(!Pi(i,1,4971))break e}h[a+8>>2]=0,h[a+20>>2]=h[i+2268>>2],h[a+24>>2]=h[i+2272>>2],h[a+28>>2]=h[i+2276>>2],h[a+32>>2]=h[i+2280>>2],i=h[i+2284>>2],h[a+104>>2]=0,h[a+36>>2]=i,Ml(),ne=1}return ne}function Jl(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;U=qn-16|0,qn=U,j=2;e:{if(!g|((a|0)<1|(i|0)<1))break e;t:{if(!l)break t;r:{if(!h[l+8>>2]){b=a,x=i;break r}if(b=h[l+24>>2],(b|0)<1||(x=h[l+20>>2],(x|0)<1)||(A=h[l+16>>2],P=h[l+12>>2],(A|P)<0|((P&-2)+x|0)>(i|0)|((A&-2)+b|0)>(a|0)))break e}if(!h[l+28>>2]){a=b,i=x;break t}if(h[U+12>>2]=h[l+32>>2],h[U+8>>2]=h[l+36>>2],!qe(x,b,U+12|0,U+8|0))break e;a=h[U+8>>2],i=h[U+12>>2]}if(h[g+8>>2]=a,h[g+4>>2]=i,(a|0)<1|(i|0)<1||(P=h[g>>2],P>>>0>12))break e;t:{if(h[g+80>>2]|h[g+12>>2]>0)break t;if(x=i,b=T[P+1157|0],Ei(i,0,b,0),jn)break e;A=a,Ie=K(i,b),b=Ie,b=Ei(a,0,b,b>>31),X=jn,j=1;r:{if(P>>>0<11){a=0,A=0,i=0;break r}x=Ei(x,0,A,0),A=(P|0)==12,st=A?x:0,ne=A?jn:0,je=(i+1|0)/2|0,x=je,a=(a+1|0)/2|0,a=Ei(x,x>>31,a,a>>31),A=A?i:0,i=jn}if(me=a,i=i<<1|a>>>31,ne=ne+X|0,X=b+st|0,X>>>0<b>>>0&&(ne=ne+1|0),me=me<<1,x=me+X|0,i=i+ne|0,i=La(x,x>>>0<X>>>0?i+1|0:i,1),!i)break e;if(h[g+16>>2]=i,h[g+80>>2]=i,P>>>0>=11){h[g+48>>2]=b,h[g+32>>2]=Ie,h[g+52>>2]=a,h[g+36>>2]=je,h[g+56>>2]=a,h[g+40>>2]=je,i=i+b|0,h[g+20>>2]=i,h[g+24>>2]=i+a,(P|0)==12&&(h[g+28>>2]=i+me),h[g+44>>2]=A,h[g+60>>2]=st;break t}h[g+24>>2]=b,h[g+20>>2]=Ie}if(j=la(g),j|!l)break e;if(!h[l+48>>2]){j=0;break e}if(i=h[g+8>>2]+-1|0,ii[g>>2]<=10){j=0,l=g+20|0,a=h[l>>2],h[l>>2]=0-a,h[g+16>>2]=h[g+16>>2]+K(i,a);break e}if(j=0,l=g+32|0,a=h[l>>2],h[l>>2]=0-a,b=g+36|0,l=h[b>>2],h[b>>2]=0-l,x=g+40|0,b=h[x>>2],h[x>>2]=0-b,h[g+16>>2]=h[g+16>>2]+K(i,a),a=g+20|0,x=a,A=h[a>>2],a=i>>1,h[x>>2]=A+K(a,l),l=g+24|0,h[l>>2]=h[l>>2]+K(a,b),l=h[g+28>>2],!l)break e;b=g+44|0,a=h[b>>2],h[b>>2]=0-a,h[g+28>>2]=l+K(i,a)}return qn=U+16|0,j}function Zs(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0;for(A=qn+-64|0,b=Pr[i+16>>1],x=Pr[i>>1],P=b+x|0,l=Pr[i+8>>1],g=Pr[i+24>>1],U=((K(l,20091)>>16)+l|0)+(K(g,35468)>>16)|0,h[A+12>>2]=P-U,b=x-b|0,l=((K(l,35468)>>16)-g|0)-(K(g,20091)>>16)|0,h[A+8>>2]=b-l,h[A+4>>2]=l+b,h[A>>2]=P+U,b=Pr[i+18>>1],x=Pr[i+2>>1],P=b+x|0,l=Pr[i+10>>1],g=Pr[i+26>>1],U=((K(l,20091)>>16)+l|0)+(K(g,35468)>>16)|0,h[A+28>>2]=P-U,b=x-b|0,l=((K(l,35468)>>16)-g|0)-(K(g,20091)>>16)|0,h[A+24>>2]=b-l,h[A+20>>2]=l+b,l=P+U|0,h[A+16>>2]=l,x=Pr[i+20>>1],P=Pr[i+4>>1],U=x+P|0,g=Pr[i+12>>1],b=Pr[i+28>>1],j=((K(g,20091)>>16)+g|0)+(K(b,35468)>>16)|0,h[A+44>>2]=U-j,x=P-x|0,g=((K(g,35468)>>16)-b|0)-(K(b,20091)>>16)|0,h[A+40>>2]=x-g,h[A+36>>2]=g+x,h[A+32>>2]=U+j,b=Pr[i+22>>1],x=Pr[i+6>>1],P=b+x|0,g=Pr[i+14>>1],i=Pr[i+30>>1],U=((K(g,20091)>>16)+g|0)+(K(i,35468)>>16)|0,h[A+60>>2]=P-U,b=x-b|0,i=((K(g,35468)>>16)-i|0)-(K(i,20091)>>16)|0,h[A+56>>2]=b-i,h[A+52>>2]=i+b,h[A+48>>2]=P+U,i=A,A=0;;){if(g=h[i+48>>2],b=((K(l,20091)>>16)+l|0)+(K(g,35468)>>16)|0,x=h[i>>2]+4|0,P=h[i+32>>2],U=x+P|0,j=T[a|0]+(b+U>>3)|0,j=(j|0)>0?j:0,m[a|0]=(j|0)<255?j:255,l=((K(l,35468)>>16)-g|0)-(K(g,20091)>>16)|0,g=x-P|0,x=T[a+1|0]+(l+g>>3)|0,x=(x|0)>0?x:0,m[a+1|0]=(x|0)<255?x:255,l=T[a+2|0]+(g-l>>3)|0,l=(l|0)>0?l:0,m[a+2|0]=(l|0)<255?l:255,l=T[a+3|0]+(U-b>>3)|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,A=A+1|0,(A|0)!=4){a=a+32|0,l=h[i+20>>2],i=i+4|0;continue}break}}function Cl(i){i=i|0;var a=0;a=Ei(T[i+31|0],0,16843009,16843009),m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,a=jn,m[i+36|0]=a,m[i+37|0]=a>>>8,m[i+38|0]=a>>>16,m[i+39|0]=a>>>24,a=Ei(T[i+63|0],0,16843009,16843009),m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,a=jn,m[i+68|0]=a,m[i+69|0]=a>>>8,m[i+70|0]=a>>>16,m[i+71|0]=a>>>24,a=Ei(T[i+95|0],0,16843009,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,a=jn,m[i+100|0]=a,m[i+101|0]=a>>>8,m[i+102|0]=a>>>16,m[i+103|0]=a>>>24,a=Ei(T[i+127|0],0,16843009,16843009),m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,a=jn,m[i+132|0]=a,m[i+133|0]=a>>>8,m[i+134|0]=a>>>16,m[i+135|0]=a>>>24,a=Ei(T[i+159|0],0,16843009,16843009),m[i+160|0]=a,m[i+161|0]=a>>>8,m[i+162|0]=a>>>16,m[i+163|0]=a>>>24,a=jn,m[i+164|0]=a,m[i+165|0]=a>>>8,m[i+166|0]=a>>>16,m[i+167|0]=a>>>24,a=Ei(T[i+191|0],0,16843009,16843009),m[i+192|0]=a,m[i+193|0]=a>>>8,m[i+194|0]=a>>>16,m[i+195|0]=a>>>24,a=jn,m[i+196|0]=a,m[i+197|0]=a>>>8,m[i+198|0]=a>>>16,m[i+199|0]=a>>>24,a=Ei(T[i+223|0],0,16843009,16843009),m[i+224|0]=a,m[i+225|0]=a>>>8,m[i+226|0]=a>>>16,m[i+227|0]=a>>>24,a=jn,m[i+228|0]=a,m[i+229|0]=a>>>8,m[i+230|0]=a>>>16,m[i+231|0]=a>>>24,a=Ei(T[i+-1|0],0,16843009,16843009),m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,a=jn,m[i+4|0]=a,m[i+5|0]=a>>>8,m[i+6|0]=a>>>16,m[i+7|0]=a>>>24}function Ra(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0;e:{if((l|0)!=1){for(;g=T[a|0]+(T[i|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=T[a+1|0]+(T[i+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=T[a+2|0]+(T[i+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=T[a+3|0]+(T[i+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=T[a+4|0]+(T[i+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=T[a+5|0]+(T[i+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,g=T[a+6|0]+(T[i+6|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+6|0]=(g|0)<255?g:255,g=T[a+7|0]+(T[i+7|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+7|0]=(g|0)<255?g:255,i=i+8|0,a=a+l|0,b=b+1|0,(b|0)!=8;);break e}for(b=T[a+6|0];g=T[a|0]+(T[i|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=T[a+1|0]+(T[i+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=T[a+2|0]+(T[i+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=T[a+3|0]+(T[i+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=T[a+4|0]+(T[i+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=T[a+5|0]+(T[i+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,b=(b&255)+(T[i+6|0]+-120>>4)|0,b=(b|0)>0?b:0,m[a+6|0]=(b|0)<255?b:255,b=T[a+7|0]+(T[i+7|0]+-120>>4)|0,b=(b|0)>0?b:0,b=(b|0)<255?b:255,m[a+7|0]=b,i=i+8|0,a=a+l|0,x=x+1|0,(x|0)!=8;);}}function Kl(i){i=i|0;var a=0,l=0;a=Ei((T[i+223|0]+(T[i+-25|0]+(T[i+191|0]+(T[i+-26|0]+(T[i+159|0]+(T[i+-27|0]+(T[i+127|0]+(T[i+-28|0]+(T[i+95|0]+(T[i+-29|0]+(T[i+63|0]+(T[i+-30|0]+(T[i+31|0]+(T[i+-31|0]+(T[i+-32|0]+T[i+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[i+224|0]=a,m[i+225|0]=a>>>8,m[i+226|0]=a>>>16,m[i+227|0]=a>>>24,l=jn,m[i+228|0]=l,m[i+229|0]=l>>>8,m[i+230|0]=l>>>16,m[i+231|0]=l>>>24,m[i+192|0]=a,m[i+193|0]=a>>>8,m[i+194|0]=a>>>16,m[i+195|0]=a>>>24,m[i+196|0]=l,m[i+197|0]=l>>>8,m[i+198|0]=l>>>16,m[i+199|0]=l>>>24,m[i+160|0]=a,m[i+161|0]=a>>>8,m[i+162|0]=a>>>16,m[i+163|0]=a>>>24,m[i+164|0]=l,m[i+165|0]=l>>>8,m[i+166|0]=l>>>16,m[i+167|0]=l>>>24,m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,m[i+132|0]=l,m[i+133|0]=l>>>8,m[i+134|0]=l>>>16,m[i+135|0]=l>>>24,m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,m[i+100|0]=l,m[i+101|0]=l>>>8,m[i+102|0]=l>>>16,m[i+103|0]=l>>>24,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,m[i+68|0]=l,m[i+69|0]=l>>>8,m[i+70|0]=l>>>16,m[i+71|0]=l>>>24,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,m[i+36|0]=l,m[i+37|0]=l>>>8,m[i+38|0]=l>>>16,m[i+39|0]=l>>>24,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,m[i+4|0]=l,m[i+5|0]=l>>>8,m[i+6|0]=l>>>16,m[i+7|0]=l>>>24}function Xs(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0;e:{if(l=h[a+48>>2],!l||tt[l|0](a)|0)break e;return Pi(i,6,4844),h[i>>2]}e:{t:{r:{n:{if(h[a+68>>2]){h[i+2308>>2]=0,l=0;break n}if(l=2,x=h[i+2308>>2],g=T[x+4863|0],(x|0)==2)break r;l=x}if(x=h[a+76>>2]-g|0,h[i+296>>2]=x>>4,b=h[a+84>>2]-g|0,h[i+300>>2]=b>>4,(x|0)<=-1&&(h[i+296>>2]=0),(b|0)>-1)break e;x=i+300|0;break t}h[i+296>>2]=0,x=i+300|0}h[x>>2]=0}if(g=g+15|0,x=g+h[a+88>>2]>>4,h[i+308>>2]=x,b=h[i+288>>2],a=g+h[a+80>>2]>>4,h[i+304>>2]=(a|0)>(b|0)?b:a,a=h[i+292>>2],(x|0)>(a|0)&&(h[i+308>>2]=a),(l|0)>=1)for(j=h[i+68>>2],X=h[i+104>>2],x=0;;){a=(x<<3)+i|0;e:{if(X){if(l=m[(i+x|0)+120|0],g=l,h[i+112>>2])break e;g=l+h[i+60>>2]|0;break e}g=h[i+60>>2]}l=g,A=a+2312|0,l=j?h[i+72>>2]+l|0:l;e:{if((l|0)>=1){b=(l|0)<63?l:63,l=(l|0)>0?b:0,U=a+2313|0,P=h[i+64>>2],(P|0)>=1&&(b=9-P|0,P=l>>>((P|0)>4?2:1)|0,b=(P|0)>(b|0)?b:P),b=(b|0)>1?b:1,m[U|0]=b,m[A|0]=b+(l<<1),m[a+2315|0]=(l|0)>39?2:(l|0)>14;break e}m[A|0]=0}m[a+2314|0]=0,b=a+2316|0,g=j?h[i+88>>2]+(h[i+72>>2]+g|0)|0:g,A=(g|0)>0;e:{if(!A){m[b|0]=0;break e}l=(g|0)<63?g:63,g=A?l:0,U=a+2317|0,A=h[i+64>>2],(A|0)>=1&&(l=9-A|0,A=g>>>((A|0)>4?2:1)|0,l=(A|0)>(l|0)?l:A),l=(l|0)>1?l:1,m[U|0]=l,m[b|0]=l+(g<<1),m[a+2319|0]=(g|0)>39?2:(g|0)>14}if(m[a+2318|0]=1,x=x+1|0,(x|0)==4)break}return 0}function Il(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;g=qn+-64|0,b=Pr[i+24>>1],l=Pr[i>>1],x=b+l|0,P=Pr[i+16>>1],U=Pr[i+8>>1],A=P+U|0,h[g+32>>2]=x-A,b=l-b|0,l=U-P|0,h[g+48>>2]=b-l,h[g+16>>2]=l+b,me=x+A|0,h[g>>2]=me,b=Pr[i+26>>1],l=Pr[i+2>>1],x=b+l|0,P=Pr[i+18>>1],U=Pr[i+10>>1],A=P+U|0,h[g+36>>2]=x-A,b=l-b|0,l=U-P|0,h[g+52>>2]=b-l,b=l+b|0,h[g+20>>2]=b,l=x+A|0,h[g+4>>2]=l,x=Pr[i+4>>1],P=Pr[i+28>>1],U=x-P|0,A=Pr[i+12>>1],j=Pr[i+20>>1],X=A-j|0,h[g+56>>2]=U-X,A=A+j|0,P=x+P|0,x=A+P|0,h[g+8>>2]=x,P=P-A|0,h[g+40>>2]=P,U=U+X|0,h[g+24>>2]=U,A=Pr[i+30>>1],j=Pr[i+6>>1],X=A+j|0,ne=Pr[i+22>>1],Ie=Pr[i+14>>1],je=ne+Ie|0,i=X+je|0,h[g+12>>2]=i,st=j-A|0,ne=Ie-ne|0,A=st-ne|0,h[g+60>>2]=A,j=X-je|0,h[g+44>>2]=j,X=ne+st|0,h[g+28>>2]=X,me=me+3|0,ne=me-i|0,Ie=l-x|0,Pr[a+96>>1]=ne-Ie>>>3,i=i+me|0,l=l+x|0,Pr[a+64>>1]=i-l>>>3,Pr[a+32>>1]=ne+Ie>>>3,Pr[a>>1]=i+l>>>3,i=h[g+16>>2]+3|0,l=i-X|0,x=b-U|0,Pr[a+224>>1]=l-x>>>3,i=i+X|0,b=b+U|0,Pr[a+192>>1]=i-b>>>3,Pr[a+160>>1]=l+x>>>3,Pr[a+128>>1]=i+b>>>3,i=h[g+32>>2]+3|0,b=i-j|0,l=h[g+36>>2],x=l-P|0,Pr[a+352>>1]=b-x>>>3,i=i+j|0,l=l+P|0,Pr[a+320>>1]=i-l>>>3,Pr[a+288>>1]=b+x>>>3,Pr[a+256>>1]=i+l>>>3,i=h[g+48>>2]+3|0,b=i-A|0,l=h[g+52>>2],g=h[g+56>>2],x=l-g|0,Pr[a+480>>1]=b-x>>>3,i=i+A|0,g=g+l|0,Pr[a+448>>1]=i-g>>>3,Pr[a+416>>1]=b+x>>>3,Pr[a+384>>1]=i+g>>>3}function is(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0;for(je=a+904|0;;){for(P=0;;){for(U=0;;){for(x=0;;){ne=K(U,11),me=K(P,33),X=K(j,264),A=T[(ne+(me+(X+1392|0)|0)|0)+x|0],st=h[i+4>>2],l=h[i+8>>2];e:{if((l|0)>-1)break e;if(g=h[i+12>>2],g>>>0<ii[i+20>>2]){b=T[g|0]|T[g+1|0]<<8|(T[g+2|0]<<16|T[g+3|0]<<24),h[i+12>>2]=g+3,l=l+24|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8;break e}Fi(i),l=h[i+8>>2]}Ie=i,At=l,g=h[i>>2],A=K(A,st)>>>8|0,b=g>>>l>>>0<=A>>>0;e:{if(!b){h[i>>2]=g+((A^-1)<<l),l=st-A|0;break e}l=A+1|0}g=Ri(l)^24,h[Ie+8>>2]=At-g,h[i+4>>2]=(l<<g)+-1,Ie=(((a+X|0)+me|0)+ne|0)+x|0;e:{if(!b){l=Mi(i,8);break e}l=T[(((X+2448|0)+me|0)+ne|0)+x|0]}if(m[Ie+907|0]=l,x=x+1|0,(x|0)==11)break}if(U=U+1|0,(U|0)==3)break}if(P=P+1|0,(P|0)==8)break}if(l=K(j,68)+je|0,b=X+je|0,x=b+3|0,h[l+1124>>2]=x,h[l+1120>>2]=b+234,g=b+201|0,h[l+1116>>2]=g,h[l+1112>>2]=g,h[l+1108>>2]=g,h[l+1104>>2]=g,h[l+1100>>2]=g,h[l+1096>>2]=g,h[l+1092>>2]=g,h[l+1088>>2]=g,h[l+1084>>2]=b+168,h[l+1080>>2]=b+135,h[l+1076>>2]=g,h[l+1072>>2]=b+102,h[l+1068>>2]=b+69,h[l+1064>>2]=b+36,h[l+1060>>2]=x,j=j+1|0,(j|0)==4)break}l=Mi(i,1),h[a+2236>>2]=l,l&&(Lt=a,Qt=Mi(i,8),m[Lt+2240|0]=Qt)}function Ll(i){i=i|0;var a=0,l=0;a=i,i=Ei((T[a+-25|0]+(T[a+-26|0]+(T[a+-27|0]+(T[a+-28|0]+(T[a+-29|0]+(T[a+-30|0]+(T[a+-32|0]+T[a+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,l=jn,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24}function pc(i){i=i|0;var a=0,l=0;a=i,i=Ei((T[a+223|0]+(T[a+191|0]+(T[a+159|0]+(T[a+127|0]+(T[a+95|0]+(T[a+63|0]+(T[a+-1|0]+T[a+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,l=jn,m[a+228|0]=l,m[a+229|0]=l>>>8,m[a+230|0]=l>>>16,m[a+231|0]=l>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=l,m[a+197|0]=l>>>8,m[a+198|0]=l>>>16,m[a+199|0]=l>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=l,m[a+165|0]=l>>>8,m[a+166|0]=l>>>16,m[a+167|0]=l>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=l,m[a+133|0]=l>>>8,m[a+134|0]=l>>>16,m[a+135|0]=l>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=l,m[a+101|0]=l>>>8,m[a+102|0]=l>>>16,m[a+103|0]=l>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=l,m[a+69|0]=l>>>8,m[a+70|0]=l>>>16,m[a+71|0]=l>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=l,m[a+37|0]=l>>>8,m[a+38|0]=l>>>16,m[a+39|0]=l>>>24,m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,m[a+4|0]=l,m[a+5|0]=l>>>8,m[a+6|0]=l>>>16,m[a+7|0]=l>>>24}function zc(i){var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;e:{t:{if(i){if(x=h[i+8>>2],X=h[x+40>>2],h[i+4>>2]){if(h[i+12>>2]=h[X>>2],!Ss(h[X+20>>2],x,3))return h[i>>2]=2,jo(i),0;if(a=h[i+104>>2],l=a,b=a>>31,a=h[i+100>>2],A=Ei(l,b,a,a>>31),l=jn,U=h[x>>2],b=U,a=b>>31,a=a<<4|b>>>28,b=b<<4,j=i,P=a,a=b,b=U&65535,g=b,a=a+g|0,a>>>0<g>>>0&&(P=P+1|0),g=a+A|0,l=l+P|0,a=La(g,g>>>0<a>>>0?l+1|0:l,4),h[j+16>>2]=a,!a){h[i+20>>2]=0;break e}h[i+20>>2]=(a+(A<<2)|0)+(b<<2);r:{n:{if(h[x+92>>2]){if(ne=h[x+100>>2],U=h[x+16>>2],b=h[x+12>>2],A=h[x+96>>2],l=A,a=l>>31,g=l,l=a,a=a<<5|g>>>27,P=l<<2|g>>>30,j=g<<5,l=g<<2,g=j+l|0,a=a+P|0,a=g>>>0<l>>>0?a+1|0:a,l=g+84|0,l>>>0<84&&(a=a+1|0),a=La(l,a,1),!a){h[i>>2]=1;break t}if(h[i+268>>2]=a,h[i+264>>2]=a,l=a,a=a+84|0,sl(l,b,U,a+j|0,A,ne,0,4,a),h[x+92>>2])break n}if(a=h[h[i+12>>2]>>2],a+-7>>>0>3)break r}fa(),a=h[h[i+12>>2]>>2]}r:{if(a>>>0<11||(hs(),!h[h[i+12>>2]+28>>2]))break r;fa()}r:{if(!h[i+56>>2]|h[i+120>>2]<1||(a=i+136|0,h[a>>2])||Cr(a,h[i+132>>2]))break r;break e}h[i+4>>2]=0}if(!Xl(i,h[i+16>>2],h[i+100>>2],h[i+104>>2],h[x+88>>2],2))break t;h[X+16>>2]=h[i+116>>2],i=1}else i=0;return i}return jo(i),0}return h[i>>2]=1,jo(i),0}function Tl(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0;b=Pr[i+2>>1],A=(K(b,20091)>>16)+b|0,g=Pr[i+8>>1],P=K(g,35468)>>16,x=Pr[i>>1]+4|0,l=P+x|0,i=T[a+32|0]+(A+l>>3)|0,i=(i|0)>0?i:0,m[a+32|0]=(i|0)<255?i:255,i=K(b,35468)>>16,b=T[a+33|0]+(i+l>>3)|0,b=(b|0)>0?b:0,m[a+33|0]=(b|0)<255?b:255,b=T[a+34|0]+(l-i>>3)|0,b=(b|0)>0?b:0,m[a+34|0]=(b|0)<255?b:255,l=T[a+35|0]+(l-A>>3)|0,l=(l|0)>0?l:0,m[a+35|0]=(l|0)<255?l:255,b=g+(K(g,20091)>>16)|0,l=b+x|0,g=T[a|0]+(l+A>>3)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=T[a+1|0]+(i+l>>3)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=T[a+2|0]+(l-i>>3)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,l=T[a+3|0]+(l-A>>3)|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,l=x-P|0,g=T[a+64|0]+(l+A>>3)|0,g=(g|0)>0?g:0,m[a+64|0]=(g|0)<255?g:255,g=T[a+65|0]+(i+l>>3)|0,g=(g|0)>0?g:0,m[a+65|0]=(g|0)<255?g:255,g=T[a+66|0]+(l-i>>3)|0,g=(g|0)>0?g:0,m[a+66|0]=(g|0)<255?g:255,l=T[a+67|0]+(l-A>>3)|0,l=(l|0)>0?l:0,m[a+67|0]=(l|0)<255?l:255,x=x-b|0,l=T[a+96|0]+(x+A>>3)|0,l=(l|0)>0?l:0,m[a+96|0]=(l|0)<255?l:255,l=T[a+97|0]+(i+x>>3)|0,l=(l|0)>0?l:0,m[a+97|0]=(l|0)<255?l:255,i=T[a+98|0]+(x-i>>3)|0,i=(i|0)>0?i:0,m[a+98|0]=(i|0)<255?i:255,i=T[a+99|0]+(x-A>>3)|0,i=(i|0)>0?i:0,m[a+99|0]=(i|0)<255?i:255}function Ga(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(j=b<<1&-4,j){for(j=g+j|0;P=K(T[i|0],19077)>>>8|0,x=T[l|0],U=P+(K(x,26149)>>>8|0)|0,A=U+-14234|0,X=(A>>>0<16384?A>>>6|0:U>>>0<14234?0:248)&248,U=T[a|0],x=P-(K(U,6419)>>>8|0)-(K(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[g|0]=X|x>>>5,A=x<<3&224,P=P+(K(U,33050)>>>8|0)|0,x=P+-17685|0,m[g+1|0]=A|(x>>>0<16384?x>>>9|0:P>>>0<17685?0:31),P=K(T[i+1|0],19077)>>>8|0,x=T[l|0],U=P+(K(x,26149)>>>8|0)|0,A=U+-14234|0,X=(A>>>0<16384?A>>>6|0:U>>>0<14234?0:248)&248,U=T[a|0],x=P-(K(U,6419)>>>8|0)-(K(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[g+2|0]=X|x>>>5,A=x<<3&224,P=P+(K(U,33050)>>>8|0)|0,x=P+-17685|0,m[g+3|0]=A|(x>>>0<16384?x>>>9|0:P>>>0<17685?0:31),l=l+1|0,a=a+1|0,i=i+2|0,g=g+4|0,(j|0)!=(g|0););g=j}b&1&&(i=K(T[i|0],19077)>>>8|0,l=T[l|0],b=i+(K(l,26149)>>>8|0)|0,j=b+-14234|0,j=(j>>>0<16384?j>>>6|0:b>>>0<14234?0:248)&248,a=T[a|0],l=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,b=l+8708|0,l=b>>>0<16384?b>>6:(l|0)<-8708?0:255,m[g|0]=j|l>>>5,i=i+(K(a,33050)>>>8|0)|0,a=i+-17685|0,m[g+1|0]=l<<3&224|(a>>>0<16384?a>>>9|0:i>>>0<17685?0:31))}function Rs(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(x=b<<2&-8,x){for(x=g+x|0;A=T[l|0],P=T[a|0],U=T[i|0],m[g+3|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,33050)>>>8|0)|0,X=j+-17685|0,m[g+2|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,j=U+(K(A,26149)>>>8|0)|0,X=j+-14234|0,m[g|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,A=U-(K(P,6419)>>>8|0)-(K(A,13320)>>>8)|0,P=A+8708|0,m[g+1|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=T[l|0],P=T[a|0],U=T[i+1|0],m[g+7|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,33050)>>>8|0)|0,X=j+-17685|0,m[g+6|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,j=U+(K(A,26149)>>>8|0)|0,X=j+-14234|0,m[g+4|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,A=U-(K(P,6419)>>>8|0)-(K(A,13320)>>>8)|0,P=A+8708|0,m[g+5|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,l=l+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(l=T[l|0],a=T[a|0],i=T[i|0],m[g+3|0]=255,i=K(i,19077)>>>8|0,b=i+(K(a,33050)>>>8|0)|0,x=b+-17685|0,m[g+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i+(K(l,26149)>>>8|0)|0,x=b+-14234|0,m[g|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Os(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(x=b<<2&-8,x){for(x=g+x|0;A=T[a|0],P=T[l|0],U=T[i|0],m[g+3|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,26149)>>>8|0)|0,X=j+-14234|0,m[g+2|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,j=U+(K(A,33050)>>>8|0)|0,X=j+-17685|0,m[g|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,A=U-(K(A,6419)>>>8|0)-(K(P,13320)>>>8)|0,P=A+8708|0,m[g+1|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=T[a|0],P=T[l|0],U=T[i+1|0],m[g+7|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,26149)>>>8|0)|0,X=j+-14234|0,m[g+6|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,j=U+(K(A,33050)>>>8|0)|0,X=j+-17685|0,m[g+4|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,A=U-(K(A,6419)>>>8|0)-(K(P,13320)>>>8)|0,P=A+8708|0,m[g+5|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,l=l+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(a=T[a|0],l=T[l|0],i=T[i|0],m[g+3|0]=255,i=K(i,19077)>>>8|0,b=i+(K(l,26149)>>>8|0)|0,x=b+-14234|0,m[g+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i+(K(a,33050)>>>8|0)|0,x=b+-17685|0,m[g|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Ya(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(x=b<<2&-8,x){for(x=g+x|0;A=T[l|0],P=T[a|0],U=T[i|0],m[g|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,33050)>>>8|0)|0,X=j+-17685|0,m[g+3|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,j=U+(K(A,26149)>>>8|0)|0,X=j+-14234|0,m[g+1|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,A=U-(K(P,6419)>>>8|0)-(K(A,13320)>>>8)|0,P=A+8708|0,m[g+2|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=T[l|0],P=T[a|0],U=T[i+1|0],m[g+4|0]=255,U=K(U,19077)>>>8|0,j=U+(K(P,33050)>>>8|0)|0,X=j+-17685|0,m[g+7|0]=X>>>0<16384?X>>>6|0:j>>>0<17685?0:255,j=U+(K(A,26149)>>>8|0)|0,X=j+-14234|0,m[g+5|0]=X>>>0<16384?X>>>6|0:j>>>0<14234?0:255,A=U-(K(P,6419)>>>8|0)-(K(A,13320)>>>8)|0,P=A+8708|0,m[g+6|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,l=l+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(l=T[l|0],a=T[a|0],i=T[i|0],m[g|0]=255,i=K(i,19077)>>>8|0,b=i+(K(a,33050)>>>8|0)|0,x=b+-17685|0,m[g+3|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i+(K(l,26149)>>>8|0)|0,x=b+-14234|0,m[g+1|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[g+2|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function sa(i){i=i|0,m[i+224|0]=-2139062144,m[i+225|0]=8421504,m[i+226|0]=32896,m[i+227|0]=128,m[i+228|0]=-2139062144,m[i+229|0]=8421504,m[i+230|0]=32896,m[i+231|0]=128,m[i+192|0]=-2139062144,m[i+193|0]=8421504,m[i+194|0]=32896,m[i+195|0]=128,m[i+196|0]=-2139062144,m[i+197|0]=8421504,m[i+198|0]=32896,m[i+199|0]=128,m[i+160|0]=-2139062144,m[i+161|0]=8421504,m[i+162|0]=32896,m[i+163|0]=128,m[i+164|0]=-2139062144,m[i+165|0]=8421504,m[i+166|0]=32896,m[i+167|0]=128,m[i+128|0]=-2139062144,m[i+129|0]=8421504,m[i+130|0]=32896,m[i+131|0]=128,m[i+132|0]=-2139062144,m[i+133|0]=8421504,m[i+134|0]=32896,m[i+135|0]=128,m[i+96|0]=-2139062144,m[i+97|0]=8421504,m[i+98|0]=32896,m[i+99|0]=128,m[i+100|0]=-2139062144,m[i+101|0]=8421504,m[i+102|0]=32896,m[i+103|0]=128,m[i+64|0]=-2139062144,m[i+65|0]=8421504,m[i+66|0]=32896,m[i+67|0]=128,m[i+68|0]=-2139062144,m[i+69|0]=8421504,m[i+70|0]=32896,m[i+71|0]=128,m[i+32|0]=-2139062144,m[i+33|0]=8421504,m[i+34|0]=32896,m[i+35|0]=128,m[i+36|0]=-2139062144,m[i+37|0]=8421504,m[i+38|0]=32896,m[i+39|0]=128,m[i|0]=-2139062144,m[i+1|0]=8421504,m[i+2|0]=32896,m[i+3|0]=128,m[i+4|0]=-2139062144,m[i+5|0]=8421504,m[i+6|0]=32896,m[i+7|0]=128}function Fs(i){i=i|0;var a=0,l=0;a=i,i=a+-32|0,l=T[i|0]|T[i+1|0]<<8|(T[i+2|0]<<16|T[i+3|0]<<24),i=T[i+4|0]|T[i+5|0]<<8|(T[i+6|0]<<16|T[i+7|0]<<24),m[a+224|0]=l,m[a+225|0]=l>>>8,m[a+226|0]=l>>>16,m[a+227|0]=l>>>24,m[a+228|0]=i,m[a+229|0]=i>>>8,m[a+230|0]=i>>>16,m[a+231|0]=i>>>24,m[a+192|0]=l,m[a+193|0]=l>>>8,m[a+194|0]=l>>>16,m[a+195|0]=l>>>24,m[a+196|0]=i,m[a+197|0]=i>>>8,m[a+198|0]=i>>>16,m[a+199|0]=i>>>24,m[a+160|0]=l,m[a+161|0]=l>>>8,m[a+162|0]=l>>>16,m[a+163|0]=l>>>24,m[a+164|0]=i,m[a+165|0]=i>>>8,m[a+166|0]=i>>>16,m[a+167|0]=i>>>24,m[a+128|0]=l,m[a+129|0]=l>>>8,m[a+130|0]=l>>>16,m[a+131|0]=l>>>24,m[a+132|0]=i,m[a+133|0]=i>>>8,m[a+134|0]=i>>>16,m[a+135|0]=i>>>24,m[a+96|0]=l,m[a+97|0]=l>>>8,m[a+98|0]=l>>>16,m[a+99|0]=l>>>24,m[a+100|0]=i,m[a+101|0]=i>>>8,m[a+102|0]=i>>>16,m[a+103|0]=i>>>24,m[a+64|0]=l,m[a+65|0]=l>>>8,m[a+66|0]=l>>>16,m[a+67|0]=l>>>24,m[a+68|0]=i,m[a+69|0]=i>>>8,m[a+70|0]=i>>>16,m[a+71|0]=i>>>24,m[a+32|0]=l,m[a+33|0]=l>>>8,m[a+34|0]=l>>>16,m[a+35|0]=l>>>24,m[a+36|0]=i,m[a+37|0]=i>>>8,m[a+38|0]=i>>>16,m[a+39|0]=i>>>24,m[a|0]=l,m[a+1|0]=l>>>8,m[a+2|0]=l>>>16,m[a+3|0]=l>>>24,m[a+4|0]=i,m[a+5|0]=i>>>8,m[a+6|0]=i>>>16,m[a+7|0]=i>>>24}function la(i){var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0;me=2,U=h[i>>2];e:{if(U>>>0>12)break e;A=h[i+8>>2],b=h[i+4>>2];t:{r:{if(U>>>0>=11){if(l=h[i+40>>2],g=l>>31,P=h[i+36>>2],a=P>>31,X=h[i+32>>2],x=X>>31,Ie=g^l+g,l=(b+1|0)/2|0,Lt=(Ie|0)>=(l|0),P=a^a+P,Qt=(P|0)>=(l|0),a=x^x+X,lr=(a|0)>=(b|0),g=b,x=A+-1|0,X=x,je=x>>31,j=Ei(x,je,a,0),x=g+j|0,st=g>>31,a=st+jn|0,a=x>>>0<j>>>0?a+1|0:a,ne=!a&x>>>0<=ii[i+48>>2]|a>>>0<0,a=l,A=((A+1|0)/2|0)+-1|0,x=A,j=x>>31,P=Ei(x,j,P,0),A=a+P|0,At=a>>31,l=At+jn|0,l=A>>>0<P>>>0?l+1|0:l,ne=ne&(!l&A>>>0<=ii[i+52>>2]|l>>>0<0),A=Ei(Ie,0,x,j)+a|0,l=At+jn|0,l=A>>>0<a>>>0?l+1|0:l,a=A,a=Lt&(Qt&(lr&(ne&(!l&a>>>0<=ii[i+56>>2]|l>>>0<0))))&h[i+16>>2]!=0&h[i+20>>2]!=0&h[i+24>>2]!=0,(U|0)!=12)break r;if(!h[i+28>>2]||(U=h[i+44>>2],l=U>>31,l=l^l+U,!(a&(l|0)>=(b|0))))break e;if(b=Ei(l,0,X,je)+g|0,a=st+jn|0,a=b>>>0<g>>>0?a+1|0:a,g=b,!a&g>>>0<=ii[i+60>>2]|a>>>0<0)break t;break e}if(!h[i+16>>2]||(a=h[i+20>>2],g=a>>31,a=g^a+g,g=K(T[U+1157|0],b),(a|0)<(g|0)))break e;if(b=A+-1|0,b=Ei(b,b>>31,a,0),a=b+g|0,g=jn+(g>>31)|0,g=a>>>0<b>>>0?g+1|0:g,!g&a>>>0<=ii[i+24>>2]|g>>>0<0)break t;break e}if(!a)break e}me=0}return me}function Xu(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;e:{t:{r:{n:{o:{l:{i:{u:{a:{s:{if(A=a,A){if(b=l,!b)break s;if(x=g,!x)break a;if(x=Ri(x)-Ri(A)|0,x>>>0<=31)break u;break t}if((g|0)==1&l>>>0>=0|g>>>0>1)break t;return a=(i>>>0)/(l>>>0)|0,jn=0,a}if(b=g,!i)break i;if(!b||b+-1&b)break l;return i=A>>>(gf(b)&31)|0,jn=0,i}if(!(b+-1&b))break o;j=(Ri(b)+33|0)-Ri(A)|0,P=0-j|0;break r}j=x+1|0,P=63-x|0;break r}return i=(A>>>0)/(b>>>0)|0,jn=0,i}if(x=Ri(b)-Ri(A)|0,x>>>0<31)break n;break t}if((b|0)==1)break e;return l=i,i=gf(b),g=i&31,32<=(i&63)>>>0?(x=0,i=a>>>g|0):(x=a>>>g|0,i=((1<<g)-1&a)<<32-g|l>>>g),jn=x,i}j=x+1|0,P=63-x|0}if(b=a,A=i,x=j&63,U=x&31,32<=(x&63)>>>0?(x=0,ne=b>>>U|0):(x=b>>>U|0,ne=((1<<U)-1&b)<<32-U|A>>>U),i=P&63,P=i&31,32<=(i&63)>>>0?(b=A<<P,i=0):(b=(1<<P)-1&A>>>32-P|a<<P,i=A<<P),a=b,j)for(A=g+-1|0,b=l+-1|0,(b|0)!=-1&&(A=A+1|0),P=b;b=ne,X=x<<1|b>>>31,x=b<<1|a>>>31,me=X,b=X,X=x,U=A-((P>>>0<x>>>0)+b|0)|0,b=U>>31,U=U>>31,x=l&U,ne=X-x|0,x=me-((g&b)+(X>>>0<x>>>0)|0)|0,b=a<<1|i>>>31,i=Ie|i<<1,a=b|je,me=0,X=U&1,Ie=X,j=j+-1|0,!!j;);return jn=me|(a<<1|i>>>31),X|i<<1}i=0,a=0}return jn=a,i}function cs(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(j=b<<1&-4,j){for(j=g+j|0;A=T[l|0],x=K(T[i|0],19077)>>>8|0,X=T[a|0],P=x+(K(X,33050)>>>8|0)|0,U=P+-17685|0,m[g+1|0]=(U>>>0<16384?U>>>6|0:P>>>0<17685?0:240)|15,P=x+(K(A,26149)>>>8|0)|0,U=P+-14234|0,A=x-(K(X,6419)>>>8|0)-(K(A,13320)>>>8)|0,x=A+8708|0,m[g|0]=(U>>>0<16384?U>>>6|0:P>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(A|0)<-8708?0:15),A=T[l|0],x=K(T[i+1|0],19077)>>>8|0,X=T[a|0],P=x+(K(X,33050)>>>8|0)|0,U=P+-17685|0,m[g+3|0]=(U>>>0<16384?U>>>6|0:P>>>0<17685?0:240)|15,P=x+(K(A,26149)>>>8|0)|0,U=P+-14234|0,A=x-(K(X,6419)>>>8|0)-(K(A,13320)>>>8)|0,x=A+8708|0,m[g+2|0]=(U>>>0<16384?U>>>6|0:P>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(A|0)<-8708?0:15),l=l+1|0,a=a+1|0,i=i+2|0,g=g+4|0,(j|0)!=(g|0););g=j}b&1&&(l=T[l|0],i=K(T[i|0],19077)>>>8|0,a=T[a|0],b=i+(K(a,33050)>>>8|0)|0,j=b+-17685|0,m[g+1|0]=(j>>>0<16384?j>>>6|0:b>>>0<17685?0:240)|15,j=g,g=i+(K(l,26149)>>>8|0)|0,b=g+-14234|0,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[j|0]=(b>>>0<16384?b>>>6|0:g>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(i|0)<-8708?0:15))}function fs(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;ne=qn-592|0,qn=ne,x=a+24|0,A=ho(x,1),U=ua(l,0,i<<2);e:{t:{r:{n:{if(A){if(l=ho(x,1),je=(ho(x,ho(x,1)?8:1)<<2)+U|0,st=1,h[je>>2]=st,(l|0)!=1)break n;je=(ho(x,8)<<2)+U|0,st=1,h[je>>2]=st;break n}if(X=ua(ne,0,76),A=ho(x,4)+4|0,(A|0)>19)break t;if(l=0,(A|0)>0)for(;je=(T[l+1232|0]<<2)+X|0,st=ho(x,3),h[je>>2]=st,l=l+1|0,(A|0)!=(l|0););if(!Ia(X+80|0,7,X,19)||(A=i,ho(x,1)&&(A=ho(x,(ho(x,3)<<1)+2|0)+2|0,(A|0)>(i|0))))break r;if((i|0)<1)break n;for(me=8,l=0;;){if(!A)break n;b=h[a+44>>2],(b|0)>=32&&(ge(x),b=h[a+44>>2]),Ie=b,P=h[a+28>>2],j=b&63,b=j&31,b=(X+80|0)+(((32<=(j&63)>>>0?P>>>b|0:((1<<b)-1&P)<<32-b|h[a+24>>2]>>>b)&127)<<2)|0,h[a+44>>2]=Ie+T[b|0],P=kn[b+2>>1];o:{if(P>>>0<=15){h[(l<<2)+U>>2]=P,me=P||me,l=l+1|0;break o}if(b=P+-16|0,j=ho(x,T[b+1251|0])+T[b+1254|0]|0,b=j+l|0,(b|0)>(i|0))break r;if((j|0)<1)break o;for(P=(P|0)==16?me:0;h[(l<<2)+U>>2]=P,l=l+1|0,(b|0)!=(l|0););l=b}if(A=A+-1|0,!((l|0)<(i|0)))break}}if(h[a+48>>2])break t;if(l=Ia(g,8,U,i),l)break e;break t}h[a>>2]=3}h[a>>2]=3,l=0}return qn=ne+592|0,l}function oo(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0;if(l>>>0>=512)return wu(i|0,a|0,l|0)|0,i|0;b=i+l|0;e:{if(!((i^a)&3)){t:{if((l|0)<1){l=i;break t}if(!(i&3)){l=i;break t}for(l=i;;){if(m[l|0]=T[a|0],a=a+1|0,l=l+1|0,l>>>0>=b>>>0)break t;if(!(l&3))break}}g=b&-4;t:{if(g>>>0<64||(x=g+-64|0,l>>>0>x>>>0))break t;for(;h[l>>2]=h[a>>2],h[l+4>>2]=h[a+4>>2],h[l+8>>2]=h[a+8>>2],h[l+12>>2]=h[a+12>>2],h[l+16>>2]=h[a+16>>2],h[l+20>>2]=h[a+20>>2],h[l+24>>2]=h[a+24>>2],h[l+28>>2]=h[a+28>>2],h[l+32>>2]=h[a+32>>2],h[l+36>>2]=h[a+36>>2],h[l+40>>2]=h[a+40>>2],h[l+44>>2]=h[a+44>>2],h[l+48>>2]=h[a+48>>2],h[l+52>>2]=h[a+52>>2],h[l+56>>2]=h[a+56>>2],h[l+60>>2]=h[a+60>>2],a=a- -64|0,l=l- -64|0,l>>>0<=x>>>0;);}if(l>>>0>=g>>>0)break e;for(;h[l>>2]=h[a>>2],a=a+4|0,l=l+4|0,l>>>0<g>>>0;);break e}if(b>>>0<4){l=i;break e}if(g=b+-4|0,g>>>0<i>>>0){l=i;break e}for(l=i;m[l|0]=T[a|0],m[l+1|0]=T[a+1|0],m[l+2|0]=T[a+2|0],m[l+3|0]=T[a+3|0],a=a+4|0,l=l+4|0,l>>>0<=g>>>0;);}if(l>>>0<b>>>0)for(;m[l|0]=T[a|0],a=a+1|0,l=l+1|0,(b|0)!=(l|0););return i|0}function Es(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(A=b&-2,A){for(A=K(A,3)+g|0;P=T[l|0],x=K(T[i|0],19077)>>>8|0,X=T[a|0],U=x+(K(X,33050)>>>8|0)|0,j=U+-17685|0,m[g+2|0]=j>>>0<16384?j>>>6|0:U>>>0<17685?0:255,U=x+(K(P,26149)>>>8|0)|0,j=U+-14234|0,m[g|0]=j>>>0<16384?j>>>6|0:U>>>0<14234?0:255,P=x-(K(X,6419)>>>8|0)-(K(P,13320)>>>8)|0,x=P+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,P=T[l|0],x=K(T[i+1|0],19077)>>>8|0,X=T[a|0],U=x+(K(X,33050)>>>8|0)|0,j=U+-17685|0,m[g+5|0]=j>>>0<16384?j>>>6|0:U>>>0<17685?0:255,U=x+(K(P,26149)>>>8|0)|0,j=U+-14234|0,m[g+3|0]=j>>>0<16384?j>>>6|0:U>>>0<14234?0:255,P=x-(K(X,6419)>>>8|0)-(K(P,13320)>>>8)|0,x=P+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,l=l+1|0,a=a+1|0,i=i+2|0,g=g+6|0,(A|0)!=(g|0););g=A}b&1&&(l=T[l|0],i=K(T[i|0],19077)>>>8|0,a=T[a|0],b=i+(K(a,33050)>>>8|0)|0,A=b+-17685|0,m[g+2|0]=A>>>0<16384?A>>>6|0:b>>>0<17685?0:255,b=i+(K(l,26149)>>>8|0)|0,A=b+-14234|0,m[g|0]=A>>>0<16384?A>>>6|0:b>>>0<14234?0:255,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function al(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if(A=b&-2,A){for(A=K(A,3)+g|0;P=T[a|0],x=K(T[i|0],19077)>>>8|0,X=T[l|0],U=x+(K(X,26149)>>>8|0)|0,j=U+-14234|0,m[g+2|0]=j>>>0<16384?j>>>6|0:U>>>0<14234?0:255,U=x+(K(P,33050)>>>8|0)|0,j=U+-17685|0,m[g|0]=j>>>0<16384?j>>>6|0:U>>>0<17685?0:255,P=x-(K(P,6419)>>>8|0)-(K(X,13320)>>>8)|0,x=P+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,P=T[a|0],x=K(T[i+1|0],19077)>>>8|0,X=T[l|0],U=x+(K(X,26149)>>>8|0)|0,j=U+-14234|0,m[g+5|0]=j>>>0<16384?j>>>6|0:U>>>0<14234?0:255,U=x+(K(P,33050)>>>8|0)|0,j=U+-17685|0,m[g+3|0]=j>>>0<16384?j>>>6|0:U>>>0<17685?0:255,P=x-(K(P,6419)>>>8|0)-(K(X,13320)>>>8)|0,x=P+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,l=l+1|0,a=a+1|0,i=i+2|0,g=g+6|0,(A|0)!=(g|0););g=A}b&1&&(a=T[a|0],i=K(T[i|0],19077)>>>8|0,l=T[l|0],b=i+(K(l,26149)>>>8|0)|0,A=b+-14234|0,m[g+2|0]=A>>>0<16384?A>>>6|0:b>>>0<14234?0:255,b=i+(K(a,33050)>>>8|0)|0,A=b+-17685|0,m[g|0]=A>>>0<16384?A>>>6|0:b>>>0<17685?0:255,i=i-(K(a,6419)>>>8|0)-(K(l,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Ql(i,a){var l=0,g=0,b=0;e:{if(!i)break e;if(!a){if(h[i>>2])break e;return h[i>>2]=2,h[i+4>>2]=0,h[i+8>>2]=5281,0}if(!h[i+4>>2]&&!ea(i,a))break e;t:{if(!Xs(i,a)){r:{if(!Au(i,a))break r;h[i+2300>>2]=0;n:{if(h[i+308>>2]>=1)for(b=i+12|0;;){if(g=h[i+312>>2],!ks(b,i))break n;if(h[i+2296>>2]<h[i+288>>2])for(l=(K(l&g,28)+i|0)+316|0;;){if(!Sa(i,l)){if(l=0,h[i>>2])break r;h[i>>2]=7,h[i+4>>2]=0,h[i+8>>2]=5412;break r}if(g=h[i+2296>>2]+1|0,h[i+2296>>2]=g,!((g|0)<h[i+288>>2]))break}if(l=h[i+2256>>2]+-2|0,m[l|0]=0,m[l+1|0]=0,h[i+2296>>2]=0,h[i+2248>>2]=0,!Oc(i,a)){if(l=0,h[i>>2])break r;h[i>>2]=6,h[i+4>>2]=0,h[i+8>>2]=5447;break r}if(l=h[i+2300>>2]+1|0,h[i+2300>>2]=l,!((l|0)<h[i+308>>2]))break}o:{if(h[i+148>>2]<1||tt[h[2559]](i+124|0)|0)break o;l=0;break r}l=1;break r}if(l=0,h[i>>2])break r;h[i>>2]=7,h[i+4>>2]=0,h[i+8>>2]=5371}if(on(i,a)&l)break t}return tt[h[2562]](i+124|0),W0(i),$i(h[i+2288>>2]),h[i+2288>>2]=0,h[i+2292>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,h[i+4>>2]=0,0}h[i+4>>2]=0,l=1}return l}function Eu(i){var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0;for(a=i+12|0,P=Mi(a,7),Mi(a,1)&&(ne=ls(a,4)),Mi(a,1)&&(me=ls(a,4)),Mi(a,1)&&(Ie=ls(a,4)),Mi(a,1)&&(je=ls(a,4)),Mi(a,1)&&(st=ls(a,4)),At=h[i+104>>2],A=i+776|0,U=A+24|0,j=A+16|0,X=A+8|0;;){e:{t:{if(At){a=m[(i+x|0)+116|0]+(h[i+112>>2]?0:P)|0;break t}if(a=P,!x)break t;l=h[U+4>>2],a=(x<<5)+i|0,h[a+800>>2]=h[U>>2],h[a+804>>2]=l,l=h[j+4>>2],h[a+792>>2]=h[j>>2],h[a+796>>2]=l,l=h[X+4>>2],h[a+784>>2]=h[X>>2],h[a+788>>2]=l,l=h[A+4>>2],h[a+776>>2]=h[A>>2],h[a+780>>2]=l;break e}l=(x<<5)+i|0,b=a+st|0,h[l+800>>2]=b,g=a+je|0,g=(g|0)<117?g:117,h[l+792>>2]=T[((g|0)>0?g:0)+4448|0],g=(a|0)<127?a:127,h[l+780>>2]=kn[(((g|0)>0?g:0)<<1)+4576>>1],g=a+ne|0,g=(g|0)<127?g:127,h[l+776>>2]=T[((g|0)>0?g:0)+4448|0],b=(b|0)<127?b:127,h[l+796>>2]=kn[(((b|0)>0?b:0)<<1)+4576>>1],b=a+me|0,b=(b|0)<127?b:127,h[l+784>>2]=T[((b|0)>0?b:0)+4448|0]<<1,a=a+Ie|0,a=(a|0)<127?a:127,a=K(kn[(((a|0)>0?a:0)<<1)+4576>>1],101581),h[l+788>>2]=a>>>0<524288?8:a>>>16|0}if(x=x+1|0,(x|0)==4)break}}function Ca(i,a,l,g,b,x,A){var P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,el=0,au=0,Uc=0;if((g|0)>=1)for(di=b<<1|1,Ni=K(a,3),Ua=0-a|0,el=K(a,-3),au=0-(a<<2)|0,Lt=a<<1,Uc=0-Lt|0,Qt=h[2547],j=h[2548],lr=h[2546],X=h[2549];;){b=g,Nr=i+Uc|0,U=T[Nr|0],Sr=i+a|0,je=T[Sr|0],P=U-je|0,st=i+Ua|0,g=T[st|0],Ie=T[i|0];e:{if((T[P+X|0]+(T[X+(g-Ie|0)|0]<<2)|0)>(di|0)||(Jr=i+el|0,me=T[Jr|0],T[X+(T[i+au|0]-me|0)|0]>(x|0)|T[X+(me-U|0)|0]>(x|0))||(ne=T[X+(U-g|0)|0],(ne|0)>(x|0))||(hn=i+Lt|0,At=T[hn|0],T[X+(T[i+Ni|0]-At|0)|0]>(x|0)|T[X+(At-je|0)|0]>(x|0))||(Sn=T[X+(je-Ie|0)|0],(Sn|0)>(x|0)))break e;if(P=m[P+lr|0]+K(Ie-g|0,3)|0,!((Sn|0)<=(A|0)&&(ne|0)<=(A|0))){U=m[(P+4>>3)+Qt|0],m[st|0]=T[(m[(P+3>>3)+Qt|0]+g|0)+j|0],m[i|0]=T[(Ie-U|0)+j|0];break e}ne=me,P=m[P+lr|0],me=K(P,9)+63>>7,m[Jr|0]=T[(ne+me|0)+j|0],ne=U,U=K(P,18)+63>>7,m[Nr|0]=T[(ne+U|0)+j|0],ne=g,g=K(P,27)+63>>7,m[st|0]=T[(ne+g|0)+j|0],m[i|0]=T[(Ie-g|0)+j|0],m[Sr|0]=T[(je-U|0)+j|0],m[hn|0]=T[(At-me|0)+j|0]}if(g=b+-1|0,i=i+l|0,!((b|0)>1))break}}function Pl(i,a,l){var g=0,b=0,x=0,A=0,P=0,U=0;if(g=ul(1,0,272),!g)return 0;h[g>>2]=0,h[g+4>>2]=2,An(),x=h[i>>2],h[g+100>>2]=x,b=h[i+4>>2],h[g+8>>2]=i+24,h[g+104>>2]=b,h[i+28>>2]=b,h[i+24>>2]=x,h[i- -64>>2]=i,h[g>>2]=0,fe(g+24|0,a,l);e:{t:{r:{if(!gn(h[i>>2],h[i+4>>2],1,g,0))break r;n:{o:{if(h[g+176>>2]!=1|h[g+180>>2]!=3|h[g+120>>2]>0)break o;if(l=h[g+164>>2],(l|0)<1)break n;for(a=h[g+168>>2],b=0;;){if(x=a+K(b,548)|0,T[h[x+4>>2]]|T[h[x+8>>2]]|T[h[x+12>>2]])break o;if(b=b+1|0,(l|0)==(b|0))break}break n}if(h[i+132>>2]=0,a=h[g+104>>2],l=a,b=a>>31,a=h[g+100>>2],A=Ei(l,b,a,a>>31),l=jn,U=g,b=h[i>>2],a=b>>31,a=a<<4|b>>>28,x=b<<4,P=b&65535,b=P,x=x+b|0,x>>>0<b>>>0&&(a=a+1|0),b=x+A|0,a=a+l|0,a=La(b,b>>>0<x>>>0?a+1|0:a,4),h[U+16>>2]=a,a)break t;h[g+20>>2]=0,h[g>>2]=1;break r}if(h[i+132>>2]=1,h[g+20>>2]=0,a=h[g+104>>2],l=a,b=a>>31,a=h[g+100>>2],a=La(Ei(l,b,a,a>>31),jn,1),h[g+16>>2]=a,a)break e;h[g>>2]=1}return jo(g),$i(g),0}h[g+20>>2]=(a+(A<<2)|0)+(P<<2)}return h[i+20>>2]=g,1}function ba(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0;for(me=0-a|0,X=a<<2,U=X+i|0,Ie=0-(a<<1)|0,je=l<<1|1,i=h[2548],l=h[2547],st=h[2546],ne=h[2549];g=b+U|0,A=g+me|0,j=T[A|0],P=T[g|0],x=T[g+Ie|0]-T[a+g|0]|0,((T[ne+(j-P|0)|0]<<2)+T[x+ne|0]|0)<=(je|0)&&(x=m[x+st|0]+K(P-j|0,3)|0,At=m[(x+4>>3)+l|0],m[A|0]=T[(j+m[(x+3>>3)+l|0]|0)+i|0],m[g|0]=T[(P-At|0)+i|0]),b=b+1|0,(b|0)!=16;);for(U=U+X|0,b=0;g=b+U|0,A=g+me|0,j=T[A|0],P=T[g|0],x=T[g+Ie|0]-T[a+g|0]|0,((T[ne+(j-P|0)|0]<<2)+T[x+ne|0]|0)<=(je|0)&&(x=m[x+st|0]+K(P-j|0,3)|0,At=m[(x+4>>3)+l|0],m[A|0]=T[(j+m[(x+3>>3)+l|0]|0)+i|0],m[g|0]=T[(P-At|0)+i|0]),b=b+1|0,(b|0)!=16;);for(j=U+X|0,b=0;g=b+j|0,P=g+me|0,X=T[P|0],U=T[g|0],A=T[g+Ie|0]-T[a+g|0]|0,((T[ne+(X-U|0)|0]<<2)+T[A+ne|0]|0)<=(je|0)&&(A=m[A+st|0]+K(U-X|0,3)|0,x=m[(A+4>>3)+l|0],m[P|0]=T[(X+m[(A+3>>3)+l|0]|0)+i|0],m[g|0]=T[(U-x|0)+i|0]),b=b+1|0,(b|0)!=16;);}function Dn(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;for(j=i+4|0,me=l<<1|1,l=h[2548],X=h[2547],Ie=h[2546],ne=h[2549];g=j+K(a,b)|0,A=g+-1|0,P=T[A|0],U=T[g|0],x=T[g+-2|0]-T[g+1|0]|0,((T[ne+(P-U|0)|0]<<2)+T[x+ne|0]|0)<=(me|0)&&(x=m[x+Ie|0]+K(U-P|0,3)|0,je=m[(x+4>>3)+X|0],m[A|0]=T[(P+m[(x+3>>3)+X|0]|0)+l|0],m[g|0]=T[(U-je|0)+l|0]),b=b+1|0,(b|0)!=16;);for(j=i+8|0,b=0;g=j+K(a,b)|0,A=g+-1|0,P=T[A|0],U=T[g|0],x=T[g+-2|0]-T[g+1|0]|0,((T[ne+(P-U|0)|0]<<2)+T[x+ne|0]|0)<=(me|0)&&(x=m[x+Ie|0]+K(U-P|0,3)|0,je=m[(x+4>>3)+X|0],m[A|0]=T[(P+m[(x+3>>3)+X|0]|0)+l|0],m[g|0]=T[(U-je|0)+l|0]),b=b+1|0,(b|0)!=16;);for(U=i+12|0,b=0;i=U+K(a,b)|0,j=i+-1|0,g=T[j|0],P=T[i|0],A=T[i+-2|0]-T[i+1|0]|0,((T[ne+(g-P|0)|0]<<2)+T[A+ne|0]|0)<=(me|0)&&(A=m[A+Ie|0]+K(P-g|0,3)|0,x=m[(A+4>>3)+X|0],m[j|0]=T[(g+m[(A+3>>3)+X|0]|0)+l|0],m[i|0]=T[(P-x|0)+l|0]),b=b+1|0,(b|0)!=16;);}function Fo(i,a){i=i|0,a=a|0;var l=0;i=Pr[i>>1]+4>>3,l=i+T[a|0]|0,l=(l|0)>0?l:0,m[a|0]=(l|0)<255?l:255,l=i+T[a+1|0]|0,l=(l|0)>0?l:0,m[a+1|0]=(l|0)<255?l:255,l=i+T[a+2|0]|0,l=(l|0)>0?l:0,m[a+2|0]=(l|0)<255?l:255,l=i+T[a+3|0]|0,l=(l|0)>0?l:0,m[a+3|0]=(l|0)<255?l:255,l=i+T[a+32|0]|0,l=(l|0)>0?l:0,m[a+32|0]=(l|0)<255?l:255,l=i+T[a+33|0]|0,l=(l|0)>0?l:0,m[a+33|0]=(l|0)<255?l:255,l=i+T[a+34|0]|0,l=(l|0)>0?l:0,m[a+34|0]=(l|0)<255?l:255,l=i+T[a+35|0]|0,l=(l|0)>0?l:0,m[a+35|0]=(l|0)<255?l:255,l=i+T[a+64|0]|0,l=(l|0)>0?l:0,m[a+64|0]=(l|0)<255?l:255,l=i+T[a+65|0]|0,l=(l|0)>0?l:0,m[a+65|0]=(l|0)<255?l:255,l=i+T[a+66|0]|0,l=(l|0)>0?l:0,m[a+66|0]=(l|0)<255?l:255,l=i+T[a+67|0]|0,l=(l|0)>0?l:0,m[a+67|0]=(l|0)<255?l:255,l=i+T[a+96|0]|0,l=(l|0)>0?l:0,m[a+96|0]=(l|0)<255?l:255,l=i+T[a+97|0]|0,l=(l|0)>0?l:0,m[a+97|0]=(l|0)<255?l:255,l=i+T[a+98|0]|0,l=(l|0)>0?l:0,m[a+98|0]=(l|0)<255?l:255,i=i+T[a+99|0]|0,i=(i|0)>0?i:0,m[a+99|0]=(i|0)<255?i:255}function Ki(i,a,l,g,b,x,A){var P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0;if((g|0)>=1)for(Sr=b<<1|1,Jr=K(a,3),hn=0-a|0,Sn=K(a,-3),di=0-(a<<2)|0,Lt=a<<1,Ni=0-Lt|0,Ua=h[2546],X=h[2548],Ie=h[2547],j=h[2549];;){b=g,Qt=i+Ni|0,U=T[Qt|0],lr=i+a|0,ne=T[lr|0],je=U-ne|0,At=i+hn|0,g=T[At|0],me=T[i|0];e:{if((T[je+j|0]+(T[j+(g-me|0)|0]<<2)|0)>(Sr|0)||(P=T[i+Sn|0],T[j+(T[i+di|0]-P|0)|0]>(x|0)|T[j+(P-U|0)|0]>(x|0))||(st=T[j+(U-g|0)|0],(st|0)>(x|0))||(P=T[i+Lt|0],T[j+(T[i+Jr|0]-P|0)|0]>(x|0)|T[j+(P-ne|0)|0]>(x|0))||(Nr=T[j+(ne-me|0)|0],(Nr|0)>(x|0)))break e;if(P=K(me-g|0,3),!((Nr|0)<=(A|0)&&(st|0)<=(A|0))){U=m[je+Ua|0]+P|0,ne=m[(U+4>>3)+Ie|0],m[At|0]=T[(m[(U+3>>3)+Ie|0]+g|0)+X|0],m[i|0]=T[(me-ne|0)+X|0];break e}je=m[(P+3>>3)+Ie|0],st=U,U=m[(P+4>>3)+Ie|0],P=U+1>>1,m[Qt|0]=T[(st+P|0)+X|0],m[At|0]=T[(g+je|0)+X|0],m[i|0]=T[(me-U|0)+X|0],m[lr|0]=T[(ne-P|0)+X|0]}if(g=b+-1|0,i=i+l|0,!((b|0)>1))break}}function Bo(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;e:{t:switch(l|0){case 0:tt[h[2734]](i,a,g);return;case 1:tt[h[2735]](i,a,g);return;case 7:tt[h[2735]](i,a,g),tt[h[2664]](g,0,a,1,0);return;case 2:tt[h[2736]](i,a,g);return;case 3:oo(g,i,a<<2);return;case 8:P=oo(g,i,a<<2),U=0,j=a,X=1,ne=0,A=h[2664],tt[A](P|0,U|0,j|0,X|0,ne|0);return;case 4:if((a|0)<1)break e;for(l=(a<<2)+i|0;a=h[i>>2],a=a<<24|a<<8&16711680|(a>>>8&65280|a>>>24),m[g|0]=a,m[g+1|0]=a>>>8,m[g+2|0]=a>>>16,m[g+3|0]=a>>>24,g=g+4|0,i=i+4|0,i>>>0<l>>>0;);break e;case 9:if((a|0)>=1)for(x=(a<<2)+i|0,l=g;b=h[i>>2],b=b<<24|b<<8&16711680|(b>>>8&65280|b>>>24),m[l|0]=b,m[l+1|0]=b>>>8,m[l+2|0]=b>>>16,m[l+3|0]=b>>>24,l=l+4|0,i=i+4|0,i>>>0<x>>>0;);tt[h[2664]](g,1,a,1,0);return;case 5:tt[h[2737]](i,a,g);return;case 10:tt[h[2737]](i,a,g),tt[h[2665]](g,a,1,0);return;case 6:break t;default:break e}tt[h[2738]](i,a,g)}}function ga(i,a,l){var g=0,b=0,x=0;g=qn-160|0,qn=g,h[g+16>>2]=1,h[g+12>>2]=a,h[g+8>>2]=i,h[g+156>>2]=0,b=g,x=El(i,a,0,0,0,g+156|0,0,g+8|0),h[b+48>>2]=x,!h[g+156>>2]|(h[g+48>>2]!=7?h[g+48>>2]:0)||(h[g+48>>2]=4),i=h[g+48>>2];e:{if(i)break e;Od(g+48|0),i=h[g+20>>2],h[g+112>>2]=i+h[g+8>>2],h[g+108>>2]=h[g+12>>2]-i,Vs(l,g+48|0);t:{if(!h[g+40>>2]){if(a=Mo(),!a){i=1;break e}h[a+2348>>2]=h[g+24>>2],h[a+2352>>2]=h[g+28>>2];r:{if(ea(a,g+48|0)&&(i=Jl(h[g+48>>2],h[g+52>>2],h[l+20>>2],h[l>>2]),i||(h[a+148>>2]=0,w0(h[l+20>>2],a),i=0,Ql(a,g+48|0))))break r;i=h[a>>2]}Wa(a);break t}a=ul(1,0,272),i=0;r:{if(!a)break r;h[a>>2]=0,h[a+4>>2]=2,An(),i=a}if(a=i,!a){i=1;break e}r:{if(Le(a,g+48|0)&&(i=Jl(h[g+48>>2],h[g+52>>2],h[l+20>>2],h[l>>2]),i||(i=0,zc(a))))break r;i=h[a>>2]}_h(a)}if(i){Nl(h[l>>2]);break e}if(i=0,a=h[l+20>>2],!a|!h[a+48>>2])break e;i=Ue(h[l>>2])}return qn=g+160|0,i}function An(){var i=0;i=h[2673],(i|0)!=h[2551]&&(h[2771]=81,h[2770]=81,h[2769]=82,h[2768]=83,h[2767]=84,h[2766]=85,h[2765]=86,h[2764]=87,h[2763]=88,h[2762]=89,h[2761]=90,h[2760]=91,h[2759]=92,h[2758]=93,h[2757]=94,h[2756]=81,h[2803]=81,h[2802]=81,h[2801]=82,h[2800]=83,h[2799]=84,h[2798]=85,h[2797]=86,h[2796]=87,h[2795]=88,h[2794]=89,h[2793]=90,h[2792]=91,h[2791]=92,h[2790]=93,h[2789]=94,h[2788]=81,h[2755]=95,h[2754]=95,h[2753]=96,h[2752]=97,h[2751]=98,h[2750]=99,h[2749]=100,h[2748]=101,h[2747]=102,h[2746]=103,h[2745]=104,h[2744]=105,h[2743]=106,h[2742]=107,h[2741]=108,h[2740]=95,h[2787]=95,h[2786]=95,h[2785]=96,h[2784]=97,h[2783]=98,h[2782]=99,h[2781]=100,h[2780]=101,h[2779]=102,h[2778]=103,h[2777]=104,h[2776]=105,h[2775]=106,h[2774]=107,h[2773]=108,h[2772]=95,h[2733]=109,h[2804]=110,h[2735]=111,h[2734]=112,h[2736]=113,h[2737]=114,h[2738]=115,h[2805]=116,h[2732]=117,h[2551]=i)}function Ss(i,a,l){var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0;b=qn-16|0,qn=b,U=h[a+4>>2],j=h[a>>2];e:{t:{if(!i){h[a+72>>2]=0,g=j,x=U;break t}if(A=h[i+8>>2],h[a+72>>2]=(A|0)>0,g=j,x=U,(A|0)<1)break t;if(A=0,g=h[i+16>>2],l=l>>>0>10,P=l?g&-2:g,x=h[i+24>>2],(P+x|0)>(U|0)||(g=h[i+12>>2],X=l?g&-2:g,g=h[i+20>>2],(x|0)<1|(X+g|0)>(j|0)|((g|0)<1|(P|X)<0)))break e}if(h[a+84>>2]=P,h[a+76>>2]=X,h[a+16>>2]=x,h[a+12>>2]=g,h[a+88>>2]=P+x,h[a+80>>2]=g+X,i){l=h[i+28>>2],h[a+92>>2]=(l|0)>0,A=1,P=1;t:{if((l|0)>=1){if(h[b+12>>2]=h[i+32>>2],h[b+8>>2]=h[i+36>>2],!qe(g,x,b+12|0,b+8|0))break t;h[a+96>>2]=h[b+12>>2],h[a+100>>2]=h[b+8>>2],P=!h[a+92>>2]}if(h[a+68>>2]=h[i>>2]!=0,h[a+56>>2]=!h[i+4>>2],P)break e;i=0,i=h[a+96>>2]<((K(j,3)|0)/4|0)?h[a+100>>2]<((K(U,3)|0)/4|0):i,h[a+56>>2]=0,h[a+68>>2]=i;break e}A=0;break e}h[a+68>>2]=0,h[a+92>>2]=0,A=1,h[a+56>>2]=1}return qn=b+16|0,A}function Yu(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;if(g=h[i+108>>2],A=a-g|0,(A|0)>=1)for(l=h[i+100>>2],j=h[i+16>>2]+(K(l,g)<<2)|0;;){P=(A|0)<16?A:16,me=P+g|0,b=h[i+8>>2],X=h[b>>2],Ie=K(X,P),ne=h[b+40>>2],b=h[ne+136>>2]+K(g,X)|0,U=h[i+20>>2],x=h[i+176>>2];e:{if((x|0)>=1){if(l=x+-1|0,Yl((K(l,20)+i|0)+180|0,g,me,j,U),(x|0)<2)break e;for(;x=l+-1|0,Yl((K(x,20)+i|0)+180|0,g,me,U,U),je=(l|0)>1,l=x,!!je;);break e}if((U|0)==(j|0))break e;oo(U,j,K(l,P)<<2)}if(tt[h[2669]](U,b,Ie),x=h[ne+12>>2],x){l=h[ne+140>>2];e:{if((A|0)<1)break e;if(tt[h[(x<<2)+10912>>2]](l,b,b,X),(P|0)==1){l=b;break e}for(g=g+1|0;l=b+X|0,tt[h[(h[ne+12>>2]<<2)+10912>>2]](b,l,l,X),b=l,g=g+1|0,(me|0)!=(g|0););}h[ne+140>>2]=l}if(l=h[i+100>>2],j=(K(l,P)<<2)+j|0,g=me,A=A-P|0,!((A|0)>0))break}h[i+108>>2]=a,h[i+116>>2]=a}function Ju(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0;if(A=h[i+16>>2],(A|0)<1)return 0;for(ne=A+1>>1,l=h[a+24>>2];;){g=l,l=h[i+32>>2],x=wa(g,A-P|0,h[i+20>>2]+K(l,P)|0,l),l=ne-U|0,_n(h[a+28>>2],l)&&(b=h[i+36>>2],b=wa(h[a+28>>2],l,h[i+24>>2]+K(b,U)|0,b),g=l,l=h[i+36>>2],wa(h[a+32>>2],g,h[i+28>>2]+K(l,U)|0,l),U=b+U|0),P=x+P|0,x=h[a>>2],g=h[x>>2],b=0,l=h[a+24>>2];e:{if(h[l+64>>2]>=h[l+56>>2])break e;for(me=h[(g<<2)+11312>>2],g=h[x+16>>2]+K(h[x+20>>2],h[a+16>>2]+j|0)|0;;){if(h[l+24>>2]>0||(X=h[a+28>>2],h[X+64>>2]>=h[X+56>>2]|h[X+24>>2]>0))break e;if(Gr(l),Gr(h[a+28>>2]),Gr(h[a+32>>2]),l=h[a+24>>2],tt[me|0](h[l+68>>2],h[h[a+28>>2]+68>>2],h[h[a+32>>2]+68>>2],g,h[l+52>>2]),b=b+1|0,g=h[x+20>>2]+g|0,l=h[a+24>>2],!(h[l+64>>2]<h[l+56>>2]))break}}if(j=b+j|0,!((A|0)>(P|0)))break}return j|0}function Nc(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0;l=qn-240|0,qn=l,b=l+40|0,b?(vf(ua(b,0,200)+40|0),b=1):b=0;e:{if(!b){lo(h[2536]);break e}T[10640]||(Ws(32)|0,m[10640]=1),b=l+80|0;t:{if(Qi(i,a,l+40|0))break t;if(x=Mc(h[l+40>>2],h[l+44>>2],32,0)|0,!x){i=h[l+44>>2],h[l>>2]=h[l+40>>2],h[l+4>>2]=i,uo(h[2536],1051,l),x=0;break t}if(g=Al(0,h[l+40>>2],h[l+44>>2],32,255,65280,16711680,-16777216)|0,!g){i=h[l+44>>2],h[l+16>>2]=h[l+40>>2],h[l+20>>2]=i,uo(h[2536],1092,l+16|0),g=0;break t}if(Xa(g|0)|0,h[l+80>>2]=1,h[l+84>>2]=h[g+8>>2],h[l+88>>2]=h[g+12>>2],h[l+96>>2]=h[g+20>>2],h[l+100>>2]=h[g+16>>2],A=h[g+12>>2],P=h[g+16>>2],h[l+92>>2]=1,h[l+104>>2]=K(A,P),i=os(i,a,l+40|0),i){h[l+32>>2]=i,A=0,uo(h[2536],1130,l+32|0);break t}if(hc(g|0),A=0,vu(g|0,0,x|0,0)|0)break t;A=!(Dc(x|0)|0)}_u(g|0),_u(x|0),Nl(b)}return qn=l+240|0,A|0}function e0(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0;if((g|0)>=2)for(A=g>>1,U=(A|0)>1?A:1,A=0;;){x=A<<3,P=h[(x|4)+i>>2],x=h[i+x>>2],j=(P>>>7&510)+(x>>>7&510)|0,X=(P>>>15&510)+(x>>>15&510)|0,x=(P<<1&510)+(x<<1&510)|0,P=((K(j,-24116)+K(X,28800)|0)+K(x,-4684)|0)+33685504>>18,x=((K(j,-19081)+K(X,-9719)|0)+K(x,28800)|0)+33685504>>18;e:{if(b){m[a+A|0]=x,m[l+A|0]=P;break e}j=a+A|0,m[j|0]=(x+T[j|0]|0)+1>>>1,x=l+A|0,m[x|0]=(P+T[x|0]|0)+1>>>1}if(A=A+1|0,(U|0)==(A|0))break}if(g&1){if(i=h[(U<<3)+i>>2],g=i>>>6&1020,A=i>>>14&1020,P=i<<2&1020,i=((K(g,-24116)+K(A,28800)|0)+K(P,-4684)|0)+33685504>>18,g=((K(g,-19081)+K(A,-9719)|0)+K(P,28800)|0)+33685504>>18,b){m[a+U|0]=g,m[l+U|0]=i;return}a=a+U|0,m[a|0]=(g+T[a|0]|0)+1>>>1,a=l+U|0,m[a|0]=(i+T[a|0]|0)+1>>>1}}function t0(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0;b=h[i+16>>2],j=h[i+12>>2],Ie=(j+1|0)/2|0,X=h[a>>2],l=h[X+20>>2],A=h[i+8>>2],P=h[X+16>>2]+K(A,l)|0,ne=h[(h[X>>2]<<2)+11248>>2],g=h[i+28>>2],x=h[i+24>>2],U=h[i+20>>2];e:{if(!A){tt[ne|0](U,0,x,g,x,g,P,0,j),l=b;break e}tt[ne|0](h[a+4>>2],U,h[a+8>>2],h[a+12>>2],x,g,P-l|0,P,j),l=b+1|0}je=l,me=b+A|0;e:{if((b|0)<3){l=x,b=g;break e}for(A=A+2|0;l=h[i+32>>2],U=(l<<1)+U|0,At=U-l|0,st=x,Lt=g,x=h[i+36>>2],l=st+x|0,b=g+x|0,g=h[X+20>>2],P=(g<<1)+P|0,tt[ne|0](At,U,st,Lt,l,b,P-g|0,P,j),g=b,x=l,A=A+2|0,(A|0)<(me|0););}return g=h[i+32>>2]+U|0,(h[i+84>>2]+me|0)<h[i+88>>2]?(oo(h[a+4>>2],g,j),oo(h[a+8>>2],l,Ie),oo(h[a+12>>2],b,Ie),je+-1|0):(me&1||tt[ne|0](g,0,l,b,l,b,h[X+20>>2]+P|0,0,j),je|0)}function w0(i,a){var l=0,g=0,b=0;e:{if(!i)break e;l=h[i+44>>2];t:{if((l|0)<0||(g=255,(l|0)<=100&&(l=K(l,255),g=(l|0)/100|0,(l|0)<100)))break t;l=h[a+800>>2];r:{if((l|0)>=12){b=h[a+804>>2];break r}b=K(T[((l|0)>0?l:0)+4832|0],g)>>3,h[a+804>>2]=b}l=h[a+832>>2];r:{if((l|0)>=12){l=h[a+836>>2];break r}l=K(T[((l|0)>0?l:0)+4832|0],g)>>3,h[a+836>>2]=l}b=l|b,l=h[a+864>>2];r:{if((l|0)>=12){l=h[a+868>>2];break r}l=K(T[((l|0)>0?l:0)+4832|0],g)>>3,h[a+868>>2]=l}b=l|b,l=h[a+896>>2];r:{if((l|0)>=12){g=h[a+900>>2];break r}g=K(T[((l|0)>0?l:0)+4832|0],g)>>3,h[a+900>>2]=g}if(!(g|b))break t;g=a+544|0,oo(g+8|0,9424,220),h[g>>2]=0,h[g+4>>2]=31,h[g+228>>2]=256,h[a+540>>2]=1}if(i=h[i+52>>2],h[a+2372>>2]=i,(i|0)>=101){h[a+2372>>2]=100;return}if((i|0)>-1)break e;h[a+2372>>2]=0}}function Mi(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((a|0)<1)return 0;for(l=h[i+8>>2],P=h[i+4>>2];;){e:{if((l|0)>-1)break e;if(g=h[i+12>>2],g>>>0<ii[i+20>>2]){b=T[g|0]|T[g+1|0]<<8|(T[g+2|0]<<16|T[g+3|0]<<24),h[i+12>>2]=g+3,l=l+24|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8;break e}if(g>>>0<ii[i+16>>2]){h[i+12>>2]=g+1,l=l+8|0,h[i+8>>2]=l,h[i>>2]=T[g|0]|h[i>>2]<<8;break e}if(!h[i+24>>2]){h[i+24>>2]=1,l=l+8|0,h[i+8>>2]=l,h[i>>2]=h[i>>2]<<8;break e}l=0,h[i+8>>2]=0}g=a+-1|0,X=i,ne=l,x=h[i>>2],U=x>>>l|0,A=P>>>1&16777215;e:{if(U>>>0>A>>>0){h[i>>2]=x+((A^-1)<<l),x=P-A|0;break e}x=A+1|0}if(b=Ri(x)^24,l=ne-b|0,h[X+8>>2]=l,P=(x<<b)+-1|0,h[i+4>>2]=P,j=(U>>>0>A>>>0)<<g|j,b=(a|0)>1,a=g,!b)break}return j}function Rc(i,a,l){var g=0;e:{if((i|0)==(a|0))break e;if((a-i|0)-l>>>0<=0-(l<<1)>>>0)return oo(i,a,l);g=(i^a)&3;t:{r:{if(i>>>0<a>>>0){if(g){g=i;break t}if(!(i&3)){g=i;break r}for(g=i;;){if(!l)break e;if(m[g|0]=T[a|0],a=a+1|0,l=l+-1|0,g=g+1|0,!(g&3))break}break r}n:{if(g)break n;if(i+l&3)for(;;){if(!l)break e;if(l=l+-1|0,g=l+i|0,m[g|0]=T[a+l|0],!(g&3))break}if(l>>>0<=3)break n;for(;l=l+-4|0,h[l+i>>2]=h[a+l>>2],l>>>0>3;);}if(!l)break e;for(;l=l+-1|0,m[l+i|0]=T[a+l|0],!!l;);break e}if(l>>>0<=3)break t;for(;h[g>>2]=h[a>>2],a=a+4|0,g=g+4|0,l=l+-4|0,l>>>0>3;);}if(!l)break e;for(;m[g|0]=T[a|0],g=g+1|0,a=a+1|0,l=l+-1|0,!!l;);}return i}function dc(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0;for(g=i+-17|0,b=i+-18|0,x=i+-19|0,A=i+-20|0,P=i+-21|0,U=i+-22|0,j=i+-23|0,X=i+-24|0,ne=i+-25|0,me=i+-26|0,Ie=i+-27|0,je=i+-28|0,st=i+-29|0,At=i+-30|0,Lt=i+-31|0,Qt=i+-32|0,lr=h[2548]-T[i+-33|0]|0;a=T[i+-1|0]+lr|0,m[i|0]=T[a+T[Qt|0]|0],m[i+1|0]=T[T[Lt|0]+a|0],m[i+2|0]=T[T[At|0]+a|0],m[i+3|0]=T[T[st|0]+a|0],m[i+4|0]=T[T[je|0]+a|0],m[i+5|0]=T[T[Ie|0]+a|0],m[i+6|0]=T[T[me|0]+a|0],m[i+7|0]=T[T[ne|0]+a|0],m[i+8|0]=T[T[X|0]+a|0],m[i+9|0]=T[T[j|0]+a|0],m[i+10|0]=T[T[U|0]+a|0],m[i+11|0]=T[T[P|0]+a|0],m[i+12|0]=T[T[A|0]+a|0],m[i+13|0]=T[T[x|0]+a|0],m[i+14|0]=T[T[b|0]+a|0],m[i+15|0]=T[T[g|0]+a|0],i=i+32|0,l=l+1|0,(l|0)!=16;);}function ua(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0;e:{if(!l||(g=i+l|0,m[g+-1|0]=a,m[i|0]=a,l>>>0<3)||(m[g+-2|0]=a,m[i+1|0]=a,m[g+-3|0]=a,m[i+2|0]=a,l>>>0<7)||(m[g+-4|0]=a,m[i+3|0]=a,l>>>0<9)||(g=0-i&3,b=g+i|0,a=K(a&255,16843009),h[b>>2]=a,l=l-g&-4,g=l+b|0,h[g+-4>>2]=a,l>>>0<9)||(h[b+8>>2]=a,h[b+4>>2]=a,h[g+-8>>2]=a,h[g+-12>>2]=a,l>>>0<25)||(h[b+24>>2]=a,h[b+20>>2]=a,h[b+16>>2]=a,h[b+12>>2]=a,h[g+-16>>2]=a,h[g+-20>>2]=a,h[g+-24>>2]=a,h[g+-28>>2]=a,A=b&4|24,l=l-A|0,l>>>0<32))break e;for(g=a,x=a,a=b+A|0;h[a+24>>2]=x,h[a+28>>2]=g,h[a+16>>2]=x,h[a+20>>2]=g,h[a+8>>2]=x,h[a+12>>2]=g,h[a>>2]=x,h[a+4>>2]=g,a=a+32|0,l=l+-32|0,l>>>0>31;);}return i|0}function os(i,a,l){var g=0,b=0,x=0,A=0;g=qn-144|0,qn=g;e:{if(!l){x=2;break e}t:{if(!i){b=2;break t}h[l>>2]=0,h[l+4>>2]=0,h[l+32>>2]=0,h[l+36>>2]=0,h[l+24>>2]=0,h[l+28>>2]=0,A=l+16|0,x=A,h[x>>2]=0,h[x+4>>2]=0,b=l+8|0,h[b>>2]=0,h[b+4>>2]=0,x=3;r:switch(b=El(i,a,l,l+4|0,b,l+12|0,A,0),b|0){case 7:break e;case 0:break r;default:break t}if(h[g+140>>2]=0,h[g+132>>2]=0,h[g+136>>2]=0,h[g+124>>2]=0,h[g+128>>2]=0,h[g+116>>2]=0,h[g+120>>2]=0,h[g+100>>2]=0,h[g+104>>2]=0,h[g+108>>2]=0,h[g+112>>2]=0,h[g+92>>2]=0,h[g+96>>2]=0,h[g+108>>2]=l+124,b=l+40|0,h[g+88>>2]=b,Uo(b,l)){vf(g),h[g>>2]=h[l+40>>2],h[g+4>>2]=h[l>>2],h[g+8>>2]=h[l+4>>2],h[g+88>>2]=g,x=ga(i,a,g+88|0),x||(x=Su(g,b)),Nl(g);break e}x=ga(i,a,g+88|0);break e}x=b}return qn=g+144|0,x}function ia(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0;g=qn-32|0,qn=g,b=h[i+28>>2],h[g+16>>2]=b,x=h[i+20>>2],h[g+28>>2]=l,h[g+24>>2]=a,a=x-b|0,h[g+20>>2]=a,b=a+l|0,j=2,a=g+16|0;e:{t:{r:{if(!Vf(Hu(h[i+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(x=h[g+12>>2],(x|0)==(b|0))break r;if((x|0)<=-1)break t;if(A=h[a+4>>2],P=x>>>0>A>>>0,U=(P<<3)+a|0,A=x-(P?A:0)|0,h[U>>2]=A+h[U>>2],U=(P?12:4)+a|0,h[U>>2]=h[U>>2]-A,b=b-x|0,a=P?a+8|0:a,j=j-P|0,!!Vf(Hu(h[i+60>>2],a|0,j|0,g+12|0)|0))break}if(h[g+12>>2]=-1,(b|0)!=-1)break t}a=h[i+44>>2],h[i+28>>2]=a,h[i+20>>2]=a,h[i+16>>2]=a+h[i+48>>2],i=l;break e}if(h[i+28>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i>>2]=h[i>>2]|32,i=0,(j|0)==2)break e;i=l-h[a+4>>2]|0}return qn=g+32|0,i|0}function Ys(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;x=K(h[i+8>>2],h[i+52>>2]),A=h[i+80>>2],P=h[i+68>>2],a=h[i+24>>2];e:{if(!a){if((x|0)<1)break e;for(;l=Ei(h[i+16>>2],0,h[(g<<2)+A>>2],0)+-2147483648|0,a=jn,a=l>>>0<2147483648?a+1|0:a,m[g+P|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););break e}if(l=0-a|0,a=h[i+32>>2],a=a0(0,l,a,a>>31),(x|0)<1)break e;for(U=h[i+76>>2],j=a,X=0-a|0;a=h[i+16>>2],l=g<<2,b=Ei(X,Ie,h[l+A>>2],0),ne=jn,me=a,a=b,b=Ei(j,je,h[l+U>>2],0),l=a+b|0,a=jn+ne|0,a=l>>>0<b>>>0?a+1|0:a,b=l+-2147483648|0,l=Ei(me,0,b>>>0<2147483648?a+1|0:a,0)+-2147483648|0,a=jn,a=l>>>0<2147483648?a+1|0:a,m[g+P|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););}}function mc(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0,At=0,Lt=0,Qt=0,lr=0,Nr=0;if((l|0)>=1)for(b=h[g+-4>>2];X=j<<2,x=X+a|0,A=h[x>>2],x=h[x+-4>>2],U=x&255,ne=(A&255)-U|0,me=(b&255)-U|0,U=me>>31,Ie=x>>>24|0,je=(b>>>24|0)-Ie|0,st=je>>31,At=x>>>8&255,Lt=(b>>>8&255)-At|0,P=Lt>>31,Qt=x>>>16&255,lr=(b>>>16&255)-Qt|0,x=lr>>31,Nr=b,b=(A>>>24|0)-Ie|0,P=((((U^U+me)+((ne|0)<0?ne:0-ne|0)|0)+(st^st+je)|0)+((b|0)<0?b:0-b|0)|0)+(P^P+Lt)|0,b=(A>>>8&255)-At|0,P=(P+((b|0)<0?b:0-b|0)|0)+(x^x+lr)|0,b=(A>>>16&255)-Qt|0,b=(P+((b|0)<0?b:0-b|0)|0)<1?A:Nr,A=h[i+X>>2],b=(b&-16711936)+(A&-16711936)&-16711936|(b&16711935)+(A&16711935)&16711935,h[g+X>>2]=b,j=j+1|0,(j|0)!=(l|0););}function eu(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0;x=h[i+104>>2];e:{if(!x)break e;b=h[i+16>>2],g=h[i+8>>2],A=h[a>>2];t:{if(!h[i+56>>2]){a=g;break t}r:{if(!g){l=b+-1|0,a=0;break r}x=x-h[i>>2]|0,l=b,a=g+-1|0}if(g=g+b|0,b=h[i+84>>2],g=g+b|0,(g|0)!=h[i+88>>2]){b=l;break t}b=g-(a+b|0)|0}if((b|0)<1)break e;for(P=h[i+12>>2],ne=h[A>>2],l=h[A+20>>2],j=h[A+16>>2]+K(l,a)|0,U=j+1|0,a=15;;){if(g=0,(P|0)>=1){for(;l=(g<<1)+U|0,me=l,Ie=T[l|0]&240,l=T[g+x|0]>>>4|0,m[me|0]=Ie|l,a=a&l,g=g+1|0,(P|0)!=(g|0););l=h[A+20>>2]}if(U=l+U|0,x=h[i>>2]+x|0,X=X+1|0,(X|0)==(b|0))break}if((a|0)==15|ne+-7>>>0>3)break e;tt[h[2665]](j,P,b,l)}return 0}function tu(i,a,l){e:{t:{if(a>>>0>20)break t;r:switch(a+-9|0){case 0:a=h[l>>2],h[l>>2]=a+4,h[i>>2]=h[a>>2];return;case 1:a=h[l>>2],h[l>>2]=a+4,a=h[a>>2],h[i>>2]=a,h[i+4>>2]=a>>31;return;case 2:a=h[l>>2],h[l>>2]=a+4,h[i>>2]=h[a>>2],h[i+4>>2]=0;return;case 4:a=h[l>>2],h[l>>2]=a+4,a=Pr[a>>1],h[i>>2]=a,h[i+4>>2]=a>>31;return;case 5:a=h[l>>2],h[l>>2]=a+4,h[i>>2]=kn[a>>1],h[i+4>>2]=0;return;case 6:a=h[l>>2],h[l>>2]=a+4,a=m[a|0],h[i>>2]=a,h[i+4>>2]=a>>31;return;case 7:a=h[l>>2],h[l>>2]=a+4,h[i>>2]=T[a|0],h[i+4>>2]=0;return;case 3:case 8:break e;case 9:break r;default:break t}tt[0](i,l)}return}a=h[l>>2]+7&-8,h[l>>2]=a+8,l=h[a+4>>2],h[i>>2]=h[a>>2],h[i+4>>2]=l}function ru(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0;b=h[i+16>>2],x=h[a+24>>2],l=h[h[a>>2]>>2];e:{if(l+-7>>>0>3&&!(1<<l&4154&&l>>>0<=12)||(l=h[i+104>>2],!l))break e;va(h[i+20>>2],h[i+32>>2],l,h[i>>2],h[i+12>>2],b,0)}if((b|0)<1)return 0;for(A=b+1>>1,P=h[i+32>>2],g=h[i+20>>2],l=b;U=wa(x,l,g,P),g=K(U,P)+g|0,j=wc(x)+j|0,l=l-U|0,(l|0)>0;);if((b|0)>=1){for(b=h[a+28>>2],x=h[i+36>>2],g=h[i+24>>2],l=A;P=wa(b,l,g,x),wc(b),g=K(x,P)+g|0,l=l-P|0,(l|0)>0;);for(g=h[i+28>>2],a=h[a+32>>2],i=h[i+36>>2];l=wa(a,A,g,i),wc(a),g=K(i,l)+g|0,A=A-l|0,(A|0)>0;);}return j|0}function ho(i,a){var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0;e:{if(!(h[i+24>>2]|(a|0)>24)){if(l=h[i+20>>2],b=l+a|0,h[i+20>>2]=b,P=h[(a<<2)+9312>>2],A=h[i+4>>2],g=A,a=l&63,l=a&31,x=h[i>>2],j=P&(32<=(a&63)>>>0?g>>>l|0:((1<<l)-1&g)<<32-l|x>>>l),(b|0)<8)break e;for(a=h[i+16>>2],U=h[i+12>>2],P=a>>>0>U>>>0?a:U;;){t:{if((a|0)==(P|0)){a=P,g=b;break t}if(g=A,x=(g&255)<<24|x>>>8,g=g>>>8|0,A=g,h[i>>2]=x,h[i+4>>2]=g,l=T[h[i+8>>2]+a|0],g=b+-8|0,h[i+20>>2]=g,a=a+1|0,h[i+16>>2]=a,l=A|l<<24,A=l,h[i>>2]=x,h[i+4>>2]=l,l=(b|0)>15,b=g,l)continue}break}if((a|0)!=(U|0)|(g|0)<65)break e;return h[i+20>>2]=0,h[i+24>>2]=1,j}h[i+20>>2]=0,h[i+24>>2]=1}return j}function Cs(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;b=K(h[i+8>>2],h[i+52>>2]),A=h[i+76>>2],P=h[i+68>>2],a=K(h[i+24>>2],h[i+16>>2]);e:{if(a){if((b|0)<1)break e;for(x=h[i+80>>2],X=0-a|0,a=0;g=h[i+20>>2],l=a<<2,U=l+A|0,ne=h[U>>2],Ei(h[l+x>>2],0,X,0),j=jn,g=Ei(g,0,ne-j|0,0)+-2147483648|0,l=jn,l=g>>>0<2147483648?l+1|0:l,m[a+P|0]=(l|0)>255?-1:l,h[U>>2]=j,a=a+1|0,(b|0)!=(a|0););break e}if((b|0)<1)break e;for(a=0;x=(a<<2)+A|0,g=Ei(h[i+20>>2],0,h[x>>2],0)+-2147483648|0,l=jn,l=g>>>0<2147483648?l+1|0:l,m[a+P|0]=(l|0)>255?-1:l,h[x>>2]=0,a=a+1|0,(b|0)!=(a|0););}}function Ho(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0;if((l|0)>=1)for(x=h[g+-4>>2];U=P<<2,A=U+a|0,b=h[A>>2],x=((b^x)>>>1&2139062143)+(b&x)|0,b=x&255,A=h[A+-4>>2],b=((b-(A&255)|0)/2|0)+b|0,j=b>>>0<256?b:(b^-1)>>>24|0,b=x>>>24|0,b=((b-(A>>>24|0)|0)/2|0)+b|0,j=j|(b>>>0<256?b:b>>>24^-1)<<24,b=x>>>16&255,b=((b-(A>>>16&255)|0)/2|0)+b|0,x=x>>>8&255,x=((x-(A>>>8&255)|0)/2|0)+x|0,x=j|(b>>>0<256?b:(b^-1)>>>24|0)<<16|(x>>>0<256?x:(x^-1)>>>24|0)<<8,A=h[i+U>>2],x=(x&-16711936)+(A&-16711936)&-16711936|(x&16711935)+(A&16711935)&16711935,h[g+U>>2]=x,P=P+1|0,(P|0)!=(l|0););}function Is(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0;g=h[i+36>>2];e:{if(h[g+64>>2]>=h[g+56>>2])break e;x=h[i>>2],X=h[x>>2]+-7|0,b=h[x+20>>2],j=h[x+16>>2]+K(b,a)|0,P=h[g+52>>2],a=15;t:{if((l|0)<1|h[g+24>>2]>0)break t;for(U=j+1|0;;){if(Gr(g),g=0,(P|0)>=1)for(;b=(g<<1)+U|0,ne=b,me=T[b|0]&240,b=T[h[h[i+36>>2]+68>>2]+g|0]>>>4|0,m[ne|0]=me|b,a=a&b,g=g+1|0,(P|0)!=(g|0););if(b=h[x+20>>2],g=h[i+36>>2],A=A+1|0,h[g+64>>2]>=h[g+56>>2]|(A|0)>=(l|0))break t;if(U=b+U|0,!(h[g+24>>2]<=0))break}}if((a|0)==15|X>>>0>3)break e;tt[h[2665]](j,P,A,b)}return A|0}function Su(i,a){var l=0,g=0;h[a+4>>2]=h[i+4>>2],h[a+8>>2]=h[i+8>>2],l=2;e:{if(la(a))break e;l=h[i+16>>2],g=h[i>>2];t:{if(g>>>0<=10){kt(l,h[i+20>>2],h[a+16>>2],h[a+20>>2],K(h[i+4>>2],T[g+1157|0]),h[i+8>>2]);break t}if(kt(l,h[i+32>>2],h[a+16>>2],h[a+32>>2],h[i+4>>2],h[i+8>>2]),kt(h[i+20>>2],h[i+36>>2],h[a+20>>2],h[a+36>>2],(h[i+4>>2]+1|0)/2|0,(h[i+8>>2]+1|0)/2|0),kt(h[i+24>>2],h[i+40>>2],h[a+24>>2],h[a+40>>2],(h[i+4>>2]+1|0)/2|0,(h[i+8>>2]+1|0)/2|0),g=h[i>>2],!(1<<g&4154&&g>>>0<=12)&&(l=0,g+-7>>>0>3))break e;kt(h[i+28>>2],h[i+44>>2],h[a+28>>2],h[a+44>>2],h[i+4>>2],h[i+8>>2])}l=0}return l}function Oc(i,a){var l=0,g=0,b=0,x=0;e:{if(h[i+2308>>2]<1||(l=h[i+2300>>2],(l|0)<h[i+300>>2]))break e;g=(l|0)<=h[i+308>>2]}l=i+160|0;e:{if(!h[i+148>>2]){h[i+168>>2]=g,h[i+164>>2]=h[i+2300>>2],Wu(i,l),x=aa(i,a);break e}if(b=i+124|0,!(tt[h[2559]](b)&1))break e;oo(i+180|0,a,108),h[i+168>>2]=g,h[i+160>>2]=h[i+152>>2],h[i+164>>2]=h[i+2300>>2];t:{if(h[i+148>>2]==2){a=h[i+2304>>2],l=i+176|0,h[i+2304>>2]=h[l>>2],h[l>>2]=a;break t}Wu(i,l)}return g&&(a=h[i+2260>>2],g=i+172|0,h[i+2260>>2]=h[g>>2],h[g>>2]=a),tt[h[2560]](b),a=h[i+152>>2]+1|0,h[i+152>>2]=(a|0)==h[i+156>>2]?0:a,1}return x}function Cu(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0,X=0;if((l|0)>=1)for(b=h[g+-4>>2];j=U<<2,A=j+a|0,P=h[A>>2],A=h[A+-4>>2],x=((P&255)+(b&255)|0)-(A&255)|0,X=x>>>0<256?x:(x^-1)>>>24|0,x=(P>>>24)+(b>>>24)-(A>>>24)|0,X=X|(x>>>0<256?x:x>>>24^-1)<<24,x=((P>>>16&255)+(b>>>16&255)|0)-(A>>>16&255)|0,b=((P>>>8&255)+(b>>>8&255)|0)-(A>>>8&255)|0,b=X|(x>>>0<256?x:(x^-1)>>>24|0)<<16|(b>>>0<256?b:(b^-1)>>>24|0)<<8,P=h[i+j>>2],b=(b&-16711936)+(P&-16711936)&-16711936|(b&16711935)+(P&16711935)&16711935,h[g+j>>2]=b,U=U+1|0,(U|0)!=(l|0););}function sl(i,a,l,g,b,x,A,P,U){var j=0,X=0,ne=0,me=0;h[i+72>>2]=A,h[i+68>>2]=g,h[i+60>>2]=0,h[i+64>>2]=0,h[i+56>>2]=x,h[i+52>>2]=b,h[i+48>>2]=l,h[i+44>>2]=a,h[i+8>>2]=P,A=(l|0)<(x|0),h[i+4>>2]=A,j=(a|0)<(b|0),h[i>>2]=j,X=j?a+-1|0:b,h[i+40>>2]=X,g=j?b+-1|0:a,h[i+36>>2]=g,j||(ne=i,me=a0(0,1,X,X>>31),h[ne+12>>2]=me),a=x-A|0,h[i+32>>2]=a,l=l-A|0,h[i+28>>2]=l;e:{if(!A){h[i+24>>2]=l,l=K(l,g),l=a0(0,x,l,l>>31),g=jn,h[i+20>>2]=(g|0)==1&l>>>0<0|g>>>0<1?l:0;break e}h[i+24>>2]=a,a=g}h[i+76>>2]=U,ne=i,me=a0(0,1,a,a>>31),h[ne+16>>2]=me,a=i,i=K(b,P),h[a+80>>2]=(i<<2)+U,ua(U,0,i<<3),_r()}function x0(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0;x=T[i+-31|0],a=x+1|0,l=T[i+-30|0],b=a+l>>>1|0,m[i+64|0]=b,P=T[i+-32|0],m[i|0]=P+a>>>1,a=T[i+-29|0],g=(a+l|0)+1>>>1|0,m[i+65|0]=g,m[i+1|0]=b,b=T[i+-28|0],A=(b+a|0)+1>>>1|0,m[i+66|0]=A,m[i+2|0]=g,m[i+3|0]=A,g=a+2|0,A=(g+x|0)+(l<<1)>>>2|0,m[i+96|0]=A,l=l+2|0,m[i+32|0]=(l+P|0)+(x<<1)>>>2,x=b+(l+(a<<1)|0)>>>2|0,m[i+97|0]=x,m[i+33|0]=A,P=T[i+-25|0],l=T[i+-26|0],a=T[i+-27|0],g=a+(g+(b<<1)|0)>>>2|0,m[i+98|0]=g,m[i+34|0]=x,m[i+99|0]=(P+(a+(l<<1)|0)|0)+2>>>2,m[i+67|0]=(l+(b+(a<<1)|0)|0)+2>>>2,m[i+35|0]=g}function ll(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0;A=T[i+63|0],g=T[i+31|0],l=(A+g|0)+1>>>1|0,m[i+98|0]=l,P=T[i+95|0],m[i+96|0]=(P+A|0)+1>>>1,m[i+64|0]=l,b=T[i+-1|0],a=b+1|0,l=T[i+-33|0],x=a+l>>>1|0,m[i+34|0]=x,a=a+g>>>1|0,m[i+66|0]=a,m[i|0]=x,m[i+32|0]=a,a=T[i+-32|0],x=b+2|0,U=a+(x+(l<<1)|0)>>>2|0,m[i+35|0]=U,j=T[i+-31|0],m[i+3|0]=(T[i+-30|0]+(a+(j<<1)|0)|0)+2>>>2,m[i+2|0]=((l+(a<<1)|0)+j|0)+2>>>2,a=b<<1,b=g+2|0,l=l+(a+b|0)>>>2|0,m[i+67|0]=l,m[i+1|0]=U,g=(A+x|0)+(g<<1)>>>2|0,m[i+99|0]=g,m[i+33|0]=l,m[i+97|0]=(b+P|0)+(A<<1)>>>2,m[i+65|0]=g}function gc(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0;g=T[i+-32|0],b=g+1|0,a=T[i+-33|0],l=b+a>>>1|0,m[i+65|0]=l,x=T[i+-31|0],A=b+x>>>1|0,m[i+66|0]=A,m[i|0]=l,b=T[i+-30|0],l=(b+x|0)+1>>>1|0,m[i+67|0]=l,m[i+1|0]=A,A=T[i+-29|0],m[i+3|0]=(A+b|0)+1>>>1,m[i+2|0]=l,l=T[i+-1|0],P=l+2|0,U=T[i+31|0],m[i+96|0]=(P+T[i+63|0]|0)+(U<<1)>>>2,P=g+(P+(a<<1)|0)>>>2|0,m[i+97|0]=P,a=a+2|0,m[i+64|0]=(a+U|0)+(l<<1)>>>2,a=(a+(g<<1)|0)+x>>>2|0,m[i+98|0]=a,m[i+32|0]=P,g=(b+(g+(x<<1)|0)|0)+2>>>2|0,m[i+99|0]=g,m[i+33|0]=a,m[i+35|0]=(A+((b<<1)+x|0)|0)+2>>>2,m[i+34|0]=g}function oi(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;g=h[i+36>>2];e:{if(h[g+64>>2]>=h[g+56>>2])break e;x=h[i>>2],b=h[x>>2],P=(b|0)==4|(b|0)==9,ne=b+-7|0,A=h[x+20>>2],U=h[x+16>>2]+K(A,a)|0,j=h[g+52>>2],b=0,a=0;t:{if((l|0)<1||(a=0,h[g+24>>2]>0))break t;for(a=(P?0:3)+U|0;;){r:{if(Gr(g),X=tt[h[2666]](h[h[i+36>>2]+68>>2],0,j,1,a,0)|X,A=h[x+20>>2],g=h[i+36>>2],b=b+1|0,h[g+64>>2]>=h[g+56>>2]|(b|0)>=(l|0))break r;if(a=a+A|0,h[g+24>>2]<=0)continue}break}a=(X|0)!=0}if(!a|ne>>>0>3)break e;tt[h[2664]](U,P,j,b,A)}return b|0}function vi(i,a,l){var g=0,b=0,x=0;g=qn-208|0,qn=g,h[g+204>>2]=l,l=0,ua(g+160|0,0,40),h[g+200>>2]=h[g+204>>2];e:{if((gt(0,a,g+200|0,g+80|0,g+160|0)|0)<0)break e;l=h[i+76>>2]>=0?1:l,b=h[i>>2],m[i+74|0]<=0&&(h[i>>2]=b&-33),x=b&32;t:{if(h[i+48>>2]){gt(i,a,g+200|0,g+80|0,g+160|0);break t}if(h[i+48>>2]=80,h[i+16>>2]=g+80,h[i+28>>2]=g,h[i+20>>2]=g,b=h[i+44>>2],h[i+44>>2]=g,gt(i,a,g+200|0,g+80|0,g+160|0),!b)break t;tt[h[i+36>>2]](i,0,0)|0,h[i+48>>2]=0,h[i+44>>2]=b,h[i+28>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0}if(h[i>>2]=x|h[i>>2],!l)break e}qn=g+208|0}function Oa(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;b=h[a>>2],x=h[b+28>>2],U=h[a+16>>2],A=h[b+44>>2],P=x+K(U,A)|0,g=h[i+104>>2];e:{if(g){if(l=h[i+16>>2],(l|0)<1)break e;for(X=h[b+32>>2],x=h[a+36>>2],A=h[i>>2],ne=h[b+16>>2],i=0;j=wa(x,l,g,A),g=K(A,j)+g|0,i=wc(x)+i|0,l=l-j|0,(l|0)>0;);if((i|0)<1)break e;return va(K(U,X)+ne|0,h[b+32>>2],P,h[b+44>>2],h[h[a+36>>2]+52>>2],i,1),0}if(!x|(l|0)<1)break e;for(i=h[i+96>>2],g=0;P=ua(P,255,i)+A|0,g=g+1|0,(g|0)!=(l|0););}return 0}function Ku(i){i=i|0;var a=0,l=0,g=0,b=0,x=0;l=T[i+31|0],g=l+2|0,a=T[i+63|0],m[i+96|0]=T[i+95|0]+(g+(a<<1)|0)>>>2,x=l<<1,l=T[i+-1|0],b=l+2|0,a=a+(x+b|0)>>>2|0,m[i+97|0]=a,m[i+64|0]=a,a=g+(l<<1)|0,l=T[i+-33|0],a=a+l>>>2|0,m[i+98|0]=a,m[i+65|0]=a,m[i+32|0]=a,g=T[i+-32|0],a=(g+b|0)+(l<<1)>>>2|0,m[i+99|0]=a,m[i+66|0]=a,m[i+33|0]=a,m[i|0]=a,x=T[i+-29|0],a=T[i+-30|0],b=l,l=T[i+-31|0],b=((b+l|0)+(g<<1)|0)+2>>>2|0,m[i+67|0]=b,m[i+34|0]=b,m[i+1|0]=b,g=((a+g|0)+(l<<1)|0)+2>>>2|0,m[i+35|0]=g,m[i+2|0]=g,m[i+3|0]=((l+x|0)+(a<<1)|0)+2>>>2}function wa(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;e:{if((a|0)<1)break e;for(;;){if(h[i+24>>2]<1&&h[i+64>>2]<h[i+56>>2])break e;if(h[i+4>>2]&&(X=i,ne=Fd(h[i+76>>2],h[i+80>>2]),h[X+76>>2]=ne,h[i+80>>2]=jn),xc(i,l),!(h[i+4>>2]|(K(h[i+52>>2],h[i+8>>2])|0)<1))for(U=h[i+76>>2],j=h[i+80>>2],b=0;A=b<<2,P=A+U|0,h[P>>2]=h[P>>2]+h[j+A>>2],b=b+1|0,(b|0)<(K(h[i+52>>2],h[i+8>>2])|0););if(h[i+60>>2]=h[i+60>>2]+1,h[i+24>>2]=h[i+24>>2]-h[i+32>>2],l=l+g|0,x=x+1|0,(x|0)==(a|0))break}x=a}return x}function jo(i){var a=0,l=0,g=0;if(i){if(a=i+160|0,$i(h[a>>2]),$i(h[i+172>>2]),l=i+168|0,Gf(h[l>>2]),s0(i+124|0),g=i+136|0,s0(g),h[l>>2]=0,h[l+4>>2]=0,h[a>>2]=0,h[a+4>>2]=0,h[i+152>>2]=0,h[i+156>>2]=0,h[i+144>>2]=0,h[i+148>>2]=0,h[g>>2]=0,h[g+4>>2]=0,h[i+128>>2]=0,h[i+132>>2]=0,h[i+120>>2]=0,h[i+124>>2]=0,$i(h[i+16>>2]),a=0,h[i+16>>2]=0,h[i+176>>2]>=1)for(;l=(K(a,20)+i|0)+196|0,$i(h[l>>2]),h[l>>2]=0,a=a+1|0,(a|0)<h[i+176>>2];);h[i+260>>2]=0,h[i+176>>2]=0,$i(h[i+264>>2]),h[i+12>>2]=0,h[i+264>>2]=0}}function Ml(){h[2545]!=h[2673]&&(h[2703]=32,h[2674]=33,h[2706]=34,h[2704]=35,h[2705]=36,h[2707]=37,h[2708]=38,h[2712]=39,h[2709]=40,h[2710]=41,h[2714]=42,h[2716]=43,h[2717]=44,h[2718]=45,h[2719]=46,h[2713]=47,h[2711]=48,h[2715]=49,h[2690]=50,h[2688]=51,h[2686]=52,h[2685]=53,h[2684]=54,h[2693]=55,h[2692]=56,h[2691]=57,h[2689]=58,h[2687]=59,h[2682]=60,h[2681]=61,h[2680]=62,h[2679]=63,h[2678]=64,h[2677]=65,h[2676]=66,h[2702]=67,h[2701]=68,h[2700]=69,h[2699]=70,h[2698]=71,h[2697]=72,h[2696]=73,h[2720]=74,h[2545]=h[2673])}function Js(i){i=i|0;var a=0,l=0,g=0,b=0,x=0;a=T[i+-29|0],b=a+2|0,g=T[i+-31|0],l=T[i+-30|0],x=(b+g|0)+(l<<1)>>>2|0,m[i+32|0]=x,l=l+2|0,m[i|0]=(l+T[i+-32|0]|0)+(g<<1)>>>2,g=T[i+-28|0],l=g+(l+(a<<1)|0)>>>2|0,m[i+64|0]=l,m[i+1|0]=x,m[i+33|0]=l,a=b+(g<<1)|0,b=T[i+-27|0],a=a+b>>>2|0,m[i+96|0]=a,m[i+2|0]=l,m[i+65|0]=a,m[i+34|0]=a,m[i+3|0]=a,a=T[i+-26|0],g=(a+(g+(b<<1)|0)|0)+2>>>2|0,m[i+97|0]=g,l=T[i+-25|0],b=(l+(b+(a<<1)|0)|0)+2>>>2|0,m[i+98|0]=b,m[i+35|0]=g,m[i+66|0]=g,m[i+99|0]=((l+a|0)+(l<<1)|0)+2>>>2,m[i+67|0]=b}function r0(i){i=i|0;var a=0,l=0,g=0,b=0,x=0;l=T[i+63|0],a=l+2|0,x=T[i+95|0],g=K((a+x|0)+(x<<1)>>>2|0,16843009),m[i+96|0]=g,m[i+97|0]=g>>>8,m[i+98|0]=g>>>16,m[i+99|0]=g>>>24,b=T[i+31|0],g=b+2|0,l=K(x+(g+(l<<1)|0)>>>2|0,16843009),m[i+64|0]=l,m[i+65|0]=l>>>8,m[i+66|0]=l>>>16,m[i+67|0]=l>>>24,x=a,a=T[i+-1|0],b=K((x+a|0)+(b<<1)>>>2|0,16843009),m[i+32|0]=b,m[i+33|0]=b>>>8,m[i+34|0]=b>>>16,m[i+35|0]=b>>>24,a=K((T[i+-33|0]+g|0)+(a<<1)>>>2|0,16843009),m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24}function Dl(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if(m[b|0]=T[i|0],(a|0)>=2)for(P=a+-1|0,U=b+1|0,A=i+1|0;m[x+U|0]=T[x+A|0]-T[i+x|0],x=x+1|0,(P|0)!=(x|0););if((l|0)>=2)for(X=g^-1,ne=(a|0)<2,U=1;;){if(b=g+b|0,P=i+g|0,m[b|0]=T[P|0]-T[i|0],x=1,!ne)for(;j=x+P|0,A=(T[i+x|0]+T[j+-1|0]|0)-T[P+(x+X|0)|0]|0,A=(A|0)>0?A:0,m[b+x|0]=T[j|0]-((A|0)<255?A:255),x=x+1|0,(x|0)!=(a|0););if(i=P,U=U+1|0,(U|0)==(l|0))break}}function ca(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;U=T[l+P|0],ne=T[a+P|0],j=T[i+P|0],x=(P<<2)+g|0,m[x|0]=255,j=K(j,19077)>>>8|0,X=j+(K(ne,33050)>>>8|0)|0,A=X+-17685|0,m[x+3|0]=A>>>0<16384?A>>>6|0:X>>>0<17685?0:255,X=j+(K(U,26149)>>>8|0)|0,A=X+-14234|0,m[x+1|0]=A>>>0<16384?A>>>6|0:X>>>0<14234?0:255,A=x,x=j-(K(ne,6419)>>>8|0)-(K(U,13320)>>>8)|0,U=x+8708|0,m[A+2|0]=U>>>0<16384?U>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function xa(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;U=T[a+P|0],ne=T[l+P|0],j=T[i+P|0],x=(P<<2)+g|0,m[x+3|0]=255,j=K(j,19077)>>>8|0,X=j+(K(ne,26149)>>>8|0)|0,A=X+-14234|0,m[x+2|0]=A>>>0<16384?A>>>6|0:X>>>0<14234?0:255,X=j+(K(U,33050)>>>8|0)|0,A=X+-17685|0,m[x|0]=A>>>0<16384?A>>>6|0:X>>>0<17685?0:255,A=x,x=j-(K(U,6419)>>>8|0)-(K(ne,13320)>>>8)|0,U=x+8708|0,m[A+1|0]=U>>>0<16384?U>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function Fc(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;U=T[l+P|0],ne=T[a+P|0],j=T[i+P|0],x=(P<<2)+g|0,m[x+3|0]=255,j=K(j,19077)>>>8|0,X=j+(K(ne,33050)>>>8|0)|0,A=X+-17685|0,m[x+2|0]=A>>>0<16384?A>>>6|0:X>>>0<17685?0:255,X=j+(K(U,26149)>>>8|0)|0,A=X+-14234|0,m[x|0]=A>>>0<16384?A>>>6|0:X>>>0<14234?0:255,A=x,x=j-(K(ne,6419)>>>8|0)-(K(U,13320)>>>8)|0,U=x+8708|0,m[A+1|0]=U>>>0<16384?U>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function as(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;j=(P<<1)+g|0,U=K(T[i+P|0],19077)>>>8|0,x=T[l+P|0],X=U+(K(x,26149)>>>8|0)|0,A=X+-14234|0,ne=(A>>>0<16384?A>>>6|0:X>>>0<14234?0:248)&248,X=T[a+P|0],x=U-(K(X,6419)>>>8|0)-(K(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[j|0]=ne|x>>>5,A=j,U=U+(K(X,33050)>>>8|0)|0,j=U+-17685|0,m[A+1|0]=x<<3&224|(j>>>0<16384?j>>>9|0:U>>>0<17685?0:31),P=P+1|0,(P|0)!=(b|0););}function M(i,a){var l=0,g=0,b=0,x=0,A=0;g=h[i+8>>2],A=h[g+40>>2],l=h[(ii[A+12>>2]<2?g+84|0:i+108|0)>>2],b=h[i+108>>2],l=(b|0)<(l|0)?l:b;e:{if((l|0)>=(a|0)||(b=h[g>>2],g=h[A+136>>2]+K(b,l)|0,qr(i+180|0,l,a,h[i+16>>2]+K(l,h[i+100>>2])|0,g),x=h[A+12>>2],!x))break e;tt[h[(x<<2)+10912>>2]](h[A+140>>2],g,g,b),x=l+1|0;t:{if((x|0)==(a|0)){l=g;break t}for(;l=g+b|0,tt[h[(h[A+12>>2]<<2)+10912>>2]](g,l,l,b),g=l,x=x+1|0,(x|0)!=(a|0););}h[A+140>>2]=l}h[i+108>>2]=a,h[i+116>>2]=a}function d(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0;if(x=h[i+8>>2],(x|0)>=1)for(X=K(h[i+52>>2],x);;){if((A|0)<(X|0))for(me=h[i+80>>2],g=0,b=0,P=A,U=A;;){if(ne=h[i+40>>2],j=0,g=h[i+36>>2]+g|0,(g|0)>=1){for(;j=T[a+U|0],b=j+b|0,l=U+x|0,U=l,g=g-ne|0,(g|0)>0;);U=l}if(l=K(g,j),h[(P<<2)+me>>2]=l+K(b,ne),b=Ei(h[i+12>>2],0,0-l|0,0)+-2147483648|0,l=jn,b=b>>>0<2147483648?l+1|0:l,P=x+P|0,!((P|0)<(X|0)))break}if(A=A+1|0,(x|0)==(A|0))break}}function k(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0;l=T[i+-32|0],g=h[2548]-T[i+-33|0]|0,a=g+T[i+-1|0]|0,m[i|0]=T[l+a|0],b=T[i+-31|0],m[i+1|0]=T[a+b|0],x=T[i+-30|0],m[i+2|0]=T[a+x|0],A=T[i+-29|0],m[i+3|0]=T[a+A|0],a=g+T[i+31|0]|0,m[i+32|0]=T[a+l|0],m[i+33|0]=T[a+b|0],m[i+34|0]=T[a+x|0],m[i+35|0]=T[a+A|0],a=g+T[i+63|0]|0,m[i+64|0]=T[a+l|0],m[i+65|0]=T[a+b|0],m[i+66|0]=T[a+x|0],m[i+67|0]=T[a+A|0],a=l,l=g+T[i+95|0]|0,m[i+96|0]=T[a+l|0],m[i+97|0]=T[l+b|0],m[i+98|0]=T[l+x|0],m[i+99|0]=T[l+A|0]}function I(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;P=T[l+x|0],U=(x<<1)+g|0,A=K(T[i+x|0],19077)>>>8|0,ne=T[a+x|0],j=A+(K(ne,33050)>>>8|0)|0,X=j+-17685|0,m[U+1|0]=(X>>>0<16384?X>>>6|0:j>>>0<17685?0:240)|15,X=U,U=A+(K(P,26149)>>>8|0)|0,j=U+-14234|0,P=A-(K(ne,6419)>>>8|0)-(K(P,13320)>>>8)|0,A=P+8708|0,m[X|0]=(j>>>0<16384?j>>>6|0:U>>>0<14234?0:240)&240|(A>>>0<16384?A>>>10|0:(P|0)<-8708?0:15),x=x+1|0,(x|0)!=(b|0););}function D(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0;b=h[i+104>>2];e:{if(!b)break e;x=h[a>>2],A=h[x>>2],U=(A|0)==4|(A|0)==9,a=h[i+16>>2],g=h[i+8>>2],j=h[i+12>>2];t:{if(!h[i+56>>2]){P=g;break t}if(g?(P=g+-1|0,b=b-h[i>>2]|0,l=a):l=a+-1|0,a=a+g|0,g=h[i+84>>2],a=a+g|0,(a|0)!=h[i+88>>2]){a=l;break t}a=a-(g+P|0)|0}if(g=h[i>>2],i=h[x+20>>2],l=h[x+16>>2]+K(i,P)|0,!(tt[h[2666]](b,g,j,a,l+(U?0:3)|0,i)|0)|A+-7>>>0>3)break e;tt[h[2664]](l,U,j,a,h[x+20>>2])}return 0}function q(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;U=T[a+A|0],P=K(A,3)+g|0,X=K(T[i+A|0],19077)>>>8|0,ne=T[l+A|0],x=X+(K(ne,26149)>>>8|0)|0,j=x+-14234|0,m[P+2|0]=j>>>0<16384?j>>>6|0:x>>>0<14234?0:255,x=X+(K(U,33050)>>>8|0)|0,j=x+-17685|0,m[P|0]=j>>>0<16384?j>>>6|0:x>>>0<17685?0:255,x=P,U=X-(K(U,6419)>>>8|0)-(K(ne,13320)>>>8)|0,P=U+8708|0,m[x+1|0]=P>>>0<16384?P>>>6|0:(U|0)<-8708?0:255,A=A+1|0,(A|0)!=(b|0););}function J(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((b|0)>=1)for(;U=T[l+A|0],P=K(A,3)+g|0,X=K(T[i+A|0],19077)>>>8|0,ne=T[a+A|0],x=X+(K(ne,33050)>>>8|0)|0,j=x+-17685|0,m[P+2|0]=j>>>0<16384?j>>>6|0:x>>>0<17685?0:255,x=X+(K(U,26149)>>>8|0)|0,j=x+-14234|0,m[P|0]=j>>>0<16384?j>>>6|0:x>>>0<14234?0:255,x=P,U=X-(K(ne,6419)>>>8|0)-(K(U,13320)>>>8)|0,P=U+8708|0,m[x+1|0]=P>>>0<16384?P>>>6|0:(U|0)<-8708?0:255,A=A+1|0,(A|0)!=(b|0););}function oe(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0;return g=h[a>>2],a=h[a+-4>>2],l=a&255,b=(g&255)-l|0,x=(i&255)-l|0,l=x>>31,A=a>>>24|0,P=(i>>>24|0)-A|0,U=P>>31,j=a>>>8&255,X=(i>>>8&255)-j|0,ne=X>>31,me=a>>>16&255,Ie=(i>>>16&255)-me|0,a=Ie>>31,je=i,i=(g>>>24|0)-A|0,l=((((l^l+x)+((b|0)<0?b:0-b|0)|0)+(U^U+P)|0)+((i|0)<0?i:0-i|0)|0)+(ne^ne+X)|0,i=(g>>>8&255)-j|0,a=(l+((i|0)<0?i:0-i|0)|0)+(a^a+Ie)|0,i=(g>>>16&255)-me|0,((a+((i|0)<0?i:0-i|0)|0)<1?g:je)|0}function se(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if(b=h[i+8>>2],(b|0)>=1)for(X=K(h[i+52>>2],b),ne=h[i+80>>2];;){if(l=b+A|0,g=h[i+36>>2],P=T[a+A|0],x=P,x=h[i+44>>2]>=2?T[a+l|0]:x,h[(A<<2)+ne>>2]=K(g,P),U=l,(l|0)<(X|0))for(;;){g=g-h[i+40>>2]|0;e:{if((g|0)>=0){j=h[i+36>>2];break e}j=h[i+36>>2],g=j+g|0,P=x,U=b+U|0,x=T[U+a|0]}if(h[(l<<2)+ne>>2]=K(x,j)+K(P-x|0,g),l=l+b|0,!((l|0)<(X|0)))break}if(A=A+1|0,(A|0)==(b|0))break}}function ge(i){var a=0,l=0,g=0,b=0,x=0,A=0,P=0;g=h[i+20>>2];e:{if((g|0)<8){a=g;break e}for(l=h[i+16>>2],a=h[i+12>>2],P=l>>>0>a>>>0?l:a;;){if((l|0)==(P|0)){a=g;break e}if(x=h[i+4>>2],b=x>>>8|0,A=(x&255)<<24|h[i>>2]>>>8,x=b,h[i>>2]=A,h[i+4>>2]=b,b=T[h[i+8>>2]+l|0],a=g+-8|0,h[i+20>>2]=a,l=l+1|0,h[i+16>>2]=l,h[i>>2]=A,h[i+4>>2]=x|b<<24,b=(g|0)>15,g=a,!b)break}}h[i+16>>2]!=h[i+12>>2]|(a|0)<65&&!h[i+24>>2]||(h[i+20>>2]=0,h[i+24>>2]=1)}function Se(i,a){e:{if(i){if(a>>>0<=127)break e;t:{if(!h[h[2607]>>2]){if((a&-128)==57216)break e;break t}if(a>>>0<=2047)return m[i+1|0]=a&63|128,m[i|0]=a>>>6|192,2;if(!((a&-8192)!=57344&&a>>>0>=55296))return m[i+2|0]=a&63|128,m[i|0]=a>>>12|224,m[i+1|0]=a>>>6&63|128,3;if(a+-65536>>>0<=1048575)return m[i+3|0]=a&63|128,m[i|0]=a>>>18|240,m[i+2|0]=a>>>6&63|128,m[i+1|0]=a>>>12&63|128,4}h[2865]=25,i=-1}else i=1;return i}return m[i|0]=a,1}function Ue(i){var a=0,l=0,g=0,b=0,x=0,A=0;return i?(b=h[i+8>>2]+-1|0,ii[i>>2]<=10?(a=i+20|0,l=h[a>>2],h[a>>2]=0-l,h[i+16>>2]=h[i+16>>2]+K(l,b),0):(a=i+32|0,l=h[a>>2],h[a>>2]=0-l,g=i+36|0,a=h[g>>2],h[g>>2]=0-a,x=i+40|0,g=h[x>>2],h[x>>2]=0-g,h[i+16>>2]=h[i+16>>2]+K(l,b),l=i+20|0,x=l,A=h[l>>2],l=b>>1,h[x>>2]=A+K(l,a),a=i+24|0,h[a>>2]=h[a>>2]+K(l,g),a=h[i+28>>2],a&&(g=i+44|0,l=h[g>>2],h[g>>2]=0-l,h[i+28>>2]=a+K(l,b)),0)):2}function Je(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;for(g=i+-25|0,b=i+-26|0,x=i+-27|0,A=i+-28|0,P=i+-29|0,U=i+-30|0,j=i+-31|0,X=i+-32|0,ne=h[2548]-T[i+-33|0]|0;a=T[i+-1|0]+ne|0,m[i|0]=T[a+T[X|0]|0],m[i+1|0]=T[T[j|0]+a|0],m[i+2|0]=T[T[U|0]+a|0],m[i+3|0]=T[T[P|0]+a|0],m[i+4|0]=T[T[A|0]+a|0],m[i+5|0]=T[T[x|0]+a|0],m[i+6|0]=T[T[b|0]+a|0],m[i+7|0]=T[T[g|0]+a|0],i=i+32|0,l=l+1|0,(l|0)!=8;);}function St(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0;l=T[i+95|0],m[i+67|0]=l,m[i+66|0]=l,a=K(l,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,b=T[i+31|0],g=b+1|0,a=T[i+63|0],x=g+a>>>1|0,m[i+32|0]=x,A=T[i+-1|0],m[i|0]=g+A>>>1,g=(a+l|0)+1>>>1|0,m[i+64|0]=g,m[i+2|0]=x,m[i+34|0]=g,g=((l+b|0)+(a<<1)|0)+2>>>2|0,m[i+33|0]=g,a=a+2|0,m[i+1|0]=(a+A|0)+(b<<1)>>>2,l=(a+l|0)+(l<<1)>>>2|0,m[i+65|0]=l,m[i+3|0]=g,m[i+35|0]=l}function vt(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0;if(m[b|0]=T[i|0],j=a+-1|0,A=1,(a|0)>=2)for(P=b+1|0,U=i+1|0;m[x+P|0]=T[x+U|0]-T[i+x|0],x=x+1|0,(j|0)!=(x|0););if((l|0)>=2)for(P=(a|0)<2;;){if(b=g+b|0,a=i+g|0,m[b|0]=T[a|0]-T[i|0],!P)for(i=b+1|0,U=a+1|0,x=0;m[i+x|0]=T[x+U|0]-T[a+x|0],x=x+1|0,(j|0)!=(x|0););if(i=a,A=A+1|0,(A|0)==(l|0))break}}function xt(i){i=i|0;var a=0,l=0,g=0,b=0,x=0,A=0;l=T[i+-30|0],a=l+2|0,g=T[i+-29|0],b=T[i+-28|0]+(a+(g<<1)|0)>>>2|0,m[i+99|0]=b,x=T[i+-31|0],A=x+2|0,g=g+(A+(l<<1)|0)>>>2|0,m[i+98|0]=g,l=a,a=T[i+-32|0],l=(l+a|0)+(x<<1)>>>2|0,m[i+97|0]=l,a=(T[i+-33|0]+A|0)+(a<<1)>>>2|0,m[i+96|0]=a,m[i+67|0]=b,m[i+66|0]=g,m[i+65|0]=l,m[i+64|0]=a,m[i+35|0]=b,m[i+34|0]=g,m[i+33|0]=l,m[i+32|0]=a,m[i+3|0]=b,m[i+2|0]=g,m[i+1|0]=l,m[i|0]=a}function tr(i,a){i=i|0,a=a|0;var l=0,g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;return a=h[a>>2],j=h[a+24>>2],x=a+40|0,X=h[x>>2],g=h[a+20>>2],A=a+36|0,b=h[A>>2],l=h[a+16>>2],P=h[i+8>>2],a=h[a+32>>2],ne=l+K(P,a)|0,l=a,a=h[i+12>>2],U=h[i+16>>2],kt(h[i+20>>2],h[i+32>>2],ne,l,a,U),l=b,b=P>>1,l=g+K(l,b)|0,a=(a+1|0)/2|0,g=(U+1|0)/2|0,kt(h[i+24>>2],h[i+36>>2],l,h[A>>2],a,g),kt(h[i+28>>2],h[i+36>>2],K(b,X)+j|0,h[x>>2],a,g),h[i+16>>2]}function cr(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0;if((g|0)>=1)for(j=a?0:3,X=(a|0)!=0,ne=(l|0)<1;;){if(!ne)for(me=i+j|0,U=i+X|0,a=0;x=a<<2,A=T[x+me|0],(A|0)!=255&&(P=x+U|0,A=K(A,32897),m[P|0]=K(A,T[P|0])>>>23,P=(x|1)+U|0,m[P|0]=K(A,T[P|0])>>>23,x=(x|2)+U|0,m[x|0]=K(A,T[x|0])>>>23),a=a+1|0,(l|0)!=(a|0););if(i=i+b|0,a=(g|0)>1,g=g+-1|0,!a)break}}function Ar(i,a){var l=0;l=(a|0)!=0;e:{t:{r:{if(!a|!(i&3))break r;for(;;){if(!T[i|0])break t;if(i=i+1|0,a=a+-1|0,l=(a|0)!=0,!a)break r;if(!(i&3))break}}if(!l)break e}t:{if(!T[i|0]|a>>>0<4)break t;for(;;){if(l=h[i>>2],(l^-1)&l+-16843009&-2139062144)break t;if(i=i+4|0,a=a+-4|0,!(a>>>0>3))break}}if(!a)break e;for(;;){if(!T[i|0])return i;if(i=i+1|0,a=a+-1|0,!a)break}}return 0}function Dt(i){i=i|0;var a=0;a=K((T[i+95|0]+(T[i+-29|0]+(T[i+63|0]+(T[i+-30|0]+(T[i+31|0]+(T[i+-31|0]+(T[i+-32|0]+T[i+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24}function Lr(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0,X=0;if((l|0)>=1)for(b=h[g+-4>>2];x=U<<2,A=x+a|0,P=h[A+4>>2],X=g+x|0,j=h[A>>2],P=((P^j)>>>1&2139062143)+(P&j)|0,A=h[A+-4>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,b=((P^b)>>>1&2139062143)+(b&P)|0,x=h[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,h[X>>2]=b,U=U+1|0,(U|0)!=(l|0););}function Ir(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0,je=0,st=0;for(ne=0-a|0,me=0-(a<<1)|0,Ie=l<<1|1,P=h[2548],U=h[2547],je=h[2546],j=h[2549];l=i+b|0,X=l+ne|0,x=T[X|0],A=T[l|0],g=T[l+me|0]-T[a+l|0]|0,((T[(x-A|0)+j|0]<<2)+T[g+j|0]|0)<=(Ie|0)&&(g=m[g+je|0]+K(A-x|0,3)|0,st=m[(g+4>>3)+U|0],m[X|0]=T[(m[(g+3>>3)+U|0]+x|0)+P|0],m[l|0]=T[(A-st|0)+P|0]),b=b+1|0,(b|0)!=16;);}function Zr(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((l|0)>=1)for(;x=P<<2,U=Pr[a+2>>1],j=Pr[i>>1],X=Pr[a>>1],ne=Pr[i+2>>1],A=kn[x+g>>1]+(((U+K(j,9)|0)+K(X+ne|0,3)|0)+8>>4)|0,A=(A|0)<1023?A:1023,Pr[b+x>>1]=(A|0)>0?A:0,A=x|2,x=kn[A+g>>1]+(((K(ne,9)+X|0)+K(U+j|0,3)|0)+8>>4)|0,x=(x|0)<1023?x:1023,Pr[b+A>>1]=(x|0)>0?x:0,a=a+2|0,i=i+2|0,P=P+1|0,(P|0)!=(l|0););}function Gr(i){var a=0,l=0,g=0;if(h[i+24>>2]<=0){e:{if(h[i+4>>2]){tt[h[2808]](i);break e}if(!h[i+20>>2]){if((K(h[i+52>>2],h[i+8>>2])|0)<1)break e;for(l=h[i+76>>2];g=a<<2,m[h[i+68>>2]+a|0]=h[g+l>>2],l=h[i+76>>2],h[g+l>>2]=0,a=a+1|0,(a|0)<(K(h[i+52>>2],h[i+8>>2])|0););break e}tt[h[2809]](i)}h[i+24>>2]=h[i+24>>2]+h[i+28>>2],h[i+68>>2]=h[i+68>>2]+h[i+72>>2],h[i+64>>2]=h[i+64>>2]+1}}function mn(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0;if((g|0)>=1)for(;b=kn[i+2>>1],x=kn[i>>1],P=kn[i+4>>1],U=(K(b,-19081)+K(x,-9719)|0)+K(P,28800)|0,j=U+33685504>>18,m[a+A|0]=j>>>0<256?j:(U|0)<-33685504?-33685504:255,b=(K(b,-24116)+K(x,28800)|0)+K(P,-4684)|0,x=b+33685504>>18,m[l+A|0]=x>>>0<256?x:(b|0)<-33685504?-33685504:255,i=i+8|0,A=A+1|0,(A|0)!=(g|0););}function qr(i,a,l,g,b){var x=0,A=0,P=0,U=0,j=0,X=0,ne=0;U=h[i+16>>2],A=h[i+8>>2],i=h[i+4>>2],P=8>>>i|0;e:{if((P|0)<=7){if((a|0)>=(l|0))break e;for(j=-1<<P^-1,X=-1<<i^-1,ne=(A|0)<1;;){if(x=0,i=0,!ne)for(;x&X||(i=T[g|0],g=g+1|0),m[b|0]=h[((i&j)<<2)+U>>2]>>>8,i=i>>>P|0,b=b+1|0,x=x+1|0,(x|0)!=(A|0););if(a=a+1|0,(l|0)==(a|0))break}break e}tt[h[2732]](g,U,b,a,l,A)}}function zn(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0;x=h[a>>2],l=h[x+28>>2],A=h[x+44>>2],g=l+K(A,h[i+8>>2])|0,b=h[i+16>>2],P=h[i+12>>2],a=h[i+104>>2];e:{if(a){if((b|0)<1)break e;for(l=0;g=oo(g,a,P)+h[x+44>>2]|0,a=h[i>>2]+a|0,l=l+1|0,(b|0)!=(l|0););break e}if(!l|(b|0)<1)break e;for(a=0;g=ua(g,255,P)+A|0,a=a+1|0,(b|0)!=(a|0););}return 0}function En(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0,me=0,Ie=0;for(ne=l<<1|1,P=h[2548],U=h[2547],me=h[2546],j=h[2549];l=K(a,b)+i|0,X=l+-1|0,x=T[X|0],A=T[l|0],g=T[l+-2|0]-T[l+1|0]|0,((T[(x-A|0)+j|0]<<2)+T[g+j|0]|0)<=(ne|0)&&(g=m[g+me|0]+K(A-x|0,3)|0,Ie=m[(g+4>>3)+U|0],m[X|0]=T[(m[(g+3>>3)+U|0]+x|0)+P|0],m[l|0]=T[(A-Ie|0)+P|0]),b=b+1|0,(b|0)!=16;);}function Vn(i,a){i=i|0,a=a|0;var l=0,g=0;return l=h[a>>2],i=((l^i)>>>1&2139062143)+(i&l)|0,l=i&255,a=h[a+-4>>2],l=((l-(a&255)|0)/2|0)+l|0,g=l>>>0<256?l:(l^-1)>>>24|0,l=i>>>24|0,l=((l-(a>>>24|0)|0)/2|0)+l|0,g=g|(l>>>0<256?l:l>>>24^-1)<<24,l=i>>>16&255,l=((l-(a>>>16&255)|0)/2|0)+l|0,i=i>>>8&255,i=((i-(a>>>8&255)|0)/2|0)+i|0,g|(l>>>0<256?l:(l^-1)>>>24|0)<<16|(i>>>0<256?i:(i^-1)>>>24|0)<<8}function Ti(i,a,l){var g=0;if(h[i+24>>2]=0,h[i+8>>2]=-8,h[i>>2]=0,h[i+4>>2]=254,h[i+12>>2]=a,g=a+l|0,h[i+16>>2]=g,g=l>>>0>3?g+-3|0:a,h[i+20>>2]=g,g>>>0>a>>>0){l=T[a|0]|T[a+1|0]<<8|(T[a+2|0]<<16|T[a+3|0]<<24),h[i+8>>2]=16,h[i+12>>2]=a+3,h[i>>2]=(l>>>8&65280|(l<<8&16711680|l<<24))>>>8;return}if((l|0)>=1){h[i+8>>2]=0,h[i+12>>2]=a+1,h[i>>2]=T[a|0];return}h[i+24>>2]=1,h[i+8>>2]=0,h[i>>2]=0}function Di(i,a,l){var g=0,b=0,x=0,A=0;g=h[l+16>>2];e:{if(!g){if(da(l))break e;g=h[l+16>>2]}if(x=h[l+20>>2],g-x>>>0<a>>>0)return tt[h[l+36>>2]](l,i,a)|0;t:{if(m[l+75|0]<0)break t;for(b=a;;){if(g=b,!g)break t;if(b=g+-1|0,T[b+i|0]==10)break}if(b=tt[h[l+36>>2]](l,i,g)|0,b>>>0<g>>>0)break e;i=i+g|0,a=a-g|0,x=h[l+20>>2],A=g}oo(x,i,a),h[l+20>>2]=h[l+20>>2]+a,b=a+A|0}return b}function N(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if((l|0)>=1)for(X=(a|0)<1;;){if(A=0,!X)for(;b=A<<1,x=b+i|0,ne=x,j=(b|1)+i|0,P=T[j|0],b=P&15,U=K(b,4369),x=T[x|0],m[ne|0]=K(U,x&240|x>>>4)>>>16&240|K((x&15|x<<4)&255,U)>>>20,m[j|0]=K(P&240|P>>>4,U)>>>16&240|b,A=A+1|0,(A|0)!=(a|0););if(i=i+g|0,b=(l|0)>1,l=l+-1|0,!b)break}}function $(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0,A=0,P=0,U=0;if(m[b|0]=T[i|0],(a|0)>=2)for(P=a+-1|0,A=b+1|0,U=i+1|0;m[x+A|0]=T[x+U|0]-T[i+x|0],x=x+1|0,(P|0)!=(x|0););if((l|0)>=2)for(A=1;;){if(b=g+b|0,P=i+g|0,x=0,(a|0)>=1)for(;m[b+x|0]=T[x+P|0]-T[i+x|0],x=x+1|0,(x|0)!=(a|0););if(i=P,A=A+1|0,(A|0)==(l|0))break}}function re(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0;if((a|0)>=1)for(;g=(x<<2)+i|0,b=h[g>>2],b>>>0<=4278190079&&(A=g,b>>>0>=16777216?(g=b>>>24|0,l?g=4278190080/(g>>>0)|0:g=K(g,65793),g=K(g,b>>>16&255)+8388608>>>8&16711680|(K(g,b>>>8&255)+8388608>>>16&65280|(b&-16777216|K(g,b&255)+8388608>>>24))):g=0,h[A>>2]=g),x=x+1|0,(x|0)!=(a|0););}function fe(i,a,l){var g=0,b=0,x=0,A=0,P=0,U=0,j=0,X=0,ne=0;if(h[i+20>>2]=0,h[i+24>>2]=0,h[i>>2]=0,h[i+4>>2]=0,h[i+12>>2]=l,x=l>>>0<8?l:8,x)for(ne=x,l=0;A=T[a+l|0],b=P<<3,g=b&31,32<=(b&63)>>>0?(b=A<<g,g=0):(b=(1<<g)-1&A>>>32-g,g=A<<g),U=g|U,j=b|j,l=l+1|0,g=P+1|0,g>>>0<1&&(X=X+1|0),P=g,!!((ne|0)!=(g|0)|X););h[i+16>>2]=x,h[i>>2]=U,h[i+4>>2]=j,h[i+8>>2]=a}function Le(i,a){var l=0,g=0,b=0;l=0;e:{if(!i)break e;if(!a)return h[i>>2]=2,0;h[i>>2]=0,h[i+8>>2]=a,l=i+24|0,fe(l,h[a+64>>2],h[a+60>>2]);t:{r:{n:{if((ho(l,8)|0)!=47||(b=ho(l,14),g=ho(l,14),ho(l,1),ho(l,3)))break n;if(!h[i+48>>2])break r}h[i>>2]=3;break t}if(h[i+4>>2]=2,g=g+1|0,h[a+4>>2]=g,l=a,a=b+1|0,h[l>>2]=a,l=1,gn(a,g,1,i,0))break e}jo(i),l=0}return l}function Be(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;e:{if(!i){if((g|0)<1)break e;for(;b=T[a+x|0]+b|0,m[l+x|0]=b,x=x+1|0,(x|0)!=(g|0););break e}if((g|0)<1)break e;for(b=T[i|0],A=b,P=b;;){if(A=(A&255)-(P&255)|0,P=b,b=(b&255)+A|0,b=(b|0)>0?b:0,A=T[a+x|0]+((b|0)<255?b:255)|0,m[l+x|0]=A,x=x+1|0,(x|0)==(g|0))break e;b=T[i+x|0]}}}function qe(i,a,l,g){var b=0,x=0,A=0,P=0;return b=h[g>>2],x=h[l>>2],x|(a|0)<1||(P=Ei(b,b>>31,i,i>>31),x=a+P|0,A=jn,A=x>>>0<P>>>0?A+1|0:A,x=x+-1|0,A=A+-1|0,x=a0(x,(x|0)!=-1?A+1|0:A,a,0)),b|(i|0)<1||(A=Ei(x,x>>31,a,a>>31),b=A+i|0,a=jn,a=b>>>0<A>>>0?a+1|0:a,b=b+-1|0,a=a+-1|0,b=a0(b,(b|0)!=-1?a+1|0:a,i,0)),i=0,(x|0)<1|(b|0)<1||(h[l>>2]=x,h[g>>2]=b,i=1),i}function Ke(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0;if((l|0)>=1)for(b=h[g+-4>>2];x=U<<2,A=x+a|0,P=h[A+4>>2],b=((P^b)>>>1&2139062143)+(b&P)|0,P=g+x|0,A=h[A>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,x=h[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,h[P>>2]=b,U=U+1|0,(U|0)!=(l|0););}function it(i,a){i=i|0,a=a|0;var l=0,g=0,b=0;return g=h[a>>2],a=h[a+-4>>2],l=((g&255)+(i&255)|0)-(a&255)|0,b=l>>>0<256?l:(l^-1)>>>24|0,l=(g>>>24)+(i>>>24)-(a>>>24)|0,b=b|(l>>>0<256?l:l>>>24^-1)<<24,l=((g>>>16&255)+(i>>>16&255)|0)-(a>>>16&255)|0,i=((g>>>8&255)+(i>>>8&255)|0)-(a>>>8&255)|0,b|(l>>>0<256?l:(l^-1)>>>24|0)<<16|(i>>>0<256?i:(i^-1)>>>24|0)<<8}function _t(i,a,l,g,b){var x=0;e:{if(!i|a>>>0<10|(T[i+3|0]!=157|T[i+4|0]!=1)||T[i+5|0]!=42||(a=T[i|0],(a&25)!=16|(a|T[i+1|0]<<8|T[i+2|0]<<16)>>>5>>>0>=l>>>0)||(a=T[i+6|0]|T[i+7|0]<<8&16128,!a)||(i=T[i+8|0]|T[i+9|0]<<8&16128,!i)||(g&&(h[g>>2]=a),x=1,!b))break e;h[b>>2]=i}return x}function rr(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0,P=0,U=0;e:{if(g=h[i+104>>2],!g|(l|0)<1)break e;for(P=h[a+16>>2]+l|0,b=h[a+36>>2];;){if(x=h[i+8>>2],A=h[b+60>>2],U=g,g=h[i>>2],wa(b,h[i+16>>2]+(x-A|0)|0,U+K(g,A-x|0)|0,g),l=l-(tt[h[a+52>>2]](a,P-l|0,l)|0)|0,(l|0)<1)break e;g=h[i+104>>2]}}return 0}function Er(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0,X=0;if((l|0)>=1)for(U=m[i+2|0],j=m[i+1|0],X=m[i|0];x=b<<2,i=h[x+a>>2],A=i<<16>>24,P=(K(A,X)>>5)+(i>>>16|0)|0,h[g+x>>2]=i+(K(j,A)>>>5|0)+(K(P<<24>>24,U)>>>5)&255|(P<<16&16711680|i&-16711936),b=b+1|0,(b|0)!=(l|0););}function kr(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(P=a+-4|0,a=h[g+-4>>2];b=A<<2,x=h[b+P>>2],a=((x^a)>>>1&2139062143)+(a&x)|0,x=g+b|0,b=h[i+b>>2],a=(a&-16711936)+(b&-16711936)&-16711936|(a&16711935)+(b&16711935)&16711935,h[x>>2]=a,A=A+1|0,(A|0)!=(l|0););}function hr(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0;if((l|0)>=1)for(;b=P<<2,x=b+a|0,A=h[x>>2],U=g+b|0,x=h[x+-4>>2],A=((x^A)>>>1&2139062143)+(A&x)|0,b=h[i+b>>2],h[U>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,P=P+1|0,(P|0)!=(l|0););}function fn(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0;if((l|0)>=1)for(;b=P<<2,x=b+a|0,A=h[x+4>>2],U=g+b|0,x=h[x>>2],A=((x^A)>>>1&2139062143)+(A&x)|0,b=h[i+b>>2],h[U>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,P=P+1|0,(P|0)!=(l|0););}function zr(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(b=h[g+-4>>2];x=P<<2,A=h[x+a>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,A=g+x|0,x=h[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,h[A>>2]=b,P=P+1|0,(P|0)!=(l|0););}function zt(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0,U=0,j=0;if((g|0)>=1)for(;x=A<<1,b=x+l|0,j=b,x=kn[i+x>>1]-kn[a+x>>1]|0,b=x+kn[b>>1]|0,b=(b|0)<1023?b:1023,Pr[j>>1]=(b|0)>0?b:0,b=x>>31,x=b+x^b,b=P+x|0,b>>>0<x>>>0&&(U=U+1|0),P=b,A=A+1|0,(A|0)!=(g|0););return jn=U,P|0}function Xt(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,U=0,j=0,X=0;if(P=255,(g|0)>=1)for(X=(l|0)<1;;){if(A=0,!X)for(;U=T[(A<<2)+i|0],m[b+A|0]=U,P=P&U,A=A+1|0,(A|0)!=(l|0););if(b=b+x|0,i=i+a|0,j=j+1|0,(j|0)==(g|0))break}return(P&255)==255|0}function Hr(i,a,l){var g=0,b=0,x=0;e:{if((a|0)==1&i>>>0<0|a>>>0<1){g=i;break e}for(;g=a0(i,a,10,0),b=jn,x=b,b=Ei(g,b,10,0),l=l+-1|0,m[l|0]=i-b|48,b=a>>>0>9,i=g,a=x,!!b;);}if(g)for(;l=l+-1|0,i=(g>>>0)/10|0,m[l|0]=g-K(i,10)|48,a=g>>>0>9,g=i,!!a;);return l}function en(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,U=0,j=0,X=0;if(P=255,(g|0)>=1)for(X=(l|0)<1;;){if(A=0,!X)for(;U=T[i+A|0],m[(A<<2)+b|0]=U,P=P&U,A=A+1|0,(A|0)!=(l|0););if(b=b+x|0,i=i+a|0,j=j+1|0,(j|0)==(g|0))break}return(P|0)!=255|0}function Wr(i,a,l,g,b){var x=0,A=0,P=0;x=qn-32|0,qn=x;e:{if(!i|a>>>0<5|(T[i|0]!=47|T[i+4|0]>31)||(fe(x,i,a),(ho(x,8)|0)!=47)||(i=ho(x,14),a=ho(x,14),A=ho(x,1),ho(x,3)|h[x+24>>2])||(l&&(h[l>>2]=i+1),g&&(h[g>>2]=a+1),P=1,!b))break e;h[b>>2]=A}return qn=x+32|0,P}function On(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(;;){b=T[a+x|0];e:{if((b|0)==255)break e;if(!b){m[i+x|0]=0;break e}A=i+x|0,P=A,g?b=4278190080/(b>>>0)|0:b=K(b,65793),m[P|0]=K(b,T[A|0])+8388608>>>24}if(x=x+1|0,(x|0)==(l|0))break}}function In(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0;e:{if(i){if((g|0)<=0)break e;for(;m[l+b|0]=T[a+b|0]+T[i+b|0],b=b+1|0,(b|0)!=(g|0););break e}if((g|0)<1)break e;for(i=0;i=T[a+b|0]+i|0,m[l+b|0]=i,b=b+1|0,(b|0)!=(g|0););}}function Ci(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(A=a+-4|0,a=0;b=a<<2,x=h[b+i>>2],P=g+b|0,b=h[b+A>>2],h[P>>2]=(x&-16711936)+(b&-16711936)&-16711936|(x&16711935)+(b&16711935)&16711935,a=a+1|0,(l|0)!=(a|0););}function Fn(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,U=0;if((g|0)>=1)for(P=(l|0)<1,U=x<<2;;){if(x=0,!P)for(;h[(x<<2)+b>>2]=T[i+x|0]<<8,x=x+1|0,(x|0)!=(l|0););if(i=i+a|0,b=b+U|0,A=A+1|0,(A|0)==(g|0))break}}function Co(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)<(b|0))for(P=(x|0)<1;;){if(A=0,!P)for(;h[l>>2]=h[(h[i>>2]>>>6&1020)+a>>2],l=l+4|0,i=i+4|0,A=A+1|0,(A|0)!=(x|0););if(g=g+1|0,(b|0)==(g|0))break}}function Po(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(A=a+4|0,a=0;b=a<<2,x=h[b+i>>2],P=g+b|0,b=h[b+A>>2],h[P>>2]=(x&-16711936)+(b&-16711936)&-16711936|(x&16711935)+(b&16711935)&16711935,a=a+1|0,(l|0)!=(a|0););}function ao(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)<(b|0))for(P=(x|0)<1;;){if(A=0,!P)for(;m[l|0]=h[(T[i|0]<<2)+a>>2]>>>8,l=l+1|0,i=i+1|0,A=A+1|0,(A|0)!=(x|0););if(g=g+1|0,(b|0)==(g|0))break}}function Gi(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0,P=0;if((l|0)>=1)for(;b=x<<2,A=h[b+i>>2],P=g+b|0,b=h[a+b>>2],h[P>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,x=x+1|0,(x|0)!=(l|0););}function Eo(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0;if((l|0)>=1)for(a=h[g+-4>>2];x=b<<2,A=h[x+i>>2],a=(A&-16711936)+(a&-16711936)&-16711936|(A&16711935)+(a&16711935)&16711935,h[g+x>>2]=a,b=b+1|0,(b|0)!=(l|0););}function Mo(){var i=0,a=0;i=ul(1,0,2376);e:{if(!i||(h[i>>2]=0,h[i+8>>2]=5010,tt[h[2557]](i+124|0),h[i+312>>2]=0,h[i+4>>2]=0,h[2661]))break e;t:{if(a=h[2673],!a||!(tt[a|0](2)|0))break t;return h[2661]=19,i}h[2661]=20}return i}function Qi(i,a,l){var g=0,b=0;return g=2,!i|!l||(h[l>>2]=0,h[l+4>>2]=0,h[l+32>>2]=0,h[l+36>>2]=0,h[l+24>>2]=0,h[l+28>>2]=0,b=l+16|0,g=b,h[g>>2]=0,h[g+4>>2]=0,g=l+8|0,h[g>>2]=0,h[g+4>>2]=0,g=El(i,a,l,l+4|0,g,l+12|0,b,0)),g}function Fa(i,a,l,g){var b=0,x=0,A=0,P=0,U=0,j=0;return b=l>>>16|0,x=i>>>16|0,j=K(b,x),A=l&65535,P=i&65535,U=K(A,P),x=(U>>>16|0)+K(x,A)|0,b=(x&65535)+K(b,P)|0,i=(K(a,l)+j|0)+K(i,g)+(x>>>16)+(b>>>16)|0,a=U&65535|b<<16,jn=i,a}function Fi(i){var a=0;if(a=h[i+12>>2],a>>>0<ii[i+16>>2]){h[i+12>>2]=a+1,h[i+8>>2]=h[i+8>>2]+8,h[i>>2]=T[a|0]|h[i>>2]<<8;return}if(!h[i+24>>2]){h[i+24>>2]=1,h[i>>2]=h[i>>2]<<8,h[i+8>>2]=h[i+8>>2]+8;return}h[i+8>>2]=0}function pa(i,a){i=i|0,a=a|0;var l=0;return a=h[a>>2],l=h[a+20>>2],E0(h[i+20>>2],h[i+32>>2],h[i+24>>2],h[i+28>>2],h[i+36>>2],K(l,h[i+8>>2])+h[a+16>>2]|0,l,h[i+12>>2],h[i+16>>2],h[(h[a>>2]<<2)+11376>>2]),h[i+16>>2]}function Ha(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0;if((l|0)>=1)for(;b=h[(g<<2)+i>>2],m[a+g|0]=((K(b&255,6420)+K(b>>>16&255,16839)|0)+K(b>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(l|0););}function vo(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0;b=qn-16|0,qn=b;e:{if(!Vf(xu(h[i+60>>2],a|0,l|0,g&255,b+8|0)|0)){a=h[b+12>>2],i=h[b+8>>2];break e}h[b+8>>2]=-1,h[b+12>>2]=-1,a=-1,i=-1}return qn=b+16|0,jn=a,i|0}function ya(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)>=1)for(;h[(P<<2)+x>>2]=T[l+A|0]|(T[i+A|0]<<16|T[a+A|0]<<8)|-16777216,A=b+A|0,P=P+1|0,(P|0)!=(g|0););}function Ba(i,a,l){i=i|0,a=a|0,l=l|0;var g=0,b=0,x=0,A=0;if((a|0)>=1)for(;x=g<<2,b=h[x+i>>2],A=b>>>8&255,h[l+x>>2]=(b&16711935)+(A<<16|A)&16711935|b&-16711936,g=g+1|0,(g|0)!=(a|0););}function Wa(i){i&&(tt[h[2562]](i+124|0),W0(i),$i(h[i+2288>>2]),h[i+2288>>2]=0,h[i+2292>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,h[i+4>>2]=0,$i(i))}function Wo(i,a,l,g,b){var x=0;if(x=qn-256|0,qn=x,!(b&73728|(l|0)<=(g|0))){if(l=l-g|0,g=l>>>0<256,ua(x,a&255,g?l:256),!g)for(;yf(i,x,256),l=l+-256|0,l>>>0>255;);yf(i,x,l)}qn=x+256|0}function ss(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=((K(T[i+2|0],16839)+K(T[i+1|0],33059)|0)+K(T[i|0],6420)|0)+1081344>>>16,i=i+3|0,g=g+1|0,(g|0)!=(l|0););}function Bs(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=((K(T[i|0],16839)+K(T[i+1|0],33059)|0)+K(T[i+2|0],6420)|0)+1081344>>>16,i=i+3|0,g=g+1|0,(g|0)!=(l|0););}function $o(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=h[i>>2],m[l+2|0]=a,m[l+3|0]=a>>>24,m[l+1|0]=a>>>8,m[l|0]=a>>>16,l=l+4|0,i=i+4|0,i>>>0<g>>>0;);}function Ia(i,a,l,g){var b=0,x=0;b=qn-1024|0,qn=b;e:{if(!i){g=za(0,a,l,g,0);break e}if((g|0)<=512){g=za(i,a,l,g,b);break e}if(x=La(g,0,2),!x){g=0;break e}g=za(i,a,l,g,x),$i(x)}return qn=b+1024|0,g}function nu(){var i=0;i=h[2673],(i|0)!=h[2555]&&(h[2854]=136,h[2853]=137,h[2852]=138,h[2851]=139,h[2850]=140,h[2849]=136,h[2848]=137,h[2847]=138,h[2846]=141,h[2845]=139,h[2844]=142,h[2555]=i)}function js(){var i=0;i=h[2673],(i|0)!=h[2553]&&(h[2831]=129,h[2829]=130,h[2838]=131,h[2837]=132,h[2836]=129,h[2835]=130,h[2834]=133,h[2833]=131,h[2832]=132,h[2830]=134,h[2828]=135,h[2553]=i)}function Ks(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=h[i>>2],m[l+1|0]=a>>>5&224|a>>>3&31,m[l|0]=a>>>16&248|a>>>13&7,l=l+2|0,i=i+4|0,i>>>0<g>>>0;);}function Qs(){var i=0;i=h[2673],(i|0)!=h[2554]&&(h[2820]=122,h[2819]=123,h[2815]=122,h[2813]=123,h[2822]=124,h[2821]=125,h[2818]=126,h[2817]=124,h[2816]=125,h[2814]=127,h[2812]=128,h[2554]=i)}function da(i){var a=0;return a=T[i+74|0],m[i+74|0]=a+-1|a,a=h[i>>2],a&8?(h[i>>2]=a|32,-1):(h[i+4>>2]=0,h[i+8>>2]=0,a=h[i+44>>2],h[i+28>>2]=a,h[i+20>>2]=a,h[i+16>>2]=a+h[i+48>>2],0)}function k0(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=h[i>>2],m[l+1|0]=a&240|a>>>28,m[l|0]=a>>>16&240|a>>>12&15,l=l+2|0,i=i+4|0,i>>>0<g>>>0;);}function H0(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0;if((l|0)>=1)for(a=0;b=a<<2,x=h[b+i>>2],h[g+b>>2]=x+-16777216&-16711936|x&16711935,a=a+1|0,(l|0)!=(a|0););}function zl(i,a){i=i|0,a=a|0,kn[i>>1]&&tt[h[2706]](i,a),kn[i+32>>1]&&tt[h[2706]](i+32|0,a+4|0),kn[i+64>>1]&&tt[h[2706]](i- -64|0,a+128|0),kn[i+96>>1]&&tt[h[2706]](i+96|0,a+132|0)}function fa(){var i=0;i=h[2673],(i|0)!=h[2544]&&(h[2663]=21,h[2662]=22,h[2665]=23,h[2670]=24,h[2664]=25,h[2666]=26,h[2667]=27,h[2668]=28,h[2669]=29,h[2671]=30,h[2672]=31,h[2544]=i)}function yc(i,a){i=i|0,a=a|0;var l=0,g=0;return l=h[a>>2],g=h[a+4>>2],l=((l^g)>>>1&2139062143)+(l&g)|0,a=h[a+-4>>2],i=((a^i)>>>1&2139062143)+(i&a)|0,((l^i)>>>1&2139062143)+(i&l)|0}function A0(i){i=i|0;var a=0,l=0,g=0;return h[i+12>>2]<1|h[i+16>>2]<1||(a=h[i+40>>2],l=tt[h[a+44>>2]](i,a)|0,g=h[a+48>>2],g&&tt[g|0](i,a,l)|0,h[a+16>>2]=h[a+16>>2]+l,a=1),a|0}function Us(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0,A=0;if((g|0)>=1)for(;x=b<<1,A=x+l|0,Pr[A>>1]=kn[A>>1]+(kn[i+x>>1]-kn[a+x>>1]|0),b=b+1|0,(b|0)!=(g|0););}function qs(i){var a=0,l=0;a=h[3008],l=i+3&-4,i=a+l|0;e:{if(i>>>0<=a>>>0&&(l|0)>=1||i>>>0>jd()<<16>>>0&&!(bu(i|0)|0))break e;return h[3008]=i,a}return h[2865]=48,-1}function iu(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=h[i>>2],m[l|0]=a,m[l+2|0]=a>>>16,m[l+1|0]=a>>>8,l=l+3|0,i=i+4|0,i>>>0<g>>>0;);}function Qu(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=h[i>>2],m[l+2|0]=a,m[l+1|0]=a>>>8,m[l|0]=a>>>16,l=l+3|0,i=i+4|0,i>>>0<g>>>0;);}function E0(i,a,l,g,b,x,A,P,U,j){var X=0,ne=0;if((U|0)>=1)for(;tt[j|0](i,l,g,x,P),ne=X&1,l=ne?l+b|0:l,g=ne?g+b|0:g,x=x+A|0,i=i+a|0,X=X+1|0,(X|0)!=(U|0););}function vc(i,a){var l=0,g=0,b=0;l=0;e:{if(!i||(g=Ei(i,0,a,0),b=jn,l=g,(i|a)>>>0<65536))break e;l=b?-1:g}return a=l,i=zs(a),!i|!(T[i+-4|0]&3)||ua(i,0,a),i}function _c(i,a){i=i|0,a=a|0;var l=0,g=0,b=0;e:{if((a|0)<=0)break e;for(;;){if(T[i+l|0]==255){if(l=l+4|0,g=(a|0)<2,a=a+-1|0,!g)continue;break e}break}b=1}return b|0}function bc(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0;var b=0,x=0;if(b=i?T[i|0]:b,(g|0)>=1)for(;b=T[a+x|0]+b|0,m[l+x|0]=b,x=x+1|0,(x|0)!=(g|0););}function wc(i){var a=0;e:{if(h[i+64>>2]>=h[i+56>>2])break e;for(;;){if(h[i+24>>2]>0)break e;if(a=a+1|0,Gr(i),!(h[i+64>>2]<h[i+56>>2]))break}}return a}function Bc(i,a){var l=0,g=0,b=0,x=0;l=4;e:{for(;;){if(g=T[i|0],b=T[a|0],(g|0)==(b|0)){if(a=a+1|0,i=i+1|0,l=l+-1|0,l)continue;break e}break}x=g-b|0}return x}function hs(){var i=0;i=h[2673],(i|0)!=h[2556]&&(h[2861]=143,h[2860]=144,h[2857]=145,h[2858]=146,h[2859]=147,h[2862]=148,h[2863]=149,h[2864]=150,h[2556]=i)}function Ja(i){var a=0,l=0,g=0;if($f(m[h[i>>2]]))for(;a=h[i>>2],g=m[a|0],h[i>>2]=a+1,l=(K(l,10)+g|0)+-48|0,!!$f(m[a+1|0]););return l}function La(i,a,l){var g=0,b=0,x=0;e:{if(i|a&&(b=a0(2147418112,0,i,a),g=jn,Ei(l,0,i,a),!g&b>>>0<l>>>0|g>>>0<0|jn>>>0>0))break e;x=zs(K(i,l))}return x}function ou(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0;var x=0;x=i,i=a<<2,x=x+i|0,Ki(x,a,1,16,l,g,b),x=i+x|0,Ki(x,a,1,16,l,g,b),Ki(i+x|0,a,1,16,l,g,b)}function n0(){var i=0;i=h[2673],(i|0)!=h[2550]&&(h[2731]=75,h[2730]=76,h[2729]=77,h[2728]=0,h[2727]=78,h[2726]=79,h[2725]=80,h[2724]=0,h[2550]=i)}function ul(i,a,l){var g=0,b=0,x=0;e:{if(i|a&&(b=a0(2147418112,0,i,a),g=jn,Ei(l,0,i,a),!g&b>>>0<l>>>0|g>>>0<0|jn>>>0>0))break e;x=vc(i,l)}return x}function W0(i){var a=0;$i(h[i+2360>>2]),h[i+2360>>2]=0,h[i+2364>>2]=0,a=h[i+2344>>2],a&&(_h(h[a+20>>2]),h[a+20>>2]=0,$i(a)),h[i+2344>>2]=0}function S0(i,a,l){i=i|0,a=a|0,l=l|0;var g=0;if((l|0)>=1)for(;m[a+g|0]=h[(g<<2)+i>>2]>>>8,g=g+1|0,(g|0)!=(l|0););}function i0(i,a,l,g){if(i|a)for(;l=l+-1|0,m[l|0]=T[(i&15)+10128|0]|g,i=(a&15)<<28|i>>>4,a=a>>>4|0,!!(i|a););return l}function va(i,a,l,g,b,x,A){var P=0;if((x|0)>=1)for(;tt[h[2663]](i,l,b,A),l=l+g|0,i=i+a|0,P=P+1|0,(P|0)!=(x|0););}function Z0(i,a){i=i|0,a=a|0;for(var l=0;;){if((a|0)<1)return 0;if(a=a+-1|0,l=T[i|0],i=i+1|0,(l|0)!=255)break}return 1}function ue(i,a){i=i|0,a=a|0;var l=0;return l=h[a+4>>2],i=((l^i)>>>1&2139062143)+(i&l)|0,a=h[a>>2],((i^a)>>>1&2139062143)+(i&a)|0}function xe(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0;var A=0;A=i,i=l<<2,Ki(A+i|0,l,1,8,g,b,x),Ki(i+a|0,l,1,8,g,b,x)}function $e(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,Ki(i+4|0,1,a,16,l,g,b),Ki(i+8|0,1,a,16,l,g,b),Ki(i+12|0,1,a,16,l,g,b)}function kt(i,a,l,g,b,x){var A=0;if((x|0)>=1)for(;l=oo(l,i,b)+g|0,i=i+a|0,A=(x|0)>1,x=x+-1|0,!!A;);}function nr(i,a,l){if(i|a)for(;l=l+-1|0,m[l|0]=i&7|48,i=(a&7)<<29|i>>>3,a=a>>>3|0,!!(i|a););return l}function sr(i,a,l,g,b,x,A,P,U,j){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,U=U|0,j=j|0,tt[i|0](a,l,g,b,x,A,P,U,j)}function Zt(i,a,l,g){var b=0;if((g|0)>=1)for(;tt[h[2662]](i,l,0),i=i+a|0,b=b+1|0,(b|0)!=(g|0););}function _r(){var i=0;i=h[2673],(i|0)!=h[2552]&&(h[2809]=118,h[2808]=119,h[2807]=120,h[2806]=121,h[2552]=i)}function Cr(i,a){var l=0;return l=1<<a,l=ul(l,l>>31,4),h[i>>2]=l,l?(h[i+8>>2]=a,h[i+4>>2]=32-a,1):0}function on(i,a){var l=0;return l=1,h[i+148>>2]>=1&&(l=tt[h[2559]](i+124|0)|0),i=h[a+52>>2],i&&tt[i|0](a),l}function yn(i){i=i|0;var a=0;a=h[i+8>>2],a&&(a=tt[a|0](h[i+12>>2],h[i+16>>2])|0,h[i+20>>2]=h[i+20>>2]|!a)}function ei(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,Ki(i+4|0,1,l,8,g,b,x),Ki(a+4|0,1,l,8,g,b,x)}function _n(i,a){var l=0;return l=h[i+24>>2],i=h[i+32>>2],i=((l+i|0)+-1|0)/(i|0)|0,(i|0)>(a|0)?a:i}function ti(i,a,l,g,b,x,A){return i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,tt[i|0](a,l,g,b,x,A)|0}function ui(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,Ca(i,1,l,8,g,b,x),Ca(a,1,l,8,g,b,x)}function Hi(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,Ca(i,l,1,8,g,b,x),Ca(a,l,1,8,g,b,x)}function so(i){i=i|0,h[i>>2]=0,h[i+4>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0}function _o(i,a,l,g,b){return i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,i=tt[i|0](a,l,g,b)|0,Zl(jn|0),i|0}function Uo(i,a){var l=0;return!a|h[i+12>>2]<2|h[i>>2]+-7>>>0>3||(l=h[a+8>>2]!=0),l}function Ta(i,a){return i=i|0,a=a|0,i=h[a>>2],a=h[a+-4>>2],((i^a)>>>1&2139062143)+(i&a)|0}function ja(i,a,l,g,b,x,A){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,A=A|0,tt[i|0](a,l,g,b,x,A)}function ta(i,a){var l=0,g=0;return l=a&31,g=(-1>>>l&i)<<l,l=i,i=0-a&31,g|(l&-1<<i)>>>i}function eo(i,a){return i=i|0,a=a|0,i=h[a+4>>2],a=h[a>>2],((i^a)>>>1&2139062143)+(i&a)|0}function bn(i,a){return i=i|0,a=a|0,a=h[a+-4>>2],((a^i)>>>1&2139062143)+(i&a)|0}function bi(i,a,l,g,b,x){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,x=x|0,tt[i|0](a,l,g,b,x)}function lo(i){e:{if(h[i+76>>2]<=-1){i=Di(1024,26,i);break e}i=Di(1024,26,i)}}function Wi(i,a){i=i|0,a=a|0,tt[h[2703]](i,a,1),tt[h[2703]](i- -64|0,a+128|0,1)}function Ka(i,a){return i=i|0,a=a|0,a=h[a>>2],((a^i)>>>1&2139062143)+(i&a)|0}function Pi(i,a,l){return h[i>>2]||(h[i+8>>2]=l,h[i>>2]=a,h[i+4>>2]=0),0}function uo(i,a,l){var g=0;g=qn-16|0,qn=g,h[g+12>>2]=l,vi(i,a,l),qn=g+16|0}function Do(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,Ca(i,1,a,16,l,g,b)}function qo(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,Ca(i,a,1,16,l,g,b)}function Go(i){return i=i|0,h[i+20>>2]=0,h[i+4>>2]||(h[i+4>>2]=1),1}function Vs(i,a){h[a+40>>2]=i,h[a+52>>2]=3,h[a+48>>2]=4,h[a+44>>2]=5}function xc(i,a){if(!h[i>>2]){tt[h[2806]](i,a);return}tt[h[2807]](i,a)}function kc(i,a,l,g,b){i=i|0,a=a|0,l=l|0,g=g|0,b=b|0,tt[i|0](a,l,g,b)}function ec(i,a,l){i=i|0,a=a|0,l=l|0,Zs(i,a),l&&Zs(i+32|0,a+4|0)}function jc(i,a,l,g){return i=i|0,a=a|0,l=l|0,g=g|0,tt[i|0](a,l,g)|0}function Nl(i){i&&(h[i+12>>2]<=0&&$i(h[i+80>>2]),h[i+80>>2]=0)}function o0(i){i=i|0,i=h[i+40>>2],$i(h[i+40>>2]),h[i+40>>2]=0}function C0(i,a,l,g){i=i|0,a=a|0,l=l|0,g=g|0,tt[i|0](a,l,g)}function Iu(i,a,l){return i=i|0,a=a|0,l=l|0,tt[i|0](a,l)|0}function gf(i){return i?31-Ri(i+-1^i)|0:32}function I0(i,a){oo(h[a>>2],h[i>>2],4<<h[a+8>>2])}function ls(i,a){return a=Mi(i,a),Mi(i,1)?0-a|0:a}function Vf(i){return i?(h[2865]=i,-1):0}function kp(i,a,l){i=i|0,a=a|0,l=l|0,tt[i|0](a,l)}function Ap(i,a){return i=i|0,a=a|0,tt[i|0](a)|0}function I2(i,a){return a=a|0,h[a+-4>>2]}function zd(i,a){return i?Se(i,a):0}function yf(i,a,l){T[i|0]&32||Di(a,l,i)}function L2(i){return i=i|0,i=qn-i&-16,qn=i,i|0}function T2(i,a){return a=a|0,h[a+4>>2]}function L0(i,a){return-16777216}function a0(i,a,l,g){return i=Xu(i,a,l,g),i}function Ei(i,a,l,g){return i=Fa(i,a,l,g),i}function s0(i){i&&($i(h[i>>2]),h[i>>2]=0)}function P2(i,a){return a=a|0,h[a>>2]}function M2(i){return i=i|0,Qc(h[i+60>>2])|0}function D2(i){return i=i|0,!h[i+20>>2]|0}function Nd(i,a){return i=i|0,i|0}function Rd(i,a){i=i|0,a=a|0,tt[i|0](a)}function z2(i){return i=i|0,O2(i|0)|0}function $f(i){return i+-48>>>0<10}function _h(i){i&&(jo(i),$i(i))}function Od(i){i&&ua(i,0,108)}function Ep(i){i=i|0,h[i+4>>2]=0}function vf(i){i&&ua(i,0,84)}function Gf(i){i&&$i(i)}function Fd(i,a){return jn=i,a}function N2(){return 11460}function R2(i){i=i|0,qn=i}function Hf(){return qn|0}function Bd(){}tt[1]=Yu,tt[2]=Zu,tt[3]=o0,tt[4]=Ns,tt[5]=A0,tt[6]=pa,tt[7]=t0,tt[8]=tr,tt[9]=eu,tt[10]=D,tt[11]=zn,tt[12]=ru,tt[13]=Oa,tt[14]=Ju,tt[15]=rr,tt[16]=Is,tt[17]=oi,tt[18]=aa,tt[19]=ku,tt[20]=ol,tt[21]=On,tt[22]=re,tt[23]=N,tt[24]=ya,tt[25]=cr,tt[26]=en,tt[27]=Fn,tt[28]=Xt,tt[29]=S0,tt[30]=Z0,tt[31]=_c,tt[32]=ec,tt[33]=Il,tt[34]=Fo,tt[35]=Tl,tt[36]=Wi,tt[37]=zl,tt[38]=qo,tt[39]=ou,tt[40]=Do,tt[41]=Hi,tt[42]=xe,tt[43]=Ir,tt[44]=En,tt[45]=ba,tt[46]=Dn,tt[47]=$e,tt[48]=ui,tt[49]=ei,tt[50]=Js,tt[51]=Ku,tt[52]=xt,tt[53]=k,tt[54]=Dt,tt[55]=St,tt[56]=ll,tt[57]=x0,tt[58]=gc,tt[59]=r0,tt[60]=te,tt[61]=qt,tt[62]=ur,tt[63]=As,tt[64]=Te,tt[65]=dc,tt[66]=Xr,tt[67]=sa,tt[68]=Ll,tt[69]=pc,tt[70]=Cl,tt[71]=Fs,tt[72]=Je,tt[73]=Kl,tt[74]=Ra,tt[75]=Be,tt[76]=In,tt[77]=bc,tt[78]=Dl,tt[79]=$,tt[80]=vt,tt[81]=L0,tt[82]=Vn,tt[83]=it,tt[84]=oe,tt[85]=yc,tt[86]=eo,tt[87]=Ta,tt[88]=Ka,tt[89]=bn,tt[90]=ue,tt[91]=I2,tt[92]=T2,tt[93]=P2,tt[94]=Nd,tt[95]=H0,tt[96]=Ho,tt[97]=Cu,tt[98]=mc,tt[99]=Lr,tt[100]=fn,tt[101]=hr,tt[102]=zr,tt[103]=kr,tt[104]=Ke,tt[105]=Ci,tt[106]=Po,tt[107]=Gi,tt[108]=Eo,tt[109]=Ba,tt[110]=Er,tt[111]=$o,tt[112]=Qu,tt[113]=iu,tt[114]=k0,tt[115]=Ks,tt[116]=Co,tt[117]=ao,tt[118]=Cs,tt[119]=Ys,tt[120]=se,tt[121]=d,tt[122]=Oi,tt[123]=xi,tt[124]=fo,tt[125]=Kn,tt[126]=Ji,tt[127]=Qo,tt[128]=Vo,tt[129]=xa,tt[130]=Fc,tt[131]=I,tt[132]=ca,tt[133]=as,tt[134]=q,tt[135]=J,tt[136]=cs,tt[137]=Ya,tt[138]=Os,tt[139]=Rs,tt[140]=Ga,tt[141]=al,tt[142]=Es,tt[143]=e0,tt[144]=Ha,tt[145]=Bs,tt[146]=ss,tt[147]=mn,tt[148]=zt,tt[149]=Us,tt[150]=Zr,tt[151]=so,tt[152]=Go,tt[153]=D2,tt[154]=yn,tt[155]=yn,tt[156]=Ep,tt[157]=M2,tt[158]=ia,tt[159]=vo;function jd(){return cn.byteLength/65536|0}function O2(i){i=i|0;var a=jd()|0,l=a+i|0;if(a<l&&l<65536){var g=new ArrayBuffer(K(l,65536)),b=new ar.Int8Array(g);b.set(m),m=b,m=new ar.Int8Array(g),Pr=new ar.Int16Array(g),h=new ar.Int32Array(g),T=new ar.Uint8Array(g),kn=new ar.Uint16Array(g),ii=new ar.Uint32Array(g),new ar.Float32Array(g),Lo=new ar.Float64Array(g),cn=g,Ln.buffer=g}return a}return{__wasm_call_ctors:Bd,WebpToSDL:Nc,memset:ua,memcpy:oo,malloc:zs,free:$i,__errno_location:N2,stackSave:Hf,stackRestore:R2,stackAlloc:L2,dynCall_vii:kp,dynCall_vi:Rd,dynCall_ii:Ap,dynCall_iii:Iu,dynCall_iiii:jc,dynCall_iiiiiii:ti,dynCall_viiii:kc,dynCall_viii:C0,dynCall_viiiiii:ja,dynCall_viiiii:bi,dynCall_viiiiiiiii:sr,dynCall_jiiii:_o,dynCall_jiji:_o,__growWasmMemory:z2}}for(var Tt=new Uint8Array(Ye.buffer),wr=new Uint8Array(123),mr=25;mr>=0;--mr)wr[48+mr]=52+mr,wr[65+mr]=mr,wr[97+mr]=26+mr;wr[43]=62,wr[47]=63;function vr(ar,$r,cn){for(var Ln,tt,m=0,Pr=$r,h=cn.length,T=$r+(h*3>>2)-(cn[h-2]=="=")-(cn[h-1]=="=");m<h;m+=4)Ln=wr[cn.charCodeAt(m+1)],tt=wr[cn.charCodeAt(m+2)],ar[Pr++]=wr[cn.charCodeAt(m)]<<2|Ln>>4,Pr<T&&(ar[Pr++]=Ln<<4|tt>>2),Pr<T&&(ar[Pr++]=tt<<6|wr[cn.charCodeAt(m+3)])}return vr(Tt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),vr(Tt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),vr(Tt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),vr(Tt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),vr(Tt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),vr(Tt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),vr(Tt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),vr(Tt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),vr(Tt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),vr(Tt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),vr(Tt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),vr(Tt,9803,"DA=="),vr(Tt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),vr(Tt,9861,"Dg=="),vr(Tt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),vr(Tt,9919,"EA=="),vr(Tt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),vr(Tt,9986,"EgAAABISEgAAAAAAAAk="),vr(Tt,10035,"Cw=="),vr(Tt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),vr(Tt,10093,"DA=="),vr(Tt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),vr(Tt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),vr(Tt,10428,"8Cw="),vr(Tt,10488,"BQ=="),vr(Tt,10500,"nQ=="),vr(Tt,10524,"ngAAAJ8AAAAQLQ=="),vr(Tt,10548,"Ag=="),vr(Tt,10563,"//////8="),Mt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},Ae,Ye.buffer)}(Wl,Y,le)},instantiate:function(R,W){return{then:function(ae){var Ae=new ee.Module(R);ae({instance:new ee.Instance(Ae)})}}},RuntimeError:Error};Z=[],typeof ee!="object"&&si("no native wasm support detected");var Y,le=new ee.Table({initial:160,maximum:160,element:"anyfunc"}),ce=!1;function ve(R,W){R||si("Assertion failed: "+W)}function pe(R){var W=e["_"+R];return ve(W,"Cannot call unknown function "+R+", make sure it is exported"),W}function Ne(R,W,ae,Ae,Ye){var yt={string:function(cn){var Ln=0;if(cn!=null&&cn!==0){var tt=(cn.length<<2)+1;Ln=yu(tt),mt(cn,Ln,tt)}return Ln},array:function(cn){var Ln=yu(cn.length);return He(cn,Ln),Ln}};function Mt(cn){return W==="string"?Oe(cn):W==="boolean"?!!cn:cn}var Tt=pe(R),wr=[],mr=0;if(Ae)for(var vr=0;vr<Ae.length;vr++){var ar=yt[ae[vr]];ar?(mr===0&&(mr=gu()),wr[vr]=ar(Ae[vr])):wr[vr]=Ae[vr]}var $r=Tt.apply(null,wr);return $r=Mt($r),mr!==0&&kl(mr),$r}function Ve(R,W,ae,Ae){ae=ae||[];var Ye=ae.every(function(Mt){return Mt==="number"}),yt=W!=="string";return yt&&Ye&&!Ae?pe(R):function(){return Ne(R,W,ae,arguments)}}var be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ce(R,W,ae){for(var Ae=W+ae,Ye=W;R[Ye]&&!(Ye>=Ae);)++Ye;if(Ye-W>16&&R.subarray&&be)return be.decode(R.subarray(W,Ye));for(var yt="";W<Ye;){var Mt=R[W++];if(!(Mt&128)){yt+=String.fromCharCode(Mt);continue}var Tt=R[W++]&63;if((Mt&224)==192){yt+=String.fromCharCode((Mt&31)<<6|Tt);continue}var wr=R[W++]&63;if((Mt&240)==224?Mt=(Mt&15)<<12|Tt<<6|wr:Mt=(Mt&7)<<18|Tt<<12|wr<<6|R[W++]&63,Mt<65536)yt+=String.fromCharCode(Mt);else{var mr=Mt-65536;yt+=String.fromCharCode(55296|mr>>10,56320|mr&1023)}}return yt}function Oe(R,W){return R?Ce(ke,R,W):""}function nt(R,W,ae,Ae){if(!(Ae>0))return 0;for(var Ye=ae,yt=ae+Ae-1,Mt=0;Mt<R.length;++Mt){var Tt=R.charCodeAt(Mt);if(Tt>=55296&&Tt<=57343){var wr=R.charCodeAt(++Mt);Tt=65536+((Tt&1023)<<10)|wr&1023}if(Tt<=127){if(ae>=yt)break;W[ae++]=Tt}else if(Tt<=2047){if(ae+1>=yt)break;W[ae++]=192|Tt>>6,W[ae++]=128|Tt&63}else if(Tt<=65535){if(ae+2>=yt)break;W[ae++]=224|Tt>>12,W[ae++]=128|Tt>>6&63,W[ae++]=128|Tt&63}else{if(ae+3>=yt)break;W[ae++]=240|Tt>>18,W[ae++]=128|Tt>>12&63,W[ae++]=128|Tt>>6&63,W[ae++]=128|Tt&63}}return W[ae]=0,ae-Ye}function mt(R,W,ae){return nt(R,ke,W,ae)}function ht(R){for(var W=0,ae=0;ae<R.length;++ae){var Ae=R.charCodeAt(ae);Ae>=55296&&Ae<=57343&&(Ae=65536+((Ae&1023)<<10)|R.charCodeAt(++ae)&1023),Ae<=127?++W:Ae<=2047?W+=2:Ae<=65535?W+=3:W+=4}return W}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function He(R,W){We.set(R,W)}var ut=65536;function bt(R,W){return R%W>0&&(R+=W-R%W),R}var Xe,We,ke,Re,Pe,dt,Et;function Pt(R){Xe=R,e.HEAP8=We=new Int8Array(R),e.HEAP16=Re=new Int16Array(R),e.HEAP32=Pe=new Int32Array(R),e.HEAPU8=ke=new Uint8Array(R),e.HEAPU16=new Uint16Array(R),e.HEAPU32=dt=new Uint32Array(R),e.HEAPF32=Et=new Float32Array(R),e.HEAPF64=new Float64Array(R)}var Kt=5255072,$t=12032,br=e.INITIAL_MEMORY||67108864;e.wasmMemory?Y=e.wasmMemory:Y=new ee.Memory({initial:br/ut,maximum:2147483648/ut}),Y&&(Xe=Y.buffer),br=Xe.byteLength,Pt(Xe),Pe[$t>>2]=Kt;function Gt(R){for(;R.length>0;){var W=R.shift();if(typeof W=="function"){W(e);continue}var ae=W.func;typeof ae=="number"?W.arg===void 0?e.dynCall_v(ae):e.dynCall_vi(ae,W.arg):ae(W.arg===void 0?null:W.arg)}}var Rr=[],Mr=[],Kr=[],Ct=[];function pt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ur(e.preRun.shift());Gt(Rr)}function Dr(){!e.noFSInit&&!ze.init.initialized&&ze.init(),Gt(Mr)}function ln(){ze.ignorePermissions=!1,Gt(Kr)}function Wt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)dn(e.postRun.shift());Gt(Ct)}function Ur(R){Rr.unshift(R)}function dn(R){Ct.unshift(R)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(W,ae){var Ae=W>>>16,Ye=W&65535,yt=ae>>>16,Mt=ae&65535;return Ye*Mt+(Ae*Mt+Ye*yt<<16)|0}),!Math.fround){var tn=new Float32Array(1);Math.fround=function(R){return tn[0]=R,tn[0]}}Math.clz32||(Math.clz32=function(R){var W=32,ae=R>>16;return ae&&(W-=16,R=ae),ae=R>>8,ae&&(W-=8,R=ae),ae=R>>4,ae&&(W-=4,R=ae),ae=R>>2,ae&&(W-=2,R=ae),ae=R>>1,ae?W-2:W-R}),Math.trunc||(Math.trunc=function(R){return R<0?Math.ceil(R):Math.floor(R)});var Bn=Math.abs,Jn=Math.ceil,ai=Math.floor,_i=Math.min,hi=0,yr=null;function Vr(R){return R}function wi(R){hi++,e.monitorRunDependencies&&e.monitorRunDependencies(hi)}function xn(R){if(hi--,e.monitorRunDependencies&&e.monitorRunDependencies(hi),hi==0&&yr){var W=yr;yr=null,W()}}e.preloadedImages={},e.preloadedAudios={};function si(R){e.onAbort&&e.onAbort(R),R+="",E(R),ce=!0,R="abort("+R+"). Build with -s ASSERTIONS=1 for more info.";var W=new ee.RuntimeError(R);throw W}function fr(R,W){return String.prototype.startsWith?R.startsWith(W):R.indexOf(W)===0}var or="data:application/octet-stream;base64,";function Yr(R){return fr(R,or)}var un="webp.wasm";Yr(un)||(un=c(un));function Or(){try{if(Z)return new Uint8Array(Z);var R=wl(un);if(R)return R;if(!v)throw"both async and sync fetching of the wasm failed"}catch(W){si(W)}}function pn(){return!Z&&o&&typeof fetch=="function"?fetch(un,{credentials:"same-origin"}).then(function(R){if(!R.ok)throw"failed to load wasm binary file at '"+un+"'";return R.arrayBuffer()}).catch(function(){return Or()}):t.resolve().then(Or)}function Qn(){var R={env:Wl,wasi_snapshot_preview1:Wl};function W(Mt,Tt){var wr=Mt.exports;e.asm=wr,xn()}wi();function ae(Mt){W(Mt.instance)}function Ae(Mt){return pn().then(function(Tt){return ee.instantiate(Tt,R)}).then(Mt,function(Tt){E("failed to asynchronously prepare wasm: "+Tt),si(Tt)})}function Ye(){if(!Z&&typeof ee.instantiateStreaming=="function"&&!Yr(un)&&typeof fetch=="function")fetch(un,{credentials:"same-origin"}).then(function(Mt){var Tt=ee.instantiateStreaming(Mt,R);return Tt.then(ae,function(wr){return E("wasm streaming compile failed: "+wr),E("falling back to ArrayBuffer instantiation"),Ae(ae)})});else return Ae(ae)}if(e.instantiateWasm)try{var yt=e.instantiateWasm(R,W);return yt}catch(Mt){return E("Module.instantiateWasm callback failed with error: "+Mt),!1}return Ye(),{}}var ci,Ro;Mr.push({func:function(){$u()}});function gi(R){return R}function co(R){var W=/\b_Z[\w\d_]+/g;return R.replace(W,function(ae){var Ae=ae;return ae===Ae?ae:Ae+" ["+ae+"]"})}function li(){var R=new Error;if(!R.stack){try{throw new Error}catch(W){R=W}if(!R.stack)return"(no stack trace available)"}return R.stack.toString()}function no(){var R=li();return e.extraStackTrace&&(R+=`
`+e.extraStackTrace()),co(R)}function yo(R){return Pe[xl()>>2]=R,R}var pi={splitPath:function(R){var W=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return W.exec(R).slice(1)},normalizeArray:function(R,W){for(var ae=0,Ae=R.length-1;Ae>=0;Ae--){var Ye=R[Ae];Ye==="."?R.splice(Ae,1):Ye===".."?(R.splice(Ae,1),ae++):ae&&(R.splice(Ae,1),ae--)}if(W)for(;ae;ae--)R.unshift("..");return R},normalize:function(R){var W=R.charAt(0)==="/",ae=R.substr(-1)==="/";return R=pi.normalizeArray(R.split("/").filter(function(Ae){return!!Ae}),!W).join("/"),!R&&!W&&(R="."),R&&ae&&(R+="/"),(W?"/":"")+R},dirname:function(R){var W=pi.splitPath(R),ae=W[0],Ae=W[1];return!ae&&!Ae?".":(Ae&&(Ae=Ae.substr(0,Ae.length-1)),ae+Ae)},basename:function(R){if(R==="/")return"/";R=pi.normalize(R),R=R.replace(/\/$/,"");var W=R.lastIndexOf("/");return W===-1?R:R.substr(W+1)},extname:function(R){return pi.splitPath(R)[3]},join:function(){var R=Array.prototype.slice.call(arguments,0);return pi.normalize(R.join("/"))},join2:function(R,W){return pi.normalize(R+"/"+W)}},Li={resolve:function(){for(var R="",W=!1,ae=arguments.length-1;ae>=-1&&!W;ae--){var Ae=ae>=0?arguments[ae]:ze.cwd();if(typeof Ae!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!Ae)return"";R=Ae+"/"+R,W=Ae.charAt(0)==="/"}return R=pi.normalizeArray(R.split("/").filter(function(Ye){return!!Ye}),!W).join("/"),(W?"/":"")+R||"."},relative:function(R,W){R=Li.resolve(R).substr(1),W=Li.resolve(W).substr(1);function ae(mr){for(var vr=0;vr<mr.length&&mr[vr]==="";vr++);for(var ar=mr.length-1;ar>=0&&mr[ar]==="";ar--);return vr>ar?[]:mr.slice(vr,ar-vr+1)}for(var Ae=ae(R.split("/")),Ye=ae(W.split("/")),yt=Math.min(Ae.length,Ye.length),Mt=yt,Tt=0;Tt<yt;Tt++)if(Ae[Tt]!==Ye[Tt]){Mt=Tt;break}for(var wr=[],Tt=Mt;Tt<Ae.length;Tt++)wr.push("..");return wr=wr.concat(Ye.slice(Mt)),wr.join("/")}},Yo={ttys:[],init:function(){},shutdown:function(){},register:function(R,W){Yo.ttys[R]={input:[],output:[],ops:W},ze.registerDevice(R,Yo.stream_ops)},stream_ops:{open:function(R){var W=Yo.ttys[R.node.rdev];if(!W)throw new ze.ErrnoError(43);R.tty=W,R.seekable=!1},close:function(R){R.tty.ops.flush(R.tty)},flush:function(R){R.tty.ops.flush(R.tty)},read:function(R,W,ae,Ae,Ye){if(!R.tty||!R.tty.ops.get_char)throw new ze.ErrnoError(60);for(var yt=0,Mt=0;Mt<Ae;Mt++){var Tt;try{Tt=R.tty.ops.get_char(R.tty)}catch{throw new ze.ErrnoError(29)}if(Tt===void 0&&yt===0)throw new ze.ErrnoError(6);if(Tt==null)break;yt++,W[ae+Mt]=Tt}return yt&&(R.node.timestamp=Date.now()),yt},write:function(R,W,ae,Ae,Ye){if(!R.tty||!R.tty.ops.put_char)throw new ze.ErrnoError(60);try{for(var yt=0;yt<Ae;yt++)R.tty.ops.put_char(R.tty,W[ae+yt])}catch{throw new ze.ErrnoError(29)}return Ae&&(R.node.timestamp=Date.now()),yt}},default_tty_ops:{get_char:function(R){if(!R.input.length){var W=null;if(typeof window<"u"&&typeof window.prompt=="function"?(W=window.prompt("Input: "),W!==null&&(W+=`
`)):typeof readline=="function"&&(W=readline(),W!==null&&(W+=`
`)),!W)return null;R.input=Hl(W,!0)}return R.input.shift()},put_char:function(R,W){W===null||W===10?(w(Ce(R.output,0)),R.output=[]):W!=0&&R.output.push(W)},flush:function(R){R.output&&R.output.length>0&&(w(Ce(R.output,0)),R.output=[])}},default_tty1_ops:{put_char:function(R,W){W===null||W===10?(E(Ce(R.output,0)),R.output=[]):W!=0&&R.output.push(W)},flush:function(R){R.output&&R.output.length>0&&(E(Ce(R.output,0)),R.output=[])}}},vn={ops_table:null,mount:function(R){return vn.createNode(null,"/",16895,0)},createNode:function(R,W,ae,Ae){if(ze.isBlkdev(ae)||ze.isFIFO(ae))throw new ze.ErrnoError(63);vn.ops_table||(vn.ops_table={dir:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr,lookup:vn.node_ops.lookup,mknod:vn.node_ops.mknod,rename:vn.node_ops.rename,unlink:vn.node_ops.unlink,rmdir:vn.node_ops.rmdir,readdir:vn.node_ops.readdir,symlink:vn.node_ops.symlink},stream:{llseek:vn.stream_ops.llseek}},file:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr},stream:{llseek:vn.stream_ops.llseek,read:vn.stream_ops.read,write:vn.stream_ops.write,allocate:vn.stream_ops.allocate,mmap:vn.stream_ops.mmap,msync:vn.stream_ops.msync}},link:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr,readlink:vn.node_ops.readlink},stream:{}},chrdev:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr},stream:ze.chrdev_stream_ops}});var Ye=ze.createNode(R,W,ae,Ae);return ze.isDir(Ye.mode)?(Ye.node_ops=vn.ops_table.dir.node,Ye.stream_ops=vn.ops_table.dir.stream,Ye.contents={}):ze.isFile(Ye.mode)?(Ye.node_ops=vn.ops_table.file.node,Ye.stream_ops=vn.ops_table.file.stream,Ye.usedBytes=0,Ye.contents=null):ze.isLink(Ye.mode)?(Ye.node_ops=vn.ops_table.link.node,Ye.stream_ops=vn.ops_table.link.stream):ze.isChrdev(Ye.mode)&&(Ye.node_ops=vn.ops_table.chrdev.node,Ye.stream_ops=vn.ops_table.chrdev.stream),Ye.timestamp=Date.now(),R&&(R.contents[W]=Ye),Ye},getFileDataAsRegularArray:function(R){if(R.contents&&R.contents.subarray){for(var W=[],ae=0;ae<R.usedBytes;++ae)W.push(R.contents[ae]);return W}return R.contents},getFileDataAsTypedArray:function(R){return R.contents?R.contents.subarray?R.contents.subarray(0,R.usedBytes):new Uint8Array(R.contents):new Uint8Array(0)},expandFileStorage:function(R,W){var ae=R.contents?R.contents.length:0;if(!(ae>=W)){var Ae=1024*1024;W=Math.max(W,ae*(ae<Ae?2:1.125)>>>0),ae!=0&&(W=Math.max(W,256));var Ye=R.contents;R.contents=new Uint8Array(W),R.usedBytes>0&&R.contents.set(Ye.subarray(0,R.usedBytes),0)}},resizeFileStorage:function(R,W){if(R.usedBytes!=W){if(W==0){R.contents=null,R.usedBytes=0;return}if(!R.contents||R.contents.subarray){var ae=R.contents;R.contents=new Uint8Array(W),ae&&R.contents.set(ae.subarray(0,Math.min(W,R.usedBytes))),R.usedBytes=W;return}if(R.contents||(R.contents=[]),R.contents.length>W)R.contents.length=W;else for(;R.contents.length<W;)R.contents.push(0);R.usedBytes=W}},node_ops:{getattr:function(R){var W={};return W.dev=ze.isChrdev(R.mode)?R.id:1,W.ino=R.id,W.mode=R.mode,W.nlink=1,W.uid=0,W.gid=0,W.rdev=R.rdev,ze.isDir(R.mode)?W.size=4096:ze.isFile(R.mode)?W.size=R.usedBytes:ze.isLink(R.mode)?W.size=R.link.length:W.size=0,W.atime=new Date(R.timestamp),W.mtime=new Date(R.timestamp),W.ctime=new Date(R.timestamp),W.blksize=4096,W.blocks=Math.ceil(W.size/W.blksize),W},setattr:function(R,W){W.mode!==void 0&&(R.mode=W.mode),W.timestamp!==void 0&&(R.timestamp=W.timestamp),W.size!==void 0&&vn.resizeFileStorage(R,W.size)},lookup:function(R,W){throw ze.genericErrors[44]},mknod:function(R,W,ae,Ae){return vn.createNode(R,W,ae,Ae)},rename:function(R,W,ae){if(ze.isDir(R.mode)){var Ae;try{Ae=ze.lookupNode(W,ae)}catch{}if(Ae)for(var Ye in Ae.contents)throw new ze.ErrnoError(55)}delete R.parent.contents[R.name],R.name=ae,W.contents[ae]=R,R.parent=W},unlink:function(R,W){delete R.contents[W]},rmdir:function(R,W){var ae=ze.lookupNode(R,W);for(var Ae in ae.contents)throw new ze.ErrnoError(55);delete R.contents[W]},readdir:function(R){var W=[".",".."];for(var ae in R.contents)R.contents.hasOwnProperty(ae)&&W.push(ae);return W},symlink:function(R,W,ae){var Ae=vn.createNode(R,W,41471,0);return Ae.link=ae,Ae},readlink:function(R){if(!ze.isLink(R.mode))throw new ze.ErrnoError(28);return R.link}},stream_ops:{read:function(R,W,ae,Ae,Ye){var yt=R.node.contents;if(Ye>=R.node.usedBytes)return 0;var Mt=Math.min(R.node.usedBytes-Ye,Ae);if(Mt>8&&yt.subarray)W.set(yt.subarray(Ye,Ye+Mt),ae);else for(var Tt=0;Tt<Mt;Tt++)W[ae+Tt]=yt[Ye+Tt];return Mt},write:function(R,W,ae,Ae,Ye,yt){if(W.buffer===We.buffer&&(yt=!1),!Ae)return 0;var Mt=R.node;if(Mt.timestamp=Date.now(),W.subarray&&(!Mt.contents||Mt.contents.subarray)){if(yt)return Mt.contents=W.subarray(ae,ae+Ae),Mt.usedBytes=Ae,Ae;if(Mt.usedBytes===0&&Ye===0)return Mt.contents=W.slice(ae,ae+Ae),Mt.usedBytes=Ae,Ae;if(Ye+Ae<=Mt.usedBytes)return Mt.contents.set(W.subarray(ae,ae+Ae),Ye),Ae}if(vn.expandFileStorage(Mt,Ye+Ae),Mt.contents.subarray&&W.subarray)Mt.contents.set(W.subarray(ae,ae+Ae),Ye);else for(var Tt=0;Tt<Ae;Tt++)Mt.contents[Ye+Tt]=W[ae+Tt];return Mt.usedBytes=Math.max(Mt.usedBytes,Ye+Ae),Ae},llseek:function(R,W,ae){var Ae=W;if(ae===1?Ae+=R.position:ae===2&&ze.isFile(R.node.mode)&&(Ae+=R.node.usedBytes),Ae<0)throw new ze.ErrnoError(28);return Ae},allocate:function(R,W,ae){vn.expandFileStorage(R.node,W+ae),R.node.usedBytes=Math.max(R.node.usedBytes,W+ae)},mmap:function(R,W,ae,Ae,Ye,yt){if(ve(W===0),!ze.isFile(R.node.mode))throw new ze.ErrnoError(43);var Mt,Tt,wr=R.node.contents;if(!(yt&2)&&wr.buffer===Xe)Tt=!1,Mt=wr.byteOffset;else{if((Ae>0||Ae+ae<wr.length)&&(wr.subarray?wr=wr.subarray(Ae,Ae+ae):wr=Array.prototype.slice.call(wr,Ae,Ae+ae)),Tt=!0,Mt=ze.mmapAlloc(ae),!Mt)throw new ze.ErrnoError(48);We.set(wr,Mt)}return{ptr:Mt,allocated:Tt}},msync:function(R,W,ae,Ae,Ye){if(!ze.isFile(R.node.mode))throw new ze.ErrnoError(43);return Ye&2||vn.stream_ops.write(R,W,0,Ae,ae,!1),0}}},ze={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(R){if(!(R instanceof ze.ErrnoError))throw R+" : "+no();return yo(R.errno)},lookupPath:function(R,W){if(R=Li.resolve(ze.cwd(),R),W=W||{},!R)return{path:"",node:null};var ae={follow_mount:!0,recurse_count:0};for(var Ae in ae)W[Ae]===void 0&&(W[Ae]=ae[Ae]);if(W.recurse_count>8)throw new ze.ErrnoError(32);for(var Ye=pi.normalizeArray(R.split("/").filter(function($r){return!!$r}),!1),yt=ze.root,Mt="/",Tt=0;Tt<Ye.length;Tt++){var wr=Tt===Ye.length-1;if(wr&&W.parent)break;if(yt=ze.lookupNode(yt,Ye[Tt]),Mt=pi.join2(Mt,Ye[Tt]),ze.isMountpoint(yt)&&(!wr||wr&&W.follow_mount)&&(yt=yt.mounted.root),!wr||W.follow)for(var mr=0;ze.isLink(yt.mode);){var vr=ze.readlink(Mt);Mt=Li.resolve(pi.dirname(Mt),vr);var ar=ze.lookupPath(Mt,{recurse_count:W.recurse_count});if(yt=ar.node,mr++>40)throw new ze.ErrnoError(32)}}return{path:Mt,node:yt}},getPath:function(R){for(var W;;){if(ze.isRoot(R)){var ae=R.mount.mountpoint;return W?ae[ae.length-1]!=="/"?ae+"/"+W:ae+W:ae}W=W?R.name+"/"+W:R.name,R=R.parent}},hashName:function(R,W){for(var ae=0,Ae=0;Ae<W.length;Ae++)ae=(ae<<5)-ae+W.charCodeAt(Ae)|0;return(R+ae>>>0)%ze.nameTable.length},hashAddNode:function(R){var W=ze.hashName(R.parent.id,R.name);R.name_next=ze.nameTable[W],ze.nameTable[W]=R},hashRemoveNode:function(R){var W=ze.hashName(R.parent.id,R.name);if(ze.nameTable[W]===R)ze.nameTable[W]=R.name_next;else for(var ae=ze.nameTable[W];ae;){if(ae.name_next===R){ae.name_next=R.name_next;break}ae=ae.name_next}},lookupNode:function(R,W){var ae=ze.mayLookup(R);if(ae)throw new ze.ErrnoError(ae,R);for(var Ae=ze.hashName(R.id,W),Ye=ze.nameTable[Ae];Ye;Ye=Ye.name_next){var yt=Ye.name;if(Ye.parent.id===R.id&&yt===W)return Ye}return ze.lookup(R,W)},createNode:function(R,W,ae,Ae){var Ye=new ze.FSNode(R,W,ae,Ae);return ze.hashAddNode(Ye),Ye},destroyNode:function(R){ze.hashRemoveNode(R)},isRoot:function(R){return R===R.parent},isMountpoint:function(R){return!!R.mounted},isFile:function(R){return(R&61440)===32768},isDir:function(R){return(R&61440)===16384},isLink:function(R){return(R&61440)===40960},isChrdev:function(R){return(R&61440)===8192},isBlkdev:function(R){return(R&61440)===24576},isFIFO:function(R){return(R&61440)===4096},isSocket:function(R){return(R&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(R){var W=ze.flagModes[R];if(typeof W>"u")throw new Error("Unknown file open mode: "+R);return W},flagsToPermissionString:function(R){var W=["r","w","rw"][R&3];return R&512&&(W+="w"),W},nodePermissions:function(R,W){return ze.ignorePermissions?0:W.indexOf("r")!==-1&&!(R.mode&292)||W.indexOf("w")!==-1&&!(R.mode&146)||W.indexOf("x")!==-1&&!(R.mode&73)?2:0},mayLookup:function(R){var W=ze.nodePermissions(R,"x");return W||(R.node_ops.lookup?0:2)},mayCreate:function(R,W){try{var ae=ze.lookupNode(R,W);return 20}catch{}return ze.nodePermissions(R,"wx")},mayDelete:function(R,W,ae){var Ae;try{Ae=ze.lookupNode(R,W)}catch(yt){return yt.errno}var Ye=ze.nodePermissions(R,"wx");if(Ye)return Ye;if(ae){if(!ze.isDir(Ae.mode))return 54;if(ze.isRoot(Ae)||ze.getPath(Ae)===ze.cwd())return 10}else if(ze.isDir(Ae.mode))return 31;return 0},mayOpen:function(R,W){return R?ze.isLink(R.mode)?32:ze.isDir(R.mode)&&(ze.flagsToPermissionString(W)!=="r"||W&512)?31:ze.nodePermissions(R,ze.flagsToPermissionString(W)):44},MAX_OPEN_FDS:4096,nextfd:function(R,W){R=R||0,W=W||ze.MAX_OPEN_FDS;for(var ae=R;ae<=W;ae++)if(!ze.streams[ae])return ae;throw new ze.ErrnoError(33)},getStream:function(R){return ze.streams[R]},createStream:function(R,W,ae){ze.FSStream||(ze.FSStream=function(){},ze.FSStream.prototype={object:{get:function(){return this.node},set:function(Mt){this.node=Mt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var Ae=new ze.FSStream;for(var Ye in R)Ae[Ye]=R[Ye];R=Ae;var yt=ze.nextfd(W,ae);return R.fd=yt,ze.streams[yt]=R,R},closeStream:function(R){ze.streams[R]=null},chrdev_stream_ops:{open:function(R){var W=ze.getDevice(R.node.rdev);R.stream_ops=W.stream_ops,R.stream_ops.open&&R.stream_ops.open(R)},llseek:function(){throw new ze.ErrnoError(70)}},major:function(R){return R>>8},minor:function(R){return R&255},makedev:function(R,W){return R<<8|W},registerDevice:function(R,W){ze.devices[R]={stream_ops:W}},getDevice:function(R){return ze.devices[R]},getMounts:function(R){for(var W=[],ae=[R];ae.length;){var Ae=ae.pop();W.push(Ae),ae.push.apply(ae,Ae.mounts)}return W},syncfs:function(R,W){typeof R=="function"&&(W=R,R=!1),ze.syncFSRequests++,ze.syncFSRequests>1&&E("warning: "+ze.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ae=ze.getMounts(ze.root.mount),Ae=0;function Ye(Mt){return ze.syncFSRequests--,W(Mt)}function yt(Mt){if(Mt)return yt.errored?void 0:(yt.errored=!0,Ye(Mt));++Ae>=ae.length&&Ye(null)}ae.forEach(function(Mt){if(!Mt.type.syncfs)return yt(null);Mt.type.syncfs(Mt,R,yt)})},mount:function(R,W,ae){var Ae=ae==="/",Ye=!ae,yt;if(Ae&&ze.root)throw new ze.ErrnoError(10);if(!Ae&&!Ye){var Mt=ze.lookupPath(ae,{follow_mount:!1});if(ae=Mt.path,yt=Mt.node,ze.isMountpoint(yt))throw new ze.ErrnoError(10);if(!ze.isDir(yt.mode))throw new ze.ErrnoError(54)}var Tt={type:R,opts:W,mountpoint:ae,mounts:[]},wr=R.mount(Tt);return wr.mount=Tt,Tt.root=wr,Ae?ze.root=wr:yt&&(yt.mounted=Tt,yt.mount&&yt.mount.mounts.push(Tt)),wr},unmount:function(R){var W=ze.lookupPath(R,{follow_mount:!1});if(!ze.isMountpoint(W.node))throw new ze.ErrnoError(28);var ae=W.node,Ae=ae.mounted,Ye=ze.getMounts(Ae);Object.keys(ze.nameTable).forEach(function(Mt){for(var Tt=ze.nameTable[Mt];Tt;){var wr=Tt.name_next;Ye.indexOf(Tt.mount)!==-1&&ze.destroyNode(Tt),Tt=wr}}),ae.mounted=null;var yt=ae.mount.mounts.indexOf(Ae);ae.mount.mounts.splice(yt,1)},lookup:function(R,W){return R.node_ops.lookup(R,W)},mknod:function(R,W,ae){var Ae=ze.lookupPath(R,{parent:!0}),Ye=Ae.node,yt=pi.basename(R);if(!yt||yt==="."||yt==="..")throw new ze.ErrnoError(28);var Mt=ze.mayCreate(Ye,yt);if(Mt)throw new ze.ErrnoError(Mt);if(!Ye.node_ops.mknod)throw new ze.ErrnoError(63);return Ye.node_ops.mknod(Ye,yt,W,ae)},create:function(R,W){return W=W!==void 0?W:438,W&=4095,W|=32768,ze.mknod(R,W,0)},mkdir:function(R,W){return W=W!==void 0?W:511,W&=1023,W|=16384,ze.mknod(R,W,0)},mkdirTree:function(R,W){for(var ae=R.split("/"),Ae="",Ye=0;Ye<ae.length;++Ye)if(ae[Ye]){Ae+="/"+ae[Ye];try{ze.mkdir(Ae,W)}catch(yt){if(yt.errno!=20)throw yt}}},mkdev:function(R,W,ae){return typeof ae>"u"&&(ae=W,W=438),W|=8192,ze.mknod(R,W,ae)},symlink:function(R,W){if(!Li.resolve(R))throw new ze.ErrnoError(44);var ae=ze.lookupPath(W,{parent:!0}),Ae=ae.node;if(!Ae)throw new ze.ErrnoError(44);var Ye=pi.basename(W),yt=ze.mayCreate(Ae,Ye);if(yt)throw new ze.ErrnoError(yt);if(!Ae.node_ops.symlink)throw new ze.ErrnoError(63);return Ae.node_ops.symlink(Ae,Ye,R)},rename:function(R,W){var ae=pi.dirname(R),Ae=pi.dirname(W),Ye=pi.basename(R),yt=pi.basename(W),Mt,Tt,wr;if(Mt=ze.lookupPath(R,{parent:!0}),Tt=Mt.node,Mt=ze.lookupPath(W,{parent:!0}),wr=Mt.node,!Tt||!wr)throw new ze.ErrnoError(44);if(Tt.mount!==wr.mount)throw new ze.ErrnoError(75);var mr=ze.lookupNode(Tt,Ye),vr=Li.relative(R,Ae);if(vr.charAt(0)!==".")throw new ze.ErrnoError(28);if(vr=Li.relative(W,ae),vr.charAt(0)!==".")throw new ze.ErrnoError(55);var ar;try{ar=ze.lookupNode(wr,yt)}catch{}if(mr!==ar){var $r=ze.isDir(mr.mode),cn=ze.mayDelete(Tt,Ye,$r);if(cn)throw new ze.ErrnoError(cn);if(cn=ar?ze.mayDelete(wr,yt,$r):ze.mayCreate(wr,yt),cn)throw new ze.ErrnoError(cn);if(!Tt.node_ops.rename)throw new ze.ErrnoError(63);if(ze.isMountpoint(mr)||ar&&ze.isMountpoint(ar))throw new ze.ErrnoError(10);if(wr!==Tt&&(cn=ze.nodePermissions(Tt,"w"),cn))throw new ze.ErrnoError(cn);try{ze.trackingDelegate.willMovePath&&ze.trackingDelegate.willMovePath(R,W)}catch(Ln){E("FS.trackingDelegate['willMovePath']('"+R+"', '"+W+"') threw an exception: "+Ln.message)}ze.hashRemoveNode(mr);try{Tt.node_ops.rename(mr,wr,yt)}catch(Ln){throw Ln}finally{ze.hashAddNode(mr)}try{ze.trackingDelegate.onMovePath&&ze.trackingDelegate.onMovePath(R,W)}catch(Ln){E("FS.trackingDelegate['onMovePath']('"+R+"', '"+W+"') threw an exception: "+Ln.message)}}},rmdir:function(R){var W=ze.lookupPath(R,{parent:!0}),ae=W.node,Ae=pi.basename(R),Ye=ze.lookupNode(ae,Ae),yt=ze.mayDelete(ae,Ae,!0);if(yt)throw new ze.ErrnoError(yt);if(!ae.node_ops.rmdir)throw new ze.ErrnoError(63);if(ze.isMountpoint(Ye))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(R)}catch(Mt){E("FS.trackingDelegate['willDeletePath']('"+R+"') threw an exception: "+Mt.message)}ae.node_ops.rmdir(ae,Ae),ze.destroyNode(Ye);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(R)}catch(Mt){E("FS.trackingDelegate['onDeletePath']('"+R+"') threw an exception: "+Mt.message)}},readdir:function(R){var W=ze.lookupPath(R,{follow:!0}),ae=W.node;if(!ae.node_ops.readdir)throw new ze.ErrnoError(54);return ae.node_ops.readdir(ae)},unlink:function(R){var W=ze.lookupPath(R,{parent:!0}),ae=W.node,Ae=pi.basename(R),Ye=ze.lookupNode(ae,Ae),yt=ze.mayDelete(ae,Ae,!1);if(yt)throw new ze.ErrnoError(yt);if(!ae.node_ops.unlink)throw new ze.ErrnoError(63);if(ze.isMountpoint(Ye))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(R)}catch(Mt){E("FS.trackingDelegate['willDeletePath']('"+R+"') threw an exception: "+Mt.message)}ae.node_ops.unlink(ae,Ae),ze.destroyNode(Ye);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(R)}catch(Mt){E("FS.trackingDelegate['onDeletePath']('"+R+"') threw an exception: "+Mt.message)}},readlink:function(R){var W=ze.lookupPath(R),ae=W.node;if(!ae)throw new ze.ErrnoError(44);if(!ae.node_ops.readlink)throw new ze.ErrnoError(28);return Li.resolve(ze.getPath(ae.parent),ae.node_ops.readlink(ae))},stat:function(R,W){var ae=ze.lookupPath(R,{follow:!W}),Ae=ae.node;if(!Ae)throw new ze.ErrnoError(44);if(!Ae.node_ops.getattr)throw new ze.ErrnoError(63);return Ae.node_ops.getattr(Ae)},lstat:function(R){return ze.stat(R,!0)},chmod:function(R,W,ae){var Ae;if(typeof R=="string"){var Ye=ze.lookupPath(R,{follow:!ae});Ae=Ye.node}else Ae=R;if(!Ae.node_ops.setattr)throw new ze.ErrnoError(63);Ae.node_ops.setattr(Ae,{mode:W&4095|Ae.mode&-4096,timestamp:Date.now()})},lchmod:function(R,W){ze.chmod(R,W,!0)},fchmod:function(R,W){var ae=ze.getStream(R);if(!ae)throw new ze.ErrnoError(8);ze.chmod(ae.node,W)},chown:function(R,W,ae,Ae){var Ye;if(typeof R=="string"){var yt=ze.lookupPath(R,{follow:!Ae});Ye=yt.node}else Ye=R;if(!Ye.node_ops.setattr)throw new ze.ErrnoError(63);Ye.node_ops.setattr(Ye,{timestamp:Date.now()})},lchown:function(R,W,ae){ze.chown(R,W,ae,!0)},fchown:function(R,W,ae){var Ae=ze.getStream(R);if(!Ae)throw new ze.ErrnoError(8);ze.chown(Ae.node,W,ae)},truncate:function(R,W){if(W<0)throw new ze.ErrnoError(28);var ae;if(typeof R=="string"){var Ae=ze.lookupPath(R,{follow:!0});ae=Ae.node}else ae=R;if(!ae.node_ops.setattr)throw new ze.ErrnoError(63);if(ze.isDir(ae.mode))throw new ze.ErrnoError(31);if(!ze.isFile(ae.mode))throw new ze.ErrnoError(28);var Ye=ze.nodePermissions(ae,"w");if(Ye)throw new ze.ErrnoError(Ye);ae.node_ops.setattr(ae,{size:W,timestamp:Date.now()})},ftruncate:function(R,W){var ae=ze.getStream(R);if(!ae)throw new ze.ErrnoError(8);if(!(ae.flags&2097155))throw new ze.ErrnoError(28);ze.truncate(ae.node,W)},utime:function(R,W,ae){var Ae=ze.lookupPath(R,{follow:!0}),Ye=Ae.node;Ye.node_ops.setattr(Ye,{timestamp:Math.max(W,ae)})},open:function(R,W,ae,Ae,Ye){if(R==="")throw new ze.ErrnoError(44);W=typeof W=="string"?ze.modeStringToFlags(W):W,ae=typeof ae>"u"?438:ae,W&64?ae=ae&4095|32768:ae=0;var yt;if(typeof R=="object")yt=R;else{R=pi.normalize(R);try{var Mt=ze.lookupPath(R,{follow:!(W&131072)});yt=Mt.node}catch{}}var Tt=!1;if(W&64)if(yt){if(W&128)throw new ze.ErrnoError(20)}else yt=ze.mknod(R,ae,0),Tt=!0;if(!yt)throw new ze.ErrnoError(44);if(ze.isChrdev(yt.mode)&&(W&=-513),W&65536&&!ze.isDir(yt.mode))throw new ze.ErrnoError(54);if(!Tt){var wr=ze.mayOpen(yt,W);if(wr)throw new ze.ErrnoError(wr)}W&512&&ze.truncate(yt,0),W&=-131713;var mr=ze.createStream({node:yt,path:ze.getPath(yt),flags:W,seekable:!0,position:0,stream_ops:yt.stream_ops,ungotten:[],error:!1},Ae,Ye);mr.stream_ops.open&&mr.stream_ops.open(mr),e.logReadFiles&&!(W&1)&&(ze.readFiles||(ze.readFiles={}),R in ze.readFiles||(ze.readFiles[R]=1,E("FS.trackingDelegate error on read file: "+R)));try{if(ze.trackingDelegate.onOpenFile){var vr=0;(W&2097155)!==1&&(vr|=ze.tracking.openFlags.READ),W&2097155&&(vr|=ze.tracking.openFlags.WRITE),ze.trackingDelegate.onOpenFile(R,vr)}}catch(ar){E("FS.trackingDelegate['onOpenFile']('"+R+"', flags) threw an exception: "+ar.message)}return mr},close:function(R){if(ze.isClosed(R))throw new ze.ErrnoError(8);R.getdents&&(R.getdents=null);try{R.stream_ops.close&&R.stream_ops.close(R)}catch(W){throw W}finally{ze.closeStream(R.fd)}R.fd=null},isClosed:function(R){return R.fd===null},llseek:function(R,W,ae){if(ze.isClosed(R))throw new ze.ErrnoError(8);if(!R.seekable||!R.stream_ops.llseek)throw new ze.ErrnoError(70);if(ae!=0&&ae!=1&&ae!=2)throw new ze.ErrnoError(28);return R.position=R.stream_ops.llseek(R,W,ae),R.ungotten=[],R.position},read:function(R,W,ae,Ae,Ye){if(Ae<0||Ye<0)throw new ze.ErrnoError(28);if(ze.isClosed(R))throw new ze.ErrnoError(8);if((R.flags&2097155)===1)throw new ze.ErrnoError(8);if(ze.isDir(R.node.mode))throw new ze.ErrnoError(31);if(!R.stream_ops.read)throw new ze.ErrnoError(28);var yt=typeof Ye<"u";if(!yt)Ye=R.position;else if(!R.seekable)throw new ze.ErrnoError(70);var Mt=R.stream_ops.read(R,W,ae,Ae,Ye);return yt||(R.position+=Mt),Mt},write:function(R,W,ae,Ae,Ye,yt){if(Ae<0||Ye<0)throw new ze.ErrnoError(28);if(ze.isClosed(R))throw new ze.ErrnoError(8);if(!(R.flags&2097155))throw new ze.ErrnoError(8);if(ze.isDir(R.node.mode))throw new ze.ErrnoError(31);if(!R.stream_ops.write)throw new ze.ErrnoError(28);R.seekable&&R.flags&1024&&ze.llseek(R,0,2);var Mt=typeof Ye<"u";if(!Mt)Ye=R.position;else if(!R.seekable)throw new ze.ErrnoError(70);var Tt=R.stream_ops.write(R,W,ae,Ae,Ye,yt);Mt||(R.position+=Tt);try{R.path&&ze.trackingDelegate.onWriteToFile&&ze.trackingDelegate.onWriteToFile(R.path)}catch(wr){E("FS.trackingDelegate['onWriteToFile']('"+R.path+"') threw an exception: "+wr.message)}return Tt},allocate:function(R,W,ae){if(ze.isClosed(R))throw new ze.ErrnoError(8);if(W<0||ae<=0)throw new ze.ErrnoError(28);if(!(R.flags&2097155))throw new ze.ErrnoError(8);if(!ze.isFile(R.node.mode)&&!ze.isDir(R.node.mode))throw new ze.ErrnoError(43);if(!R.stream_ops.allocate)throw new ze.ErrnoError(138);R.stream_ops.allocate(R,W,ae)},mmap:function(R,W,ae,Ae,Ye,yt){if(Ye&2&&!(yt&2)&&(R.flags&2097155)!==2)throw new ze.ErrnoError(2);if((R.flags&2097155)===1)throw new ze.ErrnoError(2);if(!R.stream_ops.mmap)throw new ze.ErrnoError(43);return R.stream_ops.mmap(R,W,ae,Ae,Ye,yt)},msync:function(R,W,ae,Ae,Ye){return!R||!R.stream_ops.msync?0:R.stream_ops.msync(R,W,ae,Ae,Ye)},munmap:function(R){return 0},ioctl:function(R,W,ae){if(!R.stream_ops.ioctl)throw new ze.ErrnoError(59);return R.stream_ops.ioctl(R,W,ae)},readFile:function(R,W){if(W=W||{},W.flags=W.flags||"r",W.encoding=W.encoding||"binary",W.encoding!=="utf8"&&W.encoding!=="binary")throw new Error('Invalid encoding type "'+W.encoding+'"');var ae,Ae=ze.open(R,W.flags),Ye=ze.stat(R),yt=Ye.size,Mt=new Uint8Array(yt);return ze.read(Ae,Mt,0,yt,0),W.encoding==="utf8"?ae=Ce(Mt,0):W.encoding==="binary"&&(ae=Mt),ze.close(Ae),ae},writeFile:function(R,W,ae){ae=ae||{},ae.flags=ae.flags||"w";var Ae=ze.open(R,ae.flags,ae.mode);if(typeof W=="string"){var Ye=new Uint8Array(ht(W)+1),yt=nt(W,Ye,0,Ye.length);ze.write(Ae,Ye,0,yt,void 0,ae.canOwn)}else if(ArrayBuffer.isView(W))ze.write(Ae,W,0,W.byteLength,void 0,ae.canOwn);else throw new Error("Unsupported data type");ze.close(Ae)},cwd:function(){return ze.currentPath},chdir:function(R){var W=ze.lookupPath(R,{follow:!0});if(W.node===null)throw new ze.ErrnoError(44);if(!ze.isDir(W.node.mode))throw new ze.ErrnoError(54);var ae=ze.nodePermissions(W.node,"x");if(ae)throw new ze.ErrnoError(ae);ze.currentPath=W.path},createDefaultDirectories:function(){ze.mkdir("/tmp"),ze.mkdir("/home"),ze.mkdir("/home/web_user")},createDefaultDevices:function(){ze.mkdir("/dev"),ze.registerDevice(ze.makedev(1,3),{read:function(){return 0},write:function(ae,Ae,Ye,yt,Mt){return yt}}),ze.mkdev("/dev/null",ze.makedev(1,3)),Yo.register(ze.makedev(5,0),Yo.default_tty_ops),Yo.register(ze.makedev(6,0),Yo.default_tty1_ops),ze.mkdev("/dev/tty",ze.makedev(5,0)),ze.mkdev("/dev/tty1",ze.makedev(6,0));var R;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var W=new Uint8Array(1);R=function(){return crypto.getRandomValues(W),W[0]}}R||(R=function(){si("random_device")}),ze.createDevice("/dev","random",R),ze.createDevice("/dev","urandom",R),ze.mkdir("/dev/shm"),ze.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ze.mkdir("/proc"),ze.mkdir("/proc/self"),ze.mkdir("/proc/self/fd"),ze.mount({mount:function(){var R=ze.createNode("/proc/self","fd",16895,73);return R.node_ops={lookup:function(W,ae){var Ae=+ae,Ye=ze.getStream(Ae);if(!Ye)throw new ze.ErrnoError(8);var yt={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return Ye.path}}};return yt.parent=yt,yt}},R}},{},"/proc/self/fd")},createStandardStreams:function(){e.stdin?ze.createDevice("/dev","stdin",e.stdin):ze.symlink("/dev/tty","/dev/stdin"),e.stdout?ze.createDevice("/dev","stdout",null,e.stdout):ze.symlink("/dev/tty","/dev/stdout"),e.stderr?ze.createDevice("/dev","stderr",null,e.stderr):ze.symlink("/dev/tty1","/dev/stderr"),ze.open("/dev/stdin","r"),ze.open("/dev/stdout","w"),ze.open("/dev/stderr","w")},ensureErrnoError:function(){ze.ErrnoError||(ze.ErrnoError=function(W,ae){this.node=ae,this.setErrno=function(Ae){this.errno=Ae},this.setErrno(W),this.message="FS error"},ze.ErrnoError.prototype=new Error,ze.ErrnoError.prototype.constructor=ze.ErrnoError,[44].forEach(function(R){ze.genericErrors[R]=new ze.ErrnoError(R),ze.genericErrors[R].stack="<generic error, no stack>"}))},staticInit:function(){ze.ensureErrnoError(),ze.nameTable=new Array(4096),ze.mount(vn,{},"/"),ze.createDefaultDirectories(),ze.createDefaultDevices(),ze.createSpecialDirectories(),ze.filesystems={MEMFS:vn}},init:function(R,W,ae){ze.init.initialized=!0,ze.ensureErrnoError(),e.stdin=R||e.stdin,e.stdout=W||e.stdout,e.stderr=ae||e.stderr,ze.createStandardStreams()},quit:function(){ze.init.initialized=!1;var R=e._fflush;R&&R(0);for(var W=0;W<ze.streams.length;W++){var ae=ze.streams[W];ae&&ze.close(ae)}},getMode:function(R,W){var ae=0;return R&&(ae|=365),W&&(ae|=146),ae},joinPath:function(R,W){var ae=pi.join.apply(null,R);return W&&ae[0]=="/"&&(ae=ae.substr(1)),ae},absolutePath:function(R,W){return Li.resolve(W,R)},standardizePath:function(R){return pi.normalize(R)},findObject:function(R,W){var ae=ze.analyzePath(R,W);return ae.exists?ae.object:(yo(ae.error),null)},analyzePath:function(R,W){try{var ae=ze.lookupPath(R,{follow:!W});R=ae.path}catch{}var Ae={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ae=ze.lookupPath(R,{parent:!0});Ae.parentExists=!0,Ae.parentPath=ae.path,Ae.parentObject=ae.node,Ae.name=pi.basename(R),ae=ze.lookupPath(R,{follow:!W}),Ae.exists=!0,Ae.path=ae.path,Ae.object=ae.node,Ae.name=ae.node.name,Ae.isRoot=ae.path==="/"}catch(Ye){Ae.error=Ye.errno}return Ae},createFolder:function(R,W,ae,Ae){var Ye=pi.join2(typeof R=="string"?R:ze.getPath(R),W),yt=ze.getMode(ae,Ae);return ze.mkdir(Ye,yt)},createPath:function(R,W,ae,Ae){R=typeof R=="string"?R:ze.getPath(R);for(var Ye=W.split("/").reverse();Ye.length;){var yt=Ye.pop();if(yt){var Mt=pi.join2(R,yt);try{ze.mkdir(Mt)}catch{}R=Mt}}return Mt},createFile:function(R,W,ae,Ae,Ye){var yt=pi.join2(typeof R=="string"?R:ze.getPath(R),W),Mt=ze.getMode(Ae,Ye);return ze.create(yt,Mt)},createDataFile:function(R,W,ae,Ae,Ye,yt){var Mt=W?pi.join2(typeof R=="string"?R:ze.getPath(R),W):R,Tt=ze.getMode(Ae,Ye),wr=ze.create(Mt,Tt);if(ae){if(typeof ae=="string"){for(var mr=new Array(ae.length),vr=0,ar=ae.length;vr<ar;++vr)mr[vr]=ae.charCodeAt(vr);ae=mr}ze.chmod(wr,Tt|146);var $r=ze.open(wr,"w");ze.write($r,ae,0,ae.length,0,yt),ze.close($r),ze.chmod(wr,Tt)}return wr},createDevice:function(R,W,ae,Ae){var Ye=pi.join2(typeof R=="string"?R:ze.getPath(R),W),yt=ze.getMode(!!ae,!!Ae);ze.createDevice.major||(ze.createDevice.major=64);var Mt=ze.makedev(ze.createDevice.major++,0);return ze.registerDevice(Mt,{open:function(Tt){Tt.seekable=!1},close:function(Tt){Ae&&Ae.buffer&&Ae.buffer.length&&Ae(10)},read:function(Tt,wr,mr,vr,ar){for(var $r=0,cn=0;cn<vr;cn++){var Ln;try{Ln=ae()}catch{throw new ze.ErrnoError(29)}if(Ln===void 0&&$r===0)throw new ze.ErrnoError(6);if(Ln==null)break;$r++,wr[mr+cn]=Ln}return $r&&(Tt.node.timestamp=Date.now()),$r},write:function(Tt,wr,mr,vr,ar){for(var $r=0;$r<vr;$r++)try{Ae(wr[mr+$r])}catch{throw new ze.ErrnoError(29)}return vr&&(Tt.node.timestamp=Date.now()),$r}}),ze.mkdev(Ye,yt,Mt)},createLink:function(R,W,ae,Ae,Ye){var yt=pi.join2(typeof R=="string"?R:ze.getPath(R),W);return ze.symlink(ae,yt)},forceLoadFile:function(R){if(R.isDevice||R.isFolder||R.link||R.contents)return!0;var W=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(s)try{R.contents=Hl(s(R.url),!0),R.usedBytes=R.contents.length}catch{W=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return W||yo(29),W},createLazyFile:function(R,W,ae,Ae,Ye){function yt(){this.lengthKnown=!1,this.chunks=[]}if(yt.prototype.get=function($r){if(!($r>this.length-1||$r<0)){var cn=$r%this.chunkSize,Ln=$r/this.chunkSize|0;return this.getter(Ln)[cn]}},yt.prototype.setDataGetter=function($r){this.getter=$r},yt.prototype.cacheLength=function(){var $r=new XMLHttpRequest;if($r.open("HEAD",ae,!1),$r.send(null),!($r.status>=200&&$r.status<300||$r.status===304))throw new Error("Couldn't load "+ae+". Status: "+$r.status);var cn=Number($r.getResponseHeader("Content-length")),Ln,tt=(Ln=$r.getResponseHeader("Accept-Ranges"))&&Ln==="bytes",m=(Ln=$r.getResponseHeader("Content-Encoding"))&&Ln==="gzip",Pr=1024*1024;tt||(Pr=cn);var h=function(kn,ii){if(kn>ii)throw new Error("invalid range ("+kn+", "+ii+") or no bytes requested!");if(ii>cn-1)throw new Error("only "+cn+" bytes available! programmer error!");var Lo=new XMLHttpRequest;if(Lo.open("GET",ae,!1),cn!==Pr&&Lo.setRequestHeader("Range","bytes="+kn+"-"+ii),typeof Uint8Array<"u"&&(Lo.responseType="arraybuffer"),Lo.overrideMimeType&&Lo.overrideMimeType("text/plain; charset=x-user-defined"),Lo.send(null),!(Lo.status>=200&&Lo.status<300||Lo.status===304))throw new Error("Couldn't load "+ae+". Status: "+Lo.status);return Lo.response!==void 0?new Uint8Array(Lo.response||[]):Hl(Lo.responseText||"",!0)},T=this;T.setDataGetter(function(kn){var ii=kn*Pr,Lo=(kn+1)*Pr-1;if(Lo=Math.min(Lo,cn-1),typeof T.chunks[kn]>"u"&&(T.chunks[kn]=h(ii,Lo)),typeof T.chunks[kn]>"u")throw new Error("doXHR failed!");return T.chunks[kn]}),(m||!cn)&&(Pr=cn=1,cn=this.getter(0).length,Pr=cn,w("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=cn,this._chunkSize=Pr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Mt,Tt}else var Tt={isDevice:!1,url:ae};var wr=ze.createFile(R,W,Tt,Ae,Ye);Tt.contents?wr.contents=Tt.contents:Tt.url&&(wr.contents=null,wr.url=Tt.url),Object.defineProperties(wr,{usedBytes:{get:function(){return this.contents.length}}});var mr={},vr=Object.keys(wr.stream_ops);return vr.forEach(function(ar){var $r=wr.stream_ops[ar];mr[ar]=function(){if(!ze.forceLoadFile(wr))throw new ze.ErrnoError(29);return $r.apply(null,arguments)}}),mr.read=function($r,cn,Ln,tt,m){if(!ze.forceLoadFile(wr))throw new ze.ErrnoError(29);var Pr=$r.node.contents;if(m>=Pr.length)return 0;var h=Math.min(Pr.length-m,tt);if(Pr.slice)for(var T=0;T<h;T++)cn[Ln+T]=Pr[m+T];else for(var T=0;T<h;T++)cn[Ln+T]=Pr.get(m+T);return h},wr.stream_ops=mr,wr},createPreloadedFile:function(R,W,ae,Ae,Ye,yt,Mt,Tt,wr,mr){we.init();var vr=W?Li.resolve(pi.join2(R,W)):R;function ar($r){function cn(tt){mr&&mr(),Tt||ze.createDataFile(R,W,tt,Ae,Ye,wr),yt&&yt(),xn()}var Ln=!1;e.preloadPlugins.forEach(function(tt){Ln||tt.canHandle(vr)&&(tt.handle($r,vr,cn,function(){Mt&&Mt(),xn()}),Ln=!0)}),Ln||cn($r)}wi(),typeof ae=="string"?we.asyncLoad(ae,function($r){ar($r)},Mt):ar(ae)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(R,W,ae){W=W||function(){},ae=ae||function(){};var Ae=ze.indexedDB();try{var Ye=Ae.open(ze.DB_NAME(),ze.DB_VERSION)}catch(yt){return ae(yt)}Ye.onupgradeneeded=function(){w("creating db");var Mt=Ye.result;Mt.createObjectStore(ze.DB_STORE_NAME)},Ye.onsuccess=function(){var Mt=Ye.result,Tt=Mt.transaction([ze.DB_STORE_NAME],"readwrite"),wr=Tt.objectStore(ze.DB_STORE_NAME),mr=0,vr=0,ar=R.length;function $r(){vr==0?W():ae()}R.forEach(function(cn){var Ln=wr.put(ze.analyzePath(cn).object.contents,cn);Ln.onsuccess=function(){mr++,mr+vr==ar&&$r()},Ln.onerror=function(){vr++,mr+vr==ar&&$r()}}),Tt.onerror=ae},Ye.onerror=ae},loadFilesFromDB:function(R,W,ae){W=W||function(){},ae=ae||function(){};var Ae=ze.indexedDB();try{var Ye=Ae.open(ze.DB_NAME(),ze.DB_VERSION)}catch(yt){return ae(yt)}Ye.onupgradeneeded=ae,Ye.onsuccess=function(){var Mt=Ye.result;try{var Tt=Mt.transaction([ze.DB_STORE_NAME],"readonly")}catch(cn){ae(cn);return}var wr=Tt.objectStore(ze.DB_STORE_NAME),mr=0,vr=0,ar=R.length;function $r(){vr==0?W():ae()}R.forEach(function(cn){var Ln=wr.get(cn);Ln.onsuccess=function(){ze.analyzePath(cn).exists&&ze.unlink(cn),ze.createDataFile(pi.dirname(cn),pi.basename(cn),Ln.result,!0,!0,!0),mr++,mr+vr==ar&&$r()},Ln.onerror=function(){vr++,mr+vr==ar&&$r()}}),Tt.onerror=ae},Ye.onerror=ae},mmapAlloc:function(R){for(var W=C(R,16384),ae=us(W);R<W;)We[ae+R++]=0;return ae}};function Ea(R,W){if(we.mainLoop.timingMode=R,we.mainLoop.timingValue=W,!we.mainLoop.func)return 1;if(R==0)we.mainLoop.scheduler=function(){var Mt=Math.max(0,we.mainLoop.tickStartTime+W-ha())|0;setTimeout(we.mainLoop.runner,Mt)},we.mainLoop.method="timeout";else if(R==1)we.mainLoop.scheduler=function(){we.requestAnimationFrame(we.mainLoop.runner)},we.mainLoop.method="rAF";else if(R==2){if(typeof setImmediate>"u"){var ae=[],Ae="setimmediate",Ye=function(yt){(yt.data===Ae||yt.data.target===Ae)&&(yt.stopPropagation(),ae.shift()())};addEventListener("message",Ye,!0),setImmediate=function(Mt){ae.push(Mt),postMessage(Ae,"*")}}we.mainLoop.scheduler=function(){setImmediate(we.mainLoop.runner)},we.mainLoop.method="immediate"}return 0}var ha;typeof performance<"u"&&performance.now?ha=function(){return performance.now()}:ha=Date.now;function ra(R,W,ae,Ae,Ye){ve(!we.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),we.mainLoop.func=R,we.mainLoop.arg=Ae;var yt;typeof Ae<"u"?yt=function(){e.dynCall_vi(R,Ae)}:yt=function(){e.dynCall_v(R)};var Mt=we.mainLoop.currentlyRunningMainloop;if(we.mainLoop.runner=function(){if(!ce){if(we.mainLoop.queue.length>0){var wr=Date.now(),mr=we.mainLoop.queue.shift();if(mr.func(mr.arg),we.mainLoop.remainingBlockers){var vr=we.mainLoop.remainingBlockers,ar=vr%1==0?vr-1:Math.floor(vr);mr.counted?we.mainLoop.remainingBlockers=ar:(ar=ar+.5,we.mainLoop.remainingBlockers=(8*vr+ar)/9)}if(console.log('main loop blocker "'+mr.name+'" took '+(Date.now()-wr)+" ms"),we.mainLoop.updateStatus(),Mt<we.mainLoop.currentlyRunningMainloop)return;setTimeout(we.mainLoop.runner,0);return}if(!(Mt<we.mainLoop.currentlyRunningMainloop)){if(we.mainLoop.currentFrameNumber=we.mainLoop.currentFrameNumber+1|0,we.mainLoop.timingMode==1&&we.mainLoop.timingValue>1&&we.mainLoop.currentFrameNumber%we.mainLoop.timingValue!=0){we.mainLoop.scheduler();return}else we.mainLoop.timingMode==0&&(we.mainLoop.tickStartTime=ha());we.mainLoop.runIter(yt),!(Mt<we.mainLoop.currentlyRunningMainloop)&&(typeof Fe=="object"&&Fe.audio&&Fe.audio.queueNewAudioData&&Fe.audio.queueNewAudioData(),we.mainLoop.scheduler())}}},Ye||(W&&W>0?Ea(0,1e3/W):Ea(1,1),we.mainLoop.scheduler()),ae)throw"unwind"}var we={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){we.mainLoop.scheduler=null,we.mainLoop.currentlyRunningMainloop++},resume:function(){we.mainLoop.currentlyRunningMainloop++;var R=we.mainLoop.timingMode,W=we.mainLoop.timingValue,ae=we.mainLoop.func;we.mainLoop.func=null,ra(ae,0,!1,we.mainLoop.arg,!0),Ea(R,W),we.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var R=e.statusMessage||"Please wait...",W=we.mainLoop.remainingBlockers,ae=we.mainLoop.expectedBlockers;W?W<ae?e.setStatus(R+" ("+(ae-W)+"/"+ae+")"):e.setStatus(R):e.setStatus("")}},runIter:function(R){if(!ce){if(e.preMainLoop){var W=e.preMainLoop();if(W===!1)return}try{R()}catch(ae){if(ae instanceof Oo)return;if(ae=="unwind")return;throw ae&&typeof ae=="object"&&ae.stack&&E("exception thrown: "+[ae,ae.stack]),ae}e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),we.initted)return;we.initted=!0;try{new Blob,we.hasBlobConstructor=!0}catch{we.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}we.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:we.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),we.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!e.noImageDecoding&&typeof we.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var R={};R.canHandle=function(yt){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(yt)},R.handle=function(yt,Mt,Tt,wr){var mr=null;if(we.hasBlobConstructor)try{mr=new Blob([yt],{type:we.getMimetype(Mt)}),mr.size!==yt.length&&(mr=new Blob([new Uint8Array(yt).buffer],{type:we.getMimetype(Mt)}))}catch(cn){F("Blob constructor present but fails: "+cn+"; falling back to blob builder")}if(!mr){var vr=new we.BlobBuilder;vr.append(new Uint8Array(yt).buffer),mr=vr.getBlob()}var ar=we.URLObject.createObjectURL(mr),$r=new Image;$r.onload=function(){ve($r.complete,"Image "+Mt+" could not be decoded");var Ln=document.createElement("canvas");Ln.width=$r.width,Ln.height=$r.height;var tt=Ln.getContext("2d");tt.drawImage($r,0,0),e.preloadedImages[Mt]=Ln,we.URLObject.revokeObjectURL(ar),Tt&&Tt(yt)},$r.onerror=function(Ln){console.log("Image "+ar+" could not be decoded"),wr&&wr()},$r.src=ar},e.preloadPlugins.push(R);var W={};W.canHandle=function(yt){return!e.noAudioDecoding&&yt.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},W.handle=function(yt,Mt,Tt,wr){var mr=!1;function vr(tt){mr||(mr=!0,e.preloadedAudios[Mt]=tt,Tt&&Tt(yt))}function ar(){mr||(mr=!0,e.preloadedAudios[Mt]=new Audio,wr&&wr())}if(we.hasBlobConstructor){try{var $r=new Blob([yt],{type:we.getMimetype(Mt)})}catch{return ar()}var cn=we.URLObject.createObjectURL($r),Ln=new Audio;Ln.addEventListener("canplaythrough",function(){vr(Ln)},!1),Ln.onerror=function(m){if(mr)return;console.log("warning: browser could not fully decode audio "+Mt+", trying slower base64 approach");function Pr(h){for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kn="=",ii="",Lo=0,K=0,Ri=0;Ri<h.length;Ri++)for(Lo=Lo<<8|h[Ri],K+=8;K>=6;){var xs=Lo>>K-6&63;K-=6,ii+=T[xs]}return K==2?(ii+=T[(Lo&3)<<4],ii+=kn+kn):K==4&&(ii+=T[(Lo&15)<<2],ii+=kn),ii}Ln.src="data:audio/x-"+Mt.substr(-3)+";base64,"+Pr(yt),vr(Ln)},Ln.src=cn,we.safeSetTimeout(function(){vr(Ln)},1e4)}else return ar()},e.preloadPlugins.push(W);function ae(){we.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}var Ae=e.canvas;Ae&&(Ae.requestPointerLock=Ae.requestPointerLock||Ae.mozRequestPointerLock||Ae.webkitRequestPointerLock||Ae.msRequestPointerLock||function(){},Ae.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},Ae.exitPointerLock=Ae.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ae,!1),document.addEventListener("mozpointerlockchange",ae,!1),document.addEventListener("webkitpointerlockchange",ae,!1),document.addEventListener("mspointerlockchange",ae,!1),e.elementPointerLock&&Ae.addEventListener("click",function(Ye){!we.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),Ye.preventDefault())},!1))},createContext:function(R,W,ae,Ae){if(W&&e.ctx&&R==e.canvas)return e.ctx;var Ye,yt;if(W){var Mt={antialias:!1,alpha:!1,majorVersion:1};if(Ae)for(var Tt in Ae)Mt[Tt]=Ae[Tt];typeof sn<"u"&&(yt=sn.createContext(R,Mt),yt&&(Ye=sn.getContext(yt).GLctx))}else Ye=R.getContext("2d");return Ye?(ae&&(W||ve(typeof vs>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=Ye,W&&sn.makeContextCurrent(yt),e.useWebGL=W,we.moduleContextCreatedCallbacks.forEach(function(wr){wr()}),we.init()),Ye):null},destroyContext:function(R,W,ae){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(R,W){we.lockPointer=R,we.resizeCanvas=W,typeof we.lockPointer>"u"&&(we.lockPointer=!0),typeof we.resizeCanvas>"u"&&(we.resizeCanvas=!1);var ae=e.canvas;function Ae(){we.isFullscreen=!1;var yt=ae.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===yt?(ae.exitFullscreen=we.exitFullscreen,we.lockPointer&&ae.requestPointerLock(),we.isFullscreen=!0,we.resizeCanvas?we.setFullscreenCanvasSize():we.updateCanvasDimensions(ae)):(yt.parentNode.insertBefore(ae,yt),yt.parentNode.removeChild(yt),we.resizeCanvas?we.setWindowedCanvasSize():we.updateCanvasDimensions(ae)),e.onFullScreen&&e.onFullScreen(we.isFullscreen),e.onFullscreen&&e.onFullscreen(we.isFullscreen)}we.fullscreenHandlersInstalled||(we.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",Ae,!1),document.addEventListener("mozfullscreenchange",Ae,!1),document.addEventListener("webkitfullscreenchange",Ae,!1),document.addEventListener("MSFullscreenChange",Ae,!1));var Ye=document.createElement("div");ae.parentNode.insertBefore(Ye,ae),Ye.appendChild(ae),Ye.requestFullscreen=Ye.requestFullscreen||Ye.mozRequestFullScreen||Ye.msRequestFullscreen||(Ye.webkitRequestFullscreen?function(){Ye.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(Ye.webkitRequestFullScreen?function(){Ye.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),Ye.requestFullscreen()},exitFullscreen:function(){if(!we.isFullscreen)return!1;var R=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return R.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(R){var W=Date.now();if(we.nextRAF===0)we.nextRAF=W+1e3/60;else for(;W+2>=we.nextRAF;)we.nextRAF+=1e3/60;var ae=Math.max(we.nextRAF-W,0);setTimeout(R,ae)},requestAnimationFrame:function(R){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(R);return}var W=we.fakeRequestAnimationFrame;typeof window<"u"&&(W=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||W),W(R)},safeCallback:function(R){return function(){if(!ce)return R.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){we.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(we.allowAsyncCallbacks=!0,we.queuedAsyncCallbacks.length>0){var R=we.queuedAsyncCallbacks;we.queuedAsyncCallbacks=[],R.forEach(function(W){W()})}},safeRequestAnimationFrame:function(R){return we.requestAnimationFrame(function(){ce||(we.allowAsyncCallbacks?R():we.queuedAsyncCallbacks.push(R))})},safeSetTimeout:function(R,W){return setTimeout(function(){ce||(we.allowAsyncCallbacks?R():we.queuedAsyncCallbacks.push(R))},W)},safeSetInterval:function(R,W){return setInterval(function(){ce||we.allowAsyncCallbacks&&R()},W)},getMimetype:function(R){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[R.substr(R.lastIndexOf(".")+1)]},getUserMedia:function(R){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(R)},getMovementX:function(R){return R.movementX||R.mozMovementX||R.webkitMovementX||0},getMovementY:function(R){return R.movementY||R.mozMovementY||R.webkitMovementY||0},getMouseWheelDelta:function(R){var W=0;switch(R.type){case"DOMMouseScroll":W=R.detail/3;break;case"mousewheel":W=R.wheelDelta/120;break;case"wheel":switch(W=R.deltaY,R.deltaMode){case 0:W/=100;break;case 1:W/=3;break;case 2:W*=80;break;default:throw"unrecognized mouse wheel delta mode: "+R.deltaMode}break;default:throw"unrecognized mouse wheel event: "+R.type}return W},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(R){if(we.pointerLock)R.type!="mousemove"&&"mozMovementX"in R?we.mouseMovementX=we.mouseMovementY=0:(we.mouseMovementX=we.getMovementX(R),we.mouseMovementY=we.getMovementY(R)),typeof Fe<"u"?(we.mouseX=Fe.mouseX+we.mouseMovementX,we.mouseY=Fe.mouseY+we.mouseMovementY):(we.mouseX+=we.mouseMovementX,we.mouseY+=we.mouseMovementY);else{var W=e.canvas.getBoundingClientRect(),ae=e.canvas.width,Ae=e.canvas.height,Ye=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,yt=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(R.type==="touchstart"||R.type==="touchend"||R.type==="touchmove"){var Mt=R.touch;if(Mt===void 0)return;var Tt=Mt.pageX-(Ye+W.left),wr=Mt.pageY-(yt+W.top);Tt=Tt*(ae/W.width),wr=wr*(Ae/W.height);var mr={x:Tt,y:wr};if(R.type==="touchstart")we.lastTouches[Mt.identifier]=mr,we.touches[Mt.identifier]=mr;else if(R.type==="touchend"||R.type==="touchmove"){var vr=we.touches[Mt.identifier];vr||(vr=mr),we.lastTouches[Mt.identifier]=vr,we.touches[Mt.identifier]=mr}return}var ar=R.pageX-(Ye+W.left),$r=R.pageY-(yt+W.top);ar=ar*(ae/W.width),$r=$r*(Ae/W.height),we.mouseMovementX=ar-we.mouseX,we.mouseMovementY=$r-we.mouseY,we.mouseX=ar,we.mouseY=$r}},asyncLoad:function(R,W,ae,Ae){var Ye=Ae?"":"al "+R;f(R,function(yt){ve(yt,'Loading data file "'+R+'" failed (no arrayBuffer).'),W(new Uint8Array(yt)),Ye&&xn()},function(yt){if(ae)ae();else throw'Loading data file "'+R+'" failed.'}),Ye&&wi()},resizeListeners:[],updateResizeListeners:function(){var R=e.canvas;we.resizeListeners.forEach(function(W){W(R.width,R.height)})},setCanvasSize:function(R,W,ae){var Ae=e.canvas;we.updateCanvasDimensions(Ae,R,W),ae||we.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Fe<"u"){var R=dt[Fe.screen>>2];R=R|8388608,Pe[Fe.screen>>2]=R}we.updateCanvasDimensions(e.canvas),we.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Fe<"u"){var R=dt[Fe.screen>>2];R=R&-8388609,Pe[Fe.screen>>2]=R}we.updateCanvasDimensions(e.canvas),we.updateResizeListeners()},updateCanvasDimensions:function(R,W,ae){W&&ae?(R.widthNative=W,R.heightNative=ae):(W=R.widthNative,ae=R.heightNative);var Ae=W,Ye=ae;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(Ae/Ye<e.forcedAspectRatio?Ae=Math.round(Ye*e.forcedAspectRatio):Ye=Math.round(Ae/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===R.parentNode&&typeof screen<"u"){var yt=Math.min(screen.width/Ae,screen.height/Ye);Ae=Math.round(Ae*yt),Ye=Math.round(Ye*yt)}we.resizeCanvas?(R.width!=Ae&&(R.width=Ae),R.height!=Ye&&(R.height=Ye),typeof R.style<"u"&&(R.style.removeProperty("width"),R.style.removeProperty("height"))):(R.width!=W&&(R.width=W),R.height!=ae&&(R.height=ae),typeof R.style<"u"&&(Ae!=W||Ye!=ae?(R.style.setProperty("width",Ae+"px","important"),R.style.setProperty("height",Ye+"px","important")):(R.style.removeProperty("width"),R.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var R=we.nextWgetRequestHandle;return we.nextWgetRequestHandle++,R}};function _e(){return Date.now()-Fe.startTime|0}function De(R){var W=Fe.surfaces[R];if(W.locked++,W.locked>1||(W.buffer||(W.buffer=us(W.width*W.height*4),Pe[R+20>>2]=W.buffer),Pe[R+20>>2]=W.buffer,R==Fe.screen&&e.screenIsReadOnly&&W.image))return 0;if(W.image=W.ctx.getImageData(0,0,W.width,W.height),R==Fe.screen&&Fe.defaults.opaqueFrontBuffer)for(var ae=W.image.data,Ae=ae.length,Ye=0;Ye<Ae/4;Ye++)ae[Ye*4+3]=255;{if(W.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;ke.set(W.image.data,W.buffer)}return 0}function ot(){return Fe.unicode}function lt(){return Fe.ttfContext}function Rt(){return Fe.audio}var Fe={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(R){return{x:Pe[R+0>>2],y:Pe[R+4>>2],w:Pe[R+8>>2],h:Pe[R+12>>2]}},updateRect:function(R,W){Pe[R>>2]=W.x,Pe[R+4>>2]=W.y,Pe[R+8>>2]=W.w,Pe[R+12>>2]=W.h},intersectionOfRects:function(R,W){var ae=Math.max(R.x,W.x),Ae=Math.max(R.y,W.y),Ye=Math.min(R.x+R.w,W.x+W.w),yt=Math.min(R.y+R.h,W.y+W.h);return{x:ae,y:Ae,w:Math.max(ae,Ye)-ae,h:Math.max(Ae,yt)-Ae}},checkPixelFormat:function(R){},loadColorToCSSRGB:function(R){var W=Pe[R>>2];return"rgb("+(W&255)+","+(W>>8&255)+","+(W>>16&255)+")"},loadColorToCSSRGBA:function(R){var W=Pe[R>>2];return"rgba("+(W&255)+","+(W>>8&255)+","+(W>>16&255)+","+(W>>24&255)/255+")"},translateColorToCSSRGBA:function(R){return"rgba("+(R&255)+","+(R>>8&255)+","+(R>>16&255)+","+(R>>>24)/255+")"},translateRGBAToCSSRGBA:function(R,W,ae,Ae){return"rgba("+(R&255)+","+(W&255)+","+(ae&255)+","+(Ae&255)/255+")"},translateRGBAToColor:function(R,W,ae,Ae){return R|W<<8|ae<<16|Ae<<24},makeSurface:function(R,W,ae,Ae,Ye,yt,Mt,Tt,wr){ae=ae||0;var mr=ae&1,vr=ae&2097152,ar=ae&67108864,$r=us(60),cn=us(44),Ln=vr?1:4,tt=0;!mr&&!ar&&(tt=us(R*W*4)),Pe[$r>>2]=ae,Pe[$r+4>>2]=cn,Pe[$r+8>>2]=R,Pe[$r+12>>2]=W,Pe[$r+16>>2]=R*Ln,Pe[$r+20>>2]=tt,Pe[$r+36>>2]=0,Pe[$r+40>>2]=0,Pe[$r+44>>2]=e.canvas.width,Pe[$r+48>>2]=e.canvas.height,Pe[$r+56>>2]=1,Pe[cn>>2]=-2042224636,Pe[cn+4>>2]=0,We[cn+8>>0]=Ln*8,We[cn+9>>0]=Ln,Pe[cn+12>>2]=yt||255,Pe[cn+16>>2]=Mt||65280,Pe[cn+20>>2]=Tt||16711680,Pe[cn+24>>2]=wr||4278190080,Fe.GL=Fe.GL||ar;var m;Ae?m=e.canvas:(Fe.canvasPool.length>0?m=Fe.canvasPool.pop():m=document.createElement("canvas"),m.width=R,m.height=W);var Pr={antialias:Fe.glAttributes[13]!=0,depth:Fe.glAttributes[6]>0,stencil:Fe.glAttributes[7]>0,alpha:Fe.glAttributes[3]>0},h=we.createContext(m,ar,Ae,Pr);return Fe.surfaces[$r]={width:R,height:W,canvas:m,ctx:h,surf:$r,buffer:tt,pixelFormat:cn,alpha:255,flags:ae,locked:0,usePageCanvas:Ae,source:Ye,isFlagSet:function(T){return ae&T}},$r},copyIndexedColorData:function(R,W,ae,Ae,Ye){if(R.colors){var yt=e.canvas.width,Mt=e.canvas.height,Tt=W||0,wr=ae||0,mr=(Ae||yt-Tt)+Tt,vr=(Ye||Mt-wr)+wr,ar=R.buffer;R.image.data32||(R.image.data32=new Uint32Array(R.image.data.buffer));for(var $r=R.image.data32,cn=R.colors32,Ln=wr;Ln<vr;++Ln)for(var tt=Ln*yt,m=Tt;m<mr;++m)$r[tt+m]=cn[ke[ar+tt+m>>0]]}},freeSurface:function(R){var W=R+56,ae=Pe[W>>2];if(ae>1){Pe[W>>2]=ae-1;return}var Ae=Fe.surfaces[R];!Ae.usePageCanvas&&Ae.canvas&&Fe.canvasPool.push(Ae.canvas),Ae.buffer&&Ds(Ae.buffer),Ds(Ae.pixelFormat),Ds(R),Fe.surfaces[R]=null,R===Fe.screen&&(Fe.screen=null)},blitSurface:function(R,W,ae,Ae,Ye){var yt=Fe.surfaces[R],Mt=Fe.surfaces[ae],Tt,wr;if(W?Tt=Fe.loadRect(W):Tt={x:0,y:0,w:yt.width,h:yt.height},Ae?wr=Fe.loadRect(Ae):wr={x:0,y:0,w:yt.width,h:yt.height},Mt.clipRect){var mr=!Ye||Tt.w===0?1:Tt.w/wr.w,vr=!Ye||Tt.h===0?1:Tt.h/wr.h;wr=Fe.intersectionOfRects(Mt.clipRect,wr),Tt.w=wr.w*mr,Tt.h=wr.h*vr,Ae&&Fe.updateRect(Ae,wr)}var ar,$r;if(Ye?(ar=wr.w,$r=wr.h):(ar=Tt.w,$r=Tt.h),Tt.w===0||Tt.h===0||ar===0||$r===0)return 0;var cn=Mt.ctx.globalAlpha;return Mt.ctx.globalAlpha=yt.alpha/255,Mt.ctx.drawImage(yt.canvas,Tt.x,Tt.y,Tt.w,Tt.h,wr.x,wr.y,ar,$r),Mt.ctx.globalAlpha=cn,ae!=Fe.screen&&(F("WARNING: copying canvas data to memory for compatibility"),De(ae),Mt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(R){function W(){for(var vr in Fe.keyboardMap)Fe.events.push({type:"keyup",keyCode:Fe.keyboardMap[vr]})}switch(R.type){case"touchstart":case"touchmove":{R.preventDefault();var ae=[];if(R.type==="touchstart")for(var Ae=0;Ae<R.touches.length;Ae++){var Ye=R.touches[Ae];Fe.downFingers[Ye.identifier]!=!0&&(Fe.downFingers[Ye.identifier]=!0,ae.push(Ye))}else ae=R.touches;var yt=ae[0];if(yt){R.type=="touchstart"&&(Fe.DOMButtons[0]=1);var Mt;switch(R.type){case"touchstart":Mt="mousedown";break;case"touchmove":Mt="mousemove";break}var Tt={type:Mt,button:0,pageX:yt.clientX,pageY:yt.clientY};Fe.events.push(Tt)}for(var Ae=0;Ae<ae.length;Ae++){var Ye=ae[Ae];Fe.events.push({type:R.type,touch:Ye})}break}case"touchend":{R.preventDefault();for(var Ae=0;Ae<R.changedTouches.length;Ae++){var Ye=R.changedTouches[Ae];Fe.downFingers[Ye.identifier]===!0&&delete Fe.downFingers[Ye.identifier]}var Tt={type:"mouseup",button:0,pageX:R.changedTouches[0].clientX,pageY:R.changedTouches[0].clientY};Fe.DOMButtons[0]=0,Fe.events.push(Tt);for(var Ae=0;Ae<R.changedTouches.length;Ae++){var Ye=R.changedTouches[Ae];Fe.events.push({type:"touchend",touch:Ye})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var wr=-we.getMouseWheelDelta(R);wr=wr==0?0:wr>0?Math.max(wr,1):Math.min(wr,-1);var mr=wr>0?3:4;Fe.events.push({type:"mousedown",button:mr,pageX:R.pageX,pageY:R.pageY}),Fe.events.push({type:"mouseup",button:mr,pageX:R.pageX,pageY:R.pageY}),Fe.events.push({type:"wheel",deltaX:0,deltaY:wr}),R.preventDefault();break;case"mousemove":if(Fe.DOMButtons[0]===1&&Fe.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}}),we.pointerLock&&("mozMovementX"in R&&(R.movementX=R.mozMovementX,R.movementY=R.mozMovementY),R.movementX==0&&R.movementY==0)){R.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((R.type!=="keydown"||!ot()&&!Fe.textInput||R.keyCode===8||R.keyCode===9)&&R.preventDefault(),R.type=="mousedown")Fe.DOMButtons[R.button]=1,Fe.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}});else if(R.type=="mouseup"){if(!Fe.DOMButtons[R.button])return;Fe.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}}),Fe.DOMButtons[R.button]=0}R.type==="keydown"||R.type==="mousedown"?Fe.canRequestFullscreen=!0:(R.type==="keyup"||R.type==="mouseup")&&(Fe.canRequestFullscreen=!1),R.type==="keypress"&&Fe.savedKeydown?(Fe.savedKeydown.keypressCharCode=R.charCode,Fe.savedKeydown=null):R.type==="keydown"&&(Fe.savedKeydown=R),(R.type!=="keypress"||Fe.textInput)&&Fe.events.push(R);break;case"mouseout":for(var Ae=0;Ae<3;Ae++)Fe.DOMButtons[Ae]&&(Fe.events.push({type:"mouseup",button:Ae,pageX:R.pageX,pageY:R.pageY}),Fe.DOMButtons[Ae]=0);R.preventDefault();break;case"focus":Fe.events.push(R),R.preventDefault();break;case"blur":Fe.events.push(R),W(),R.preventDefault();break;case"visibilitychange":Fe.events.push({type:"visibilitychange",visible:!document.hidden}),W(),R.preventDefault();break;case"unload":we.mainLoop.runner&&(Fe.events.push(R),we.mainLoop.runner());return;case"resize":Fe.events.push(R),R.preventDefault&&R.preventDefault();break}Fe.events.length>=1e4&&(E("SDL event queue full, dropping events"),Fe.events=Fe.events.slice(0,1e4))},lookupKeyCodeForEvent:function(R){var W=R.keyCode;return W>=65&&W<=90?W+=32:(W=Fe.keyCodes[R.keyCode]||R.keyCode,R.location===2&&W>=(224|1<<10)&&W<=(227|1<<10)&&(W+=4)),W},handleEvent:function(R){if(!R.handled)switch(R.handled=!0,R.type){case"touchstart":case"touchend":case"touchmove":{we.calculateMouseEvent(R);break}case"keydown":case"keyup":{var W=R.type==="keydown",ae=Fe.lookupKeyCodeForEvent(R);We[Fe.keyboardState+ae>>0]=W,Fe.modState=(We[Fe.keyboardState+1248>>0]?64:0)|(We[Fe.keyboardState+1249>>0]?1:0)|(We[Fe.keyboardState+1250>>0]?256:0)|(We[Fe.keyboardState+1252>>0]?128:0)|(We[Fe.keyboardState+1253>>0]?2:0)|(We[Fe.keyboardState+1254>>0]?512:0),W?Fe.keyboardMap[ae]=R.keyCode:delete Fe.keyboardMap[ae];break}case"mousedown":case"mouseup":R.type=="mousedown"?Fe.buttonState|=1<<R.button:R.type=="mouseup"&&(Fe.buttonState&=~(1<<R.button));case"mousemove":{we.calculateMouseEvent(R);break}}},flushEventsToHandler:function(){},pollEvent:function(R){if(Fe.initFlags&512&&Fe.joystickEventState&&Fe.queryJoysticks(),R){for(;Fe.events.length>0;)if(Fe.makeCEvent(Fe.events.shift(),R)!==!1)return 1;return 0}else return Fe.events.length>0},makeCEvent:function(R,W){if(typeof R=="number"){nl(W,R,28),Ds(R);return}switch(Fe.handleEvent(R),R.type){case"keydown":case"keyup":{var ae=R.type==="keydown",Ae=Fe.lookupKeyCodeForEvent(R),Ye;Ae>=1024?Ye=Ae-1024:Ye=Fe.scanCodes[Ae]||Ae,Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],We[W+8>>0]=ae?1:0,We[W+9>>0]=0,Pe[W+12>>2]=Ye,Pe[W+16>>2]=Ae,Re[W+20>>1]=Fe.modState,Pe[W+24>>2]=R.keypressCharCode||Ae;break}case"keypress":{Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type];for(var yt=Hl(String.fromCharCode(R.charCode)),Mt=0;Mt<yt.length;++Mt)We[W+(8+Mt)>>0]=yt[Mt];break}case"mousedown":case"mouseup":case"mousemove":{if(R.type!="mousemove"){var ae=R.type==="mousedown";Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,Pe[W+8>>2]=0,Pe[W+12>>2]=0,We[W+16>>0]=R.button+1,We[W+17>>0]=ae?1:0,Pe[W+20>>2]=we.mouseX,Pe[W+24>>2]=we.mouseY}else Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,Pe[W+8>>2]=0,Pe[W+12>>2]=0,Pe[W+16>>2]=Fe.buttonState,Pe[W+20>>2]=we.mouseX,Pe[W+24>>2]=we.mouseY,Pe[W+28>>2]=we.mouseMovementX,Pe[W+32>>2]=we.mouseMovementY;break}case"wheel":{Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+16>>2]=R.deltaX,Pe[W+20>>2]=R.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Tt=R.touch;if(!we.touches[Tt.identifier])break;var wr=e.canvas.width,mr=e.canvas.height,vr=we.touches[Tt.identifier].x/wr,ar=we.touches[Tt.identifier].y/mr,$r=we.lastTouches[Tt.identifier].x/wr,cn=we.lastTouches[Tt.identifier].y/mr,Ln=vr-$r,tt=ar-cn;if(Tt.deviceID===void 0&&(Tt.deviceID=Fe.TOUCH_DEFAULT_ID),Ln===0&&tt===0&&R.type==="touchmove")return!1;Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=_e(),Ro=[Tt.deviceID>>>0,(ci=Tt.deviceID,+Bn(ci)>=1?ci>0?(_i(+ai(ci/4294967296),4294967295)|0)>>>0:~~+Jn((ci-+(~~ci>>>0))/4294967296)>>>0:0)],Pe[W+8>>2]=Ro[0],Pe[W+12>>2]=Ro[1],Ro=[Tt.identifier>>>0,(ci=Tt.identifier,+Bn(ci)>=1?ci>0?(_i(+ai(ci/4294967296),4294967295)|0)>>>0:~~+Jn((ci-+(~~ci>>>0))/4294967296)>>>0:0)],Pe[W+16>>2]=Ro[0],Pe[W+20>>2]=Ro[1],Et[W+24>>2]=vr,Et[W+28>>2]=ar,Et[W+32>>2]=Ln,Et[W+36>>2]=tt,Tt.force!==void 0?Et[W+40>>2]=Tt.force:Et[W+40>>2]=R.type=="touchend"?0:1;break}case"unload":{Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type];break}case"resize":{Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=R.w,Pe[W+8>>2]=R.h;break}case"joystick_button_up":case"joystick_button_down":{var m=R.type==="joystick_button_up"?0:1;Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],We[W+4>>0]=R.index,We[W+5>>0]=R.button,We[W+6>>0]=m;break}case"joystick_axis_motion":{Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],We[W+4>>0]=R.index,We[W+5>>0]=R.axis,Pe[W+8>>2]=Fe.joystickAxisValueConversion(R.value);break}case"focus":{var Pr=12;Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,We[W+8>>0]=Pr;break}case"blur":{var h=13;Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,We[W+8>>0]=h;break}case"visibilitychange":{var T=1,kn=2,ii=R.visible?T:kn;Pe[W>>2]=Fe.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,We[W+8>>0]=ii;break}default:throw"Unhandled SDL event: "+R.type}},makeFontString:function(R,W){return W.charAt(0)!="'"&&W.charAt(0)!='"'&&(W='"'+W+'"'),R+"px "+W+", serif"},estimateTextWidth:function(R,W){var ae=R.size,Ae=Fe.makeFontString(ae,R.name),Ye=lt();Ye.font=Ae;var yt=Ye.measureText(W).width|0;return yt},allocateChannels:function(R){if(!(Fe.numChannels&&Fe.numChannels>=R&&R!=0)){Fe.numChannels=R,Fe.channels=[];for(var W=0;W<R;W++)Fe.channels[W]={audio:null,volume:1}}},setGetVolume:function(R,W){if(!R)return 0;var ae=R.volume*128;if(W!=-1&&(R.volume=Math.min(Math.max(W,0),128)/128,R.audio))try{R.audio.volume=R.volume,R.audio.webAudioGainNode&&(R.audio.webAudioGainNode.gain.value=R.volume)}catch(Ae){E("setGetVolume failed to set audio volume: "+Ae)}return ae},setPannerPosition:function(R,W,ae,Ae){R&&R.audio&&R.audio.webAudioPannerNode&&R.audio.webAudioPannerNode.setPosition(W,ae,Ae)},playWebAudio:function(R){if(R&&!R.webAudioNode&&Fe.webAudioAvailable())try{var W=R.resource.webAudio;if(R.paused=!1,!W.decodedBuffer){W.onDecodeComplete===void 0&&si("Cannot play back audio object that was not loaded"),W.onDecodeComplete.push(function(){R.paused||Fe.playWebAudio(R)});return}R.webAudioNode=Fe.audioContext.createBufferSource(),R.webAudioNode.buffer=W.decodedBuffer,R.webAudioNode.loop=R.loop,R.webAudioNode.onended=function(){R.onended()},R.webAudioPannerNode=Fe.audioContext.createPanner(),R.webAudioPannerNode.setPosition(0,0,-.5),R.webAudioPannerNode.panningModel="equalpower",R.webAudioGainNode=Fe.audioContext.createGain(),R.webAudioGainNode.gain.value=R.volume,R.webAudioNode.connect(R.webAudioPannerNode),R.webAudioPannerNode.connect(R.webAudioGainNode),R.webAudioGainNode.connect(Fe.audioContext.destination),R.webAudioNode.start(0,R.currentPosition),R.startTime=Fe.audioContext.currentTime-R.currentPosition}catch(ae){E("playWebAudio failed: "+ae)}},pauseWebAudio:function(R){if(R){if(R.webAudioNode)try{R.currentPosition=(Fe.audioContext.currentTime-R.startTime)%R.resource.webAudio.decodedBuffer.duration,R.webAudioNode.onended=void 0,R.webAudioNode.stop(0),R.webAudioNode=void 0}catch(W){E("pauseWebAudio failed: "+W)}R.paused=!0}},openAudioContext:function(){Fe.audioContext||(typeof AudioContext<"u"?Fe.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Fe.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Fe.audioContext},fillWebAudioBufferFromHeap:function(R,W,ae){for(var Ae=Rt(),Ye=Ae.channels,yt=0;yt<Ye;++yt){var Mt=ae.getChannelData(yt);if(Mt.length!=W)throw"Web Audio output buffer length mismatch! Destination size: "+Mt.length+" samples vs expected "+W+" samples!";if(Ae.format==32784)for(var Tt=0;Tt<W;++Tt)Mt[Tt]=Re[R+(Tt*Ye+yt)*2>>1]/32768;else if(Ae.format==8)for(var Tt=0;Tt<W;++Tt){var wr=We[R+(Tt*Ye+yt)>>0];Mt[Tt]=(wr>=0?wr-128:wr+128)/128}else if(Ae.format==33056)for(var Tt=0;Tt<W;++Tt)Mt[Tt]=Et[R+(Tt*Ye+yt)*4>>2];else throw"Invalid SDL audio format "+Ae.format+"!"}},debugSurface:function(R){console.log("dumping surface "+[R.surf,R.source,R.width,R.height]);for(var W=R.ctx.getImageData(0,0,R.width,R.height),ae=W.data,Ae=Math.min(R.width,R.height),Ye=0;Ye<Ae;Ye++)console.log("   diagonal "+Ye+":"+[ae[Ye*R.width*4+Ye*4+0],ae[Ye*R.width*4+Ye*4+1],ae[Ye*R.width*4+Ye*4+2],ae[Ye*R.width*4+Ye*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(R,W){for(var ae=new Array(W.buttons.length),Ae=0;Ae<W.buttons.length;Ae++)ae[Ae]=Fe.getJoystickButtonState(W.buttons[Ae]);Fe.lastJoystickState[R]={buttons:ae,axes:W.axes.slice(0),timestamp:W.timestamp,index:W.index,id:W.id}},getJoystickButtonState:function(R){return typeof R=="object"?R.pressed:R>0},queryJoysticks:function(){for(var R in Fe.lastJoystickState){var W=Fe.getGamepad(R-1),ae=Fe.lastJoystickState[R];if(typeof W>"u"||W===null)return;if(typeof W.timestamp!="number"||W.timestamp!==ae.timestamp||!W.timestamp){var Ae;for(Ae=0;Ae<W.buttons.length;Ae++){var Ye=Fe.getJoystickButtonState(W.buttons[Ae]);Ye!==ae.buttons[Ae]&&Fe.events.push({type:Ye?"joystick_button_down":"joystick_button_up",joystick:R,index:R-1,button:Ae})}for(Ae=0;Ae<W.axes.length;Ae++)W.axes[Ae]!==ae.axes[Ae]&&Fe.events.push({type:"joystick_axis_motion",joystick:R,index:R-1,axis:Ae,value:W.axes[Ae]});Fe.recordJoystickState(R,W)}}},joystickAxisValueConversion:function(R){return R=Math.min(1,Math.max(R,-1)),Math.ceil((R+1)*32767.5-32768)},getGamepads:function(){var R=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return R!==void 0?R.apply(navigator):[]},getGamepad:function(R){var W=Fe.getGamepads();return W.length>R&&R>=0?W[R]:null}};function Ht(R,W,ae,Ae,Ye,yt,Mt,Tt){return Fe.makeSurface(W,ae,R,!1,"CreateRGBSurface",Ye,yt,Mt,Tt)}function Nt(R){}function ir(R){R&&Fe.freeSurface(R)}function Br(R){if(Fe.startTime=Date.now(),Fe.initFlags=R,!e.doNotCaptureKeyboard){var W=e.keyboardListeningElement||document;W.addEventListener("keydown",Fe.receiveEvent),W.addEventListener("keyup",Fe.receiveEvent),W.addEventListener("keypress",Fe.receiveEvent),window.addEventListener("focus",Fe.receiveEvent),window.addEventListener("blur",Fe.receiveEvent),document.addEventListener("visibilitychange",Fe.receiveEvent)}return window.addEventListener("unload",Fe.receiveEvent),Fe.keyboardState=us(65536),Gu(Fe.keyboardState,0,65536),Fe.DOMEventToSDLEvent.keydown=768,Fe.DOMEventToSDLEvent.keyup=769,Fe.DOMEventToSDLEvent.keypress=771,Fe.DOMEventToSDLEvent.mousedown=1025,Fe.DOMEventToSDLEvent.mouseup=1026,Fe.DOMEventToSDLEvent.mousemove=1024,Fe.DOMEventToSDLEvent.wheel=1027,Fe.DOMEventToSDLEvent.touchstart=1792,Fe.DOMEventToSDLEvent.touchend=1793,Fe.DOMEventToSDLEvent.touchmove=1794,Fe.DOMEventToSDLEvent.unload=256,Fe.DOMEventToSDLEvent.resize=28673,Fe.DOMEventToSDLEvent.visibilitychange=512,Fe.DOMEventToSDLEvent.focus=512,Fe.DOMEventToSDLEvent.blur=512,Fe.DOMEventToSDLEvent.joystick_axis_motion=1536,Fe.DOMEventToSDLEvent.joystick_button_down=1539,Fe.DOMEventToSDLEvent.joystick_button_up=1540,0}function nn(R){var W=R.getExtension("ANGLE_instanced_arrays");if(W)return R.vertexAttribDivisor=function(ae,Ae){W.vertexAttribDivisorANGLE(ae,Ae)},R.drawArraysInstanced=function(ae,Ae,Ye,yt){W.drawArraysInstancedANGLE(ae,Ae,Ye,yt)},R.drawElementsInstanced=function(ae,Ae,Ye,yt,Mt){W.drawElementsInstancedANGLE(ae,Ae,Ye,yt,Mt)},1}function Fr(R){var W=R.getExtension("OES_vertex_array_object");if(W)return R.createVertexArray=function(){return W.createVertexArrayOES()},R.deleteVertexArray=function(ae){W.deleteVertexArrayOES(ae)},R.bindVertexArray=function(ae){W.bindVertexArrayOES(ae)},R.isVertexArray=function(ae){return W.isVertexArrayOES(ae)},1}function Hn(R){var W=R.getExtension("WEBGL_draw_buffers");if(W)return R.drawBuffers=function(ae,Ae){W.drawBuffersWEBGL(ae,Ae)},1}function Yn(R){return!!(R.multiDrawWebgl=R.getExtension("WEBGL_multi_draw"))}var sn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(W){sn.lastError||(sn.lastError=W)},getNewId:function(R){for(var W=sn.counter++,ae=R.length;ae<W;ae++)R[ae]=null;return W},getSource:function(R,W,ae,Ae){for(var Ye="",yt=0;yt<W;++yt){var Mt=Ae?Pe[Ae+yt*4>>2]:-1;Ye+=Oe(Pe[ae+yt*4>>2],Mt<0?void 0:Mt)}return Ye},createContext:function(R,W){var ae=R.getContext("webgl",W)||R.getContext("experimental-webgl",W);if(!ae)return 0;var Ae=sn.registerContext(ae,W);return Ae},registerContext:function(R,W){var ae=sn.getNewId(sn.contexts),Ae={handle:ae,attributes:W,version:W.majorVersion,GLctx:R};return Ae.cannotHandleOffsetsInUniformArrayViews=function(Ye){function yt(mr,vr){var ar=Ye.createShader(vr);return Ye.shaderSource(ar,mr),Ye.compileShader(ar),ar}try{var Mt=Ye.createProgram();Ye.attachShader(Mt,yt("attribute vec4 p;void main(){gl_Position=p;}",35633)),Ye.attachShader(Mt,yt("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),Ye.linkProgram(Mt);var Tt=new Float32Array(8);Tt[4]=1,Ye.useProgram(Mt);var wr=Ye.getUniformLocation(Mt,"u");return Ye.uniform4fv(wr,Tt.subarray(4,8)),!Ye.getUniform(Mt,wr)[0]}catch{return!1}}(),R.canvas&&(R.canvas.GLctxObject=Ae),sn.contexts[ae]=Ae,(typeof W.enableExtensionsByDefault>"u"||W.enableExtensionsByDefault)&&sn.initExtensions(Ae),ae},makeContextCurrent:function(R){return sn.currentContext=sn.contexts[R],e.ctx=vs=sn.currentContext&&sn.currentContext.GLctx,!(R&&!vs)},getContext:function(R){return sn.contexts[R]},deleteContext:function(R){sn.currentContext===sn.contexts[R]&&(sn.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(sn.contexts[R].GLctx.canvas),sn.contexts[R]&&sn.contexts[R].GLctx.canvas&&(sn.contexts[R].GLctx.canvas.GLctxObject=void 0),sn.contexts[R]=null},initExtensions:function(R){if(R||(R=sn.currentContext),!R.initExtensionsDone){R.initExtensionsDone=!0;var W=R.GLctx;nn(W),Fr(W),Hn(W),W.disjointTimerQueryExt=W.getExtension("EXT_disjoint_timer_query"),Yn(W);var ae=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],Ae=W.getSupportedExtensions()||[];Ae.forEach(function(Ye){ae.indexOf(Ye)!=-1&&W.getExtension(Ye)})}},populateUniformTable:function(R){for(var W=sn.programs[R],ae=sn.programInfos[R]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},Ae=ae.uniforms,Ye=vs.getProgramParameter(W,35718),yt=0;yt<Ye;++yt){var Mt=vs.getActiveUniform(W,yt),Tt=Mt.name;ae.maxUniformLength=Math.max(ae.maxUniformLength,Tt.length+1),Tt.slice(-1)=="]"&&(Tt=Tt.slice(0,Tt.lastIndexOf("[")));var wr=vs.getUniformLocation(W,Tt);if(wr){var mr=sn.getNewId(sn.uniforms);Ae[Tt]=[Mt.size,mr],sn.uniforms[mr]=wr;for(var vr=1;vr<Mt.size;++vr){var ar=Tt+"["+vr+"]";wr=vs.getUniformLocation(W,ar),mr=sn.getNewId(sn.uniforms),sn.uniforms[mr]=wr}}}}};function yi(R,W,ae,Ae){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(yt){e.canvas.addEventListener(yt,Fe.receiveEvent,!0)});var Ye=e.canvas;return R==0&&W==0&&(R=Ye.width,W=Ye.height),Fe.addedResizeListener||(Fe.addedResizeListener=!0,we.resizeListeners.push(function(yt,Mt){Fe.settingVideoMode||Fe.receiveEvent({type:"resize",w:yt,h:Mt})})),Fe.settingVideoMode=!0,we.setCanvasSize(R,W),Fe.settingVideoMode=!1,Fe.screen&&(Fe.freeSurface(Fe.screen),ve(!Fe.screen)),Fe.GL&&(Ae=Ae|67108864),Fe.screen=Fe.makeSurface(R,W,Ae,!0,"screen"),Fe.screen}function Ai(R){ve(!Fe.GL);var W=Fe.surfaces[R];if(!(!W.locked||--W.locked>0)){if(W.isFlagSet(2097152))Fe.copyIndexedColorData(W);else if(W.colors)for(var cn=e.canvas.width,Ln=e.canvas.height,tt=W.buffer,ae=W.image.data,m=W.colors,Pr=0;Pr<Ln;Pr++){for(var h=Pr*cn*4,T=0;T<cn;T++){var wr=ke[tt++>>0]*4,kn=h+T*4;ae[kn]=m[wr],ae[kn+1]=m[wr+1],ae[kn+2]=m[wr+2]}tt+=cn*3}else{var ae=W.image.data,Ae=W.buffer;ve(Ae%4==0,"Invalid buffer offset: "+Ae);var Ye=Ae>>2,yt=0,Mt=R==Fe.screen,Tt;if(typeof CanvasPixelArray<"u"&&ae instanceof CanvasPixelArray)for(Tt=ae.length;yt<Tt;){var wr=Pe[Ye];ae[yt]=wr&255,ae[yt+1]=wr>>8&255,ae[yt+2]=wr>>16&255,ae[yt+3]=Mt?255:wr>>24&255,Ye++,yt+=4}else{var mr=new Uint32Array(ae.buffer);if(Mt&&Fe.defaults.opaqueFrontBuffer){Tt=mr.length,mr.set(Pe.subarray(Ye,Ye+Tt));var vr=new Uint8Array(ae.buffer),ar=3,$r=ar+4*Tt;if(Tt%8==0)for(;ar<$r;)vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0;else for(;ar<$r;)vr[ar]=255,ar=ar+4|0}else mr.set(Pe.subarray(Ye,Ye+mr.length))}}W.ctx.putImageData(W.image,0,0)}}function Yi(R,W,ae,Ae){return Fe.blitSurface(R,W,ae,Ae,!1)}function Ii(){return 12032}var Vi=Uint8Array.prototype.copyWithin?function(R,W,ae){ke.copyWithin(R,W,W+ae)}:function(R,W,ae){ke.set(ke.subarray(W,W+ae),R)};function io(){return ke.length}function ko(R){try{return Y.grow(R-Xe.byteLength+65535>>>16),Pt(Y.buffer),1}catch{}}function Jo(R){R=R>>>0;var W=io(),ae=65536,Ae=2147483648;if(R>Ae)return!1;for(var Ye=16777216,yt=1;yt<=4;yt*=2){var Mt=W*(1+.2/yt);Mt=Math.min(Mt,R+100663296);var Tt=Math.min(Ae,bt(Math.max(Ye,R,Mt),ae)),wr=ko(Tt);if(wr)return!0}return!1}var So={mappings:{},buffers:[null,[],[]],printChar:function(R,W){var ae=So.buffers[R];W===0||W===10?((R===1?w:E)(Ce(ae,0)),ae.length=0):ae.push(W)},varargs:void 0,get:function(){So.varargs+=4;var R=Pe[So.varargs-4>>2];return R},getStr:function(R){var W=Oe(R);return W},get64:function(R,W){return R}};function Ko(R){return 0}function Gl(R,W,ae,Ae,Ye){}function na(R,W,ae,Ae){for(var Ye=0,yt=0;yt<ae;yt++){for(var Mt=Pe[W+yt*8>>2],Tt=Pe[W+(yt*8+4)>>2],wr=0;wr<Tt;wr++)So.printChar(R,ke[Mt+wr]);Ye+=Tt}return Pe[Ae>>2]=Ye,0}var Ao=function(R,W,ae,Ae){R||(R=this),this.parent=R,this.mount=R.mount,this.mounted=null,this.id=ze.nextInode++,this.name=W,this.mode=ae,this.node_ops={},this.stream_ops={},this.rdev=Ae},_l=365,bl=146;Object.defineProperties(Ao.prototype,{read:{get:function(){return(this.mode&_l)===_l},set:function(R){R?this.mode|=_l:this.mode&=~_l}},write:{get:function(){return(this.mode&bl)===bl},set:function(R){R?this.mode|=bl:this.mode&=~bl}},isFolder:{get:function(){return ze.isDir(this.mode)}},isDevice:{get:function(){return ze.isChrdev(this.mode)}}}),ze.FSNode=Ao,ze.staticInit(),e.requestFullscreen=function(W,ae){we.requestFullscreen(W,ae)},e.requestAnimationFrame=function(W){we.requestAnimationFrame(W)},e.setCanvasSize=function(W,ae,Ae){we.setCanvasSize(W,ae,Ae)},e.pauseMainLoop=function(){we.mainLoop.pause()},e.resumeMainLoop=function(){we.mainLoop.resume()},e.getUserMedia=function(){we.getUserMedia()},e.createContext=function(W,ae,Ae,Ye){return we.createContext(W,ae,Ae,Ye)};var vs;function Hl(R,W,ae){var Ae=ae>0?ae:ht(R)+1,Ye=new Array(Ae),yt=nt(R,Ye,0,Ye.length);return W&&(Ye.length=yt),Ye}function _s(R){for(var W=[],ae=0;ae<R.length;ae++){var Ae=R[ae];Ae>255&&(Ae&=255),W.push(String.fromCharCode(Ae))}return W.join("")}var Vu=typeof atob=="function"?atob:function(R){var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ae="",Ae,Ye,yt,Mt,Tt,wr,mr,vr=0;R=R.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Mt=W.indexOf(R.charAt(vr++)),Tt=W.indexOf(R.charAt(vr++)),wr=W.indexOf(R.charAt(vr++)),mr=W.indexOf(R.charAt(vr++)),Ae=Mt<<2|Tt>>4,Ye=(Tt&15)<<4|wr>>2,yt=(wr&3)<<6|mr,ae=ae+String.fromCharCode(Ae),wr!==64&&(ae=ae+String.fromCharCode(Ye)),mr!==64&&(ae=ae+String.fromCharCode(yt));while(vr<R.length);return ae};function $a(R){try{for(var W=Vu(R),ae=new Uint8Array(W.length),Ae=0;Ae<W.length;++Ae)ae[Ae]=W.charCodeAt(Ae);return ae}catch{throw new Error("Converting base64 string to bytes failed.")}}function wl(R){if(Yr(R))return $a(R.slice(or.length))}var Wl={SDL_CreateRGBSurface:Ht,SDL_Flip:Nt,SDL_FreeSurface:ir,SDL_Init:Br,SDL_LockSurface:De,SDL_SetVideoMode:yi,SDL_UnlockSurface:Ai,SDL_UpperBlit:Yi,emscripten_get_sbrk_ptr:Ii,emscripten_memcpy_big:Vi,emscripten_resize_heap:Jo,fd_close:Ko,fd_seek:Gl,fd_write:na,getTempRet0:H,memory:Y,setTempRet0:G,table:le};Qn();var $u=e.___wasm_call_ctors=function(){return($u=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)};e._WebpToSDL=function(){return(e._WebpToSDL=e.asm.WebpToSDL).apply(null,arguments)};var Gu=e._memset=function(){return(Gu=e._memset=e.asm.memset).apply(null,arguments)},nl=e._memcpy=function(){return(nl=e._memcpy=e.asm.memcpy).apply(null,arguments)},us=e._malloc=function(){return(us=e._malloc=e.asm.malloc).apply(null,arguments)},Ds=e._free=function(){return(Ds=e._free=e.asm.free).apply(null,arguments)},xl=e.___errno_location=function(){return(xl=e.___errno_location=e.asm.__errno_location).apply(null,arguments)},gu=e.stackSave=function(){return(gu=e.stackSave=e.asm.stackSave).apply(null,arguments)},kl=e.stackRestore=function(){return(kl=e.stackRestore=e.asm.stackRestore).apply(null,arguments)},yu=e.stackAlloc=function(){return(yu=e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)};e.dynCall_vii=function(){return(e.dynCall_vii=e.asm.dynCall_vii).apply(null,arguments)},e.dynCall_vi=function(){return(e.dynCall_vi=e.asm.dynCall_vi).apply(null,arguments)},e.dynCall_ii=function(){return(e.dynCall_ii=e.asm.dynCall_ii).apply(null,arguments)},e.dynCall_iii=function(){return(e.dynCall_iii=e.asm.dynCall_iii).apply(null,arguments)},e.dynCall_iiii=function(){return(e.dynCall_iiii=e.asm.dynCall_iiii).apply(null,arguments)},e.dynCall_iiiiiii=function(){return(e.dynCall_iiiiiii=e.asm.dynCall_iiiiiii).apply(null,arguments)},e.dynCall_viiii=function(){return(e.dynCall_viiii=e.asm.dynCall_viiii).apply(null,arguments)},e.dynCall_viii=function(){return(e.dynCall_viii=e.asm.dynCall_viii).apply(null,arguments)},e.dynCall_viiiiii=function(){return(e.dynCall_viiiiii=e.asm.dynCall_viiiiii).apply(null,arguments)},e.dynCall_viiiii=function(){return(e.dynCall_viiiii=e.asm.dynCall_viiiii).apply(null,arguments)},e.dynCall_viiiiiiiii=function(){return(e.dynCall_viiiiiiiii=e.asm.dynCall_viiiiiiiii).apply(null,arguments)},e.dynCall_jiiii=function(){return(e.dynCall_jiiii=e.asm.dynCall_jiiii).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.dynCall_jiji).apply(null,arguments)};var bs=e.__growWasmMemory=function(){return(bs=e.__growWasmMemory=e.asm.__growWasmMemory).apply(null,arguments)};e.cwrap=Ve;var ws;function Oo(R){this.name="ExitStatus",this.message="Program terminated with exit("+R+")",this.status=R}yr=function R(){ws||il(),ws||(yr=R)};function il(R){if(hi>0||(pt(),hi>0))return;function W(){ws||(ws=!0,e.calledRun=!0,!ce&&(Dr(),ln(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Wt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),W()},1)):W()}if(e.run=il,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();il(),this.Module=e,this.webpToSdl=e.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(R){e.canvas=R},this.Module.doNotCaptureKeyboard=!0}const NB=()=>new Promise(e=>requestAnimationFrame(e));class p1 extends Error{}const RB=e=>/\.webp.*$/i.test(e.src);class OB{constructor({webp:t=new zB,webpSupport:r=MB(),detectWebpImage:n=RB}={}){this.busy=!1,this.cache={},this.webp=t,this.webpSupport=r,this.detectWebpImage=n}async decode(t){if(this.busy)throw new p1("cannot decode when already busy");this.busy=!0;try{await NB();const r=document.createElement("canvas");return this.webp.setCanvas(r),this.webp.webpToSdl(t,t.length),this.busy=!1,r.toDataURL()}catch(r){throw this.busy=!1,r.name=p1.name,r.message=`failed to decode webp image: ${r.message}`,r}}async polyfillImage(t){if(await this.webpSupport)return;const{src:r}=t;if(this.detectWebpImage(t)){if(this.cache[r]){t.src=this.cache[r];return}try{const n=TB(r)?PB(r):await Ix(r),o=await this.decode(n);t.src=this.cache[r]=o}catch(n){throw n.name=p1.name,n.message=`failed to polyfill image "${r}": ${n.message}`,n}}}async polyfillDocument({document:t=window.document}={}){if(await this.webpSupport)return null;for(const r of Array.from(t.querySelectorAll("img")))try{await this.polyfillImage(r)}catch(n){throw n.name=p1.name,n.message=`webp image polyfill failed for url "${r.src}": ${n}`,n}}clearCache(){this.cache={}}}var J1=2*Math.PI*6378137/2;function FB(e){return e=e||256,2*Math.PI*6378137/e}function BB(e,t,r={enable:!0,decimal:1}){e=Ov(e,t);var n=e[0],o=e[1],u=n*J1/180,c=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return c=c*J1/180,r.enable&&(u=Number(u.toFixed(r.decimal)),c=Number(c.toFixed(r.decimal))),[u,c]}function jB(e,t,r){var n=e[0],o=e[1],u=WB(t,r),c=(n+J1)/u,s=(o+J1)/u;return[c,s,t]}function UB(e,t,r){e=Ov(e,r);var n=BB(e),o=jB(n,t);return VB(o)}function qB(e,t,r){if(e=Ov(e,r),t===0)return[0,0,0];var n=UB(e,t);return $B(n)}function VB(e,t,r){t=t||256;var n=e[0],o=e[1],u=e[2];if(u===0)return[0,0,0];Lx(u);var c=Math.ceil(n/t)-1,s=Math.ceil(o/t)-1;return c<0&&(c=0),s<0&&(s=0),[c,s,u]}function $B(e,t){GB(e,t);var r=e[0],n=e[1],o=e[2];if(o===0)return[0,0,0];var u=r,c=Math.pow(2,o)-1-n;return[u,c,o]}function GB(e,t){var r=e[0],n=e[1],o=e[2];if(t===!1)return e;if(o==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(n==null)throw new Error("<y> is required");return o=Lx(o),e=HB(e),e}function HB(e){var t=e[0],r=e[1],n=e[2],o=Math.pow(2,n);return t=t%o,t<0&&(t=t+o),[t,r,n]}function Lx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Ov(e,t){if(t===!1)return e;var r=XB(e[0]),n=ZB(e[1]);return n>85&&(n=85),n<-85&&(n=-85),[r,n]}function WB(e,t){return FB(t)/Math.pow(2,e)}function ZB(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function XB(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const YB=4,y3=0,v3=1,JB=2;function _p(e){let t=e.length;for(;--t>=0;)e[t]=0}const KB=0,Tx=1,QB=2,ej=3,tj=258,Fv=29,Td=256,gd=Td+1+Fv,ep=30,Bv=19,Px=2*gd+1,rh=15,tg=16,rj=7,jv=256,Mx=16,Dx=17,zx=18,my=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),T1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Nx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ij=512,of=new Array((gd+2)*2);_p(of);const Qp=new Array(ep*2);_p(Qp);const yd=new Array(ij);_p(yd);const vd=new Array(tj-ej+1);_p(vd);const Uv=new Array(Fv);_p(Uv);const K1=new Array(ep);_p(K1);function rg(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let Rx,Ox,Fx;function ng(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Bx=e=>e<256?yd[e]:yd[256+(e>>>7)],_d=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},oc=(e,t,r)=>{e.bi_valid>tg-r?(e.bi_buf|=t<<e.bi_valid&65535,_d(e,e.bi_buf),e.bi_buf=t>>tg-e.bi_valid,e.bi_valid+=r-tg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},N0=(e,t,r)=>{oc(e,r[t*2],r[t*2+1])},jx=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},oj=e=>{e.bi_valid===16?(_d(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},aj=(e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,c=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,f=t.stat_desc.max_length;let v,w,E,L,C,F,B=0;for(L=0;L<=rh;L++)e.bl_count[L]=0;for(r[e.heap[e.heap_max]*2+1]=0,v=e.heap_max+1;v<Px;v++)w=e.heap[v],L=r[r[w*2+1]*2+1]+1,L>f&&(L=f,B++),r[w*2+1]=L,!(w>n)&&(e.bl_count[L]++,C=0,w>=s&&(C=c[w-s]),F=r[w*2],e.opt_len+=F*(L+C),u&&(e.static_len+=F*(o[w*2+1]+C)));if(B!==0){do{for(L=f-1;e.bl_count[L]===0;)L--;e.bl_count[L]--,e.bl_count[L+1]+=2,e.bl_count[f]--,B-=2}while(B>0);for(L=f;L!==0;L--)for(w=e.bl_count[L];w!==0;)E=e.heap[--v],!(E>n)&&(r[E*2+1]!==L&&(e.opt_len+=(L-r[E*2+1])*r[E*2],r[E*2+1]=L),w--)}},Ux=(e,t,r)=>{const n=new Array(rh+1);let o=0,u,c;for(u=1;u<=rh;u++)o=o+r[u-1]<<1,n[u]=o;for(c=0;c<=t;c++){let s=e[c*2+1];s!==0&&(e[c*2]=jx(n[s]++,s))}},sj=()=>{let e,t,r,n,o;const u=new Array(rh+1);for(r=0,n=0;n<Fv-1;n++)for(Uv[n]=r,e=0;e<1<<my[n];e++)vd[r++]=n;for(vd[r-1]=n,o=0,n=0;n<16;n++)for(K1[n]=o,e=0;e<1<<T1[n];e++)yd[o++]=n;for(o>>=7;n<ep;n++)for(K1[n]=o<<7,e=0;e<1<<T1[n]-7;e++)yd[256+o++]=n;for(t=0;t<=rh;t++)u[t]=0;for(e=0;e<=143;)of[e*2+1]=8,e++,u[8]++;for(;e<=255;)of[e*2+1]=9,e++,u[9]++;for(;e<=279;)of[e*2+1]=7,e++,u[7]++;for(;e<=287;)of[e*2+1]=8,e++,u[8]++;for(Ux(of,gd+1,u),e=0;e<ep;e++)Qp[e*2+1]=5,Qp[e*2]=jx(e,5);Rx=new rg(of,my,Td+1,gd,rh),Ox=new rg(Qp,T1,0,ep,rh),Fx=new rg(new Array(0),nj,0,Bv,rj)},qx=e=>{let t;for(t=0;t<gd;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ep;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Bv;t++)e.bl_tree[t*2]=0;e.dyn_ltree[jv*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Vx=e=>{e.bi_valid>8?_d(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},_3=(e,t,r,n)=>{const o=t*2,u=r*2;return e[o]<e[u]||e[o]===e[u]&&n[t]<=n[r]},ig=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&_3(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!_3(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},b3=(e,t,r)=>{let n,o,u=0,c,s;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+u++]&255,n+=(e.pending_buf[e.sym_buf+u++]&255)<<8,o=e.pending_buf[e.sym_buf+u++],n===0?N0(e,o,t):(c=vd[o],N0(e,c+Td+1,t),s=my[c],s!==0&&(o-=Uv[c],oc(e,o,s)),n--,c=Bx(n),N0(e,c,r),s=T1[c],s!==0&&(n-=K1[c],oc(e,n,s)));while(u<e.sym_next);N0(e,jv,t)},gy=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems;let c,s,f=-1,v;for(e.heap_len=0,e.heap_max=Px,c=0;c<u;c++)r[c*2]!==0?(e.heap[++e.heap_len]=f=c,e.depth[c]=0):r[c*2+1]=0;for(;e.heap_len<2;)v=e.heap[++e.heap_len]=f<2?++f:0,r[v*2]=1,e.depth[v]=0,e.opt_len--,o&&(e.static_len-=n[v*2+1]);for(t.max_code=f,c=e.heap_len>>1;c>=1;c--)ig(e,r,c);v=u;do c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ig(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=s,r[v*2]=r[c*2]+r[s*2],e.depth[v]=(e.depth[c]>=e.depth[s]?e.depth[c]:e.depth[s])+1,r[c*2+1]=r[s*2+1]=v,e.heap[1]=v++,ig(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],aj(e,t),Ux(r,f,e.bl_count)},w3=(e,t,r)=>{let n,o=-1,u,c=t[0*2+1],s=0,f=7,v=4;for(c===0&&(f=138,v=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)u=c,c=t[(n+1)*2+1],!(++s<f&&u===c)&&(s<v?e.bl_tree[u*2]+=s:u!==0?(u!==o&&e.bl_tree[u*2]++,e.bl_tree[Mx*2]++):s<=10?e.bl_tree[Dx*2]++:e.bl_tree[zx*2]++,s=0,o=u,c===0?(f=138,v=3):u===c?(f=6,v=3):(f=7,v=4))},x3=(e,t,r)=>{let n,o=-1,u,c=t[0*2+1],s=0,f=7,v=4;for(c===0&&(f=138,v=3),n=0;n<=r;n++)if(u=c,c=t[(n+1)*2+1],!(++s<f&&u===c)){if(s<v)do N0(e,u,e.bl_tree);while(--s!==0);else u!==0?(u!==o&&(N0(e,u,e.bl_tree),s--),N0(e,Mx,e.bl_tree),oc(e,s-3,2)):s<=10?(N0(e,Dx,e.bl_tree),oc(e,s-3,3)):(N0(e,zx,e.bl_tree),oc(e,s-11,7));s=0,o=u,c===0?(f=138,v=3):u===c?(f=6,v=3):(f=7,v=4)}},lj=e=>{let t;for(w3(e,e.dyn_ltree,e.l_desc.max_code),w3(e,e.dyn_dtree,e.d_desc.max_code),gy(e,e.bl_desc),t=Bv-1;t>=3&&e.bl_tree[Nx[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},uj=(e,t,r,n)=>{let o;for(oc(e,t-257,5),oc(e,r-1,5),oc(e,n-4,4),o=0;o<n;o++)oc(e,e.bl_tree[Nx[o]*2+1],3);x3(e,e.dyn_ltree,t-1),x3(e,e.dyn_dtree,r-1)},cj=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return y3;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return v3;for(r=32;r<Td;r++)if(e.dyn_ltree[r*2]!==0)return v3;return y3};let k3=!1;const fj=e=>{k3||(sj(),k3=!0),e.l_desc=new ng(e.dyn_ltree,Rx),e.d_desc=new ng(e.dyn_dtree,Ox),e.bl_desc=new ng(e.bl_tree,Fx),e.bi_buf=0,e.bi_valid=0,qx(e)},$x=(e,t,r,n)=>{oc(e,(KB<<1)+(n?1:0),3),Vx(e),_d(e,r),_d(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},hj=e=>{oc(e,Tx<<1,3),N0(e,jv,of),oj(e)},pj=(e,t,r,n)=>{let o,u,c=0;e.level>0?(e.strm.data_type===JB&&(e.strm.data_type=cj(e)),gy(e,e.l_desc),gy(e,e.d_desc),c=lj(e),o=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=o&&(o=u)):o=u=r+5,r+4<=o&&t!==-1?$x(e,t,r,n):e.strategy===YB||u===o?(oc(e,(Tx<<1)+(n?1:0),3),b3(e,of,Qp)):(oc(e,(QB<<1)+(n?1:0),3),uj(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),b3(e,e.dyn_ltree,e.dyn_dtree)),qx(e),n&&Vx(e)},dj=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(vd[r]+Td+1)*2]++,e.dyn_dtree[Bx(t)*2]++),e.sym_next===e.sym_end);var mj=fj,gj=$x,yj=pj,vj=dj,_j=hj,bj={_tr_init:mj,_tr_stored_block:gj,_tr_flush_block:yj,_tr_tally:vj,_tr_align:_j};const wj=(e,t,r,n)=>{let o=e&65535|0,u=e>>>16&65535|0,c=0;for(;r!==0;){c=r>2e3?2e3:r,r-=c;do o=o+t[n++]|0,u=u+o|0;while(--c);o%=65521,u%=65521}return o|u<<16|0};var bd=wj;const xj=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},kj=new Uint32Array(xj()),Aj=(e,t,r,n)=>{const o=kj,u=n+r;e^=-1;for(let c=n;c<u;c++)e=e>>>8^o[(e^t[c])&255];return e^-1};var dl=Aj,hh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ej,_tr_stored_block:yy,_tr_flush_block:Sj,_tr_tally:Mf,_tr_align:Cj}=bj,{Z_NO_FLUSH:Df,Z_PARTIAL_FLUSH:Ij,Z_FULL_FLUSH:Lj,Z_FINISH:Gc,Z_BLOCK:A3,Z_OK:Bl,Z_STREAM_END:E3,Z_STREAM_ERROR:q0,Z_DATA_ERROR:Tj,Z_BUF_ERROR:og,Z_DEFAULT_COMPRESSION:Pj,Z_FILTERED:Mj,Z_HUFFMAN_ONLY:d1,Z_RLE:Dj,Z_FIXED:zj,Z_DEFAULT_STRATEGY:Nj,Z_UNKNOWN:Rj,Z_DEFLATED:k2}=yh,Oj=9,Fj=15,Bj=8,jj=29,Uj=256,vy=Uj+1+jj,qj=30,Vj=19,$j=2*vy+1,Gj=15,Xo=3,Cf=258,V0=Cf+Xo+1,Hj=32,hp=42,qv=57,_y=69,by=73,wy=91,xy=103,nh=113,Vp=666,Fu=1,bp=2,ph=3,wp=4,Wj=3,ih=(e,t)=>(e.msg=hh[t],t),S3=e=>e*2-(e>4?9:0),Ef=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Zj=e=>{let t,r,n,o=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=o?r-o:0;while(--t);t=o,n=t;do r=e.prev[--n],e.prev[n]=r>=o?r-o:0;while(--t)};let Xj=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,zf=Xj;const Cc=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Tc=(e,t)=>{Sj(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Cc(e.strm)},ma=(e,t)=>{e.pending_buf[e.pending++]=t},Fp=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},ky=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),e.state.wrap===1?e.adler=bd(e.adler,t,o,r):e.state.wrap===2&&(e.adler=dl(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},Gx=(e,t)=>{let r=e.max_chain_length,n=e.strstart,o,u,c=e.prev_length,s=e.nice_match;const f=e.strstart>e.w_size-V0?e.strstart-(e.w_size-V0):0,v=e.window,w=e.w_mask,E=e.prev,L=e.strstart+Cf;let C=v[n+c-1],F=v[n+c];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do if(o=t,!(v[o+c]!==F||v[o+c-1]!==C||v[o]!==v[n]||v[++o]!==v[n+1])){n+=2,o++;do;while(v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&n<L);if(u=Cf-(L-n),n=L-Cf,u>c){if(e.match_start=t,c=u,u>=s)break;C=v[n+c-1],F=v[n+c]}}while((t=E[t&w])>f&&--r!==0);return c<=e.lookahead?c:e.lookahead},pp=e=>{const t=e.w_size;let r,n,o;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-V0)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Zj(e),n+=t),e.strm.avail_in===0)break;if(r=ky(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Xo)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=zf(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=zf(e,e.ins_h,e.window[o+Xo-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Xo)););}while(e.lookahead<V0&&e.strm.avail_in!==0)},Hx=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,o,u,c=0,s=e.strm.avail_in;do{if(n=65535,u=e.bi_valid+42>>3,e.strm.avail_out<u||(u=e.strm.avail_out-u,o=e.strstart-e.block_start,n>o+e.strm.avail_in&&(n=o+e.strm.avail_in),n>u&&(n=u),n<r&&(n===0&&t!==Gc||t===Df||n!==o+e.strm.avail_in)))break;c=t===Gc&&n===o+e.strm.avail_in?1:0,yy(e,0,0,c),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Cc(e.strm),o&&(o>n&&(o=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,n-=o),n&&(ky(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(c===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?wp:t!==Df&&t!==Gc&&e.strm.avail_in===0&&e.strstart===e.block_start?bp:(u=e.window_size-e.strstart,e.strm.avail_in>u&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,u+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),u>e.strm.avail_in&&(u=e.strm.avail_in),u&&(ky(e.strm,e.window,e.strstart,u),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.high_water<e.strstart&&(e.high_water=e.strstart),u=e.bi_valid+42>>3,u=e.pending_buf_size-u>65535?65535:e.pending_buf_size-u,r=u>e.w_size?e.w_size:u,o=e.strstart-e.block_start,(o>=r||(o||t===Gc)&&t!==Df&&e.strm.avail_in===0&&o<=u)&&(n=o>u?u:o,c=t===Gc&&e.strm.avail_in===0&&n===o?1:0,yy(e,e.block_start,n,c),e.block_start+=n,Cc(e.strm)),c?ph:Fu)},ag=(e,t)=>{let r,n;for(;;){if(e.lookahead<V0){if(pp(e),e.lookahead<V0&&t===Df)return Fu;if(e.lookahead===0)break}if(r=0,e.lookahead>=Xo&&(e.ins_h=zf(e,e.ins_h,e.window[e.strstart+Xo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-V0&&(e.match_length=Gx(e,r)),e.match_length>=Xo)if(n=Mf(e,e.strstart-e.match_start,e.match_length-Xo),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Xo){e.match_length--;do e.strstart++,e.ins_h=zf(e,e.ins_h,e.window[e.strstart+Xo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=zf(e,e.ins_h,e.window[e.strstart+1]);else n=Mf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Tc(e,!1),e.strm.avail_out===0))return Fu}return e.insert=e.strstart<Xo-1?e.strstart:Xo-1,t===Gc?(Tc(e,!0),e.strm.avail_out===0?ph:wp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Fu:bp},Lh=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<V0){if(pp(e),e.lookahead<V0&&t===Df)return Fu;if(e.lookahead===0)break}if(r=0,e.lookahead>=Xo&&(e.ins_h=zf(e,e.ins_h,e.window[e.strstart+Xo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Xo-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-V0&&(e.match_length=Gx(e,r),e.match_length<=5&&(e.strategy===Mj||e.match_length===Xo&&e.strstart-e.match_start>4096)&&(e.match_length=Xo-1)),e.prev_length>=Xo&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-Xo,n=Mf(e,e.strstart-1-e.prev_match,e.prev_length-Xo),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=zf(e,e.ins_h,e.window[e.strstart+Xo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Xo-1,e.strstart++,n&&(Tc(e,!1),e.strm.avail_out===0))return Fu}else if(e.match_available){if(n=Mf(e,0,e.window[e.strstart-1]),n&&Tc(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Fu}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Mf(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Xo-1?e.strstart:Xo-1,t===Gc?(Tc(e,!0),e.strm.avail_out===0?ph:wp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Fu:bp},Yj=(e,t)=>{let r,n,o,u;const c=e.window;for(;;){if(e.lookahead<=Cf){if(pp(e),e.lookahead<=Cf&&t===Df)return Fu;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Xo&&e.strstart>0&&(o=e.strstart-1,n=c[o],n===c[++o]&&n===c[++o]&&n===c[++o])){u=e.strstart+Cf;do;while(n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&o<u);e.match_length=Cf-(u-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Xo?(r=Mf(e,1,e.match_length-Xo),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Mf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Tc(e,!1),e.strm.avail_out===0))return Fu}return e.insert=0,t===Gc?(Tc(e,!0),e.strm.avail_out===0?ph:wp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Fu:bp},Jj=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(pp(e),e.lookahead===0)){if(t===Df)return Fu;break}if(e.match_length=0,r=Mf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Tc(e,!1),e.strm.avail_out===0))return Fu}return e.insert=0,t===Gc?(Tc(e,!0),e.strm.avail_out===0?ph:wp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Fu:bp};function P0(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const $p=[new P0(0,0,0,0,Hx),new P0(4,4,8,4,ag),new P0(4,5,16,8,ag),new P0(4,6,32,32,ag),new P0(4,4,16,16,Lh),new P0(8,16,32,32,Lh),new P0(8,16,128,128,Lh),new P0(8,32,128,256,Lh),new P0(32,128,258,1024,Lh),new P0(32,258,258,4096,Lh)],Kj=e=>{e.window_size=2*e.w_size,Ef(e.head),e.max_lazy_match=$p[e.level].max_lazy,e.good_match=$p[e.level].good_length,e.nice_match=$p[e.level].nice_length,e.max_chain_length=$p[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Xo-1,e.match_available=0,e.ins_h=0};function Qj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array($j*2),this.dyn_dtree=new Uint16Array((2*qj+1)*2),this.bl_tree=new Uint16Array((2*Vj+1)*2),Ef(this.dyn_ltree),Ef(this.dyn_dtree),Ef(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Gj+1),this.heap=new Uint16Array(2*vy+1),Ef(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*vy+1),Ef(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Pd=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==hp&&t.status!==qv&&t.status!==_y&&t.status!==by&&t.status!==wy&&t.status!==xy&&t.status!==nh&&t.status!==Vp?1:0},Wx=e=>{if(Pd(e))return ih(e,q0);e.total_in=e.total_out=0,e.data_type=Rj;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?qv:t.wrap?hp:nh,e.adler=t.wrap===2?0:1,t.last_flush=-2,Ej(t),Bl},Zx=e=>{const t=Wx(e);return t===Bl&&Kj(e.state),t},eU=(e,t)=>Pd(e)||e.state.wrap!==2?q0:(e.state.gzhead=t,Bl),Xx=(e,t,r,n,o,u)=>{if(!e)return q0;let c=1;if(t===Pj&&(t=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),o<1||o>Oj||r!==k2||n<8||n>15||t<0||t>9||u<0||u>zj||n===8&&c!==1)return ih(e,q0);n===8&&(n=9);const s=new Qj;return e.state=s,s.strm=e,s.status=hp,s.wrap=c,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Xo-1)/Xo),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=u,s.method=r,Zx(e)},tU=(e,t)=>Xx(e,t,k2,Fj,Bj,Nj),rU=(e,t)=>{if(Pd(e)||t>A3||t<0)return e?ih(e,q0):q0;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Vp&&t!==Gc)return ih(e,e.avail_out===0?og:q0);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Cc(e),e.avail_out===0)return r.last_flush=-1,Bl}else if(e.avail_in===0&&S3(t)<=S3(n)&&t!==Gc)return ih(e,og);if(r.status===Vp&&e.avail_in!==0)return ih(e,og);if(r.status===hp&&r.wrap===0&&(r.status=nh),r.status===hp){let o=k2+(r.w_bits-8<<4)<<8,u=-1;if(r.strategy>=d1||r.level<2?u=0:r.level<6?u=1:r.level===6?u=2:u=3,o|=u<<6,r.strstart!==0&&(o|=Hj),o+=31-o%31,Fp(r,o),r.strstart!==0&&(Fp(r,e.adler>>>16),Fp(r,e.adler&65535)),e.adler=1,r.status=nh,Cc(e),r.pending!==0)return r.last_flush=-1,Bl}if(r.status===qv){if(e.adler=0,ma(r,31),ma(r,139),ma(r,8),r.gzhead)ma(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ma(r,r.gzhead.time&255),ma(r,r.gzhead.time>>8&255),ma(r,r.gzhead.time>>16&255),ma(r,r.gzhead.time>>24&255),ma(r,r.level===9?2:r.strategy>=d1||r.level<2?4:0),ma(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(ma(r,r.gzhead.extra.length&255),ma(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=dl(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=_y;else if(ma(r,0),ma(r,0),ma(r,0),ma(r,0),ma(r,0),ma(r,r.level===9?2:r.strategy>=d1||r.level<2?4:0),ma(r,Wj),r.status=nh,Cc(e),r.pending!==0)return r.last_flush=-1,Bl}if(r.status===_y){if(r.gzhead.extra){let o=r.pending,u=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+u>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=s,Cc(e),r.pending!==0)return r.last_flush=-1,Bl;o=0,u-=s}let c=new Uint8Array(r.gzhead.extra);r.pending_buf.set(c.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending+=u,r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=by}if(r.status===by){if(r.gzhead.name){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o)),Cc(e),r.pending!==0)return r.last_flush=-1,Bl;o=0}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,ma(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=wy}if(r.status===wy){if(r.gzhead.comment){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o)),Cc(e),r.pending!==0)return r.last_flush=-1,Bl;o=0}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,ma(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=dl(e.adler,r.pending_buf,r.pending-o,o))}r.status=xy}if(r.status===xy){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Cc(e),r.pending!==0))return r.last_flush=-1,Bl;ma(r,e.adler&255),ma(r,e.adler>>8&255),e.adler=0}if(r.status=nh,Cc(e),r.pending!==0)return r.last_flush=-1,Bl}if(e.avail_in!==0||r.lookahead!==0||t!==Df&&r.status!==Vp){let o=r.level===0?Hx(r,t):r.strategy===d1?Jj(r,t):r.strategy===Dj?Yj(r,t):$p[r.level].func(r,t);if((o===ph||o===wp)&&(r.status=Vp),o===Fu||o===ph)return e.avail_out===0&&(r.last_flush=-1),Bl;if(o===bp&&(t===Ij?Cj(r):t!==A3&&(yy(r,0,0,!1),t===Lj&&(Ef(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Cc(e),e.avail_out===0))return r.last_flush=-1,Bl}return t!==Gc?Bl:r.wrap<=0?E3:(r.wrap===2?(ma(r,e.adler&255),ma(r,e.adler>>8&255),ma(r,e.adler>>16&255),ma(r,e.adler>>24&255),ma(r,e.total_in&255),ma(r,e.total_in>>8&255),ma(r,e.total_in>>16&255),ma(r,e.total_in>>24&255)):(Fp(r,e.adler>>>16),Fp(r,e.adler&65535)),Cc(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Bl:E3)},nU=e=>{if(Pd(e))return q0;const t=e.state.status;return e.state=null,t===nh?ih(e,Tj):Bl},iU=(e,t)=>{let r=t.length;if(Pd(e))return q0;const n=e.state,o=n.wrap;if(o===2||o===1&&n.status!==hp||n.lookahead)return q0;if(o===1&&(e.adler=bd(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){o===0&&(Ef(n.head),n.strstart=0,n.block_start=0,n.insert=0);let f=new Uint8Array(n.w_size);f.set(t.subarray(r-n.w_size,r),0),t=f,r=n.w_size}const u=e.avail_in,c=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,pp(n);n.lookahead>=Xo;){let f=n.strstart,v=n.lookahead-(Xo-1);do n.ins_h=zf(n,n.ins_h,n.window[f+Xo-1]),n.prev[f&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=f,f++;while(--v);n.strstart=f,n.lookahead=Xo-1,pp(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Xo-1,n.match_available=0,e.next_in=c,e.input=s,e.avail_in=u,n.wrap=o,Bl};var oU=tU,aU=Xx,sU=Zx,lU=Wx,uU=eU,cU=rU,fU=nU,hU=iU,pU="pako deflate (from Nodeca project)",ed={deflateInit:oU,deflateInit2:aU,deflateReset:sU,deflateResetKeep:lU,deflateSetHeader:uU,deflate:cU,deflateEnd:fU,deflateSetDictionary:hU,deflateInfo:pU};const dU=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var mU=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)dU(r,n)&&(e[n]=r[n])}}return e},gU=e=>{let t=0;for(let n=0,o=e.length;n<o;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,o=0,u=e.length;n<u;n++){let c=e[n];r.set(c,o),o+=c.length}return r},A2={assign:mU,flattenChunks:gU};let Yx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yx=!1}const wd=new Uint8Array(256);for(let e=0;e<256;e++)wd[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;wd[254]=wd[254]=1;var yU=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,o,u,c=e.length,s=0;for(o=0;o<c;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<c&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),u=0,o=0;u<s;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<c&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[u++]=r:r<2048?(t[u++]=192|r>>>6,t[u++]=128|r&63):r<65536?(t[u++]=224|r>>>12,t[u++]=128|r>>>6&63,t[u++]=128|r&63):(t[u++]=240|r>>>18,t[u++]=128|r>>>12&63,t[u++]=128|r>>>6&63,t[u++]=128|r&63);return t};const vU=(e,t)=>{if(t<65534&&e.subarray&&Yx)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var _U=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,o;const u=new Array(r*2);for(o=0,n=0;n<r;){let c=e[n++];if(c<128){u[o++]=c;continue}let s=wd[c];if(s>4){u[o++]=65533,n+=s-1;continue}for(c&=s===2?31:s===3?15:7;s>1&&n<r;)c=c<<6|e[n++]&63,s--;if(s>1){u[o++]=65533;continue}c<65536?u[o++]=c:(c-=65536,u[o++]=55296|c>>10&1023,u[o++]=56320|c&1023)}return vU(u,o)},bU=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+wd[e[r]]>t?r:t},xd={string2buf:yU,buf2string:_U,utf8border:bU};function wU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Jx=wU;const Kx=Object.prototype.toString,{Z_NO_FLUSH:xU,Z_SYNC_FLUSH:kU,Z_FULL_FLUSH:AU,Z_FINISH:EU,Z_OK:Q1,Z_STREAM_END:SU,Z_DEFAULT_COMPRESSION:CU,Z_DEFAULT_STRATEGY:IU,Z_DEFLATED:LU}=yh;function Md(e){this.options=A2.assign({level:CU,method:LU,chunkSize:16384,windowBits:15,memLevel:8,strategy:IU},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jx,this.strm.avail_out=0;let r=ed.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Q1)throw new Error(hh[r]);if(t.header&&ed.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=xd.string2buf(t.dictionary):Kx.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=ed.deflateSetDictionary(this.strm,n),r!==Q1)throw new Error(hh[r]);this._dict_set=!0}}Md.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let o,u;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?EU:xU,typeof e=="string"?r.input=xd.string2buf(e):Kx.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(u===kU||u===AU)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(o=ed.deflate(r,u),o===SU)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=ed.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Q1;if(r.avail_out===0){this.onData(r.output);continue}if(u>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Md.prototype.onData=function(e){this.chunks.push(e)};Md.prototype.onEnd=function(e){e===Q1&&(this.result=A2.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Vv(e,t){const r=new Md(t);if(r.push(e,!0),r.err)throw r.msg||hh[r.err];return r.result}function TU(e,t){return t=t||{},t.raw=!0,Vv(e,t)}function PU(e,t){return t=t||{},t.gzip=!0,Vv(e,t)}var MU=Md,DU=Vv,zU=TU,NU=PU,RU=yh,OU={Deflate:MU,deflate:DU,deflateRaw:zU,gzip:NU,constants:RU};const m1=16209,FU=16191;var BU=function(t,r){let n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve,pe,Ne,Ve;const be=t.state;n=t.next_in,Ne=t.input,o=n+(t.avail_in-5),u=t.next_out,Ve=t.output,c=u-(r-t.avail_out),s=u+(t.avail_out-257),f=be.dmax,v=be.wsize,w=be.whave,E=be.wnext,L=be.window,C=be.hold,F=be.bits,B=be.lencode,G=be.distcode,H=(1<<be.lenbits)-1,Z=(1<<be.distbits)-1;e:do{F<15&&(C+=Ne[n++]<<F,F+=8,C+=Ne[n++]<<F,F+=8),ee=B[C&H];t:for(;;){if(Y=ee>>>24,C>>>=Y,F-=Y,Y=ee>>>16&255,Y===0)Ve[u++]=ee&65535;else if(Y&16){le=ee&65535,Y&=15,Y&&(F<Y&&(C+=Ne[n++]<<F,F+=8),le+=C&(1<<Y)-1,C>>>=Y,F-=Y),F<15&&(C+=Ne[n++]<<F,F+=8,C+=Ne[n++]<<F,F+=8),ee=G[C&Z];r:for(;;){if(Y=ee>>>24,C>>>=Y,F-=Y,Y=ee>>>16&255,Y&16){if(ce=ee&65535,Y&=15,F<Y&&(C+=Ne[n++]<<F,F+=8,F<Y&&(C+=Ne[n++]<<F,F+=8)),ce+=C&(1<<Y)-1,ce>f){t.msg="invalid distance too far back",be.mode=m1;break e}if(C>>>=Y,F-=Y,Y=u-c,ce>Y){if(Y=ce-Y,Y>w&&be.sane){t.msg="invalid distance too far back",be.mode=m1;break e}if(ve=0,pe=L,E===0){if(ve+=v-Y,Y<le){le-=Y;do Ve[u++]=L[ve++];while(--Y);ve=u-ce,pe=Ve}}else if(E<Y){if(ve+=v+E-Y,Y-=E,Y<le){le-=Y;do Ve[u++]=L[ve++];while(--Y);if(ve=0,E<le){Y=E,le-=Y;do Ve[u++]=L[ve++];while(--Y);ve=u-ce,pe=Ve}}}else if(ve+=E-Y,Y<le){le-=Y;do Ve[u++]=L[ve++];while(--Y);ve=u-ce,pe=Ve}for(;le>2;)Ve[u++]=pe[ve++],Ve[u++]=pe[ve++],Ve[u++]=pe[ve++],le-=3;le&&(Ve[u++]=pe[ve++],le>1&&(Ve[u++]=pe[ve++]))}else{ve=u-ce;do Ve[u++]=Ve[ve++],Ve[u++]=Ve[ve++],Ve[u++]=Ve[ve++],le-=3;while(le>2);le&&(Ve[u++]=Ve[ve++],le>1&&(Ve[u++]=Ve[ve++]))}}else if(Y&64){t.msg="invalid distance code",be.mode=m1;break e}else{ee=G[(ee&65535)+(C&(1<<Y)-1)];continue r}break}}else if(Y&64)if(Y&32){be.mode=FU;break e}else{t.msg="invalid literal/length code",be.mode=m1;break e}else{ee=B[(ee&65535)+(C&(1<<Y)-1)];continue t}break}}while(n<o&&u<s);le=F>>3,n-=le,F-=le<<3,C&=(1<<F)-1,t.next_in=n,t.next_out=u,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=u<s?257+(s-u):257-(u-s),be.hold=C,be.bits=F};const Th=15,C3=852,I3=592,L3=0,sg=1,T3=2,jU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),UU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),VU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$U=(e,t,r,n,o,u,c,s)=>{const f=s.bits;let v=0,w=0,E=0,L=0,C=0,F=0,B=0,G=0,H=0,Z=0,ee,Y,le,ce,ve,pe=null,Ne;const Ve=new Uint16Array(Th+1),be=new Uint16Array(Th+1);let Ce=null,Oe,nt,mt;for(v=0;v<=Th;v++)Ve[v]=0;for(w=0;w<n;w++)Ve[t[r+w]]++;for(C=f,L=Th;L>=1&&Ve[L]===0;L--);if(C>L&&(C=L),L===0)return o[u++]=1<<24|64<<16|0,o[u++]=1<<24|64<<16|0,s.bits=1,0;for(E=1;E<L&&Ve[E]===0;E++);for(C<E&&(C=E),G=1,v=1;v<=Th;v++)if(G<<=1,G-=Ve[v],G<0)return-1;if(G>0&&(e===L3||L!==1))return-1;for(be[1]=0,v=1;v<Th;v++)be[v+1]=be[v]+Ve[v];for(w=0;w<n;w++)t[r+w]!==0&&(c[be[t[r+w]]++]=w);if(e===L3?(pe=Ce=c,Ne=20):e===sg?(pe=jU,Ce=UU,Ne=257):(pe=qU,Ce=VU,Ne=0),Z=0,w=0,v=E,ve=u,F=C,B=0,le=-1,H=1<<C,ce=H-1,e===sg&&H>C3||e===T3&&H>I3)return 1;for(;;){Oe=v-B,c[w]+1<Ne?(nt=0,mt=c[w]):c[w]>=Ne?(nt=Ce[c[w]-Ne],mt=pe[c[w]-Ne]):(nt=32+64,mt=0),ee=1<<v-B,Y=1<<F,E=Y;do Y-=ee,o[ve+(Z>>B)+Y]=Oe<<24|nt<<16|mt|0;while(Y!==0);for(ee=1<<v-1;Z&ee;)ee>>=1;if(ee!==0?(Z&=ee-1,Z+=ee):Z=0,w++,--Ve[v]===0){if(v===L)break;v=t[r+c[w]]}if(v>C&&(Z&ce)!==le){for(B===0&&(B=C),ve+=E,F=v-B,G=1<<F;F+B<L&&(G-=Ve[F+B],!(G<=0));)F++,G<<=1;if(H+=1<<F,e===sg&&H>C3||e===T3&&H>I3)return 1;le=Z&ce,o[le]=C<<24|F<<16|ve-u|0}}return Z!==0&&(o[ve+Z]=v-B<<24|64<<16|0),s.bits=C,0};var td=$U;const GU=0,Qx=1,ek=2,{Z_FINISH:P3,Z_BLOCK:HU,Z_TREES:g1,Z_OK:dh,Z_STREAM_END:WU,Z_NEED_DICT:ZU,Z_STREAM_ERROR:Jc,Z_DATA_ERROR:tk,Z_MEM_ERROR:rk,Z_BUF_ERROR:XU,Z_DEFLATED:M3}=yh,E2=16180,D3=16181,z3=16182,N3=16183,R3=16184,O3=16185,F3=16186,B3=16187,j3=16188,U3=16189,e2=16190,tf=16191,lg=16192,q3=16193,ug=16194,V3=16195,$3=16196,G3=16197,H3=16198,y1=16199,v1=16200,W3=16201,Z3=16202,X3=16203,Y3=16204,J3=16205,cg=16206,K3=16207,Q3=16208,es=16209,nk=16210,ik=16211,YU=852,JU=592,KU=15,QU=KU,ew=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function eq(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vh=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<E2||t.mode>ik?1:0},ok=e=>{if(vh(e))return Jc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=E2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(YU),t.distcode=t.distdyn=new Int32Array(JU),t.sane=1,t.back=-1,dh},ak=e=>{if(vh(e))return Jc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ok(e)},sk=(e,t)=>{let r;if(vh(e))return Jc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Jc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,ak(e))},lk=(e,t)=>{if(!e)return Jc;const r=new eq;e.state=r,r.strm=e,r.window=null,r.mode=E2;const n=sk(e,t);return n!==dh&&(e.state=null),n},tq=e=>lk(e,QU);let tw=!0,fg,hg;const rq=e=>{if(tw){fg=new Int32Array(512),hg=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(td(Qx,e.lens,0,288,fg,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;td(ek,e.lens,0,32,hg,0,e.work,{bits:5}),tw=!1}e.lencode=fg,e.lenbits=9,e.distcode=hg,e.distbits=5},uk=(e,t,r,n)=>{let o;const u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),n>=u.wsize?(u.window.set(t.subarray(r-u.wsize,r),0),u.wnext=0,u.whave=u.wsize):(o=u.wsize-u.wnext,o>n&&(o=n),u.window.set(t.subarray(r-n,r-n+o),u.wnext),n-=o,n?(u.window.set(t.subarray(r-n,r),0),u.wnext=n,u.whave=u.wsize):(u.wnext+=o,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=o))),0},nq=(e,t)=>{let r,n,o,u,c,s,f,v,w,E,L,C,F,B,G=0,H,Z,ee,Y,le,ce,ve,pe;const Ne=new Uint8Array(4);let Ve,be;const Ce=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vh(e)||!e.output||!e.input&&e.avail_in!==0)return Jc;r=e.state,r.mode===tf&&(r.mode=lg),c=e.next_out,o=e.output,f=e.avail_out,u=e.next_in,n=e.input,s=e.avail_in,v=r.hold,w=r.bits,E=s,L=f,pe=dh;e:for(;;)switch(r.mode){case E2:if(r.wrap===0){r.mode=lg;break}for(;w<16;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,Ne[0]=v&255,Ne[1]=v>>>8&255,r.check=dl(r.check,Ne,2,0),v=0,w=0,r.mode=D3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=es;break}if((v&15)!==M3){e.msg="unknown compression method",r.mode=es;break}if(v>>>=4,w-=4,ve=(v&15)+8,r.wbits===0&&(r.wbits=ve),ve>15||ve>r.wbits){e.msg="invalid window size",r.mode=es;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=v&512?U3:tf,v=0,w=0;break;case D3:for(;w<16;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(r.flags=v,(r.flags&255)!==M3){e.msg="unknown compression method",r.mode=es;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=es;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(Ne[0]=v&255,Ne[1]=v>>>8&255,r.check=dl(r.check,Ne,2,0)),v=0,w=0,r.mode=z3;case z3:for(;w<32;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(Ne[0]=v&255,Ne[1]=v>>>8&255,Ne[2]=v>>>16&255,Ne[3]=v>>>24&255,r.check=dl(r.check,Ne,4,0)),v=0,w=0,r.mode=N3;case N3:for(;w<16;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(Ne[0]=v&255,Ne[1]=v>>>8&255,r.check=dl(r.check,Ne,2,0)),v=0,w=0,r.mode=R3;case R3:if(r.flags&1024){for(;w<16;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(Ne[0]=v&255,Ne[1]=v>>>8&255,r.check=dl(r.check,Ne,2,0)),v=0,w=0}else r.head&&(r.head.extra=null);r.mode=O3;case O3:if(r.flags&1024&&(C=r.length,C>s&&(C=s),C&&(r.head&&(ve=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(u,u+C),ve)),r.flags&512&&r.wrap&4&&(r.check=dl(r.check,n,C,u)),s-=C,u+=C,r.length-=C),r.length))break e;r.length=0,r.mode=F3;case F3:if(r.flags&2048){if(s===0)break e;C=0;do ve=n[u+C++],r.head&&ve&&r.length<65536&&(r.head.name+=String.fromCharCode(ve));while(ve&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=dl(r.check,n,C,u)),s-=C,u+=C,ve)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=B3;case B3:if(r.flags&4096){if(s===0)break e;C=0;do ve=n[u+C++],r.head&&ve&&r.length<65536&&(r.head.comment+=String.fromCharCode(ve));while(ve&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=dl(r.check,n,C,u)),s-=C,u+=C,ve)break e}else r.head&&(r.head.comment=null);r.mode=j3;case j3:if(r.flags&512){for(;w<16;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(r.wrap&4&&v!==(r.check&65535)){e.msg="header crc mismatch",r.mode=es;break}v=0,w=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=tf;break;case U3:for(;w<32;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}e.adler=r.check=ew(v),v=0,w=0,r.mode=e2;case e2:if(r.havedict===0)return e.next_out=c,e.avail_out=f,e.next_in=u,e.avail_in=s,r.hold=v,r.bits=w,ZU;e.adler=r.check=1,r.mode=tf;case tf:if(t===HU||t===g1)break e;case lg:if(r.last){v>>>=w&7,w-=w&7,r.mode=cg;break}for(;w<3;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}switch(r.last=v&1,v>>>=1,w-=1,v&3){case 0:r.mode=q3;break;case 1:if(rq(r),r.mode=y1,t===g1){v>>>=2,w-=2;break e}break;case 2:r.mode=$3;break;case 3:e.msg="invalid block type",r.mode=es}v>>>=2,w-=2;break;case q3:for(v>>>=w&7,w-=w&7;w<32;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if((v&65535)!==(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=es;break}if(r.length=v&65535,v=0,w=0,r.mode=ug,t===g1)break e;case ug:r.mode=V3;case V3:if(C=r.length,C){if(C>s&&(C=s),C>f&&(C=f),C===0)break e;o.set(n.subarray(u,u+C),c),s-=C,u+=C,f-=C,c+=C,r.length-=C;break}r.mode=tf;break;case $3:for(;w<14;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(r.nlen=(v&31)+257,v>>>=5,w-=5,r.ndist=(v&31)+1,v>>>=5,w-=5,r.ncode=(v&15)+4,v>>>=4,w-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=es;break}r.have=0,r.mode=G3;case G3:for(;r.have<r.ncode;){for(;w<3;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.lens[Ce[r.have++]]=v&7,v>>>=3,w-=3}for(;r.have<19;)r.lens[Ce[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ve={bits:r.lenbits},pe=td(GU,r.lens,0,19,r.lencode,0,r.work,Ve),r.lenbits=Ve.bits,pe){e.msg="invalid code lengths set",r.mode=es;break}r.have=0,r.mode=H3;case H3:for(;r.have<r.nlen+r.ndist;){for(;G=r.lencode[v&(1<<r.lenbits)-1],H=G>>>24,Z=G>>>16&255,ee=G&65535,!(H<=w);){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(ee<16)v>>>=H,w-=H,r.lens[r.have++]=ee;else{if(ee===16){for(be=H+2;w<be;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(v>>>=H,w-=H,r.have===0){e.msg="invalid bit length repeat",r.mode=es;break}ve=r.lens[r.have-1],C=3+(v&3),v>>>=2,w-=2}else if(ee===17){for(be=H+3;w<be;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}v>>>=H,w-=H,ve=0,C=3+(v&7),v>>>=3,w-=3}else{for(be=H+7;w<be;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}v>>>=H,w-=H,ve=0,C=11+(v&127),v>>>=7,w-=7}if(r.have+C>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=es;break}for(;C--;)r.lens[r.have++]=ve}}if(r.mode===es)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=es;break}if(r.lenbits=9,Ve={bits:r.lenbits},pe=td(Qx,r.lens,0,r.nlen,r.lencode,0,r.work,Ve),r.lenbits=Ve.bits,pe){e.msg="invalid literal/lengths set",r.mode=es;break}if(r.distbits=6,r.distcode=r.distdyn,Ve={bits:r.distbits},pe=td(ek,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ve),r.distbits=Ve.bits,pe){e.msg="invalid distances set",r.mode=es;break}if(r.mode=y1,t===g1)break e;case y1:r.mode=v1;case v1:if(s>=6&&f>=258){e.next_out=c,e.avail_out=f,e.next_in=u,e.avail_in=s,r.hold=v,r.bits=w,BU(e,L),c=e.next_out,o=e.output,f=e.avail_out,u=e.next_in,n=e.input,s=e.avail_in,v=r.hold,w=r.bits,r.mode===tf&&(r.back=-1);break}for(r.back=0;G=r.lencode[v&(1<<r.lenbits)-1],H=G>>>24,Z=G>>>16&255,ee=G&65535,!(H<=w);){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(Z&&!(Z&240)){for(Y=H,le=Z,ce=ee;G=r.lencode[ce+((v&(1<<Y+le)-1)>>Y)],H=G>>>24,Z=G>>>16&255,ee=G&65535,!(Y+H<=w);){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}v>>>=Y,w-=Y,r.back+=Y}if(v>>>=H,w-=H,r.back+=H,r.length=ee,Z===0){r.mode=J3;break}if(Z&32){r.back=-1,r.mode=tf;break}if(Z&64){e.msg="invalid literal/length code",r.mode=es;break}r.extra=Z&15,r.mode=W3;case W3:if(r.extra){for(be=r.extra;w<be;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Z3;case Z3:for(;G=r.distcode[v&(1<<r.distbits)-1],H=G>>>24,Z=G>>>16&255,ee=G&65535,!(H<=w);){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(!(Z&240)){for(Y=H,le=Z,ce=ee;G=r.distcode[ce+((v&(1<<Y+le)-1)>>Y)],H=G>>>24,Z=G>>>16&255,ee=G&65535,!(Y+H<=w);){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}v>>>=Y,w-=Y,r.back+=Y}if(v>>>=H,w-=H,r.back+=H,Z&64){e.msg="invalid distance code",r.mode=es;break}r.offset=ee,r.extra=Z&15,r.mode=X3;case X3:if(r.extra){for(be=r.extra;w<be;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=es;break}r.mode=Y3;case Y3:if(f===0)break e;if(C=L-f,r.offset>C){if(C=r.offset-C,C>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=es;break}C>r.wnext?(C-=r.wnext,F=r.wsize-C):F=r.wnext-C,C>r.length&&(C=r.length),B=r.window}else B=o,F=c-r.offset,C=r.length;C>f&&(C=f),f-=C,r.length-=C;do o[c++]=B[F++];while(--C);r.length===0&&(r.mode=v1);break;case J3:if(f===0)break e;o[c++]=r.length,f--,r.mode=v1;break;case cg:if(r.wrap){for(;w<32;){if(s===0)break e;s--,v|=n[u++]<<w,w+=8}if(L-=f,e.total_out+=L,r.total+=L,r.wrap&4&&L&&(e.adler=r.check=r.flags?dl(r.check,o,L,c-L):bd(r.check,o,L,c-L)),L=f,r.wrap&4&&(r.flags?v:ew(v))!==r.check){e.msg="incorrect data check",r.mode=es;break}v=0,w=0}r.mode=K3;case K3:if(r.wrap&&r.flags){for(;w<32;){if(s===0)break e;s--,v+=n[u++]<<w,w+=8}if(r.wrap&4&&v!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=es;break}v=0,w=0}r.mode=Q3;case Q3:pe=WU;break e;case es:pe=tk;break e;case nk:return rk;case ik:default:return Jc}return e.next_out=c,e.avail_out=f,e.next_in=u,e.avail_in=s,r.hold=v,r.bits=w,(r.wsize||L!==e.avail_out&&r.mode<es&&(r.mode<cg||t!==P3))&&uk(e,e.output,e.next_out,L-e.avail_out),E-=e.avail_in,L-=e.avail_out,e.total_in+=E,e.total_out+=L,r.total+=L,r.wrap&4&&L&&(e.adler=r.check=r.flags?dl(r.check,o,L,e.next_out-L):bd(r.check,o,L,e.next_out-L)),e.data_type=r.bits+(r.last?64:0)+(r.mode===tf?128:0)+(r.mode===y1||r.mode===ug?256:0),(E===0&&L===0||t===P3)&&pe===dh&&(pe=XU),pe},iq=e=>{if(vh(e))return Jc;let t=e.state;return t.window&&(t.window=null),e.state=null,dh},oq=(e,t)=>{if(vh(e))return Jc;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,dh):Jc},aq=(e,t)=>{const r=t.length;let n,o,u;return vh(e)||(n=e.state,n.wrap!==0&&n.mode!==e2)?Jc:n.mode===e2&&(o=1,o=bd(o,t,r,0),o!==n.check)?tk:(u=uk(e,t,r,r),u?(n.mode=nk,rk):(n.havedict=1,dh))};var sq=ak,lq=sk,uq=ok,cq=tq,fq=lk,hq=nq,pq=iq,dq=oq,mq=aq,gq="pako inflate (from Nodeca project)",af={inflateReset:sq,inflateReset2:lq,inflateResetKeep:uq,inflateInit:cq,inflateInit2:fq,inflate:hq,inflateEnd:pq,inflateGetHeader:dq,inflateSetDictionary:mq,inflateInfo:gq};function yq(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vq=yq;const ck=Object.prototype.toString,{Z_NO_FLUSH:_q,Z_FINISH:bq,Z_OK:kd,Z_STREAM_END:pg,Z_NEED_DICT:dg,Z_STREAM_ERROR:wq,Z_DATA_ERROR:rw,Z_MEM_ERROR:xq}=yh;function Dd(e){this.options=A2.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jx,this.strm.avail_out=0;let r=af.inflateInit2(this.strm,t.windowBits);if(r!==kd)throw new Error(hh[r]);if(this.header=new vq,af.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=xd.string2buf(t.dictionary):ck.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=af.inflateSetDictionary(this.strm,t.dictionary),r!==kd)))throw new Error(hh[r])}Dd.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let u,c,s;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?bq:_q,ck.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),u=af.inflate(r,c),u===dg&&o&&(u=af.inflateSetDictionary(r,o),u===kd?u=af.inflate(r,c):u===rw&&(u=dg));r.avail_in>0&&u===pg&&r.state.wrap>0&&e[r.next_in]!==0;)af.inflateReset(r),u=af.inflate(r,c);switch(u){case wq:case rw:case dg:case xq:return this.onEnd(u),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||u===pg))if(this.options.to==="string"){let f=xd.utf8border(r.output,r.next_out),v=r.next_out-f,w=xd.buf2string(r.output,f);r.next_out=v,r.avail_out=n-v,v&&r.output.set(r.output.subarray(f,f+v),0),this.onData(w)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(u===kd&&s===0)){if(u===pg)return u=af.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Dd.prototype.onData=function(e){this.chunks.push(e)};Dd.prototype.onEnd=function(e){e===kd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=A2.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $v(e,t){const r=new Dd(t);if(r.push(e),r.err)throw r.msg||hh[r.err];return r.result}function kq(e,t){return t=t||{},t.raw=!0,$v(e,t)}var Aq=Dd,Eq=$v,Sq=kq,Cq=$v,Iq=yh,Lq={Inflate:Aq,inflate:Eq,inflateRaw:Sq,ungzip:Cq,constants:Iq};const{Deflate:Tq,deflate:Pq,deflateRaw:Mq,gzip:Dq}=OU,{Inflate:zq,inflate:Nq,inflateRaw:Rq,ungzip:Oq}=Lq;var Fq=Tq,Bq=Pq,jq=Mq,Uq=Dq,qq=zq,Vq=Nq,$q=Rq,Gq=Oq,Hq=yh,Wq={Deflate:Fq,deflate:Bq,deflateRaw:jq,gzip:Uq,Inflate:qq,inflate:Vq,inflateRaw:$q,ungzip:Gq,constants:Hq};class Ay{constructor(t){this.decode=()=>{const n=new Uint8Array(this.width*this.height*4),o=this.decodePixels();return this.copyImageDataToBuffer(n,o),n},this.copyImageDataToBuffer=(n,o)=>{let u=this.colors,c,s=this.hasAlphaChannel;this.palette.length&&(c=this.decodePalette(),u=4,s=!0);const f=n,v=f.length,w=c||o;let E=0,L=0;if(u===1)for(;E<v;){let C=c?o[E/4]*4:L;const F=w[C++];f[E++]=F,f[E++]=F,f[E++]=F,f[E++]=s?w[C++]:255,L=C}else for(;E<v;){let C=c?o[E/4]*4:L;f[E++]=w[C++],f[E++]=w[C++],f[E++]=w[C++],f[E++]=s?w[C++]:255,L=C}},this.decodePixels=()=>{const n=Wq.inflate(this.imgData),o=this.pixelBitlength/8,u=o*this.width,c=new Uint8Array(u*this.height),s=n.length;let f=0,v=0,w=0;for(;v<s;){switch(n[v++]){case 0:{for(let E=0;E<u;E++)c[w++]=n[v++];break}case 1:{for(let E=0;E<u;E++){const L=n[v++],C=E<o?0:c[w-o];c[w++]=(L+C)%256}break}case 2:{for(let E=0;E<u;E++){const L=n[v++],C=(E-E%o)/o,F=(f-1)*u+C*o+E%o,B=f&&c[F];c[w++]=(B+L)%256}break}case 3:{for(let E=0;E<u;E++){const L=n[v++],C=(E-E%o)/o,F=E<o?0:c[w-o],B=(f-1)*u+C*o+E%o,G=f&&c[B];c[w++]=(L+Math.floor((F+G)/2))%256}break}case 4:{for(let E=0;E<u;E++){const L=n[v++],C=(E-E%o)/o,F=E<o?0:c[w-o];let B,G;if(f===0)B=G=0;else{const ce=(f-1)*u+C*o+E%o,ve=(f-1)*u+(C-1)*o+E%o;B=c[ce],G=C&&c[ve]}const H=F+B-G,Z=Math.abs(H-F),ee=Math.abs(H-B),Y=Math.abs(H-G);let le;Z<=ee&&Z<=Y?le=F:ee<=Y?le=B:le=G,c[w++]=(L+le)%256}break}default:throw new Error(`Invalid filter algorithm: ${n[v-1]}`)}f++}return c},this.read=n=>{const o=[];for(let u=0;u<n;u++)o[u]=this.data[this.pos++];return o},this.readUInt32=()=>{const n=this.data[this.pos++]<<24,o=this.data[this.pos++]<<16,u=this.data[this.pos++]<<8,c=this.data[this.pos++];return n|o|u|c},this.decodePalette=()=>{const n=this.palette,o=this.transparency.indexed||[],u=new Uint8Array(o.length+n.length);let c=0,s=0;for(let f=0;f<n.length;f++){u[c++]=n[f],u[c++]=n[f+1],u[c++]=n[f+2];const v=o[s++];u[c++]=v!==void 0?v:255}return u},this.data=t,this.pos=8,this.palette=[];const r=[];for(this.transparency={},this.text={};;){const n=this.readUInt32();let o="";for(let u=0;u<4;u++)o+=String.fromCharCode(this.data[this.pos++]);switch(o){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(n);break}case"IDAT":{for(let u=0;u<n;u++)r.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{if(this.transparency.indexed=this.read(n),255-this.transparency.indexed.length>0)for(let c=0;c<255;c++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(n)[0];break}case 2:{this.transparency.rgb=this.read(n);break}}break}case"tEXt":{const u=this.read(n),c=u.indexOf(0),s=String.fromCharCode(...u.slice(0,c));this.text[s]=String.fromCharCode(...u.slice(c+1));break}case"IEND":{const u={0:1,3:1,4:1,2:3,6:3};this.colors=u[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);const c=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*c,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(r);return}default:this.pos+=n}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}}Ay.load=e=>new Ay(e);class Zq{constructor(t,r,n,o){this.url=t,this.tileSize=r,this.minzoom=n,this.maxzoom=o}getValue(t,r){return new Promise((n,o)=>{const u=t[0],c=t[1];let s=r;r>this.maxzoom?s=this.maxzoom:r<this.minzoom&&(s=this.minzoom);const f=qB([u,c],s),v=this.url.replace(/{x}/g,f[0].toString()).replace(/{y}/g,f[1].toString()).replace(/{z}/g,f[2].toString());let w=this.getUrlExtension(v);switch(w||(w="png"),w){case"png":LB.get(v,{responseType:"arraybuffer"}).then(E=>{const L=Buffer.from(E.data,"binary"),C=this.getValueFromPNG(L,f,u,c);n(C)}).catch(E=>o(E));break;case"webp":Ix(v).then(E=>{this.getValueFromWEBP(E,f,u,c).then(L=>{n(L)}).catch(L=>o(L))}).catch(E=>o(E));break;default:o(new Error(`Invalid file extension: ${w}`));break}})}getValueFromPNG(t,r,n,o){const c=Ay.load(t).decode(),s=this.pixels2rgba(c,r,n,o);return this.calc(s[0],s[1],s[2],s[3])}getValueFromWEBP(t,r,n,o){return new Promise((u,c)=>{new OB().decode(t).then(f=>{const v=this.dataURIConverter(f),w=this.getValueFromPNG(v,r,n,o);u(w)}).catch(f=>c(f))})}pixels2rgba(t,r,n,o){const u=[];for(let w=0;w<t.length;w+=4){const E=t[w],L=t[w+1],C=t[w+2],F=t[w+3],B=[E,L,C,F];u.push(B)}const c=this.tileToBBOX(r),s=this.getPixelPosition(n,o,c),f=s[0]+s[1]*this.tileSize;return u[f]}getPixelPosition(t,r,n){const o=this.tileSize,u=this.tileSize,c=n[2]-n[0],s=n[3]-n[1],f=(t-n[0])/c,v=(r-n[1])/s,w=Math.floor(o*f),E=Math.floor(u*(1-v));return[w,E]}getUrlExtension(t){let r=t.split(/[#?]/)[0].split(".").pop();return r&&(r=r.trim()),r}dataURIConverter(t){const r=atob(t.split(",")[1]),n=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)n[o]=r.charCodeAt(o);return n}tileToBBOX(t){const r=this.tile2lon(t[0]+1,t[2]),n=this.tile2lon(t[0],t[2]),o=this.tile2lat(t[1]+1,t[2]),u=this.tile2lat(t[1],t[2]);return[n,o,r,u]}tile2lon(t,r){return t/Math.pow(2,r)*360-180}tile2lat(t,r){const n=180/Math.PI,o=Math.PI-2*Math.PI*t/Math.pow(2,r);return n*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))}}var Xq=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(u){return u instanceof r?u:new r(function(c){c(u)})}return new(r||(r=Promise))(function(u,c){function s(w){try{v(n.next(w))}catch(E){c(E)}}function f(w){try{v(n.throw(w))}catch(E){c(E)}}function v(w){w.done?u(w.value):o(w.value).then(s,f)}v((n=n.apply(e,t||[])).next())})};class Yq extends Zq{constructor(t,r,n=5,o=15){super(t,r,n,o)}getElevation(t,r){return Xq(this,void 0,void 0,function*(){return yield this.getValue(t,r)})}calc(t,r,n){return-1e4+(t*256*256+r*256+n)*.1}}var rc=63710088e-1,Jq={centimeters:rc*100,centimetres:rc*100,degrees:rc/111325,feet:rc*3.28084,inches:rc*39.37,kilometers:rc/1e3,kilometres:rc/1e3,meters:rc,metres:rc,miles:rc/1609.344,millimeters:rc*1e3,millimetres:rc*1e3,nauticalmiles:rc/1852,radians:1,yards:rc*1.0936};function Kq(e,t){t===void 0&&(t="kilometers");var r=Jq[t];if(!r)throw new Error(t+" units is invalid");return e*r}function _1(e){var t=e%360;return t*Math.PI/180}function nw(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Qq(e,t,r){r===void 0&&(r={});var n=nw(e),o=nw(t),u=_1(o[1]-n[1]),c=_1(o[0]-n[0]),s=_1(n[1]),f=_1(o[1]),v=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(s)*Math.cos(f);return Kq(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),r.units)}const Ph="elev-controls-source-line",mg="elev-controls-layer-line",gg="elev-controls-layer-symbol",Mh="elev-controls-source-symbol",eV={tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff"};class tV{constructor(t,r,n){Bi(this,"map");Bi(this,"measureOption",Object.assign({},eV));Bi(this,"terrainRgbUrl");Bi(this,"units","kilometers");Bi(this,"measureControlData");Bi(this,"isMeasure",!1);Bi(this,"isClickListenerAdded",!1);this.map=t,this.terrainRgbUrl=r,this.measureOption=Object.assign(this.measureOption,n),this.measureControlData={markers:[],coordinates:[],elevations:[]}}hasData(){return this.measureControlData&&this.measureControlData.coordinates.length>0}measuringOn(){this.map&&(this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("measure.on"),this.isMeasure=!0)}measuringOff(){this.map&&(this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("measure.off"),this.isMeasure=!1)}clearFeatures(){this.map&&(this.map.getLayer(mg)&&this.map.removeLayer(mg),this.map.getLayer(gg)&&this.map.removeLayer(gg),this.map.getSource(Ph)&&this.map.removeSource(Ph),this.map.getSource(Mh)&&this.map.removeSource(Mh)),this.measureControlData.markers.forEach(t=>t.remove()),this.map.fire("measure.clear")}mapClickListener(t){if(!this.isMeasure)return;(!this.map.getSource(Ph)||!this.map.getSource(Mh))&&(this.clearFeatures(),this.initFeatures());let r=this.map.getZoom();r||(r=15),r=Math.round(r);const n=[t.lngLat.lng,t.lngLat.lat],o=this.measureOption.tileSize?this.measureOption.tileSize:512;this.terrainRgbUrl?new Yq(this.terrainRgbUrl,o).getElevation(n,r).then(c=>{c||(c=-1),this.addPoint(t.lngLat,c)}):this.addPoint(t.lngLat)}addPoint(t,r){const n=new Ic.Marker({draggable:!0}).setLngLat(t).addTo(this.map);this.measureControlData.markers.push(n),r?(this.measureControlData.coordinates.push([t.lng,t.lat,r]),this.measureControlData.elevations.push(r)):this.measureControlData.coordinates.push([t.lng,t.lat]),this.map.getSource(Ph).setData(this.geoLineString(this.measureControlData.coordinates)),this.map.getSource(Mh).setData(this.geoPoint(this.measureControlData.coordinates)),this.map.fire("measure.add",{lnglat:t,elevation:r})}initFeatures(){this.measureControlData.markers=[],this.measureControlData.coordinates=[],this.measureControlData.elevations=[],this.map&&(this.map.addSource(Ph,{type:"geojson",data:this.geoLineString(this.measureControlData.coordinates)}),this.map.addSource(Mh,{type:"geojson",data:this.geoPoint(this.measureControlData.coordinates)}),this.map.addLayer({id:mg,type:"line",source:Ph,paint:{"line-color":this.measureOption.mainColor,"line-width":2}}),this.map.addLayer({id:gg,type:"symbol",source:Mh,layout:{"text-field":"{text}","text-font":this.measureOption.font,"text-size":this.measureOption.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.measureOption.mainColor,"text-halo-color":this.measureOption.haloColor,"text-halo-width":this.measureOption.fontHalo}}))}labelFormat(t,r){let n=`${t.toFixed(2)} km`;t<1&&(n=`${(t*1e3).toFixed()} m`);let o="";return r&&r>0&&(o=`
alt.${r}m`),`${n}${o}`}geoLineString(t=[]){return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}}geoPoint(t=[]){let r=0;return{type:"FeatureCollection",features:t.map((n,o)=>(o>0&&(r+=Qq(t[o-1],t[o],{units:this.units})),{type:"Feature",properties:{id:o+1,text:this.labelFormat(r,n[2]),elevation:n[2],length:(r*1e3).toFixed()},geometry:{type:"Point",coordinates:n}}))}}downloadGeoJSON(){if(this.measureControlData.coordinates.length===0)return;const t=this.geoPoint(this.measureControlData.coordinates);if(t.features.forEach(o=>{delete o.properties.text}),this.measureControlData.coordinates.length>1){const o=this.geoLineString(this.measureControlData.coordinates);t.features.push(o)}const r="measure_result.geojson",n=JSON.stringify(t);this.download(r,n)}download(t,r){const n=new Blob([r],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.setAttribute("download",t),o.dispatchEvent(new MouseEvent("click"))}}const iw=df(void 0);function ow(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y;const le=[nV,rV],ce=[];function ve(be,Ce){return be[2]?0:1}o=ve(e),u=ce[o]=le[o](e);function pe(be,Ce){return be[2]?oV:iV}let Ne=pe(e),Ve=Ne(e);return E=new go({props:{icon:Dy}}),G=new go({props:{icon:Jw}}),{c(){t=ct("div"),r=ct("button"),n=ct("span"),u.c(),c=pr(),s=ct("span"),Ve.c(),f=pr(),v=ct("button"),w=ct("span"),Bt(E.$$.fragment),C=pr(),F=ct("button"),B=ct("span"),Bt(G.$$.fragment),this.h()},l(be){t=ft(be,"DIV",{class:!0});var Ce=wt(t);r=ft(Ce,"BUTTON",{class:!0});var Oe=wt(r);n=ft(Oe,"SPAN",{class:!0});var nt=wt(n);u.l(nt),nt.forEach(de),c=dr(Oe),s=ft(Oe,"SPAN",{});var mt=wt(s);Ve.l(mt),mt.forEach(de),Oe.forEach(de),f=dr(Ce),v=ft(Ce,"BUTTON",{class:!0});var ht=wt(v);w=ft(ht,"SPAN",{});var He=wt(w);Yt(E.$$.fragment,He),He.forEach(de),ht.forEach(de),C=dr(Ce),F=ft(Ce,"BUTTON",{class:!0});var ut=wt(F);B=ft(ut,"SPAN",{});var bt=wt(B);Yt(G.$$.fragment,bt),bt.forEach(de),ut.forEach(de),Ce.forEach(de),this.h()},h(){ye(n,"class","control-icon svelte-1bv29kx"),ye(r,"class","control-button svelte-1bv29kx"),ye(v,"class","setting-button svelte-1bv29kx"),v.disabled=L=!e[3],ye(F,"class","setting-button svelte-1bv29kx"),F.disabled=H=!e[3],ye(t,"class","measure-container svelte-1bv29kx")},m(be,Ce){It(be,t,Ce),Qe(t,r),Qe(r,n),ce[o].m(n,null),Qe(r,c),Qe(r,s),Ve.m(s,null),Qe(t,f),Qe(t,v),Qe(v,w),jt(E,w,null),Qe(t,C),Qe(t,F),Qe(F,B),jt(G,B,null),Z=!0,ee||(Y=[Qr(r,"click",e[7]),Qr(v,"click",e[8]),Qr(F,"click",e[9])],ee=!0)},p(be,Ce){let Oe=o;o=ve(be),o===Oe?ce[o].p(be,Ce):(Ui(),at(ce[Oe],1,1,()=>{ce[Oe]=null}),qi(),u=ce[o],u?u.p(be,Ce):(u=ce[o]=le[o](be),u.c()),Ze(u,1),u.m(n,null)),Ne!==(Ne=pe(be))&&(Ve.d(1),Ve=Ne(be),Ve&&(Ve.c(),Ve.m(s,null))),(!Z||Ce&8&&L!==(L=!be[3]))&&(v.disabled=L),(!Z||Ce&8&&H!==(H=!be[3]))&&(F.disabled=H)},i(be){Z||(Ze(u),Ze(E.$$.fragment,be),Ze(G.$$.fragment,be),Z=!0)},o(be){at(u),at(E.$$.fragment,be),at(G.$$.fragment,be),Z=!1},d(be){be&&de(t),ce[o].d(),Ve.d(),Ut(E),Ut(G),ee=!1,oa(Y)}}}function rV(e){let t,r;return t=new go({props:{icon:zy}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function nV(e){let t,r;return t=new go({props:{icon:Kw}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function iV(e){let t;return{c(){t=Nn("Start measure")},l(r){t=Rn(r,"Start measure")},m(r,n){It(r,t,n)},d(r){r&&de(t)}}}function oV(e){let t;return{c(){t=Nn("Stop measure")},l(r){t=Rn(r,"Stop measure")},m(r,n){It(r,t,n)},d(r){r&&de(t)}}}function aV(e){let t,r,n=e[0]&&ow(e);return{c(){n&&n.c(),t=Xi()},l(o){n&&n.l(o),t=Xi()},m(o,u){n&&n.m(o,u),It(o,t,u),r=!0},p(o,[u]){o[0]?n?(n.p(o,u),u&1&&Ze(n,1)):(n=ow(o),n.c(),Ze(n,1),n.m(t.parentNode,t)):n&&(Ui(),at(n,1,1,()=>{n=null}),qi())},i(o){r||(Ze(n),r=!0)},o(o){at(n),r=!1},d(o){n&&n.d(o),o&&de(t)}}}function sV(e,t,r){let n;vl(e,iw,C=>r(1,n=C));let{map:o}=t,{terrainRgbUrl:u=void 0}=t,{measureOption:c}=t,s,f=!1;My(()=>{s===!0&&n.measuringOff()});const v=()=>{s?n.measuringOff():n.measuringOn()},w=()=>v(),E=()=>n.clearFeatures(),L=()=>n.downloadGeoJSON();return e.$$set=C=>{"map"in C&&r(0,o=C.map),"terrainRgbUrl"in C&&r(5,u=C.terrainRgbUrl),"measureOption"in C&&r(6,c=C.measureOption)},e.$$.update=()=>{e.$$.dirty&99&&o&&(n||ch(iw,n=new tV(o,u,c),n),o.on("measure.on",()=>{r(2,s=!0)}),o.on("measure.off",()=>{r(2,s=!1)}),o.on("measure.add",()=>{r(3,f=n.hasData())}),o.on("measure.clear",()=>{r(3,f=!1)}))},[o,n,s,f,v,u,c,w,E,L]}class lV extends Pn{constructor(t){super(),Mn(this,t,sV,aV,Cn,{map:0,terrainRgbUrl:5,measureOption:6})}}const yg=df(void 0),vg=df(void 0),{Marker:uV}=Zw;var pu;(function(e){e.Time="time",e.Distance="distance"})(pu||(pu={}));class cV{constructor(t,r,n,o){Bi(this,"map");Bi(this,"url");Bi(this,"contourSources",[]);Bi(this,"contourLayers",[]);Bi(this,"contourMaker");Bi(this,"contours",[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);Bi(this,"isochroneStyle",{font:["Roboto Bold"],fontSize:16,fontHalo:1,fontColor:"#000000",fontHaloColor:"#fff"});this.map=t,this.url=r,n&&(this.contours=n),o&&(this.isochroneStyle=Object.assign(this.isochroneStyle,o))}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(t=>{var r;(r=this.map)==null||r.removeLayer(t)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(t=>{var r;(r=this.map)==null||r.removeSource(t)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(t,r,n,o,u){this.clearFeatures();let c=JSON.parse(JSON.stringify(this.contours));u&&(c=u),c.forEach(f=>{n===pu.Time?delete f.distance:delete f.time});let s="km";return n===pu.Time&&(s="min"),new Promise((f,v)=>{const w={locations:[{lat:r,lon:t}],costing:o,contours:c,polygons:!0},E=`${this.url}/isochrone?json=${JSON.stringify(w)}`;fetch(E).then(L=>L.json()).then(L=>{L.features.forEach(C=>{var B,G,H,Z;const F=`isochrone-${C.properties.contour}-${n}`;(B=this.map)==null||B.addSource(F,{type:"geojson",data:C}),this.contourSources.push(F),(G=this.map)==null||G.addLayer({id:`pg-${F}-${n}`,type:"fill",source:F,layout:{},paint:{"fill-color":C.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${F}-${n}`),(H=this.map)==null||H.addLayer({id:`ls-${F}-${n}`,type:"line",source:F,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":C.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${F}-${n}`),(Z=this.map)==null||Z.addLayer({id:`symbol-${F}-${n}`,type:"symbol",source:F,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":this.isochroneStyle.font,"text-field":["concat",["get","contour"],` ${s}`],"text-size":this.isochroneStyle.fontSize},paint:{"text-color":this.isochroneStyle.fontColor,"text-halo-width":this.isochroneStyle.fontHalo,"text-halo-color":this.isochroneStyle.fontHaloColor}}),this.contourLayers.push(`symbol-${F}-${n}`)}),this.map&&(this.contourMaker=new uV().setLngLat([t,r]).addTo(this.map)),f()}).catch(L=>v(L))})}getContoursOption(){return this.contours}}const dp=[{value:"pedestrian",label:"Walking",icon:l7},{value:"bicycle",label:"Bicycle",icon:a7},{value:"auto",label:"Car",icon:k7}];function aw(e,t,r){const n=e.slice();return n[17]=t[r],n[18]=t,n[19]=r,n}function sw(e,t,r){const n=e.slice();return n[20]=t[r],n}function lw(e){let t,r,n,o,u,c,s,f=e[20].label+"",v,w,E,L,C;function F(){return e[13](e[20])}return c=new go({props:{icon:e[20].icon}}),{c(){t=ct("label"),r=ct("input"),o=pr(),u=ct("span"),Bt(c.$$.fragment),s=pr(),v=Nn(f),w=pr(),this.h()},l(B){t=ft(B,"LABEL",{class:!0,style:!0});var G=wt(t);r=ft(G,"INPUT",{type:!0,name:!0}),o=dr(G),u=ft(G,"SPAN",{class:!0});var H=wt(u);Yt(c.$$.fragment,H),H.forEach(de),s=dr(G),v=Rn(G,f),w=dr(G),G.forEach(de),this.h()},h(){ye(r,"type","radio"),ye(r,"name","transport-isocrhone"),r.checked=n=e[4]===e[20].value,ye(u,"class","icon svelte-1u6mi4u"),ye(t,"class","radio-transport svelte-1u6mi4u"),zo(t,"color","black")},m(B,G){It(B,t,G),Qe(t,r),Qe(t,o),Qe(t,u),jt(c,u,null),Qe(t,s),Qe(t,v),Qe(t,w),E=!0,L||(C=Qr(r,"click",F),L=!0)},p(B,G){e=B,(!E||G&16&&n!==(n=e[4]===e[20].value))&&(r.checked=n)},i(B){E||(Ze(c.$$.fragment,B),E=!0)},o(B){at(c.$$.fragment,B),E=!1},d(B){B&&de(t),Ut(c),L=!1,C()}}}function uw(e){let t,r,n,o,u,c,s,f,v;return{c(){t=ct("label"),r=Nn("From"),n=pr(),o=ct("div"),u=ct("input"),s=pr(),f=ct("input"),this.h()},l(w){t=ft(w,"LABEL",{class:!0});var E=wt(t);r=Rn(E,"From"),E.forEach(de),n=dr(w),o=ft(w,"DIV",{class:!0});var L=wt(o);u=ft(L,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=dr(L),f=ft(L,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),L.forEach(de),this.h()},h(){ye(t,"class","control-label svelte-1u6mi4u"),ye(u,"class","input-text svelte-1u6mi4u"),ye(u,"type","text"),ye(u,"placeholder","Name"),u.value=c=`${e[1].toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ye(f,"class","input-text svelte-1u6mi4u"),ye(f,"type","text"),ye(f,"placeholder","Name"),f.value=v=`${e[2].toFixed(6)}`,f.readOnly=!0,zo(f,"width","50%"),ye(o,"class","flex-container svelte-1u6mi4u")},m(w,E){It(w,t,E),Qe(t,r),It(w,n,E),It(w,o,E),Qe(o,u),Qe(o,s),Qe(o,f)},p(w,E){E&2&&c!==(c=`${w[1].toFixed(6)}`)&&u.value!==c&&(u.value=c),E&4&&v!==(v=`${w[2].toFixed(6)}`)&&f.value!==v&&(f.value=v)},d(w){w&&de(t),w&&de(n),w&&de(o)}}}function cw(e){let t,r=e[3],n=[];for(let o=0;o<r.length;o+=1)n[o]=fw(aw(e,r,o));return{c(){t=ct("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){t=ft(o,"DIV",{class:!0});var u=wt(t);for(let c=0;c<n.length;c+=1)n[c].l(u);u.forEach(de),this.h()},h(){ye(t,"class","flex-container svelte-1u6mi4u")},m(o,u){It(o,t,u);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null)},p(o,u){if(u&9){r=o[3];let c;for(c=0;c<r.length;c+=1){const s=aw(o,r,c);n[c]?n[c].p(s,u):(n[c]=fw(s),n[c].c(),n[c].m(t,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){o&&de(t),ys(n,o)}}}function fV(e){let t=e[17].distance+"",r,n;return{c(){r=Nn(t),n=Nn(" km")},l(o){r=Rn(o,t),n=Rn(o," km")},m(o,u){It(o,r,u),It(o,n,u)},p(o,u){u&8&&t!==(t=o[17].distance+"")&&No(r,t)},d(o){o&&de(r),o&&de(n)}}}function hV(e){let t=e[17].time+"",r,n;return{c(){r=Nn(t),n=Nn(" min")},l(o){r=Rn(o,t),n=Rn(o," min")},m(o,u){It(o,r,u),It(o,n,u)},p(o,u){u&8&&t!==(t=o[17].time+"")&&No(r,t)},d(o){o&&de(r),o&&de(n)}}}function pV(e){let t,r,n;function o(){e[15].call(t,e[18],e[19])}return{c(){t=ct("input"),this.h()},l(u){t=ft(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ye(t,"class","input-text svelte-1u6mi4u"),ye(t,"type","number")},m(u,c){It(u,t,c),R0(t,e[17].distance),r||(n=Qr(t,"input",o),r=!0)},p(u,c){e=u,c&8&&M1(t.value)!==e[17].distance&&R0(t,e[17].distance)},d(u){u&&de(t),r=!1,n()}}}function dV(e){let t,r,n;function o(){e[14].call(t,e[18],e[19])}return{c(){t=ct("input"),this.h()},l(u){t=ft(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ye(t,"class","input-text svelte-1u6mi4u"),ye(t,"type","number")},m(u,c){It(u,t,c),R0(t,e[17].time),r||(n=Qr(t,"input",o),r=!0)},p(u,c){e=u,c&8&&M1(t.value)!==e[17].time&&R0(t,e[17].time)},d(u){u&&de(t),r=!1,n()}}}function fw(e){let t,r,n,o;function u(E,L){return E[0]===pu.Time?hV:fV}let c=u(e),s=c(e);function f(E,L){return E[0]===pu.Time?dV:pV}let v=f(e),w=v(e);return{c(){t=ct("div"),r=ct("label"),s.c(),n=pr(),w.c(),o=pr(),this.h()},l(E){t=ft(E,"DIV",{class:!0,style:!0});var L=wt(t);r=ft(L,"LABEL",{class:!0});var C=wt(r);s.l(C),C.forEach(de),n=dr(L),w.l(L),o=dr(L),L.forEach(de),this.h()},h(){ye(r,"class","control-label svelte-1u6mi4u"),ye(t,"class","flex-vertical-container svelte-1u6mi4u"),zo(t,"width","25%")},m(E,L){It(E,t,L),Qe(t,r),s.m(r,null),Qe(t,n),w.m(t,null),Qe(t,o)},p(E,L){c===(c=u(E))&&s?s.p(E,L):(s.d(1),s=c(E),s&&(s.c(),s.m(r,null))),v===(v=f(E))&&w?w.p(E,L):(w.d(1),w=v(E),w&&(w.c(),w.m(t,o)))},d(E){E&&de(t),s.d(),w.d()}}}function mV(e){let t,r;return t=new go({props:{icon:zy}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function gV(e){let t,r;return t=new go({props:{icon:Yw}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function yV(e){let t,r,n,o,u,c,s,f,v,w,E,L="Time",C,F,B,G,H,Z,ee,Y,le,ce="Distance",ve,pe,Ne,Ve,be,Ce,Oe,nt,mt,ht,He,ut,bt,Xe,We,ke,Re,Pe,dt,Et,Pt,Kt,$t,br;w=new go({props:{icon:Yw}}),Y=new go({props:{icon:zy}});let Gt=dp,Rr=[];for(let Wt=0;Wt<Gt.length;Wt+=1)Rr[Wt]=lw(sw(e,Gt,Wt));const Mr=Wt=>at(Rr[Wt],1,1,()=>{Rr[Wt]=null});let Kr=e[1]&&e[2]&&uw(e),Ct=e[3]&&cw(e);const pt=[gV,mV],Dr=[];function ln(Wt,Ur){return Wt[0]===pu.Time?0:1}return bt=ln(e),Xe=Dr[bt]=pt[bt](e),Pt=new go({props:{icon:Dy}}),{c(){t=ct("label"),r=Nn("Type of Isochrone"),n=pr(),o=ct("div"),u=ct("label"),c=ct("input"),f=pr(),v=ct("div"),Bt(w.$$.fragment),E=pr(),C=Nn(L),F=pr(),B=ct("label"),G=ct("input"),Z=pr(),ee=ct("div"),Bt(Y.$$.fragment),le=pr(),ve=Nn(ce),pe=pr(),Ne=ct("label"),Ve=Nn("Means of Transport"),be=pr(),Ce=ct("div");for(let Wt=0;Wt<Rr.length;Wt+=1)Rr[Wt].c();Oe=pr(),Kr&&Kr.c(),nt=pr(),Ct&&Ct.c(),mt=pr(),ht=ct("div"),He=ct("button"),ut=ct("span"),Xe.c(),We=pr(),ke=ct("span"),Re=Nn("Calculate"),Pe=pr(),dt=ct("button"),Et=ct("span"),Bt(Pt.$$.fragment),this.h()},l(Wt){t=ft(Wt,"LABEL",{class:!0});var Ur=wt(t);r=Rn(Ur,"Type of Isochrone"),Ur.forEach(de),n=dr(Wt),o=ft(Wt,"DIV",{class:!0});var dn=wt(o);u=ft(dn,"LABEL",{class:!0,style:!0});var tn=wt(u);c=ft(tn,"INPUT",{type:!0,name:!0}),f=dr(tn),v=ft(tn,"DIV",{class:!0});var Bn=wt(v);Yt(w.$$.fragment,Bn),Bn.forEach(de),E=dr(tn),C=Rn(tn,L),tn.forEach(de),F=dr(dn),B=ft(dn,"LABEL",{class:!0,style:!0});var Jn=wt(B);G=ft(Jn,"INPUT",{type:!0,name:!0}),Z=dr(Jn),ee=ft(Jn,"DIV",{class:!0});var ai=wt(ee);Yt(Y.$$.fragment,ai),ai.forEach(de),le=dr(Jn),ve=Rn(Jn,ce),Jn.forEach(de),dn.forEach(de),pe=dr(Wt),Ne=ft(Wt,"LABEL",{class:!0});var _i=wt(Ne);Ve=Rn(_i,"Means of Transport"),_i.forEach(de),be=dr(Wt),Ce=ft(Wt,"DIV",{class:!0});var hi=wt(Ce);for(let or=0;or<Rr.length;or+=1)Rr[or].l(hi);hi.forEach(de),Oe=dr(Wt),Kr&&Kr.l(Wt),nt=dr(Wt),Ct&&Ct.l(Wt),mt=dr(Wt),ht=ft(Wt,"DIV",{class:!0});var yr=wt(ht);He=ft(yr,"BUTTON",{class:!0});var Vr=wt(He);ut=ft(Vr,"SPAN",{class:!0});var wi=wt(ut);Xe.l(wi),wi.forEach(de),We=dr(Vr),ke=ft(Vr,"SPAN",{});var xn=wt(ke);Re=Rn(xn,"Calculate"),xn.forEach(de),Vr.forEach(de),Pe=dr(yr),dt=ft(yr,"BUTTON",{class:!0});var si=wt(dt);Et=ft(si,"SPAN",{});var fr=wt(Et);Yt(Pt.$$.fragment,fr),fr.forEach(de),si.forEach(de),yr.forEach(de),this.h()},h(){ye(t,"class","control-label svelte-1u6mi4u"),ye(c,"type","radio"),ye(c,"name","isochrone-"+pu.Time),c.checked=s=e[0]===pu.Time,ye(v,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ye(u,"class","radio-transport svelte-1u6mi4u"),zo(u,"color","black"),ye(G,"type","radio"),ye(G,"name","isochrone-"+pu.Distance),G.checked=H=e[0]===pu.Distance,ye(ee,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ye(B,"class","radio-transport svelte-1u6mi4u"),zo(B,"color","black"),ye(o,"class","transport-select-container svelte-1u6mi4u"),ye(Ne,"class","control-label svelte-1u6mi4u"),ye(Ce,"class","transport-select-container svelte-1u6mi4u"),ye(ut,"class","control-icon svelte-1u6mi4u"),ye(He,"class","control-button svelte-1u6mi4u"),ye(dt,"class","setting-button svelte-1u6mi4u"),ye(ht,"class","valhalla-container svelte-1u6mi4u")},m(Wt,Ur){It(Wt,t,Ur),Qe(t,r),It(Wt,n,Ur),It(Wt,o,Ur),Qe(o,u),Qe(u,c),Qe(u,f),Qe(u,v),jt(w,v,null),Qe(u,E),Qe(u,C),Qe(o,F),Qe(o,B),Qe(B,G),Qe(B,Z),Qe(B,ee),jt(Y,ee,null),Qe(B,le),Qe(B,ve),It(Wt,pe,Ur),It(Wt,Ne,Ur),Qe(Ne,Ve),It(Wt,be,Ur),It(Wt,Ce,Ur);for(let dn=0;dn<Rr.length;dn+=1)Rr[dn]&&Rr[dn].m(Ce,null);It(Wt,Oe,Ur),Kr&&Kr.m(Wt,Ur),It(Wt,nt,Ur),Ct&&Ct.m(Wt,Ur),It(Wt,mt,Ur),It(Wt,ht,Ur),Qe(ht,He),Qe(He,ut),Dr[bt].m(ut,null),Qe(He,We),Qe(He,ke),Qe(ke,Re),Qe(ht,Pe),Qe(ht,dt),Qe(dt,Et),jt(Pt,Et,null),Kt=!0,$t||(br=[Qr(c,"click",e[11]),Qr(G,"click",e[12]),Qr(He,"click",e[16]),Qr(dt,"click",e[6])],$t=!0)},p(Wt,[Ur]){if((!Kt||Ur&1&&s!==(s=Wt[0]===pu.Time))&&(c.checked=s),(!Kt||Ur&1&&H!==(H=Wt[0]===pu.Distance))&&(G.checked=H),Ur&16){Gt=dp;let tn;for(tn=0;tn<Gt.length;tn+=1){const Bn=sw(Wt,Gt,tn);Rr[tn]?(Rr[tn].p(Bn,Ur),Ze(Rr[tn],1)):(Rr[tn]=lw(Bn),Rr[tn].c(),Ze(Rr[tn],1),Rr[tn].m(Ce,null))}for(Ui(),tn=Gt.length;tn<Rr.length;tn+=1)Mr(tn);qi()}Wt[1]&&Wt[2]?Kr?Kr.p(Wt,Ur):(Kr=uw(Wt),Kr.c(),Kr.m(nt.parentNode,nt)):Kr&&(Kr.d(1),Kr=null),Wt[3]?Ct?Ct.p(Wt,Ur):(Ct=cw(Wt),Ct.c(),Ct.m(mt.parentNode,mt)):Ct&&(Ct.d(1),Ct=null);let dn=bt;bt=ln(Wt),bt===dn?Dr[bt].p(Wt,Ur):(Ui(),at(Dr[dn],1,1,()=>{Dr[dn]=null}),qi(),Xe=Dr[bt],Xe?Xe.p(Wt,Ur):(Xe=Dr[bt]=pt[bt](Wt),Xe.c()),Ze(Xe,1),Xe.m(ut,null))},i(Wt){if(!Kt){Ze(w.$$.fragment,Wt),Ze(Y.$$.fragment,Wt);for(let Ur=0;Ur<Gt.length;Ur+=1)Ze(Rr[Ur]);Ze(Xe),Ze(Pt.$$.fragment,Wt),Kt=!0}},o(Wt){at(w.$$.fragment,Wt),at(Y.$$.fragment,Wt),Rr=Rr.filter(Boolean);for(let Ur=0;Ur<Rr.length;Ur+=1)at(Rr[Ur]);at(Xe),at(Pt.$$.fragment,Wt),Kt=!1},d(Wt){Wt&&de(t),Wt&&de(n),Wt&&de(o),Ut(w),Ut(Y),Wt&&de(pe),Wt&&de(Ne),Wt&&de(be),Wt&&de(Ce),ys(Rr,Wt),Wt&&de(Oe),Kr&&Kr.d(Wt),Wt&&de(nt),Ct&&Ct.d(Wt),Wt&&de(mt),Wt&&de(ht),Dr[bt].d(),Ut(Pt),$t=!1,oa(br)}}}function vV(e,t,r){let n;vl(e,yg,Y=>r(10,n=Y));let{map:o}=t,{url:u}=t,{options:c}=t,s=pu.Time,f,v,w=c.Contours;w||(w=[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);let E=dp[0].value;const L=Y=>{n==null||n.getIsochrone(Number(f),Number(v),Y,E,JSON.parse(JSON.stringify(w)))},C=()=>{n==null||n.clearFeatures()},F=()=>{r(0,s=pu.Time)},B=()=>{r(0,s=pu.Distance)},G=Y=>{r(4,E=Y.value)};function H(Y,le){Y[le].time=M1(this.value),r(3,w)}function Z(Y,le){Y[le].distance=M1(this.value),r(3,w)}const ee=()=>L(s);return e.$$set=Y=>{"map"in Y&&r(7,o=Y.map),"url"in Y&&r(8,u=Y.url),"options"in Y&&r(9,c=Y.options)},e.$$.update=()=>{e.$$.dirty&1408&&o&&(n||yg.update(()=>{}),n||ch(yg,n=new cV(o,u),n),r(1,f=o.getCenter().lng),r(2,v=o.getCenter().lat),o.on("moveend",()=>{r(1,f=o.getCenter().lng),r(2,v=o.getCenter().lat)}))},[s,f,v,w,E,L,C,o,u,c,n,F,B,G,H,Z,ee]}class _V extends Pn{constructor(t){super(),Mn(this,t,vV,yV,Cn,{map:7,url:8,options:9})}}const Yf="routing-controls-source-line",_g="routing-controls-layer-line",bg="routing-controls-layer-line-label",wg="routing-controls-layer-symbol",Bp="routing-controls-source-symbol";class bV{constructor(t,r,n){Bi(this,"map");Bi(this,"tripData",[]);Bi(this,"url");Bi(this,"options",{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1});Bi(this,"tripSummary");Bi(this,"isRouting",!1);Bi(this,"isClickListenerAdded",!1);this.map=t,this.url=r,n&&(this.options=Object.assign(this.options,n))}getTripData(){return this.tripData}getTripSummary(){return this.tripSummary}clearFeatures(){this.map&&(this.map.getLayer(_g)&&this.map.removeLayer(_g),this.map.getLayer(bg)&&this.map.removeLayer(bg),this.map.getLayer(wg)&&this.map.removeLayer(wg),this.map.getSource(Yf)&&this.map.removeSource(Yf),this.map.getSource(Bp)&&this.map.removeSource(Bp)),this.tripData=[],this.tripSummary=void 0,this.map.fire("routing.clear")}addingPointOn(){this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("routing.on"),this.isRouting=!0}addingPointOff(){this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("routing.off"),this.isRouting=!1}mapClickListener(t){if(!this.isRouting)return;const r=t.lngLat;this.tripData||(this.tripData=[]),this.tripData=[...this.tripData,r],this.map.fire("routing.point.added")}calcRoute(t){if(!this.tripData||this.tripData&&this.tripData.length<2){this.tripSummary=void 0;return}this.map.fire("routing.error",{message:""});const r=`${this.url}/route`,n={locations:this.tripData.map(u=>({lon:u.lng,lat:u.lat})),costing:t,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},o=`${r}?json=${JSON.stringify(n)}`;fetch(o).then(u=>u.json()).then(u=>{if("error"in u)throw this.tripData.pop(),new Error(`${u.status} (${u.status_code}): ${u.error} (${u.error_code})`);const c=u.trip.legs.map(w=>this.decodeShape(w.shape));let s=[];c.forEach(w=>{s=[...s,...w]}),this.tripSummary=u.trip.summary,this.tripSummary.length=Number(this.tripSummary.length.toFixed(2)),this.tripSummary.time=Number((this.tripSummary.time/60).toFixed());const f={type:"FeatureCollection",features:u.trip.legs.map(w=>{const E=this.decodeShape(w.shape),L={length:Number(w.summary.length.toFixed(2)),time:Number((w.summary.time/60).toFixed())};return this.geoLineString(E,L)})},v=this.geoPoint(this.tripData.map(w=>[w.lng,w.lat]));this.map.fire("routing.calc.done"),this.map&&(this.map.getSource(Yf)?(this.map.getSource(Yf).setData(f),this.map.getSource(Bp).setData(v)):(this.map.addSource(Yf,{type:"geojson",data:f}),this.map.addSource(Bp,{type:"geojson",data:v}),this.map.addLayer({id:_g,type:"line",source:Yf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),this.map.addLayer({id:bg,type:"symbol",source:Yf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":this.options.font,"text-size":this.options.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}}),this.map.addLayer({id:wg,type:"symbol",source:Bp,layout:{"icon-image":this.options.iconImage,"icon-size":this.options.iconSize,"text-field":["get","text"],"text-font":this.options.font,"text-size":this.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}})))}).catch(u=>{console.error(u),this.map.fire("routing.error",{message:u.message})})}geoLineString(t=[],r={}){return{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t}}}geoPoint(t=[]){return{type:"FeatureCollection",features:t.map((r,n)=>{let o=(n+1).toString();return n===0?o="From":n===t.length-1&&(o="To"),{type:"Feature",properties:{text:o},geometry:{type:"Point",coordinates:r}}})}}decodeShape(t,r=6){let n=0,o=0,u=0,c=[],s=0,f=0,v=null,w,E,L=Math.pow(10,r||6);for(;n<t.length;){v=null,s=0,f=0;do v=t.charCodeAt(n++)-63,f|=(v&31)<<s,s+=5;while(v>=32);w=f&1?~(f>>1):f>>1,s=f=0;do v=t.charCodeAt(n++)-63,f|=(v&31)<<s,s+=5;while(v>=32);E=f&1?~(f>>1):f>>1,o+=w,u+=E,c.push([u/L,o/L])}return c}}function hw(e,t,r){const n=e.slice();return n[14]=t[r],n}function pw(e){let t,r,n,o,u,c,s,f=e[14].label+"",v,w,E,L,C;function F(){return e[12](e[14])}return c=new go({props:{icon:e[14].icon}}),{c(){t=ct("label"),r=ct("input"),o=pr(),u=ct("span"),Bt(c.$$.fragment),s=pr(),v=Nn(f),w=pr(),this.h()},l(B){t=ft(B,"LABEL",{class:!0,style:!0});var G=wt(t);r=ft(G,"INPUT",{type:!0,name:!0}),o=dr(G),u=ft(G,"SPAN",{class:!0});var H=wt(u);Yt(c.$$.fragment,H),H.forEach(de),s=dr(G),v=Rn(G,f),w=dr(G),G.forEach(de),this.h()},h(){ye(r,"type","radio"),ye(r,"name","transport-routing"),r.checked=n=e[0]===e[14].value,ye(u,"class","icon svelte-18sva3g"),ye(t,"class","radio-transport svelte-18sva3g"),zo(t,"color","black")},m(B,G){It(B,t,G),Qe(t,r),Qe(t,o),Qe(t,u),jt(c,u,null),Qe(t,s),Qe(t,v),Qe(t,w),E=!0,L||(C=Qr(r,"click",F),L=!0)},p(B,G){e=B,(!E||G&1&&n!==(n=e[0]===e[14].value))&&(r.checked=n)},i(B){E||(Ze(c.$$.fragment,B),E=!0)},o(B){at(c.$$.fragment,B),E=!1},d(B){B&&de(t),Ut(c),L=!1,C()}}}function wV(e){let t,r;return t=new go({props:{icon:d7}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function xV(e){let t,r;return t=new go({props:{icon:Kw}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function kV(e){let t;return{c(){t=Nn("Start routing")},l(r){t=Rn(r,"Start routing")},m(r,n){It(r,t,n)},d(r){r&&de(t)}}}function AV(e){let t;return{c(){t=Nn("Stop routing")},l(r){t=Rn(r,"Stop routing")},m(r,n){It(r,t,n)},d(r){r&&de(t)}}}function dw(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F=e[1].length>1&&mw(e),B=e[3]&&gw(e),G=e[4]&&yw(e);return{c(){t=ct("label"),r=Nn("From"),n=pr(),o=ct("div"),u=ct("input"),s=pr(),f=ct("input"),w=pr(),F&&F.c(),E=pr(),B&&B.c(),L=pr(),G&&G.c(),C=Xi(),this.h()},l(H){t=ft(H,"LABEL",{class:!0});var Z=wt(t);r=Rn(Z,"From"),Z.forEach(de),n=dr(H),o=ft(H,"DIV",{class:!0});var ee=wt(o);u=ft(ee,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=dr(ee),f=ft(ee,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),ee.forEach(de),w=dr(H),F&&F.l(H),E=dr(H),B&&B.l(H),L=dr(H),G&&G.l(H),C=Xi(),this.h()},h(){ye(t,"class","control-label svelte-18sva3g"),ye(u,"class","input-text svelte-18sva3g"),ye(u,"type","text"),ye(u,"placeholder","Name"),u.value=c=`${e[1][0].lng.toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ye(f,"class","input-text svelte-18sva3g"),ye(f,"type","text"),ye(f,"placeholder","Name"),f.value=v=`${e[1][0].lat.toFixed(6)}`,f.readOnly=!0,zo(f,"width","50%"),ye(o,"class","flex-container svelte-18sva3g")},m(H,Z){It(H,t,Z),Qe(t,r),It(H,n,Z),It(H,o,Z),Qe(o,u),Qe(o,s),Qe(o,f),It(H,w,Z),F&&F.m(H,Z),It(H,E,Z),B&&B.m(H,Z),It(H,L,Z),G&&G.m(H,Z),It(H,C,Z)},p(H,Z){Z&2&&c!==(c=`${H[1][0].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),Z&2&&v!==(v=`${H[1][0].lat.toFixed(6)}`)&&f.value!==v&&(f.value=v),H[1].length>1?F?F.p(H,Z):(F=mw(H),F.c(),F.m(E.parentNode,E)):F&&(F.d(1),F=null),H[3]?B?B.p(H,Z):(B=gw(H),B.c(),B.m(L.parentNode,L)):B&&(B.d(1),B=null),H[4]?G?G.p(H,Z):(G=yw(H),G.c(),G.m(C.parentNode,C)):G&&(G.d(1),G=null)},d(H){H&&de(t),H&&de(n),H&&de(o),H&&de(w),F&&F.d(H),H&&de(E),B&&B.d(H),H&&de(L),G&&G.d(H),H&&de(C)}}}function mw(e){let t,r,n,o,u,c,s,f,v;return{c(){t=ct("label"),r=Nn("To"),n=pr(),o=ct("div"),u=ct("input"),s=pr(),f=ct("input"),this.h()},l(w){t=ft(w,"LABEL",{class:!0});var E=wt(t);r=Rn(E,"To"),E.forEach(de),n=dr(w),o=ft(w,"DIV",{class:!0});var L=wt(o);u=ft(L,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),s=dr(L),f=ft(L,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),L.forEach(de),this.h()},h(){ye(t,"class","control-label svelte-18sva3g"),ye(u,"class","input-text svelte-18sva3g"),ye(u,"type","text"),ye(u,"placeholder","Name"),u.value=c=`${e[1][e[1].length-1].lng.toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ye(f,"class","input-text svelte-18sva3g"),ye(f,"type","text"),ye(f,"placeholder","Name"),f.value=v=`${e[1][e[1].length-1].lat.toFixed(6)}`,f.readOnly=!0,zo(f,"width","50%"),ye(o,"class","flex-container svelte-18sva3g")},m(w,E){It(w,t,E),Qe(t,r),It(w,n,E),It(w,o,E),Qe(o,u),Qe(o,s),Qe(o,f)},p(w,E){E&2&&c!==(c=`${w[1][w[1].length-1].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),E&2&&v!==(v=`${w[1][w[1].length-1].lat.toFixed(6)}`)&&f.value!==v&&(f.value=v)},d(w){w&&de(t),w&&de(n),w&&de(o)}}}function gw(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F;return{c(){t=ct("div"),r=ct("div"),n=ct("label"),o=Nn("Length"),u=pr(),c=ct("input"),f=pr(),v=ct("div"),w=ct("label"),E=Nn("Time"),L=pr(),C=ct("input"),this.h()},l(B){t=ft(B,"DIV",{class:!0});var G=wt(t);r=ft(G,"DIV",{class:!0,style:!0});var H=wt(r);n=ft(H,"LABEL",{class:!0});var Z=wt(n);o=Rn(Z,"Length"),Z.forEach(de),u=dr(H),c=ft(H,"INPUT",{class:!0,type:!0}),H.forEach(de),f=dr(G),v=ft(G,"DIV",{class:!0,style:!0});var ee=wt(v);w=ft(ee,"LABEL",{class:!0});var Y=wt(w);E=Rn(Y,"Time"),Y.forEach(de),L=dr(ee),C=ft(ee,"INPUT",{class:!0,type:!0}),ee.forEach(de),G.forEach(de),this.h()},h(){ye(n,"class","control-label svelte-18sva3g"),ye(c,"class","input-text svelte-18sva3g"),ye(c,"type","text"),c.value=s=`${e[3].length} km`,c.readOnly=!0,ye(r,"class","flex-vertical-container svelte-18sva3g"),zo(r,"width","50%"),ye(w,"class","control-label svelte-18sva3g"),ye(C,"class","input-text svelte-18sva3g"),ye(C,"type","text"),C.value=F=`${e[3].time} min`,C.readOnly=!0,ye(v,"class","flex-vertical-container svelte-18sva3g"),zo(v,"width","50%"),ye(t,"class","flex-container svelte-18sva3g")},m(B,G){It(B,t,G),Qe(t,r),Qe(r,n),Qe(n,o),Qe(r,u),Qe(r,c),Qe(t,f),Qe(t,v),Qe(v,w),Qe(w,E),Qe(v,L),Qe(v,C)},p(B,G){G&8&&s!==(s=`${B[3].length} km`)&&c.value!==s&&(c.value=s),G&8&&F!==(F=`${B[3].time} min`)&&C.value!==F&&(C.value=F)},d(B){B&&de(t)}}}function yw(e){let t,r;return{c(){t=ct("div"),r=Nn(e[4]),this.h()},l(n){t=ft(n,"DIV",{class:!0});var o=wt(t);r=Rn(o,e[4]),o.forEach(de),this.h()},h(){ye(t,"class","notification svelte-18sva3g")},m(n,o){It(n,t,o),Qe(t,r)},p(n,o){o&16&&No(r,n[4])},d(n){n&&de(t)}}}function EV(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce,ve=dp,pe=[];for(let He=0;He<ve.length;He+=1)pe[He]=pw(hw(e,ve,He));const Ne=He=>at(pe[He],1,1,()=>{pe[He]=null}),Ve=[xV,wV],be=[];function Ce(He,ut){return He[2]?0:1}v=Ce(e),w=be[v]=Ve[v](e);function Oe(He,ut){return He[2]?AV:kV}let nt=Oe(e),mt=nt(e);G=new go({props:{icon:Dy}});let ht=e[1]&&e[1].length>0&&dw(e);return{c(){t=ct("label"),r=Nn("Means of Transport"),n=pr(),o=ct("div");for(let He=0;He<pe.length;He+=1)pe[He].c();u=pr(),c=ct("div"),s=ct("button"),f=ct("span"),w.c(),E=pr(),L=ct("span"),mt.c(),C=pr(),F=ct("button"),B=ct("span"),Bt(G.$$.fragment),Z=pr(),ht&&ht.c(),ee=Xi(),this.h()},l(He){t=ft(He,"LABEL",{class:!0});var ut=wt(t);r=Rn(ut,"Means of Transport"),ut.forEach(de),n=dr(He),o=ft(He,"DIV",{class:!0});var bt=wt(o);for(let Et=0;Et<pe.length;Et+=1)pe[Et].l(bt);bt.forEach(de),u=dr(He),c=ft(He,"DIV",{class:!0});var Xe=wt(c);s=ft(Xe,"BUTTON",{class:!0});var We=wt(s);f=ft(We,"SPAN",{class:!0});var ke=wt(f);w.l(ke),ke.forEach(de),E=dr(We),L=ft(We,"SPAN",{});var Re=wt(L);mt.l(Re),Re.forEach(de),We.forEach(de),C=dr(Xe),F=ft(Xe,"BUTTON",{class:!0});var Pe=wt(F);B=ft(Pe,"SPAN",{});var dt=wt(B);Yt(G.$$.fragment,dt),dt.forEach(de),Pe.forEach(de),Xe.forEach(de),Z=dr(He),ht&&ht.l(He),ee=Xi(),this.h()},h(){ye(t,"class","control-label svelte-18sva3g"),ye(o,"class","transport-select-container svelte-18sva3g"),ye(f,"class","control-icon svelte-18sva3g"),ye(s,"class","control-button svelte-18sva3g"),ye(F,"class","setting-button svelte-18sva3g"),F.disabled=H=!e[5],ye(c,"class","valhalla-container svelte-18sva3g")},m(He,ut){It(He,t,ut),Qe(t,r),It(He,n,ut),It(He,o,ut);for(let bt=0;bt<pe.length;bt+=1)pe[bt]&&pe[bt].m(o,null);It(He,u,ut),It(He,c,ut),Qe(c,s),Qe(s,f),be[v].m(f,null),Qe(s,E),Qe(s,L),mt.m(L,null),Qe(c,C),Qe(c,F),Qe(F,B),jt(G,B,null),It(He,Z,ut),ht&&ht.m(He,ut),It(He,ee,ut),Y=!0,le||(ce=[Qr(s,"click",e[6]),Qr(F,"click",e[7])],le=!0)},p(He,[ut]){if(ut&1){ve=dp;let Xe;for(Xe=0;Xe<ve.length;Xe+=1){const We=hw(He,ve,Xe);pe[Xe]?(pe[Xe].p(We,ut),Ze(pe[Xe],1)):(pe[Xe]=pw(We),pe[Xe].c(),Ze(pe[Xe],1),pe[Xe].m(o,null))}for(Ui(),Xe=ve.length;Xe<pe.length;Xe+=1)Ne(Xe);qi()}let bt=v;v=Ce(He),v===bt?be[v].p(He,ut):(Ui(),at(be[bt],1,1,()=>{be[bt]=null}),qi(),w=be[v],w?w.p(He,ut):(w=be[v]=Ve[v](He),w.c()),Ze(w,1),w.m(f,null)),nt!==(nt=Oe(He))&&(mt.d(1),mt=nt(He),mt&&(mt.c(),mt.m(L,null))),(!Y||ut&32&&H!==(H=!He[5]))&&(F.disabled=H),He[1]&&He[1].length>0?ht?ht.p(He,ut):(ht=dw(He),ht.c(),ht.m(ee.parentNode,ee)):ht&&(ht.d(1),ht=null)},i(He){if(!Y){for(let ut=0;ut<ve.length;ut+=1)Ze(pe[ut]);Ze(w),Ze(G.$$.fragment,He),Y=!0}},o(He){pe=pe.filter(Boolean);for(let ut=0;ut<pe.length;ut+=1)at(pe[ut]);at(w),at(G.$$.fragment,He),Y=!1},d(He){He&&de(t),He&&de(n),He&&de(o),ys(pe,He),He&&de(u),He&&de(c),be[v].d(),mt.d(),Ut(G),He&&de(Z),ht&&ht.d(He),He&&de(ee),le=!1,oa(ce)}}}function SV(e,t,r){let n,o;vl(e,vg,H=>r(11,o=H));let{map:u}=t,{url:c}=t,{options:s}=t,f=!1,v=dp[0].value,w,E=[],L="";My(()=>{o&&f===!0&&o.addingPointOff()});const C=()=>{o&&(f?o.addingPointOff():o.addingPointOn())},F=()=>{o&&o.calcRoute(v)},B=()=>{o&&o.clearFeatures()},G=H=>{r(0,v=H.value)};return e.$$set=H=>{"map"in H&&r(8,u=H.map),"url"in H&&r(9,c=H.url),"options"in H&&r(10,s=H.options)},e.$$.update=()=>{e.$$.dirty&3840&&u&&(o||vg.update(()=>{}),o||ch(vg,o=new bV(u,c,s),o),u.on("routing.on",()=>{r(2,f=!0)}),u.on("routing.off",()=>{r(2,f=!1),o&&(r(3,w=o.getTripSummary()),r(1,E=o.getTripData()))}),u.on("routing.point.added",()=>{o&&r(1,E=o.getTripData())}),u.on("routing.calc.done",()=>{o&&r(3,w=o.getTripSummary())}),u.on("routing.clear",()=>{o&&(r(3,w=o.getTripSummary()),r(1,E=o.getTripData()))}),u.on("routing.error",H=>{r(4,L=H.message)})),e.$$.dirty&2&&r(5,n=E&&E.length>0),e.$$.dirty&2&&F(),e.$$.dirty&1&&F()},[v,E,f,w,L,n,C,B,u,c,s,o,G]}class CV extends Pn{constructor(t){super(),Mn(this,t,SV,EV,Cn,{map:8,url:9,options:10})}}function IV(e){let t,r;return t=new go({props:{icon:L7,color:"white"}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function LV(e){let t,r;return t=new go({props:{icon:x7,color:"white"}}),{c(){Bt(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){jt(t,n,o),r=!0},p:Xn,i(n){r||(Ze(t.$$.fragment,n),r=!0)},o(n){at(t.$$.fragment,n),r=!1},d(n){Ut(t,n)}}}function TV(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F;const B=[LV,IV],G=[];function H(Y,le){return Y[0]?0:1}o=H(e),u=G[o]=B[o](e);const Z=e[4].default,ee=Bu(Z,e,e[3],null);return{c(){t=ct("nav"),r=ct("p"),n=ct("span"),u.c(),c=pr(),s=Nn(e[1]),f=pr(),v=ct("div"),ee&&ee.c(),this.h()},l(Y){t=ft(Y,"NAV",{class:!0});var le=wt(t);r=ft(le,"P",{class:!0});var ce=wt(r);n=ft(ce,"SPAN",{class:!0});var ve=wt(n);u.l(ve),ve.forEach(de),c=dr(ce),s=Rn(ce,e[1]),ce.forEach(de),f=dr(le),v=ft(le,"DIV",{class:!0});var pe=wt(v);ee&&ee.l(pe),pe.forEach(de),le.forEach(de),this.h()},h(){ye(n,"class","panel-icon mt-1 svelte-6zjgg4"),ye(r,"class","panel-heading p-2 header-menu svelte-6zjgg4"),ye(v,"class","container m-2 svelte-6zjgg4"),v.hidden=w=!e[0],ye(t,"class",E="panel "+e[2]+" my-1 mx-1 svelte-6zjgg4")},m(Y,le){It(Y,t,le),Qe(t,r),Qe(r,n),G[o].m(n,null),Qe(r,c),Qe(r,s),Qe(t,f),Qe(t,v),ee&&ee.m(v,null),L=!0,C||(F=Qr(r,"click",e[5]),C=!0)},p(Y,[le]){let ce=o;o=H(Y),o===ce?G[o].p(Y,le):(Ui(),at(G[ce],1,1,()=>{G[ce]=null}),qi(),u=G[o],u?u.p(Y,le):(u=G[o]=B[o](Y),u.c()),Ze(u,1),u.m(n,null)),(!L||le&2)&&No(s,Y[1]),ee&&ee.p&&(!L||le&8)&&ju(ee,Z,Y,Y[3],L?qu(Z,Y[3],le,null):Uu(Y[3]),null),(!L||le&1&&w!==(w=!Y[0]))&&(v.hidden=w),(!L||le&4&&E!==(E="panel "+Y[2]+" my-1 mx-1 svelte-6zjgg4"))&&ye(t,"class",E)},i(Y){L||(Ze(u),Ze(ee,Y),L=!0)},o(Y){at(u),at(ee,Y),L=!1},d(Y){Y&&de(t),G[o].d(),ee&&ee.d(Y),C=!1,F()}}}function PV(e,t,r){let{$$slots:n={},$$scope:o}=t,{title:u}=t,{isPanelOpen:c=!1}=t,{color:s=""}=t;const f=()=>r(0,c=!c);return e.$$set=v=>{"title"in v&&r(1,u=v.title),"isPanelOpen"in v&&r(0,c=v.isPanelOpen),"color"in v&&r(2,s=v.color),"$$scope"in v&&r(3,o=v.$$scope)},[c,u,s,o,n,f]}class Ey extends Pn{constructor(t){super(),Mn(this,t,PV,TV,Cn,{title:1,isPanelOpen:0,color:2})}}function vw(e){let t,r,n;function o(c){e[9](c)}let u={title:"Measuring tool",color:Sy,$$slots:{default:[MV]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.isPanelOpen=e[0]),t=new Ey({props:u}),Ft.push(()=>Jt(t,"isPanelOpen",o)),{c(){Bt(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,s){jt(t,c,s),n=!0},p(c,s){const f={};s&524312&&(f.$$scope={dirty:s,ctx:c}),!r&&s&1&&(r=!0,f.isPanelOpen=c[0],er(()=>r=!1)),t.$set(f)},i(c){n||(Ze(t.$$.fragment,c),n=!0)},o(c){at(t.$$.fragment,c),n=!1},d(c){Ut(t,c)}}}function MV(e){let t,r,n,o,u,c;function s(E){e[6](E)}function f(E){e[7](E)}function v(E){e[8](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].elevation.options!==void 0&&(w.measureOption=e[3].elevation.options),e[3].elevation.url!==void 0&&(w.terrainRgbUrl=e[3].elevation.url),r=new lV({props:w}),Ft.push(()=>Jt(r,"map",s)),Ft.push(()=>Jt(r,"measureOption",f)),Ft.push(()=>Jt(r,"terrainRgbUrl",v)),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);Yt(r.$$.fragment,L),L.forEach(de),this.h()},h(){ye(t,"class","accordion-content svelte-1toti4c")},m(E,L){It(E,t,L),jt(r,t,null),c=!0},p(E,L){const C={};!n&&L&16&&(n=!0,C.map=E[4],er(()=>n=!1)),!o&&L&8&&(o=!0,C.measureOption=E[3].elevation.options,er(()=>o=!1)),!u&&L&8&&(u=!0,C.terrainRgbUrl=E[3].elevation.url,er(()=>u=!1)),r.$set(C)},i(E){c||(Ze(r.$$.fragment,E),c=!0)},o(E){at(r.$$.fragment,E),c=!1},d(E){E&&de(t),Ut(r)}}}function _w(e){let t,r,n,o,u,c;function s(E){e[13](E)}let f={title:"Routing tool",color:Sy,$$slots:{default:[DV]},$$scope:{ctx:e}};e[1]!==void 0&&(f.isPanelOpen=e[1]),t=new Ey({props:f}),Ft.push(()=>Jt(t,"isPanelOpen",s));function v(E){e[17](E)}let w={title:"Isochrone analysis",color:Sy,$$slots:{default:[zV]},$$scope:{ctx:e}};return e[2]!==void 0&&(w.isPanelOpen=e[2]),o=new Ey({props:w}),Ft.push(()=>Jt(o,"isPanelOpen",v)),{c(){Bt(t.$$.fragment),n=pr(),Bt(o.$$.fragment)},l(E){Yt(t.$$.fragment,E),n=dr(E),Yt(o.$$.fragment,E)},m(E,L){jt(t,E,L),It(E,n,L),jt(o,E,L),c=!0},p(E,L){const C={};L&524312&&(C.$$scope={dirty:L,ctx:E}),!r&&L&2&&(r=!0,C.isPanelOpen=E[1],er(()=>r=!1)),t.$set(C);const F={};L&524312&&(F.$$scope={dirty:L,ctx:E}),!u&&L&4&&(u=!0,F.isPanelOpen=E[2],er(()=>u=!1)),o.$set(F)},i(E){c||(Ze(t.$$.fragment,E),Ze(o.$$.fragment,E),c=!0)},o(E){at(t.$$.fragment,E),at(o.$$.fragment,E),c=!1},d(E){Ut(t,E),E&&de(n),Ut(o,E)}}}function DV(e){let t,r,n,o,u,c;function s(E){e[10](E)}function f(E){e[11](E)}function v(E){e[12](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].valhalla.url!==void 0&&(w.url=e[3].valhalla.url),e[3].valhalla.routingOptions!==void 0&&(w.options=e[3].valhalla.routingOptions),r=new CV({props:w}),Ft.push(()=>Jt(r,"map",s)),Ft.push(()=>Jt(r,"url",f)),Ft.push(()=>Jt(r,"options",v)),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);Yt(r.$$.fragment,L),L.forEach(de),this.h()},h(){ye(t,"class","accordion-content svelte-1toti4c")},m(E,L){It(E,t,L),jt(r,t,null),c=!0},p(E,L){const C={};!n&&L&16&&(n=!0,C.map=E[4],er(()=>n=!1)),!o&&L&8&&(o=!0,C.url=E[3].valhalla.url,er(()=>o=!1)),!u&&L&8&&(u=!0,C.options=E[3].valhalla.routingOptions,er(()=>u=!1)),r.$set(C)},i(E){c||(Ze(r.$$.fragment,E),c=!0)},o(E){at(r.$$.fragment,E),c=!1},d(E){E&&de(t),Ut(r)}}}function zV(e){let t,r,n,o,u,c;function s(E){e[14](E)}function f(E){e[15](E)}function v(E){e[16](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].valhalla.url!==void 0&&(w.url=e[3].valhalla.url),e[3].valhalla.isoChroneOptions!==void 0&&(w.options=e[3].valhalla.isoChroneOptions),r=new _V({props:w}),Ft.push(()=>Jt(r,"map",s)),Ft.push(()=>Jt(r,"url",f)),Ft.push(()=>Jt(r,"options",v)),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(E){t=ft(E,"DIV",{class:!0});var L=wt(t);Yt(r.$$.fragment,L),L.forEach(de),this.h()},h(){ye(t,"class","accordion-content svelte-1toti4c")},m(E,L){It(E,t,L),jt(r,t,null),c=!0},p(E,L){const C={};!n&&L&16&&(n=!0,C.map=E[4],er(()=>n=!1)),!o&&L&8&&(o=!0,C.url=E[3].valhalla.url,er(()=>o=!1)),!u&&L&8&&(u=!0,C.options=E[3].valhalla.isoChroneOptions,er(()=>u=!1)),r.$set(C)},i(E){c||(Ze(r.$$.fragment,E),c=!0)},o(E){at(r.$$.fragment,E),c=!1},d(E){E&&de(t),Ut(r)}}}function NV(e){let t,r,n,o=e[3].elevation&&vw(e),u=e[3].valhalla&&_w(e);return{c(){t=ct("div"),o&&o.c(),r=pr(),u&&u.c(),this.h()},l(c){t=ft(c,"DIV",{class:!0});var s=wt(t);o&&o.l(s),r=dr(s),u&&u.l(s),s.forEach(de),this.h()},h(){ye(t,"class","panel-content svelte-1toti4c")},m(c,s){It(c,t,s),o&&o.m(t,null),Qe(t,r),u&&u.m(t,null),n=!0},p(c,[s]){c[3].elevation?o?(o.p(c,s),s&8&&Ze(o,1)):(o=vw(c),o.c(),Ze(o,1),o.m(t,r)):o&&(Ui(),at(o,1,1,()=>{o=null}),qi()),c[3].valhalla?u?(u.p(c,s),s&8&&Ze(u,1)):(u=_w(c),u.c(),Ze(u,1),u.m(t,null)):u&&(Ui(),at(u,1,1,()=>{u=null}),qi())},i(c){n||(Ze(o),Ze(u),n=!0)},o(c){at(o),at(u),n=!1},d(c){c&&de(t),o&&o.d(),u&&u.d()}}}let Sy="is-link";function RV(e,t,r){let n;vl(e,nc,le=>r(4,n=le));let o="measure",u=!1,c=!1,s=!1;const f=()=>{switch(o){case"measure":r(0,u=!0),r(1,c=!1),r(2,s=!1);break;case"routing":r(0,u=!1),r(1,c=!0),r(2,s=!1);break;case"isochrone":r(0,u=!1),r(1,c=!1),r(2,s=!0);break}};function v(le){n=le,nc.set(n)}function w(le){e.$$.not_equal(ji.elevation.options,le)&&(ji.elevation.options=le,r(3,ji))}function E(le){e.$$.not_equal(ji.elevation.url,le)&&(ji.elevation.url=le,r(3,ji))}function L(le){u=le,r(0,u)}function C(le){n=le,nc.set(n)}function F(le){e.$$.not_equal(ji.valhalla.url,le)&&(ji.valhalla.url=le,r(3,ji))}function B(le){e.$$.not_equal(ji.valhalla.routingOptions,le)&&(ji.valhalla.routingOptions=le,r(3,ji))}function G(le){c=le,r(1,c)}function H(le){n=le,nc.set(n)}function Z(le){e.$$.not_equal(ji.valhalla.url,le)&&(ji.valhalla.url=le,r(3,ji))}function ee(le){e.$$.not_equal(ji.valhalla.isoChroneOptions,le)&&(ji.valhalla.isoChroneOptions=le,r(3,ji))}function Y(le){s=le,r(2,s)}return e.$$.update=()=>{e.$$.dirty&1&&u&&r(5,o="measure"),e.$$.dirty&2&&c&&r(5,o="routing"),e.$$.dirty&4&&s&&r(5,o="isochrone"),e.$$.dirty&32&&f()},[u,c,s,ji,n,o,v,w,E,L,C,F,B,G,H,Z,ee,Y]}class OV extends Pn{constructor(t){super(),Mn(this,t,RV,NV,Cn,{})}}function bw(e,t,r){const n=e.slice();return n[20]=t[r],n}function ww(e,t,r){const n=e.slice();return n[20]=t[r],n}function xw(e,t,r){const n=e.slice();return n[20]=t[r],n}function kw(e,t,r){const n=e.slice();return n[20]=t[r],n}function Aw(e,t,r){const n=e.slice();return n[20]=t[r],n}function Ew(e){let t,r=e[20].properties.name+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[20].properties.id,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&32&&r!==(r=u[20].properties.name+"")&&No(n,r),c&32&&o!==(o=u[20].properties.id)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function Sw(e){let t,r,n,o,u,c=e[6],s=[];for(let f=0;f<c.length;f+=1)s[f]=Cw(kw(e,c,f));return{c(){t=ct("select"),r=ct("option"),n=Nn("Select district...");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=ft(f,"SELECT",{class:!0});var v=wt(t);r=ft(v,"OPTION",{});var w=wt(r);n=Rn(w,"Select district..."),w.forEach(de);for(let E=0;E<s.length;E+=1)s[E].l(v);v.forEach(de),this.h()},h(){r.__value="",r.value=r.__value,ye(t,"class","admin-select svelte-1u6mis3"),e[1]===void 0&&yl(()=>e[11].call(t))},m(f,v){It(f,t,v),Qe(t,r),Qe(r,n);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(t,null);gs(t,e[1],!0),o||(u=Qr(t,"change",e[11]),o=!0)},p(f,v){if(v&64){c=f[6];let w;for(w=0;w<c.length;w+=1){const E=kw(f,c,w);s[w]?s[w].p(E,v):(s[w]=Cw(E),s[w].c(),s[w].m(t,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=c.length}v&66&&gs(t,f[1])},d(f){f&&de(t),ys(s,f),o=!1,u()}}}function Cw(e){let t,r=e[20].properties.name+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[20].properties.id,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&64&&r!==(r=u[20].properties.name+"")&&No(n,r),c&64&&o!==(o=u[20].properties.id)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function Iw(e){let t,r,n,o,u,c=e[7],s=[];for(let f=0;f<c.length;f+=1)s[f]=Lw(xw(e,c,f));return{c(){t=ct("select"),r=ct("option"),n=Nn("Select sector...");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=ft(f,"SELECT",{class:!0});var v=wt(t);r=ft(v,"OPTION",{});var w=wt(r);n=Rn(w,"Select sector..."),w.forEach(de);for(let E=0;E<s.length;E+=1)s[E].l(v);v.forEach(de),this.h()},h(){r.__value="",r.value=r.__value,ye(t,"class","admin-select svelte-1u6mis3"),e[2]===void 0&&yl(()=>e[12].call(t))},m(f,v){It(f,t,v),Qe(t,r),Qe(r,n);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(t,null);gs(t,e[2],!0),o||(u=Qr(t,"change",e[12]),o=!0)},p(f,v){if(v&128){c=f[7];let w;for(w=0;w<c.length;w+=1){const E=xw(f,c,w);s[w]?s[w].p(E,v):(s[w]=Lw(E),s[w].c(),s[w].m(t,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=c.length}v&132&&gs(t,f[2])},d(f){f&&de(t),ys(s,f),o=!1,u()}}}function Lw(e){let t,r=e[20].properties.name+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[20].properties.id,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&128&&r!==(r=u[20].properties.name+"")&&No(n,r),c&128&&o!==(o=u[20].properties.id)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function Tw(e){let t,r,n,o,u,c=e[8],s=[];for(let f=0;f<c.length;f+=1)s[f]=Pw(ww(e,c,f));return{c(){t=ct("select"),r=ct("option"),n=Nn("Select cell...");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=ft(f,"SELECT",{class:!0});var v=wt(t);r=ft(v,"OPTION",{});var w=wt(r);n=Rn(w,"Select cell..."),w.forEach(de);for(let E=0;E<s.length;E+=1)s[E].l(v);v.forEach(de),this.h()},h(){r.__value="",r.value=r.__value,ye(t,"class","admin-select svelte-1u6mis3"),e[3]===void 0&&yl(()=>e[13].call(t))},m(f,v){It(f,t,v),Qe(t,r),Qe(r,n);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(t,null);gs(t,e[3],!0),o||(u=Qr(t,"change",e[13]),o=!0)},p(f,v){if(v&256){c=f[8];let w;for(w=0;w<c.length;w+=1){const E=ww(f,c,w);s[w]?s[w].p(E,v):(s[w]=Pw(E),s[w].c(),s[w].m(t,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=c.length}v&264&&gs(t,f[3])},d(f){f&&de(t),ys(s,f),o=!1,u()}}}function Pw(e){let t,r=e[20].properties.name+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[20].properties.id,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&256&&r!==(r=u[20].properties.name+"")&&No(n,r),c&256&&o!==(o=u[20].properties.id)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function Mw(e){let t,r,n,o,u,c=e[9],s=[];for(let f=0;f<c.length;f+=1)s[f]=Dw(bw(e,c,f));return{c(){t=ct("select"),r=ct("option"),n=Nn("Select village...");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=ft(f,"SELECT",{class:!0});var v=wt(t);r=ft(v,"OPTION",{});var w=wt(r);n=Rn(w,"Select village..."),w.forEach(de);for(let E=0;E<s.length;E+=1)s[E].l(v);v.forEach(de),this.h()},h(){r.__value="",r.value=r.__value,ye(t,"class","admin-select svelte-1u6mis3"),e[4]===void 0&&yl(()=>e[14].call(t))},m(f,v){It(f,t,v),Qe(t,r),Qe(r,n);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(t,null);gs(t,e[4],!0),o||(u=Qr(t,"change",e[14]),o=!0)},p(f,v){if(v&512){c=f[9];let w;for(w=0;w<c.length;w+=1){const E=bw(f,c,w);s[w]?s[w].p(E,v):(s[w]=Dw(E),s[w].c(),s[w].m(t,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=c.length}v&528&&gs(t,f[4])},d(f){f&&de(t),ys(s,f),o=!1,u()}}}function Dw(e){let t,r=e[20].properties.name+"",n,o;return{c(){t=ct("option"),n=Nn(r),this.h()},l(u){t=ft(u,"OPTION",{});var c=wt(t);n=Rn(c,r),c.forEach(de),this.h()},h(){t.__value=o=e[20].properties.id,t.value=t.__value},m(u,c){It(u,t,c),Qe(t,n)},p(u,c){c&512&&r!==(r=u[20].properties.name+"")&&No(n,r),c&512&&o!==(o=u[20].properties.id)&&(t.__value=o,t.value=t.__value)},d(u){u&&de(t)}}}function FV(e){let t,r,n,o,u,c,s,f,v,w,E=e[5],L=[];for(let H=0;H<E.length;H+=1)L[H]=Ew(Aw(e,E,H));let C=e[0]&&Sw(e),F=e[0]&&e[1]&&Iw(e),B=e[0]&&e[1]&&e[2]&&Tw(e),G=e[0]&&e[1]&&e[2]&&e[3]&&Mw(e);return{c(){t=ct("div"),r=ct("select"),n=ct("option"),o=Nn("Select province...");for(let H=0;H<L.length;H+=1)L[H].c();u=pr(),C&&C.c(),c=pr(),F&&F.c(),s=pr(),B&&B.c(),f=pr(),G&&G.c(),this.h()},l(H){t=ft(H,"DIV",{class:!0});var Z=wt(t);r=ft(Z,"SELECT",{class:!0});var ee=wt(r);n=ft(ee,"OPTION",{});var Y=wt(n);o=Rn(Y,"Select province..."),Y.forEach(de);for(let le=0;le<L.length;le+=1)L[le].l(ee);ee.forEach(de),u=dr(Z),C&&C.l(Z),c=dr(Z),F&&F.l(Z),s=dr(Z),B&&B.l(Z),f=dr(Z),G&&G.l(Z),Z.forEach(de),this.h()},h(){n.__value="",n.value=n.__value,ye(r,"class","admin-select svelte-1u6mis3"),e[0]===void 0&&yl(()=>e[10].call(r)),ye(t,"class","admin-container svelte-1u6mis3")},m(H,Z){It(H,t,Z),Qe(t,r),Qe(r,n),Qe(n,o);for(let ee=0;ee<L.length;ee+=1)L[ee]&&L[ee].m(r,null);gs(r,e[0],!0),Qe(t,u),C&&C.m(t,null),Qe(t,c),F&&F.m(t,null),Qe(t,s),B&&B.m(t,null),Qe(t,f),G&&G.m(t,null),v||(w=Qr(r,"change",e[10]),v=!0)},p(H,[Z]){if(Z&32){E=H[5];let ee;for(ee=0;ee<E.length;ee+=1){const Y=Aw(H,E,ee);L[ee]?L[ee].p(Y,Z):(L[ee]=Ew(Y),L[ee].c(),L[ee].m(r,null))}for(;ee<L.length;ee+=1)L[ee].d(1);L.length=E.length}Z&33&&gs(r,H[0]),H[0]?C?C.p(H,Z):(C=Sw(H),C.c(),C.m(t,c)):C&&(C.d(1),C=null),H[0]&&H[1]?F?F.p(H,Z):(F=Iw(H),F.c(),F.m(t,s)):F&&(F.d(1),F=null),H[0]&&H[1]&&H[2]?B?B.p(H,Z):(B=Tw(H),B.c(),B.m(t,f)):B&&(B.d(1),B=null),H[0]&&H[1]&&H[2]&&H[3]?G?G.p(H,Z):(G=Mw(H),G.c(),G.m(t,null)):G&&(G.d(1),G=null)},i:Xn,o:Xn,d(H){H&&de(t),ys(L,H),C&&C.d(),F&&F.d(),B&&B.d(),G&&G.d(),v=!1,w()}}}const rf="selected-boundary";function BV(e,t,r){let n;vl(e,nc,ve=>r(15,n=ve));let o,u,c,s,f,v=[],w=[],E=[],L=[],C=[];const F=async ve=>{let pe;switch(ve){case"province":o?pe=v.filter(Ne=>Ne.properties.id===Number(o))[0]:H();break;case"district":u&&(pe=w.filter(Ne=>Ne.properties.id===Number(u))[0]);break;case"sector":c&&(pe=E.filter(Ne=>Ne.properties.id===Number(c))[0]);break;case"cell":s&&(pe=L.filter(Ne=>Ne.properties.id===Number(s))[0]);break;case"village":f&&(pe=C.filter(Ne=>Ne.properties.id===Number(f))[0]);break}if(G(pe),ve!=="village"){if(ve==="cell"&&o&&u&&c&&s){const Ne=`${ji.adminBoundary.url}/${o}/${u}/${c}/${s}/village.geojson`;r(9,C=await B(Ne)),r(4,f="")}else if(ve==="sector"&&o&&u&&c){const Ne=`${ji.adminBoundary.url}/${o}/${u}/${c}/cell.geojson`;r(8,L=await B(Ne)),r(9,C=[]),r(3,s=""),r(4,f="")}else if(ve==="district"&&o&&u){const Ne=`${ji.adminBoundary.url}/${o}/${u}/sector.geojson`;r(7,E=await B(Ne)),r(8,L=[]),r(9,C=[]),r(2,c=""),r(3,s=""),r(4,f="")}else if(ve==="province"&&o){const Ne=`${ji.adminBoundary.url}/${o}/district.geojson`;r(6,w=await B(Ne)),r(7,E=[]),r(8,L=[]),r(9,C=[]),r(1,u=""),r(2,c=""),r(3,s=""),r(4,f="")}else if(v.length===0){const Ne=`${ji.adminBoundary.url}/province.geojson`;r(5,v=await B(Ne)),r(6,w=[]),r(7,E=[]),r(8,L=[]),r(9,C=[]),r(0,o=""),r(1,u=""),r(2,c=""),r(3,s=""),r(4,f="")}}},B=async ve=>(await(await fetch(ve)).json()).features,G=ve=>{if(!ve)return;"bbox"in ve&&n.fitBounds(ve.bbox);const pe={type:"FeatureCollection",features:[ve]};n.getLayer(rf)?n.getSource(rf).setData(pe):(n.addSource(rf,{type:"geojson",data:pe}),n.addLayer({id:rf,type:"fill",source:rf,paint:{"fill-color":"rgba(255, 0, 0, 1)","fill-outline-color":"rgba(255, 0, 0, 1)","fill-opacity":.1},filter:["==","$type","Polygon"]}))},H=()=>{n!=null&&n.getLayer(rf)&&n.removeLayer(rf),n!=null&&n.getSource(rf)&&n.removeSource(rf)};function Z(){o=d0(this),r(0,o),r(5,v)}function ee(){u=d0(this),r(1,u),r(6,w)}function Y(){c=d0(this),r(2,c),r(7,E)}function le(){s=d0(this),r(3,s),r(8,L)}function ce(){f=d0(this),r(4,f),r(9,C)}return e.$$.update=()=>{e.$$.dirty&1&&F("province"),e.$$.dirty&2&&F("district"),e.$$.dirty&4&&F("sector"),e.$$.dirty&8&&F("cell"),e.$$.dirty&16&&F("village")},[o,u,c,s,f,v,w,E,L,C,Z,ee,Y,le,ce]}class jV extends Pn{constructor(t){super(),Mn(this,t,BV,FV,Cn,{})}}function UV(e){let t,r,n,o,u,c,s;return c=new jV({}),{c(){t=ct("div"),r=ct("div"),n=Nn("Zoom to admin"),o=pr(),u=ct("div"),Bt(c.$$.fragment),this.h()},l(f){t=ft(f,"DIV",{class:!0});var v=wt(t);r=ft(v,"DIV",{class:!0});var w=wt(r);n=Rn(w,"Zoom to admin"),w.forEach(de),o=dr(v),u=ft(v,"DIV",{class:!0});var E=wt(u);Yt(c.$$.fragment,E),E.forEach(de),v.forEach(de),this.h()},h(){ye(r,"class","panel-title svelte-q5yctq"),ye(u,"class","panel-contents svelte-q5yctq"),ye(t,"class","search-panel svelte-q5yctq")},m(f,v){It(f,t,v),Qe(t,r),Qe(r,n),Qe(t,o),Qe(t,u),jt(c,u,null),s=!0},i(f){s||(Ze(c.$$.fragment,f),s=!0)},o(f){at(c.$$.fragment,f),s=!1},d(f){f&&de(t),Ut(c)}}}function qV(e){let t,r,n=ji.adminBoundary&&UV();return{c(){n&&n.c(),t=Xi()},l(o){n&&n.l(o),t=Xi()},m(o,u){n&&n.m(o,u),It(o,t,u),r=!0},p:Xn,i(o){r||(Ze(n),r=!0)},o(o){at(n),r=!1},d(o){n&&n.d(o),o&&de(t)}}}class VV extends Pn{constructor(t){super(),Mn(this,t,null,qV,Cn,{})}}function zw(e,t,r){const n=e.slice();return n[4]=t[r],n}function Nw(e){let t,r,n,o,u,c,s=e[4].label+"",f,v,w,E,L,C,F;o=new go({props:{icon:e[4].icon,size:"lg","aria-hidden":"true"}});function B(){return e[3](e[4])}return{c(){t=ct("li"),r=ct("a"),n=ct("span"),Bt(o.$$.fragment),u=pr(),c=ct("span"),f=Nn(s),w=pr(),E=ct("li"),this.h()},l(G){t=ft(G,"LI",{class:!0});var H=wt(t);r=ft(H,"A",{class:!0});var Z=wt(r);n=ft(Z,"SPAN",{class:!0});var ee=wt(n);Yt(o.$$.fragment,ee),ee.forEach(de),u=dr(Z),c=ft(Z,"SPAN",{class:!0});var Y=wt(c);f=Rn(Y,s),Y.forEach(de),Z.forEach(de),H.forEach(de),w=dr(G),E=ft(G,"LI",{class:!0}),wt(E).forEach(de),this.h()},h(){ye(n,"class","icon ml-2 svelte-e2lduu"),ye(c,"class","svelte-e2lduu"),ye(r,"class","svelte-e2lduu"),ye(t,"class",v=np(e[1].label===e[4].label?"is-active":"")+" svelte-e2lduu"),ye(E,"class","svelte-e2lduu")},m(G,H){It(G,t,H),Qe(t,r),Qe(r,n),jt(o,n,null),Qe(r,u),Qe(r,c),Qe(c,f),It(G,w,H),It(G,E,H),L=!0,C||(F=Qr(t,"click",B),C=!0)},p(G,H){e=G,(!L||H&2&&v!==(v=np(e[1].label===e[4].label?"is-active":"")+" svelte-e2lduu"))&&ye(t,"class",v)},i(G){L||(Ze(o.$$.fragment,G),L=!0)},o(G){at(o.$$.fragment,G),L=!1},d(G){G&&de(t),Ut(o),G&&de(w),G&&de(E),C=!1,F()}}}function $V(e){let t,r,n,o,u,c,s,f,v,w,E,L,C,F,B,G,H,Z,ee,Y,le,ce=e[2],ve=[];for(let Ne=0;Ne<ce.length;Ne+=1)ve[Ne]=Nw(zw(e,ce,Ne));const pe=Ne=>at(ve[Ne],1,1,()=>{ve[Ne]=null});return E=new pF({}),B=new VV({}),ee=new OV({}),{c(){t=ct("div"),r=ct("div"),n=ct("a"),o=ct("img"),c=pr(),s=ct("div"),f=ct("ul");for(let Ne=0;Ne<ve.length;Ne+=1)ve[Ne].c();v=pr(),w=ct("div"),Bt(E.$$.fragment),C=pr(),F=ct("div"),Bt(B.$$.fragment),H=pr(),Z=ct("div"),Bt(ee.$$.fragment),this.h()},l(Ne){t=ft(Ne,"DIV",{class:!0});var Ve=wt(t);r=ft(Ve,"DIV",{class:!0});var be=wt(r);n=ft(be,"A",{class:!0,href:!0});var Ce=wt(n);o=ft(Ce,"IMG",{src:!0,alt:!0,class:!0}),Ce.forEach(de),c=dr(be),s=ft(be,"DIV",{class:!0});var Oe=wt(s);f=ft(Oe,"UL",{class:!0});var nt=wt(f);for(let ut=0;ut<ve.length;ut+=1)ve[ut].l(nt);nt.forEach(de),Oe.forEach(de),be.forEach(de),v=dr(Ve),w=ft(Ve,"DIV",{class:!0});var mt=wt(w);Yt(E.$$.fragment,mt),mt.forEach(de),C=dr(Ve),F=ft(Ve,"DIV",{class:!0});var ht=wt(F);Yt(B.$$.fragment,ht),ht.forEach(de),H=dr(Ve),Z=ft(Ve,"DIV",{class:!0});var He=wt(Z);Yt(ee.$$.fragment,He),He.forEach(de),Ve.forEach(de),this.h()},h(){Hw(o.src,u=ji.logo)||ye(o,"src",u),ye(o,"alt","logo"),ye(o,"class","svelte-e2lduu"),ye(n,"class","icon is-medium logo svelte-e2lduu"),ye(n,"href",ji.url),ye(f,"class","svelte-e2lduu"),ye(s,"class","tabs is-centered is-small mb-0 svelte-e2lduu"),ye(r,"class","header svelte-e2lduu"),w.hidden=L=e[1].label!==e[0].LAYERS,ye(w,"class","svelte-e2lduu"),F.hidden=G=e[1].label!==e[0].SEARCH,ye(F,"class","svelte-e2lduu"),Z.hidden=Y=e[1].label!==e[0].ADVANCED,ye(Z,"class","svelte-e2lduu"),ye(t,"class","drawer-content svelte-e2lduu")},m(Ne,Ve){It(Ne,t,Ve),Qe(t,r),Qe(r,n),Qe(n,o),Qe(r,c),Qe(r,s),Qe(s,f);for(let be=0;be<ve.length;be+=1)ve[be]&&ve[be].m(f,null);Qe(t,v),Qe(t,w),jt(E,w,null),Qe(t,C),Qe(t,F),jt(B,F,null),Qe(t,H),Qe(t,Z),jt(ee,Z,null),le=!0},p(Ne,[Ve]){if(Ve&6){ce=Ne[2];let be;for(be=0;be<ce.length;be+=1){const Ce=zw(Ne,ce,be);ve[be]?(ve[be].p(Ce,Ve),Ze(ve[be],1)):(ve[be]=Nw(Ce),ve[be].c(),Ze(ve[be],1),ve[be].m(f,null))}for(Ui(),be=ce.length;be<ve.length;be+=1)pe(be);qi()}(!le||Ve&3&&L!==(L=Ne[1].label!==Ne[0].LAYERS))&&(w.hidden=L),(!le||Ve&3&&G!==(G=Ne[1].label!==Ne[0].SEARCH))&&(F.hidden=G),(!le||Ve&3&&Y!==(Y=Ne[1].label!==Ne[0].ADVANCED))&&(Z.hidden=Y)},i(Ne){if(!le){for(let Ve=0;Ve<ce.length;Ve+=1)Ze(ve[Ve]);Ze(E.$$.fragment,Ne),Ze(B.$$.fragment,Ne),Ze(ee.$$.fragment,Ne),le=!0}},o(Ne){ve=ve.filter(Boolean);for(let Ve=0;Ve<ve.length;Ve+=1)at(ve[Ve]);at(E.$$.fragment,Ne),at(B.$$.fragment,Ne),at(ee.$$.fragment,Ne),le=!1},d(Ne){Ne&&de(t),ys(ve,Ne),Ut(E),Ut(B),Ut(ee)}}}function GV(e,t,r){var n;(function(s){s.LAYERS="Layers",s.SEARCH="Search",s.ADVANCED="Advanced"})(n||(n={}));let o=[{icon:f7,label:n.LAYERS},{icon:S7,label:n.SEARCH},{icon:s7,label:n.ADVANCED}],u=o[0];return[n,u,o,s=>r(1,u=s)]}class HV extends Pn{constructor(t){super(),Mn(this,t,GV,$V,Cn,{})}}class WV{constructor(t,r=20,n=20,o="#000000",u=4){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"svgCanvas");Bi(this,"xLine");Bi(this,"yLine");Bi(this,"color");Bi(this,"iconWidth");Bi(this,"iconHeight");Bi(this,"lineWidth");this.map=t,this.mapResize=this.mapResize.bind(this),this.iconWidth=r,this.iconHeight=n,this.color=o,this.lineWidth=u}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,r;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.iconWidth}px`),this.svgCanvas.setAttribute("height",`${this.iconHeight}px`);const t=this.width/2,r=this.height/2,n=this.iconWidth/2,o=this.iconHeight/2;this.svgCanvas.style.top=`${r-o}px`,this.svgCanvas.style.left=`${t-n}px`,this.yLine.setAttribute("x1",`${n}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${n}px`),this.yLine.setAttribute("y2",`${this.iconHeight}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${o}px`),this.xLine.setAttribute("x2",`${this.iconWidth}px`),this.xLine.setAttribute("y2",`${o}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.setAttribute("width",`${this.iconWidth}px`),r.setAttribute("height",`${this.iconHeight}px`);const n=this.width/2,o=this.height/2,u=this.iconWidth/2,c=this.iconHeight/2;r.style.top=`${o-c}px`,r.style.left=`${n-u}px`,this.yLine=r.appendChild(this.createLine(u.toString(),"0",u.toString(),this.iconHeight.toString(),this.color,`${this.lineWidth}px`)),this.xLine=r.appendChild(this.createLine("0",c.toString(),this.iconWidth.toString(),c.toString(),this.color,`${this.lineWidth}px`)),t==null||t.appendChild(r),this.svgCanvas=r}}createLine(t,r,n,o,u,c){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",t),s.setAttribute("y1",r),s.setAttribute("x2",n),s.setAttribute("y2",o),s.setAttribute("stroke",u),s.setAttribute("stroke-width",c),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var xp=XV,ZV=Object.prototype.hasOwnProperty;function XV(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)ZV.call(r,n)&&(e[n]=r[n])}return e}var Cy={},YV={get exports(){return Cy},set exports(e){Cy=e}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(n,o){return o.filter(function(u){return r.test(n,u)})},r.test=function(n,o){return r.match(n,o)!==null},r.match=function(n,o,u){u=u||{};var c=0,s=[],f=o.length,v=0,w=0,E=u.pre||"",L=u.post||"",C=u.caseSensitive&&o||o.toLowerCase(),F;n=u.caseSensitive&&n||n.toLowerCase();for(var B=0;B<f;B++)F=o[B],C[B]===n[c]?(F=E+F+L,c+=1,w+=1+w):w=0,v+=w,s[s.length]=F;return c===n.length?(v=C===n?1/0:v,{rendered:s.join(""),score:v}):null},r.filter=function(n,o,u){return!o||o.length===0?[]:typeof n!="string"?o:(u=u||{},o.reduce(function(c,s,f,v){var w=s;u.extract&&(w=u.extract(s));var E=r.match(n,w,u);return E!=null&&(c[c.length]={string:E.rendered,score:E.score,index:f,original:s}),c},[]).sort(function(c,s){var f=s.score-c.score;return f||c.index-s.index}))}})()})(YV);var fc=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};fc.prototype.show=function(){this.element.style.display="block"};fc.prototype.hide=function(){this.element.style.display="none"};fc.prototype.add=function(e){this.items.push(e)};fc.prototype.clear=function(){this.items=[],this.active=0};fc.prototype.isEmpty=function(){return!this.items.length};fc.prototype.isVisible=function(){return this.element.style.display==="block"};fc.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};fc.prototype.drawItem=function(e,t){var r=document.createElement("li"),n=document.createElement("a");t&&(r.className+=" active"),n.innerHTML=e.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};fc.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};fc.prototype.move=function(e){this.active=e,this.draw()};fc.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};fc.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};fc.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var JV=fc,KV=xp,QV=Cy,e$=JV,mu=function(e,t,r){return r=r||{},this.options=KV({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new e$(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(n){this.handleKeyUp(n.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(n){this.handleKeyDown(n)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(n){this.handlePaste(n)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};mu.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};mu.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};mu.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};mu.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};mu.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var r=0;r<t.length&&(this.list.add(t[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};mu.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};mu.prototype.update=function(e){this.data=e,this.handleKeyUp()};mu.prototype.clear=function(){this.data=[],this.list.clear()};mu.prototype.normalize=function(e){return e=e.toLowerCase(),e};mu.prototype.match=function(e,t){return e.indexOf(t)>-1};mu.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};mu.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(n){return this.getItemValue(n)}.bind(this)},r;this.options.filter?(r=QV.filter(this.query,this.data,t),r=r.map(function(n){return{original:n.original,string:this.render(n.original,n.string)}}.bind(this))):r=this.data.map(function(n){var o=this.render(n);return{original:n,string:o}}.bind(this)),e(r)};mu.prototype.getItemValue=function(e){return e};mu.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),n=this.normalize(r),o=n.lastIndexOf(this.query);o>-1;){var u=o+this.query.length;r=r.slice(0,o)+"<strong>"+r.slice(o,u)+"</strong>"+r.slice(u),o=n.slice(0,o).lastIndexOf(this.query)}return r};mu.prototype.renderError=function(e){this.list.drawError(e)};var t$=mu,fk=t$,r$=fk;typeof window<"u"&&(window.Suggestions=fk);var n$="Expected a function",Rw=0/0,i$="[object Symbol]",o$=/^\s+|\s+$/g,a$=/^[-+]0x[0-9a-f]+$/i,s$=/^0b[01]+$/i,l$=/^0o[0-7]+$/i,u$=parseInt,c$=typeof Hc=="object"&&Hc&&Hc.Object===Object&&Hc,f$=typeof self=="object"&&self&&self.Object===Object&&self,h$=c$||f$||Function("return this")(),p$=Object.prototype,d$=p$.toString,m$=Math.max,g$=Math.min,xg=function(){return h$.Date.now()};function y$(e,t,r){var n,o,u,c,s,f,v=0,w=!1,E=!1,L=!0;if(typeof e!="function")throw new TypeError(n$);t=Ow(t)||0,Iy(r)&&(w=!!r.leading,E="maxWait"in r,u=E?m$(Ow(r.maxWait)||0,t):u,L="trailing"in r?!!r.trailing:L);function C(ce){var ve=n,pe=o;return n=o=void 0,v=ce,c=e.apply(pe,ve),c}function F(ce){return v=ce,s=setTimeout(H,t),w?C(ce):c}function B(ce){var ve=ce-f,pe=ce-v,Ne=t-ve;return E?g$(Ne,u-pe):Ne}function G(ce){var ve=ce-f,pe=ce-v;return f===void 0||ve>=t||ve<0||E&&pe>=u}function H(){var ce=xg();if(G(ce))return Z(ce);s=setTimeout(H,B(ce))}function Z(ce){return s=void 0,L&&n?C(ce):(n=o=void 0,c)}function ee(){s!==void 0&&clearTimeout(s),v=0,n=f=o=s=void 0}function Y(){return s===void 0?c:Z(xg())}function le(){var ce=xg(),ve=G(ce);if(n=arguments,o=this,f=ce,ve){if(s===void 0)return F(f);if(E)return s=setTimeout(H,t),C(f)}return s===void 0&&(s=setTimeout(H,t)),c}return le.cancel=ee,le.flush=Y,le}function Iy(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function v$(e){return!!e&&typeof e=="object"}function _$(e){return typeof e=="symbol"||v$(e)&&d$.call(e)==i$}function Ow(e){if(typeof e=="number")return e;if(_$(e))return Rw;if(Iy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Iy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(o$,"");var r=s$.test(e);return r||l$.test(e)?u$(e.slice(2),r?2:8):a$.test(e)?Rw:+e}var b$=y$,t2={},w$={get exports(){return t2},set exports(e){t2=e}},tp=typeof Reflect=="object"?Reflect:null,Fw=tp&&typeof tp.apply=="function"?tp.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},P1;tp&&typeof tp.ownKeys=="function"?P1=tp.ownKeys:Object.getOwnPropertySymbols?P1=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:P1=function(t){return Object.getOwnPropertyNames(t)};function x$(e){console&&console.warn&&console.warn(e)}var hk=Number.isNaN||function(t){return t!==t};function Aa(){Aa.init.call(this)}w$.exports=Aa;t2.once=S$;Aa.EventEmitter=Aa;Aa.prototype._events=void 0;Aa.prototype._eventsCount=0;Aa.prototype._maxListeners=void 0;var Bw=10;function S2(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Aa,"defaultMaxListeners",{enumerable:!0,get:function(){return Bw},set:function(e){if(typeof e!="number"||e<0||hk(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Bw=e}});Aa.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Aa.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||hk(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function pk(e){return e._maxListeners===void 0?Aa.defaultMaxListeners:e._maxListeners}Aa.prototype.getMaxListeners=function(){return pk(this)};Aa.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=t==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var f=u[t];if(f===void 0)return!1;if(typeof f=="function")Fw(f,this,r);else for(var v=f.length,w=vk(f,v),n=0;n<v;++n)Fw(w[n],this,r);return!0};function dk(e,t,r,n){var o,u,c;if(S2(r),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),u=e._events),c=u[t]),c===void 0)c=u[t]=r,++e._eventsCount;else if(typeof c=="function"?c=u[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),o=pk(e),o>0&&c.length>o&&!c.warned){c.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=c.length,x$(s)}return e}Aa.prototype.addListener=function(t,r){return dk(this,t,r,!1)};Aa.prototype.on=Aa.prototype.addListener;Aa.prototype.prependListener=function(t,r){return dk(this,t,r,!0)};function k$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mk(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=k$.bind(n);return o.listener=r,n.wrapFn=o,o}Aa.prototype.once=function(t,r){return S2(r),this.on(t,mk(this,t,r)),this};Aa.prototype.prependOnceListener=function(t,r){return S2(r),this.prependListener(t,mk(this,t,r)),this};Aa.prototype.removeListener=function(t,r){var n,o,u,c,s;if(S2(r),o=this._events,o===void 0)return this;if(n=o[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(u=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){s=n[c].listener,u=c;break}if(u<0)return this;u===0?n.shift():A$(n,u),n.length===1&&(o[t]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};Aa.prototype.off=Aa.prototype.removeListener;Aa.prototype.removeAllListeners=function(t){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var u=Object.keys(n),c;for(o=0;o<u.length;++o)c=u[o],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(t,r[o]);return this};function gk(e,t,r){var n=e._events;if(n===void 0)return[];var o=n[t];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?E$(o):vk(o,o.length)}Aa.prototype.listeners=function(t){return gk(this,t,!0)};Aa.prototype.rawListeners=function(t){return gk(this,t,!1)};Aa.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):yk.call(e,t)};Aa.prototype.listenerCount=yk;function yk(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Aa.prototype.eventNames=function(){return this._eventsCount>0?P1(this._events):[]};function vk(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function A$(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function E$(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function S$(e,t){return new Promise(function(r,n){function o(c){e.removeListener(t,u),n(c)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",o),r([].slice.call(arguments))}_k(e,t,u,{once:!0}),t!=="error"&&C$(e,o,{once:!0})})}function C$(e,t,r){typeof e.on=="function"&&_k(e,"error",t,r)}function _k(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(u){n.once&&e.removeEventListener(t,o),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var I$={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function L$(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function T$(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],n=t[2].split(";"),o=null,u=n.reduce(function(c,s){var f=L$(s);return f?f.key==="rel"?(o||(o=f.value),c):(c[f.key]=f.value,c):c},{});return o?{url:r,rel:o,params:u}:null}function P$(e){return e?e.split(/,\s*</).reduce(function(t,r){var n=T$(r);if(!n)return t;var o=n.rel.split(/\s+/);return o.forEach(function(u){t[u]||(t[u]={url:n.url,params:n.params})}),t},{}):{}}var M$=P$,D$=M$;function Gv(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=D$(this.headers.link)}Gv.prototype.hasNextPage=function(){return!!this.links.next};Gv.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var z$=Gv,C2={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},jw=C2;function N$(e){var t=e.type||jw.ERROR_HTTP,r;if(e.body)try{r=JSON.parse(e.body)}catch{r=e.body}else r=null;var n=e.message||null;n||(typeof r=="string"?n=r:r&&typeof r.message=="string"?n=r.message:t===jw.ERROR_REQUEST_ABORTED&&(n="Request aborted")),this.message=n,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=r}var R$=N$;function O$(e){var t=e.indexOf(":"),r=e.substring(0,t).trim().toLowerCase(),n=e.substring(t+1).trim();return{name:r,value:n}}function F$(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(r){var n=O$(r);t[n.name]=n.value}),t}var B$=F$,j$=z$,Uw=R$,kg=C2,U$=B$,r2={};function q$(e){var t=r2[e.id];t&&(t.abort(),delete r2[e.id])}function V$(e,t){return new j$(e,{body:t.response,headers:U$(t.getAllResponseHeaders()),statusCode:t.status})}function qw(e){var t=e.total,r=e.loaded,n=100*r/t;return{total:t,transferred:r,percent:n}}function bk(e,t){return new Promise(function(r,n){t.onprogress=function(c){e.emitter.emit(kg.EVENT_PROGRESS_DOWNLOAD,qw(c))};var o=e.file;o&&(t.upload.onprogress=function(c){e.emitter.emit(kg.EVENT_PROGRESS_UPLOAD,qw(c))}),t.onerror=function(c){n(c)},t.onabort=function(){var c=new Uw({request:e,type:kg.ERROR_REQUEST_ABORTED});n(c)},t.onload=function(){if(delete r2[e.id],t.status<200||t.status>=400){var c=new Uw({request:e,body:t.response,statusCode:t.status});n(c);return}r(t)};var u=e.body;typeof u=="string"?t.send(u):u?t.send(JSON.stringify(u)):o?t.send(o):t.send(),r2[e.id]=t}).then(function(r){return V$(e,r)})}function wk(e,t){var r=e.url(t),n=new window.XMLHttpRequest;return n.open(e.method,r),Object.keys(e.headers).forEach(function(o){n.setRequestHeader(o,e.headers[o])}),n}function $$(e){return Promise.resolve().then(function(){var t=wk(e,e.client.accessToken);return bk(e,t)})}var G$={browserAbort:q$,sendRequestXhr:bk,browserSend:$$,createRequestXhr:wk},n2={},H$={get exports(){return n2},set exports(e){n2=e}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(r){var n=t,o=e&&e.exports==n&&e,u=typeof Hc=="object"&&Hc;(u.global===u||u.window===u)&&(r=u);var c=function(F){this.message=F};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var s=function(F){throw new c(F)},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=/[\t\n\f\r ]/g,w=function(F){F=String(F).replace(v,"");var B=F.length;B%4==0&&(F=F.replace(/==?$/,""),B=F.length),(B%4==1||/[^+a-zA-Z0-9/]/.test(F))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var G=0,H,Z,ee="",Y=-1;++Y<B;)Z=f.indexOf(F.charAt(Y)),H=G%4?H*64+Z:Z,G++%4&&(ee+=String.fromCharCode(255&H>>(-2*G&6)));return ee},E=function(F){F=String(F),/[^\0-\xFF]/.test(F)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var B=F.length%3,G="",H=-1,Z,ee,Y,le,ce=F.length-B;++H<ce;)Z=F.charCodeAt(H)<<16,ee=F.charCodeAt(++H)<<8,Y=F.charCodeAt(++H),le=Z+ee+Y,G+=f.charAt(le>>18&63)+f.charAt(le>>12&63)+f.charAt(le>>6&63)+f.charAt(le&63);return B==2?(Z=F.charCodeAt(H)<<8,ee=F.charCodeAt(++H),le=Z+ee,G+=f.charAt(le>>10)+f.charAt(le>>4&63)+f.charAt(le<<2&63)+"="):B==1&&(le=F.charCodeAt(H),G+=f.charAt(le>>2)+f.charAt(le<<4&63)+"=="),G},L={encode:E,decode:w,version:"0.1.0"};if(n&&!n.nodeType)if(o)o.exports=L;else for(var C in L)L.hasOwnProperty(C)&&(n[C]=L[C]);else r.base64=L})(Hc)})(H$,n2);var W$=n2,Ag={};function Z$(e){if(Ag[e])return Ag[e];var t=e.split("."),r=t[0],n=t[1];if(!n)throw new Error("Invalid token");var o=X$(n),u={usage:r,user:o.u};return Jf(o,"a")&&(u.authorization=o.a),Jf(o,"exp")&&(u.expires=o.exp*1e3),Jf(o,"iat")&&(u.created=o.iat*1e3),Jf(o,"scopes")&&(u.scopes=o.scopes),Jf(o,"client")&&(u.client=o.client),Jf(o,"ll")&&(u.lastLogin=o.ll),Jf(o,"iu")&&(u.impersonator=o.iu),Ag[e]=u,u}function X$(e){try{return JSON.parse(W$.decode(e))}catch{throw new Error("Invalid token")}}function Jf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var xk=Z$,Ly={},Y$={get exports(){return Ly},set exports(e){Ly=e}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(f,v,w){this.fn=f,this.context=v,this.once=w||!1}function u(f,v,w,E,L){if(typeof w!="function")throw new TypeError("The listener must be a function");var C=new o(w,E||f,L),F=r?r+v:v;return f._events[F]?f._events[F].fn?f._events[F]=[f._events[F],C]:f._events[F].push(C):(f._events[F]=C,f._eventsCount++),f}function c(f,v){--f._eventsCount===0?f._events=new n:delete f._events[v]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var v=[],w,E;if(this._eventsCount===0)return v;for(E in w=this._events)t.call(w,E)&&v.push(r?E.slice(1):E);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(w)):v},s.prototype.listeners=function(v){var w=r?r+v:v,E=this._events[w];if(!E)return[];if(E.fn)return[E.fn];for(var L=0,C=E.length,F=new Array(C);L<C;L++)F[L]=E[L].fn;return F},s.prototype.listenerCount=function(v){var w=r?r+v:v,E=this._events[w];return E?E.fn?1:E.length:0},s.prototype.emit=function(v,w,E,L,C,F){var B=r?r+v:v;if(!this._events[B])return!1;var G=this._events[B],H=arguments.length,Z,ee;if(G.fn){switch(G.once&&this.removeListener(v,G.fn,void 0,!0),H){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,w),!0;case 3:return G.fn.call(G.context,w,E),!0;case 4:return G.fn.call(G.context,w,E,L),!0;case 5:return G.fn.call(G.context,w,E,L,C),!0;case 6:return G.fn.call(G.context,w,E,L,C,F),!0}for(ee=1,Z=new Array(H-1);ee<H;ee++)Z[ee-1]=arguments[ee];G.fn.apply(G.context,Z)}else{var Y=G.length,le;for(ee=0;ee<Y;ee++)switch(G[ee].once&&this.removeListener(v,G[ee].fn,void 0,!0),H){case 1:G[ee].fn.call(G[ee].context);break;case 2:G[ee].fn.call(G[ee].context,w);break;case 3:G[ee].fn.call(G[ee].context,w,E);break;case 4:G[ee].fn.call(G[ee].context,w,E,L);break;default:if(!Z)for(le=1,Z=new Array(H-1);le<H;le++)Z[le-1]=arguments[le];G[ee].fn.apply(G[ee].context,Z)}}return!0},s.prototype.on=function(v,w,E){return u(this,v,w,E,!1)},s.prototype.once=function(v,w,E){return u(this,v,w,E,!0)},s.prototype.removeListener=function(v,w,E,L){var C=r?r+v:v;if(!this._events[C])return this;if(!w)return c(this,C),this;var F=this._events[C];if(F.fn)F.fn===w&&(!L||F.once)&&(!E||F.context===E)&&c(this,C);else{for(var B=0,G=[],H=F.length;B<H;B++)(F[B].fn!==w||L&&!F[B].once||E&&F[B].context!==E)&&G.push(F[B]);G.length?this._events[C]=G.length===1?G[0]:G:c(this,C)}return this},s.prototype.removeAllListeners=function(v){var w;return v?(w=r?r+v:v,this._events[w]&&c(this,w)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Y$);function J$(e){return e.map(encodeURIComponent).join(",")}function kk(e){return Array.isArray(e)?J$(e):encodeURIComponent(String(e))}function Ak(e,t,r){if(r===!1||r===null)return e;var n=/\?/.test(e)?"&":"?",o=encodeURIComponent(t);return r!==void 0&&r!==""&&r!==!0&&(o+="="+kk(r)),""+e+n+o}function K$(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach(function(n){var o=t[n];o!==void 0&&(Array.isArray(o)&&(o=o.filter(function(u){return u!=null}).join(",")),r=Ak(r,n,o))}),r}function Q$(e,t){if(!t||e.slice(0,4)==="http")return e;var r=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+r+e}function eG(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(r,n){var o=t[n];if(o===void 0)throw new Error("Unspecified route parameter "+n);var u=kk(o);return"/"+u}):e}var tG={appendQueryObject:K$,appendQueryParam:Ak,prependOrigin:Q$,interpolateRouteParams:eG},rG=xk,Hv=xp,nG=Ly,b1=tG,Vw=C2,iG=1;function Ff(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var n=Hv(r,t.headers),o=Object.keys(n).reduce(function(u,c){return u[c.toLowerCase()]=n[c],u},{});this.id=iG++,this._options=t,this.emitter=new nG,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=o}Ff.prototype.url=function(t){var r=b1.prependOrigin(this.path,this.origin);r=b1.appendQueryObject(r,this.query);var n=this.params,o=t??this.client.accessToken;if(o){r=b1.appendQueryParam(r,"access_token",o);var u=rG(o).user;n=Hv({ownerId:u},n)}return r=b1.interpolateRouteParams(r,n),r};Ff.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(r){return t.response=r,t.emitter.emit(Vw.EVENT_RESPONSE,r),r},function(r){throw t.error=r,t.emitter.emit(Vw.EVENT_ERROR,r),r})};Ff.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Ff.prototype.eachPage=function(t){var r=this;function n(c){function s(){delete r._nextPageRequest;var f=c.nextPage();f&&(r._nextPageRequest=f,u(f))}t(null,c,s)}function o(c){t(c,null,function(){})}function u(c){c.send().then(n,o)}u(this)};Ff.prototype.clone=function(){return this._extend()};Ff.prototype._extend=function(t){var r=Hv(this._options,t);return new Ff(this.client,r)};var oG=Ff,aG=xk,sG=oG,lG=C2;function Ek(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");aG(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||lG.API_ORIGIN}Ek.prototype.createRequest=function(t){return new sG(this,t)};var Sk=Ek,Ck=G$,Ik=Sk;function mp(e){Ik.call(this,e)}mp.prototype=Object.create(Ik.prototype);mp.prototype.constructor=mp;mp.prototype.sendRequest=Ck.browserSend;mp.prototype.abortRequest=Ck.browserAbort;function uG(e){return new mp(e)}var Lk=uG,cG=Lk,fG=cG,hG=Object.prototype.toString,pG=function(e){var t;return hG.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},dG=pG,mG=xp,Tk="value",Eg=`
  `,Va={};Va.assert=function(e,t){return t=t||{},function(r){var n=Bf(e,r);if(n){var o=Wv(n,t);throw t.apiName&&(o=t.apiName+": "+o),new Error(o)}}};Va.shape=function(t){var r=_G(t);return function(o){var u=Bf(Va.plainObject,o);if(u)return u;for(var c,s,f=[],v=0;v<r.length;v++)c=r[v].key,s=r[v].value,u=Bf(s,o[c]),u&&f.push([c].concat(u));return f.length<2?f[0]:function(w){f=f.map(function(C){var F=C[0],B=Wv(C,w).split(`
`).join(Eg);return"- "+F+": "+B});var E=w.path.join("."),L=E===Tk?"":" of "+E;return"The following properties"+L+" have invalid values:"+Eg+f.join(Eg)}}};Va.strictShape=function(t){var r=Va.shape(t);return function(o){var u=r(o);if(u)return u;var c=Object.keys(o).reduce(function(s,f){return t[f]===void 0&&s.push(f),s},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};Va.arrayOf=function(t){return Pk(t)};Va.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return Pk(t)};function Pk(e){var t=Array.isArray(e),r=function(n){return t?e[n]:e};return function(o){var u=Bf(Va.plainArray,o);if(u)return u;if(t&&o.length!==e.length)return"an array with "+e.length+" items";for(var c=0;c<o.length;c++)if(u=Bf(r(c),o[c]),u)return[c].concat(u)}}Va.required=function(t){function r(n){return n==null?function(o){return Mk(o,Dk(o.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return r.__required=!0,r};Va.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(n){var o=t.map(function(u){return Bf(u,n)}).filter(Boolean);if(o.length===t.length)return o.every(function(u){return u.length===1&&typeof u[0]=="string"})?gG(o.map(function(u){return u[0]})):o.reduce(function(u,c){return c.length>u.length?c:u})}};Va.equal=function(t){return function(n){if(n!==t)return JSON.stringify(t)}};Va.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=t.map(function(n){return Va.equal(n)});return Va.oneOfType.apply(this,r)};Va.range=function(t){var r=t[0],n=t[1];return function(u){var c=Bf(Va.number,u);if(c||u<r||u>n)return"number between "+r+" & "+n+" (inclusive)"}};Va.any=function(){};Va.boolean=function(t){if(typeof t!="boolean")return"boolean"};Va.number=function(t){if(typeof t!="number")return"number"};Va.plainArray=function(t){if(!Array.isArray(t))return"array"};Va.plainObject=function(t){if(!dG(t))return"object"};Va.string=function(t){if(typeof t!="string")return"string"};Va.func=function(t){if(typeof t!="function")return"function"};function Bf(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var r=e(t);if(r)return Array.isArray(r)?r:[r]}}function Wv(e,t){var r=e.length,n=e[r-1],o=e.slice(0,r-1);return o.length===0&&(o=[Tk]),t=mG(t,{path:o}),typeof n=="function"?n(t):Mk(t,yG(n))}function gG(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function yG(e){return"must be "+vG(e)+"."}function vG(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function Mk(e,t){var r=Dk(e.path),n=e.path.join(".")+" "+t,o=r?"Item at position ":"";return o+n}function Dk(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function _G(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}Va.validate=Bf;Va.processMessage=Wv;var bG=Va,wG=xp,rp=bG;function xG(e){if(typeof window<"u")return e instanceof Hc.Blob||e instanceof Hc.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function kG(e,t){return rp.assert(rp.strictShape(e),t)}function AG(e){var t="date";if(typeof e=="boolean")return t;try{var r=new Date(e);if(r.getTime&&isNaN(r.getTime()))return t}catch{return t}}function EG(e){return rp.tuple(rp.number,rp.number)(e)}var SG=wG(rp,{file:xG,date:AG,coordinates:EG,assertShape:kG});function CG(e,t){var r=function(n,o){return t.indexOf(n)!==-1&&o!==void 0};return typeof t=="function"&&(r=t),Object.keys(e).filter(function(n){return r(n,e[n])}).reduce(function(n,o){return n[o]=e[o],n},{})}var IG=CG;function LG(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(n,e[n]),r},{})}var TG=LG,PG=TG;function MG(e){return PG(e,function(t,r){return typeof r=="boolean"?JSON.stringify(r):r})}var DG=MG,zG=Sk,NG=Lk;function RG(e){return function(t){var r;zG.prototype.isPrototypeOf(t)?r=t:r=NG(t);var n=Object.create(e);return n.client=r,n}}var OG=RG,zk=xp,Zo=SG,i2=IG,Nk=DG,FG=OG,Zv={},Rk=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Zv.forwardGeocode=function(e){Zo.assertShape({query:Zo.required(Zo.string),mode:Zo.oneOf("mapbox.places","mapbox.places-permanent"),countries:Zo.arrayOf(Zo.string),proximity:Zo.oneOf(Zo.coordinates,"ip"),types:Zo.arrayOf(Zo.oneOf(Rk)),autocomplete:Zo.boolean,bbox:Zo.arrayOf(Zo.number),limit:Zo.number,language:Zo.arrayOf(Zo.string),routing:Zo.boolean,fuzzyMatch:Zo.boolean,worldview:Zo.string})(e),e.mode=e.mode||"mapbox.places";var t=Nk(zk({country:e.countries},i2(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i2(e,["mode","query"]),query:t})};Zv.reverseGeocode=function(e){Zo.assertShape({query:Zo.required(Zo.coordinates),mode:Zo.oneOf("mapbox.places","mapbox.places-permanent"),countries:Zo.arrayOf(Zo.string),types:Zo.arrayOf(Zo.oneOf(Rk)),bbox:Zo.arrayOf(Zo.number),limit:Zo.number,language:Zo.arrayOf(Zo.string),reverseMode:Zo.oneOf("distance","score"),routing:Zo.boolean,worldview:Zo.string})(e),e.mode=e.mode||"mapbox.places";var t=Nk(zk({country:e.countries},i2(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i2(e,["mode","query"]),query:t})};var BG=FG(Zv);let jG="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ok=e=>crypto.getRandomValues(new Uint8Array(e)),Fk=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return(u=t)=>{let c="";for(;;){let s=r(o),f=o;for(;f--;)if(c+=e[s[f]&n]||"",c.length===u)return c}}},UG=(e,t=21)=>Fk(e,t,Ok),qG=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const VG=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:UG,customRandom:Fk,nanoid:qG,random:Ok,urlAlphabet:jG},Symbol.toStringTag,{value:"Module"})),$G=jA(VG);var GG=$G.nanoid;function Bk(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}Bk.prototype={select:function(e,t){var r=this.getSelectedIndex(e,t),n=this.getEventPayload("search.select",t);if(n.resultIndex=r,n.resultPlaceName=e.place_name,n.resultId=e.id,!(r===this.lastSentIndex&&n.queryString===this.lastSentInput||r==-1)&&(this.lastSentIndex=r,this.lastSentInput=n.queryString,!!n.queryString))return this.push(n)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",t);if(r.lastAction=e.key,!!r.queryString)return this.push(r)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var r=this.getRequestOptions(e);this.request(r,function(n){if(n)return this.handleError(n,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var r;t.options.proximity?typeof t.options.proximity=="object"?r=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?r=[999,999]:r=t.options.proximity:r=null;var n=t._map?t._map.getZoom():void 0,o={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:r,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:n,keyboardLocale:this.locale};return e==="search.select"?o.queryString=t.inputString:e!="search.select"&&t._inputEl?o.queryString=t._inputEl.value:o.queryString=t.inputString,o},request:function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},r.open(e.method,e.host+"/"+e.path,!0);for(var n in e.headers){var o=e.headers[n];r.setRequestHeader(n,o)}r.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return GG()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var r=t._typeahead.data,n=e.id,o=r.map(function(c){return c.id}),u=o.indexOf(n);return u}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var HG=Bk,WG={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},ZG={placeholder:WG},Ty={},XG={get exports(){return Ty},set exports(e){Ty=e}};(function(e){(function(t,r,n){e.exports?e.exports=n():t[r]=n()})(Hc,"subtag",function(){var t="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(f){return f.match(r)||[]}function o(f){return n(f).filter(function(v,w){return v&&w})}function u(f){return f=n(f),{language:f[1]||t,extlang:f[2]||t,script:f[3]||t,region:f[4]||t}}function c(f,v,w){Object.defineProperty(f,v,{value:w,enumerable:!0})}function s(f,v,w){function E(L){return n(L)[f]||t}c(E,"pattern",v),c(u,w,E)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(u,"split",o),u})})(XG);function jk(){}jk.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,r){window.navigator.geolocation.getCurrentPosition(t,r,e)})}};var YG=jk;function JG(e,t){const r=Uk(e),n=["address","street","place","country"];var o;if(typeof t=="function")return t(r);const u=n.indexOf(t);return u===-1?o=n:o=n.slice(u),o.reduce(function(c,s){return r[s]?(c!==""&&(c=c+", "),c+r[s]):c},"")}function Uk(e){const t=e.address||"",r=e.text||"",n=e.place_name||"",u={address:n.split(",")[0],houseNumber:t,street:r,placeName:n};return e.context.forEach(function(c){const s=c.id.split(".")[0];u[s]=c.text}),u}const KG=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var QG={transformFeatureToGeolocationText:JG,getAddressInfo:Uk,REVERSE_GEOCODE_COORD_RGX:KG},eH=r$,tH=b$,eh=xp,rH=t2.EventEmitter,$w=I$,Sg=fG,Cg=BG,nH=HG,iH=ZG,oH=Ty,aH=YG,Gw=QG;const Af={FORWARD:0,LOCAL:1,REVERSE:2};function sH(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function qk(e){this._eventEmitter=new rH,this.options=eh({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new aH}qk.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(r,n){if(!document.body.contains(n))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=r.onAdd();n.appendChild(o)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element ",e,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=Cg(Sg({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new nH(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",tH(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(v){this.eventManager.keyevent(v,this)}.bind(this));var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(n),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var u=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(u),n.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new eH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var s=c.list.draw,f=this._footerNode=sH();return c.list.draw=function(){s.call(this),f.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),f.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(f)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const n=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(n),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(r).send().then(function(n){const o=n.body.features[0];if(o){const u=Gw.transformFeatureToGeolocationText(o,this.options.addressAccuracy);this._setInputValue(u),o.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:o})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=t,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,r=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var n=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,o=n?n.value:"";if(!o)return this.fresh=!0,e.keyCode!==r&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[r,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&$w[e.properties.short_code])t=eh({},this.options.flyTo),this._map&&this._map.fitBounds($w[e.properties.short_code].bbox,t);else if(e.bbox){var r=e.bbox;t=eh({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{var n={zoom:this.options.zoom};t=eh({},n,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var r;return e.localGeocoderOnly?r=Af.LOCAL:e.reverseGeocode&&Gw.REVERSE_GEOCODE_COORD_RGX.test(t)?r=Af.REVERSE:r=Af.FORWARD,r},_setupConfig:function(e,t){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],n=/[\s,]+/;var o=this,u=r.reduce(function(s,f){if(o.options[f]===void 0||o.options[f]===null)return s;["countries","types","language"].indexOf(f)>-1?s[f]=o.options[f].split(n):s[f]=o.options[f];const v=typeof o.options[f].longitude=="number"&&typeof o.options[f].latitude=="number";if(f==="proximity"&&v){const w=o.options[f].longitude,E=o.options[f].latitude;s[f]=[w,E]}return s},{});switch(e){case Af.REVERSE:{var c=t.split(n).map(function(s){return parseFloat(s,10)});o.options.flipCoordinates||c.reverse(),u.types&&u.types[0],u=eh(u,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(s){s in u&&delete u[s]})}break;case Af.FORWARD:{const s=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(s)&&(t=t.replace(/,/g," ")),u=eh(u,{query:t})}break}return u},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),r=this._setupConfig(t,e);var n;switch(t){case Af.LOCAL:n=Promise.resolve();break;case Af.FORWARD:n=this.geocoderService.forwardGeocode(r).send();break;case Af.REVERSE:n=this.geocoderService.reverseGeocode(r).send();break}var o=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],u=[],c=null;return n.catch(function(s){c=s}.bind(this)).then(function(s){this._hideLoadingIcon();var f={};return s?s.statusCode=="200"&&(f=s.body,f.request=s.request,f.headers=s.headers):f={type:"FeatureCollection",features:[]},f.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),f.features=f.features?o.concat(f.features):o,this.options.externalGeocoder?(u=this.options.externalGeocoder(e,f.features)||Promise.resolve([]),u.then(function(v){return f.features=f.features?v.concat(f.features):v,f},function(){return f})):f}.bind(this)).then(function(s){if(c)throw c;this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter)),s.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",s),this._typeahead.update(s.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))}.bind(this)).catch(function(s){this._hideLoadingIcon(),this._hideAttribution(),o.length&&this.options.localGeocoder||u.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(o)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:s})}.bind(this)),n},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=oH.language(e),r=iH.placeholder[t];if(r)return r}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=Cg(Sg({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=Cg(Sg({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},r=eh({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var lH=qk;function uH(e){let t,r,n;return r=new HV({}),{c(){t=ct("div"),Bt(r.$$.fragment),this.h()},l(o){t=ft(o,"DIV",{slot:!0});var u=wt(t);Yt(r.$$.fragment,u),u.forEach(de),this.h()},h(){ye(t,"slot","sidebar")},m(o,u){It(o,t,u),jt(r,t,null),n=!0},p:Xn,i(o){n||(Ze(r.$$.fragment,o),n=!0)},o(o){at(r.$$.fragment,o),n=!1},d(o){o&&de(t),Ut(r)}}}function cH(e){return{c:Xn,l:Xn,m:Xn,p:Xn,i:Xn,o:Xn,d:Xn}}function fH(e){let t,r,n,o,u,c,s,f,v,w,E;function L(Y){e[7](Y)}function C(Y){e[8](Y)}let F={};e[5]!==void 0&&(F.map=e[5]),e[0].popup.target!==void 0&&(F.targetLayers=e[0].popup.target),t=new WA({props:F}),Ft.push(()=>Jt(t,"map",L)),Ft.push(()=>Jt(t,"targetLayers",C));function B(Y){e[9](Y)}function G(Y){e[10](Y)}let H={position:"top-right"};e[5]!==void 0&&(H.map=e[5]),e[4]!==void 0&&(H.customiseUrl=e[4]),u=new V9({props:H}),Ft.push(()=>Jt(u,"map",B)),Ft.push(()=>Jt(u,"customiseUrl",G));function Z(Y){e[11](Y)}let ee={showPrintableArea:!0,showCrosshair:!0,position:"top-right"};return e[5]!==void 0&&(ee.map=e[5]),v=new R9({props:ee}),Ft.push(()=>Jt(v,"map",Z)),{c(){Bt(t.$$.fragment),o=pr(),Bt(u.$$.fragment),f=pr(),Bt(v.$$.fragment)},l(Y){Yt(t.$$.fragment,Y),o=dr(Y),Yt(u.$$.fragment,Y),f=dr(Y),Yt(v.$$.fragment,Y)},m(Y,le){jt(t,Y,le),It(Y,o,le),jt(u,Y,le),It(Y,f,le),jt(v,Y,le),E=!0},p(Y,le){const ce={};!r&&le&32&&(r=!0,ce.map=Y[5],er(()=>r=!1)),!n&&le&1&&(n=!0,ce.targetLayers=Y[0].popup.target,er(()=>n=!1)),t.$set(ce);const ve={};!c&&le&32&&(c=!0,ve.map=Y[5],er(()=>c=!1)),!s&&le&16&&(s=!0,ve.customiseUrl=Y[4],er(()=>s=!1)),u.$set(ve);const pe={};!w&&le&32&&(w=!0,pe.map=Y[5],er(()=>w=!1)),v.$set(pe)},i(Y){E||(Ze(t.$$.fragment,Y),Ze(u.$$.fragment,Y),Ze(v.$$.fragment,Y),E=!0)},o(Y){at(t.$$.fragment,Y),at(u.$$.fragment,Y),at(v.$$.fragment,Y),E=!1},d(Y){Ut(t,Y),Y&&de(o),Ut(u,Y),Y&&de(f),Ut(v,Y)}}}function hH(e){return{c:Xn,l:Xn,m:Xn,p:Xn,i:Xn,o:Xn,d:Xn}}function pH(e){let t,r,n,o,u,c={ctx:e,current:null,token:null,hasCatch:!1,pending:hH,then:fH,catch:cH,blocks:[,,,]};return R_(o=e[3],c),{c(){t=ct("div"),r=ct("div"),n=pr(),c.block.c(),this.h()},l(s){t=ft(s,"DIV",{slot:!0});var f=wt(t);r=ft(f,"DIV",{class:!0,id:!0}),wt(r).forEach(de),n=dr(f),c.block.l(f),f.forEach(de),this.h()},h(){ye(r,"class","map svelte-19j8uwj"),ye(r,"id","map"),ye(t,"slot","map")},m(s,f){It(s,t,f),Qe(t,r),e[6](r),Qe(t,n),c.block.m(t,c.anchor=null),c.mount=()=>t,c.anchor=null,u=!0},p(s,f){e=s,c.ctx=e,f&8&&o!==(o=e[3])&&R_(o,c)||OA(c,e,f)},i(s){u||(Ze(c.block),u=!0)},o(s){for(let f=0;f<3;f+=1){const v=c.blocks[f];at(v)}u=!1},d(s){s&&de(t),e[6](null),c.block.d(),c.token=null,c=null}}}function dH(e){let t,r,n,o;function u(f){e[12](f)}function c(f){e[13](f)}let s={position:"top-right",$$slots:{map:[pH],sidebar:[uH]},$$scope:{ctx:e}};return e[5]!==void 0&&(s.map=e[5]),e[2]!==void 0&&(s.isMenuShown=e[2]),t=new dE({props:s}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"isMenuShown",c)),{c(){Bt(t.$$.fragment)},l(f){Yt(t.$$.fragment,f)},m(f,v){jt(t,f,v),o=!0},p(f,[v]){const w={};v&262203&&(w.$$scope={dirty:v,ctx:f}),!r&&v&32&&(r=!0,w.map=f[5],er(()=>r=!1)),!n&&v&4&&(n=!0,w.isMenuShown=f[2],er(()=>n=!1)),t.$set(w)},i(f){o||(Ze(t.$$.fragment,f),o=!0)},o(f){at(t.$$.fragment,f),o=!1},d(f){Ut(t,f)}}}function mH(e,t,r){let n,o;vl(e,nd,Y=>r(14,n=Y)),vl(e,nc,Y=>r(5,o=Y));let u,c=!1,s;const v=new px().getInitialStyle(ji.styles);nd.update(()=>v);const w=()=>{if(u)return new Promise(Y=>{ch(nc,o=new Ic.Map({container:u,style:v.uri,center:ji.center,zoom:ji.zoom,hash:!0,attributionControl:!1}),o),o.addControl(new Ic.AttributionControl({compact:!0}),"bottom-right"),o.addControl(new Ic.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),o.addControl(new Ic.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"bottom-right"),ji.terrain&&(o.setMaxPitch(85),o.addControl(new Ic.TerrainControl(ji.terrain),"bottom-right")),ji.areaSwitcher&&o.addControl(new qA(ji.areaSwitcher.areas),"bottom-right"),o.addControl(new Ic.FullscreenControl({container:document.querySelector("body")}),"bottom-right"),o.addControl(new Ic.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),new WV(o).create(),ji.search&&fetch(ji.search.url).then(pe=>pe.json()).then(pe=>{function Ne(Ve){for(var be=[],Ce=0;Ce<pe.features.length;Ce++){var Oe=pe.features[Ce];ji.search.target.forEach(nt=>{var mt=Oe.properties[nt];mt&&mt.toString().toLowerCase().search(Ve.toString().toLowerCase())!==-1&&(Oe.place_name=ji.search.format(Oe.properties),Oe.center=Oe.geometry.coordinates,Oe.place_type=ji.search.place_type,be.push(Oe))})}return be}o.addControl(new lH({localGeocoder:Ne,localGeocoderOnly:!0,zoom:ji.search.zoom,placeholder:ji.search.placeholder,limit:ji.search.limit,mapboxgl:Zw,collapsed:!0}),"top-left")}),o.on("load",()=>{Y()});let ce=["wss","pipeline","watersource"],ve;o.on("mousemove","wss",function(pe){pe.features.length>0&&(ve&&ce.forEach(Ne=>{o.setFeatureState({source:"assets",sourceLayer:Ne,id:ve},{hover:!1})}),ve=pe.features[0].id,ce.forEach(Ne=>{o.setFeatureState({source:"assets",sourceLayer:Ne,id:ve},{hover:!0})}))}),o.on("mouseleave","wss",function(){ve&&ce.forEach(pe=>{o.setFeatureState({source:"assets",sourceLayer:pe,id:ve},{hover:!1})}),ve=null})})};let E=Y=>{const le=new URL(Y);return le.searchParams.set("style",n.title),le.toString()};jf(()=>{r(3,s=w())});function L(Y){Ft[Y?"unshift":"push"](()=>{u=Y,r(1,u)})}function C(Y){o=Y,nc.set(o)}function F(Y){e.$$.not_equal(ji.popup.target,Y)&&(ji.popup.target=Y,r(0,ji))}function B(Y){o=Y,nc.set(o)}function G(Y){E=Y,r(4,E)}function H(Y){o=Y,nc.set(o)}function Z(Y){o=Y,nc.set(o)}function ee(Y){c=Y,r(2,c)}return[ji,u,c,s,E,o,L,C,F,B,G,H,Z,ee]}class gH extends Pn{constructor(t){super(),Mn(this,t,mH,dH,Cn,{})}}function yH(e){let t,r,n,o,u,c,s,f,v;return f=new gH({}),{c(){t=ct("sveltekit:head"),r=ct("script"),o=pr(),u=ct("script"),c=Nn(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),s=pr(),Bt(f.$$.fragment),this.h()},l(w){t=ft(w,"SVELTEKIT:HEAD",{});var E=wt(t);r=ft(E,"SCRIPT",{src:!0});var L=wt(r);L.forEach(de),o=dr(E),u=ft(E,"SCRIPT",{});var C=wt(u);c=Rn(C,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'UA-170080825-3');`),C.forEach(de),E.forEach(de),s=dr(w),Yt(f.$$.fragment,w),this.h()},h(){r.async=!0,Hw(r.src,n="https://www.googletagmanager.com/gtag/js?id=UA-170080825-3")||ye(r,"src",n)},m(w,E){It(w,t,E),Qe(t,r),Qe(t,o),Qe(t,u),Qe(u,c),It(w,s,E),jt(f,w,E),v=!0},p:Xn,i(w){v||(Ze(f.$$.fragment,w),v=!0)},o(w){at(f.$$.fragment,w),v=!1},d(w){w&&de(t),w&&de(s),Ut(f,w)}}}function vH(e){const t=ji.styles[0];return nd.update(()=>t),jf(async()=>{window.global=window;const r=await(await rd(()=>import("./index.95d721c5.js").then(n=>n.i),[],import.meta.url)).Buffer;window.Buffer=r}),[]}class LH extends Pn{constructor(t){super(),Mn(this,t,vH,yH,Cn,{})}}export{LH as P,_a as _,Hc as c};
